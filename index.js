"use strict";var Gc=Object.defineProperty;var Jc=(e,t,i)=>t in e?Gc(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i;var ne=(e,t,i)=>(Jc(e,typeof t!="symbol"?t+"":t,i),i);const ft=require("siyuan"),$c="jupyter-client",Xc="Zuoqiu Yingyi",Qc="https://github.com/Zuoqiu-Yingyi/siyuan-plugin-jupyter-client",eh="0.2.2",th="2.10.13",ih=["代码","代碼","程式碼","执行代码","執行代碼","執行程式碼","code","execute","jupyter","notebook","lab","hub"],sh=["all"],rh=["all"],nh={default:"Jupyter Client",zh_CN:"Jupyter 客户端",zh_CHT:"Jupyter 客戶端"},oh={default:"The plugin can connect to the Jupyter service, run the code block, output and save the run result.",zh_CN:"该插件可以连接 Jupyter 服务，运行代码块，输出并保存运行结果。",zh_CHT:"該插件可以連接 Jupyter 服務，運行代碼塊，輸出並保存運行結果。"},ah={default:"README.md",zh_CN:"README_zh_CN.md",zh_CHT:"README_zh_CN.md"},lh={openCollective:"",patreon:"",github:"",custom:["https://afdian.net/a/zuoqiu","https://ko-fi.com/zuoqiu"]},za={name:$c,author:Xc,url:Qc,version:eh,minAppVersion:th,keywords:ih,backends:sh,frontends:rh,displayName:nh,description:oh,readme:ah,funding:lh},ch=`<symbol
    id="icon-jupyter-client"
    viewBox="0 0 44 51"
    xmlns="http://www.w3.org/2000/svg"
    xmlns:xlink="http://www.w3.org/1999/xlink"
    xmlns:figma="http://www.figma.com/figma/ns"
>
    <title>Group.svg</title>
    <desc>Created using Figma 0.90</desc>
    <g transform="translate(-1640 -2453)" figma:type="canvas">
        <g style="mix-blend-mode:normal;" figma:type="group">
            <g style="mix-blend-mode:normal;" figma:type="group">
                <g style="mix-blend-mode:normal;" figma:type="group">
                    <g style="mix-blend-mode:normal;" figma:type="group">
                        <g style="mix-blend-mode:normal;" figma:type="group">
                            <g style="mix-blend-mode:normal;" figma:type="vector">
                                <use xlink:href="#jupyter-client-path0_fill" transform="translate(1640.54 2474.36)"
                                    fill="#4E4E4E" style="mix-blend-mode:normal;" />
                            </g>
                        </g>
                        <g style="mix-blend-mode:normal;" figma:type="group">
                            <g style="mix-blend-mode:normal;" figma:type="vector">
                                <use xlink:href="#jupyter-client-path1_fill" transform="translate(1645.68 2474.37)"
                                    fill="#4E4E4E" style="mix-blend-mode:normal;" />
                            </g>
                        </g>
                        <g style="mix-blend-mode:normal;" figma:type="group">
                            <g style="mix-blend-mode:normal;" figma:type="vector">
                                <use xlink:href="#jupyter-client-path2_fill" transform="translate(1653.39 2474.26)"
                                    fill="#4E4E4E" style="mix-blend-mode:normal;" />
                            </g>
                        </g>
                        <g style="mix-blend-mode:normal;" figma:type="group">
                            <g style="mix-blend-mode:normal;" figma:type="vector">
                                <use xlink:href="#jupyter-client-path3_fill" transform="translate(1660.43 2474.39)"
                                    fill="#4E4E4E" style="mix-blend-mode:normal;" />
                            </g>
                        </g>
                        <g style="mix-blend-mode:normal;" figma:type="group">
                            <g style="mix-blend-mode:normal;" figma:type="vector">
                                <use xlink:href="#jupyter-client-path4_fill" transform="translate(1667.55 2472.54)"
                                    fill="#4E4E4E" style="mix-blend-mode:normal;" />
                            </g>
                        </g>
                        <g style="mix-blend-mode:normal;" figma:type="group">
                            <g style="mix-blend-mode:normal;" figma:type="vector">
                                <use xlink:href="#jupyter-client-path5_fill" transform="translate(1672.47 2474.29)"
                                    fill="#4E4E4E" style="mix-blend-mode:normal;" />
                            </g>
                        </g>
                        <g style="mix-blend-mode:normal;" figma:type="group">
                            <g style="mix-blend-mode:normal;" figma:type="vector">
                                <use xlink:href="#jupyter-client-path6_fill" transform="translate(1679.98 2474.24)"
                                    fill="#4E4E4E" style="mix-blend-mode:normal;" />
                            </g>
                        </g>
                    </g>
                </g>
                <g style="mix-blend-mode:normal;" figma:type="group">
                    <g style="mix-blend-mode:normal;" figma:type="group">
                        <g style="mix-blend-mode:normal;" figma:type="vector">
                            <use xlink:href="#jupyter-client-path7_fill" transform="translate(1673.48 2453.69)"
                                fill="#767677" style="mix-blend-mode:normal;" />
                        </g>
                    </g>
                    <g style="mix-blend-mode:normal;" figma:type="group">
                        <g style="mix-blend-mode:normal;" figma:type="vector">
                            <use xlink:href="#jupyter-client-path8_fill" transform="translate(1643.21 2484.27)"
                                fill="#F37726" style="mix-blend-mode:normal;" />
                        </g>
                    </g>
                    <g style="mix-blend-mode:normal;" figma:type="group">
                        <g style="mix-blend-mode:normal;" figma:type="vector">
                            <use xlink:href="#jupyter-client-path9_fill" transform="translate(1643.21 2457.88)"
                                fill="#F37726" style="mix-blend-mode:normal;" />
                        </g>
                    </g>
                    <g style="mix-blend-mode:normal;" figma:type="group">
                        <g style="mix-blend-mode:normal;" figma:type="vector">
                            <use xlink:href="#jupyter-client-path10_fill" transform="translate(1643.28 2496.09)"
                                fill="#9E9E9E" style="mix-blend-mode:normal;" />
                        </g>
                    </g>
                    <g style="mix-blend-mode:normal;" figma:type="group">
                        <g style="mix-blend-mode:normal;" figma:type="vector">
                            <use xlink:href="#jupyter-client-path11_fill" transform="translate(1641.87 2458.43)"
                                fill="#616262" style="mix-blend-mode:normal;" />
                        </g>
                    </g>
                </g>
            </g>
        </g>
    </g>
    <defs>
        <path id="jupyter-client-path0_fill"
            d="M 1.74498 5.47533C 1.74498 7.03335 1.62034 7.54082 1.29983 7.91474C 0.943119 8.23595 0.480024 8.41358 0 8.41331L 0.124642 9.3036C 0.86884 9.31366 1.59095 9.05078 2.15452 8.56466C 2.45775 8.19487 2.6834 7.76781 2.818 7.30893C 2.95261 6.85005 2.99341 6.36876 2.93798 5.89377L 2.93798 0L 1.74498 0L 1.74498 5.43972L 1.74498 5.47533Z" />
        <path id="jupyter-client-path1_fill"
            d="M 5.50204 4.76309C 5.50204 5.43081 5.50204 6.02731 5.55545 6.54368L 4.496 6.54368L 4.42478 5.48423C 4.20318 5.85909 3.88627 6.16858 3.50628 6.38125C 3.12628 6.59392 2.69675 6.70219 2.26135 6.69503C 1.22861 6.69503 0 6.13415 0 3.84608L 0 0.0445149L 1.193 0.0445149L 1.193 3.6057C 1.193 4.84322 1.57583 5.67119 2.65309 5.67119C 2.87472 5.67358 3.09459 5.63168 3.29982 5.54796C 3.50505 5.46424 3.69149 5.34039 3.84822 5.18366C 4.00494 5.02694 4.1288 4.84049 4.21252 4.63527C 4.29623 4.43004 4.33813 4.21016 4.33575 3.98853L 4.33575 0L 5.52874 0L 5.52874 4.72748L 5.50204 4.76309Z" />
        <path id="jupyter-client-path2_fill"
            d="M 0.0534178 2.27264C 0.0534178 1.44466 0.0534178 0.768036 0 0.153731L 1.06836 0.153731L 1.12177 1.2666C 1.3598 0.864535 1.70247 0.534594 2.11325 0.311954C 2.52404 0.0893145 2.98754 -0.0176786 3.45435 0.00238095C 5.03908 0.00238095 6.23208 1.32892 6.23208 3.30538C 6.23208 5.63796 4.7987 6.79535 3.24958 6.79535C 2.85309 6.81304 2.45874 6.7281 2.10469 6.54874C 1.75064 6.36937 1.44888 6.10166 1.22861 5.77151L 1.22861 5.77151L 1.22861 9.33269L 0.0534178 9.33269L 0.0534178 2.29935L 0.0534178 2.27264ZM 1.22861 4.00872C 1.23184 4.17026 1.24972 4.33117 1.28203 4.48948C 1.38304 4.88479 1.61299 5.23513 1.93548 5.48506C 2.25798 5.735 2.65461 5.87026 3.06262 5.86944C 4.31794 5.86944 5.05689 4.8456 5.05689 3.3588C 5.05689 2.05897 4.36246 0.946096 3.10714 0.946096C 2.61036 0.986777 2.14548 1.20726 1.79965 1.5662C 1.45382 1.92514 1.25079 2.3979 1.22861 2.89585L 1.22861 4.00872Z" />
        <path id="jupyter-client-path3_fill"
            d="M 1.31764 0.0178059L 2.75102 3.85499C 2.90237 4.28233 3.06262 4.7987 3.16946 5.18153C 3.2941 4.7898 3.42764 4.29123 3.5879 3.82828L 4.88773 0.0178059L 6.14305 0.0178059L 4.36246 4.64735C 3.47216 6.87309 2.92908 8.02158 2.11 8.71601C 1.69745 9.09283 1.19448 9.35658 0.649917 9.48166L 0.356119 8.48453C 0.736886 8.35942 1.09038 8.16304 1.39777 7.90584C 1.8321 7.55188 2.17678 7.10044 2.4038 6.5882C 2.45239 6.49949 2.48551 6.40314 2.50173 6.3033C 2.49161 6.19586 2.46457 6.0907 2.42161 5.9917L 0 0L 1.29983 0L 1.31764 0.0178059Z" />
        <path id="jupyter-client-path4_fill"
            d="M 2.19013 0L 2.19013 1.86962L 3.8995 1.86962L 3.8995 2.75992L 2.19013 2.75992L 2.19013 6.26769C 2.19013 7.06896 2.42161 7.53191 3.08043 7.53191C 3.31442 7.53574 3.54789 7.5088 3.77486 7.45179L 3.82828 8.34208C 3.48794 8.45999 3.12881 8.51431 2.76882 8.50234C 2.53042 8.51726 2.29161 8.48043 2.06878 8.39437C 1.84595 8.30831 1.64438 8.17506 1.47789 8.00377C 1.11525 7.51873 0.949826 6.91431 1.01494 6.31221L 1.01494 2.75102L 0 2.75102L 0 1.86072L 1.03274 1.86072L 1.03274 0.275992L 2.19013 0Z" />
        <path id="jupyter-client-path5_fill"
            d="M 1.17716 3.57899C 1.153 3.88093 1.19468 4.18451 1.29933 4.46876C 1.40398 4.75301 1.5691 5.01114 1.78329 5.22532C 1.99747 5.43951 2.2556 5.60463 2.53985 5.70928C 2.8241 5.81393 3.12768 5.85561 3.42962 5.83145C 4.04033 5.84511 4.64706 5.72983 5.21021 5.49313L 5.41498 6.38343C 4.72393 6.66809 3.98085 6.80458 3.23375 6.78406C 2.79821 6.81388 2.36138 6.74914 1.95322 6.59427C 1.54505 6.43941 1.17522 6.19809 0.869071 5.88688C 0.562928 5.57566 0.327723 5.2019 0.179591 4.79125C 0.0314584 4.38059 -0.0260962 3.94276 0.0108748 3.50777C 0.0108748 1.54912 1.17716 0 3.0824 0C 5.21911 0 5.75329 1.86962 5.75329 3.06262C 5.76471 3.24644 5.76471 3.43079 5.75329 3.61461L 1.15046 3.61461L 1.17716 3.57899ZM 4.66713 2.6887C 4.70149 2.45067 4.68443 2.20805 4.61709 1.97718C 4.54976 1.74631 4.43372 1.53255 4.2768 1.35031C 4.11987 1.16808 3.92571 1.0216 3.70739 0.920744C 3.48907 0.81989 3.25166 0.767006 3.01118 0.765656C 2.52201 0.801064 2.06371 1.01788 1.72609 1.37362C 1.38847 1.72935 1.19588 2.19835 1.18607 2.6887L 4.66713 2.6887Z" />
        <path id="jupyter-client-path6_fill"
            d="M 0.0534178 2.19228C 0.0534178 1.42663 0.0534178 0.767806 0 0.162404L 1.06836 0.162404L 1.06836 1.43553L 1.12177 1.43553C 1.23391 1.04259 1.4656 0.694314 1.78468 0.439049C 2.10376 0.183783 2.4944 0.034196 2.90237 0.0110538C 3.01466 -0.00368459 3.12839 -0.00368459 3.24068 0.0110538L 3.24068 1.12393C 3.10462 1.10817 2.9672 1.10817 2.83114 1.12393C 2.427 1.13958 2.04237 1.30182 1.7491 1.58035C 1.45583 1.85887 1.27398 2.23462 1.23751 2.63743C 1.20422 2.8196 1.18635 3.00425 1.1841 3.18941L 1.1841 6.65267L 0.00890297 6.65267L 0.00890297 2.20118L 0.0534178 2.19228Z" />
        <path id="jupyter-client-path7_fill"
            d="M 6.03059 2.83565C 6.06715 3.43376 5.92485 4.02921 5.6218 4.54615C 5.31875 5.0631 4.86869 5.47813 4.32893 5.73839C 3.78917 5.99864 3.18416 6.09233 2.59097 6.00753C 1.99778 5.92272 1.44326 5.66326 0.998048 5.26219C 0.552837 4.86113 0.23709 4.33661 0.0910307 3.75546C -0.0550287 3.17431 -0.0247891 2.56283 0.177897 1.99893C 0.380583 1.43503 0.746541 0.944221 1.22915 0.589037C 1.71176 0.233853 2.28918 0.0303686 2.88784 0.00450543C 3.28035 -0.0170932 3.67326 0.0391144 4.04396 0.169896C 4.41467 0.300677 4.75587 0.503453 5.04794 0.766561C 5.34 1.02967 5.57718 1.34792 5.74582 1.70301C 5.91446 2.0581 6.01124 2.44303 6.03059 2.83565L 6.03059 2.83565Z" />
        <path id="jupyter-client-path8_fill"
            d="M 18.6962 7.12238C 10.6836 7.12238 3.64131 4.24672 0 0C 1.41284 3.82041 3.96215 7.1163 7.30479 9.44404C 10.6474 11.7718 14.623 13.0196 18.6962 13.0196C 22.7695 13.0196 26.745 11.7718 30.0877 9.44404C 33.4303 7.1163 35.9796 3.82041 37.3925 4.0486e-13C 33.7601 4.24672 26.7445 7.12238 18.6962 7.12238Z" />
        <path id="jupyter-client-path9_fill"
            d="M 18.6962 5.89725C 26.7089 5.89725 33.7512 8.77291 37.3925 13.0196C 35.9796 9.19922 33.4303 5.90333 30.0877 3.57559C 26.745 1.24785 22.7695 4.0486e-13 18.6962 0C 14.623 4.0486e-13 10.6474 1.24785 7.30479 3.57559C 3.96215 5.90333 1.41284 9.19922 0 13.0196C 3.64131 8.76401 10.648 5.89725 18.6962 5.89725Z" />
        <path id="jupyter-client-path10_fill"
            d="M 7.59576 3.56656C 7.64276 4.31992 7.46442 5.07022 7.08347 5.72186C 6.70251 6.3735 6.13619 6.89698 5.45666 7.22561C 4.77713 7.55424 4.01515 7.67314 3.26781 7.56716C 2.52046 7.46117 1.82158 7.13511 1.26021 6.63051C 0.698839 6.12591 0.300394 5.46561 0.115637 4.73375C -0.0691191 4.00188 -0.0318219 3.23159 0.222777 2.52099C 0.477376 1.8104 0.93775 1.19169 1.54524 0.743685C 2.15274 0.295678 2.87985 0.0386595 3.63394 0.00537589C 4.12793 -0.0210471 4.62229 0.0501173 5.08878 0.214803C 5.55526 0.37949 5.98473 0.63447 6.35264 0.965179C 6.72055 1.29589 7.01971 1.69584 7.233 2.1422C 7.4463 2.58855 7.56957 3.07256 7.59576 3.56656L 7.59576 3.56656Z" />
        <path id="jupyter-client-path11_fill"
            d="M 2.25061 4.37943C 1.81886 4.39135 1.39322 4.27535 1.02722 4.04602C 0.661224 3.81668 0.371206 3.48424 0.193641 3.09052C 0.0160762 2.69679 -0.0411078 2.25935 0.0292804 1.83321C 0.0996686 1.40707 0.294486 1.01125 0.589233 0.695542C 0.883981 0.37983 1.2655 0.158316 1.68581 0.0588577C 2.10611 -0.0406005 2.54644 -0.0135622 2.95143 0.136572C 3.35641 0.286707 3.70796 0.553234 3.96186 0.902636C 4.21577 1.25204 4.3607 1.66872 4.37842 2.10027C 4.39529 2.6838 4.18131 3.25044 3.78293 3.67715C 3.38455 4.10387 2.83392 4.35623 2.25061 4.37943Z" />
    </defs>
</symbol>
`,hh=`<symbol
    id="icon-jupyter-client-inspect"
    viewBox="0 0 24 24"
>
    <path
        d="M20 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm-5 14H4v-4h11v4zm0-5H4V9h11v4zm5 5h-4V9h4v9z"
    />
</symbol>
`,uh=`<symbol
    id="icon-jupyter-client-text"
    viewBox="0 0 1024 1024"
>
    <path
        d="M853.333333 1024 170.666667 1024c-93.866667 0-170.666667-76.8-170.666667-170.666667L0 170.666667c0-93.866667 76.8-170.666667 170.666667-170.666667l682.666667 0c93.866667 0 170.666667 76.8 170.666667 170.666667l0 682.666667C1024 947.2 947.2 1024 853.333333 1024zM170.666667 85.333333C123.733333 85.333333 85.333333 123.733333 85.333333 170.666667l0 682.666667c0 46.933333 38.4 85.333333 85.333333 85.333333l682.666667 0c46.933333 0 85.333333-38.4 85.333333-85.333333L938.666667 170.666667c0-46.933333-38.4-85.333333-85.333333-85.333333L170.666667 85.333333zM725.333333 341.333333 298.666667 341.333333C273.066667 341.333333 256 324.266667 256 298.666667s17.066667-42.666667 42.666667-42.666667l426.666667 0c25.6 0 42.666667 17.066667 42.666667 42.666667S750.933333 341.333333 725.333333 341.333333zM298.666667 384C273.066667 384 256 366.933333 256 341.333333L256 298.666667c0-25.6 17.066667-42.666667 42.666667-42.666667s42.666667 17.066667 42.666667 42.666667l0 42.666667C341.333333 366.933333 324.266667 384 298.666667 384zM725.333333 384c-25.6 0-42.666667-17.066667-42.666667-42.666667L682.666667 298.666667c0-25.6 17.066667-42.666667 42.666667-42.666667s42.666667 17.066667 42.666667 42.666667l0 42.666667C768 366.933333 750.933333 384 725.333333 384zM512 768c-25.6 0-42.666667-17.066667-42.666667-42.666667L469.333333 298.666667c0-25.6 17.066667-42.666667 42.666667-42.666667s42.666667 17.066667 42.666667 42.666667l0 426.666667C554.666667 750.933333 537.6 768 512 768zM554.666667 768l-85.333333 0c-25.6 0-42.666667-17.066667-42.666667-42.666667s17.066667-42.666667 42.666667-42.666667l85.333333 0c25.6 0 42.666667 17.066667 42.666667 42.666667S580.266667 768 554.666667 768z"
    />
</symbol>
`,fh=`<symbol
    id="icon-jupyter-client-simple"
    viewBox="0 0 152 165"
    xmlns="http://www.w3.org/2000/svg"
    xmlns:xlink="http://www.w3.org/1999/xlink"
>
  <g class="jp-jupyter-icon-color" fill="#F37726">
    <path transform="translate(0.078947, 110.582927)" d="M75.9422842,29.5804561 C43.3023947,29.5804561 14.7967832,17.6534634 0,0 C5.51083211,15.8406829 15.7815389,29.5667732 29.3904947,39.2784171 C42.9997,48.9898537 59.2737,54.2067805 75.9605789,54.2067805 C92.6474579,54.2067805 108.921458,48.9898537 122.530663,39.2784171 C136.139453,29.5667732 146.410284,15.8406829 151.921158,0 C137.087868,17.6534634 108.582589,29.5804561 75.9422842,29.5804561 L75.9422842,29.5804561 Z" />
    <path transform="translate(0.037368, 0.704878)" d="M75.9784579,24.6264073 C108.618763,24.6264073 137.124458,36.5534415 151.921158,54.2067805 C146.410284,38.366222 136.139453,24.6401317 122.530663,14.9284878 C108.921458,5.2168439 92.6474579,0 75.9605789,0 C59.2737,0 42.9997,5.2168439 29.3904947,14.9284878 C15.7815389,24.6401317 5.51083211,38.366222 0,54.2067805 C14.8330816,36.5899293 43.3385684,24.6264073 75.9784579,24.6264073 L75.9784579,24.6264073 Z" />
  </g>
</symbol>
`,dh=`<symbol
    id="icon-jupyter-client-terminal"
    viewBox="0 0 24 24"
>
    <path
        d="M3 3H21C21.5523 3 22 3.44772 22 4V20C22 20.5523 21.5523 21 21 21H3C2.44772 21 2 20.5523 2 20V4C2 3.44772 2.44772 3 3 3ZM4 5V19H20V5H4ZM12 15H18V17H12V15ZM8.66685 12L5.83842 9.17157L7.25264 7.75736L11.4953 12L7.25264 16.2426L5.83842 14.8284L8.66685 12Z"
    />
</symbol>
`,_h=`<symbol
    id="icon-jupyter-client-kernelspec"
    viewBox="0 0 512 512"
>
    <g>
        <path
            d="M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8zm96 328c0 8.8-7.2 16-16 16H176c-8.8 0-16-7.2-16-16V176c0-8.8 7.2-16 16-16h160c8.8 0 16 7.2 16 16v160z"
        />
    </g>
</symbol>
`,ph=`<symbol
    id="icon-jupyter-client-kernel"
    viewBox="0 0 24 24"
>
    <path
        d="M15 9H9v6h6V9zm-2 4h-2v-2h2v2zm8-2V9h-2V7c0-1.1-.9-2-2-2h-2V3h-2v2h-2V3H9v2H7c-1.1 0-2 .9-2 2v2H3v2h2v2H3v2h2v2c0 1.1.9 2 2 2h2v2h2v-2h2v2h2v-2h2c1.1 0 2-.9 2-2v-2h2v-2h-2v-2h2zm-4 6H7V7h10v10z"
    />
</symbol>
`,mh=`<symbol
    id="icon-jupyter-client-kernel-unknown"
    viewBox="0 0 24 24"
    fill="none"
>
    <path
        stroke="currentColor"
        stroke-width="2"
        d="M2,3.99079514 C2,2.89130934 2.89821238,2 3.99079514,2 L20.0092049,2 C21.1086907,2 22,2.89821238 22,3.99079514 L22,20.0092049 C22,21.1086907 21.1017876,22 20.0092049,22 L3.99079514,22 C2.89130934,22 2,21.1017876 2,20.0092049 L2,3.99079514 Z M12,15 L12,14 C12,13 12,12.5 13,12 C14,11.5 15,11 15,9.5 C15,8.5 14,7 12,7 C10,7 9,8.26413718 9,10 M12,16 L12,18"
    />
</symbol>
`,gh=`<symbol
    id="icon-jupyter-client-kernel-starting"
    viewBox="0 0 1024 1024"
>
    <path
        d="M256 640c-35.413333 0-67.413333 14.506667-90.453333 37.546667C115.2 727.893333 85.333333 938.666667 85.333333 938.666667s210.773333-29.866667 261.12-80.213334A127.829333 127.829333 0 0 0 256 640z m30.293333 158.293333c-11.946667 11.946667-92.586667 32.426667-92.586666 32.426667s20.053333-80.213333 32.426666-92.586667c7.253333-8.106667 17.92-12.8 29.866667-12.8a42.794667 42.794667 0 0 1 30.293333 72.96z m456.96-215.893333c271.36-271.36 180.906667-482.56 180.906667-482.56S712.96 9.386667 441.6 280.746667l-106.24-21.333334a86.613333 86.613333 0 0 0-77.226667 23.466667L85.333333 456.106667l213.333334 91.306666L476.586667 725.333333l91.306666 213.333334 172.8-172.8c20.053333-20.053333 29.013333-49.066667 23.466667-77.226667l-20.906667-106.24zM316.16 462.08l-81.493333-34.986667 84.053333-84.053333 61.44 12.373333c-24.32 35.413333-46.08 72.533333-64 106.666667z m280.746667 327.253333l-34.986667-81.493333c34.133333-17.92 71.253333-39.68 106.24-64l12.373333 61.44-83.626666 84.053333zM682.666667 522.24c-56.32 56.32-144.213333 102.4-172.373334 116.48l-125.013333-125.013333c13.653333-27.733333 59.733333-115.626667 116.48-172.373334 199.68-199.68 351.146667-170.24 351.146667-170.24s29.44 151.466667-170.24 351.146667zM640 469.333333c46.933333 0 85.333333-38.4 85.333333-85.333333s-38.4-85.333333-85.333333-85.333333-85.333333 38.4-85.333333 85.333333 38.4 85.333333 85.333333 85.333333z"
    />
</symbol>
`,vh=`<symbol
    id="icon-jupyter-client-kernel-idle"
    viewBox="0 0 1024 1024"
>
    <path
        d="M926.3 337.9c-22.6-53.3-54.8-101.2-96-142.3-41.1-41.1-89-73.4-142.3-96-55.2-23.4-113.9-35.2-174.3-35.2S394.6 76.2 339.3 99.6c-53.3 22.6-101.2 54.8-142.3 96-41.1 41.1-73.4 89-96 142.3-23.4 55.2-35.2 113.9-35.2 174.3 0 60.4 11.8 119.1 35.2 174.3 22.6 53.3 54.8 101.2 96 142.3 41.1 41.1 89 73.4 142.3 96 55.2 23.4 113.9 35.2 174.3 35.2s119.1-11.8 174.3-35.2c53.3-22.6 101.2-54.8 142.3-96 41.1-41.1 73.4-89 96-142.3 23.4-55.2 35.2-113.9 35.2-174.3 0.1-60.4-11.8-119.1-35.1-174.3zM513.7 879.1c-202.3 0-366.9-164.6-366.9-366.9s164.6-366.9 366.9-366.9c202.3 0 366.9 164.6 366.9 366.9S716 879.1 513.7 879.1zM715.6 371.6c-15.7-15.7-41.4-15.7-57 0l-196 196-95.9-95.9c-15.7-15.7-41.4-15.7-57 0-15.7 15.7-15.7 41.4 0 57l124.5 124.5c15.7 15.7 41.4 15.7 57 0l224.5-224.5c15.6-15.7 15.6-41.4-0.1-57.1z"
    />
</symbol>
`,bh=`<symbol
    id="icon-jupyter-client-kernel-busy"
    viewBox="0 0 1024 1024"
>
    <path
        d="M492.8 214.4c19.2 0 38.4 16 38.4 38.4v243.2c0 41.6-32 73.6-73.6 73.6h-166.4c-19.2 0-38.4-16-38.4-38.4 0-19.2 16-38.4 38.4-38.4h166.4v-243.2c0-16 16-35.2 35.2-35.2zM873.6 291.2c35.2 67.2 54.4 140.8 51.2 211.2-22.4-6.4-48-3.2-73.6 0 0-60.8-12.8-121.6-44.8-176-96-182.4-323.2-249.6-505.6-153.6s-249.6 323.2-153.6 505.6c51.2 96 137.6 160 233.6 185.6l-38.4 64c-108.8-35.2-201.6-108.8-259.2-214.4-115.2-217.6-35.2-486.4 182.4-604.8s492.8-35.2 608 182.4zM755.2 150.4c60.8 48 105.6 105.6 134.4 172.8-22.4 6.4-48 16-67.2 28.8-22.4-54.4-60.8-105.6-112-144-163.2-128-396.8-99.2-524.8 64-128 163.2-99.2 396.8 64 524.8 83.2 67.2 188.8 89.6 288 73.6l-9.6 73.6c-112 12.8-227.2-16-323.2-92.8-195.2-153.6-227.2-432-76.8-627.2 153.6-192 435.2-227.2 627.2-73.6zM748.8 496c-128 0-233.6 105.6-233.6 233.6s105.6 233.6 233.6 233.6 233.6-105.6 233.6-233.6c3.2-128-102.4-233.6-233.6-233.6z m0 393.6c-89.6 0-160-70.4-160-160s70.4-160 160-160 160 70.4 160 160-70.4 160-160 160zM627.2 732.8v-3.2c0-16 12.8-32 32-32h172.8c16 0 32 12.8 32 32v3.2c0 16-12.8 32-32 32h-172.8c-16 0-32-16-32-32z"
    />
</symbol>
`,yh=`<symbol
    id="icon-jupyter-client-kernel-terminating"
    viewBox="0 0 1024 1024"
>
    <path
        d="M57.33 0h909.34q24 0 40.67 16.66Q1024 33.32 1024 57.32v909.34q0 24-16.66 40.67-16.67 16.66-40.67 16.66H57.33q-24 0-40.66-16.66Q0.01 990.66 0.01 966.66V57.32q0-24 16.66-40.66Q33.33 0 57.33 0z m56 113.33v797.34h797.34V113.33H113.33zM228 454.67h568v114.66H228V454.67z"
    />
</symbol>
`,wh=`<symbol
    id="icon-jupyter-client-kernel-restarting"
    viewBox="0 0 1024 1024"
>
    <path
        d="M707.584 389.312c-12.928-6.08-18.88-14.272-17.728-24.576s5.504-18.432 13.12-24.576c2.304-1.536 9.728-7.424 22.272-17.664 12.544-10.304 28.032-22.656 46.272-37.12-32-36.544-70.144-65.28-114.304-86.208-44.096-20.864-92.096-31.36-143.936-31.36-48 0-92.992 8.96-134.912 26.816-41.92 17.92-78.528 42.432-109.76 73.664-31.232 31.168-55.808 67.712-73.728 109.568s-26.88 86.784-26.88 134.72c0 47.168 8.96 91.712 26.88 133.568s42.496 78.4 73.728 109.568c31.232 31.232 67.84 55.744 109.76 73.6s86.848 26.816 134.912 26.816c39.616 0 77.184-6.272 112.576-18.816 35.456-12.544 67.84-30.272 97.152-53.056 29.312-22.848 54.464-49.664 75.456-80.512 20.928-30.848 36.416-64.512 46.272-101.056 5.312-17.472 15.232-31.936 29.696-43.392 14.464-11.392 31.616-17.152 51.456-17.152 23.616 0 43.648 8.384 60.032 25.152 16.384 16.704 24.576 36.544 24.576 59.328 0 10.624-1.92 20.928-5.696 30.848-16 53.248-39.616 102.336-70.848 147.264s-68.416 83.52-111.488 115.84c-43.072 32.32-90.88 57.664-143.488 75.904-52.544 18.368-107.776 27.52-165.696 27.52-70.848 0-137.536-13.312-200.064-39.936-62.464-26.624-116.8-63.168-162.88-109.568s-82.688-100.672-109.76-162.688c-27.072-62.016-40.576-128.448-40.576-199.232s13.504-137.344 40.576-199.808c27.072-62.4 63.616-116.608 109.76-162.688 46.08-46.016 100.416-82.56 162.88-109.568s129.152-40.512 200.064-40.512c78.528 0 151.296 16.192 218.368 48.512s124.224 76.288 171.456 131.84c17.536-12.928 32.192-24.192 44.032-33.664 11.84-9.536 19.264-15.424 22.272-17.728 4.608-3.776 9.536-6.656 14.848-8.576s10.304-1.92 14.848 0c4.544 1.92 8.576 5.888 12.032 11.968s5.888 15.232 7.424 27.392c0.768 6.848 1.536 18.432 2.304 34.816s1.536 35.392 2.304 57.088c0.768 21.696 1.152 44.16 1.152 67.328 0 23.232-0.384 45.12-1.152 65.664-0.768 25.856-6.848 44.544-18.304 55.936-6.144 6.144-15.296 9.6-27.456 10.368-12.224 0.768-25.152-0.384-38.848-3.456-20.608-4.544-43.264-9.472-68.032-14.848-24.768-5.312-48.384-10.816-70.848-16.576-22.464-5.696-42.304-11.072-59.456-16-17.152-4.864-28.032-8.512-32.64-10.752l0 0 0 0z"
    />
</symbol>
`,Sh=`<symbol
    id="icon-jupyter-client-kernel-autorestarting"
    viewBox="0 0 1024 1024"
>
    <path
        d="M150.613333 640H61.44A461.653333 461.653333 0 0 1 42.666667 512 469.333333 469.333333 0 0 1 512 42.666667a463.786667 463.786667 0 0 1 298.666667 107.52V42.666667h85.333333v256h-256V213.333333h111.36A384 384 0 0 0 128 512a378.453333 378.453333 0 0 0 22.613333 128z m810.666667-256h-89.6A384 384 0 0 1 270.506667 810.666667H384v-85.333334H128v256h85.333333v-107.946666A469.333333 469.333333 0 0 0 981.333333 512a462.08 462.08 0 0 0-17.92-128h-2.133333z m-376.746667 208.213333h-150.613333L401.92 682.666667H330.666667l148.906666-384h61.44l149.333334 384H618.666667l-34.133334-90.453334z m-133.546666-53.333333h116.48L512 380.16l-61.013333 158.72z"
    />
</symbol>
`,Ch=`<symbol
    id="icon-jupyter-client-kernel-dead"
    viewBox="0 0 1024 1024"
>
    <path
        d="M512 960c-60.416 0-119.296-11.776-174.592-35.328-53.248-22.528-101.376-54.784-142.336-95.744s-73.216-89.088-95.744-142.336c-23.552-55.296-35.328-114.176-35.328-174.592s11.776-119.296 35.328-174.592c22.528-53.248 54.784-101.376 95.744-142.336s89.088-73.216 142.336-95.744c55.296-23.552 114.176-35.328 174.592-35.328s119.296 11.776 174.592 35.328c53.248 22.528 101.376 54.784 142.336 95.744s73.216 89.088 95.744 142.336c23.552 55.296 35.328 114.176 35.328 174.592s-11.776 119.296-35.328 174.592c-22.528 53.248-54.784 101.376-95.744 142.336s-89.088 73.216-142.336 95.744c-55.296 23.552-114.176 35.328-174.592 35.328z m0-809.472c-96.256 0-187.392 37.376-255.488 105.984-68.096 68.096-105.984 158.72-105.984 255.488s37.376 187.392 105.984 255.488 158.72 105.984 255.488 105.984 187.392-37.376 255.488-105.984 105.984-158.72 105.984-255.488-37.376-187.392-105.984-255.488-159.232-105.984-255.488-105.984zM242.688 824.832c-11.264 0-22.016-4.096-30.72-12.8-16.896-16.896-16.896-44.544 0-61.44L729.6 232.96c16.896-16.896 44.544-16.896 61.44 0 16.896 16.896 16.896 44.544 0 61.44L273.408 812.032c-8.704 8.704-19.968 12.8-30.72 12.8z"
    />
</symbol>
`,kh=`<symbol
    id="icon-jupyter-client-session"
    viewBox="0 0 1024 1024"
>
    <path
        d="M213.33 532.33v-320h405.33V383H704V169.67c0-23.57-19.1-42.67-42.67-42.67H170.67c-11.32 0-22.17 4.5-30.17 12.5S128 158.35 128 169.67v448h170v-85.34h-84.67z m85.34 321V426.67c0-11.32 4.5-22.17 12.5-30.17s18.85-12.5 30.17-12.5h511.99c11.32 0 22.17 4.5 30.17 12.5s12.5 18.85 12.5 30.17V896H341.34c-11.32 0-22.17-4.5-30.17-12.5s-12.5-18.85-12.5-30.17z m512-384H384v341.33h426.67V469.33z m-384 213.33v-85.33H512v85.33h-85.33zM640 597.33v85.33h-85.33v-85.33H640z m42.67 85.33v-85.33H768v85.33h-85.33z"
    ></path>
</symbol>
`,Eh=`<symbol
    id="icon-jupyter-client-session-console"
    viewBox="0 0 200 200"
>
    <g fill="#0288D1">
        <path
            d="M20 19.8h160v159.9H20z"
        />
    </g>
    <g fill="#fff">
        <path
            d="M105 127.3h40v12.8h-40zM51.1 77L74 99.9l-23.3 23.3 10.5 10.5 23.3-23.3L95 99.9 84.5 89.4 61.6 66.5z"
        />
    </g>
</symbol>
`,Lh=`<symbol
    id="icon-jupyter-client-session-notebook"
    viewBox="0 0 22 22"
>
    <g fill="#EF6C00">
        <path
            d="M18.7 3.3v15.4H3.3V3.3h15.4m1.5-1.5H1.8v18.3h18.3l.1-18.3z"
        />
        <path
            d="M16.5 16.5l-5.4-4.3-5.6 4.3v-11h11z"
        />
    </g>
</symbol>
`;var Mh=Object.defineProperty,Th=(e,t,i)=>t in e?Mh(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i,Xt=(e,t,i)=>(Th(e,typeof t!="symbol"?t+"":t,i),i);const Dh=/"(?:_|\\u0{2}5[Ff]){2}(?:p|\\u0{2}70)(?:r|\\u0{2}72)(?:o|\\u0{2}6[Ff])(?:t|\\u0{2}74)(?:o|\\u0{2}6[Ff])(?:_|\\u0{2}5[Ff]){2}"\s*:/,Ah=/"(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)"\s*:/,Rh=/^\s*["[{]|^\s*-?\d{1,16}(\.\d{1,17})?([Ee][+-]?\d+)?\s*$/;function Oh(e,t){if(e==="__proto__"||e==="constructor"&&t&&typeof t=="object"&&"prototype"in t){Bh(e);return}return t}function Bh(e){console.warn(`[destr] Dropping "${e}" key to prevent prototype pollution.`)}function Hh(e,t={}){if(typeof e!="string")return e;const i=e.trim();if(e[0]==='"'&&e.at(-1)==='"'&&!e.includes("\\"))return i.slice(1,-1);if(i.length<=9){const s=i.toLowerCase();if(s==="true")return!0;if(s==="false")return!1;if(s==="undefined")return;if(s==="null")return null;if(s==="nan")return Number.NaN;if(s==="infinity")return Number.POSITIVE_INFINITY;if(s==="-infinity")return Number.NEGATIVE_INFINITY}if(!Rh.test(e)){if(t.strict)throw new SyntaxError("[destr] Invalid JSON");return e}try{if(Dh.test(e)||Ah.test(e)){if(t.strict)throw new Error("[destr] Possible prototype pollution");return JSON.parse(e,Oh)}return JSON.parse(e)}catch(s){if(t.strict)throw s;return e}}const xh=/#/g,Ph=/&/g,Ih=/=/g,un=/\+/g,Nh=/%5e/gi,Vh=/%60/gi,jh=/%7c/gi,Fh=/%20/gi;function Uh(e){return encodeURI(""+e).replace(jh,"|")}function Wr(e){return Uh(typeof e=="string"?e:JSON.stringify(e)).replace(un,"%2B").replace(Fh,"+").replace(xh,"%23").replace(Ph,"%26").replace(Vh,"`").replace(Nh,"^")}function yr(e){return Wr(e).replace(Ih,"%3D")}function Ya(e=""){try{return decodeURIComponent(""+e)}catch{return""+e}}function Wh(e){return Ya(e.replace(un," "))}function zh(e){return Ya(e.replace(un," "))}function Yh(e=""){const t={};e[0]==="?"&&(e=e.slice(1));for(const i of e.split("&")){const s=i.match(/([^=]+)=?(.*)/)||[];if(s.length<2)continue;const r=Wh(s[1]);if(r==="__proto__"||r==="constructor")continue;const n=zh(s[2]||"");t[r]===void 0?t[r]=n:Array.isArray(t[r])?t[r].push(n):t[r]=[t[r],n]}return t}function qh(e,t){return(typeof t=="number"||typeof t=="boolean")&&(t=String(t)),t?Array.isArray(t)?t.map(i=>`${yr(e)}=${Wr(i)}`).join("&"):`${yr(e)}=${Wr(t)}`:yr(e)}function Zh(e){return Object.keys(e).filter(t=>e[t]!==void 0).map(t=>qh(t,e[t])).filter(Boolean).join("&")}const Kh=/^[\s\w\0+.-]{2,}:([/\\]{1,2})/,Gh=/^[\s\w\0+.-]{2,}:([/\\]{2})?/,Jh=/^([/\\]\s*){2,}[^/\\]/;function qa(e,t={}){return typeof t=="boolean"&&(t={acceptRelative:t}),t.strict?Kh.test(e):Gh.test(e)||(t.acceptRelative?Jh.test(e):!1)}const $h=/\/$|\/\?|\/#/;function zr(e="",t){return t?$h.test(e):e.endsWith("/")}function Xh(e="",t){if(!t)return(zr(e)?e.slice(0,-1):e)||"/";if(!zr(e,!0))return e||"/";let i=e,s="";const r=e.indexOf("#");r>=0&&(i=e.slice(0,r),s=e.slice(r));const[n,...l]=i.split("?");return(n.slice(0,-1)||"/")+(l.length>0?`?${l.join("?")}`:"")+s}function Qh(e="",t){if(!t)return e.endsWith("/")?e:e+"/";if(zr(e,!0))return e||"/";let i=e,s="";const r=e.indexOf("#");if(r>=0&&(i=e.slice(0,r),s=e.slice(r),!i))return s;const[n,...l]=i.split("?");return n+"/"+(l.length>0?`?${l.join("?")}`:"")+s}function eu(e,t){if(iu(t)||qa(e))return e;const i=Xh(t);return e.startsWith(i)?e:nu(i,e)}function tu(e,t){const i=Za(e),s={...Yh(i.search),...t};return i.search=Zh(s),ou(i)}function iu(e){return!e||e==="/"}function su(e){return e&&e!=="/"}const ru=/^\.?\//;function nu(e,...t){let i=e||"";for(const s of t.filter(r=>su(r)))if(i){const r=s.replace(ru,"");i=Qh(i)+r}else i=s;return i}function Za(e="",t){const i=e.match(/^[\s\0]*(blob:|data:|javascript:|vbscript:)(.*)/i);if(i){const[,f,_=""]=i;return{protocol:f.toLowerCase(),pathname:_,href:f+_,auth:"",host:"",search:"",hash:""}}if(!qa(e,{acceptRelative:!0}))return t?Za(t+e):Yn(e);const[,s="",r,n=""]=e.replace(/\\/g,"/").match(/^[\s\0]*([\w+.-]{2,}:)?\/\/([^/@]+@)?(.*)/)||[],[,l="",o=""]=n.match(/([^#/?]*)(.*)?/)||[],{pathname:a,search:h,hash:u}=Yn(o.replace(/\/(?=[A-Za-z]:)/,""));return{protocol:s.toLowerCase(),auth:r?r.slice(0,Math.max(0,r.length-1)):"",host:l,pathname:a,search:h,hash:u}}function Yn(e=""){const[t="",i="",s=""]=(e.match(/([^#?]*)(\?[^#]*)?(#.*)?/)||[]).splice(1);return{pathname:t,search:i,hash:s}}function ou(e){const t=e.pathname||"",i=e.search?(e.search.startsWith("?")?"":"?")+e.search:"",s=e.hash||"",r=e.auth?e.auth+"@":"",n=e.host||"";return(e.protocol?e.protocol+"//":"")+r+n+t+i+s}class au extends Error{constructor(t,i){super(t,i),this.name="FetchError",i!=null&&i.cause&&!this.cause&&(this.cause=i.cause)}}function lu(e){var t,i,s,r,n;const l=((t=e.error)==null?void 0:t.message)||((i=e.error)==null?void 0:i.toString())||"",o=((s=e.request)==null?void 0:s.method)||((r=e.options)==null?void 0:r.method)||"GET",a=((n=e.request)==null?void 0:n.url)||String(e.request)||"/",h=`[${o}] ${JSON.stringify(a)}`,u=e.response?`${e.response.status} ${e.response.statusText}`:"<no response>",f=`${h}: ${u}${l?` ${l}`:""}`,_=new au(f,e.error?{cause:e.error}:void 0);for(const v of["request","options","response"])Object.defineProperty(_,v,{get(){return e[v]}});for(const[v,b]of[["data","_data"],["status","status"],["statusCode","status"],["statusText","statusText"],["statusMessage","statusText"]])Object.defineProperty(_,v,{get(){return e.response&&e.response[b]}});return _}const cu=new Set(Object.freeze(["PATCH","POST","PUT","DELETE"]));function qn(e="GET"){return cu.has(e.toUpperCase())}function hu(e){if(e===void 0)return!1;const t=typeof e;return t==="string"||t==="number"||t==="boolean"||t===null?!0:t!=="object"?!1:Array.isArray(e)?!0:e.buffer?!1:e.constructor&&e.constructor.name==="Object"||typeof e.toJSON=="function"}const uu=new Set(["image/svg","application/xml","application/xhtml","application/html"]),fu=/^application\/(?:[\w!#$%&*.^`~-]*\+)?json(;.+)?$/i;function du(e=""){if(!e)return"json";const t=e.split(";").shift()||"";return fu.test(t)?"json":uu.has(t)||t.startsWith("text/")?"text":"blob"}function _u(e,t,i=globalThis.Headers){const s={...t,...e};if(t!=null&&t.params&&e!=null&&e.params&&(s.params={...t==null?void 0:t.params,...e==null?void 0:e.params}),t!=null&&t.query&&e!=null&&e.query&&(s.query={...t==null?void 0:t.query,...e==null?void 0:e.query}),t!=null&&t.headers&&e!=null&&e.headers){s.headers=new i((t==null?void 0:t.headers)||{});for(const[r,n]of new i((e==null?void 0:e.headers)||{}))s.headers.set(r,n)}return s}const pu=new Set([408,409,425,429,500,502,503,504]),mu=new Set([101,204,205,304]);function Ka(e={}){const{fetch:t=globalThis.fetch,Headers:i=globalThis.Headers,AbortController:s=globalThis.AbortController}=e;async function r(o){const a=o.error&&o.error.name==="AbortError"&&!o.options.timeout||!1;if(o.options.retry!==!1&&!a){let u;typeof o.options.retry=="number"?u=o.options.retry:u=qn(o.options.method)?0:1;const f=o.response&&o.response.status||500;if(u>0&&(Array.isArray(o.options.retryStatusCodes)?o.options.retryStatusCodes.includes(f):pu.has(f))){const _=o.options.retryDelay||0;return _>0&&await new Promise(v=>setTimeout(v,_)),n(o.request,{...o.options,retry:u-1,timeout:o.options.timeout})}}const h=lu(o);throw Error.captureStackTrace&&Error.captureStackTrace(h,n),h}const n=async function(o,a={}){var h;const u={request:o,options:_u(a,e.defaults,i),response:void 0,error:void 0};if(u.options.method=(h=u.options.method)==null?void 0:h.toUpperCase(),u.options.onRequest&&await u.options.onRequest(u),typeof u.request=="string"&&(u.options.baseURL&&(u.request=eu(u.request,u.options.baseURL)),(u.options.query||u.options.params)&&(u.request=tu(u.request,{...u.options.params,...u.options.query}))),u.options.body&&qn(u.options.method)&&(hu(u.options.body)?(u.options.body=typeof u.options.body=="string"?u.options.body:JSON.stringify(u.options.body),u.options.headers=new i(u.options.headers||{}),u.options.headers.has("content-type")||u.options.headers.set("content-type","application/json"),u.options.headers.has("accept")||u.options.headers.set("accept","application/json")):("pipeTo"in u.options.body&&typeof u.options.body.pipeTo=="function"||typeof u.options.body.pipe=="function")&&("duplex"in u.options||(u.options.duplex="half"))),!u.options.signal&&u.options.timeout){const f=new s;setTimeout(()=>f.abort(),u.options.timeout),u.options.signal=f.signal}try{u.response=await t(u.request,u.options)}catch(f){return u.error=f,u.options.onRequestError&&await u.options.onRequestError(u),await r(u)}if(u.response.body&&!mu.has(u.response.status)&&u.options.method!=="HEAD"){const f=(u.options.parseResponse?"json":u.options.responseType)||du(u.response.headers.get("content-type")||"");switch(f){case"json":{const _=await u.response.text(),v=u.options.parseResponse||Hh;u.response._data=v(_);break}case"stream":{u.response._data=u.response.body;break}default:u.response._data=await u.response[f]()}}return u.options.onResponse&&await u.options.onResponse(u),!u.options.ignoreResponseError&&u.response.status>=400&&u.response.status<600?(u.options.onResponseError&&await u.options.onResponseError(u),await r(u)):u.response},l=async function(o,a){return(await n(o,a))._data};return l.raw=n,l.native=(...o)=>t(...o),l.create=(o={})=>Ka({...e,defaults:{...e.defaults,...o}}),l}const fn=function(){if(typeof globalThis<"u")return globalThis;if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")}(),gu=fn.fetch||(()=>Promise.reject(new Error("[ofetch] global.fetch is not supported!"))),vu=fn.Headers,bu=fn.AbortController,yu=Ka({fetch:gu,Headers:vu,AbortController:bu});class wu extends Error{constructor(t){super(t.statusText),Xt(this,"status"),this.response=t,this.status=t.status}}class Zn extends Error{constructor(t,i){super(t.msg),Xt(this,"code"),this.body=t,this.response=i,this.code=t.code}}function Ut(e){if(typeof e!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(e))}function Kn(e,t){for(var i="",s=0,r=-1,n=0,l,o=0;o<=e.length;++o){if(o<e.length)l=e.charCodeAt(o);else{if(l===47)break;l=47}if(l===47){if(!(r===o-1||n===1))if(r!==o-1&&n===2){if(i.length<2||s!==2||i.charCodeAt(i.length-1)!==46||i.charCodeAt(i.length-2)!==46){if(i.length>2){var a=i.lastIndexOf("/");if(a!==i.length-1){a===-1?(i="",s=0):(i=i.slice(0,a),s=i.length-1-i.lastIndexOf("/")),r=o,n=0;continue}}else if(i.length===2||i.length===1){i="",s=0,r=o,n=0;continue}}t&&(i.length>0?i+="/..":i="..",s=2)}else i.length>0?i+="/"+e.slice(r+1,o):i=e.slice(r+1,o),s=o-r-1;r=o,n=0}else l===46&&n!==-1?++n:n=-1}return i}function Su(e,t){var i=t.dir||t.root,s=t.base||(t.name||"")+(t.ext||"");return i?i===t.root?i+s:i+e+s:s}var rs={resolve:function(){for(var e="",t=!1,i,s=arguments.length-1;s>=-1&&!t;s--){var r;s>=0?r=arguments[s]:(i===void 0&&(i=process.cwd()),r=i),Ut(r),r.length!==0&&(e=r+"/"+e,t=r.charCodeAt(0)===47)}return e=Kn(e,!t),t?e.length>0?"/"+e:"/":e.length>0?e:"."},normalize:function(e){if(Ut(e),e.length===0)return".";var t=e.charCodeAt(0)===47,i=e.charCodeAt(e.length-1)===47;return e=Kn(e,!t),e.length===0&&!t&&(e="."),e.length>0&&i&&(e+="/"),t?"/"+e:e},isAbsolute:function(e){return Ut(e),e.length>0&&e.charCodeAt(0)===47},join:function(){if(arguments.length===0)return".";for(var e,t=0;t<arguments.length;++t){var i=arguments[t];Ut(i),i.length>0&&(e===void 0?e=i:e+="/"+i)}return e===void 0?".":rs.normalize(e)},relative:function(e,t){if(Ut(e),Ut(t),e===t||(e=rs.resolve(e),t=rs.resolve(t),e===t))return"";for(var i=1;i<e.length&&e.charCodeAt(i)===47;++i);for(var s=e.length,r=s-i,n=1;n<t.length&&t.charCodeAt(n)===47;++n);for(var l=t.length,o=l-n,a=r<o?r:o,h=-1,u=0;u<=a;++u){if(u===a){if(o>a){if(t.charCodeAt(n+u)===47)return t.slice(n+u+1);if(u===0)return t.slice(n+u)}else r>a&&(e.charCodeAt(i+u)===47?h=u:u===0&&(h=0));break}var f=e.charCodeAt(i+u),_=t.charCodeAt(n+u);if(f!==_)break;f===47&&(h=u)}var v="";for(u=i+h+1;u<=s;++u)(u===s||e.charCodeAt(u)===47)&&(v.length===0?v+="..":v+="/..");return v.length>0?v+t.slice(n+h):(n+=h,t.charCodeAt(n)===47&&++n,t.slice(n))},_makeLong:function(e){return e},dirname:function(e){if(Ut(e),e.length===0)return".";for(var t=e.charCodeAt(0),i=t===47,s=-1,r=!0,n=e.length-1;n>=1;--n)if(t=e.charCodeAt(n),t===47){if(!r){s=n;break}}else r=!1;return s===-1?i?"/":".":i&&s===1?"//":e.slice(0,s)},basename:function(e,t){if(t!==void 0&&typeof t!="string")throw new TypeError('"ext" argument must be a string');Ut(e);var i=0,s=-1,r=!0,n;if(t!==void 0&&t.length>0&&t.length<=e.length){if(t.length===e.length&&t===e)return"";var l=t.length-1,o=-1;for(n=e.length-1;n>=0;--n){var a=e.charCodeAt(n);if(a===47){if(!r){i=n+1;break}}else o===-1&&(r=!1,o=n+1),l>=0&&(a===t.charCodeAt(l)?--l===-1&&(s=n):(l=-1,s=o))}return i===s?s=o:s===-1&&(s=e.length),e.slice(i,s)}else{for(n=e.length-1;n>=0;--n)if(e.charCodeAt(n)===47){if(!r){i=n+1;break}}else s===-1&&(r=!1,s=n+1);return s===-1?"":e.slice(i,s)}},extname:function(e){Ut(e);for(var t=-1,i=0,s=-1,r=!0,n=0,l=e.length-1;l>=0;--l){var o=e.charCodeAt(l);if(o===47){if(!r){i=l+1;break}continue}s===-1&&(r=!1,s=l+1),o===46?t===-1?t=l:n!==1&&(n=1):t!==-1&&(n=-1)}return t===-1||s===-1||n===0||n===1&&t===s-1&&t===i+1?"":e.slice(t,s)},format:function(e){if(e===null||typeof e!="object")throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof e);return Su("/",e)},parse:function(e){Ut(e);var t={root:"",dir:"",base:"",ext:"",name:""};if(e.length===0)return t;var i=e.charCodeAt(0),s=i===47,r;s?(t.root="/",r=1):r=0;for(var n=-1,l=0,o=-1,a=!0,h=e.length-1,u=0;h>=r;--h){if(i=e.charCodeAt(h),i===47){if(!a){l=h+1;break}continue}o===-1&&(a=!1,o=h+1),i===46?n===-1?n=h:u!==1&&(u=1):n!==-1&&(u=-1)}return n===-1||o===-1||u===0||u===1&&n===o-1&&n===l+1?o!==-1&&(l===0&&s?t.base=t.name=e.slice(1,o):t.base=t.name=e.slice(l,o)):(l===0&&s?(t.name=e.slice(1,n),t.base=e.slice(1,o)):(t.name=e.slice(l,n),t.base=e.slice(l,o)),t.ext=e.slice(n,o)),l>0?t.dir=e.slice(0,l-1):s&&(t.dir="/"),t},sep:"/",delimiter:":",win32:null,posix:null};rs.posix=rs;function Ga(e,t){return function(){return e.apply(t,arguments)}}const{toString:Cu}=Object.prototype,{getPrototypeOf:dn}=Object,Xs=(e=>t=>{const i=Cu.call(t);return e[i]||(e[i]=i.slice(8,-1).toLowerCase())})(Object.create(null)),Zt=e=>(e=e.toLowerCase(),t=>Xs(t)===e),Qs=e=>t=>typeof t===e,{isArray:qi}=Array,ls=Qs("undefined");function ku(e){return e!==null&&!ls(e)&&e.constructor!==null&&!ls(e.constructor)&&Rt(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const Ja=Zt("ArrayBuffer");function Eu(e){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&Ja(e.buffer),t}const Lu=Qs("string"),Rt=Qs("function"),$a=Qs("number"),er=e=>e!==null&&typeof e=="object",Mu=e=>e===!0||e===!1,Rs=e=>{if(Xs(e)!=="object")return!1;const t=dn(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},Tu=Zt("Date"),Du=Zt("File"),Au=Zt("Blob"),Ru=Zt("FileList"),Ou=e=>er(e)&&Rt(e.pipe),Bu=e=>{let t;return e&&(typeof FormData=="function"&&e instanceof FormData||Rt(e.append)&&((t=Xs(e))==="formdata"||t==="object"&&Rt(e.toString)&&e.toString()==="[object FormData]"))},Hu=Zt("URLSearchParams"),xu=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function ps(e,t,{allOwnKeys:i=!1}={}){if(e===null||typeof e>"u")return;let s,r;if(typeof e!="object"&&(e=[e]),qi(e))for(s=0,r=e.length;s<r;s++)t.call(null,e[s],s,e);else{const n=i?Object.getOwnPropertyNames(e):Object.keys(e),l=n.length;let o;for(s=0;s<l;s++)o=n[s],t.call(null,e[o],o,e)}}function Xa(e,t){t=t.toLowerCase();const i=Object.keys(e);let s=i.length,r;for(;s-- >0;)if(r=i[s],t===r.toLowerCase())return r;return null}const Qa=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,el=e=>!ls(e)&&e!==Qa;function Yr(){const{caseless:e}=el(this)&&this||{},t={},i=(s,r)=>{const n=e&&Xa(t,r)||r;Rs(t[n])&&Rs(s)?t[n]=Yr(t[n],s):Rs(s)?t[n]=Yr({},s):qi(s)?t[n]=s.slice():t[n]=s};for(let s=0,r=arguments.length;s<r;s++)arguments[s]&&ps(arguments[s],i);return t}const Pu=(e,t,i,{allOwnKeys:s}={})=>(ps(t,(r,n)=>{i&&Rt(r)?e[n]=Ga(r,i):e[n]=r},{allOwnKeys:s}),e),Iu=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),Nu=(e,t,i,s)=>{e.prototype=Object.create(t.prototype,s),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),i&&Object.assign(e.prototype,i)},Vu=(e,t,i,s)=>{let r,n,l;const o={};if(t=t||{},e==null)return t;do{for(r=Object.getOwnPropertyNames(e),n=r.length;n-- >0;)l=r[n],(!s||s(l,e,t))&&!o[l]&&(t[l]=e[l],o[l]=!0);e=i!==!1&&dn(e)}while(e&&(!i||i(e,t))&&e!==Object.prototype);return t},ju=(e,t,i)=>{e=String(e),(i===void 0||i>e.length)&&(i=e.length),i-=t.length;const s=e.indexOf(t,i);return s!==-1&&s===i},Fu=e=>{if(!e)return null;if(qi(e))return e;let t=e.length;if(!$a(t))return null;const i=new Array(t);for(;t-- >0;)i[t]=e[t];return i},Uu=(e=>t=>e&&t instanceof e)(typeof Uint8Array<"u"&&dn(Uint8Array)),Wu=(e,t)=>{const i=(e&&e[Symbol.iterator]).call(e);let s;for(;(s=i.next())&&!s.done;){const r=s.value;t.call(e,r[0],r[1])}},zu=(e,t)=>{let i;const s=[];for(;(i=e.exec(t))!==null;)s.push(i);return s},Yu=Zt("HTMLFormElement"),qu=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(t,i,s){return i.toUpperCase()+s}),Gn=(({hasOwnProperty:e})=>(t,i)=>e.call(t,i))(Object.prototype),Zu=Zt("RegExp"),tl=(e,t)=>{const i=Object.getOwnPropertyDescriptors(e),s={};ps(i,(r,n)=>{let l;(l=t(r,n,e))!==!1&&(s[n]=l||r)}),Object.defineProperties(e,s)},Ku=e=>{tl(e,(t,i)=>{if(Rt(e)&&["arguments","caller","callee"].indexOf(i)!==-1)return!1;const s=e[i];if(Rt(s)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+i+"'")})}})},Gu=(e,t)=>{const i={},s=r=>{r.forEach(n=>{i[n]=!0})};return qi(e)?s(e):s(String(e).split(t)),i},Ju=()=>{},$u=(e,t)=>(e=+e,Number.isFinite(e)?e:t),wr="abcdefghijklmnopqrstuvwxyz",Jn="0123456789",il={DIGIT:Jn,ALPHA:wr,ALPHA_DIGIT:wr+wr.toUpperCase()+Jn},Xu=(e=16,t=il.ALPHA_DIGIT)=>{let i="";const{length:s}=t;for(;e--;)i+=t[Math.random()*s|0];return i};function Qu(e){return!!(e&&Rt(e.append)&&e[Symbol.toStringTag]==="FormData"&&e[Symbol.iterator])}const ef=e=>{const t=new Array(10),i=(s,r)=>{if(er(s)){if(t.indexOf(s)>=0)return;if(!("toJSON"in s)){t[r]=s;const n=qi(s)?[]:{};return ps(s,(l,o)=>{const a=i(l,r+1);!ls(a)&&(n[o]=a)}),t[r]=void 0,n}}return s};return i(e,0)},tf=Zt("AsyncFunction"),sf=e=>e&&(er(e)||Rt(e))&&Rt(e.then)&&Rt(e.catch),$={isArray:qi,isArrayBuffer:Ja,isBuffer:ku,isFormData:Bu,isArrayBufferView:Eu,isString:Lu,isNumber:$a,isBoolean:Mu,isObject:er,isPlainObject:Rs,isUndefined:ls,isDate:Tu,isFile:Du,isBlob:Au,isRegExp:Zu,isFunction:Rt,isStream:Ou,isURLSearchParams:Hu,isTypedArray:Uu,isFileList:Ru,forEach:ps,merge:Yr,extend:Pu,trim:xu,stripBOM:Iu,inherits:Nu,toFlatObject:Vu,kindOf:Xs,kindOfTest:Zt,endsWith:ju,toArray:Fu,forEachEntry:Wu,matchAll:zu,isHTMLForm:Yu,hasOwnProperty:Gn,hasOwnProp:Gn,reduceDescriptors:tl,freezeMethods:Ku,toObjectSet:Gu,toCamelCase:qu,noop:Ju,toFiniteNumber:$u,findKey:Xa,global:Qa,isContextDefined:el,ALPHABET:il,generateString:Xu,isSpecCompliantForm:Qu,toJSONObject:ef,isAsyncFn:tf,isThenable:sf};function De(e,t,i,s,r){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=e,this.name="AxiosError",t&&(this.code=t),i&&(this.config=i),s&&(this.request=s),r&&(this.response=r)}$.inherits(De,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:$.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});const sl=De.prototype,rl={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{rl[e]={value:e}});Object.defineProperties(De,rl);Object.defineProperty(sl,"isAxiosError",{value:!0});De.from=(e,t,i,s,r,n)=>{const l=Object.create(sl);return $.toFlatObject(e,l,function(o){return o!==Error.prototype},o=>o!=="isAxiosError"),De.call(l,e.message,t,i,s,r),l.cause=e,l.name=e.name,n&&Object.assign(l,n),l};const rf=null;function qr(e){return $.isPlainObject(e)||$.isArray(e)}function nl(e){return $.endsWith(e,"[]")?e.slice(0,-2):e}function $n(e,t,i){return e?e.concat(t).map(function(s,r){return s=nl(s),!i&&r?"["+s+"]":s}).join(i?".":""):t}function nf(e){return $.isArray(e)&&!e.some(qr)}const of=$.toFlatObject($,{},null,function(e){return/^is[A-Z]/.test(e)});function tr(e,t,i){if(!$.isObject(e))throw new TypeError("target must be an object");t=t||new FormData,i=$.toFlatObject(i,{metaTokens:!0,dots:!1,indexes:!1},!1,function(v,b){return!$.isUndefined(b[v])});const s=i.metaTokens,r=i.visitor||h,n=i.dots,l=i.indexes,o=(i.Blob||typeof Blob<"u"&&Blob)&&$.isSpecCompliantForm(t);if(!$.isFunction(r))throw new TypeError("visitor must be a function");function a(v){if(v===null)return"";if($.isDate(v))return v.toISOString();if(!o&&$.isBlob(v))throw new De("Blob is not supported. Use a Buffer instead.");return $.isArrayBuffer(v)||$.isTypedArray(v)?o&&typeof Blob=="function"?new Blob([v]):Buffer.from(v):v}function h(v,b,g){let c=v;if(v&&!g&&typeof v=="object"){if($.endsWith(b,"{}"))b=s?b:b.slice(0,-2),v=JSON.stringify(v);else if($.isArray(v)&&nf(v)||($.isFileList(v)||$.endsWith(b,"[]"))&&(c=$.toArray(v)))return b=nl(b),c.forEach(function(d,m){!($.isUndefined(d)||d===null)&&t.append(l===!0?$n([b],m,n):l===null?b:b+"[]",a(d))}),!1}return qr(v)?!0:(t.append($n(g,b,n),a(v)),!1)}const u=[],f=Object.assign(of,{defaultVisitor:h,convertValue:a,isVisitable:qr});function _(v,b){if(!$.isUndefined(v)){if(u.indexOf(v)!==-1)throw Error("Circular reference detected in "+b.join("."));u.push(v),$.forEach(v,function(g,c){(!($.isUndefined(g)||g===null)&&r.call(t,g,$.isString(c)?c.trim():c,b,f))===!0&&_(g,b?b.concat(c):[c])}),u.pop()}}if(!$.isObject(e))throw new TypeError("data must be an object");return _(e),t}function Xn(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(i){return t[i]})}function _n(e,t){this._pairs=[],e&&tr(e,this,t)}const ol=_n.prototype;ol.append=function(e,t){this._pairs.push([e,t])};ol.toString=function(e){const t=e?function(i){return e.call(this,i,Xn)}:Xn;return this._pairs.map(function(i){return t(i[0])+"="+t(i[1])},"").join("&")};function af(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function al(e,t,i){if(!t)return e;const s=i&&i.encode||af,r=i&&i.serialize;let n;if(r?n=r(t,i):n=$.isURLSearchParams(t)?t.toString():new _n(t,i).toString(s),n){const l=e.indexOf("#");l!==-1&&(e=e.slice(0,l)),e+=(e.indexOf("?")===-1?"?":"&")+n}return e}class lf{constructor(){this.handlers=[]}use(t,i,s){return this.handlers.push({fulfilled:t,rejected:i,synchronous:s?s.synchronous:!1,runWhen:s?s.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){$.forEach(this.handlers,function(i){i!==null&&t(i)})}}const Qn=lf,ll={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},cf=typeof URLSearchParams<"u"?URLSearchParams:_n,hf=typeof FormData<"u"?FormData:null,uf=typeof Blob<"u"?Blob:null,ff={isBrowser:!0,classes:{URLSearchParams:cf,FormData:hf,Blob:uf},protocols:["http","https","file","blob","url","data"]},cl=typeof window<"u"&&typeof document<"u",df=(e=>cl&&["ReactNative","NativeScript","NS"].indexOf(e)<0)(typeof navigator<"u"&&navigator.product),_f=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",pf=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:cl,hasStandardBrowserEnv:df,hasStandardBrowserWebWorkerEnv:_f},Symbol.toStringTag,{value:"Module"})),Yt={...pf,...ff};function mf(e,t){return tr(e,new Yt.classes.URLSearchParams,Object.assign({visitor:function(i,s,r,n){return Yt.isNode&&$.isBuffer(i)?(this.append(s,i.toString("base64")),!1):n.defaultVisitor.apply(this,arguments)}},t))}function gf(e){return $.matchAll(/\w+|\[(\w*)]/g,e).map(t=>t[0]==="[]"?"":t[1]||t[0])}function vf(e){const t={},i=Object.keys(e);let s;const r=i.length;let n;for(s=0;s<r;s++)n=i[s],t[n]=e[n];return t}function hl(e){function t(i,s,r,n){let l=i[n++];const o=Number.isFinite(+l),a=n>=i.length;return l=!l&&$.isArray(r)?r.length:l,a?($.hasOwnProp(r,l)?r[l]=[r[l],s]:r[l]=s,!o):((!r[l]||!$.isObject(r[l]))&&(r[l]=[]),t(i,s,r[l],n)&&$.isArray(r[l])&&(r[l]=vf(r[l])),!o)}if($.isFormData(e)&&$.isFunction(e.entries)){const i={};return $.forEachEntry(e,(s,r)=>{t(gf(s),r,i,0)}),i}return null}function bf(e,t,i){if($.isString(e))try{return(t||JSON.parse)(e),$.trim(e)}catch(s){if(s.name!=="SyntaxError")throw s}return(i||JSON.stringify)(e)}const pn={transitional:ll,adapter:["xhr","http"],transformRequest:[function(e,t){const i=t.getContentType()||"",s=i.indexOf("application/json")>-1,r=$.isObject(e);if(r&&$.isHTMLForm(e)&&(e=new FormData(e)),$.isFormData(e))return s&&s?JSON.stringify(hl(e)):e;if($.isArrayBuffer(e)||$.isBuffer(e)||$.isStream(e)||$.isFile(e)||$.isBlob(e))return e;if($.isArrayBufferView(e))return e.buffer;if($.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let n;if(r){if(i.indexOf("application/x-www-form-urlencoded")>-1)return mf(e,this.formSerializer).toString();if((n=$.isFileList(e))||i.indexOf("multipart/form-data")>-1){const l=this.env&&this.env.FormData;return tr(n?{"files[]":e}:e,l&&new l,this.formSerializer)}}return r||s?(t.setContentType("application/json",!1),bf(e)):e}],transformResponse:[function(e){const t=this.transitional||pn.transitional,i=t&&t.forcedJSONParsing,s=this.responseType==="json";if(e&&$.isString(e)&&(i&&!this.responseType||s)){const r=!(t&&t.silentJSONParsing)&&s;try{return JSON.parse(e)}catch(n){if(r)throw n.name==="SyntaxError"?De.from(n,De.ERR_BAD_RESPONSE,this,null,this.response):n}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Yt.classes.FormData,Blob:Yt.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};$.forEach(["delete","get","head","post","put","patch"],e=>{pn.headers[e]={}});const mn=pn,yf=$.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),wf=e=>{const t={};let i,s,r;return e&&e.split(`
`).forEach(function(n){r=n.indexOf(":"),i=n.substring(0,r).trim().toLowerCase(),s=n.substring(r+1).trim(),!(!i||t[i]&&yf[i])&&(i==="set-cookie"?t[i]?t[i].push(s):t[i]=[s]:t[i]=t[i]?t[i]+", "+s:s)}),t},eo=Symbol("internals");function Xi(e){return e&&String(e).trim().toLowerCase()}function Os(e){return e===!1||e==null?e:$.isArray(e)?e.map(Os):String(e)}function Sf(e){const t=Object.create(null),i=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let s;for(;s=i.exec(e);)t[s[1]]=s[2];return t}const Cf=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function Sr(e,t,i,s,r){if($.isFunction(s))return s.call(this,t,i);if(r&&(t=i),!!$.isString(t)){if($.isString(s))return t.indexOf(s)!==-1;if($.isRegExp(s))return s.test(t)}}function kf(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,i,s)=>i.toUpperCase()+s)}function Ef(e,t){const i=$.toCamelCase(" "+t);["get","set","has"].forEach(s=>{Object.defineProperty(e,s+i,{value:function(r,n,l){return this[s].call(this,t,r,n,l)},configurable:!0})})}let ir=class{constructor(e){e&&this.set(e)}set(e,t,i){const s=this;function r(l,o,a){const h=Xi(o);if(!h)throw new Error("header name must be a non-empty string");const u=$.findKey(s,h);(!u||s[u]===void 0||a===!0||a===void 0&&s[u]!==!1)&&(s[u||o]=Os(l))}const n=(l,o)=>$.forEach(l,(a,h)=>r(a,h,o));return $.isPlainObject(e)||e instanceof this.constructor?n(e,t):$.isString(e)&&(e=e.trim())&&!Cf(e)?n(wf(e),t):e!=null&&r(t,e,i),this}get(e,t){if(e=Xi(e),e){const i=$.findKey(this,e);if(i){const s=this[i];if(!t)return s;if(t===!0)return Sf(s);if($.isFunction(t))return t.call(this,s,i);if($.isRegExp(t))return t.exec(s);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,t){if(e=Xi(e),e){const i=$.findKey(this,e);return!!(i&&this[i]!==void 0&&(!t||Sr(this,this[i],i,t)))}return!1}delete(e,t){const i=this;let s=!1;function r(n){if(n=Xi(n),n){const l=$.findKey(i,n);l&&(!t||Sr(i,i[l],l,t))&&(delete i[l],s=!0)}}return $.isArray(e)?e.forEach(r):r(e),s}clear(e){const t=Object.keys(this);let i=t.length,s=!1;for(;i--;){const r=t[i];(!e||Sr(this,this[r],r,e,!0))&&(delete this[r],s=!0)}return s}normalize(e){const t=this,i={};return $.forEach(this,(s,r)=>{const n=$.findKey(i,r);if(n){t[n]=Os(s),delete t[r];return}const l=e?kf(r):String(r).trim();l!==r&&delete t[r],t[l]=Os(s),i[l]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const t=Object.create(null);return $.forEach(this,(i,s)=>{i!=null&&i!==!1&&(t[s]=e&&$.isArray(i)?i.join(", "):i)}),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,t])=>e+": "+t).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...t){const i=new this(e);return t.forEach(s=>i.set(s)),i}static accessor(e){const t=(this[eo]=this[eo]={accessors:{}}).accessors,i=this.prototype;function s(r){const n=Xi(r);t[n]||(Ef(i,r),t[n]=!0)}return $.isArray(e)?e.forEach(s):s(e),this}};ir.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);$.reduceDescriptors(ir.prototype,({value:e},t)=>{let i=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(s){this[i]=s}}});$.freezeMethods(ir);const ti=ir;function Cr(e,t){const i=this||mn,s=t||i,r=ti.from(s.headers);let n=s.data;return $.forEach(e,function(l){n=l.call(i,n,r.normalize(),t?t.status:void 0)}),r.normalize(),n}function ul(e){return!!(e&&e.__CANCEL__)}function ms(e,t,i){De.call(this,e??"canceled",De.ERR_CANCELED,t,i),this.name="CanceledError"}$.inherits(ms,De,{__CANCEL__:!0});function Lf(e,t,i){const s=i.config.validateStatus;!i.status||!s||s(i.status)?e(i):t(new De("Request failed with status code "+i.status,[De.ERR_BAD_REQUEST,De.ERR_BAD_RESPONSE][Math.floor(i.status/100)-4],i.config,i.request,i))}const Mf=Yt.hasStandardBrowserEnv?{write(e,t,i,s,r,n){const l=[e+"="+encodeURIComponent(t)];$.isNumber(i)&&l.push("expires="+new Date(i).toGMTString()),$.isString(s)&&l.push("path="+s),$.isString(r)&&l.push("domain="+r),n===!0&&l.push("secure"),document.cookie=l.join("; ")},read(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function Tf(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function Df(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}function fl(e,t){return e&&!Tf(t)?Df(e,t):t}const Af=Yt.hasStandardBrowserEnv?function(){const e=/(msie|trident)/i.test(navigator.userAgent),t=document.createElement("a");let i;function s(r){let n=r;return e&&(t.setAttribute("href",n),n=t.href),t.setAttribute("href",n),{href:t.href,protocol:t.protocol?t.protocol.replace(/:$/,""):"",host:t.host,search:t.search?t.search.replace(/^\?/,""):"",hash:t.hash?t.hash.replace(/^#/,""):"",hostname:t.hostname,port:t.port,pathname:t.pathname.charAt(0)==="/"?t.pathname:"/"+t.pathname}}return i=s(window.location.href),function(r){const n=$.isString(r)?s(r):r;return n.protocol===i.protocol&&n.host===i.host}}():function(){return function(){return!0}}();function Rf(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}function Of(e,t){e=e||10;const i=new Array(e),s=new Array(e);let r=0,n=0,l;return t=t!==void 0?t:1e3,function(o){const a=Date.now(),h=s[n];l||(l=a),i[r]=o,s[r]=a;let u=n,f=0;for(;u!==r;)f+=i[u++],u=u%e;if(r=(r+1)%e,r===n&&(n=(n+1)%e),a-l<t)return;const _=h&&a-h;return _?Math.round(f*1e3/_):void 0}}function to(e,t){let i=0;const s=Of(50,250);return r=>{const n=r.loaded,l=r.lengthComputable?r.total:void 0,o=n-i,a=s(o),h=n<=l;i=n;const u={loaded:n,total:l,progress:l?n/l:void 0,bytes:o,rate:a||void 0,estimated:a&&l&&h?(l-n)/a:void 0,event:r};u[t?"download":"upload"]=!0,e(u)}}const Bf=typeof XMLHttpRequest<"u",Hf=Bf&&function(e){return new Promise(function(t,i){let s=e.data;const r=ti.from(e.headers).normalize();let{responseType:n,withXSRFToken:l}=e,o;function a(){e.cancelToken&&e.cancelToken.unsubscribe(o),e.signal&&e.signal.removeEventListener("abort",o)}let h;if($.isFormData(s)){if(Yt.hasStandardBrowserEnv||Yt.hasStandardBrowserWebWorkerEnv)r.setContentType(!1);else if((h=r.getContentType())!==!1){const[b,...g]=h?h.split(";").map(c=>c.trim()).filter(Boolean):[];r.setContentType([b||"multipart/form-data",...g].join("; "))}}let u=new XMLHttpRequest;if(e.auth){const b=e.auth.username||"",g=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";r.set("Authorization","Basic "+btoa(b+":"+g))}const f=fl(e.baseURL,e.url);u.open(e.method.toUpperCase(),al(f,e.params,e.paramsSerializer),!0),u.timeout=e.timeout;function _(){if(!u)return;const b=ti.from("getAllResponseHeaders"in u&&u.getAllResponseHeaders()),g={data:!n||n==="text"||n==="json"?u.responseText:u.response,status:u.status,statusText:u.statusText,headers:b,config:e,request:u};Lf(function(c){t(c),a()},function(c){i(c),a()},g),u=null}if("onloadend"in u?u.onloadend=_:u.onreadystatechange=function(){!u||u.readyState!==4||u.status===0&&!(u.responseURL&&u.responseURL.indexOf("file:")===0)||setTimeout(_)},u.onabort=function(){u&&(i(new De("Request aborted",De.ECONNABORTED,e,u)),u=null)},u.onerror=function(){i(new De("Network Error",De.ERR_NETWORK,e,u)),u=null},u.ontimeout=function(){let b=e.timeout?"timeout of "+e.timeout+"ms exceeded":"timeout exceeded";const g=e.transitional||ll;e.timeoutErrorMessage&&(b=e.timeoutErrorMessage),i(new De(b,g.clarifyTimeoutError?De.ETIMEDOUT:De.ECONNABORTED,e,u)),u=null},Yt.hasStandardBrowserEnv&&(l&&$.isFunction(l)&&(l=l(e)),l||l!==!1&&Af(f))){const b=e.xsrfHeaderName&&e.xsrfCookieName&&Mf.read(e.xsrfCookieName);b&&r.set(e.xsrfHeaderName,b)}s===void 0&&r.setContentType(null),"setRequestHeader"in u&&$.forEach(r.toJSON(),function(b,g){u.setRequestHeader(g,b)}),$.isUndefined(e.withCredentials)||(u.withCredentials=!!e.withCredentials),n&&n!=="json"&&(u.responseType=e.responseType),typeof e.onDownloadProgress=="function"&&u.addEventListener("progress",to(e.onDownloadProgress,!0)),typeof e.onUploadProgress=="function"&&u.upload&&u.upload.addEventListener("progress",to(e.onUploadProgress)),(e.cancelToken||e.signal)&&(o=b=>{u&&(i(!b||b.type?new ms(null,e,u):b),u.abort(),u=null)},e.cancelToken&&e.cancelToken.subscribe(o),e.signal&&(e.signal.aborted?o():e.signal.addEventListener("abort",o)));const v=Rf(f);if(v&&Yt.protocols.indexOf(v)===-1){i(new De("Unsupported protocol "+v+":",De.ERR_BAD_REQUEST,e));return}u.send(s||null)})},Zr={http:rf,xhr:Hf};$.forEach(Zr,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch{}Object.defineProperty(e,"adapterName",{value:t})}});const io=e=>`- ${e}`,xf=e=>$.isFunction(e)||e===null||e===!1,dl={getAdapter:e=>{e=$.isArray(e)?e:[e];const{length:t}=e;let i,s;const r={};for(let n=0;n<t;n++){i=e[n];let l;if(s=i,!xf(i)&&(s=Zr[(l=String(i)).toLowerCase()],s===void 0))throw new De(`Unknown adapter '${l}'`);if(s)break;r[l||"#"+n]=s}if(!s){const n=Object.entries(r).map(([o,a])=>`adapter ${o} `+(a===!1?"is not supported by the environment":"is not available in the build"));let l=t?n.length>1?`since :
`+n.map(io).join(`
`):" "+io(n[0]):"as no adapter specified";throw new De("There is no suitable adapter to dispatch the request "+l,"ERR_NOT_SUPPORT")}return s},adapters:Zr};function kr(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new ms(null,e)}function so(e){return kr(e),e.headers=ti.from(e.headers),e.data=Cr.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),dl.getAdapter(e.adapter||mn.adapter)(e).then(function(t){return kr(e),t.data=Cr.call(e,e.transformResponse,t),t.headers=ti.from(t.headers),t},function(t){return ul(t)||(kr(e),t&&t.response&&(t.response.data=Cr.call(e,e.transformResponse,t.response),t.response.headers=ti.from(t.response.headers))),Promise.reject(t)})}const ro=e=>e instanceof ti?e.toJSON():e;function Wi(e,t){t=t||{};const i={};function s(h,u,f){return $.isPlainObject(h)&&$.isPlainObject(u)?$.merge.call({caseless:f},h,u):$.isPlainObject(u)?$.merge({},u):$.isArray(u)?u.slice():u}function r(h,u,f){if($.isUndefined(u)){if(!$.isUndefined(h))return s(void 0,h,f)}else return s(h,u,f)}function n(h,u){if(!$.isUndefined(u))return s(void 0,u)}function l(h,u){if($.isUndefined(u)){if(!$.isUndefined(h))return s(void 0,h)}else return s(void 0,u)}function o(h,u,f){if(f in t)return s(h,u);if(f in e)return s(void 0,h)}const a={url:n,method:n,data:n,baseURL:l,transformRequest:l,transformResponse:l,paramsSerializer:l,timeout:l,timeoutMessage:l,withCredentials:l,withXSRFToken:l,adapter:l,responseType:l,xsrfCookieName:l,xsrfHeaderName:l,onUploadProgress:l,onDownloadProgress:l,decompress:l,maxContentLength:l,maxBodyLength:l,beforeRedirect:l,transport:l,httpAgent:l,httpsAgent:l,cancelToken:l,socketPath:l,responseEncoding:l,validateStatus:o,headers:(h,u)=>r(ro(h),ro(u),!0)};return $.forEach(Object.keys(Object.assign({},e,t)),function(h){const u=a[h]||r,f=u(e[h],t[h],h);$.isUndefined(f)&&u!==o||(i[h]=f)}),i}const _l="1.6.2",gn={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{gn[e]=function(i){return typeof i===e||"a"+(t<1?"n ":" ")+e}});const no={};gn.transitional=function(e,t,i){function s(r,n){return"[Axios v"+_l+"] Transitional option '"+r+"'"+n+(i?". "+i:"")}return(r,n,l)=>{if(e===!1)throw new De(s(n," has been removed"+(t?" in "+t:"")),De.ERR_DEPRECATED);return t&&!no[n]&&(no[n]=!0,console.warn(s(n," has been deprecated since v"+t+" and will be removed in the near future"))),e?e(r,n,l):!0}};function Pf(e,t,i){if(typeof e!="object")throw new De("options must be an object",De.ERR_BAD_OPTION_VALUE);const s=Object.keys(e);let r=s.length;for(;r-- >0;){const n=s[r],l=t[n];if(l){const o=e[n],a=o===void 0||l(o,n,e);if(a!==!0)throw new De("option "+n+" must be "+a,De.ERR_BAD_OPTION_VALUE);continue}if(i!==!0)throw new De("Unknown option "+n,De.ERR_BAD_OPTION)}}const Kr={assertOptions:Pf,validators:gn},fi=Kr.validators;let js=class{constructor(e){this.defaults=e,this.interceptors={request:new Qn,response:new Qn}}request(e,t){typeof e=="string"?(t=t||{},t.url=e):t=e||{},t=Wi(this.defaults,t);const{transitional:i,paramsSerializer:s,headers:r}=t;i!==void 0&&Kr.assertOptions(i,{silentJSONParsing:fi.transitional(fi.boolean),forcedJSONParsing:fi.transitional(fi.boolean),clarifyTimeoutError:fi.transitional(fi.boolean)},!1),s!=null&&($.isFunction(s)?t.paramsSerializer={serialize:s}:Kr.assertOptions(s,{encode:fi.function,serialize:fi.function},!0)),t.method=(t.method||this.defaults.method||"get").toLowerCase();let n=r&&$.merge(r.common,r[t.method]);r&&$.forEach(["delete","get","head","post","put","patch","common"],v=>{delete r[v]}),t.headers=ti.concat(n,r);const l=[];let o=!0;this.interceptors.request.forEach(function(v){typeof v.runWhen=="function"&&v.runWhen(t)===!1||(o=o&&v.synchronous,l.unshift(v.fulfilled,v.rejected))});const a=[];this.interceptors.response.forEach(function(v){a.push(v.fulfilled,v.rejected)});let h,u=0,f;if(!o){const v=[so.bind(this),void 0];for(v.unshift.apply(v,l),v.push.apply(v,a),f=v.length,h=Promise.resolve(t);u<f;)h=h.then(v[u++],v[u++]);return h}f=l.length;let _=t;for(u=0;u<f;){const v=l[u++],b=l[u++];try{_=v(_)}catch(g){b.call(this,g);break}}try{h=so.call(this,_)}catch(v){return Promise.reject(v)}for(u=0,f=a.length;u<f;)h=h.then(a[u++],a[u++]);return h}getUri(e){e=Wi(this.defaults,e);const t=fl(e.baseURL,e.url);return al(t,e.params,e.paramsSerializer)}};$.forEach(["delete","get","head","options"],function(e){js.prototype[e]=function(t,i){return this.request(Wi(i||{},{method:e,url:t,data:(i||{}).data}))}});$.forEach(["post","put","patch"],function(e){function t(i){return function(s,r,n){return this.request(Wi(n||{},{method:e,headers:i?{"Content-Type":"multipart/form-data"}:{},url:s,data:r}))}}js.prototype[e]=t(),js.prototype[e+"Form"]=t(!0)});const Bs=js;let If=class pl{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let i;this.promise=new Promise(function(r){i=r});const s=this;this.promise.then(r=>{if(!s._listeners)return;let n=s._listeners.length;for(;n-- >0;)s._listeners[n](r);s._listeners=null}),this.promise.then=r=>{let n;const l=new Promise(o=>{s.subscribe(o),n=o}).then(r);return l.cancel=function(){s.unsubscribe(n)},l},t(function(r,n,l){s.reason||(s.reason=new ms(r,n,l),i(s.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const i=this._listeners.indexOf(t);i!==-1&&this._listeners.splice(i,1)}static source(){let t;return{token:new pl(function(i){t=i}),cancel:t}}};const Nf=If;function Vf(e){return function(t){return e.apply(null,t)}}function jf(e){return $.isObject(e)&&e.isAxiosError===!0}const Gr={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Gr).forEach(([e,t])=>{Gr[t]=e});const Ff=Gr;function ml(e){const t=new Bs(e),i=Ga(Bs.prototype.request,t);return $.extend(i,Bs.prototype,t,{allOwnKeys:!0}),$.extend(i,t,null,{allOwnKeys:!0}),i.create=function(s){return ml(Wi(e,s))},i}const st=ml(mn);st.Axios=Bs;st.CanceledError=ms;st.CancelToken=Nf;st.isCancel=ul;st.VERSION=_l;st.toFormData=tr;st.AxiosError=De;st.Cancel=st.CanceledError;st.all=function(e){return Promise.all(e)};st.spread=Vf;st.isAxiosError=jf;st.mergeConfig=Wi;st.AxiosHeaders=ti;st.formToJSON=e=>hl($.isHTMLForm(e)?new FormData(e):e);st.getAdapter=dl.getAdapter;st.HttpStatusCode=Ff;st.default=st;const gl=st,{Axios:T4,AxiosError:D4,CanceledError:A4,isCancel:R4,CancelToken:O4,VERSION:B4,all:H4,Cancel:x4,isAxiosError:P4,spread:I4,toFormData:N4,AxiosHeaders:V4,HttpStatusCode:ws,formToJSON:j4,getAdapter:F4,mergeConfig:U4}=gl;var Hi=null;typeof WebSocket<"u"?Hi=WebSocket:typeof MozWebSocket<"u"?Hi=MozWebSocket:typeof global<"u"?Hi=global.WebSocket||global.MozWebSocket:typeof window<"u"?Hi=window.WebSocket||window.MozWebSocket:typeof self<"u"&&(Hi=self.WebSocket||self.MozWebSocket);const Uf=Hi,Er={SCHEMA_DIR_RELATIVE_PATH:"./../schemas/",SCHEMA_FILENAME_PAYLOAD:"payload.schema.json",SCHEMA_FILENAME_RESPONSE:"response.schema.json",SIYUAN_DEFAULT_BASE_URL:"http://localhost:6806/",SIYUAN_DEFAULT_TOKEN:"",REQUEST_TIMEOUT:6e4};var oo,ao,lo,co,ho;const Jr=class U{constructor(t={},i="xhr"){Xt(this,"_type","xhr"),Xt(this,"_baseURL",((ao=(oo=globalThis.top)==null?void 0:oo.document)==null?void 0:ao.baseURI)??((co=(lo=globalThis.parent)==null?void 0:lo.document)==null?void 0:co.baseURI)??((ho=globalThis.location)==null?void 0:ho.origin)??Er.SIYUAN_DEFAULT_BASE_URL),Xt(this,"_token",Er.SIYUAN_DEFAULT_TOKEN),Xt(this,"_axios",gl.create({baseURL:this._baseURL,timeout:Er.REQUEST_TIMEOUT,headers:{Authorization:`Token ${this._token}`}})),Xt(this,"_fetch",yu.create({baseURL:this._baseURL,headers:{Authorization:`Token ${this._token}`}})),this._setClientType(i),this._updateOptions(t,i)}static headers2record(t){const i={};return t.forEach((s,r)=>{i[r]=s}),i}static entries2record(t){const i={};for(const[s,r]of t)i[s]=r;return i}_setClientType(t){this._type=t}_updateOptions(t,i=this._type){switch(this._token=t.token??this._token,this._baseURL=t.baseURL??this._baseURL,i){case"fetch":const s=t;if(s.token){const r="Authorization",n=`Token ${t.token}`;Array.isArray(s.headers)?s.headers.push([r,n]):s.headers instanceof Headers?s.headers.set(r,n):typeof s.headers=="object"?s.headers[r]=n:s.headers={[r]:n},delete t.token}this._fetch=this._fetch.create(s);break;case"xhr":default:for(const[r,n]of Object.entries(t))switch(r){case"token":this._axios.defaults.headers.Authorization=`Token ${this._token}`;break;default:this._axios.defaults[r]=n;break}break}this._baseURL=t.baseURL??this._baseURL}broadcast(t,i,s){const r=(s==null?void 0:s.baseURL)??this._baseURL,n=(s==null?void 0:s.token)??this._token,l=new URLSearchParams(t);n&&l.set("token",n);const o=new URL(r);return o.protocol=o.protocol.replace(/^http/,"ws"),o.pathname=o.pathname.endsWith("/")?`${o.pathname}${U.ws.broadcast.pathname.substring(1)}`:`${o.pathname}${U.ws.broadcast.pathname}`,o.search=l.toString(),new Uf(o,i)}async upload(t,i){const s=new FormData;return s.append("assetsDirPath",t.assetsDirPath??"/assets/"),t.files.forEach(r=>s.append("file[]",r)),await this._request(U.api.asset.upload.pathname,U.api.asset.upload.method,s,i)}async getBlockAttrs(t,i){return await this._request(U.api.attr.getBlockAttrs.pathname,U.api.attr.getBlockAttrs.method,t,i)}async getBookmarkLabels(t){return await this._request(U.api.attr.getBookmarkLabels.pathname,U.api.attr.getBookmarkLabels.method,void 0,t)}async setBlockAttrs(t,i){return await this._request(U.api.attr.setBlockAttrs.pathname,U.api.attr.setBlockAttrs.method,t,i)}async appendBlock(t,i){return await this._request(U.api.block.appendBlock.pathname,U.api.block.appendBlock.method,t,i)}async deleteBlock(t,i){return await this._request(U.api.block.deleteBlock.pathname,U.api.block.deleteBlock.method,t,i)}async getBlockBreadcrumb(t,i){return await this._request(U.api.block.getBlockBreadcrumb.pathname,U.api.block.getBlockBreadcrumb.method,t,i)}async getBlockDOM(t,i){return await this._request(U.api.block.getBlockDOM.pathname,U.api.block.getBlockDOM.method,t,i)}async getBlockInfo(t,i){return await this._request(U.api.block.getBlockInfo.pathname,U.api.block.getBlockInfo.method,t,i)}async getBlockKramdown(t,i){return await this._request(U.api.block.getBlockKramdown.pathname,U.api.block.getBlockKramdown.method,t,i)}async getChildBlocks(t,i){return await this._request(U.api.block.getChildBlocks.pathname,U.api.block.getChildBlocks.method,t,i)}async getDocInfo(t,i){return await this._request(U.api.block.getDocInfo.pathname,U.api.block.getDocInfo.method,t,i)}async insertBlock(t,i){return await this._request(U.api.block.insertBlock.pathname,U.api.block.insertBlock.method,t,i)}async moveBlock(t,i){return await this._request(U.api.block.moveBlock.pathname,U.api.block.moveBlock.method,t,i)}async prependBlock(t,i){return await this._request(U.api.block.prependBlock.pathname,U.api.block.prependBlock.method,t,i)}async transferBlockRef(t,i){return await this._request(U.api.block.transferBlockRef.pathname,U.api.block.transferBlockRef.method,t,i)}async updateBlock(t,i){return await this._request(U.api.block.updateBlock.pathname,U.api.block.updateBlock.method,t,i)}async getChannelInfo(t,i){return await this._request(U.api.broadcast.getChannelInfo.pathname,U.api.broadcast.getChannelInfo.method,t,i)}async getChannels(t){return await this._request(U.api.broadcast.getChannels.pathname,U.api.broadcast.getChannels.method,void 0,t)}async postMessage(t,i){return await this._request(U.api.broadcast.postMessage.pathname,U.api.broadcast.postMessage.method,t,i)}async pandoc(t,i){return await this._request(U.api.convert.pandoc.pathname,U.api.convert.pandoc.method,t,i)}async exportResources(t,i){return await this._request(U.api.export.exportResources.pathname,U.api.export.exportResources.method,t,i)}async exportMdContent(t,i){return await this._request(U.api.export.exportMdContent.pathname,U.api.export.exportMdContent.method,t,i)}async getFile(t,i="text",s){return await this._request(U.api.file.getFile.pathname,U.api.file.getFile.method,t,s,!1,i)}async putFile(t,i){t.file!==void 0&&!(t.file instanceof File)&&(t.file=new File([t.file],t.path.split("/").pop()));const s=new FormData;for(const[r,n]of Object.entries(t))t.hasOwnProperty(r)&&(n instanceof Blob?s.append(r,n):s.append(r,String(n)));return await this._request(U.api.file.putFile.pathname,U.api.file.putFile.method,s,i)}async readDir(t,i){return await this._request(U.api.file.readDir.pathname,U.api.file.readDir.method,t,i)}async removeFile(t,i){return await this._request(U.api.file.removeFile.pathname,U.api.file.removeFile.method,t,i)}async renameFile(t,i){return await this._request(U.api.file.renameFile.pathname,U.api.file.renameFile.method,t,i)}async createDailyNote(t,i){return await this._request(U.api.filetree.createDailyNote.pathname,U.api.filetree.createDailyNote.method,t,i)}async createDocWithMd(t,i){return await this._request(U.api.filetree.createDocWithMd.pathname,U.api.filetree.createDocWithMd.method,t,i)}async getDoc(t,i){return await this._request(U.api.filetree.getDoc.pathname,U.api.filetree.getDoc.method,t,i)}async getHPathByID(t,i){return await this._request(U.api.filetree.getHPathByID.pathname,U.api.filetree.getHPathByID.method,t,i)}async getHPathByPath(t,i){return await this._request(U.api.filetree.getHPathByPath.pathname,U.api.filetree.getHPathByPath.method,t,i)}async getIDsByHPath(t,i){return await this._request(U.api.filetree.getIDsByHPath.pathname,U.api.filetree.getIDsByHPath.method,t,i)}async listDocsByPath(t,i){return await this._request(U.api.filetree.listDocsByPath.pathname,U.api.filetree.listDocsByPath.method,t,i)}async moveDocs(t,i){return await this._request(U.api.filetree.moveDocs.pathname,U.api.filetree.moveDocs.method,t,i)}async removeDoc(t,i){return await this._request(U.api.filetree.removeDoc.pathname,U.api.filetree.removeDoc.method,t,i)}async renameDoc(t,i){return await this._request(U.api.filetree.renameDoc.pathname,U.api.filetree.renameDoc.method,t,i)}async searchDocs(t,i){return await this._request(U.api.filetree.searchDocs.pathname,U.api.filetree.searchDocs.method,t,i)}async getDocHistoryContent(t,i){return await this._request(U.api.history.getDocHistoryContent.pathname,U.api.history.getDocHistoryContent.method,t,i)}async getHistoryItems(t,i){return await this._request(U.api.history.getHistoryItems.pathname,U.api.history.getHistoryItems.method,t,i)}async getShorthand(t,i){return await this._request(U.api.inbox.getShorthand.pathname,U.api.inbox.getShorthand.method,t,i)}async echo(t,i){if(t)switch(i??(i={type:this._type}),i==null?void 0:i.type){case"fetch":{const s={};t.headers&&(s.headers=t.headers),t.query&&(s.query=U.entries2record(t.query.entries())),i.options?Object.assign(s,i.options):i.options=s;break}case"xhr":{const s={};t.headers&&(s.headers=Array.isArray(t.headers)?U.entries2record(t.headers):t.headers instanceof Headers?U.headers2record(t.headers):t.headers),t.query&&(s.params=t.query),i.options?Object.assign(s,i.options):i.options=s;break}}return await this._request(U.api.network.echo.pathname,(t==null?void 0:t.method)??U.api.network.echo.method,t==null?void 0:t.body,i)}async forwardProxy(t,i){return await this._request(U.api.network.forwardProxy.pathname,U.api.network.forwardProxy.method,t,i)}async closeNotebook(t,i){return await this._request(U.api.notebook.closeNotebook.pathname,U.api.notebook.closeNotebook.method,t,i)}async createNotebook(t,i){return await this._request(U.api.notebook.createNotebook.pathname,U.api.notebook.createNotebook.method,t,i)}async getNotebookConf(t,i){return await this._request(U.api.notebook.getNotebookConf.pathname,U.api.notebook.getNotebookConf.method,t,i)}async lsNotebooks(t){return await this._request(U.api.notebook.lsNotebooks.pathname,U.api.notebook.lsNotebooks.method,void 0,t)}async openNotebook(t,i){return await this._request(U.api.notebook.openNotebook.pathname,U.api.notebook.openNotebook.method,t,i)}async removeNotebook(t,i){return await this._request(U.api.notebook.removeNotebook.pathname,U.api.notebook.removeNotebook.method,t,i)}async renameNotebook(t,i){return await this._request(U.api.notebook.renameNotebook.pathname,U.api.notebook.renameNotebook.method,t,i)}async setNotebookConf(t,i){return await this._request(U.api.notebook.setNotebookConf.pathname,U.api.notebook.setNotebookConf.method,t,i)}async pushErrMsg(t,i){return await this._request(U.api.notification.pushErrMsg.pathname,U.api.notification.pushErrMsg.method,t,i)}async pushMsg(t,i){return await this._request(U.api.notification.pushMsg.pathname,U.api.notification.pushMsg.method,t,i)}async sql(t,i){return await this._request(U.api.query.sql.pathname,U.api.query.sql.method,t,i)}async openRepoSnapshotDoc(t,i){return await this._request(U.api.repo.openRepoSnapshotDoc.pathname,U.api.repo.openRepoSnapshotDoc.method,t,i)}async fullTextSearchBlock(t,i){return await this._request(U.api.search.fullTextSearchBlock.pathname,U.api.search.fullTextSearchBlock.method,t,i)}async getSnippet(t,i){return await this._request(U.api.snippet.getSnippet.pathname,U.api.snippet.getSnippet.method,t,i)}async setSnippet(t,i){return await this._request(U.api.snippet.setSnippet.pathname,U.api.snippet.setSnippet.method,t,i)}async getLocalStorage(t){return await this._request(U.api.storage.getLocalStorage.pathname,U.api.storage.getLocalStorage.method,void 0,t)}async getRecentDocs(t){return await this._request(U.api.storage.getRecentDocs.pathname,U.api.storage.getRecentDocs.method,void 0,t)}async setLocalStorage(t,i){return await this._request(U.api.storage.setLocalStorage.pathname,U.api.storage.setLocalStorage.method,t,i)}async setLocalStorageVal(t,i){return await this._request(U.api.storage.setLocalStorageVal.pathname,U.api.storage.setLocalStorageVal.method,t,i)}async bootProgress(t){return await this._request(U.api.system.bootProgress.pathname,U.api.system.bootProgress.method,void 0,t)}async getConf(t){return await this._request(U.api.system.getConf.pathname,U.api.system.getConf.method,void 0,t)}async currentTime(t){return await this._request(U.api.system.currentTime.pathname,U.api.system.currentTime.method,void 0,t)}async version(t){return await this._request(U.api.system.version.pathname,U.api.system.version.method,void 0,t)}async render(t,i){return await this._request(U.api.template.render.pathname,U.api.template.render.method,t,i)}async renderSprig(t,i){return await this._request(U.api.template.renderSprig.pathname,U.api.template.renderSprig.method,t,i)}async _request(t,i,s,r,n=!0,l="json"){try{switch((r==null?void 0:r.type)??this._type){case"fetch":{const o=r==null?void 0:r.options;l=(()=>{switch(l){case"arraybuffer":return"arrayBuffer";case"document":return"text";default:return l}})();const a=await this._fetch(t,{method:i,body:s,responseType:l,onResponse:async h=>{switch(h.response.status){case ws.Ok:switch(l){case"blob":h.response._data.contentType=h.response.headers.get("content-type");break;default:break}break;case ws.Accepted:t===U.api.file.getFile.pathname&&this._parseFetchResponse(h.response._data);break;default:break}},...o});return n&&l==="json"&&typeof a=="object"?this._parseFetchResponse(a):a}case"xhr":default:{const o=r==null?void 0:r.options;l=(()=>{switch(l){case"arrayBuffer":return"arraybuffer";default:return l}})();const a=await this._axios.request({url:t,method:i,data:s,responseType:l,...o});switch(a.status){case ws.Ok:if(n&&l==="json"&&typeof a.data=="object")return this._parseAxiosResponse(a);switch(l){case"blob":a.data.contentType=a.headers.getContentType();break;default:break}return a.data;case ws.Accepted:return t===U.api.file.getFile.pathname?this._parseAxiosResponse(a):a.data;default:throw new wu(a)}}}}catch(o){throw o}}_parseFetchResponse(t){if(t.code===0)return t;throw new Zn(t)}_parseAxiosResponse(t){if(t.data.code===0)return t.data;throw new Zn(t.data,t)}};Xt(Jr,"ws",{broadcast:{pathname:"/ws/broadcast"}}),Xt(Jr,"api",{asset:{upload:{pathname:"/api/asset/upload",method:"POST"}},attr:{getBlockAttrs:{pathname:"/api/attr/getBlockAttrs",method:"POST"},getBookmarkLabels:{pathname:"/api/attr/getBookmarkLabels",method:"POST"},setBlockAttrs:{pathname:"/api/attr/setBlockAttrs",method:"POST"}},block:{appendBlock:{pathname:"/api/block/appendBlock",method:"POST"},deleteBlock:{pathname:"/api/block/deleteBlock",method:"POST"},getBlockBreadcrumb:{pathname:"/api/block/getBlockBreadcrumb",method:"POST"},getBlockDOM:{pathname:"/api/block/getBlockDOM",method:"POST"},getBlockInfo:{pathname:"/api/block/getBlockInfo",method:"POST"},getBlockKramdown:{pathname:"/api/block/getBlockKramdown",method:"POST"},getChildBlocks:{pathname:"/api/block/getChildBlocks",method:"POST"},getDocInfo:{pathname:"/api/block/getDocInfo",method:"POST"},insertBlock:{pathname:"/api/block/insertBlock",method:"POST"},moveBlock:{pathname:"/api/block/moveBlock",method:"POST"},prependBlock:{pathname:"/api/block/prependBlock",method:"POST"},transferBlockRef:{pathname:"/api/block/transferBlockRef",method:"POST"},updateBlock:{pathname:"/api/block/updateBlock",method:"POST"}},broadcast:{getChannelInfo:{pathname:"/api/broadcast/getChannelInfo",method:"POST"},getChannels:{pathname:"/api/broadcast/getChannels",method:"POST"},postMessage:{pathname:"/api/broadcast/postMessage",method:"POST"}},convert:{pandoc:{pathname:"/api/convert/pandoc",method:"POST"}},export:{exportMdContent:{pathname:"/api/export/exportMdContent",method:"POST"},exportResources:{pathname:"/api/export/exportResources",method:"POST"}},file:{getFile:{pathname:"/api/file/getFile",method:"POST"},putFile:{pathname:"/api/file/putFile",method:"POST"},readDir:{pathname:"/api/file/readDir",method:"POST"},removeFile:{pathname:"/api/file/removeFile",method:"POST"},renameFile:{pathname:"/api/file/renameFile",method:"POST"}},filetree:{createDailyNote:{pathname:"/api/filetree/createDailyNote",method:"POST"},createDocWithMd:{pathname:"/api/filetree/createDocWithMd",method:"POST"},getDoc:{pathname:"/api/filetree/getDoc",method:"POST"},getHPathByID:{pathname:"/api/filetree/getHPathByID",method:"POST"},getHPathByPath:{pathname:"/api/filetree/getHPathByPath",method:"POST"},getIDsByHPath:{pathname:"/api/filetree/getIDsByHPath",method:"POST"},listDocsByPath:{pathname:"/api/filetree/listDocsByPath",method:"POST"},moveDocs:{pathname:"/api/filetree/moveDocs",method:"POST"},removeDoc:{pathname:"/api/filetree/removeDoc",method:"POST"},renameDoc:{pathname:"/api/filetree/renameDoc",method:"POST"},searchDocs:{pathname:"/api/filetree/searchDocs",method:"POST"}},history:{getDocHistoryContent:{pathname:"/api/history/getDocHistoryContent",method:"POST"},getHistoryItems:{pathname:"/api/history/getHistoryItems",method:"POST"}},inbox:{getShorthand:{pathname:"/api/inbox/getShorthand",method:"POST"}},network:{echo:{pathname:"/api/network/echo",method:"POST"},forwardProxy:{pathname:"/api/network/forwardProxy",method:"POST"}},notebook:{closeNotebook:{pathname:"/api/notebook/closeNotebook",method:"POST"},createNotebook:{pathname:"/api/notebook/createNotebook",method:"POST"},getNotebookConf:{pathname:"/api/notebook/getNotebookConf",method:"POST"},lsNotebooks:{pathname:"/api/notebook/lsNotebooks",method:"POST"},openNotebook:{pathname:"/api/notebook/openNotebook",method:"POST"},removeNotebook:{pathname:"/api/notebook/removeNotebook",method:"POST"},renameNotebook:{pathname:"/api/notebook/renameNotebook",method:"POST"},setNotebookConf:{pathname:"/api/notebook/setNotebookConf",method:"POST"}},notification:{pushErrMsg:{pathname:"/api/notification/pushErrMsg",method:"POST"},pushMsg:{pathname:"/api/notification/pushMsg",method:"POST"}},query:{sql:{pathname:"/api/query/sql",method:"POST"}},repo:{openRepoSnapshotDoc:{pathname:"/api/repo/openRepoSnapshotDoc",method:"POST"}},search:{fullTextSearchBlock:{pathname:"/api/search/fullTextSearchBlock",method:"POST"}},snippet:{getSnippet:{pathname:"/api/snippet/getSnippet",method:"POST"},setSnippet:{pathname:"/api/snippet/setSnippet",method:"POST"}},storage:{getLocalStorage:{pathname:"/api/storage/getLocalStorage",method:"POST"},getRecentDocs:{pathname:"/api/storage/getRecentDocs",method:"POST"},setLocalStorage:{pathname:"/api/storage/setLocalStorage",method:"POST"},setLocalStorageVal:{pathname:"/api/storage/setLocalStorageVal",method:"POST"}},system:{bootProgress:{pathname:"/api/system/bootProgress",method:"POST"},currentTime:{pathname:"/api/system/currentTime",method:"POST"},getConf:{pathname:"/api/system/getConf",method:"POST"},version:{pathname:"/api/system/version",method:"POST"}},template:{render:{pathname:"/api/template/render",method:"POST"},renderSprig:{pathname:"/api/template/renderSprig",method:"POST"}}});let Wf=Jr;var vl=(e=>(e.NodeNotebook="NodeNotebook",e.NodeFolder="NodeFolder",e.NodeDocument="NodeDocument",e.NodeSuperBlock="NodeSuperBlock",e.NodeBlockquote="NodeBlockquote",e.NodeList="NodeList",e.NodeListItem="NodeListItem",e.NodeHeading="NodeHeading",e.NodeParagraph="NodeParagraph",e.NodeMathBlock="NodeMathBlock",e.NodeTable="NodeTable",e.NodeCodeBlock="NodeCodeBlock",e.NodeHTMLBlock="NodeHTMLBlock",e.NodeBlockQueryEmbed="NodeBlockQueryEmbed",e.NodeAttributeView="NodeAttributeView",e.NodeThematicBreak="NodeThematicBreak",e.NodeAudio="NodeAudio",e.NodeVideo="NodeVideo",e.NodeIFrame="NodeIFrame",e.NodeWidget="NodeWidget",e))(vl||{}),bl=(e=>(e.d="d",e.s="s",e.b="b",e.l="l",e.i="i",e.h="h",e.p="p",e.m="m",e.t="t",e.c="c",e.html="html",e.query_embed="query_embed",e.tb="tb",e.audio="audio",e.video="video",e.iframe="iframe",e.widget="widget",e))(bl||{}),yl=(e=>(e.d="d",e.s="s",e.b="b",e.l="l",e.i="i",e))(yl||{}),wl=(e=>(e.h="h",e.p="p",e.m="m",e.t="t",e.c="c",e.html="html",e.query_embed="query_embed",e.tb="tb",e.audio="audio",e.video="video",e.iframe="iframe",e.widget="widget",e))(wl||{}),Sl=(e=>(e.h1="h1",e.h2="h2",e.h3="h3",e.h4="h4",e.h5="h5",e.h6="h6",e.u="u",e.o="o",e.t="t",e.none="",e))(Sl||{}),Cl=(e=>(e.u="u",e.o="o",e.t="t",e))(Cl||{}),kl=(e=>(e.h1="h1",e.h2="h2",e.h3="h3",e.h4="h4",e.h5="h5",e.h6="h6",e))(kl||{}),El=(e=>(e[e.keyword=0]="keyword",e[e.querySyntax=1]="querySyntax",e[e.sql=2]="sql",e[e.regex=3]="regex",e))(El||{}),Ll=(e=>(e[e.noGroupBy=0]="noGroupBy",e[e.group=1]="group",e))(Ll||{}),Ml=(e=>(e[e.type=0]="type",e[e.createdASC=1]="createdASC",e[e.createdDESC=2]="createdDESC",e[e.modifiedASC=3]="modifiedASC",e[e.modifiedDESC=4]="modifiedDESC",e[e.sortByContent=5]="sortByContent",e[e.sortByRankAsc=6]="sortByRankAsc",e[e.sortByRankDesc=7]="sortByRankDesc",e))(Ml||{}),Tl=(e=>(e[e.SortModeNameASC=0]="SortModeNameASC",e[e.SortModeNameDESC=1]="SortModeNameDESC",e[e.SortModeUpdatedASC=2]="SortModeUpdatedASC",e[e.SortModeUpdatedDESC=3]="SortModeUpdatedDESC",e[e.SortModeAlphanumASC=4]="SortModeAlphanumASC",e[e.SortModeAlphanumDESC=5]="SortModeAlphanumDESC",e[e.SortModeCustom=6]="SortModeCustom",e[e.SortModeRefCountASC=7]="SortModeRefCountASC",e[e.SortModeRefCountDESC=8]="SortModeRefCountDESC",e[e.SortModeCreatedASC=9]="SortModeCreatedASC",e[e.SortModeCreatedDESC=10]="SortModeCreatedDESC",e[e.SortModeSizeASC=11]="SortModeSizeASC",e[e.SortModeSizeDESC=12]="SortModeSizeDESC",e[e.SortModeSubDocCountASC=13]="SortModeSubDocCountASC",e[e.SortModeSubDocCountDESC=14]="SortModeSubDocCountDESC",e))(Tl||{});const Dl=Object.freeze(Object.defineProperty({__proto__:null,BlockSubType:Sl,BlockType:bl,Container:yl,GroupBy:Ll,Leaf:wl,Method:El,NodeHeadingSubType:kl,NodeListSubType:Cl,NodeType:vl,OrderBy:Ml,SortMode:Tl},Symbol.toStringTag,{value:"Module"}));function Ie(){}function oi(e,t){for(const i in t)e[i]=t[i];return e}function Al(e){return e()}function uo(){return Object.create(null)}function rt(e){e.forEach(Al)}function vn(e){return typeof e=="function"}function Pe(e,t){return e!=e?t==t:e!==t||e&&typeof e=="object"||typeof e=="function"}let Ss;function Fs(e,t){return e===t?!0:(Ss||(Ss=document.createElement("a")),Ss.href=t,e===Ss.href)}function zf(e){return Object.keys(e).length===0}function Yf(e,...t){if(e==null){for(const s of t)s(void 0);return Ie}const i=e.subscribe(...t);return i.unsubscribe?()=>i.unsubscribe():i}function pi(e){let t;return Yf(e,i=>t=i)(),t}function qe(e,t,i,s){if(e){const r=Rl(e,t,i,s);return e[0](r)}}function Rl(e,t,i,s){return e[1]&&s?oi(i.ctx.slice(),e[1](s(t))):i.ctx}function Ze(e,t,i,s){if(e[2]&&s){const r=e[2](s(i));if(t.dirty===void 0)return r;if(typeof r=="object"){const n=[],l=Math.max(t.dirty.length,r.length);for(let o=0;o<l;o+=1)n[o]=t.dirty[o]|r[o];return n}return t.dirty|r}return t.dirty}function Ke(e,t,i,s,r,n){if(r){const l=Rl(t,i,s,n);e.p(l,r)}}function Ge(e){if(e.ctx.length>32){const t=[],i=e.ctx.length/32;for(let s=0;s<i;s++)t[s]=-1;return t}return-1}function qf(e){const t={};for(const i in e)t[i]=!0;return t}function Zf(e){return e&&vn(e.destroy)?e.destroy:Ie}function ce(e,t){e.appendChild(t)}function J(e,t,i){e.insertBefore(t,i||null)}function G(e){e.parentNode&&e.parentNode.removeChild(e)}function Kf(e,t){for(let i=0;i<e.length;i+=1)e[i]&&e[i].d(t)}function re(e){return document.createElement(e)}function ri(e){return document.createElementNS("http://www.w3.org/2000/svg",e)}function bt(e){return document.createTextNode(e)}function fe(){return bt(" ")}function Xe(){return bt("")}function Ce(e,t,i,s){return e.addEventListener(t,i,s),()=>e.removeEventListener(t,i,s)}function di(e){return function(t){return t.preventDefault(),e.call(this,t)}}function Wt(e){return function(t){return t.stopPropagation(),e.call(this,t)}}function I(e,t,i){i==null?e.removeAttribute(t):e.getAttribute(t)!==i&&e.setAttribute(t,i)}const Gf=["width","height"];function Jf(e,t){const i=Object.getOwnPropertyDescriptors(e.__proto__);for(const s in t)t[s]==null?e.removeAttribute(s):s==="style"?e.style.cssText=t[s]:s==="__value"?e.value=e[s]=t[s]:i[s]&&i[s].set&&Gf.indexOf(s)===-1?e[s]=t[s]:I(e,s,t[s])}function $f(e,t){Object.keys(t).forEach(i=>{Hs(e,i,t[i])})}function Hs(e,t,i){const s=t.toLowerCase();s in e?e[s]=typeof e[s]=="boolean"&&i===""?!0:i:t in e?e[t]=typeof e[t]=="boolean"&&i===""?!0:i:I(e,t,i)}function fo(e){return/-/.test(e)?$f:Jf}function Mi(e,t,i){e.setAttributeNS("http://www.w3.org/1999/xlink",t,i)}function $r(e){return e===""?null:+e}function Xf(e){return Array.from(e.childNodes)}function It(e,t){t=""+t,e.data!==t&&(e.data=t)}function lt(e,t){e.value=t??""}function wt(e,t,i,s){i==null?e.style.removeProperty(t):e.style.setProperty(t,i,s?"important":"")}function _o(e,t,i){for(let s=0;s<e.options.length;s+=1){const r=e.options[s];if(r.__value===t){r.selected=!0;return}}(!i||t!==void 0)&&(e.selectedIndex=-1)}function Qf(e){const t=e.querySelector(":checked");return t&&t.__value}function z(e,t,i){e.classList.toggle(t,!!i)}function ed(e,t,{bubbles:i=!1,cancelable:s=!1}={}){return new CustomEvent(e,{detail:t,bubbles:i,cancelable:s})}class Zi{constructor(t=!1){ne(this,"is_svg",!1);ne(this,"e");ne(this,"n");ne(this,"t");ne(this,"a");this.is_svg=t,this.e=this.n=null}c(t){this.h(t)}m(t,i,s=null){this.e||(this.is_svg?this.e=ri(i.nodeName):this.e=re(i.nodeType===11?"TEMPLATE":i.nodeName),this.t=i.tagName!=="TEMPLATE"?i:i.content,this.c(t)),this.i(s)}h(t){this.e.innerHTML=t,this.n=Array.from(this.e.nodeName==="TEMPLATE"?this.e.content.childNodes:this.e.childNodes)}i(t){for(let i=0;i<this.n.length;i+=1)J(this.t,this.n[i],t)}p(t){this.d(),this.h(t),this.i(this.a)}d(){this.n.forEach(G)}}let cs;function ns(e){cs=e}function sr(){if(!cs)throw new Error("Function called outside component initialization");return cs}function td(e){sr().$$.on_mount.push(e)}function bn(e){sr().$$.on_destroy.push(e)}function ai(){const e=sr();return(t,i,{cancelable:s=!1}={})=>{const r=e.$$.callbacks[t];if(r){const n=ed(t,i,{cancelable:s});return r.slice().forEach(l=>{l.call(e,n)}),!n.defaultPrevented}return!0}}function id(e){return sr().$$.context.get(e)}function Re(e,t){const i=e.$$.callbacks[t.type];i&&i.slice().forEach(s=>s.call(this,t))}const xi=[],Nt=[];let Ni=[];const po=[],sd=Promise.resolve();let Xr=!1;function rd(){Xr||(Xr=!0,sd.then(Ol))}function Us(e){Ni.push(e)}const Lr=new Set;let Ri=0;function Ol(){if(Ri!==0)return;const e=cs;do{try{for(;Ri<xi.length;){const t=xi[Ri];Ri++,ns(t),nd(t.$$)}}catch(t){throw xi.length=0,Ri=0,t}for(ns(null),xi.length=0,Ri=0;Nt.length;)Nt.pop()();for(let t=0;t<Ni.length;t+=1){const i=Ni[t];Lr.has(i)||(Lr.add(i),i())}Ni.length=0}while(xi.length);for(;po.length;)po.pop()();Xr=!1,Lr.clear(),ns(e)}function nd(e){if(e.fragment!==null){e.update(),rt(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(Us)}}function od(e){const t=[],i=[];Ni.forEach(s=>e.indexOf(s)===-1?t.push(s):i.push(s)),i.forEach(s=>s()),Ni=t}const xs=new Set;let ki;function Je(){ki={r:0,c:[],p:ki}}function $e(){ki.r||rt(ki.c),ki=ki.p}function j(e,t){e&&e.i&&(xs.delete(e),e.i(t))}function W(e,t,i,s){if(e&&e.o){if(xs.has(e))return;xs.add(e),ki.c.push(()=>{xs.delete(e),s&&(i&&e.d(1),s())}),e.o(t)}else s&&s()}function ct(e){return(e==null?void 0:e.length)!==void 0?e:Array.from(e)}function ad(e,t){e.d(1),t.delete(e.key)}function Ti(e,t){W(e,1,1,()=>{t.delete(e.key)})}function yi(e,t,i,s,r,n,l,o,a,h,u,f){let _=e.length,v=n.length,b=_;const g={};for(;b--;)g[e[b].key]=b;const c=[],d=new Map,m=new Map,p=[];for(b=v;b--;){const k=f(r,n,b),w=i(k);let C=l.get(w);C?s&&p.push(()=>C.p(k,t)):(C=h(w,k),C.c()),d.set(w,c[b]=C),w in g&&m.set(w,Math.abs(b-g[w]))}const y=new Set,S=new Set;function E(k){j(k,1),k.m(o,u),l.set(k.key,k),u=k.first,v--}for(;_&&v;){const k=c[v-1],w=e[_-1],C=k.key,L=w.key;k===w?(u=k.first,_--,v--):d.has(L)?!l.has(C)||y.has(C)?E(k):S.has(L)?_--:m.get(C)>m.get(L)?(S.add(C),E(k)):(y.add(L),_--):(a(w,l),_--)}for(;_--;){const k=e[_];d.has(k.key)||a(k,l)}for(;v;)E(c[v-1]);return rt(p),c}function wi(e,t){const i={},s={},r={$$scope:1};let n=e.length;for(;n--;){const l=e[n],o=t[n];if(o){for(const a in l)a in o||(s[a]=1);for(const a in o)r[a]||(i[a]=o[a],r[a]=1);e[n]=o}else for(const a in l)r[a]=1}for(const l in s)l in i||(i[l]=void 0);return i}function Di(e){return typeof e=="object"&&e!==null?e:{}}function ie(e){e&&e.c()}function ee(e,t,i){const{fragment:s,after_update:r}=e.$$;s&&s.m(t,i),Us(()=>{const n=e.$$.on_mount.map(Al).filter(vn);e.$$.on_destroy?e.$$.on_destroy.push(...n):rt(n),e.$$.on_mount=[]}),r.forEach(Us)}function te(e,t){const i=e.$$;i.fragment!==null&&(od(i.after_update),rt(i.on_destroy),i.fragment&&i.fragment.d(t),i.on_destroy=i.fragment=null,i.ctx=[])}function ld(e,t){e.$$.dirty[0]===-1&&(xi.push(e),rd(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function Ne(e,t,i,s,r,n,l=null,o=[-1]){const a=cs;ns(e);const h=e.$$={fragment:null,ctx:[],props:n,update:Ie,not_equal:r,bound:uo(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(a?a.$$.context:[])),callbacks:uo(),dirty:o,skip_bound:!1,root:t.target||a.$$.root};l&&l(h.root);let u=!1;if(h.ctx=i?i(e,t.props||{},(f,_,...v)=>{const b=v.length?v[0]:_;return h.ctx&&r(h.ctx[f],h.ctx[f]=b)&&(!h.skip_bound&&h.bound[f]&&h.bound[f](b),u&&ld(e,f)),_}):[],h.update(),u=!0,rt(h.before_update),h.fragment=s?s(h.ctx):!1,t.target){if(t.hydrate){const f=Xf(t.target);h.fragment&&h.fragment.l(f),f.forEach(G)}else h.fragment&&h.fragment.c();t.intro&&j(e.$$.fragment),ee(e,t.target,t.anchor),Ol()}ns(a)}class Ve{constructor(){ne(this,"$$");ne(this,"$$set")}$destroy(){te(this,1),this.$destroy=Ie}$on(t,i){if(!vn(i))return Ie;const s=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return s.push(i),()=>{const r=s.indexOf(i);r!==-1&&s.splice(r,1)}}$set(t){this.$$set&&!zf(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const cd="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(cd);const hd=e=>({}),mo=e=>({});function ud(e){let t;const i=e[16].icon,s=qe(i,e,e[15],mo),r=s||dd();return{c(){r&&r.c()},m(n,l){r&&r.m(n,l),t=!0},p(n,l){s&&s.p&&(!t||l&32768)&&Ke(s,i,n,n[15],t?Ze(i,n[15],l,hd):Ge(n[15]),mo)},i(n){t||(j(r,n),t=!0)},o(n){W(r,n),t=!1},d(n){r&&r.d(n)}}}function fd(e){let t,i;return{c(){t=ri("svg"),i=ri("use"),Mi(i,"xlink:href",e[1]),I(t,"class","b3-menu__icon")},m(s,r){J(s,t,r),ce(t,i)},p(s,r){r&2&&Mi(i,"xlink:href",s[1])},i:Ie,o:Ie,d(s){s&&G(t)}}}function dd(e){let t,i;return{c(){t=ri("svg"),i=ri("use"),Mi(i,"xlink:href","#"),I(t,"class","b3-menu__icon")},m(s,r){J(s,t,r),ce(t,i)},p:Ie,d(s){s&&G(t)}}}function _d(e){let t,i,s,r,n,l,o;return{c(){t=re("div"),i=fe(),s=re("input"),r=fe(),n=re("div"),I(t,"class","fn__hr--small"),s.disabled=e[4],I(s,"placeholder",e[3]),I(s,"class","b3-text-field fn__size200"),I(n,"class","fn__hr--small")},m(a,h){J(a,t,h),J(a,i,h),J(a,s,h),e[17](s),lt(s,e[0]),J(a,r,h),J(a,n,h),l||(o=[Ce(s,"input",e[18]),Ce(s,"change",e[12])],l=!0)},p(a,h){h&16&&(s.disabled=a[4]),h&8&&I(s,"placeholder",a[3]),h&1&&s.value!==a[0]&&lt(s,a[0])},d(a){a&&(G(t),G(i),G(s),G(r),G(n)),e[17](null),l=!1,rt(o)}}}function pd(e){let t;return{c(){t=bt(e[3])},m(i,s){J(i,t,s)},p(i,s){s&8&&It(t,i[3])},d(i){i&&G(t)}}}function go(e){let t,i,s;return{c(){t=re("input"),I(t,"type","file"),I(t,"accept",e[8]),t.disabled=e[4],t.multiple=e[9],I(t,"class","file-input svelte-14whws2")},m(r,n){J(r,t,n),e[19](t),i||(s=[Ce(t,"change",e[20]),Ce(t,"change",e[13])],i=!0)},p(r,n){n&256&&I(t,"accept",r[8]),n&16&&(t.disabled=r[4]),n&512&&(t.multiple=r[9])},d(r){r&&G(t),e[19](null),i=!1,rt(s)}}}function vo(e){let t,i;return{c(){t=re("span"),i=bt(e[6]),I(t,"class","b3-menu__accelerator")},m(s,r){J(s,t,r),ce(t,i)},p(s,r){r&64&&It(i,s[6])},d(s){s&&G(t)}}}function md(e){let t,i,s,r,n,l,o,a;const h=[fd,ud],u=[];function f(d,m){return d[1]?0:1}t=f(e),i=u[t]=h[t](e);function _(d,m){return!d[5]||d[7]?pd:_d}let v=_(e),b=v(e),g=e[7]&&go(e),c=e[6]&&vo(e);return{c(){i.c(),s=fe(),r=re("span"),b.c(),n=fe(),g&&g.c(),l=fe(),c&&c.c(),o=Xe(),I(r,"class","b3-menu__label"),wt(r,"font",e[2]),wt(r,"position",e[7]?"relative":"initial")},m(d,m){u[t].m(d,m),J(d,s,m),J(d,r,m),b.m(r,null),ce(r,n),g&&g.m(r,null),J(d,l,m),c&&c.m(d,m),J(d,o,m),a=!0},p(d,[m]){let p=t;t=f(d),t===p?u[t].p(d,m):(Je(),W(u[p],1,1,()=>{u[p]=null}),$e(),i=u[t],i?i.p(d,m):(i=u[t]=h[t](d),i.c()),j(i,1),i.m(s.parentNode,s)),v===(v=_(d))&&b?b.p(d,m):(b.d(1),b=v(d),b&&(b.c(),b.m(r,n))),d[7]?g?g.p(d,m):(g=go(d),g.c(),g.m(r,null)):g&&(g.d(1),g=null),m&4&&wt(r,"font",d[2]),m&128&&wt(r,"position",d[7]?"relative":"initial"),d[6]?c?c.p(d,m):(c=vo(d),c.c(),c.m(o.parentNode,o)):c&&(c.d(1),c=null)},i(d){a||(j(i),a=!0)},o(d){W(i),a=!1},d(d){d&&(G(s),G(r),G(l),G(o)),u[t].d(d),b.d(),g&&g.d(),c&&c.d(d)}}}function gd(e,t,i){let{$$slots:s={},$$scope:r}=t,{icon:n=""}=t,{font:l=""}=t,{label:o=""}=t,{disabled:a=!1}=t,{input:h=!1}=t,{value:u=""}=t,{accelerator:f=""}=t,{file:_=!1}=t,{accept:v=""}=t,{multiple:b=!0}=t,{webkitdirectory:g=!0}=t,c=null,d;function m(L){d&&i(11,d.webkitdirectory=L,d)}td(()=>{m(g)});const p=ai();function y(L){p("changed",{value:u,event:L})}function S(L){p("selected",{files:c,event:L})}function E(L){Nt[L?"unshift":"push"](()=>{d=L,i(11,d)})}function k(){u=this.value,i(0,u)}function w(L){Nt[L?"unshift":"push"](()=>{d=L,i(11,d)})}function C(){c=this.files,i(10,c)}return e.$$set=L=>{"icon"in L&&i(1,n=L.icon),"font"in L&&i(2,l=L.font),"label"in L&&i(3,o=L.label),"disabled"in L&&i(4,a=L.disabled),"input"in L&&i(5,h=L.input),"value"in L&&i(0,u=L.value),"accelerator"in L&&i(6,f=L.accelerator),"file"in L&&i(7,_=L.file),"accept"in L&&i(8,v=L.accept),"multiple"in L&&i(9,b=L.multiple),"webkitdirectory"in L&&i(14,g=L.webkitdirectory),"$$scope"in L&&i(15,r=L.$$scope)},e.$$.update=()=>{e.$$.dirty&16384&&m(g)},[u,n,l,o,a,h,f,_,v,b,c,d,y,S,g,r,s,E,k,w,C]}let bo=class extends Ve{constructor(t){super(),Ne(this,t,gd,md,Pe,{icon:1,font:2,label:3,disabled:4,input:5,value:0,accelerator:6,file:7,accept:8,multiple:9,webkitdirectory:14})}};const Oi=[];function ke(e,t=Ie){let i;const s=new Set;function r(o){if(Pe(e,o)&&(e=o,i)){const a=!Oi.length;for(const h of s)h[1](),Oi.push(h,e);if(a){for(let h=0;h<Oi.length;h+=2)Oi[h][0](Oi[h+1]);Oi.length=0}}}function n(o){r(o(e))}function l(o,a=Ie){const h=[o,a];return s.add(h),s.size===1&&(i=t(r,n)||Ie),o(e),()=>{s.delete(h),s.size===0&&i&&(i(),i=null)}}return{set:r,update:n,subscribe:l}}const zi={id:/^\d{14}-[0-9a-z]{7}$/,url:/^siyuan:\/\/blocks\/(\d{14}-[0-9a-z]{7})/,snippet:/^\d{14}-[0-9a-z]{7}$/,created:/^\d{10}$/,history:/[\/\\]history[\/\\]\d{4}-\d{2}-\d{2}-\d{6}-(clean|update|delete|format|sync|replace)([\/\\]\d{14}-[0-9a-z]{7})+\.sy$/,snapshot:/^[0-9a-f]{40}$/,shorthand:/^\d{13}$/};function vd(e){let t,i;return{c(){t=ri("svg"),i=ri("use"),Mi(i,"xlink:href",e[0]),I(t,"style",e[3]),I(t,"data-id",e[1]),I(t,"class",e[2]),z(t,"popover__block",zi.id.test(e[1]))},m(s,r){J(s,t,r),ce(t,i)},p(s,[r]){r&1&&Mi(i,"xlink:href",s[0]),r&8&&I(t,"style",s[3]),r&2&&I(t,"data-id",s[1]),r&4&&I(t,"class",s[2]),r&6&&z(t,"popover__block",zi.id.test(s[1]))},i:Ie,o:Ie,d(s){s&&G(t)}}}function bd(e,t,i){let{icon:s}=t,{id:r=""}=t,{className:n=""}=t,{style:l=""}=t;return e.$$set=o=>{"icon"in o&&i(0,s=o.icon),"id"in o&&i(1,r=o.id),"className"in o&&i(2,n=o.className),"style"in o&&i(3,l=o.style)},[s,r,n,l]}class kt extends Ve{constructor(t){super(),Ne(this,t,bd,vd,Pe,{icon:0,id:1,className:2,style:3})}}const yd=e=>({}),yo=e=>({});function wo(e){let t,i;return t=new kt({props:{id:e[1],icon:e[2]}}),{c(){ie(t.$$.fragment)},m(s,r){ee(t,s,r),i=!0},p(s,r){const n={};r&2&&(n.id=s[1]),r&4&&(n.icon=s[2]),t.$set(n)},i(s){i||(j(t.$$.fragment,s),i=!0)},o(s){W(t.$$.fragment,s),i=!1},d(s){te(t,s)}}}function wd(e){let t,i,s=e[2]&&wo(e);return{c(){s&&s.c(),t=Xe()},m(r,n){s&&s.m(r,n),J(r,t,n),i=!0},p(r,n){r[2]?s?(s.p(r,n),n&4&&j(s,1)):(s=wo(r),s.c(),j(s,1),s.m(t.parentNode,t)):s&&(Je(),W(s,1,1,()=>{s=null}),$e())},i(r){i||(j(s),i=!0)},o(r){W(s),i=!1},d(r){r&&G(t),s&&s.d(r)}}}function Sd(e){let t,i,s,r,n;const l=e[8].svg,o=qe(l,e,e[7],yo),a=o||wd(e);return{c(){t=re("span"),a&&a.c(),i=fe(),s=re("span"),r=bt(e[3]),I(s,"title",e[4]),I(s,"class","protyle-breadcrumb__text"),z(s,"protyle-breadcrumb__text--ellipsis",e[5]),I(t,"data-node-id",e[0]),I(t,"class","protyle-breadcrumb__item"),z(t,"protyle-breadcrumb__item--active",e[6])},m(h,u){J(h,t,u),a&&a.m(t,null),ce(t,i),ce(t,s),ce(s,r),n=!0},p(h,[u]){o?o.p&&(!n||u&128)&&Ke(o,l,h,h[7],n?Ze(l,h[7],u,yd):Ge(h[7]),yo):a&&a.p&&(!n||u&6)&&a.p(h,n?u:-1),(!n||u&8)&&It(r,h[3]),(!n||u&16)&&I(s,"title",h[4]),(!n||u&32)&&z(s,"protyle-breadcrumb__text--ellipsis",h[5]),(!n||u&1)&&I(t,"data-node-id",h[0]),(!n||u&64)&&z(t,"protyle-breadcrumb__item--active",h[6])},i(h){n||(j(a,h),n=!0)},o(h){W(a,h),n=!1},d(h){h&&G(t),a&&a.d(h)}}}function Cd(e,t,i){let{$$slots:s={},$$scope:r}=t,{itemId:n=""}=t,{iconId:l=""}=t,{icon:o=""}=t,{text:a=""}=t,{textTitle:h=""}=t,{textEllipsis:u=!0}=t,{active:f=!1}=t;return e.$$set=_=>{"itemId"in _&&i(0,n=_.itemId),"iconId"in _&&i(1,l=_.iconId),"icon"in _&&i(2,o=_.icon),"text"in _&&i(3,a=_.text),"textTitle"in _&&i(4,h=_.textTitle),"textEllipsis"in _&&i(5,u=_.textEllipsis),"active"in _&&i(6,f=_.active),"$$scope"in _&&i(7,r=_.$$scope)},[n,l,o,a,h,u,f,r,s]}let kd=class extends Ve{constructor(t){super(),Ne(this,t,Cd,Sd,Pe,{itemId:0,iconId:1,icon:2,text:3,textTitle:4,textEllipsis:5,active:6})}};function So(e,t,i){const s=e.slice();return s[3]=t[i],s[5]=i,s}function Ed(e){let t,i;return t=new kt({props:{className:"protyle-breadcrumb__arrow",icon:e[3].icon||"#iconRight"}}),{c(){ie(t.$$.fragment)},m(s,r){ee(t,s,r),i=!0},p(s,r){const n={};r&1&&(n.icon=s[3].icon||"#iconRight"),t.$set(n)},i(s){i||(j(t.$$.fragment,s),i=!0)},o(s){W(t.$$.fragment,s),i=!1},d(s){te(t,s)}}}function Ld(e){let t,i;const s=[e[3]];let r={};for(let n=0;n<s.length;n+=1)r=oi(r,s[n]);return t=new kd({props:r}),{c(){ie(t.$$.fragment)},m(n,l){ee(t,n,l),i=!0},p(n,l){const o=l&1?wi(s,[Di(n[3])]):{};t.$set(o)},i(n){i||(j(t.$$.fragment,n),i=!0)},o(n){W(t.$$.fragment,n),i=!1},d(n){te(t,n)}}}function Co(e,t){let i,s,r,n,l;const o=[Ld,Ed],a=[];function h(u,f){return u[3].type==="item"?0:u[3].type==="arrow"?1:-1}return~(s=h(t))&&(r=a[s]=o[s](t)),{key:e,first:null,c(){i=Xe(),r&&r.c(),n=Xe(),this.first=i},m(u,f){J(u,i,f),~s&&a[s].m(u,f),J(u,n,f),l=!0},p(u,f){t=u;let _=s;s=h(t),s===_?~s&&a[s].p(t,f):(r&&(Je(),W(a[_],1,1,()=>{a[_]=null}),$e()),~s?(r=a[s],r?r.p(t,f):(r=a[s]=o[s](t),r.c()),j(r,1),r.m(n.parentNode,n)):r=null)},i(u){l||(j(r),l=!0)},o(u){W(r),l=!1},d(u){u&&(G(i),G(n)),~s&&a[s].d(u)}}}function Md(e){let t=[],i=new Map,s,r,n=ct(e[0]);const l=o=>o[5];for(let o=0;o<n.length;o+=1){let a=So(e,n,o),h=l(a);i.set(h,t[o]=Co(h,a))}return{c(){for(let o=0;o<t.length;o+=1)t[o].c();s=Xe()},m(o,a){for(let h=0;h<t.length;h+=1)t[h]&&t[h].m(o,a);J(o,s,a),r=!0},p(o,a){a&1&&(n=ct(o[0]),Je(),t=yi(t,a,l,1,o,n,i,s.parentNode,Ti,Co,s,So),$e())},i(o){if(!r){for(let a=0;a<n.length;a+=1)j(t[a]);r=!0}},o(o){for(let a=0;a<t.length;a+=1)W(t[a]);r=!1},d(o){o&&G(s);for(let a=0;a<t.length;a+=1)t[a].d(o)}}}function Td(e){let t,i;const s=e[2].default,r=qe(s,e,e[1],null),n=r||Md(e);return{c(){t=re("div"),n&&n.c(),I(t,"class","protyle-breadcrumb__bar protyle-breadcrumb__bar--nowrap")},m(l,o){J(l,t,o),n&&n.m(t,null),i=!0},p(l,[o]){r?r.p&&(!i||o&2)&&Ke(r,s,l,l[1],i?Ze(s,l[1],o,null):Ge(l[1]),null):n&&n.p&&(!i||o&1)&&n.p(l,i?o:-1)},i(l){i||(j(n,l),i=!0)},o(l){W(n,l),i=!1},d(l){l&&G(t),n&&n.d(l)}}}function Dd(e,t,i){let{$$slots:s={},$$scope:r}=t,{items:n=[]}=t;return e.$$set=l=>{"items"in l&&i(0,n=l.items),"$$scope"in l&&i(1,r=l.$$scope)},[n,r,s]}let Ad=class extends Ve{constructor(t){super(),Ne(this,t,Dd,Td,Pe,{items:0})}};var xt=(e=>(e.none="",e.n="b3-tooltips__n",e.ne="b3-tooltips__ne",e.e="b3-tooltips__e",e.se="b3-tooltips__se",e.s="b3-tooltips__s",e.sw="b3-tooltips__sw",e.w="b3-tooltips__w",e.nw="b3-tooltips__nw",e))(xt||{});function Mr(e){let t,i,s,r,n,l;i=new kt({props:{icon:e[0]}});let o=[{role:"button"},{"data-type":e[5]},{"aria-label":e[6]},{class:s="block__icon fn__flex-center "+e[7]}],a={};for(let h=0;h<o.length;h+=1)a=oi(a,o[h]);return{c(){t=re(e[8]),ie(i.$$.fragment),fo(e[8])(t,a),z(t,"fn__none",e[2]),z(t,"block__icon--show",e[1]),z(t,"toolbar__item--active",e[3]),z(t,"toolbar__item--disabled",e[4]),z(t,"b3-tooltips",e[7]!==xt.none)},m(h,u){J(h,t,u),ee(i,t,null),e[14](t),r=!0,n||(l=[Ce(t,"click",e[12]),Ce(t,"dblclick",e[13]),Ce(t,"click",e[15])],n=!0)},p(h,u){const f={};u&1&&(f.icon=h[0]),i.$set(f),fo(h[8])(t,a=wi(o,[{role:"button"},(!r||u&32)&&{"data-type":h[5]},(!r||u&64)&&{"aria-label":h[6]},(!r||u&128&&s!==(s="block__icon fn__flex-center "+h[7]))&&{class:s}])),z(t,"fn__none",h[2]),z(t,"block__icon--show",h[1]),z(t,"toolbar__item--active",h[3]),z(t,"toolbar__item--disabled",h[4]),z(t,"b3-tooltips",h[7]!==xt.none)},i(h){r||(j(i.$$.fragment,h),r=!0)},o(h){W(i.$$.fragment,h),r=!1},d(h){h&&G(t),te(i),e[14](null),n=!1,rt(l)}}}function Rd(e){let t=e[8],i,s=e[8]&&Mr(e);return{c(){s&&s.c(),i=Xe()},m(r,n){s&&s.m(r,n),J(r,i,n)},p(r,[n]){r[8]?t?Pe(t,r[8])?(s.d(1),s=Mr(r),t=r[8],s.c(),s.m(i.parentNode,i)):s.p(r,n):(s=Mr(r),t=r[8],s.c(),s.m(i.parentNode,i)):t&&(s.d(1),s=null,t=r[8])},i:Ie,o(r){W(s,r)},d(r){r&&G(i),s&&s.d(r)}}}function Od(e,t,i){let{icon:s="#iconHelp"}=t,{tag:r="button"}=t,{show:n=!0}=t,{none:l=!1}=t,{active:o=!1}=t,{disabled:a=!1}=t,{type:h=""}=t,{ariaLabel:u=""}=t,{tooltipsDirection:f=xt.none}=t,{onClick:_=()=>null}=t,v;const b={icon:ke(s),show:ke(n),none:ke(l),active:ke(o),disabled:ke(a),type:ke(h),ariaLabel:ke(u),tooltipsDirection:ke(f)},g=[b.icon.subscribe(y=>i(0,s=y)),b.show.subscribe(y=>i(1,n=y)),b.none.subscribe(y=>i(2,l=y)),b.active.subscribe(y=>i(3,o=y)),b.disabled.subscribe(y=>i(4,a=y)),b.type.subscribe(y=>i(5,h=y)),b.ariaLabel.subscribe(y=>i(6,u=y)),b.tooltipsDirection.subscribe(y=>i(7,f=y))];bn(()=>{g.forEach(y=>y())});function c(y){Re.call(this,e,y)}function d(y){Re.call(this,e,y)}function m(y){Nt[y?"unshift":"push"](()=>{v=y,i(10,v)})}const p=y=>_(y,v,b);return e.$$set=y=>{"icon"in y&&i(0,s=y.icon),"tag"in y&&i(8,r=y.tag),"show"in y&&i(1,n=y.show),"none"in y&&i(2,l=y.none),"active"in y&&i(3,o=y.active),"disabled"in y&&i(4,a=y.disabled),"type"in y&&i(5,h=y.type),"ariaLabel"in y&&i(6,u=y.ariaLabel),"tooltipsDirection"in y&&i(7,f=y.tooltipsDirection),"onClick"in y&&i(9,_=y.onClick)},e.$$.update=()=>{e.$$.dirty&1&&b.icon.set(s),e.$$.dirty&2&&b.show.set(n),e.$$.dirty&4&&b.none.set(l),e.$$.dirty&8&&b.active.set(o),e.$$.dirty&16&&b.disabled.set(a),e.$$.dirty&32&&b.type.set(h),e.$$.dirty&64&&b.ariaLabel.set(u),e.$$.dirty&128&&b.tooltipsDirection.set(f)},[s,n,l,o,a,h,u,f,r,_,v,b,c,d,m,p]}class Bl extends Ve{constructor(t){super(),Ne(this,t,Od,Rd,Pe,{icon:0,tag:8,show:1,none:2,active:3,disabled:4,type:5,ariaLabel:6,tooltipsDirection:7,onClick:9})}}function ko(e,t,i){const s=e.slice();return s[4]=t[i],s[6]=i,s}const Bd=e=>({}),Eo=e=>({}),Hd=e=>({}),Lo=e=>({});function xd(e){let t,i;return t=new Ad({props:{items:e[0]}}),{c(){ie(t.$$.fragment)},m(s,r){ee(t,s,r),i=!0},p(s,r){const n={};r&1&&(n.items=s[0]),t.$set(n)},i(s){i||(j(t.$$.fragment,s),i=!0)},o(s){W(t.$$.fragment,s),i=!1},d(s){te(t,s)}}}function Pd(e){let t;return{c(){t=re("span"),I(t,"class","fn__space")},m(i,s){J(i,t,s)},d(i){i&&G(t)}}}function Id(e){let t;return{c(){t=re("span"),I(t,"class","protyle-breadcrumb__space")},m(i,s){J(i,t,s)},d(i){i&&G(t)}}}function Mo(e,t){let i,s,r,n;function l(f,_){return f[6]===0?Id:Pd}let o=l(t),a=o(t);const h=[t[4]];let u={};for(let f=0;f<h.length;f+=1)u=oi(u,h[f]);return r=new Bl({props:u}),{key:e,first:null,c(){i=Xe(),a.c(),s=fe(),ie(r.$$.fragment),this.first=i},m(f,_){J(f,i,_),a.m(f,_),J(f,s,_),ee(r,f,_),n=!0},p(f,_){t=f,o!==(o=l(t))&&(a.d(1),a=o(t),a&&(a.c(),a.m(s.parentNode,s)));const v=_&2?wi(h,[Di(t[4])]):{};r.$set(v)},i(f){n||(j(r.$$.fragment,f),n=!0)},o(f){W(r.$$.fragment,f),n=!1},d(f){f&&(G(i),G(s)),a.d(f),te(r,f)}}}function Nd(e){let t=[],i=new Map,s,r,n=ct(e[1]);const l=o=>o[6];for(let o=0;o<n.length;o+=1){let a=ko(e,n,o),h=l(a);i.set(h,t[o]=Mo(h,a))}return{c(){for(let o=0;o<t.length;o+=1)t[o].c();s=Xe()},m(o,a){for(let h=0;h<t.length;h+=1)t[h]&&t[h].m(o,a);J(o,s,a),r=!0},p(o,a){a&2&&(n=ct(o[1]),Je(),t=yi(t,a,l,1,o,n,i,s.parentNode,Ti,Mo,s,ko),$e())},i(o){if(!r){for(let a=0;a<n.length;a+=1)j(t[a]);r=!0}},o(o){for(let a=0;a<t.length;a+=1)W(t[a]);r=!1},d(o){o&&G(s);for(let a=0;a<t.length;a+=1)t[a].d(o)}}}function Vd(e){let t,i,s;const r=e[3].bar,n=qe(r,e,e[2],Lo),l=n||xd(e),o=e[3].icons,a=qe(o,e,e[2],Eo),h=a||Nd(e);return{c(){t=re("div"),l&&l.c(),i=fe(),h&&h.c(),I(t,"class","protyle-breadcrumb")},m(u,f){J(u,t,f),l&&l.m(t,null),ce(t,i),h&&h.m(t,null),s=!0},p(u,[f]){n?n.p&&(!s||f&4)&&Ke(n,r,u,u[2],s?Ze(r,u[2],f,Hd):Ge(u[2]),Lo):l&&l.p&&(!s||f&1)&&l.p(u,s?f:-1),a?a.p&&(!s||f&4)&&Ke(a,o,u,u[2],s?Ze(o,u[2],f,Bd):Ge(u[2]),Eo):h&&h.p&&(!s||f&2)&&h.p(u,s?f:-1)},i(u){s||(j(l,u),j(h,u),s=!0)},o(u){W(l,u),W(h,u),s=!1},d(u){u&&G(t),l&&l.d(u),h&&h.d(u)}}}function jd(e,t,i){let{$$slots:s={},$$scope:r}=t,{items:n=[]}=t,{icons:l=[]}=t;return e.$$set=o=>{"items"in o&&i(0,n=o.items),"icons"in o&&i(1,l=o.icons),"$$scope"in o&&i(2,r=o.$$scope)},[n,l,r,s]}class Fd extends Ve{constructor(t){super(),Ne(this,t,jd,Vd,Pe,{items:0,icons:1})}}const Ud=e=>({}),To=e=>({}),Wd=e=>({}),Do=e=>({});function Ao(e){let t,i;return t=new Fd({props:{items:e[2],icons:e[3]}}),{c(){ie(t.$$.fragment)},m(s,r){ee(t,s,r),i=!0},p(s,r){const n={};r&4&&(n.items=s[2]),r&8&&(n.icons=s[3]),t.$set(n)},i(s){i||(j(t.$$.fragment,s),i=!0)},o(s){W(t.$$.fragment,s),i=!1},d(s){te(t,s)}}}function zd(e){let t,i,s=e[1]&&Ao(e);return{c(){s&&s.c(),t=Xe()},m(r,n){s&&s.m(r,n),J(r,t,n),i=!0},p(r,n){r[1]?s?(s.p(r,n),n&2&&j(s,1)):(s=Ao(r),s.c(),j(s,1),s.m(t.parentNode,t)):s&&(Je(),W(s,1,1,()=>{s=null}),$e())},i(r){i||(j(s),i=!0)},o(r){W(s),i=!1},d(r){r&&G(t),s&&s.d(r)}}}function Yd(e){let t,i,s,r;const n=e[5].breadcrumb,l=qe(n,e,e[4],Do),o=l||zd(e),a=e[5].content,h=qe(a,e,e[4],To);return{c(){t=re("div"),o&&o.c(),i=fe(),s=re("div"),h&&h.c(),I(s,"class","protyle-preview"),I(t,"class","fn__flex-column"),z(t,"fullscreen",e[0])},m(u,f){J(u,t,f),o&&o.m(t,null),ce(t,i),ce(t,s),h&&h.m(s,null),r=!0},p(u,[f]){l?l.p&&(!r||f&16)&&Ke(l,n,u,u[4],r?Ze(n,u[4],f,Wd):Ge(u[4]),Do):o&&o.p&&(!r||f&14)&&o.p(u,r?f:-1),h&&h.p&&(!r||f&16)&&Ke(h,a,u,u[4],r?Ze(a,u[4],f,Ud):Ge(u[4]),To),(!r||f&1)&&z(t,"fullscreen",u[0])},i(u){r||(j(o,u),j(h,u),r=!0)},o(u){W(o,u),W(h,u),r=!1},d(u){u&&G(t),o&&o.d(u),h&&h.d(u)}}}function qd(e,t,i){let{$$slots:s={},$$scope:r}=t,{fullscreen:n=!1}=t,{breadcrumb:l=!0}=t,{breadcrumbItems:o=[]}=t,{breadcrumbIcons:a=[]}=t;return e.$$set=h=>{"fullscreen"in h&&i(0,n=h.fullscreen),"breadcrumb"in h&&i(1,l=h.breadcrumb),"breadcrumbItems"in h&&i(2,o=h.breadcrumbItems),"breadcrumbIcons"in h&&i(3,a=h.breadcrumbIcons),"$$scope"in h&&i(4,r=h.$$scope)},[n,l,o,a,r,s]}let Zd=class extends Ve{constructor(t){super(),Ne(this,t,qd,Yd,Pe,{fullscreen:0,breadcrumb:1,breadcrumbItems:2,breadcrumbIcons:3})}};function Kd(e){let t,i,s,r;return{c(){t=re("iframe"),Fs(t.src,i=e[0])||I(t,"src",i),I(t,"title",e[1]),I(t,"allow",e[2]),I(t,"csp",e[3]),I(t,"importance",e[4]),I(t,"name",e[5]),I(t,"referrerpolicy",e[6]),I(t,"sandbox",e[7]),I(t,"srcdoc",e[8]),I(t,"class","fn__flex fn__flex-1 iframe svelte-2g72x8")},m(n,l){J(n,t,l),e[11](t),s||(r=Zf(e[10].call(null,t)),s=!0)},p(n,[l]){l&1&&!Fs(t.src,i=n[0])&&I(t,"src",i),l&2&&I(t,"title",n[1]),l&4&&I(t,"allow",n[2]),l&8&&I(t,"csp",n[3]),l&16&&I(t,"importance",n[4]),l&32&&I(t,"name",n[5]),l&64&&I(t,"referrerpolicy",n[6]),l&128&&I(t,"sandbox",n[7]),l&256&&I(t,"srcdoc",n[8])},i:Ie,o:Ie,d(n){n&&G(t),e[11](null),s=!1,r()}}}function Gd(e,t,i){let{src:s=void 0}=t,{title:r=void 0}=t;const n=ai();let l,{allow:o=void 0}=t,{csp:a=void 0}=t,{importance:h=void 0}=t,{name:u=void 0}=t,{referrerpolicy:f=void 0}=t,{sandbox:_=void 0}=t,{srcdoc:v=void 0}=t;const b=c=>(n("create",{iframe:c}),{update(d){n("update",{iframe:l})},destroy(){n("destroy")}});function g(c){Nt[c?"unshift":"push"](()=>{l=c,i(9,l)})}return e.$$set=c=>{"src"in c&&i(0,s=c.src),"title"in c&&i(1,r=c.title),"allow"in c&&i(2,o=c.allow),"csp"in c&&i(3,a=c.csp),"importance"in c&&i(4,h=c.importance),"name"in c&&i(5,u=c.name),"referrerpolicy"in c&&i(6,f=c.referrerpolicy),"sandbox"in c&&i(7,_=c.sandbox),"srcdoc"in c&&i(8,v=c.srcdoc)},[s,r,o,a,h,u,f,_,v,l,b,g]}class Jd extends Ve{constructor(t){super(),Ne(this,t,Gd,Kd,Pe,{src:0,title:1,allow:2,csp:3,importance:4,name:5,referrerpolicy:6,sandbox:7,srcdoc:8})}}function $d(e){const t=globalThis.document.createElement("a");return t.href=e,new URL(t.href)}var Xd=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function yn(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Qd=function(){var e=document.getSelection();if(!e.rangeCount)return function(){};for(var t=document.activeElement,i=[],s=0;s<e.rangeCount;s++)i.push(e.getRangeAt(s));switch(t.tagName.toUpperCase()){case"INPUT":case"TEXTAREA":t.blur();break;default:t=null;break}return e.removeAllRanges(),function(){e.type==="Caret"&&e.removeAllRanges(),e.rangeCount||i.forEach(function(r){e.addRange(r)}),t&&t.focus()}},e1=Qd,Ro={"text/plain":"Text","text/html":"Url",default:"Text"},t1="Copy to clipboard: #{key}, Enter";function i1(e){var t=(/mac os x/i.test(navigator.userAgent)?"⌘":"Ctrl")+"+C";return e.replace(/#{\s*key\s*}/g,t)}function s1(e,t){var i,s,r,n,l,o,a=!1;t||(t={}),i=t.debug||!1;try{r=e1(),n=document.createRange(),l=document.getSelection(),o=document.createElement("span"),o.textContent=e,o.ariaHidden="true",o.style.all="unset",o.style.position="fixed",o.style.top=0,o.style.clip="rect(0, 0, 0, 0)",o.style.whiteSpace="pre",o.style.webkitUserSelect="text",o.style.MozUserSelect="text",o.style.msUserSelect="text",o.style.userSelect="text",o.addEventListener("copy",function(u){if(u.stopPropagation(),t.format)if(u.preventDefault(),typeof u.clipboardData>"u"){i&&console.warn("unable to use e.clipboardData"),i&&console.warn("trying IE specific stuff"),window.clipboardData.clearData();var f=Ro[t.format]||Ro.default;window.clipboardData.setData(f,e)}else u.clipboardData.clearData(),u.clipboardData.setData(t.format,e);t.onCopy&&(u.preventDefault(),t.onCopy(u.clipboardData))}),document.body.appendChild(o),n.selectNodeContents(o),l.addRange(n);var h=document.execCommand("copy");if(!h)throw new Error("copy command was unsuccessful");a=!0}catch(u){i&&console.error("unable to copy using execCommand: ",u),i&&console.warn("trying IE specific stuff");try{window.clipboardData.setData(t.format||"text",e),t.onCopy&&t.onCopy(window.clipboardData),a=!0}catch(f){i&&console.error("unable to copy using clipboardData: ",f),i&&console.error("falling back to prompt"),s=i1("message"in t?t.message:t1),window.prompt(s,e)}}finally{l&&(typeof l.removeRange=="function"?l.removeRange(n):l.removeAllRanges()),o&&document.body.removeChild(o),r()}return a}var r1=s1;const Oo=yn(r1);async function Hl(e){if(globalThis.isSecureContext&&globalThis.navigator.clipboard)try{return globalThis.navigator.clipboard.writeText(e)}catch{return Oo(e)}else return Oo(e)}function n1(e){return String.fromCodePoint(parseInt(e,16))}const o1=new Map([["stage","iconFolder"],["assets","iconImage"],["assets","iconImage"],["emojies","iconEmoji"],["plugins","iconPlugin"],["public","iconCloud"],["snippets","iconCode"],["templates","iconMarkdown"],["widgets","iconBoth"],["appearance","iconTheme"],["export","iconUpload"],["history","iconHistory"]]);function a1(e){return o1.get(e)??"iconHelp"}function l1(e){let t,i;return t=new Jd({props:{src:e[0],title:e[1],slot:"content"}}),t.$on("create",e[5]),t.$on("destroy",e[6]),{c(){ie(t.$$.fragment)},m(s,r){ee(t,s,r),i=!0},p(s,r){const n={};r&1&&(n.src=s[0]),r&2&&(n.title=s[1]),t.$set(n)},i(s){i||(j(t.$$.fragment,s),i=!0)},o(s){W(t.$$.fragment,s),i=!1},d(s){te(t,s)}}}function c1(e){let t,i;return t=new Zd({props:{fullscreen:e[2],breadcrumb:h1,breadcrumbItems:e[3],breadcrumbIcons:e[4],$$slots:{content:[l1]},$$scope:{ctx:e}}}),{c(){ie(t.$$.fragment)},m(s,r){ee(t,s,r),i=!0},p(s,[r]){const n={};r&4&&(n.fullscreen=s[2]),r&8&&(n.breadcrumbItems=s[3]),r&1027&&(n.$$scope={dirty:r,ctx:s}),t.$set(n)},i(s){i||(j(t.$$.fragment,s),i=!0)},o(s){W(t.$$.fragment,s),i=!1},d(s){te(t,s)}}}let h1=!0;function u1(e,t,i){var v,b,g,c,d,m,p,y;let s,{src:r}=t,{title:n}=t,l,o=!1,a=[],h=[{icon:"#iconCopy",type:"copy",ariaLabel:(b=(v=globalThis.siyuan)==null?void 0:v.languages)==null?void 0:b.copy,tooltipsDirection:xt.sw,onClick(S,E,k){Hl(s.href)}},{icon:"#iconRefresh",type:"refresh",ariaLabel:(c=(g=globalThis.siyuan)==null?void 0:g.languages)==null?void 0:c.refresh,tooltipsDirection:xt.sw,onClick(S,E,k){var w,C;(C=(w=l==null?void 0:l.contentWindow)==null?void 0:w.location)!=null&&C.reload?l.contentWindow.location.reload():i(0,r)}},{icon:"#iconOpenWindow",type:"open",ariaLabel:(m=(d=globalThis.siyuan)==null?void 0:d.languages)==null?void 0:m.useBrowserView,tooltipsDirection:xt.sw,onClick(S,E,k){globalThis.open(r)}},{icon:"#iconFullscreen",type:"fullscreen",ariaLabel:(y=(p=globalThis.siyuan)==null?void 0:p.languages)==null?void 0:y.fullscreen,tooltipsDirection:xt.sw,onClick(S,E,k){var C;const w=(k.active&&pi(k.active))??o;i(2,o=!w),(C=k.active)==null||C.set(o)}}];function u(S){const E=[],k=[],w=S.origin===location.origin;E.push(`${S.protocol}//`),k.push({type:"item",get icon(){switch(S.protocol){case"https:":case"ftps:":return"#iconLock";case"http:":case"ftp:":return"#iconUnlock";default:return"#iconHelp"}},text:`${S.protocol}//`,textTitle:E.join(""),textEllipsis:!1},{type:"arrow"}),E.push(S.host),k.push({type:"item",get icon(){return w?"#iconSiYuan":"#iconLanguage"},text:S.host,textTitle:E.join(""),textEllipsis:!1,active:!0}),S.pathname.split("/").forEach((C,L)=>{C&&(E.push(`/${C}`),k.push({type:"arrow",icon:"#icon-keepass-slash"},{type:"item",icon:L===1&&w?`#${a1(C)}`:void 0,text:C,textTitle:E.join(""),textEllipsis:!1}))}),S.search&&(E.push(S.search),k.push({type:"arrow"},{type:"item",text:S.search,textTitle:E.join(""),textEllipsis:!1,active:!1})),S.hash&&(E.push(S.hash),k.push({type:"arrow"},{type:"item",text:S.hash,textTitle:E.join(""),textEllipsis:!1,active:!1})),i(3,a=k)}function f(S){l=S.detail.iframe}function _(S){l=void 0}return e.$$set=S=>{"src"in S&&i(0,r=S.src),"title"in S&&i(1,n=S.title)},e.$$.update=()=>{e.$$.dirty&1&&i(7,s=$d(r)),e.$$.dirty&128&&u(s)},[r,n,o,a,h,f,_,s]}class f1 extends Ve{constructor(t){super(),Ne(this,t,u1,c1,Pe,{src:0,title:1})}}const d1=e=>({focus:e&1}),Bo=e=>({focus:e[0]});function Ho(e,t,i){const s=e.slice();return s[13]=t[i],s}function xo(e){let t,i,s,r,n,l,o;return i=new kt({props:{icon:"#iconSearch",className:"b3-form__icon-icon"}}),{c(){t=re("div"),ie(i.$$.fragment),s=fe(),r=re("input"),I(r,"placeholder",e[4]),I(r,"class","b3-text-field fn__block b3-form__icon-input"),I(t,"class","b3-form__icon")},m(a,h){J(a,t,h),ee(i,t,null),ce(t,s),ce(t,r),lt(r,e[1]),n=!0,l||(o=[Ce(r,"input",e[9]),Ce(r,"change",e[5])],l=!0)},p(a,h){(!n||h&16)&&I(r,"placeholder",a[4]),h&2&&r.value!==a[1]&&lt(r,a[1])},i(a){n||(j(i.$$.fragment,a),n=!0)},o(a){W(i.$$.fragment,a),n=!1},d(a){a&&G(t),te(i),l=!1,rt(o)}}}function Po(e,t){let i,s,r,n,l=t[13].text+"",o,a,h,u,f;s=new kt({props:{icon:t[13].icon,className:"b3-list-item__graphic"}});function _(){return t[10](t[13])}function v(){return t[11](t[13])}return{key:e,first:null,c(){i=re("li"),ie(s.$$.fragment),r=fe(),n=re("span"),o=fe(),I(n,"class","b3-list-item__text svelte-15drd7h"),I(i,"role","button"),I(i,"data-name",a=t[13].name),I(i,"class","b3-list-item"),z(i,"b3-list-item--focus",t[13].key===t[0]),this.first=i},m(b,g){J(b,i,g),ee(s,i,null),ce(i,r),ce(i,n),n.innerHTML=l,ce(i,o),h=!0,u||(f=[Ce(i,"click",_),Ce(i,"keyup",v)],u=!0)},p(b,g){t=b;const c={};g&4&&(c.icon=t[13].icon),s.$set(c),(!h||g&4)&&l!==(l=t[13].text+"")&&(n.innerHTML=l),(!h||g&4&&a!==(a=t[13].name))&&I(i,"data-name",a),(!h||g&5)&&z(i,"b3-list-item--focus",t[13].key===t[0])},i(b){h||(j(s.$$.fragment,b),h=!0)},o(b){W(s.$$.fragment,b),h=!1},d(b){b&&G(i),te(s),u=!1,rt(f)}}}function _1(e){let t;return{c(){t=bt("Container")},m(i,s){J(i,t,s)},d(i){i&&G(t)}}}function p1(e){let t,i,s,r=[],n=new Map,l,o,a,h=e[3]&&xo(e),u=ct(e[2]);const f=g=>g[13].key;for(let g=0;g<u.length;g+=1){let c=Ho(e,u,g),d=f(c);n.set(d,r[g]=Po(d,c))}const _=e[8].default,v=qe(_,e,e[7],Bo),b=v||_1();return{c(){t=re("div"),i=re("ul"),h&&h.c(),s=fe();for(let g=0;g<r.length;g+=1)r[g].c();l=fe(),o=re("div"),b&&b.c(),I(i,"class","b3-tab-bar b3-list b3-list--background"),I(o,"class","config__tab-wrap"),I(t,"class","fn__flex-1 fn__flex config__panel")},m(g,c){J(g,t,c),ce(t,i),h&&h.m(i,null),ce(i,s);for(let d=0;d<r.length;d+=1)r[d]&&r[d].m(i,null);ce(t,l),ce(t,o),b&&b.m(o,null),a=!0},p(g,[c]){g[3]?h?(h.p(g,c),c&8&&j(h,1)):(h=xo(g),h.c(),j(h,1),h.m(i,s)):h&&(Je(),W(h,1,1,()=>{h=null}),$e()),c&69&&(u=ct(g[2]),Je(),r=yi(r,c,f,1,g,u,n,i,Ti,Po,null,Ho),$e()),v&&v.p&&(!a||c&129)&&Ke(v,_,g,g[7],a?Ze(_,g[7],c,d1):Ge(g[7]),Bo)},i(g){if(!a){j(h);for(let c=0;c<u.length;c+=1)j(r[c]);j(b,g),a=!0}},o(g){W(h);for(let c=0;c<r.length;c+=1)W(r[c]);W(b,g),a=!1},d(g){g&&G(t),h&&h.d();for(let c=0;c<r.length;c+=1)r[c].d();b&&b.d(g)}}}function m1(e,t,i){let{$$slots:s={},$$scope:r}=t,{panels:n}=t,{focus:l}=t,{searchEnable:o=!1}=t,{searchPlaceholder:a=""}=t,{searchValue:h=""}=t;const u=ai();function f(){u("search-changed",{value:h})}function _(c){u("changed",{key:c}),i(0,l=c)}function v(){h=this.value,i(1,h)}const b=c=>_(c.key),g=c=>_(c.key);return e.$$set=c=>{"panels"in c&&i(2,n=c.panels),"focus"in c&&i(0,l=c.focus),"searchEnable"in c&&i(3,o=c.searchEnable),"searchPlaceholder"in c&&i(4,a=c.searchPlaceholder),"searchValue"in c&&i(1,h=c.searchValue),"$$scope"in c&&i(7,r=c.$$scope)},[l,h,n,o,a,f,_,r,s,v,b,g]}class g1 extends Ve{constructor(t){super(),Ne(this,t,m1,p1,Pe,{panels:2,focus:0,searchEnable:3,searchPlaceholder:4,searchValue:1})}}function v1(e){let t,i;const s=e[4].default,r=qe(s,e,e[3],null);return{c(){t=re("div"),r&&r.c(),I(t,"data-name",e[2]),I(t,"class","config__tab-container"),z(t,"fn__none",!e[0]),z(t,"config__tab-container--top",e[1])},m(n,l){J(n,t,l),r&&r.m(t,null),i=!0},p(n,[l]){r&&r.p&&(!i||l&8)&&Ke(r,s,n,n[3],i?Ze(s,n[3],l,null):Ge(n[3]),null),(!i||l&4)&&I(t,"data-name",n[2]),(!i||l&1)&&z(t,"fn__none",!n[0]),(!i||l&2)&&z(t,"config__tab-container--top",n[1])},i(n){i||(j(r,n),i=!0)},o(n){W(r,n),i=!1},d(n){n&&G(t),r&&r.d(n)}}}function b1(e,t,i){let{$$slots:s={},$$scope:r}=t,{display:n=!0}=t,{top:l=!1}=t,{name:o=""}=t;return e.$$set=a=>{"display"in a&&i(0,n=a.display),"top"in a&&i(1,l=a.top),"name"in a&&i(2,o=a.name),"$$scope"in a&&i(3,r=a.$$scope)},[n,l,o,r,s]}class Ps extends Ve{constructor(t){super(),Ne(this,t,b1,v1,Pe,{display:0,top:1,name:2})}}const y1=e=>({}),Io=e=>({}),w1=e=>({}),No=e=>({});function Vo(e){let t,i;const s=e[7].icon,r=qe(s,e,e[6],No);return{c(){t=re("span"),r&&r.c(),I(t,"class","item__icon")},m(n,l){J(n,t,l),r&&r.m(t,null),i=!0},p(n,l){r&&r.p&&(!i||l&64)&&Ke(r,s,n,n[6],i?Ze(s,n[6],l,w1):Ge(n[6]),No)},i(n){i||(j(r,n),i=!0)},o(n){W(r,n),i=!1},d(n){n&&G(t),r&&r.d(n)}}}function S1(e){let t;return{c(){t=bt("text")},m(i,s){J(i,t,s)},d(i){i&&G(t)}}}function C1(e){let t,i,s,r,n,l,o,a,h,u,f=e[0]&&e[4].icon&&Vo(e);const _=e[7].text,v=qe(_,e,e[6],Io),b=v||S1();return{c(){t=re("div"),i=re("span"),s=fe(),f&&f.c(),r=fe(),n=re("span"),b&&b.c(),l=fe(),o=re("span"),I(i,"class","fn__flex-1"),I(n,"class","item__text"),I(o,"class","fn__flex-1"),I(t,"role","button"),I(t,"data-type",e[1]),I(t,"class","item item--full"),z(t,"item--focus",e[2])},m(g,c){J(g,t,c),ce(t,i),ce(t,s),f&&f.m(t,null),ce(t,r),ce(t,n),b&&b.m(n,null),ce(t,l),ce(t,o),a=!0,h||(u=Ce(t,"click",e[3]),h=!0)},p(g,[c]){g[0]&&g[4].icon?f?(f.p(g,c),c&17&&j(f,1)):(f=Vo(g),f.c(),j(f,1),f.m(t,r)):f&&(Je(),W(f,1,1,()=>{f=null}),$e()),v&&v.p&&(!a||c&64)&&Ke(v,_,g,g[6],a?Ze(_,g[6],c,y1):Ge(g[6]),Io),(!a||c&2)&&I(t,"data-type",g[1]),(!a||c&4)&&z(t,"item--focus",g[2])},i(g){a||(j(f),j(b,g),a=!0)},o(g){W(f),W(b,g),a=!1},d(g){g&&G(t),f&&f.d(),b&&b.d(g),h=!1,u()}}}function k1(e,t,i){let{$$slots:s={},$$scope:r}=t;const n=qf(s);let{key:l}=t,{icon:o}=t,{name:a=""}=t,{focus:h=!1}=t;const u=ai();function f(){h||u("changed",{key:l})}return e.$$set=_=>{"key"in _&&i(5,l=_.key),"icon"in _&&i(0,o=_.icon),"name"in _&&i(1,a=_.name),"focus"in _&&i(2,h=_.focus),"$$scope"in _&&i(6,r=_.$$scope)},[o,a,h,f,n,l,r,s]}class E1 extends Ve{constructor(t){super(),Ne(this,t,k1,C1,Pe,{key:5,icon:0,name:1,focus:2})}}const L1=e=>({focus:e&1}),jo=e=>({focus:e[0]});function Fo(e,t,i){const s=e.slice();return s[5]=t[i],s}function M1(e){let t,i=e[5].icon+"",s;return{c(){t=new Zi(!1),s=Xe(),t.a=s},m(r,n){t.m(i,r,n),J(r,s,n)},p(r,n){n&2&&i!==(i=r[5].icon+"")&&t.p(i)},i:Ie,o:Ie,d(r){r&&(G(s),t.d())}}}function T1(e){let t,i;return t=new kt({props:{icon:e[5].icon}}),{c(){ie(t.$$.fragment)},m(s,r){ee(t,s,r),i=!0},p(s,r){const n={};r&2&&(n.icon=s[5].icon),t.$set(n)},i(s){i||(j(t.$$.fragment,s),i=!0)},o(s){W(t.$$.fragment,s),i=!1},d(s){te(t,s)}}}function D1(e){let t,i,s,r,n,l;const o=[T1,M1],a=[];function h(u,f){var _;return f&2&&(i=null),i==null&&(i=!!((_=u[5].icon)!=null&&_.startsWith("#"))),i?0:u[5].icon?1:-1}return~(s=h(e,-1))&&(r=a[s]=o[s](e)),{c(){t=re("span"),r&&r.c(),n=fe(),I(t,"slot","icon")},m(u,f){J(u,t,f),~s&&a[s].m(t,null),ce(t,n),l=!0},p(u,f){let _=s;s=h(u,f),s===_?~s&&a[s].p(u,f):(r&&(Je(),W(a[_],1,1,()=>{a[_]=null}),$e()),~s?(r=a[s],r?r.p(u,f):(r=a[s]=o[s](u),r.c()),j(r,1),r.m(t,n)):r=null)},i(u){l||(j(r),l=!0)},o(u){W(r),l=!1},d(u){u&&G(t),~s&&a[s].d()}}}function A1(e){let t,i,s=e[5].text+"",r;return{c(){t=re("span"),i=new Zi(!1),r=fe(),i.a=r,I(t,"slot","text")},m(n,l){J(n,t,l),i.m(s,t),ce(t,r)},p(n,l){l&2&&s!==(s=n[5].text+"")&&i.p(s)},d(n){n&&G(t)}}}function Uo(e,t){let i,s,r;return s=new E1({props:{key:t[5].key,icon:!!t[5].icon,name:t[5].name,focus:t[5].key===t[0],$$slots:{text:[A1],icon:[D1]},$$scope:{ctx:t}}}),s.$on("changed",t[2]),{key:e,first:null,c(){i=Xe(),ie(s.$$.fragment),this.first=i},m(n,l){J(n,i,l),ee(s,n,l),r=!0},p(n,l){t=n;const o={};l&2&&(o.key=t[5].key),l&2&&(o.icon=!!t[5].icon),l&2&&(o.name=t[5].name),l&3&&(o.focus=t[5].key===t[0]),l&18&&(o.$$scope={dirty:l,ctx:t}),s.$set(o)},i(n){r||(j(s.$$.fragment,n),r=!0)},o(n){W(s.$$.fragment,n),r=!1},d(n){n&&G(i),te(s,n)}}}function R1(e){let t;return{c(){t=bt("Container")},m(i,s){J(i,t,s)},d(i){i&&G(t)}}}function O1(e){let t,i,s=[],r=new Map,n,l,o,a=ct(e[1]);const h=v=>v[5].key;for(let v=0;v<a.length;v+=1){let b=Fo(e,a,v),g=h(b);r.set(g,s[v]=Uo(g,b))}const u=e[3].default,f=qe(u,e,e[4],jo),_=f||R1();return{c(){t=re("div"),i=re("div");for(let v=0;v<s.length;v+=1)s[v].c();n=fe(),l=re("div"),_&&_.c(),I(i,"class","layout-tab-bar fn__flex"),I(l,"class","fn__flex-1"),I(t,"class","fn__flex-column"),wt(t,"height","100%")},m(v,b){J(v,t,b),ce(t,i);for(let g=0;g<s.length;g+=1)s[g]&&s[g].m(i,null);ce(t,n),ce(t,l),_&&_.m(l,null),o=!0},p(v,[b]){b&7&&(a=ct(v[1]),Je(),s=yi(s,b,h,1,v,a,r,i,Ti,Uo,null,Fo),$e()),f&&f.p&&(!o||b&17)&&Ke(f,u,v,v[4],o?Ze(u,v[4],b,L1):Ge(v[4]),jo)},i(v){if(!o){for(let b=0;b<a.length;b+=1)j(s[b]);j(_,v),o=!0}},o(v){for(let b=0;b<s.length;b+=1)W(s[b]);W(_,v),o=!1},d(v){v&&G(t);for(let b=0;b<s.length;b+=1)s[b].d();_&&_.d(v)}}}function B1(e,t,i){let{$$slots:s={},$$scope:r}=t,{tabs:n}=t,{focus:l}=t;function o(a){i(0,l=a.detail.key)}return e.$$set=a=>{"tabs"in a&&i(1,n=a.tabs),"focus"in a&&i(0,l=a.focus),"$$scope"in a&&i(4,r=a.$$scope)},[l,n,o,s,r]}class H1 extends Ve{constructor(t){super(),Ne(this,t,B1,O1,Pe,{tabs:1,focus:0})}}const x1=e=>({}),Wo=e=>({}),P1=e=>({}),zo=e=>({}),I1=e=>({}),Yo=e=>({}),N1=e=>({}),qo=e=>({});function V1(e){let t,i;return{c(){t=new Zi(!1),i=Xe(),t.a=i},m(s,r){t.m(e[0],s,r),J(s,i,r)},p(s,r){r&1&&t.p(s[0])},d(s){s&&(G(i),t.d())}}}function j1(e){let t,i;return{c(){t=new Zi(!1),i=Xe(),t.a=i},m(s,r){t.m(e[1],s,r),J(s,i,r)},p(s,r){r&2&&t.p(s[1])},d(s){s&&(G(i),t.d())}}}function Zo(e){let t,i,s;const r=e[4].input,n=qe(r,e,e[3],zo);return{c(){t=re("div"),i=fe(),n&&n.c(),I(t,"class","fn__hr")},m(l,o){J(l,t,o),J(l,i,o),n&&n.m(l,o),s=!0},p(l,o){n&&n.p&&(!s||o&8)&&Ke(n,r,l,l[3],s?Ze(r,l[3],o,P1):Ge(l[3]),zo)},i(l){s||(j(n,l),s=!0)},o(l){W(n,l),s=!1},d(l){l&&(G(t),G(i)),n&&n.d(l)}}}function Ko(e){let t,i,s;const r=e[4].input,n=qe(r,e,e[3],Wo);return{c(){t=re("span"),i=fe(),n&&n.c(),I(t,"class","fn__space")},m(l,o){J(l,t,o),J(l,i,o),n&&n.m(l,o),s=!0},p(l,o){n&&n.p&&(!s||o&8)&&Ke(n,r,l,l[3],s?Ze(r,l[3],o,x1):Ge(l[3]),Wo)},i(l){s||(j(n,l),s=!0)},o(l){W(n,l),s=!1},d(l){l&&(G(t),G(i)),n&&n.d(l)}}}function F1(e){let t,i,s,r,n,l,o;const a=e[4].title,h=qe(a,e,e[3],qo),u=h||V1(e),f=e[4].text,_=qe(f,e,e[3],Yo),v=_||j1(e);let b=e[2]&&Zo(e),g=!e[2]&&Ko(e);return{c(){t=re("label"),i=re("div"),u&&u.c(),s=fe(),r=re("div"),v&&v.c(),n=fe(),b&&b.c(),l=fe(),g&&g.c(),I(r,"class","b3-label__text"),I(i,"class","fn__flex-1 svelte-2m76cy"),z(i,"visible",e[2]),I(t,"class","fn__flex b3-label")},m(c,d){J(c,t,d),ce(t,i),u&&u.m(i,null),ce(i,s),ce(i,r),v&&v.m(r,null),ce(i,n),b&&b.m(i,null),ce(t,l),g&&g.m(t,null),o=!0},p(c,[d]){h?h.p&&(!o||d&8)&&Ke(h,a,c,c[3],o?Ze(a,c[3],d,N1):Ge(c[3]),qo):u&&u.p&&(!o||d&1)&&u.p(c,o?d:-1),_?_.p&&(!o||d&8)&&Ke(_,f,c,c[3],o?Ze(f,c[3],d,I1):Ge(c[3]),Yo):v&&v.p&&(!o||d&2)&&v.p(c,o?d:-1),c[2]?b?(b.p(c,d),d&4&&j(b,1)):(b=Zo(c),b.c(),j(b,1),b.m(i,null)):b&&(Je(),W(b,1,1,()=>{b=null}),$e()),(!o||d&4)&&z(i,"visible",c[2]),c[2]?g&&(Je(),W(g,1,1,()=>{g=null}),$e()):g?(g.p(c,d),d&4&&j(g,1)):(g=Ko(c),g.c(),j(g,1),g.m(t,null))},i(c){o||(j(u,c),j(v,c),j(b),j(g),o=!0)},o(c){W(u,c),W(v,c),W(b),W(g),o=!1},d(c){c&&G(t),u&&u.d(c),v&&v.d(c),b&&b.d(),g&&g.d()}}}function U1(e,t,i){let{$$slots:s={},$$scope:r}=t,{title:n=""}=t,{text:l=""}=t,{block:o=!1}=t;return e.$$set=a=>{"title"in a&&i(0,n=a.title),"text"in a&&i(1,l=a.text),"block"in a&&i(2,o=a.block),"$$scope"in a&&i(3,r=a.$$scope)},[n,l,o,r,s]}class Ye extends Ve{constructor(t){super(),Ne(this,t,U1,F1,Pe,{title:0,text:1,block:2})}}var xe=(e=>(e[e.checkbox=0]="checkbox",e[e.text=1]="text",e[e.number=2]="number",e[e.slider=3]="slider",e[e.button=4]="button",e[e.select=5]="select",e[e.textarea=6]="textarea",e))(xe||{});function Go(e,t,i){const s=e.slice();return s[20]=t[i],s}function W1(e){let t,i,s;return{c(){t=re("textarea"),t.disabled=e[2],I(t,"class","b3-text-field"),I(t,"placeholder",e[5]),z(t,"fn__block",e[3]),z(t,"fn__size200",!e[3]&&e[4]),wt(t,"height",e[8]>0?`${e[8]}px`:void 0),wt(t,"font-family",e[9]?e[9]:void 0)},m(r,n){J(r,t,n),lt(t,e[0]),i||(s=[Ce(t,"input",e[18]),Ce(t,"change",e[11])],i=!0)},p(r,n){n&4&&(t.disabled=r[2]),n&32&&I(t,"placeholder",r[5]),n&65&&lt(t,r[0]),n&8&&z(t,"fn__block",r[3]),n&24&&z(t,"fn__size200",!r[3]&&r[4]),n&256&&wt(t,"height",r[8]>0?`${r[8]}px`:void 0),n&512&&wt(t,"font-family",r[9]?r[9]:void 0)},d(r){r&&G(t),i=!1,rt(s)}}}function z1(e){let t,i=[],s=new Map,r,n,l=ct(e[6]);const o=a=>a[20].key;for(let a=0;a<l.length;a+=1){let h=Go(e,l,a),u=o(h);s.set(u,i[a]=Jo(u,h))}return{c(){t=re("select");for(let a=0;a<i.length;a+=1)i[a].c();t.disabled=e[2],I(t,"class","b3-select"),e[0]===void 0&&Us(()=>e[17].call(t)),z(t,"fn__block",e[3]),z(t,"fn__size200",!e[3]&&e[4]),z(t,"fn__flex-center",!e[3])},m(a,h){J(a,t,h);for(let u=0;u<i.length;u+=1)i[u]&&i[u].m(t,null);_o(t,e[0],!0),r||(n=[Ce(t,"change",e[17]),Ce(t,"change",e[11])],r=!0)},p(a,h){h&64&&(l=ct(a[6]),i=yi(i,h,o,1,a,l,s,t,ad,Jo,null,Go)),h&4&&(t.disabled=a[2]),h&65&&_o(t,a[0]),h&8&&z(t,"fn__block",a[3]),h&24&&z(t,"fn__size200",!a[3]&&a[4]),h&8&&z(t,"fn__flex-center",!a[3])},d(a){a&&G(t);for(let h=0;h<i.length;h+=1)i[h].d();r=!1,rt(n)}}}function Y1(e){let t,i,s,r;return{c(){t=re("button"),i=bt(e[0]),t.disabled=e[2],I(t,"class","b3-button b3-button--outline"),z(t,"fn__block",e[3]),z(t,"fn__size200",!e[3]&&e[4]),z(t,"fn__flex-center",!e[3])},m(n,l){J(n,t,l),ce(t,i),s||(r=Ce(t,"click",e[10]),s=!0)},p(n,l){l&1&&It(i,n[0]),l&4&&(t.disabled=n[2]),l&8&&z(t,"fn__block",n[3]),l&24&&z(t,"fn__size200",!n[3]&&n[4]),l&8&&z(t,"fn__flex-center",!n[3])},d(n){n&&G(t),s=!1,r()}}}function q1(e){let t,i,s,r,n,l;return{c(){t=re("input"),t.disabled=e[2],I(t,"class","b3-slider svelte-edt8og"),I(t,"type","range"),I(t,"min",i=e[7].min),I(t,"max",s=e[7].max),I(t,"step",r=e[7].step),z(t,"fn__block",e[3]),z(t,"fn__size200",!e[3]&&e[4])},m(o,a){J(o,t,a),lt(t,e[0]),n||(l=[Ce(t,"change",e[16]),Ce(t,"input",e[16]),Ce(t,"change",e[11])],n=!0)},p(o,a){a&4&&(t.disabled=o[2]),a&128&&i!==(i=o[7].min)&&I(t,"min",i),a&128&&s!==(s=o[7].max)&&I(t,"max",s),a&128&&r!==(r=o[7].step)&&I(t,"step",r),a&65&&lt(t,o[0]),a&8&&z(t,"fn__block",o[3]),a&24&&z(t,"fn__size200",!o[3]&&o[4])},d(o){o&&G(t),n=!1,rt(l)}}}function Z1(e){let t,i,s,r,n,l;return{c(){t=re("input"),t.disabled=e[2],I(t,"class","b3-text-field"),I(t,"type","number"),I(t,"placeholder",e[5]),I(t,"min",i=e[7].min),I(t,"max",s=e[7].max),I(t,"step",r=e[7].step),z(t,"fn__block",e[3]),z(t,"fn__size200",!e[3]&&e[4]),z(t,"fn__flex-center",!e[3])},m(o,a){J(o,t,a),lt(t,e[0]),n||(l=[Ce(t,"input",e[15]),Ce(t,"change",e[11])],n=!0)},p(o,a){a&4&&(t.disabled=o[2]),a&32&&I(t,"placeholder",o[5]),a&128&&i!==(i=o[7].min)&&I(t,"min",i),a&128&&s!==(s=o[7].max)&&I(t,"max",s),a&128&&r!==(r=o[7].step)&&I(t,"step",r),a&65&&$r(t.value)!==o[0]&&lt(t,o[0]),a&8&&z(t,"fn__block",o[3]),a&24&&z(t,"fn__size200",!o[3]&&o[4]),a&8&&z(t,"fn__flex-center",!o[3])},d(o){o&&G(t),n=!1,rt(l)}}}function K1(e){let t,i,s;return{c(){t=re("input"),t.disabled=e[2],I(t,"class","b3-text-field"),I(t,"placeholder",e[5]),z(t,"fn__block",e[3]),z(t,"fn__size200",!e[3]&&e[4]),z(t,"fn__flex-center",!e[3])},m(r,n){J(r,t,n),lt(t,e[0]),i||(s=[Ce(t,"input",e[14]),Ce(t,"change",e[11])],i=!0)},p(r,n){n&4&&(t.disabled=r[2]),n&32&&I(t,"placeholder",r[5]),n&65&&t.value!==r[0]&&lt(t,r[0]),n&8&&z(t,"fn__block",r[3]),n&24&&z(t,"fn__size200",!r[3]&&r[4]),n&8&&z(t,"fn__flex-center",!r[3])},d(r){r&&G(t),i=!1,rt(s)}}}function G1(e){let t,i,s;return{c(){t=re("input"),t.disabled=e[2],I(t,"class","b3-switch svelte-edt8og"),I(t,"type","checkbox"),z(t,"fn__block",e[3]),z(t,"fn__flex-center",!e[3])},m(r,n){J(r,t,n),t.checked=e[0],i||(s=[Ce(t,"change",e[13]),Ce(t,"change",e[11])],i=!0)},p(r,n){n&4&&(t.disabled=r[2]),n&65&&(t.checked=r[0]),n&8&&z(t,"fn__block",r[3]),n&8&&z(t,"fn__flex-center",!r[3])},d(r){r&&G(t),i=!1,rt(s)}}}function Jo(e,t){let i,s=t[20].text+"",r,n;return{key:e,first:null,c(){i=re("option"),r=bt(s),i.__value=n=t[20].key,lt(i,i.__value),this.first=i},m(l,o){J(l,i,o),ce(i,r)},p(l,o){t=l,o&64&&s!==(s=t[20].text+"")&&It(r,s),o&64&&n!==(n=t[20].key)&&(i.__value=n,lt(i,i.__value))},d(l){l&&G(i)}}}function J1(e){let t;function i(n,l){if(n[1]===xe.checkbox)return G1;if(n[1]===xe.text)return K1;if(n[1]===xe.number)return Z1;if(n[1]===xe.slider)return q1;if(n[1]===xe.button)return Y1;if(n[1]===xe.select)return z1;if(n[1]===xe.textarea)return W1}let s=i(e),r=s&&s(e);return{c(){r&&r.c(),t=Xe()},m(n,l){r&&r.m(n,l),J(n,t,l)},p(n,[l]){s===(s=i(n))&&r?r.p(n,l):(r&&r.d(1),r=s&&s(n),r&&(r.c(),r.m(t.parentNode,t)))},i:Ie,o:Ie,d(n){n&&G(t),r&&r.d(n)}}}function $1(e,t,i){let{type:s}=t,{settingKey:r}=t,{settingValue:n}=t,{disabled:l=!1}=t,{block:o=!1}=t,{normal:a=!0}=t,{placeholder:h=""}=t,{options:u=[]}=t,{limits:f={min:0,max:100,step:1}}=t,{height:_=0}=t,{fontFamily:v=""}=t;const b=ai();function g(k){b("clicked",{event:k})}function c(k){b("changed",{key:r,value:n,event:k})}function d(){n=this.checked,i(0,n),i(6,u)}function m(){n=this.value,i(0,n),i(6,u)}function p(){n=$r(this.value),i(0,n),i(6,u)}function y(){n=$r(this.value),i(0,n),i(6,u)}function S(){n=Qf(this),i(0,n),i(6,u)}function E(){n=this.value,i(0,n),i(6,u)}return e.$$set=k=>{"type"in k&&i(1,s=k.type),"settingKey"in k&&i(12,r=k.settingKey),"settingValue"in k&&i(0,n=k.settingValue),"disabled"in k&&i(2,l=k.disabled),"block"in k&&i(3,o=k.block),"normal"in k&&i(4,a=k.normal),"placeholder"in k&&i(5,h=k.placeholder),"options"in k&&i(6,u=k.options),"limits"in k&&i(7,f=k.limits),"height"in k&&i(8,_=k.height),"fontFamily"in k&&i(9,v=k.fontFamily)},[n,s,l,o,a,h,u,f,_,v,g,c,r,d,m,p,y,S,E]}class Qe extends Ve{constructor(t){super(),Ne(this,t,$1,J1,Pe,{type:1,settingKey:12,settingValue:0,disabled:2,block:3,normal:4,placeholder:5,options:6,limits:7,height:8,fontFamily:9})}}const rr={baseUrl:"http://localhost:8888/",appUrl:"/lab",wsUrl:"",token:""};function X1(e){return e=e||rr.baseUrl,`ws${e.slice(4)}`}function Q1(e){let t,i;return t=new Qe({props:{slot:"input",type:xe.button,settingKey:"Reset",settingValue:e[2].settings.generalSettings.reset.text}}),t.$on("clicked",e[4]),{c(){ie(t.$$.fragment)},m(s,r){ee(t,s,r),i=!0},p:Ie,i(s){i||(j(t.$$.fragment,s),i=!0)},o(s){W(t.$$.fragment,s),i=!1},d(s){te(t,s)}}}function e0(e){let t,i;return t=new Ye({props:{title:e[2].settings.generalSettings.reset.title,text:e[2].settings.generalSettings.reset.description,$$slots:{input:[Q1]},$$scope:{ctx:e}}}),{c(){ie(t.$$.fragment)},m(s,r){ee(t,s,r),i=!0},p(s,r){const n={};r&268435456&&(n.$$scope={dirty:r,ctx:s}),t.$set(n)},i(s){i||(j(t.$$.fragment,s),i=!0)},o(s){W(t.$$.fragment,s),i=!1},d(s){te(t,s)}}}function t0(e){let t,i;return t=new Qe({props:{slot:"input",type:xe.checkbox,settingKey:"enable",settingValue:e[0].jupyter.server.enable}}),t.$on("changed",e[8]),{c(){ie(t.$$.fragment)},m(s,r){ee(t,s,r),i=!0},p(s,r){const n={};r&1&&(n.settingValue=s[0].jupyter.server.enable),t.$set(n)},i(s){i||(j(t.$$.fragment,s),i=!0)},o(s){W(t.$$.fragment,s),i=!1},d(s){te(t,s)}}}function i0(e){let t,i;return t=new Qe({props:{slot:"input",type:xe.number,settingKey:"delay",settingValue:e[0].jupyter.edit.delay,limits:{min:0,max:1/0,step:25}}}),t.$on("changed",e[9]),{c(){ie(t.$$.fragment)},m(s,r){ee(t,s,r),i=!0},p(s,r){const n={};r&1&&(n.settingValue=s[0].jupyter.edit.delay),t.$set(n)},i(s){i||(j(t.$$.fragment,s),i=!0)},o(s){W(t.$$.fragment,s),i=!1},d(s){te(t,s)}}}function s0(e){let t,i;return t=new Qe({props:{slot:"input",type:xe.text,settingKey:"baseUrl",settingValue:e[0].jupyter.server.settings.baseUrl,placeholder:rr.baseUrl,block:!0}}),t.$on("changed",e[10]),{c(){ie(t.$$.fragment)},m(s,r){ee(t,s,r),i=!0},p(s,r){const n={};r&1&&(n.settingValue=s[0].jupyter.server.settings.baseUrl),t.$set(n)},i(s){i||(j(t.$$.fragment,s),i=!0)},o(s){W(t.$$.fragment,s),i=!1},d(s){te(t,s)}}}function r0(e){let t,i;return t=new Qe({props:{slot:"input",type:xe.text,settingKey:"appUrl",settingValue:e[0].jupyter.server.settings.appUrl,placeholder:rr.appUrl,block:!0}}),t.$on("changed",e[11]),{c(){ie(t.$$.fragment)},m(s,r){ee(t,s,r),i=!0},p(s,r){const n={};r&1&&(n.settingValue=s[0].jupyter.server.settings.appUrl),t.$set(n)},i(s){i||(j(t.$$.fragment,s),i=!0)},o(s){W(t.$$.fragment,s),i=!1},d(s){te(t,s)}}}function n0(e){let t,i;return t=new Qe({props:{slot:"input",type:xe.text,settingKey:"wsUrl",settingValue:e[0].jupyter.server.settings.wsUrl,placeholder:e[1],block:!0}}),t.$on("changed",e[12]),{c(){ie(t.$$.fragment)},m(s,r){ee(t,s,r),i=!0},p(s,r){const n={};r&1&&(n.settingValue=s[0].jupyter.server.settings.wsUrl),r&2&&(n.placeholder=s[1]),t.$set(n)},i(s){i||(j(t.$$.fragment,s),i=!0)},o(s){W(t.$$.fragment,s),i=!1},d(s){te(t,s)}}}function o0(e){let t,i;return t=new Qe({props:{slot:"input",type:xe.text,settingKey:"token",settingValue:e[0].jupyter.server.settings.token,block:!0}}),t.$on("changed",e[13]),{c(){ie(t.$$.fragment)},m(s,r){ee(t,s,r),i=!0},p(s,r){const n={};r&1&&(n.settingValue=s[0].jupyter.server.settings.token),t.$set(n)},i(s){i||(j(t.$$.fragment,s),i=!0)},o(s){W(t.$$.fragment,s),i=!1},d(s){te(t,s)}}}function a0(e){let t,i;return t=new Qe({props:{slot:"input",type:xe.checkbox,settingKey:"goto",settingValue:e[0].jupyter.execute.goto}}),t.$on("changed",e[14]),{c(){ie(t.$$.fragment)},m(s,r){ee(t,s,r),i=!0},p(s,r){const n={};r&1&&(n.settingValue=s[0].jupyter.execute.goto),t.$set(n)},i(s){i||(j(t.$$.fragment,s),i=!0)},o(s){W(t.$$.fragment,s),i=!1},d(s){te(t,s)}}}function l0(e){let t,i;return t=new Qe({props:{slot:"input",type:xe.checkbox,settingKey:"input.goto",settingValue:e[0].jupyter.execute.input.goto}}),t.$on("changed",e[15]),{c(){ie(t.$$.fragment)},m(s,r){ee(t,s,r),i=!0},p(s,r){const n={};r&1&&(n.settingValue=s[0].jupyter.execute.input.goto),t.$set(n)},i(s){i||(j(t.$$.fragment,s),i=!0)},o(s){W(t.$$.fragment,s),i=!1},d(s){te(t,s)}}}function c0(e){let t,i;return t=new Qe({props:{slot:"input",type:xe.checkbox,settingKey:"content.stop_on_error",settingValue:e[0].jupyter.execute.content.stop_on_error}}),t.$on("changed",e[16]),{c(){ie(t.$$.fragment)},m(s,r){ee(t,s,r),i=!0},p(s,r){const n={};r&1&&(n.settingValue=s[0].jupyter.execute.content.stop_on_error),t.$set(n)},i(s){i||(j(t.$$.fragment,s),i=!0)},o(s){W(t.$$.fragment,s),i=!1},d(s){te(t,s)}}}function h0(e){let t,i;return t=new Qe({props:{slot:"input",type:xe.checkbox,settingKey:"output.parser.xterm",settingValue:e[0].jupyter.execute.output.parser.xterm}}),t.$on("changed",e[17]),{c(){ie(t.$$.fragment)},m(s,r){ee(t,s,r),i=!0},p(s,r){const n={};r&1&&(n.settingValue=s[0].jupyter.execute.output.parser.xterm),t.$set(n)},i(s){i||(j(t.$$.fragment,s),i=!0)},o(s){W(t.$$.fragment,s),i=!1},d(s){te(t,s)}}}function u0(e){let t,i;return t=new Qe({props:{slot:"input",type:xe.checkbox,settingKey:"output.parser.escaped",settingValue:e[0].jupyter.execute.output.parser.escaped}}),t.$on("changed",e[18]),{c(){ie(t.$$.fragment)},m(s,r){ee(t,s,r),i=!0},p(s,r){const n={};r&1&&(n.settingValue=s[0].jupyter.execute.output.parser.escaped),t.$set(n)},i(s){i||(j(t.$$.fragment,s),i=!0)},o(s){W(t.$$.fragment,s),i=!1},d(s){te(t,s)}}}function f0(e){let t,i;return t=new Qe({props:{slot:"input",type:xe.checkbox,settingKey:"output.parser.cntrl",settingValue:e[0].jupyter.execute.output.parser.cntrl}}),t.$on("changed",e[19]),{c(){ie(t.$$.fragment)},m(s,r){ee(t,s,r),i=!0},p(s,r){const n={};r&1&&(n.settingValue=s[0].jupyter.execute.output.parser.cntrl),t.$set(n)},i(s){i||(j(t.$$.fragment,s),i=!0)},o(s){W(t.$$.fragment,s),i=!1},d(s){te(t,s)}}}function d0(e){let t,i;return t=new Qe({props:{slot:"input",type:xe.checkbox,settingKey:"import.parser.xterm",settingValue:e[0].jupyter.import.parser.xterm}}),t.$on("changed",e[20]),{c(){ie(t.$$.fragment)},m(s,r){ee(t,s,r),i=!0},p(s,r){const n={};r&1&&(n.settingValue=s[0].jupyter.import.parser.xterm),t.$set(n)},i(s){i||(j(t.$$.fragment,s),i=!0)},o(s){W(t.$$.fragment,s),i=!1},d(s){te(t,s)}}}function _0(e){let t,i;return t=new Qe({props:{slot:"input",type:xe.checkbox,settingKey:"import.parser.escaped",settingValue:e[0].jupyter.import.parser.escaped}}),t.$on("changed",e[21]),{c(){ie(t.$$.fragment)},m(s,r){ee(t,s,r),i=!0},p(s,r){const n={};r&1&&(n.settingValue=s[0].jupyter.import.parser.escaped),t.$set(n)},i(s){i||(j(t.$$.fragment,s),i=!0)},o(s){W(t.$$.fragment,s),i=!1},d(s){te(t,s)}}}function p0(e){let t,i;return t=new Qe({props:{slot:"input",type:xe.checkbox,settingKey:"import.parser.cntrl",settingValue:e[0].jupyter.import.parser.cntrl}}),t.$on("changed",e[22]),{c(){ie(t.$$.fragment)},m(s,r){ee(t,s,r),i=!0},p(s,r){const n={};r&1&&(n.settingValue=s[0].jupyter.import.parser.cntrl),t.$set(n)},i(s){i||(j(t.$$.fragment,s),i=!0)},o(s){W(t.$$.fragment,s),i=!1},d(s){te(t,s)}}}function m0(e){let t,i,s,r,n,l,o,a,h,u,f,_,v,b,g,c,d,m,p,y,S,E,k,w,C,L,R,O,T,x,F,Y,q,M,B;return i=new Ye({props:{title:e[2].settings.jupyterSettings.globalTab.enable.title,text:e[2].settings.jupyterSettings.globalTab.enable.description,$$slots:{input:[t0]},$$scope:{ctx:e}}}),r=new Ye({props:{title:e[2].settings.jupyterSettings.globalTab.delay.title,text:e[2].settings.jupyterSettings.globalTab.delay.description,$$slots:{input:[i0]},$$scope:{ctx:e}}}),o=new Ye({props:{title:e[2].settings.jupyterSettings.serviceTab.baseUrl.title,text:e[2].settings.jupyterSettings.serviceTab.baseUrl.description,block:!0,$$slots:{input:[s0]},$$scope:{ctx:e}}}),h=new Ye({props:{title:e[2].settings.jupyterSettings.serviceTab.appUrl.title,text:e[2].settings.jupyterSettings.serviceTab.appUrl.description,block:!0,$$slots:{input:[r0]},$$scope:{ctx:e}}}),f=new Ye({props:{title:e[2].settings.jupyterSettings.serviceTab.wsUrl.title,text:e[2].settings.jupyterSettings.serviceTab.wsUrl.description,block:!0,$$slots:{input:[n0]},$$scope:{ctx:e}}}),v=new Ye({props:{title:e[2].settings.jupyterSettings.serviceTab.token.title,text:e[2].settings.jupyterSettings.serviceTab.token.description,block:!0,$$slots:{input:[o0]},$$scope:{ctx:e}}}),c=new Ye({props:{title:e[2].settings.jupyterSettings.executeTab.executeGoto.title,text:e[2].settings.jupyterSettings.executeTab.executeGoto.description,$$slots:{input:[a0]},$$scope:{ctx:e}}}),m=new Ye({props:{title:e[2].settings.jupyterSettings.executeTab.inputGoto.title,text:e[2].settings.jupyterSettings.executeTab.inputGoto.description,$$slots:{input:[l0]},$$scope:{ctx:e}}}),y=new Ye({props:{title:e[2].settings.jupyterSettings.executeTab.stopOnError.title,text:e[2].settings.jupyterSettings.executeTab.stopOnError.description,$$slots:{input:[c0]},$$scope:{ctx:e}}}),k=new Ye({props:{title:e[2].settings.jupyterSettings.outputTab.xterm.title,text:e[2].settings.jupyterSettings.outputTab.xterm.description,$$slots:{input:[h0]},$$scope:{ctx:e}}}),C=new Ye({props:{title:e[2].settings.jupyterSettings.outputTab.escaped.title,text:e[2].settings.jupyterSettings.outputTab.escaped.description,$$slots:{input:[u0]},$$scope:{ctx:e}}}),R=new Ye({props:{title:e[2].settings.jupyterSettings.outputTab.cntrl.title,text:e[2].settings.jupyterSettings.outputTab.cntrl.description,$$slots:{input:[f0]},$$scope:{ctx:e}}}),x=new Ye({props:{title:e[2].settings.jupyterSettings.importTab.xterm.title,text:e[2].settings.jupyterSettings.importTab.xterm.description,$$slots:{input:[d0]},$$scope:{ctx:e}}}),Y=new Ye({props:{title:e[2].settings.jupyterSettings.importTab.escaped.title,text:e[2].settings.jupyterSettings.importTab.escaped.description,$$slots:{input:[_0]},$$scope:{ctx:e}}}),M=new Ye({props:{title:e[2].settings.jupyterSettings.importTab.cntrl.title,text:e[2].settings.jupyterSettings.importTab.cntrl.description,$$slots:{input:[p0]},$$scope:{ctx:e}}}),{c(){t=re("div"),ie(i.$$.fragment),s=fe(),ie(r.$$.fragment),n=fe(),l=re("div"),ie(o.$$.fragment),a=fe(),ie(h.$$.fragment),u=fe(),ie(f.$$.fragment),_=fe(),ie(v.$$.fragment),b=fe(),g=re("div"),ie(c.$$.fragment),d=fe(),ie(m.$$.fragment),p=fe(),ie(y.$$.fragment),S=fe(),E=re("div"),ie(k.$$.fragment),w=fe(),ie(C.$$.fragment),L=fe(),ie(R.$$.fragment),O=fe(),T=re("div"),ie(x.$$.fragment),F=fe(),ie(Y.$$.fragment),q=fe(),ie(M.$$.fragment),I(t,"data-type",e[6].jupyter[0].name),z(t,"fn__none",e[6].jupyter[0].key!==e[27]),I(l,"data-type",e[6].jupyter[1].name),z(l,"fn__none",e[6].jupyter[1].key!==e[27]),I(g,"data-type",e[6].jupyter[2].name),z(g,"fn__none",e[6].jupyter[2].key!==e[27]),I(E,"data-type",e[6].jupyter[3].name),z(E,"fn__none",e[6].jupyter[3].key!==e[27]),I(T,"data-type",e[6].jupyter[4].name),z(T,"fn__none",e[6].jupyter[4].key!==e[27])},m(A,H){J(A,t,H),ee(i,t,null),ce(t,s),ee(r,t,null),J(A,n,H),J(A,l,H),ee(o,l,null),ce(l,a),ee(h,l,null),ce(l,u),ee(f,l,null),ce(l,_),ee(v,l,null),J(A,b,H),J(A,g,H),ee(c,g,null),ce(g,d),ee(m,g,null),ce(g,p),ee(y,g,null),J(A,S,H),J(A,E,H),ee(k,E,null),ce(E,w),ee(C,E,null),ce(E,L),ee(R,E,null),J(A,O,H),J(A,T,H),ee(x,T,null),ce(T,F),ee(Y,T,null),ce(T,q),ee(M,T,null),B=!0},p(A,H){const N={};H&268435457&&(N.$$scope={dirty:H,ctx:A}),i.$set(N);const se={};H&268435457&&(se.$$scope={dirty:H,ctx:A}),r.$set(se),(!B||H&134217792)&&z(t,"fn__none",A[6].jupyter[0].key!==A[27]);const he={};H&268435457&&(he.$$scope={dirty:H,ctx:A}),o.$set(he);const ae={};H&268435457&&(ae.$$scope={dirty:H,ctx:A}),h.$set(ae);const ye={};H&268435459&&(ye.$$scope={dirty:H,ctx:A}),f.$set(ye);const D={};H&268435457&&(D.$$scope={dirty:H,ctx:A}),v.$set(D),(!B||H&134217792)&&z(l,"fn__none",A[6].jupyter[1].key!==A[27]);const V={};H&268435457&&(V.$$scope={dirty:H,ctx:A}),c.$set(V);const K={};H&268435457&&(K.$$scope={dirty:H,ctx:A}),m.$set(K);const Z={};H&268435457&&(Z.$$scope={dirty:H,ctx:A}),y.$set(Z),(!B||H&134217792)&&z(g,"fn__none",A[6].jupyter[2].key!==A[27]);const _e={};H&268435457&&(_e.$$scope={dirty:H,ctx:A}),k.$set(_e);const Q={};H&268435457&&(Q.$$scope={dirty:H,ctx:A}),C.$set(Q);const Ee={};H&268435457&&(Ee.$$scope={dirty:H,ctx:A}),R.$set(Ee),(!B||H&134217792)&&z(E,"fn__none",A[6].jupyter[3].key!==A[27]);const He={};H&268435457&&(He.$$scope={dirty:H,ctx:A}),x.$set(He);const ze={};H&268435457&&(ze.$$scope={dirty:H,ctx:A}),Y.$set(ze);const ht={};H&268435457&&(ht.$$scope={dirty:H,ctx:A}),M.$set(ht),(!B||H&134217792)&&z(T,"fn__none",A[6].jupyter[4].key!==A[27])},i(A){B||(j(i.$$.fragment,A),j(r.$$.fragment,A),j(o.$$.fragment,A),j(h.$$.fragment,A),j(f.$$.fragment,A),j(v.$$.fragment,A),j(c.$$.fragment,A),j(m.$$.fragment,A),j(y.$$.fragment,A),j(k.$$.fragment,A),j(C.$$.fragment,A),j(R.$$.fragment,A),j(x.$$.fragment,A),j(Y.$$.fragment,A),j(M.$$.fragment,A),B=!0)},o(A){W(i.$$.fragment,A),W(r.$$.fragment,A),W(o.$$.fragment,A),W(h.$$.fragment,A),W(f.$$.fragment,A),W(v.$$.fragment,A),W(c.$$.fragment,A),W(m.$$.fragment,A),W(y.$$.fragment,A),W(k.$$.fragment,A),W(C.$$.fragment,A),W(R.$$.fragment,A),W(x.$$.fragment,A),W(Y.$$.fragment,A),W(M.$$.fragment,A),B=!1},d(A){A&&(G(t),G(n),G(l),G(b),G(g),G(S),G(E),G(O),G(T)),te(i),te(r),te(o),te(h),te(f),te(v),te(c),te(m),te(y),te(k),te(C),te(R),te(x),te(Y),te(M)}}}function g0(e){let t,i;return t=new H1({props:{focus:C0,tabs:e[6].jupyter,$$slots:{default:[m0,({focus:s})=>({27:s}),({focus:s})=>s?134217728:0]},$$scope:{ctx:e}}}),{c(){ie(t.$$.fragment)},m(s,r){ee(t,s,r),i=!0},p(s,r){const n={};r&402653187&&(n.$$scope={dirty:r,ctx:s}),t.$set(n)},i(s){i||(j(t.$$.fragment,s),i=!0)},o(s){W(t.$$.fragment,s),i=!1},d(s){te(t,s)}}}function v0(e){let t,i;return t=new Qe({props:{slot:"input",type:xe.text,settingKey:"fontFamily",settingValue:e[0].xterm.options.fontFamily,placeholder:"--b3-font-family-code"}}),t.$on("changed",e[23]),{c(){ie(t.$$.fragment)},m(s,r){ee(t,s,r),i=!0},p(s,r){const n={};r&1&&(n.settingValue=s[0].xterm.options.fontFamily),t.$set(n)},i(s){i||(j(t.$$.fragment,s),i=!0)},o(s){W(t.$$.fragment,s),i=!1},d(s){te(t,s)}}}function b0(e){let t,i;return t=new Ye({props:{title:e[2].settings.xtermSettings.fontFamily.title,text:e[2].settings.xtermSettings.fontFamily.description,$$slots:{input:[v0]},$$scope:{ctx:e}}}),{c(){ie(t.$$.fragment)},m(s,r){ee(t,s,r),i=!0},p(s,r){const n={};r&268435457&&(n.$$scope={dirty:r,ctx:s}),t.$set(n)},i(s){i||(j(t.$$.fragment,s),i=!0)},o(s){W(t.$$.fragment,s),i=!1},d(s){te(t,s)}}}function y0(e){let t,i,s,r,n,l;return t=new Ps({props:{display:e[5][0].key===e[26],$$slots:{default:[e0]},$$scope:{ctx:e}}}),s=new Ps({props:{display:e[5][1].key===e[26],$$slots:{default:[g0]},$$scope:{ctx:e}}}),n=new Ps({props:{display:e[5][2].key===e[26],$$slots:{default:[b0]},$$scope:{ctx:e}}}),{c(){ie(t.$$.fragment),i=fe(),ie(s.$$.fragment),r=fe(),ie(n.$$.fragment)},m(o,a){ee(t,o,a),J(o,i,a),ee(s,o,a),J(o,r,a),ee(n,o,a),l=!0},p(o,a){const h={};a&67108864&&(h.display=o[5][0].key===o[26]),a&268435456&&(h.$$scope={dirty:a,ctx:o}),t.$set(h);const u={};a&67108864&&(u.display=o[5][1].key===o[26]),a&268435459&&(u.$$scope={dirty:a,ctx:o}),s.$set(u);const f={};a&67108864&&(f.display=o[5][2].key===o[26]),a&268435457&&(f.$$scope={dirty:a,ctx:o}),n.$set(f)},i(o){l||(j(t.$$.fragment,o),j(s.$$.fragment,o),j(n.$$.fragment,o),l=!0)},o(o){W(t.$$.fragment,o),W(s.$$.fragment,o),W(n.$$.fragment,o),l=!1},d(o){o&&(G(i),G(r)),te(t,o),te(s,o),te(n,o)}}}function w0(e){let t,i;return t=new g1({props:{panels:e[5],focus:S0,$$slots:{default:[y0,({focus:s})=>({26:s}),({focus:s})=>s?67108864:0]},$$scope:{ctx:e}}}),{c(){ie(t.$$.fragment)},m(s,r){ee(t,s,r),i=!0},p(s,[r]){const n={};r&335544323&&(n.$$scope={dirty:r,ctx:s}),t.$set(n)},i(s){i||(j(t.$$.fragment,s),i=!0)},o(s){W(t.$$.fragment,s),i=!1},d(s){te(t,s)}}}let S0=0,C0=0;function k0(e,t,i){let s,{config:r}=t,{plugin:n}=t;const l=n.i18n;async function o(R=!1){await n.updateConfig(r,R)}function a(){n.siyuan.confirm(l.settings.generalSettings.reset.title,l.settings.generalSettings.reset.description,async()=>{await n.resetConfig(),globalThis.location.reload()})}const h=[{key:0,text:l.settings.generalSettings.title,name:l.settings.generalSettings.title,icon:"#iconSettings"},{key:1,text:l.settings.jupyterSettings.title,name:l.settings.jupyterSettings.title,icon:"#icon-jupyter-client"},{key:2,text:l.settings.xtermSettings.title,name:l.settings.xtermSettings.title,icon:"#icon-jupyter-client-terminal"}],u={jupyter:[{key:0,text:l.settings.jupyterSettings.globalTab.title,name:l.settings.jupyterSettings.globalTab.title,icon:"⚙"},{key:1,text:l.settings.jupyterSettings.serviceTab.title,name:l.settings.jupyterSettings.serviceTab.title,icon:"🌐"},{key:2,text:l.settings.jupyterSettings.executeTab.title,name:l.settings.jupyterSettings.executeTab.title,icon:"▶"},{key:3,text:l.settings.jupyterSettings.outputTab.title,name:l.settings.jupyterSettings.outputTab.title,icon:"🖨️"},{key:4,text:l.settings.jupyterSettings.importTab.title,name:l.settings.jupyterSettings.importTab.title,icon:"📤︎"}]},f=async R=>{i(0,r.jupyter.server.enable=R.detail.value,r),await o(!0)},_=async R=>{i(0,r.jupyter.edit.delay=R.detail.value,r),await o()},v=async R=>{i(0,r.jupyter.server.settings.baseUrl=R.detail.value,r),await o(!0)},b=async R=>{i(0,r.jupyter.server.settings.appUrl=R.detail.value,r),await o(!0)},g=async R=>{i(0,r.jupyter.server.settings.wsUrl=R.detail.value,r),await o(!0)},c=async R=>{i(0,r.jupyter.server.settings.token=R.detail.value,r),await o(!0)},d=async R=>{i(0,r.jupyter.execute.goto=R.detail.value,r),await o()},m=async R=>{i(0,r.jupyter.execute.input.goto=R.detail.value,r),await o()},p=async R=>{i(0,r.jupyter.execute.content.stop_on_error=R.detail.value,r),await o()},y=async R=>{i(0,r.jupyter.execute.output.parser.xterm=R.detail.value,r),await o()},S=async R=>{i(0,r.jupyter.execute.output.parser.escaped=R.detail.value,r),await o()},E=async R=>{i(0,r.jupyter.execute.output.parser.cntrl=R.detail.value,r),await o()},k=async R=>{i(0,r.jupyter.import.parser.xterm=R.detail.value,r),await o()},w=async R=>{i(0,r.jupyter.import.parser.escaped=R.detail.value,r),await o()},C=async R=>{i(0,r.jupyter.import.parser.cntrl=R.detail.value,r),await o()},L=async R=>{i(0,r.xterm.options.fontFamily=R.detail.value,r),await o()};return e.$$set=R=>{"config"in R&&i(0,r=R.config),"plugin"in R&&i(7,n=R.plugin)},e.$$.update=()=>{e.$$.dirty&1&&i(1,s=X1(r.jupyter.server.settings.baseUrl))},[r,s,l,o,a,h,u,n,f,_,v,b,g,c,d,m,p,y,S,E,k,w,C,L]}class E0 extends Ve{constructor(t){super(),Ne(this,t,k0,w0,Pe,{config:0,plugin:7})}}function $o(e){let t,i;return t=new kt({props:{className:"block__logoicon",icon:e[0]}}),{c(){ie(t.$$.fragment)},m(s,r){ee(t,s,r),i=!0},p(s,r){const n={};r&1&&(n.icon=s[0]),t.$set(n)},i(s){i||(j(t.$$.fragment,s),i=!0)},o(s){W(t.$$.fragment,s),i=!1},d(s){te(t,s)}}}function Xo(e){let t;return{c(){t=bt(e[1])},m(i,s){J(i,t,s)},p(i,s){s&2&&It(t,i[1])},d(i){i&&G(t)}}}function L0(e){let t,i,s,r=e[0]&&$o(e),n=e[1]&&Xo(e);return{c(){t=re("div"),r&&r.c(),i=fe(),n&&n.c(),I(t,"class","block__logo")},m(l,o){J(l,t,o),r&&r.m(t,null),ce(t,i),n&&n.m(t,null),s=!0},p(l,[o]){l[0]?r?(r.p(l,o),o&1&&j(r,1)):(r=$o(l),r.c(),j(r,1),r.m(t,i)):r&&(Je(),W(r,1,1,()=>{r=null}),$e()),l[1]?n?n.p(l,o):(n=Xo(l),n.c(),n.m(t,null)):n&&(n.d(1),n=null)},i(l){s||(j(r),s=!0)},o(l){W(r),s=!1},d(l){l&&G(t),r&&r.d(),n&&n.d()}}}function M0(e,t,i){let{icon:s=""}=t,{title:r=""}=t;return e.$$set=n=>{"icon"in n&&i(0,s=n.icon),"title"in n&&i(1,r=n.title)},[s,r]}class T0 extends Ve{constructor(t){super(),Ne(this,t,M0,L0,Pe,{icon:0,title:1})}}function Qo(e,t,i){const s=e.slice();return s[5]=t[i],s[7]=i,s}const D0=e=>({icon:e&4}),ea=e=>({icon:e[5]}),A0=e=>({}),ta=e=>({});function ia(e){let t,i;return t=new T0({props:{icon:e[0],title:e[1]}}),{c(){ie(t.$$.fragment)},m(s,r){ee(t,s,r),i=!0},p(s,r){const n={};r&1&&(n.icon=s[0]),r&2&&(n.title=s[1]),t.$set(n)},i(s){i||(j(t.$$.fragment,s),i=!0)},o(s){W(t.$$.fragment,s),i=!1},d(s){te(t,s)}}}function R0(e){let t,i,s=(e[0]||e[1])&&ia(e);return{c(){s&&s.c(),t=Xe()},m(r,n){s&&s.m(r,n),J(r,t,n),i=!0},p(r,n){r[0]||r[1]?s?(s.p(r,n),n&3&&j(s,1)):(s=ia(r),s.c(),j(s,1),s.m(t.parentNode,t)):s&&(Je(),W(s,1,1,()=>{s=null}),$e())},i(r){i||(j(s),i=!0)},o(r){W(s),i=!1},d(r){r&&G(t),s&&s.d(r)}}}function O0(e){let t,i,s;const r=[e[5]];let n={};for(let l=0;l<r.length;l+=1)n=oi(n,r[l]);return t=new Bl({props:n}),{c(){ie(t.$$.fragment),i=fe()},m(l,o){ee(t,l,o),J(l,i,o),s=!0},p(l,o){const a=o&4?wi(r,[Di(l[5])]):{};t.$set(a)},i(l){s||(j(t.$$.fragment,l),s=!0)},o(l){W(t.$$.fragment,l),s=!1},d(l){l&&G(i),te(t,l)}}}function sa(e,t){let i,s,r;const n=t[4].icon,l=qe(n,t,t[3],ea),o=l||O0(t);return{key:e,first:null,c(){i=re("span"),s=fe(),o&&o.c(),I(i,"class","fn__space"),z(i,"fn__flex-1",t[7]===0),this.first=i},m(a,h){J(a,i,h),J(a,s,h),o&&o.m(a,h),r=!0},p(a,h){t=a,(!r||h&4)&&z(i,"fn__flex-1",t[7]===0),l?l.p&&(!r||h&12)&&Ke(l,n,t,t[3],r?Ze(n,t[3],h,D0):Ge(t[3]),ea):o&&o.p&&(!r||h&4)&&o.p(t,r?h:-1)},i(a){r||(j(o,a),r=!0)},o(a){W(o,a),r=!1},d(a){a&&(G(i),G(s)),o&&o.d(a)}}}function B0(e){let t,i,s=[],r=new Map,n;const l=e[4].logo,o=qe(l,e,e[3],ta),a=o||R0(e);let h=ct(e[2]);const u=f=>f[7];for(let f=0;f<h.length;f+=1){let _=Qo(e,h,f),v=u(_);r.set(v,s[f]=sa(v,_))}return{c(){t=re("div"),a&&a.c(),i=fe();for(let f=0;f<s.length;f+=1)s[f].c();I(t,"class","block__icons")},m(f,_){J(f,t,_),a&&a.m(t,null),ce(t,i);for(let v=0;v<s.length;v+=1)s[v]&&s[v].m(t,null);n=!0},p(f,[_]){o?o.p&&(!n||_&8)&&Ke(o,l,f,f[3],n?Ze(l,f[3],_,A0):Ge(f[3]),ta):a&&a.p&&(!n||_&3)&&a.p(f,n?_:-1),_&12&&(h=ct(f[2]),Je(),s=yi(s,_,u,1,f,h,r,t,Ti,sa,null,Qo),$e())},i(f){if(!n){j(a,f);for(let _=0;_<h.length;_+=1)j(s[_]);n=!0}},o(f){W(a,f);for(let _=0;_<s.length;_+=1)W(s[_]);n=!1},d(f){f&&G(t),a&&a.d(f);for(let _=0;_<s.length;_+=1)s[_].d()}}}function H0(e,t,i){let{$$slots:s={},$$scope:r}=t,{logo:n=""}=t,{title:l=""}=t,{icons:o=[]}=t;return e.$$set=a=>{"logo"in a&&i(0,n=a.logo),"title"in a&&i(1,l=a.title),"icons"in a&&i(2,o=a.icons),"$$scope"in a&&i(3,r=a.$$scope)},[n,l,o,r,s]}class xl extends Ve{constructor(t){super(),Ne(this,t,H0,B0,Pe,{logo:0,title:1,icons:2})}}var we=(e=>(e.Root="navigation-root",e.File="navigation-file",e.Folder="navigation-folder",e))(we||{});function x0(e){let t,i;return t=new kt({props:{icon:"#iconHelp",id:e[1],className:e[2],style:e[3]}}),{c(){ie(t.$$.fragment)},m(s,r){ee(t,s,r),i=!0},p(s,r){const n={};r&2&&(n.id=s[1]),r&4&&(n.className=s[2]),r&8&&(n.style=s[3]),t.$set(n)},i(s){i||(j(t.$$.fragment,s),i=!0)},o(s){W(t.$$.fragment,s),i=!1},d(s){te(t,s)}}}function P0(e){let t;return{c(){t=bt(e[0])},m(i,s){J(i,t,s)},p(i,s){s&1&&It(t,i[0])},i:Ie,o:Ie,d(i){i&&G(t)}}}function I0(e){let t,i;return{c(){t=new Zi(!1),i=Xe(),t.a=i},m(s,r){t.m(e[0],s,r),J(s,i,r)},p(s,r){r&1&&t.p(s[0])},i:Ie,o:Ie,d(s){s&&(G(i),t.d())}}}function N0(e){let t,i;return{c(){t=re("img"),I(t,"alt","icon"),I(t,"style",e[3]),Fs(t.src,i=e[0])||I(t,"src",i),I(t,"data-id",e[1]),I(t,"class",e[2]),z(t,"popover__block",zi.id.test(e[1])),z(t,"b3-list-item__icon",!0)},m(s,r){J(s,t,r)},p(s,r){r&8&&I(t,"style",s[3]),r&1&&!Fs(t.src,i=s[0])&&I(t,"src",i),r&2&&I(t,"data-id",s[1]),r&4&&I(t,"class",s[2]),r&6&&z(t,"popover__block",zi.id.test(s[1])),r&4&&z(t,"b3-list-item__icon",!0)},i:Ie,o:Ie,d(s){s&&G(t)}}}function V0(e){let t,i;return t=new kt({props:{icon:e[0],id:e[1],className:e[2],style:e[3]}}),{c(){ie(t.$$.fragment)},m(s,r){ee(t,s,r),i=!0},p(s,r){const n={};r&1&&(n.icon=s[0]),r&2&&(n.id=s[1]),r&4&&(n.className=s[2]),r&8&&(n.style=s[3]),t.$set(n)},i(s){i||(j(t.$$.fragment,s),i=!0)},o(s){W(t.$$.fragment,s),i=!1},d(s){te(t,s)}}}function j0(e){let t,i,s,r,n,l,o;const a=[V0,N0,I0,P0,x0],h=[];function u(f,_){return _&1&&(t=null),_&1&&(i=null),_&1&&(s=null),t==null&&(t=!!f[0].startsWith("#")),t?0:(i==null&&(i=!!(f[0].startsWith("/")||f[0].startsWith("http")||f[0].startsWith("data")||f[0].startsWith("blob"))),i?1:(s==null&&(s=!!(f[0].startsWith("<")&&f[0].endsWith(">"))),s?2:f[0]?3:4))}return r=u(e,-1),n=h[r]=a[r](e),{c(){n.c(),l=Xe()},m(f,_){h[r].m(f,_),J(f,l,_),o=!0},p(f,[_]){let v=r;r=u(f,_),r===v?h[r].p(f,_):(Je(),W(h[v],1,1,()=>{h[v]=null}),$e(),n=h[r],n?n.p(f,_):(n=h[r]=a[r](f),n.c()),j(n,1),n.m(l.parentNode,l))},i(f){o||(j(n),o=!0)},o(f){W(n),o=!1},d(f){f&&G(l),h[r].d(f)}}}function F0(e,t,i){let{icon:s}=t,{id:r=""}=t,{className:n=""}=t,{style:l=""}=t;return e.$$set=o=>{"icon"in o&&i(0,s=o.icon),"id"in o&&i(1,r=o.id),"className"in o&&i(2,n=o.className),"style"in o&&i(3,l=o.style)},[s,r,n,l]}class wn extends Ve{constructor(t){super(),Ne(this,t,F0,j0,Pe,{icon:0,id:1,className:2,style:3})}}function U0(e){let t,i;return{c(){t=ri("svg"),i=ri("use"),Mi(i,"xlink:href",e[1]),I(t,"style",e[3]),I(t,"class",e[2]),z(t,"b3-list-item__arrow--open",e[0])},m(s,r){J(s,t,r),ce(t,i)},p(s,[r]){r&2&&Mi(i,"xlink:href",s[1]),r&8&&I(t,"style",s[3]),r&4&&I(t,"class",s[2]),r&5&&z(t,"b3-list-item__arrow--open",s[0])},i:Ie,o:Ie,d(s){s&&G(t)}}}function W0(e,t,i){let{open:s=!1}=t,{icon:r="#iconRight"}=t,{className:n="b3-list-item__arrow"}=t,{style:l=void 0}=t;return e.$$set=o=>{"open"in o&&i(0,s=o.open),"icon"in o&&i(1,r=o.icon),"className"in o&&i(2,n=o.className),"style"in o&&i(3,l=o.style)},[s,r,n,l]}class z0 extends Ve{constructor(t){super(),Ne(this,t,W0,U0,Pe,{open:0,icon:1,className:2,style:3})}}function ra(e,t,i){const s=e.slice();return s[59]=t[i],s[61]=i,s}function Y0(e){let t,i;return t=new kt({props:{icon:"#iconHelp",id:e[21]}}),{c(){ie(t.$$.fragment)},m(s,r){ee(t,s,r),i=!0},p(s,r){const n={};r[0]&2097152&&(n.id=s[21]),t.$set(n)},i(s){i||(j(t.$$.fragment,s),i=!0)},o(s){W(t.$$.fragment,s),i=!1},d(s){te(t,s)}}}function q0(e){let t,i;return t=new kt({props:{icon:"#iconFilesRoot",id:e[21]}}),{c(){ie(t.$$.fragment)},m(s,r){ee(t,s,r),i=!0},p(s,r){const n={};r[0]&2097152&&(n.id=s[21]),t.$set(n)},i(s){i||(j(t.$$.fragment,s),i=!0)},o(s){W(t.$$.fragment,s),i=!1},d(s){te(t,s)}}}function Z0(e){let t,i;return t=new kt({props:{icon:"#iconFolder",id:e[21]}}),{c(){ie(t.$$.fragment)},m(s,r){ee(t,s,r),i=!0},p(s,r){const n={};r[0]&2097152&&(n.id=s[21]),t.$set(n)},i(s){i||(j(t.$$.fragment,s),i=!0)},o(s){W(t.$$.fragment,s),i=!1},d(s){te(t,s)}}}function K0(e){let t,i;return t=new kt({props:{icon:"#iconFile",id:e[21]}}),{c(){ie(t.$$.fragment)},m(s,r){ee(t,s,r),i=!0},p(s,r){const n={};r[0]&2097152&&(n.id=s[21]),t.$set(n)},i(s){i||(j(t.$$.fragment,s),i=!0)},o(s){W(t.$$.fragment,s),i=!1},d(s){te(t,s)}}}function G0(e){let t,i;return t=new wn({props:{icon:e[19],id:e[21]}}),{c(){ie(t.$$.fragment)},m(s,r){ee(t,s,r),i=!0},p(s,r){const n={};r[0]&524288&&(n.icon=s[19]),r[0]&2097152&&(n.id=s[21]),t.$set(n)},i(s){i||(j(t.$$.fragment,s),i=!0)},o(s){W(t.$$.fragment,s),i=!1},d(s){te(t,s)}}}function na(e){let t,i,s;return i=new wn({props:{icon:e[26]}}),{c(){t=re("span"),ie(i.$$.fragment),I(t,"data-type","symlink"),I(t,"aria-label",e[27]),I(t,"class","symblink b3-list-item__action"),z(t,"b3-tooltips",!!e[27]),z(t,"b3-tooltips__sw",!!e[27]&&e[0]===we.Root),z(t,"b3-tooltips__nw",!!e[27]&&e[0]!==we.Root)},m(r,n){J(r,t,n),ee(i,t,null),s=!0},p(r,n){const l={};n[0]&67108864&&(l.icon=r[26]),i.$set(l),(!s||n[0]&134217728)&&I(t,"aria-label",r[27]),(!s||n[0]&134217728)&&z(t,"b3-tooltips",!!r[27]),(!s||n[0]&134217729)&&z(t,"b3-tooltips__sw",!!r[27]&&r[0]===we.Root),(!s||n[0]&134217729)&&z(t,"b3-tooltips__nw",!!r[27]&&r[0]!==we.Root)},i(r){s||(j(i.$$.fragment,r),s=!0)},o(r){W(i.$$.fragment,r),s=!1},d(r){r&&G(t),te(i)}}}function oa(e){let t,i;return{c(){t=re("span"),i=bt(e[28]),I(t,"aria-label",e[29]),I(t,"class","counter"),z(t,"b3-tooltips",!!e[29]),z(t,"b3-tooltips__sw",!!e[29]&&e[0]===we.Root),z(t,"b3-tooltips__nw",!!e[29]&&e[0]!==we.Root)},m(s,r){J(s,t,r),ce(t,i)},p(s,r){r[0]&268435456&&It(i,s[28]),r[0]&536870912&&I(t,"aria-label",s[29]),r[0]&536870912&&z(t,"b3-tooltips",!!s[29]),r[0]&536870913&&z(t,"b3-tooltips__sw",!!s[29]&&s[0]===we.Root),r[0]&536870913&&z(t,"b3-tooltips__nw",!!s[29]&&s[0]!==we.Root)},d(s){s&&G(t)}}}function aa(e){let t,i=[],s=new Map,r=`calc(12px + ${e[4]} * ${e[3]})`,n,l=ct(e[16]);const o=a=>a[59].path;for(let a=0;a<l.length;a+=1){let h=ra(e,l,a),u=o(h);s.set(u,i[a]=la(u,h))}return{c(){t=re("ul");for(let a=0;a<i.length;a+=1)i[a].c();I(t,"class","node-list svelte-1oapgz1"),z(t,"dragging",e[9]),z(t,"dragover",e[13]),z(t,"fn__none",e[7]),wt(t,"--monaco-editor-explorer-indent-left",r)},m(a,h){J(a,t,h);for(let u=0;u<i.length;u+=1)i[u]&&i[u].m(t,null);e[54](t),n=!0},p(a,h){h[0]&65544&&(l=ct(a[16]),Je(),i=yi(i,h,o,1,a,l,s,t,Ti,la,null,ra),$e()),(!n||h[0]&512)&&z(t,"dragging",a[9]),(!n||h[0]&8192)&&z(t,"dragover",a[13]),(!n||h[0]&128)&&z(t,"fn__none",a[7]),h[0]&24&&r!==(r=`calc(12px + ${a[4]} * ${a[3]})`)&&wt(t,"--monaco-editor-explorer-indent-left",r)},i(a){if(!n){for(let h=0;h<l.length;h+=1)j(i[h]);n=!0}},o(a){for(let h=0;h<i.length;h+=1)W(i[h]);n=!1},d(a){a&&G(t);for(let h=0;h<i.length;h+=1)i[h].d();e[54](null)}}}function la(e,t){let i,s,r;const n=[{depth:t[3]+1},t[59]];let l={};for(let o=0;o<n.length;o+=1)l=oi(l,n[o]);return s=new Pl({props:l}),s.$on("open",t[44]),s.$on("fold",t[45]),s.$on("menu",t[46]),s.$on("unfold",t[47]),s.$on("dragstart",t[48]),s.$on("dragend",t[49]),s.$on("dragenter",t[50]),s.$on("dragover",t[51]),s.$on("dragleave",t[52]),s.$on("drop",t[53]),{key:e,first:null,c(){i=Xe(),ie(s.$$.fragment),this.first=i},m(o,a){J(o,i,a),ee(s,o,a),r=!0},p(o,a){t=o;const h=a[0]&65544?wi(n,[a[0]&8&&{depth:t[3]+1},a[0]&65536&&Di(t[59])]):{};s.$set(h)},i(o){r||(j(s.$$.fragment,o),r=!0)},o(o){W(s.$$.fragment,o),r=!1},d(o){o&&G(i),te(s,o)}}}function J0(e){let t,i,s,r=`calc(4px + ${e[4]} * ${e[3]})`,n,l,o,a,h,u,f,_,v,b,g,c,d=!Number.isNaN(e[28]),m,p,y,S,E;s=new z0({props:{open:!e[7],icon:e[17]}});const k=[G0,K0,Z0,q0,Y0],w=[];function C(T,x){return T[19]?0:T[0]===we.File?1:T[0]===we.Folder?2:T[0]===we.Root?3:4}o=C(e),a=w[o]=k[o](e),b=new wn({props:{icon:e[24]}});let L=e[8]&&na(e),R=d&&oa(e),O=e[16]&&aa(e);return{c(){t=re("li"),i=re("span"),ie(s.$$.fragment),n=fe(),l=re("span"),a.c(),h=fe(),u=re("span"),f=bt(e[22]),_=fe(),v=re("span"),ie(b.$$.fragment),g=fe(),L&&L.c(),c=fe(),R&&R.c(),m=fe(),O&&O.c(),p=Xe(),I(i,"role","button"),I(i,"aria-label",e[18]),I(i,"class","toggle b3-list-item__toggle b3-list-item__toggle--hl"),z(i,"b3-tooltips",!!e[18]),z(i,"b3-tooltips__se",!!e[18]&&e[0]===we.Root),z(i,"b3-tooltips__ne",!!e[18]&&e[0]!==we.Root),z(i,"fn__hidden",e[0]===we.File),wt(i,"padding-left",r),I(l,"aria-label",e[20]),I(l,"class","icon b3-list-item__icon"),z(l,"b3-tooltips",!!e[20]),z(l,"b3-tooltips__se",!!e[20]&&e[0]===we.Root),z(l,"b3-tooltips__ne",!!e[20]&&e[0]!==we.Root),I(u,"aria-label",e[23]),I(u,"class","text b3-list-item__text"),z(u,"ariaLabel",!!e[23]),z(u,"b3-tooltips__se",!!e[23]&&e[0]===we.Root),z(u,"b3-tooltips__ne",!!e[23]&&e[0]!==we.Root),I(v,"role","button"),I(v,"data-type","more"),I(v,"aria-label",e[25]),I(v,"class","menu b3-list-item__action"),z(v,"b3-tooltips",!!e[25]),z(v,"b3-tooltips__sw",!!e[25]&&e[0]===we.Root),z(v,"b3-tooltips__nw",!!e[25]&&e[0]!==we.Root),I(t,"draggable",e[10]),I(t,"title",e[15]),I(t,"data-type",e[0]),I(t,"data-name",e[1]),I(t,"data-path",e[2]),I(t,"data-depth",e[3]),I(t,"data-directory",e[5]),I(t,"class","node b3-list-item svelte-1oapgz1"),z(t,"dragging",e[9]),z(t,"dragover",e[13]),z(t,"dragover__top",e[12]),z(t,"dragover__bottom",e[14]),z(t,"b3-list-item--focus",e[6]),z(t,"b3-list-item--hide-action",e[11])},m(T,x){J(T,t,x),ce(t,i),ee(s,i,null),ce(t,n),ce(t,l),w[o].m(l,null),ce(t,h),ce(t,u),ce(u,f),ce(t,_),ce(t,v),ee(b,v,null),ce(t,g),L&&L.m(t,null),ce(t,c),R&&R.m(t,null),e[43](t),J(T,m,x),O&&O.m(T,x),J(T,p,x),y=!0,S||(E=[Ce(i,"click",Wt(di(e[33]))),Ce(v,"click",Wt(di(e[34]))),Ce(t,"dragstart",Wt(e[35])),Ce(t,"dragend",Wt(e[36])),Ce(t,"dragenter",Wt(di(e[37]))),Ce(t,"dragover",Wt(di(e[38]))),Ce(t,"dragleave",Wt(di(e[39]))),Ce(t,"drop",Wt(di(e[40]))),Ce(t,"click",Wt(di(e[32]))),Ce(t,"contextmenu",Wt(di(e[34])))],S=!0)},p(T,x){const F={};x[0]&128&&(F.open=!T[7]),x[0]&131072&&(F.icon=T[17]),s.$set(F),(!y||x[0]&262144)&&I(i,"aria-label",T[18]),(!y||x[0]&262144)&&z(i,"b3-tooltips",!!T[18]),(!y||x[0]&262145)&&z(i,"b3-tooltips__se",!!T[18]&&T[0]===we.Root),(!y||x[0]&262145)&&z(i,"b3-tooltips__ne",!!T[18]&&T[0]!==we.Root),(!y||x[0]&1)&&z(i,"fn__hidden",T[0]===we.File),x[0]&24&&r!==(r=`calc(4px + ${T[4]} * ${T[3]})`)&&wt(i,"padding-left",r);let Y=o;o=C(T),o===Y?w[o].p(T,x):(Je(),W(w[Y],1,1,()=>{w[Y]=null}),$e(),a=w[o],a?a.p(T,x):(a=w[o]=k[o](T),a.c()),j(a,1),a.m(l,null)),(!y||x[0]&1048576)&&I(l,"aria-label",T[20]),(!y||x[0]&1048576)&&z(l,"b3-tooltips",!!T[20]),(!y||x[0]&1048577)&&z(l,"b3-tooltips__se",!!T[20]&&T[0]===we.Root),(!y||x[0]&1048577)&&z(l,"b3-tooltips__ne",!!T[20]&&T[0]!==we.Root),(!y||x[0]&4194304)&&It(f,T[22]),(!y||x[0]&8388608)&&I(u,"aria-label",T[23]),(!y||x[0]&8388608)&&z(u,"ariaLabel",!!T[23]),(!y||x[0]&8388609)&&z(u,"b3-tooltips__se",!!T[23]&&T[0]===we.Root),(!y||x[0]&8388609)&&z(u,"b3-tooltips__ne",!!T[23]&&T[0]!==we.Root);const q={};x[0]&16777216&&(q.icon=T[24]),b.$set(q),(!y||x[0]&33554432)&&I(v,"aria-label",T[25]),(!y||x[0]&33554432)&&z(v,"b3-tooltips",!!T[25]),(!y||x[0]&33554433)&&z(v,"b3-tooltips__sw",!!T[25]&&T[0]===we.Root),(!y||x[0]&33554433)&&z(v,"b3-tooltips__nw",!!T[25]&&T[0]!==we.Root),T[8]?L?(L.p(T,x),x[0]&256&&j(L,1)):(L=na(T),L.c(),j(L,1),L.m(t,c)):L&&(Je(),W(L,1,1,()=>{L=null}),$e()),x[0]&268435456&&(d=!Number.isNaN(T[28])),d?R?R.p(T,x):(R=oa(T),R.c(),R.m(t,null)):R&&(R.d(1),R=null),(!y||x[0]&1024)&&I(t,"draggable",T[10]),(!y||x[0]&32768)&&I(t,"title",T[15]),(!y||x[0]&1)&&I(t,"data-type",T[0]),(!y||x[0]&2)&&I(t,"data-name",T[1]),(!y||x[0]&4)&&I(t,"data-path",T[2]),(!y||x[0]&8)&&I(t,"data-depth",T[3]),(!y||x[0]&32)&&I(t,"data-directory",T[5]),(!y||x[0]&512)&&z(t,"dragging",T[9]),(!y||x[0]&8192)&&z(t,"dragover",T[13]),(!y||x[0]&4096)&&z(t,"dragover__top",T[12]),(!y||x[0]&16384)&&z(t,"dragover__bottom",T[14]),(!y||x[0]&64)&&z(t,"b3-list-item--focus",T[6]),(!y||x[0]&2048)&&z(t,"b3-list-item--hide-action",T[11]),T[16]?O?(O.p(T,x),x[0]&65536&&j(O,1)):(O=aa(T),O.c(),j(O,1),O.m(p.parentNode,p)):O&&(Je(),W(O,1,1,()=>{O=null}),$e())},i(T){y||(j(s.$$.fragment,T),j(a),j(b.$$.fragment,T),j(L),j(O),y=!0)},o(T){W(s.$$.fragment,T),W(a),W(b.$$.fragment,T),W(L),W(O),y=!1},d(T){T&&(G(t),G(m),G(p)),te(s),w[o].d(),te(b),L&&L.d(),R&&R.d(),e[43](null),O&&O.d(T),S=!1,rt(E)}}}function $0(e,t,i){let{type:s}=t,{name:r=""}=t,{path:n}=t,{root:l=""}=t,{depth:o=0}=t,{indent:a="1em"}=t,{relative:h=""}=t,{directory:u}=t,{focus:f=!1}=t,{folded:_=!0}=t,{symlink:v=!1}=t,{dragging:b=!1}=t,{draggable:g=!1}=t,{hideActions:c=!0}=t,{dragoverTop:d=!1}=t,{dragover:m=!1}=t,{dragoverBottom:p=!1}=t,{title:y=""}=t,{children:S=void 0}=t,{toggleIcon:E="#iconRight"}=t,{toggleAriaLabel:k=""}=t,{icon:w=""}=t,{iconAriaLabel:C=""}=t,{iconPopoverID:L=""}=t,{text:R=""}=t,{textAriaLabel:O=""}=t,{menuIcon:T="#iconMore"}=t,{menuAriaLabel:x=""}=t,{symlinkIcon:F="#iconLink"}=t,{symlinkAriaLabel:Y=""}=t,{count:q=NaN}=t,{countAriaLabel:M=""}=t,B,A;const H=ai(),N={type:ke(s),name:ke(r),path:ke(n),root:ke(l),depth:ke(o),indent:ke(a),relative:ke(h),directory:ke(u),focus:ke(f),folded:ke(_),symlink:ke(v),dragging:ke(b),draggable:ke(g),hideActions:ke(c),dragoverTop:ke(d),dragover:ke(m),dragoverBottom:ke(p),title:ke(y),children:ke(S),toggleIcon:ke(E),toggleAriaLabel:ke(k),icon:ke(w),iconAriaLabel:ke(C),iconPopoverID:ke(L),text:ke(R),textAriaLabel:ke(O),menuIcon:ke(T),menuAriaLabel:ke(x),symlinkIcon:ke(F),symlinkAriaLabel:ke(Y),count:ke(q),countAriaLabel:ke(M)},se=[N.type.subscribe(P=>i(0,s=P)),N.name.subscribe(P=>i(1,r=P)),N.path.subscribe(P=>i(2,n=P)),N.root.subscribe(P=>i(41,l=P)),N.indent.subscribe(P=>i(4,a=P)),N.depth.subscribe(P=>i(3,o=P)),N.relative.subscribe(P=>i(42,h=P)),N.directory.subscribe(P=>i(5,u=P)),N.focus.subscribe(P=>i(6,f=P)),N.folded.subscribe(P=>i(7,_=P)),N.symlink.subscribe(P=>i(8,v=P)),N.dragging.subscribe(P=>i(9,b=P)),N.draggable.subscribe(P=>i(10,g=P)),N.hideActions.subscribe(P=>i(11,c=P)),N.dragoverTop.subscribe(P=>i(12,d=P)),N.dragover.subscribe(P=>i(13,m=P)),N.dragoverBottom.subscribe(P=>i(14,p=P)),N.title.subscribe(P=>i(15,y=P)),N.children.subscribe(P=>i(16,S=P)),N.toggleIcon.subscribe(P=>i(17,E=P)),N.toggleAriaLabel.subscribe(P=>i(18,k=P)),N.icon.subscribe(P=>i(19,w=P)),N.iconAriaLabel.subscribe(P=>i(20,C=P)),N.iconPopoverID.subscribe(P=>i(21,L=P)),N.text.subscribe(P=>i(22,R=P)),N.textAriaLabel.subscribe(P=>i(23,O=P)),N.menuIcon.subscribe(P=>i(24,T=P)),N.menuAriaLabel.subscribe(P=>i(25,x=P)),N.symlinkIcon.subscribe(P=>i(26,F=P)),N.symlinkAriaLabel.subscribe(P=>i(27,Y=P)),N.count.subscribe(P=>i(28,q=P)),N.countAriaLabel.subscribe(P=>i(29,M=P))],he=id("tree");he==null||he.appendNode(N),bn(()=>{he==null||he.removeNode(N),se.forEach(P=>P())});function ae(P){switch(s){case we.File:H("open",{e:P,li:B,ul:A,props:N,dispatcher:H});break;case we.Root:case we.Folder:default:ye(P);break}}function ye(P){_?H("unfold",{e:P,li:B,ul:A,props:N,dispatcher:H}):H("fold",{e:P,li:B,ul:A,props:N,dispatcher:H})}function D(P){H("menu",{e:P,li:B,ul:A,props:N,dispatcher:H})}function V(P){H("dragstart",{e:P,li:B,ul:A,props:N,dispatcher:H})}function K(P){H("dragend",{e:P,li:B,ul:A,props:N,dispatcher:H})}function Z(P){H("dragenter",{e:P,li:B,ul:A,props:N,dispatcher:H})}function _e(P){H("dragover",{e:P,li:B,ul:A,props:N,dispatcher:H})}function Q(P){H("dragleave",{e:P,li:B,ul:A,props:N,dispatcher:H})}function Ee(P){H("drop",{e:P,li:B,ul:A,props:N,dispatcher:H})}function He(P){Nt[P?"unshift":"push"](()=>{B=P,i(30,B)})}function ze(P){Re.call(this,e,P)}function ht(P){Re.call(this,e,P)}function be(P){Re.call(this,e,P)}function Ht(P){Re.call(this,e,P)}function Si(P){Re.call(this,e,P)}function hi(P){Re.call(this,e,P)}function ui(P){Re.call(this,e,P)}function at(P){Re.call(this,e,P)}function et(P){Re.call(this,e,P)}function Lt(P){Re.call(this,e,P)}function ge(P){Nt[P?"unshift":"push"](()=>{A=P,i(31,A)})}return e.$$set=P=>{"type"in P&&i(0,s=P.type),"name"in P&&i(1,r=P.name),"path"in P&&i(2,n=P.path),"root"in P&&i(41,l=P.root),"depth"in P&&i(3,o=P.depth),"indent"in P&&i(4,a=P.indent),"relative"in P&&i(42,h=P.relative),"directory"in P&&i(5,u=P.directory),"focus"in P&&i(6,f=P.focus),"folded"in P&&i(7,_=P.folded),"symlink"in P&&i(8,v=P.symlink),"dragging"in P&&i(9,b=P.dragging),"draggable"in P&&i(10,g=P.draggable),"hideActions"in P&&i(11,c=P.hideActions),"dragoverTop"in P&&i(12,d=P.dragoverTop),"dragover"in P&&i(13,m=P.dragover),"dragoverBottom"in P&&i(14,p=P.dragoverBottom),"title"in P&&i(15,y=P.title),"children"in P&&i(16,S=P.children),"toggleIcon"in P&&i(17,E=P.toggleIcon),"toggleAriaLabel"in P&&i(18,k=P.toggleAriaLabel),"icon"in P&&i(19,w=P.icon),"iconAriaLabel"in P&&i(20,C=P.iconAriaLabel),"iconPopoverID"in P&&i(21,L=P.iconPopoverID),"text"in P&&i(22,R=P.text),"textAriaLabel"in P&&i(23,O=P.textAriaLabel),"menuIcon"in P&&i(24,T=P.menuIcon),"menuAriaLabel"in P&&i(25,x=P.menuAriaLabel),"symlinkIcon"in P&&i(26,F=P.symlinkIcon),"symlinkAriaLabel"in P&&i(27,Y=P.symlinkAriaLabel),"count"in P&&i(28,q=P.count),"countAriaLabel"in P&&i(29,M=P.countAriaLabel)},e.$$.update=()=>{e.$$.dirty[0]&1&&N.type.set(s),e.$$.dirty[0]&2&&N.name.set(r),e.$$.dirty[0]&4&&N.path.set(n),e.$$.dirty[1]&1024&&N.root.set(l),e.$$.dirty[0]&8&&N.depth.set(o),e.$$.dirty[0]&16&&N.indent.set(a),e.$$.dirty[1]&2048&&N.relative.set(h),e.$$.dirty[0]&32&&N.directory.set(u),e.$$.dirty[0]&64&&N.focus.set(f),e.$$.dirty[0]&128&&N.folded.set(_),e.$$.dirty[0]&256&&N.symlink.set(v),e.$$.dirty[0]&512&&N.dragging.set(b),e.$$.dirty[0]&1024&&N.draggable.set(g),e.$$.dirty[0]&2048&&N.hideActions.set(c),e.$$.dirty[0]&4096&&N.dragoverTop.set(d),e.$$.dirty[0]&8192&&N.dragover.set(m),e.$$.dirty[0]&16384&&N.dragoverBottom.set(p),e.$$.dirty[0]&32768&&N.title.set(y),e.$$.dirty[0]&65536&&N.children.set(S),e.$$.dirty[0]&131072&&N.toggleIcon.set(E),e.$$.dirty[0]&262144&&N.toggleAriaLabel.set(k),e.$$.dirty[0]&524288&&N.icon.set(w),e.$$.dirty[0]&1048576&&N.iconAriaLabel.set(C),e.$$.dirty[0]&2097152&&N.iconPopoverID.set(L),e.$$.dirty[0]&4194304&&N.text.set(R),e.$$.dirty[0]&8388608&&N.textAriaLabel.set(O),e.$$.dirty[0]&16777216&&N.menuIcon.set(T),e.$$.dirty[0]&33554432&&N.menuAriaLabel.set(x),e.$$.dirty[0]&67108864&&N.symlinkIcon.set(F),e.$$.dirty[0]&134217728&&N.symlinkAriaLabel.set(Y),e.$$.dirty[0]&268435456&&N.count.set(q),e.$$.dirty[0]&536870912&&N.countAriaLabel.set(M)},[s,r,n,o,a,u,f,_,v,b,g,c,d,m,p,y,S,E,k,w,C,L,R,O,T,x,F,Y,q,M,B,A,ae,ye,D,V,K,Z,_e,Q,Ee,l,h,He,ze,ht,be,Ht,Si,hi,ui,at,et,Lt,ge]}let Pl=class extends Ve{constructor(t){super(),Ne(this,t,$0,J0,Pe,{type:0,name:1,path:2,root:41,depth:3,indent:4,relative:42,directory:5,focus:6,folded:7,symlink:8,dragging:9,draggable:10,hideActions:11,dragoverTop:12,dragover:13,dragoverBottom:14,title:15,children:16,toggleIcon:17,toggleAriaLabel:18,icon:19,iconAriaLabel:20,iconPopoverID:21,text:22,textAriaLabel:23,menuIcon:24,menuAriaLabel:25,symlinkIcon:26,symlinkAriaLabel:27,count:28,countAriaLabel:29},null,[-1,-1])}};function X0(e){let t,i,s,r;const n=[e[0]];let l={};for(let o=0;o<n.length;o+=1)l=oi(l,n[o]);return i=new Pl({props:l}),i.$on("open",e[1]),i.$on("fold",e[2]),i.$on("menu",e[3]),i.$on("unfold",e[4]),i.$on("dragstart",e[5]),i.$on("dragend",e[6]),i.$on("dragenter",e[7]),i.$on("dragover",e[8]),i.$on("dragleave",e[9]),i.$on("drop",e[10]),{c(){t=re("ul"),ie(i.$$.fragment),I(t,"data-url",s=e[0].path),I(t,"class","b3-list b3-list--background")},m(o,a){J(o,t,a),ee(i,t,null),r=!0},p(o,[a]){const h=a&1?wi(n,[Di(o[0])]):{};i.$set(h),(!r||a&1&&s!==(s=o[0].path))&&I(t,"data-url",s)},i(o){r||(j(i.$$.fragment,o),r=!0)},o(o){W(i.$$.fragment,o),r=!1},d(o){o&&G(t),te(i)}}}function Q0(e,t,i){let{root:s}=t;function r(b){Re.call(this,e,b)}function n(b){Re.call(this,e,b)}function l(b){Re.call(this,e,b)}function o(b){Re.call(this,e,b)}function a(b){Re.call(this,e,b)}function h(b){Re.call(this,e,b)}function u(b){Re.call(this,e,b)}function f(b){Re.call(this,e,b)}function _(b){Re.call(this,e,b)}function v(b){Re.call(this,e,b)}return e.$$set=b=>{"root"in b&&i(0,s=b.root)},[s,r,n,l,o,a,h,u,f,_,v]}class e_ extends Ve{constructor(t){super(),Ne(this,t,Q0,X0,Pe,{root:0})}}function ca(e,t,i){const s=e.slice();return s[11]=t[i],s[13]=i,s}function ha(e,t){let i,s,r;return s=new e_({props:{root:t[11]}}),s.$on("open",t[1]),s.$on("menu",t[2]),s.$on("fold",t[3]),s.$on("unfold",t[4]),s.$on("dragstart",t[5]),s.$on("dragend",t[6]),s.$on("dragenter",t[7]),s.$on("dragover",t[8]),s.$on("dragleave",t[9]),s.$on("drop",t[10]),{key:e,first:null,c(){i=Xe(),ie(s.$$.fragment),this.first=i},m(n,l){J(n,i,l),ee(s,n,l),r=!0},p(n,l){t=n;const o={};l&1&&(o.root=t[11]),s.$set(o)},i(n){r||(j(s.$$.fragment,n),r=!0)},o(n){W(s.$$.fragment,n),r=!1},d(n){n&&G(i),te(s,n)}}}function t_(e){let t,i=[],s=new Map,r,n=ct(e[0]);const l=o=>o[11].path;for(let o=0;o<n.length;o+=1){let a=ca(e,n,o),h=l(a);s.set(h,i[o]=ha(h,a))}return{c(){t=re("div");for(let o=0;o<i.length;o+=1)i[o].c();I(t,"class","fn__flex-1 file-tree")},m(o,a){J(o,t,a);for(let h=0;h<i.length;h+=1)i[h]&&i[h].m(t,null);r=!0},p(o,[a]){a&1&&(n=ct(o[0]),Je(),i=yi(i,a,l,1,o,n,s,t,Ti,ha,null,ca),$e())},i(o){if(!r){for(let a=0;a<n.length;a+=1)j(i[a]);r=!0}},o(o){for(let a=0;a<i.length;a+=1)W(i[a]);r=!1},d(o){o&&G(t);for(let a=0;a<i.length;a+=1)i[a].d()}}}function i_(e,t,i){let{roots:s=[]}=t;function r(b){Re.call(this,e,b)}function n(b){Re.call(this,e,b)}function l(b){Re.call(this,e,b)}function o(b){Re.call(this,e,b)}function a(b){Re.call(this,e,b)}function h(b){Re.call(this,e,b)}function u(b){Re.call(this,e,b)}function f(b){Re.call(this,e,b)}function _(b){Re.call(this,e,b)}function v(b){Re.call(this,e,b)}return e.$$set=b=>{"roots"in b&&i(0,s=b.roots)},[s,r,n,l,o,a,h,u,f,_,v]}class s_ extends Ve{constructor(t){super(),Ne(this,t,i_,t_,Pe,{roots:0})}}function r_(e){return e=e.slice(e.findIndex(t=>t.type!=="separator"),e.findLastIndex(t=>t.type!=="separator")+1),e.length===0||(e=e.filter((t,i,s)=>{var r;return t.type!=="separator"?!0:((r=s[i-1])==null?void 0:r.type)!=="separator"})),e}//! moment.js
//! version : 2.30.1
//! authors : Tim Wood, Iskren Chernev, Moment.js contributors
//! license : MIT
//! momentjs.com
var Il;function oe(){return Il.apply(null,arguments)}function n_(e){Il=e}function Vt(e){return e instanceof Array||Object.prototype.toString.call(e)==="[object Array]"}function Li(e){return e!=null&&Object.prototype.toString.call(e)==="[object Object]"}function Oe(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function Sn(e){if(Object.getOwnPropertyNames)return Object.getOwnPropertyNames(e).length===0;var t;for(t in e)if(Oe(e,t))return!1;return!0}function St(e){return e===void 0}function ni(e){return typeof e=="number"||Object.prototype.toString.call(e)==="[object Number]"}function gs(e){return e instanceof Date||Object.prototype.toString.call(e)==="[object Date]"}function Nl(e,t){var i=[],s,r=e.length;for(s=0;s<r;++s)i.push(t(e[s],s));return i}function mi(e,t){for(var i in t)Oe(t,i)&&(e[i]=t[i]);return Oe(t,"toString")&&(e.toString=t.toString),Oe(t,"valueOf")&&(e.valueOf=t.valueOf),e}function Kt(e,t,i,s){return ac(e,t,i,s,!0).utc()}function o_(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidEra:null,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],era:null,meridiem:null,rfc2822:!1,weekdayMismatch:!1}}function Se(e){return e._pf==null&&(e._pf=o_()),e._pf}var Qr;Array.prototype.some?Qr=Array.prototype.some:Qr=function(e){var t=Object(this),i=t.length>>>0,s;for(s=0;s<i;s++)if(s in t&&e.call(this,t[s],s,t))return!0;return!1};function Cn(e){var t=null,i=!1,s=e._d&&!isNaN(e._d.getTime());if(s&&(t=Se(e),i=Qr.call(t.parsedDateParts,function(r){return r!=null}),s=t.overflow<0&&!t.empty&&!t.invalidEra&&!t.invalidMonth&&!t.invalidWeekday&&!t.weekdayMismatch&&!t.nullInput&&!t.invalidFormat&&!t.userInvalidated&&(!t.meridiem||t.meridiem&&i),e._strict&&(s=s&&t.charsLeftOver===0&&t.unusedTokens.length===0&&t.bigHour===void 0)),Object.isFrozen==null||!Object.isFrozen(e))e._isValid=s;else return s;return e._isValid}function nr(e){var t=Kt(NaN);return e!=null?mi(Se(t),e):Se(t).userInvalidated=!0,t}var ua=oe.momentProperties=[],Tr=!1;function kn(e,t){var i,s,r,n=ua.length;if(St(t._isAMomentObject)||(e._isAMomentObject=t._isAMomentObject),St(t._i)||(e._i=t._i),St(t._f)||(e._f=t._f),St(t._l)||(e._l=t._l),St(t._strict)||(e._strict=t._strict),St(t._tzm)||(e._tzm=t._tzm),St(t._isUTC)||(e._isUTC=t._isUTC),St(t._offset)||(e._offset=t._offset),St(t._pf)||(e._pf=Se(t)),St(t._locale)||(e._locale=t._locale),n>0)for(i=0;i<n;i++)s=ua[i],r=t[s],St(r)||(e[s]=r);return e}function vs(e){kn(this,e),this._d=new Date(e._d!=null?e._d.getTime():NaN),this.isValid()||(this._d=new Date(NaN)),Tr===!1&&(Tr=!0,oe.updateOffset(this),Tr=!1)}function jt(e){return e instanceof vs||e!=null&&e._isAMomentObject!=null}function Vl(e){oe.suppressDeprecationWarnings===!1&&typeof console<"u"&&console.warn&&console.warn("Deprecation warning: "+e)}function Ot(e,t){var i=!0;return mi(function(){if(oe.deprecationHandler!=null&&oe.deprecationHandler(null,e),i){var s=[],r,n,l,o=arguments.length;for(n=0;n<o;n++){if(r="",typeof arguments[n]=="object"){r+=`
[`+n+"] ";for(l in arguments[0])Oe(arguments[0],l)&&(r+=l+": "+arguments[0][l]+", ");r=r.slice(0,-2)}else r=arguments[n];s.push(r)}Vl(e+`
Arguments: `+Array.prototype.slice.call(s).join("")+`
`+new Error().stack),i=!1}return t.apply(this,arguments)},t)}var fa={};function jl(e,t){oe.deprecationHandler!=null&&oe.deprecationHandler(e,t),fa[e]||(Vl(t),fa[e]=!0)}oe.suppressDeprecationWarnings=!1;oe.deprecationHandler=null;function Gt(e){return typeof Function<"u"&&e instanceof Function||Object.prototype.toString.call(e)==="[object Function]"}function a_(e){var t,i;for(i in e)Oe(e,i)&&(t=e[i],Gt(t)?this[i]=t:this["_"+i]=t);this._config=e,this._dayOfMonthOrdinalParseLenient=new RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+"|"+/\d{1,2}/.source)}function en(e,t){var i=mi({},e),s;for(s in t)Oe(t,s)&&(Li(e[s])&&Li(t[s])?(i[s]={},mi(i[s],e[s]),mi(i[s],t[s])):t[s]!=null?i[s]=t[s]:delete i[s]);for(s in e)Oe(e,s)&&!Oe(t,s)&&Li(e[s])&&(i[s]=mi({},i[s]));return i}function En(e){e!=null&&this.set(e)}var tn;Object.keys?tn=Object.keys:tn=function(e){var t,i=[];for(t in e)Oe(e,t)&&i.push(t);return i};var l_={sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"};function c_(e,t,i){var s=this._calendar[e]||this._calendar.sameElse;return Gt(s)?s.call(t,i):s}function qt(e,t,i){var s=""+Math.abs(e),r=t-s.length,n=e>=0;return(n?i?"+":"":"-")+Math.pow(10,Math.max(0,r)).toString().substr(1)+s}var Ln=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|N{1,5}|YYYYYY|YYYYY|YYYY|YY|y{2,4}|yo?|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,Cs=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,Dr={},Vi={};function de(e,t,i,s){var r=s;typeof s=="string"&&(r=function(){return this[s]()}),e&&(Vi[e]=r),t&&(Vi[t[0]]=function(){return qt(r.apply(this,arguments),t[1],t[2])}),i&&(Vi[i]=function(){return this.localeData().ordinal(r.apply(this,arguments),e)})}function h_(e){return e.match(/\[[\s\S]/)?e.replace(/^\[|\]$/g,""):e.replace(/\\/g,"")}function u_(e){var t=e.match(Ln),i,s;for(i=0,s=t.length;i<s;i++)Vi[t[i]]?t[i]=Vi[t[i]]:t[i]=h_(t[i]);return function(r){var n="",l;for(l=0;l<s;l++)n+=Gt(t[l])?t[l].call(r,e):t[l];return n}}function Is(e,t){return e.isValid()?(t=Fl(t,e.localeData()),Dr[t]=Dr[t]||u_(t),Dr[t](e)):e.localeData().invalidDate()}function Fl(e,t){var i=5;function s(r){return t.longDateFormat(r)||r}for(Cs.lastIndex=0;i>=0&&Cs.test(e);)e=e.replace(Cs,s),Cs.lastIndex=0,i-=1;return e}var f_={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"};function d_(e){var t=this._longDateFormat[e],i=this._longDateFormat[e.toUpperCase()];return t||!i?t:(this._longDateFormat[e]=i.match(Ln).map(function(s){return s==="MMMM"||s==="MM"||s==="DD"||s==="dddd"?s.slice(1):s}).join(""),this._longDateFormat[e])}var __="Invalid date";function p_(){return this._invalidDate}var m_="%d",g_=/\d{1,2}/;function v_(e){return this._ordinal.replace("%d",e)}var b_={future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",w:"a week",ww:"%d weeks",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};function y_(e,t,i,s){var r=this._relativeTime[i];return Gt(r)?r(e,t,i,s):r.replace(/%d/i,e)}function w_(e,t){var i=this._relativeTime[e>0?"future":"past"];return Gt(i)?i(t):i.replace(/%s/i,t)}var da={D:"date",dates:"date",date:"date",d:"day",days:"day",day:"day",e:"weekday",weekdays:"weekday",weekday:"weekday",E:"isoWeekday",isoweekdays:"isoWeekday",isoweekday:"isoWeekday",DDD:"dayOfYear",dayofyears:"dayOfYear",dayofyear:"dayOfYear",h:"hour",hours:"hour",hour:"hour",ms:"millisecond",milliseconds:"millisecond",millisecond:"millisecond",m:"minute",minutes:"minute",minute:"minute",M:"month",months:"month",month:"month",Q:"quarter",quarters:"quarter",quarter:"quarter",s:"second",seconds:"second",second:"second",gg:"weekYear",weekyears:"weekYear",weekyear:"weekYear",GG:"isoWeekYear",isoweekyears:"isoWeekYear",isoweekyear:"isoWeekYear",w:"week",weeks:"week",week:"week",W:"isoWeek",isoweeks:"isoWeek",isoweek:"isoWeek",y:"year",years:"year",year:"year"};function Bt(e){return typeof e=="string"?da[e]||da[e.toLowerCase()]:void 0}function Mn(e){var t={},i,s;for(s in e)Oe(e,s)&&(i=Bt(s),i&&(t[i]=e[s]));return t}var S_={date:9,day:11,weekday:11,isoWeekday:11,dayOfYear:4,hour:13,millisecond:16,minute:14,month:8,quarter:7,second:15,weekYear:1,isoWeekYear:1,week:5,isoWeek:5,year:1};function C_(e){var t=[],i;for(i in e)Oe(e,i)&&t.push({unit:i,priority:S_[i]});return t.sort(function(s,r){return s.priority-r.priority}),t}var Ul=/\d/,Et=/\d\d/,Wl=/\d{3}/,Tn=/\d{4}/,or=/[+-]?\d{6}/,Ue=/\d\d?/,zl=/\d\d\d\d?/,Yl=/\d\d\d\d\d\d?/,ar=/\d{1,3}/,Dn=/\d{1,4}/,lr=/[+-]?\d{1,6}/,Ki=/\d+/,cr=/[+-]?\d+/,k_=/Z|[+-]\d\d:?\d\d/gi,hr=/Z|[+-]\d\d(?::?\d\d)?/gi,E_=/[+-]?\d+(\.\d{1,3})?/,bs=/[0-9]{0,256}['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFF07\uFF10-\uFFEF]{1,256}|[\u0600-\u06FF\/]{1,256}(\s*?[\u0600-\u06FF]{1,256}){1,2}/i,Gi=/^[1-9]\d?/,An=/^([1-9]\d|\d)/,Ws;Ws={};function ue(e,t,i){Ws[e]=Gt(t)?t:function(s,r){return s&&i?i:t}}function L_(e,t){return Oe(Ws,e)?Ws[e](t._strict,t._locale):new RegExp(M_(e))}function M_(e){return ii(e.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(t,i,s,r,n){return i||s||r||n}))}function ii(e){return e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function At(e){return e<0?Math.ceil(e)||0:Math.floor(e)}function Me(e){var t=+e,i=0;return t!==0&&isFinite(t)&&(i=At(t)),i}var sn={};function je(e,t){var i,s=t,r;for(typeof e=="string"&&(e=[e]),ni(t)&&(s=function(n,l){l[t]=Me(n)}),r=e.length,i=0;i<r;i++)sn[e[i]]=s}function ys(e,t){je(e,function(i,s,r,n){r._w=r._w||{},t(i,r._w,r,n)})}function T_(e,t,i){t!=null&&Oe(sn,e)&&sn[e](t,i._a,i,e)}function ur(e){return e%4===0&&e%100!==0||e%400===0}var vt=0,Qt=1,zt=2,ot=3,Pt=4,ei=5,Ei=6,D_=7,A_=8;de("Y",0,0,function(){var e=this.year();return e<=9999?qt(e,4):"+"+e});de(0,["YY",2],0,function(){return this.year()%100});de(0,["YYYY",4],0,"year");de(0,["YYYYY",5],0,"year");de(0,["YYYYYY",6,!0],0,"year");ue("Y",cr);ue("YY",Ue,Et);ue("YYYY",Dn,Tn);ue("YYYYY",lr,or);ue("YYYYYY",lr,or);je(["YYYYY","YYYYYY"],vt);je("YYYY",function(e,t){t[vt]=e.length===2?oe.parseTwoDigitYear(e):Me(e)});je("YY",function(e,t){t[vt]=oe.parseTwoDigitYear(e)});je("Y",function(e,t){t[vt]=parseInt(e,10)});function os(e){return ur(e)?366:365}oe.parseTwoDigitYear=function(e){return Me(e)+(Me(e)>68?1900:2e3)};var ql=Ji("FullYear",!0);function R_(){return ur(this.year())}function Ji(e,t){return function(i){return i!=null?(Zl(this,e,i),oe.updateOffset(this,t),this):hs(this,e)}}function hs(e,t){if(!e.isValid())return NaN;var i=e._d,s=e._isUTC;switch(t){case"Milliseconds":return s?i.getUTCMilliseconds():i.getMilliseconds();case"Seconds":return s?i.getUTCSeconds():i.getSeconds();case"Minutes":return s?i.getUTCMinutes():i.getMinutes();case"Hours":return s?i.getUTCHours():i.getHours();case"Date":return s?i.getUTCDate():i.getDate();case"Day":return s?i.getUTCDay():i.getDay();case"Month":return s?i.getUTCMonth():i.getMonth();case"FullYear":return s?i.getUTCFullYear():i.getFullYear();default:return NaN}}function Zl(e,t,i){var s,r,n,l,o;if(!(!e.isValid()||isNaN(i))){switch(s=e._d,r=e._isUTC,t){case"Milliseconds":return void(r?s.setUTCMilliseconds(i):s.setMilliseconds(i));case"Seconds":return void(r?s.setUTCSeconds(i):s.setSeconds(i));case"Minutes":return void(r?s.setUTCMinutes(i):s.setMinutes(i));case"Hours":return void(r?s.setUTCHours(i):s.setHours(i));case"Date":return void(r?s.setUTCDate(i):s.setDate(i));case"FullYear":break;default:return}n=i,l=e.month(),o=e.date(),o=o===29&&l===1&&!ur(n)?28:o,r?s.setUTCFullYear(n,l,o):s.setFullYear(n,l,o)}}function O_(e){return e=Bt(e),Gt(this[e])?this[e]():this}function B_(e,t){if(typeof e=="object"){e=Mn(e);var i=C_(e),s,r=i.length;for(s=0;s<r;s++)this[i[s].unit](e[i[s].unit])}else if(e=Bt(e),Gt(this[e]))return this[e](t);return this}function H_(e,t){return(e%t+t)%t}var tt;Array.prototype.indexOf?tt=Array.prototype.indexOf:tt=function(e){var t;for(t=0;t<this.length;++t)if(this[t]===e)return t;return-1};function Rn(e,t){if(isNaN(e)||isNaN(t))return NaN;var i=H_(t,12);return e+=(t-i)/12,i===1?ur(e)?29:28:31-i%7%2}de("M",["MM",2],"Mo",function(){return this.month()+1});de("MMM",0,0,function(e){return this.localeData().monthsShort(this,e)});de("MMMM",0,0,function(e){return this.localeData().months(this,e)});ue("M",Ue,Gi);ue("MM",Ue,Et);ue("MMM",function(e,t){return t.monthsShortRegex(e)});ue("MMMM",function(e,t){return t.monthsRegex(e)});je(["M","MM"],function(e,t){t[Qt]=Me(e)-1});je(["MMM","MMMM"],function(e,t,i,s){var r=i._locale.monthsParse(e,s,i._strict);r!=null?t[Qt]=r:Se(i).invalidMonth=e});var x_="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),Kl="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),Gl=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/,P_=bs,I_=bs;function N_(e,t){return e?Vt(this._months)?this._months[e.month()]:this._months[(this._months.isFormat||Gl).test(t)?"format":"standalone"][e.month()]:Vt(this._months)?this._months:this._months.standalone}function V_(e,t){return e?Vt(this._monthsShort)?this._monthsShort[e.month()]:this._monthsShort[Gl.test(t)?"format":"standalone"][e.month()]:Vt(this._monthsShort)?this._monthsShort:this._monthsShort.standalone}function j_(e,t,i){var s,r,n,l=e.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],s=0;s<12;++s)n=Kt([2e3,s]),this._shortMonthsParse[s]=this.monthsShort(n,"").toLocaleLowerCase(),this._longMonthsParse[s]=this.months(n,"").toLocaleLowerCase();return i?t==="MMM"?(r=tt.call(this._shortMonthsParse,l),r!==-1?r:null):(r=tt.call(this._longMonthsParse,l),r!==-1?r:null):t==="MMM"?(r=tt.call(this._shortMonthsParse,l),r!==-1?r:(r=tt.call(this._longMonthsParse,l),r!==-1?r:null)):(r=tt.call(this._longMonthsParse,l),r!==-1?r:(r=tt.call(this._shortMonthsParse,l),r!==-1?r:null))}function F_(e,t,i){var s,r,n;if(this._monthsParseExact)return j_.call(this,e,t,i);for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),s=0;s<12;s++){if(r=Kt([2e3,s]),i&&!this._longMonthsParse[s]&&(this._longMonthsParse[s]=new RegExp("^"+this.months(r,"").replace(".","")+"$","i"),this._shortMonthsParse[s]=new RegExp("^"+this.monthsShort(r,"").replace(".","")+"$","i")),!i&&!this._monthsParse[s]&&(n="^"+this.months(r,"")+"|^"+this.monthsShort(r,""),this._monthsParse[s]=new RegExp(n.replace(".",""),"i")),i&&t==="MMMM"&&this._longMonthsParse[s].test(e))return s;if(i&&t==="MMM"&&this._shortMonthsParse[s].test(e))return s;if(!i&&this._monthsParse[s].test(e))return s}}function Jl(e,t){if(!e.isValid())return e;if(typeof t=="string"){if(/^\d+$/.test(t))t=Me(t);else if(t=e.localeData().monthsParse(t),!ni(t))return e}var i=t,s=e.date();return s=s<29?s:Math.min(s,Rn(e.year(),i)),e._isUTC?e._d.setUTCMonth(i,s):e._d.setMonth(i,s),e}function $l(e){return e!=null?(Jl(this,e),oe.updateOffset(this,!0),this):hs(this,"Month")}function U_(){return Rn(this.year(),this.month())}function W_(e){return this._monthsParseExact?(Oe(this,"_monthsRegex")||Xl.call(this),e?this._monthsShortStrictRegex:this._monthsShortRegex):(Oe(this,"_monthsShortRegex")||(this._monthsShortRegex=P_),this._monthsShortStrictRegex&&e?this._monthsShortStrictRegex:this._monthsShortRegex)}function z_(e){return this._monthsParseExact?(Oe(this,"_monthsRegex")||Xl.call(this),e?this._monthsStrictRegex:this._monthsRegex):(Oe(this,"_monthsRegex")||(this._monthsRegex=I_),this._monthsStrictRegex&&e?this._monthsStrictRegex:this._monthsRegex)}function Xl(){function e(a,h){return h.length-a.length}var t=[],i=[],s=[],r,n,l,o;for(r=0;r<12;r++)n=Kt([2e3,r]),l=ii(this.monthsShort(n,"")),o=ii(this.months(n,"")),t.push(l),i.push(o),s.push(o),s.push(l);t.sort(e),i.sort(e),s.sort(e),this._monthsRegex=new RegExp("^("+s.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp("^("+i.join("|")+")","i"),this._monthsShortStrictRegex=new RegExp("^("+t.join("|")+")","i")}function Y_(e,t,i,s,r,n,l){var o;return e<100&&e>=0?(o=new Date(e+400,t,i,s,r,n,l),isFinite(o.getFullYear())&&o.setFullYear(e)):o=new Date(e,t,i,s,r,n,l),o}function us(e){var t,i;return e<100&&e>=0?(i=Array.prototype.slice.call(arguments),i[0]=e+400,t=new Date(Date.UTC.apply(null,i)),isFinite(t.getUTCFullYear())&&t.setUTCFullYear(e)):t=new Date(Date.UTC.apply(null,arguments)),t}function zs(e,t,i){var s=7+t-i,r=(7+us(e,0,s).getUTCDay()-t)%7;return-r+s-1}function Ql(e,t,i,s,r){var n=(7+i-s)%7,l=zs(e,s,r),o=1+7*(t-1)+n+l,a,h;return o<=0?(a=e-1,h=os(a)+o):o>os(e)?(a=e+1,h=o-os(e)):(a=e,h=o),{year:a,dayOfYear:h}}function fs(e,t,i){var s=zs(e.year(),t,i),r=Math.floor((e.dayOfYear()-s-1)/7)+1,n,l;return r<1?(l=e.year()-1,n=r+si(l,t,i)):r>si(e.year(),t,i)?(n=r-si(e.year(),t,i),l=e.year()+1):(l=e.year(),n=r),{week:n,year:l}}function si(e,t,i){var s=zs(e,t,i),r=zs(e+1,t,i);return(os(e)-s+r)/7}de("w",["ww",2],"wo","week");de("W",["WW",2],"Wo","isoWeek");ue("w",Ue,Gi);ue("ww",Ue,Et);ue("W",Ue,Gi);ue("WW",Ue,Et);ys(["w","ww","W","WW"],function(e,t,i,s){t[s.substr(0,1)]=Me(e)});function q_(e){return fs(e,this._week.dow,this._week.doy).week}var Z_={dow:0,doy:6};function K_(){return this._week.dow}function G_(){return this._week.doy}function J_(e){var t=this.localeData().week(this);return e==null?t:this.add((e-t)*7,"d")}function $_(e){var t=fs(this,1,4).week;return e==null?t:this.add((e-t)*7,"d")}de("d",0,"do","day");de("dd",0,0,function(e){return this.localeData().weekdaysMin(this,e)});de("ddd",0,0,function(e){return this.localeData().weekdaysShort(this,e)});de("dddd",0,0,function(e){return this.localeData().weekdays(this,e)});de("e",0,0,"weekday");de("E",0,0,"isoWeekday");ue("d",Ue);ue("e",Ue);ue("E",Ue);ue("dd",function(e,t){return t.weekdaysMinRegex(e)});ue("ddd",function(e,t){return t.weekdaysShortRegex(e)});ue("dddd",function(e,t){return t.weekdaysRegex(e)});ys(["dd","ddd","dddd"],function(e,t,i,s){var r=i._locale.weekdaysParse(e,s,i._strict);r!=null?t.d=r:Se(i).invalidWeekday=e});ys(["d","e","E"],function(e,t,i,s){t[s]=Me(e)});function X_(e,t){return typeof e!="string"?e:isNaN(e)?(e=t.weekdaysParse(e),typeof e=="number"?e:null):parseInt(e,10)}function Q_(e,t){return typeof e=="string"?t.weekdaysParse(e)%7||7:isNaN(e)?null:e}function On(e,t){return e.slice(t,7).concat(e.slice(0,t))}var e2="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),ec="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),t2="Su_Mo_Tu_We_Th_Fr_Sa".split("_"),i2=bs,s2=bs,r2=bs;function n2(e,t){var i=Vt(this._weekdays)?this._weekdays:this._weekdays[e&&e!==!0&&this._weekdays.isFormat.test(t)?"format":"standalone"];return e===!0?On(i,this._week.dow):e?i[e.day()]:i}function o2(e){return e===!0?On(this._weekdaysShort,this._week.dow):e?this._weekdaysShort[e.day()]:this._weekdaysShort}function a2(e){return e===!0?On(this._weekdaysMin,this._week.dow):e?this._weekdaysMin[e.day()]:this._weekdaysMin}function l2(e,t,i){var s,r,n,l=e.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],s=0;s<7;++s)n=Kt([2e3,1]).day(s),this._minWeekdaysParse[s]=this.weekdaysMin(n,"").toLocaleLowerCase(),this._shortWeekdaysParse[s]=this.weekdaysShort(n,"").toLocaleLowerCase(),this._weekdaysParse[s]=this.weekdays(n,"").toLocaleLowerCase();return i?t==="dddd"?(r=tt.call(this._weekdaysParse,l),r!==-1?r:null):t==="ddd"?(r=tt.call(this._shortWeekdaysParse,l),r!==-1?r:null):(r=tt.call(this._minWeekdaysParse,l),r!==-1?r:null):t==="dddd"?(r=tt.call(this._weekdaysParse,l),r!==-1||(r=tt.call(this._shortWeekdaysParse,l),r!==-1)?r:(r=tt.call(this._minWeekdaysParse,l),r!==-1?r:null)):t==="ddd"?(r=tt.call(this._shortWeekdaysParse,l),r!==-1||(r=tt.call(this._weekdaysParse,l),r!==-1)?r:(r=tt.call(this._minWeekdaysParse,l),r!==-1?r:null)):(r=tt.call(this._minWeekdaysParse,l),r!==-1||(r=tt.call(this._weekdaysParse,l),r!==-1)?r:(r=tt.call(this._shortWeekdaysParse,l),r!==-1?r:null))}function c2(e,t,i){var s,r,n;if(this._weekdaysParseExact)return l2.call(this,e,t,i);for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),s=0;s<7;s++){if(r=Kt([2e3,1]).day(s),i&&!this._fullWeekdaysParse[s]&&(this._fullWeekdaysParse[s]=new RegExp("^"+this.weekdays(r,"").replace(".","\\.?")+"$","i"),this._shortWeekdaysParse[s]=new RegExp("^"+this.weekdaysShort(r,"").replace(".","\\.?")+"$","i"),this._minWeekdaysParse[s]=new RegExp("^"+this.weekdaysMin(r,"").replace(".","\\.?")+"$","i")),this._weekdaysParse[s]||(n="^"+this.weekdays(r,"")+"|^"+this.weekdaysShort(r,"")+"|^"+this.weekdaysMin(r,""),this._weekdaysParse[s]=new RegExp(n.replace(".",""),"i")),i&&t==="dddd"&&this._fullWeekdaysParse[s].test(e))return s;if(i&&t==="ddd"&&this._shortWeekdaysParse[s].test(e))return s;if(i&&t==="dd"&&this._minWeekdaysParse[s].test(e))return s;if(!i&&this._weekdaysParse[s].test(e))return s}}function h2(e){if(!this.isValid())return e!=null?this:NaN;var t=hs(this,"Day");return e!=null?(e=X_(e,this.localeData()),this.add(e-t,"d")):t}function u2(e){if(!this.isValid())return e!=null?this:NaN;var t=(this.day()+7-this.localeData()._week.dow)%7;return e==null?t:this.add(e-t,"d")}function f2(e){if(!this.isValid())return e!=null?this:NaN;if(e!=null){var t=Q_(e,this.localeData());return this.day(this.day()%7?t:t-7)}else return this.day()||7}function d2(e){return this._weekdaysParseExact?(Oe(this,"_weekdaysRegex")||Bn.call(this),e?this._weekdaysStrictRegex:this._weekdaysRegex):(Oe(this,"_weekdaysRegex")||(this._weekdaysRegex=i2),this._weekdaysStrictRegex&&e?this._weekdaysStrictRegex:this._weekdaysRegex)}function _2(e){return this._weekdaysParseExact?(Oe(this,"_weekdaysRegex")||Bn.call(this),e?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):(Oe(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=s2),this._weekdaysShortStrictRegex&&e?this._weekdaysShortStrictRegex:this._weekdaysShortRegex)}function p2(e){return this._weekdaysParseExact?(Oe(this,"_weekdaysRegex")||Bn.call(this),e?this._weekdaysMinStrictRegex:this._weekdaysMinRegex):(Oe(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=r2),this._weekdaysMinStrictRegex&&e?this._weekdaysMinStrictRegex:this._weekdaysMinRegex)}function Bn(){function e(u,f){return f.length-u.length}var t=[],i=[],s=[],r=[],n,l,o,a,h;for(n=0;n<7;n++)l=Kt([2e3,1]).day(n),o=ii(this.weekdaysMin(l,"")),a=ii(this.weekdaysShort(l,"")),h=ii(this.weekdays(l,"")),t.push(o),i.push(a),s.push(h),r.push(o),r.push(a),r.push(h);t.sort(e),i.sort(e),s.sort(e),r.sort(e),this._weekdaysRegex=new RegExp("^("+r.join("|")+")","i"),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=new RegExp("^("+s.join("|")+")","i"),this._weekdaysShortStrictRegex=new RegExp("^("+i.join("|")+")","i"),this._weekdaysMinStrictRegex=new RegExp("^("+t.join("|")+")","i")}function Hn(){return this.hours()%12||12}function m2(){return this.hours()||24}de("H",["HH",2],0,"hour");de("h",["hh",2],0,Hn);de("k",["kk",2],0,m2);de("hmm",0,0,function(){return""+Hn.apply(this)+qt(this.minutes(),2)});de("hmmss",0,0,function(){return""+Hn.apply(this)+qt(this.minutes(),2)+qt(this.seconds(),2)});de("Hmm",0,0,function(){return""+this.hours()+qt(this.minutes(),2)});de("Hmmss",0,0,function(){return""+this.hours()+qt(this.minutes(),2)+qt(this.seconds(),2)});function tc(e,t){de(e,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),t)})}tc("a",!0);tc("A",!1);function ic(e,t){return t._meridiemParse}ue("a",ic);ue("A",ic);ue("H",Ue,An);ue("h",Ue,Gi);ue("k",Ue,Gi);ue("HH",Ue,Et);ue("hh",Ue,Et);ue("kk",Ue,Et);ue("hmm",zl);ue("hmmss",Yl);ue("Hmm",zl);ue("Hmmss",Yl);je(["H","HH"],ot);je(["k","kk"],function(e,t,i){var s=Me(e);t[ot]=s===24?0:s});je(["a","A"],function(e,t,i){i._isPm=i._locale.isPM(e),i._meridiem=e});je(["h","hh"],function(e,t,i){t[ot]=Me(e),Se(i).bigHour=!0});je("hmm",function(e,t,i){var s=e.length-2;t[ot]=Me(e.substr(0,s)),t[Pt]=Me(e.substr(s)),Se(i).bigHour=!0});je("hmmss",function(e,t,i){var s=e.length-4,r=e.length-2;t[ot]=Me(e.substr(0,s)),t[Pt]=Me(e.substr(s,2)),t[ei]=Me(e.substr(r)),Se(i).bigHour=!0});je("Hmm",function(e,t,i){var s=e.length-2;t[ot]=Me(e.substr(0,s)),t[Pt]=Me(e.substr(s))});je("Hmmss",function(e,t,i){var s=e.length-4,r=e.length-2;t[ot]=Me(e.substr(0,s)),t[Pt]=Me(e.substr(s,2)),t[ei]=Me(e.substr(r))});function g2(e){return(e+"").toLowerCase().charAt(0)==="p"}var v2=/[ap]\.?m?\.?/i,b2=Ji("Hours",!0);function y2(e,t,i){return e>11?i?"pm":"PM":i?"am":"AM"}var sc={calendar:l_,longDateFormat:f_,invalidDate:__,ordinal:m_,dayOfMonthOrdinalParse:g_,relativeTime:b_,months:x_,monthsShort:Kl,week:Z_,weekdays:e2,weekdaysMin:t2,weekdaysShort:ec,meridiemParse:v2},We={},Qi={},ds;function w2(e,t){var i,s=Math.min(e.length,t.length);for(i=0;i<s;i+=1)if(e[i]!==t[i])return i;return s}function _a(e){return e&&e.toLowerCase().replace("_","-")}function S2(e){for(var t=0,i,s,r,n;t<e.length;){for(n=_a(e[t]).split("-"),i=n.length,s=_a(e[t+1]),s=s?s.split("-"):null;i>0;){if(r=fr(n.slice(0,i).join("-")),r)return r;if(s&&s.length>=i&&w2(n,s)>=i-1)break;i--}t++}return ds}function C2(e){return!!(e&&e.match("^[^/\\\\]*$"))}function fr(e){var t=null,i;if(We[e]===void 0&&typeof module<"u"&&module&&module.exports&&C2(e))try{t=ds._abbr,i=require,i("./locale/"+e),bi(t)}catch{We[e]=null}return We[e]}function bi(e,t){var i;return e&&(St(t)?i=li(e):i=xn(e,t),i?ds=i:typeof console<"u"&&console.warn&&console.warn("Locale "+e+" not found. Did you forget to load it?")),ds._abbr}function xn(e,t){if(t!==null){var i,s=sc;if(t.abbr=e,We[e]!=null)jl("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),s=We[e]._config;else if(t.parentLocale!=null)if(We[t.parentLocale]!=null)s=We[t.parentLocale]._config;else if(i=fr(t.parentLocale),i!=null)s=i._config;else return Qi[t.parentLocale]||(Qi[t.parentLocale]=[]),Qi[t.parentLocale].push({name:e,config:t}),null;return We[e]=new En(en(s,t)),Qi[e]&&Qi[e].forEach(function(r){xn(r.name,r.config)}),bi(e),We[e]}else return delete We[e],null}function k2(e,t){if(t!=null){var i,s,r=sc;We[e]!=null&&We[e].parentLocale!=null?We[e].set(en(We[e]._config,t)):(s=fr(e),s!=null&&(r=s._config),t=en(r,t),s==null&&(t.abbr=e),i=new En(t),i.parentLocale=We[e],We[e]=i),bi(e)}else We[e]!=null&&(We[e].parentLocale!=null?(We[e]=We[e].parentLocale,e===bi()&&bi(e)):We[e]!=null&&delete We[e]);return We[e]}function li(e){var t;if(e&&e._locale&&e._locale._abbr&&(e=e._locale._abbr),!e)return ds;if(!Vt(e)){if(t=fr(e),t)return t;e=[e]}return S2(e)}function E2(){return tn(We)}function Pn(e){var t,i=e._a;return i&&Se(e).overflow===-2&&(t=i[Qt]<0||i[Qt]>11?Qt:i[zt]<1||i[zt]>Rn(i[vt],i[Qt])?zt:i[ot]<0||i[ot]>24||i[ot]===24&&(i[Pt]!==0||i[ei]!==0||i[Ei]!==0)?ot:i[Pt]<0||i[Pt]>59?Pt:i[ei]<0||i[ei]>59?ei:i[Ei]<0||i[Ei]>999?Ei:-1,Se(e)._overflowDayOfYear&&(t<vt||t>zt)&&(t=zt),Se(e)._overflowWeeks&&t===-1&&(t=D_),Se(e)._overflowWeekday&&t===-1&&(t=A_),Se(e).overflow=t),e}var L2=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,M2=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d|))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,T2=/Z|[+-]\d\d(?::?\d\d)?/,ks=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/],["YYYYMM",/\d{6}/,!1],["YYYY",/\d{4}/,!1]],Ar=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],D2=/^\/?Date\((-?\d+)/i,A2=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\d{4}))$/,R2={UT:0,GMT:0,EDT:-4*60,EST:-5*60,CDT:-5*60,CST:-6*60,MDT:-6*60,MST:-7*60,PDT:-7*60,PST:-8*60};function rc(e){var t,i,s=e._i,r=L2.exec(s)||M2.exec(s),n,l,o,a,h=ks.length,u=Ar.length;if(r){for(Se(e).iso=!0,t=0,i=h;t<i;t++)if(ks[t][1].exec(r[1])){l=ks[t][0],n=ks[t][2]!==!1;break}if(l==null){e._isValid=!1;return}if(r[3]){for(t=0,i=u;t<i;t++)if(Ar[t][1].exec(r[3])){o=(r[2]||" ")+Ar[t][0];break}if(o==null){e._isValid=!1;return}}if(!n&&o!=null){e._isValid=!1;return}if(r[4])if(T2.exec(r[4]))a="Z";else{e._isValid=!1;return}e._f=l+(o||"")+(a||""),Nn(e)}else e._isValid=!1}function O2(e,t,i,s,r,n){var l=[B2(e),Kl.indexOf(t),parseInt(i,10),parseInt(s,10),parseInt(r,10)];return n&&l.push(parseInt(n,10)),l}function B2(e){var t=parseInt(e,10);return t<=49?2e3+t:t<=999?1900+t:t}function H2(e){return e.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").replace(/^\s\s*/,"").replace(/\s\s*$/,"")}function x2(e,t,i){if(e){var s=ec.indexOf(e),r=new Date(t[0],t[1],t[2]).getDay();if(s!==r)return Se(i).weekdayMismatch=!0,i._isValid=!1,!1}return!0}function P2(e,t,i){if(e)return R2[e];if(t)return 0;var s=parseInt(i,10),r=s%100,n=(s-r)/100;return n*60+r}function nc(e){var t=A2.exec(H2(e._i)),i;if(t){if(i=O2(t[4],t[3],t[2],t[5],t[6],t[7]),!x2(t[1],i,e))return;e._a=i,e._tzm=P2(t[8],t[9],t[10]),e._d=us.apply(null,e._a),e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm),Se(e).rfc2822=!0}else e._isValid=!1}function I2(e){var t=D2.exec(e._i);if(t!==null){e._d=new Date(+t[1]);return}if(rc(e),e._isValid===!1)delete e._isValid;else return;if(nc(e),e._isValid===!1)delete e._isValid;else return;e._strict?e._isValid=!1:oe.createFromInputFallback(e)}oe.createFromInputFallback=Ot("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are discouraged. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",function(e){e._d=new Date(e._i+(e._useUTC?" UTC":""))});function Pi(e,t,i){return e??t??i}function N2(e){var t=new Date(oe.now());return e._useUTC?[t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate()]:[t.getFullYear(),t.getMonth(),t.getDate()]}function In(e){var t,i,s=[],r,n,l;if(!e._d){for(r=N2(e),e._w&&e._a[zt]==null&&e._a[Qt]==null&&V2(e),e._dayOfYear!=null&&(l=Pi(e._a[vt],r[vt]),(e._dayOfYear>os(l)||e._dayOfYear===0)&&(Se(e)._overflowDayOfYear=!0),i=us(l,0,e._dayOfYear),e._a[Qt]=i.getUTCMonth(),e._a[zt]=i.getUTCDate()),t=0;t<3&&e._a[t]==null;++t)e._a[t]=s[t]=r[t];for(;t<7;t++)e._a[t]=s[t]=e._a[t]==null?t===2?1:0:e._a[t];e._a[ot]===24&&e._a[Pt]===0&&e._a[ei]===0&&e._a[Ei]===0&&(e._nextDay=!0,e._a[ot]=0),e._d=(e._useUTC?us:Y_).apply(null,s),n=e._useUTC?e._d.getUTCDay():e._d.getDay(),e._tzm!=null&&e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm),e._nextDay&&(e._a[ot]=24),e._w&&typeof e._w.d<"u"&&e._w.d!==n&&(Se(e).weekdayMismatch=!0)}}function V2(e){var t,i,s,r,n,l,o,a,h;t=e._w,t.GG!=null||t.W!=null||t.E!=null?(n=1,l=4,i=Pi(t.GG,e._a[vt],fs(Fe(),1,4).year),s=Pi(t.W,1),r=Pi(t.E,1),(r<1||r>7)&&(a=!0)):(n=e._locale._week.dow,l=e._locale._week.doy,h=fs(Fe(),n,l),i=Pi(t.gg,e._a[vt],h.year),s=Pi(t.w,h.week),t.d!=null?(r=t.d,(r<0||r>6)&&(a=!0)):t.e!=null?(r=t.e+n,(t.e<0||t.e>6)&&(a=!0)):r=n),s<1||s>si(i,n,l)?Se(e)._overflowWeeks=!0:a!=null?Se(e)._overflowWeekday=!0:(o=Ql(i,s,r,n,l),e._a[vt]=o.year,e._dayOfYear=o.dayOfYear)}oe.ISO_8601=function(){};oe.RFC_2822=function(){};function Nn(e){if(e._f===oe.ISO_8601){rc(e);return}if(e._f===oe.RFC_2822){nc(e);return}e._a=[],Se(e).empty=!0;var t=""+e._i,i,s,r,n,l,o=t.length,a=0,h,u;for(r=Fl(e._f,e._locale).match(Ln)||[],u=r.length,i=0;i<u;i++)n=r[i],s=(t.match(L_(n,e))||[])[0],s&&(l=t.substr(0,t.indexOf(s)),l.length>0&&Se(e).unusedInput.push(l),t=t.slice(t.indexOf(s)+s.length),a+=s.length),Vi[n]?(s?Se(e).empty=!1:Se(e).unusedTokens.push(n),T_(n,s,e)):e._strict&&!s&&Se(e).unusedTokens.push(n);Se(e).charsLeftOver=o-a,t.length>0&&Se(e).unusedInput.push(t),e._a[ot]<=12&&Se(e).bigHour===!0&&e._a[ot]>0&&(Se(e).bigHour=void 0),Se(e).parsedDateParts=e._a.slice(0),Se(e).meridiem=e._meridiem,e._a[ot]=j2(e._locale,e._a[ot],e._meridiem),h=Se(e).era,h!==null&&(e._a[vt]=e._locale.erasConvertYear(h,e._a[vt])),In(e),Pn(e)}function j2(e,t,i){var s;return i==null?t:e.meridiemHour!=null?e.meridiemHour(t,i):(e.isPM!=null&&(s=e.isPM(i),s&&t<12&&(t+=12),!s&&t===12&&(t=0)),t)}function F2(e){var t,i,s,r,n,l,o=!1,a=e._f.length;if(a===0){Se(e).invalidFormat=!0,e._d=new Date(NaN);return}for(r=0;r<a;r++)n=0,l=!1,t=kn({},e),e._useUTC!=null&&(t._useUTC=e._useUTC),t._f=e._f[r],Nn(t),Cn(t)&&(l=!0),n+=Se(t).charsLeftOver,n+=Se(t).unusedTokens.length*10,Se(t).score=n,o?n<s&&(s=n,i=t):(s==null||n<s||l)&&(s=n,i=t,l&&(o=!0));mi(e,i||t)}function U2(e){if(!e._d){var t=Mn(e._i),i=t.day===void 0?t.date:t.day;e._a=Nl([t.year,t.month,i,t.hour,t.minute,t.second,t.millisecond],function(s){return s&&parseInt(s,10)}),In(e)}}function W2(e){var t=new vs(Pn(oc(e)));return t._nextDay&&(t.add(1,"d"),t._nextDay=void 0),t}function oc(e){var t=e._i,i=e._f;return e._locale=e._locale||li(e._l),t===null||i===void 0&&t===""?nr({nullInput:!0}):(typeof t=="string"&&(e._i=t=e._locale.preparse(t)),jt(t)?new vs(Pn(t)):(gs(t)?e._d=t:Vt(i)?F2(e):i?Nn(e):z2(e),Cn(e)||(e._d=null),e))}function z2(e){var t=e._i;St(t)?e._d=new Date(oe.now()):gs(t)?e._d=new Date(t.valueOf()):typeof t=="string"?I2(e):Vt(t)?(e._a=Nl(t.slice(0),function(i){return parseInt(i,10)}),In(e)):Li(t)?U2(e):ni(t)?e._d=new Date(t):oe.createFromInputFallback(e)}function ac(e,t,i,s,r){var n={};return(t===!0||t===!1)&&(s=t,t=void 0),(i===!0||i===!1)&&(s=i,i=void 0),(Li(e)&&Sn(e)||Vt(e)&&e.length===0)&&(e=void 0),n._isAMomentObject=!0,n._useUTC=n._isUTC=r,n._l=i,n._i=e,n._f=t,n._strict=s,W2(n)}function Fe(e,t,i,s){return ac(e,t,i,s,!1)}var Y2=Ot("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var e=Fe.apply(null,arguments);return this.isValid()&&e.isValid()?e<this?this:e:nr()}),q2=Ot("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var e=Fe.apply(null,arguments);return this.isValid()&&e.isValid()?e>this?this:e:nr()});function lc(e,t){var i,s;if(t.length===1&&Vt(t[0])&&(t=t[0]),!t.length)return Fe();for(i=t[0],s=1;s<t.length;++s)(!t[s].isValid()||t[s][e](i))&&(i=t[s]);return i}function Z2(){var e=[].slice.call(arguments,0);return lc("isBefore",e)}function K2(){var e=[].slice.call(arguments,0);return lc("isAfter",e)}var G2=function(){return Date.now?Date.now():+new Date},es=["year","quarter","month","week","day","hour","minute","second","millisecond"];function J2(e){var t,i=!1,s,r=es.length;for(t in e)if(Oe(e,t)&&!(tt.call(es,t)!==-1&&(e[t]==null||!isNaN(e[t]))))return!1;for(s=0;s<r;++s)if(e[es[s]]){if(i)return!1;parseFloat(e[es[s]])!==Me(e[es[s]])&&(i=!0)}return!0}function $2(){return this._isValid}function X2(){return Ft(NaN)}function dr(e){var t=Mn(e),i=t.year||0,s=t.quarter||0,r=t.month||0,n=t.week||t.isoWeek||0,l=t.day||0,o=t.hour||0,a=t.minute||0,h=t.second||0,u=t.millisecond||0;this._isValid=J2(t),this._milliseconds=+u+h*1e3+a*6e4+o*1e3*60*60,this._days=+l+n*7,this._months=+r+s*3+i*12,this._data={},this._locale=li(),this._bubble()}function Ns(e){return e instanceof dr}function rn(e){return e<0?Math.round(-1*e)*-1:Math.round(e)}function Q2(e,t,i){var s=Math.min(e.length,t.length),r=Math.abs(e.length-t.length),n=0,l;for(l=0;l<s;l++)(i&&e[l]!==t[l]||!i&&Me(e[l])!==Me(t[l]))&&n++;return n+r}function cc(e,t){de(e,0,0,function(){var i=this.utcOffset(),s="+";return i<0&&(i=-i,s="-"),s+qt(~~(i/60),2)+t+qt(~~i%60,2)})}cc("Z",":");cc("ZZ","");ue("Z",hr);ue("ZZ",hr);je(["Z","ZZ"],function(e,t,i){i._useUTC=!0,i._tzm=Vn(hr,e)});var ep=/([\+\-]|\d\d)/gi;function Vn(e,t){var i=(t||"").match(e),s,r,n;return i===null?null:(s=i[i.length-1]||[],r=(s+"").match(ep)||["-",0,0],n=+(r[1]*60)+Me(r[2]),n===0?0:r[0]==="+"?n:-n)}function jn(e,t){var i,s;return t._isUTC?(i=t.clone(),s=(jt(e)||gs(e)?e.valueOf():Fe(e).valueOf())-i.valueOf(),i._d.setTime(i._d.valueOf()+s),oe.updateOffset(i,!1),i):Fe(e).local()}function nn(e){return-Math.round(e._d.getTimezoneOffset())}oe.updateOffset=function(){};function tp(e,t,i){var s=this._offset||0,r;if(!this.isValid())return e!=null?this:NaN;if(e!=null){if(typeof e=="string"){if(e=Vn(hr,e),e===null)return this}else Math.abs(e)<16&&!i&&(e=e*60);return!this._isUTC&&t&&(r=nn(this)),this._offset=e,this._isUTC=!0,r!=null&&this.add(r,"m"),s!==e&&(!t||this._changeInProgress?fc(this,Ft(e-s,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,oe.updateOffset(this,!0),this._changeInProgress=null)),this}else return this._isUTC?s:nn(this)}function ip(e,t){return e!=null?(typeof e!="string"&&(e=-e),this.utcOffset(e,t),this):-this.utcOffset()}function sp(e){return this.utcOffset(0,e)}function rp(e){return this._isUTC&&(this.utcOffset(0,e),this._isUTC=!1,e&&this.subtract(nn(this),"m")),this}function np(){if(this._tzm!=null)this.utcOffset(this._tzm,!1,!0);else if(typeof this._i=="string"){var e=Vn(k_,this._i);e!=null?this.utcOffset(e):this.utcOffset(0,!0)}return this}function op(e){return this.isValid()?(e=e?Fe(e).utcOffset():0,(this.utcOffset()-e)%60===0):!1}function ap(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()}function lp(){if(!St(this._isDSTShifted))return this._isDSTShifted;var e={},t;return kn(e,this),e=oc(e),e._a?(t=e._isUTC?Kt(e._a):Fe(e._a),this._isDSTShifted=this.isValid()&&Q2(e._a,t.toArray())>0):this._isDSTShifted=!1,this._isDSTShifted}function cp(){return this.isValid()?!this._isUTC:!1}function hp(){return this.isValid()?this._isUTC:!1}function hc(){return this.isValid()?this._isUTC&&this._offset===0:!1}var up=/^(-|\+)?(?:(\d*)[. ])?(\d+):(\d+)(?::(\d+)(\.\d*)?)?$/,fp=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;function Ft(e,t){var i=e,s=null,r,n,l;return Ns(e)?i={ms:e._milliseconds,d:e._days,M:e._months}:ni(e)||!isNaN(+e)?(i={},t?i[t]=+e:i.milliseconds=+e):(s=up.exec(e))?(r=s[1]==="-"?-1:1,i={y:0,d:Me(s[zt])*r,h:Me(s[ot])*r,m:Me(s[Pt])*r,s:Me(s[ei])*r,ms:Me(rn(s[Ei]*1e3))*r}):(s=fp.exec(e))?(r=s[1]==="-"?-1:1,i={y:Ci(s[2],r),M:Ci(s[3],r),w:Ci(s[4],r),d:Ci(s[5],r),h:Ci(s[6],r),m:Ci(s[7],r),s:Ci(s[8],r)}):i==null?i={}:typeof i=="object"&&("from"in i||"to"in i)&&(l=dp(Fe(i.from),Fe(i.to)),i={},i.ms=l.milliseconds,i.M=l.months),n=new dr(i),Ns(e)&&Oe(e,"_locale")&&(n._locale=e._locale),Ns(e)&&Oe(e,"_isValid")&&(n._isValid=e._isValid),n}Ft.fn=dr.prototype;Ft.invalid=X2;function Ci(e,t){var i=e&&parseFloat(e.replace(",","."));return(isNaN(i)?0:i)*t}function pa(e,t){var i={};return i.months=t.month()-e.month()+(t.year()-e.year())*12,e.clone().add(i.months,"M").isAfter(t)&&--i.months,i.milliseconds=+t-+e.clone().add(i.months,"M"),i}function dp(e,t){var i;return e.isValid()&&t.isValid()?(t=jn(t,e),e.isBefore(t)?i=pa(e,t):(i=pa(t,e),i.milliseconds=-i.milliseconds,i.months=-i.months),i):{milliseconds:0,months:0}}function uc(e,t){return function(i,s){var r,n;return s!==null&&!isNaN(+s)&&(jl(t,"moment()."+t+"(period, number) is deprecated. Please use moment()."+t+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."),n=i,i=s,s=n),r=Ft(i,s),fc(this,r,e),this}}function fc(e,t,i,s){var r=t._milliseconds,n=rn(t._days),l=rn(t._months);e.isValid()&&(s=s??!0,l&&Jl(e,hs(e,"Month")+l*i),n&&Zl(e,"Date",hs(e,"Date")+n*i),r&&e._d.setTime(e._d.valueOf()+r*i),s&&oe.updateOffset(e,n||l))}var _p=uc(1,"add"),pp=uc(-1,"subtract");function dc(e){return typeof e=="string"||e instanceof String}function mp(e){return jt(e)||gs(e)||dc(e)||ni(e)||vp(e)||gp(e)||e===null||e===void 0}function gp(e){var t=Li(e)&&!Sn(e),i=!1,s=["years","year","y","months","month","M","days","day","d","dates","date","D","hours","hour","h","minutes","minute","m","seconds","second","s","milliseconds","millisecond","ms"],r,n,l=s.length;for(r=0;r<l;r+=1)n=s[r],i=i||Oe(e,n);return t&&i}function vp(e){var t=Vt(e),i=!1;return t&&(i=e.filter(function(s){return!ni(s)&&dc(e)}).length===0),t&&i}function bp(e){var t=Li(e)&&!Sn(e),i=!1,s=["sameDay","nextDay","lastDay","nextWeek","lastWeek","sameElse"],r,n;for(r=0;r<s.length;r+=1)n=s[r],i=i||Oe(e,n);return t&&i}function yp(e,t){var i=e.diff(t,"days",!0);return i<-6?"sameElse":i<-1?"lastWeek":i<0?"lastDay":i<1?"sameDay":i<2?"nextDay":i<7?"nextWeek":"sameElse"}function wp(e,t){arguments.length===1&&(arguments[0]?mp(arguments[0])?(e=arguments[0],t=void 0):bp(arguments[0])&&(t=arguments[0],e=void 0):(e=void 0,t=void 0));var i=e||Fe(),s=jn(i,this).startOf("day"),r=oe.calendarFormat(this,s)||"sameElse",n=t&&(Gt(t[r])?t[r].call(this,i):t[r]);return this.format(n||this.localeData().calendar(r,this,Fe(i)))}function Sp(){return new vs(this)}function Cp(e,t){var i=jt(e)?e:Fe(e);return this.isValid()&&i.isValid()?(t=Bt(t)||"millisecond",t==="millisecond"?this.valueOf()>i.valueOf():i.valueOf()<this.clone().startOf(t).valueOf()):!1}function kp(e,t){var i=jt(e)?e:Fe(e);return this.isValid()&&i.isValid()?(t=Bt(t)||"millisecond",t==="millisecond"?this.valueOf()<i.valueOf():this.clone().endOf(t).valueOf()<i.valueOf()):!1}function Ep(e,t,i,s){var r=jt(e)?e:Fe(e),n=jt(t)?t:Fe(t);return this.isValid()&&r.isValid()&&n.isValid()?(s=s||"()",(s[0]==="("?this.isAfter(r,i):!this.isBefore(r,i))&&(s[1]===")"?this.isBefore(n,i):!this.isAfter(n,i))):!1}function Lp(e,t){var i=jt(e)?e:Fe(e),s;return this.isValid()&&i.isValid()?(t=Bt(t)||"millisecond",t==="millisecond"?this.valueOf()===i.valueOf():(s=i.valueOf(),this.clone().startOf(t).valueOf()<=s&&s<=this.clone().endOf(t).valueOf())):!1}function Mp(e,t){return this.isSame(e,t)||this.isAfter(e,t)}function Tp(e,t){return this.isSame(e,t)||this.isBefore(e,t)}function Dp(e,t,i){var s,r,n;if(!this.isValid())return NaN;if(s=jn(e,this),!s.isValid())return NaN;switch(r=(s.utcOffset()-this.utcOffset())*6e4,t=Bt(t),t){case"year":n=Vs(this,s)/12;break;case"month":n=Vs(this,s);break;case"quarter":n=Vs(this,s)/3;break;case"second":n=(this-s)/1e3;break;case"minute":n=(this-s)/6e4;break;case"hour":n=(this-s)/36e5;break;case"day":n=(this-s-r)/864e5;break;case"week":n=(this-s-r)/6048e5;break;default:n=this-s}return i?n:At(n)}function Vs(e,t){if(e.date()<t.date())return-Vs(t,e);var i=(t.year()-e.year())*12+(t.month()-e.month()),s=e.clone().add(i,"months"),r,n;return t-s<0?(r=e.clone().add(i-1,"months"),n=(t-s)/(s-r)):(r=e.clone().add(i+1,"months"),n=(t-s)/(r-s)),-(i+n)||0}oe.defaultFormat="YYYY-MM-DDTHH:mm:ssZ";oe.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";function Ap(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")}function Rp(e){if(!this.isValid())return null;var t=e!==!0,i=t?this.clone().utc():this;return i.year()<0||i.year()>9999?Is(i,t?"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYYYY-MM-DD[T]HH:mm:ss.SSSZ"):Gt(Date.prototype.toISOString)?t?this.toDate().toISOString():new Date(this.valueOf()+this.utcOffset()*60*1e3).toISOString().replace("Z",Is(i,"Z")):Is(i,t?"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYY-MM-DD[T]HH:mm:ss.SSSZ")}function Op(){if(!this.isValid())return"moment.invalid(/* "+this._i+" */)";var e="moment",t="",i,s,r,n;return this.isLocal()||(e=this.utcOffset()===0?"moment.utc":"moment.parseZone",t="Z"),i="["+e+'("]',s=0<=this.year()&&this.year()<=9999?"YYYY":"YYYYYY",r="-MM-DD[T]HH:mm:ss.SSS",n=t+'[")]',this.format(i+s+r+n)}function Bp(e){e||(e=this.isUtc()?oe.defaultFormatUtc:oe.defaultFormat);var t=Is(this,e);return this.localeData().postformat(t)}function Hp(e,t){return this.isValid()&&(jt(e)&&e.isValid()||Fe(e).isValid())?Ft({to:this,from:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()}function xp(e){return this.from(Fe(),e)}function Pp(e,t){return this.isValid()&&(jt(e)&&e.isValid()||Fe(e).isValid())?Ft({from:this,to:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()}function Ip(e){return this.to(Fe(),e)}function _c(e){var t;return e===void 0?this._locale._abbr:(t=li(e),t!=null&&(this._locale=t),this)}var pc=Ot("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(e){return e===void 0?this.localeData():this.locale(e)});function mc(){return this._locale}var Ys=1e3,ji=60*Ys,qs=60*ji,gc=(365*400+97)*24*qs;function Fi(e,t){return(e%t+t)%t}function vc(e,t,i){return e<100&&e>=0?new Date(e+400,t,i)-gc:new Date(e,t,i).valueOf()}function bc(e,t,i){return e<100&&e>=0?Date.UTC(e+400,t,i)-gc:Date.UTC(e,t,i)}function Np(e){var t,i;if(e=Bt(e),e===void 0||e==="millisecond"||!this.isValid())return this;switch(i=this._isUTC?bc:vc,e){case"year":t=i(this.year(),0,1);break;case"quarter":t=i(this.year(),this.month()-this.month()%3,1);break;case"month":t=i(this.year(),this.month(),1);break;case"week":t=i(this.year(),this.month(),this.date()-this.weekday());break;case"isoWeek":t=i(this.year(),this.month(),this.date()-(this.isoWeekday()-1));break;case"day":case"date":t=i(this.year(),this.month(),this.date());break;case"hour":t=this._d.valueOf(),t-=Fi(t+(this._isUTC?0:this.utcOffset()*ji),qs);break;case"minute":t=this._d.valueOf(),t-=Fi(t,ji);break;case"second":t=this._d.valueOf(),t-=Fi(t,Ys);break}return this._d.setTime(t),oe.updateOffset(this,!0),this}function Vp(e){var t,i;if(e=Bt(e),e===void 0||e==="millisecond"||!this.isValid())return this;switch(i=this._isUTC?bc:vc,e){case"year":t=i(this.year()+1,0,1)-1;break;case"quarter":t=i(this.year(),this.month()-this.month()%3+3,1)-1;break;case"month":t=i(this.year(),this.month()+1,1)-1;break;case"week":t=i(this.year(),this.month(),this.date()-this.weekday()+7)-1;break;case"isoWeek":t=i(this.year(),this.month(),this.date()-(this.isoWeekday()-1)+7)-1;break;case"day":case"date":t=i(this.year(),this.month(),this.date()+1)-1;break;case"hour":t=this._d.valueOf(),t+=qs-Fi(t+(this._isUTC?0:this.utcOffset()*ji),qs)-1;break;case"minute":t=this._d.valueOf(),t+=ji-Fi(t,ji)-1;break;case"second":t=this._d.valueOf(),t+=Ys-Fi(t,Ys)-1;break}return this._d.setTime(t),oe.updateOffset(this,!0),this}function jp(){return this._d.valueOf()-(this._offset||0)*6e4}function Fp(){return Math.floor(this.valueOf()/1e3)}function Up(){return new Date(this.valueOf())}function Wp(){var e=this;return[e.year(),e.month(),e.date(),e.hour(),e.minute(),e.second(),e.millisecond()]}function zp(){var e=this;return{years:e.year(),months:e.month(),date:e.date(),hours:e.hours(),minutes:e.minutes(),seconds:e.seconds(),milliseconds:e.milliseconds()}}function Yp(){return this.isValid()?this.toISOString():null}function qp(){return Cn(this)}function Zp(){return mi({},Se(this))}function Kp(){return Se(this).overflow}function Gp(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}}de("N",0,0,"eraAbbr");de("NN",0,0,"eraAbbr");de("NNN",0,0,"eraAbbr");de("NNNN",0,0,"eraName");de("NNNNN",0,0,"eraNarrow");de("y",["y",1],"yo","eraYear");de("y",["yy",2],0,"eraYear");de("y",["yyy",3],0,"eraYear");de("y",["yyyy",4],0,"eraYear");ue("N",Fn);ue("NN",Fn);ue("NNN",Fn);ue("NNNN",om);ue("NNNNN",am);je(["N","NN","NNN","NNNN","NNNNN"],function(e,t,i,s){var r=i._locale.erasParse(e,s,i._strict);r?Se(i).era=r:Se(i).invalidEra=e});ue("y",Ki);ue("yy",Ki);ue("yyy",Ki);ue("yyyy",Ki);ue("yo",lm);je(["y","yy","yyy","yyyy"],vt);je(["yo"],function(e,t,i,s){var r;i._locale._eraYearOrdinalRegex&&(r=e.match(i._locale._eraYearOrdinalRegex)),i._locale.eraYearOrdinalParse?t[vt]=i._locale.eraYearOrdinalParse(e,r):t[vt]=parseInt(e,10)});function Jp(e,t){var i,s,r,n=this._eras||li("en")._eras;for(i=0,s=n.length;i<s;++i){switch(typeof n[i].since){case"string":r=oe(n[i].since).startOf("day"),n[i].since=r.valueOf();break}switch(typeof n[i].until){case"undefined":n[i].until=1/0;break;case"string":r=oe(n[i].until).startOf("day").valueOf(),n[i].until=r.valueOf();break}}return n}function $p(e,t,i){var s,r,n=this.eras(),l,o,a;for(e=e.toUpperCase(),s=0,r=n.length;s<r;++s)if(l=n[s].name.toUpperCase(),o=n[s].abbr.toUpperCase(),a=n[s].narrow.toUpperCase(),i)switch(t){case"N":case"NN":case"NNN":if(o===e)return n[s];break;case"NNNN":if(l===e)return n[s];break;case"NNNNN":if(a===e)return n[s];break}else if([l,o,a].indexOf(e)>=0)return n[s]}function Xp(e,t){var i=e.since<=e.until?1:-1;return t===void 0?oe(e.since).year():oe(e.since).year()+(t-e.offset)*i}function Qp(){var e,t,i,s=this.localeData().eras();for(e=0,t=s.length;e<t;++e)if(i=this.clone().startOf("day").valueOf(),s[e].since<=i&&i<=s[e].until||s[e].until<=i&&i<=s[e].since)return s[e].name;return""}function em(){var e,t,i,s=this.localeData().eras();for(e=0,t=s.length;e<t;++e)if(i=this.clone().startOf("day").valueOf(),s[e].since<=i&&i<=s[e].until||s[e].until<=i&&i<=s[e].since)return s[e].narrow;return""}function tm(){var e,t,i,s=this.localeData().eras();for(e=0,t=s.length;e<t;++e)if(i=this.clone().startOf("day").valueOf(),s[e].since<=i&&i<=s[e].until||s[e].until<=i&&i<=s[e].since)return s[e].abbr;return""}function im(){var e,t,i,s,r=this.localeData().eras();for(e=0,t=r.length;e<t;++e)if(i=r[e].since<=r[e].until?1:-1,s=this.clone().startOf("day").valueOf(),r[e].since<=s&&s<=r[e].until||r[e].until<=s&&s<=r[e].since)return(this.year()-oe(r[e].since).year())*i+r[e].offset;return this.year()}function sm(e){return Oe(this,"_erasNameRegex")||Un.call(this),e?this._erasNameRegex:this._erasRegex}function rm(e){return Oe(this,"_erasAbbrRegex")||Un.call(this),e?this._erasAbbrRegex:this._erasRegex}function nm(e){return Oe(this,"_erasNarrowRegex")||Un.call(this),e?this._erasNarrowRegex:this._erasRegex}function Fn(e,t){return t.erasAbbrRegex(e)}function om(e,t){return t.erasNameRegex(e)}function am(e,t){return t.erasNarrowRegex(e)}function lm(e,t){return t._eraYearOrdinalRegex||Ki}function Un(){var e=[],t=[],i=[],s=[],r,n,l,o,a,h=this.eras();for(r=0,n=h.length;r<n;++r)l=ii(h[r].name),o=ii(h[r].abbr),a=ii(h[r].narrow),t.push(l),e.push(o),i.push(a),s.push(l),s.push(o),s.push(a);this._erasRegex=new RegExp("^("+s.join("|")+")","i"),this._erasNameRegex=new RegExp("^("+t.join("|")+")","i"),this._erasAbbrRegex=new RegExp("^("+e.join("|")+")","i"),this._erasNarrowRegex=new RegExp("^("+i.join("|")+")","i")}de(0,["gg",2],0,function(){return this.weekYear()%100});de(0,["GG",2],0,function(){return this.isoWeekYear()%100});function _r(e,t){de(0,[e,e.length],0,t)}_r("gggg","weekYear");_r("ggggg","weekYear");_r("GGGG","isoWeekYear");_r("GGGGG","isoWeekYear");ue("G",cr);ue("g",cr);ue("GG",Ue,Et);ue("gg",Ue,Et);ue("GGGG",Dn,Tn);ue("gggg",Dn,Tn);ue("GGGGG",lr,or);ue("ggggg",lr,or);ys(["gggg","ggggg","GGGG","GGGGG"],function(e,t,i,s){t[s.substr(0,2)]=Me(e)});ys(["gg","GG"],function(e,t,i,s){t[s]=oe.parseTwoDigitYear(e)});function cm(e){return yc.call(this,e,this.week(),this.weekday()+this.localeData()._week.dow,this.localeData()._week.dow,this.localeData()._week.doy)}function hm(e){return yc.call(this,e,this.isoWeek(),this.isoWeekday(),1,4)}function um(){return si(this.year(),1,4)}function fm(){return si(this.isoWeekYear(),1,4)}function dm(){var e=this.localeData()._week;return si(this.year(),e.dow,e.doy)}function _m(){var e=this.localeData()._week;return si(this.weekYear(),e.dow,e.doy)}function yc(e,t,i,s,r){var n;return e==null?fs(this,s,r).year:(n=si(e,s,r),t>n&&(t=n),pm.call(this,e,t,i,s,r))}function pm(e,t,i,s,r){var n=Ql(e,t,i,s,r),l=us(n.year,0,n.dayOfYear);return this.year(l.getUTCFullYear()),this.month(l.getUTCMonth()),this.date(l.getUTCDate()),this}de("Q",0,"Qo","quarter");ue("Q",Ul);je("Q",function(e,t){t[Qt]=(Me(e)-1)*3});function mm(e){return e==null?Math.ceil((this.month()+1)/3):this.month((e-1)*3+this.month()%3)}de("D",["DD",2],"Do","date");ue("D",Ue,Gi);ue("DD",Ue,Et);ue("Do",function(e,t){return e?t._dayOfMonthOrdinalParse||t._ordinalParse:t._dayOfMonthOrdinalParseLenient});je(["D","DD"],zt);je("Do",function(e,t){t[zt]=Me(e.match(Ue)[0])});var wc=Ji("Date",!0);de("DDD",["DDDD",3],"DDDo","dayOfYear");ue("DDD",ar);ue("DDDD",Wl);je(["DDD","DDDD"],function(e,t,i){i._dayOfYear=Me(e)});function gm(e){var t=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return e==null?t:this.add(e-t,"d")}de("m",["mm",2],0,"minute");ue("m",Ue,An);ue("mm",Ue,Et);je(["m","mm"],Pt);var vm=Ji("Minutes",!1);de("s",["ss",2],0,"second");ue("s",Ue,An);ue("ss",Ue,Et);je(["s","ss"],ei);var bm=Ji("Seconds",!1);de("S",0,0,function(){return~~(this.millisecond()/100)});de(0,["SS",2],0,function(){return~~(this.millisecond()/10)});de(0,["SSS",3],0,"millisecond");de(0,["SSSS",4],0,function(){return this.millisecond()*10});de(0,["SSSSS",5],0,function(){return this.millisecond()*100});de(0,["SSSSSS",6],0,function(){return this.millisecond()*1e3});de(0,["SSSSSSS",7],0,function(){return this.millisecond()*1e4});de(0,["SSSSSSSS",8],0,function(){return this.millisecond()*1e5});de(0,["SSSSSSSSS",9],0,function(){return this.millisecond()*1e6});ue("S",ar,Ul);ue("SS",ar,Et);ue("SSS",ar,Wl);var gi,Sc;for(gi="SSSS";gi.length<=9;gi+="S")ue(gi,Ki);function ym(e,t){t[Ei]=Me(("0."+e)*1e3)}for(gi="S";gi.length<=9;gi+="S")je(gi,ym);Sc=Ji("Milliseconds",!1);de("z",0,0,"zoneAbbr");de("zz",0,0,"zoneName");function wm(){return this._isUTC?"UTC":""}function Sm(){return this._isUTC?"Coordinated Universal Time":""}var X=vs.prototype;X.add=_p;X.calendar=wp;X.clone=Sp;X.diff=Dp;X.endOf=Vp;X.format=Bp;X.from=Hp;X.fromNow=xp;X.to=Pp;X.toNow=Ip;X.get=O_;X.invalidAt=Kp;X.isAfter=Cp;X.isBefore=kp;X.isBetween=Ep;X.isSame=Lp;X.isSameOrAfter=Mp;X.isSameOrBefore=Tp;X.isValid=qp;X.lang=pc;X.locale=_c;X.localeData=mc;X.max=q2;X.min=Y2;X.parsingFlags=Zp;X.set=B_;X.startOf=Np;X.subtract=pp;X.toArray=Wp;X.toObject=zp;X.toDate=Up;X.toISOString=Rp;X.inspect=Op;typeof Symbol<"u"&&Symbol.for!=null&&(X[Symbol.for("nodejs.util.inspect.custom")]=function(){return"Moment<"+this.format()+">"});X.toJSON=Yp;X.toString=Ap;X.unix=Fp;X.valueOf=jp;X.creationData=Gp;X.eraName=Qp;X.eraNarrow=em;X.eraAbbr=tm;X.eraYear=im;X.year=ql;X.isLeapYear=R_;X.weekYear=cm;X.isoWeekYear=hm;X.quarter=X.quarters=mm;X.month=$l;X.daysInMonth=U_;X.week=X.weeks=J_;X.isoWeek=X.isoWeeks=$_;X.weeksInYear=dm;X.weeksInWeekYear=_m;X.isoWeeksInYear=um;X.isoWeeksInISOWeekYear=fm;X.date=wc;X.day=X.days=h2;X.weekday=u2;X.isoWeekday=f2;X.dayOfYear=gm;X.hour=X.hours=b2;X.minute=X.minutes=vm;X.second=X.seconds=bm;X.millisecond=X.milliseconds=Sc;X.utcOffset=tp;X.utc=sp;X.local=rp;X.parseZone=np;X.hasAlignedHourOffset=op;X.isDST=ap;X.isLocal=cp;X.isUtcOffset=hp;X.isUtc=hc;X.isUTC=hc;X.zoneAbbr=wm;X.zoneName=Sm;X.dates=Ot("dates accessor is deprecated. Use date instead.",wc);X.months=Ot("months accessor is deprecated. Use month instead",$l);X.years=Ot("years accessor is deprecated. Use year instead",ql);X.zone=Ot("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",ip);X.isDSTShifted=Ot("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",lp);function Cm(e){return Fe(e*1e3)}function km(){return Fe.apply(null,arguments).parseZone()}function Cc(e){return e}var Be=En.prototype;Be.calendar=c_;Be.longDateFormat=d_;Be.invalidDate=p_;Be.ordinal=v_;Be.preparse=Cc;Be.postformat=Cc;Be.relativeTime=y_;Be.pastFuture=w_;Be.set=a_;Be.eras=Jp;Be.erasParse=$p;Be.erasConvertYear=Xp;Be.erasAbbrRegex=rm;Be.erasNameRegex=sm;Be.erasNarrowRegex=nm;Be.months=N_;Be.monthsShort=V_;Be.monthsParse=F_;Be.monthsRegex=z_;Be.monthsShortRegex=W_;Be.week=q_;Be.firstDayOfYear=G_;Be.firstDayOfWeek=K_;Be.weekdays=n2;Be.weekdaysMin=a2;Be.weekdaysShort=o2;Be.weekdaysParse=c2;Be.weekdaysRegex=d2;Be.weekdaysShortRegex=_2;Be.weekdaysMinRegex=p2;Be.isPM=g2;Be.meridiem=y2;function Zs(e,t,i,s){var r=li(),n=Kt().set(s,t);return r[i](n,e)}function kc(e,t,i){if(ni(e)&&(t=e,e=void 0),e=e||"",t!=null)return Zs(e,t,i,"month");var s,r=[];for(s=0;s<12;s++)r[s]=Zs(e,s,i,"month");return r}function Wn(e,t,i,s){typeof e=="boolean"?(ni(t)&&(i=t,t=void 0),t=t||""):(t=e,i=t,e=!1,ni(t)&&(i=t,t=void 0),t=t||"");var r=li(),n=e?r._week.dow:0,l,o=[];if(i!=null)return Zs(t,(i+n)%7,s,"day");for(l=0;l<7;l++)o[l]=Zs(t,(l+n)%7,s,"day");return o}function Em(e,t){return kc(e,t,"months")}function Lm(e,t){return kc(e,t,"monthsShort")}function Mm(e,t,i){return Wn(e,t,i,"weekdays")}function Tm(e,t,i){return Wn(e,t,i,"weekdaysShort")}function Dm(e,t,i){return Wn(e,t,i,"weekdaysMin")}bi("en",{eras:[{since:"0001-01-01",until:1/0,offset:1,name:"Anno Domini",narrow:"AD",abbr:"AD"},{since:"0000-12-31",until:-1/0,offset:1,name:"Before Christ",narrow:"BC",abbr:"BC"}],dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(e){var t=e%10,i=Me(e%100/10)===1?"th":t===1?"st":t===2?"nd":t===3?"rd":"th";return e+i}});oe.lang=Ot("moment.lang is deprecated. Use moment.locale instead.",bi);oe.langData=Ot("moment.langData is deprecated. Use moment.localeData instead.",li);var Jt=Math.abs;function Am(){var e=this._data;return this._milliseconds=Jt(this._milliseconds),this._days=Jt(this._days),this._months=Jt(this._months),e.milliseconds=Jt(e.milliseconds),e.seconds=Jt(e.seconds),e.minutes=Jt(e.minutes),e.hours=Jt(e.hours),e.months=Jt(e.months),e.years=Jt(e.years),this}function Ec(e,t,i,s){var r=Ft(t,i);return e._milliseconds+=s*r._milliseconds,e._days+=s*r._days,e._months+=s*r._months,e._bubble()}function Rm(e,t){return Ec(this,e,t,1)}function Om(e,t){return Ec(this,e,t,-1)}function ma(e){return e<0?Math.floor(e):Math.ceil(e)}function Bm(){var e=this._milliseconds,t=this._days,i=this._months,s=this._data,r,n,l,o,a;return e>=0&&t>=0&&i>=0||e<=0&&t<=0&&i<=0||(e+=ma(on(i)+t)*864e5,t=0,i=0),s.milliseconds=e%1e3,r=At(e/1e3),s.seconds=r%60,n=At(r/60),s.minutes=n%60,l=At(n/60),s.hours=l%24,t+=At(l/24),a=At(Lc(t)),i+=a,t-=ma(on(a)),o=At(i/12),i%=12,s.days=t,s.months=i,s.years=o,this}function Lc(e){return e*4800/146097}function on(e){return e*146097/4800}function Hm(e){if(!this.isValid())return NaN;var t,i,s=this._milliseconds;if(e=Bt(e),e==="month"||e==="quarter"||e==="year")switch(t=this._days+s/864e5,i=this._months+Lc(t),e){case"month":return i;case"quarter":return i/3;case"year":return i/12}else switch(t=this._days+Math.round(on(this._months)),e){case"week":return t/7+s/6048e5;case"day":return t+s/864e5;case"hour":return t*24+s/36e5;case"minute":return t*1440+s/6e4;case"second":return t*86400+s/1e3;case"millisecond":return Math.floor(t*864e5)+s;default:throw new Error("Unknown unit "+e)}}function ci(e){return function(){return this.as(e)}}var Mc=ci("ms"),xm=ci("s"),Pm=ci("m"),Im=ci("h"),Nm=ci("d"),Vm=ci("w"),jm=ci("M"),Fm=ci("Q"),Um=ci("y"),Wm=Mc;function zm(){return Ft(this)}function Ym(e){return e=Bt(e),this.isValid()?this[e+"s"]():NaN}function Ai(e){return function(){return this.isValid()?this._data[e]:NaN}}var qm=Ai("milliseconds"),Zm=Ai("seconds"),Km=Ai("minutes"),Gm=Ai("hours"),Jm=Ai("days"),$m=Ai("months"),Xm=Ai("years");function Qm(){return At(this.days()/7)}var $t=Math.round,Ii={ss:44,s:45,m:45,h:22,d:26,w:null,M:11};function eg(e,t,i,s,r){return r.relativeTime(t||1,!!i,e,s)}function tg(e,t,i,s){var r=Ft(e).abs(),n=$t(r.as("s")),l=$t(r.as("m")),o=$t(r.as("h")),a=$t(r.as("d")),h=$t(r.as("M")),u=$t(r.as("w")),f=$t(r.as("y")),_=n<=i.ss&&["s",n]||n<i.s&&["ss",n]||l<=1&&["m"]||l<i.m&&["mm",l]||o<=1&&["h"]||o<i.h&&["hh",o]||a<=1&&["d"]||a<i.d&&["dd",a];return i.w!=null&&(_=_||u<=1&&["w"]||u<i.w&&["ww",u]),_=_||h<=1&&["M"]||h<i.M&&["MM",h]||f<=1&&["y"]||["yy",f],_[2]=t,_[3]=+e>0,_[4]=s,eg.apply(null,_)}function ig(e){return e===void 0?$t:typeof e=="function"?($t=e,!0):!1}function sg(e,t){return Ii[e]===void 0?!1:t===void 0?Ii[e]:(Ii[e]=t,e==="s"&&(Ii.ss=t-1),!0)}function rg(e,t){if(!this.isValid())return this.localeData().invalidDate();var i=!1,s=Ii,r,n;return typeof e=="object"&&(t=e,e=!1),typeof e=="boolean"&&(i=e),typeof t=="object"&&(s=Object.assign({},Ii,t),t.s!=null&&t.ss==null&&(s.ss=t.s-1)),r=this.localeData(),n=tg(this,!i,s,r),i&&(n=r.pastFuture(+this,n)),r.postformat(n)}var Rr=Math.abs;function Bi(e){return(e>0)-(e<0)||+e}function pr(){if(!this.isValid())return this.localeData().invalidDate();var e=Rr(this._milliseconds)/1e3,t=Rr(this._days),i=Rr(this._months),s,r,n,l,o=this.asSeconds(),a,h,u,f;return o?(s=At(e/60),r=At(s/60),e%=60,s%=60,n=At(i/12),i%=12,l=e?e.toFixed(3).replace(/\.?0+$/,""):"",a=o<0?"-":"",h=Bi(this._months)!==Bi(o)?"-":"",u=Bi(this._days)!==Bi(o)?"-":"",f=Bi(this._milliseconds)!==Bi(o)?"-":"",a+"P"+(n?h+n+"Y":"")+(i?h+i+"M":"")+(t?u+t+"D":"")+(r||s||e?"T":"")+(r?f+r+"H":"")+(s?f+s+"M":"")+(e?f+l+"S":"")):"P0D"}var Ae=dr.prototype;Ae.isValid=$2;Ae.abs=Am;Ae.add=Rm;Ae.subtract=Om;Ae.as=Hm;Ae.asMilliseconds=Mc;Ae.asSeconds=xm;Ae.asMinutes=Pm;Ae.asHours=Im;Ae.asDays=Nm;Ae.asWeeks=Vm;Ae.asMonths=jm;Ae.asQuarters=Fm;Ae.asYears=Um;Ae.valueOf=Wm;Ae._bubble=Bm;Ae.clone=zm;Ae.get=Ym;Ae.milliseconds=qm;Ae.seconds=Zm;Ae.minutes=Km;Ae.hours=Gm;Ae.days=Jm;Ae.weeks=Qm;Ae.months=$m;Ae.years=Xm;Ae.humanize=rg;Ae.toISOString=pr;Ae.toString=pr;Ae.toJSON=pr;Ae.locale=_c;Ae.localeData=mc;Ae.toIsoString=Ot("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",pr);Ae.lang=pc;de("X",0,0,"unix");de("x",0,0,"valueOf");ue("x",cr);ue("X",E_);je("X",function(e,t,i){i._d=new Date(parseFloat(e)*1e3)});je("x",function(e,t,i){i._d=new Date(Me(e))});//! moment.js
oe.version="2.30.1";n_(Fe);oe.fn=X;oe.min=Z2;oe.max=K2;oe.now=G2;oe.utc=Kt;oe.unix=Cm;oe.months=Em;oe.isDate=gs;oe.locale=bi;oe.invalid=nr;oe.duration=Ft;oe.isMoment=jt;oe.weekdays=Mm;oe.parseZone=km;oe.localeData=li;oe.isDuration=Ns;oe.monthsShort=Lm;oe.weekdaysMin=Dm;oe.defineLocale=xn;oe.updateLocale=k2;oe.locales=E2;oe.weekdaysShort=Tm;oe.normalizeUnits=Bt;oe.relativeTimeRounding=ig;oe.relativeTimeThreshold=sg;oe.calendarFormat=yp;oe.prototype=X;oe.HTML5_FMT={DATETIME_LOCAL:"YYYY-MM-DDTHH:mm",DATETIME_LOCAL_SECONDS:"YYYY-MM-DDTHH:mm:ss",DATETIME_LOCAL_MS:"YYYY-MM-DDTHH:mm:ss.SSS",DATE:"YYYY-MM-DD",TIME:"HH:mm",TIME_SECONDS:"HH:mm:ss",TIME_MS:"HH:mm:ss.SSS",WEEK:"GGGG-[W]WW",MONTH:"YYYY-MM"};function ng(e){let t,i,s,r;const n=[e[1]];let l={};for(let o=0;o<n.length;o+=1)l=oi(l,n[o]);return t=new xl({props:l}),s=new s_({props:{roots:e[0]}}),s.$on("open",e[2]),s.$on("menu",e[3]),s.$on("fold",ag),s.$on("unfold",lg),{c(){ie(t.$$.fragment),i=fe(),ie(s.$$.fragment)},m(o,a){ee(t,o,a),J(o,i,a),ee(s,o,a),r=!0},p(o,[a]){const h=a&2?wi(n,[Di(o[1])]):{};t.$set(h);const u={};a&1&&(u.roots=o[0]),s.$set(u)},i(o){r||(j(t.$$.fragment,o),j(s.$$.fragment,o),r=!0)},o(o){W(t.$$.fragment,o),W(s.$$.fragment,o),r=!1},d(o){o&&G(i),te(t,o),te(s,o)}}}const Es="/",_i="/respurces",og="#icon-jupyter-client-simple",Ls="/kernelspecs",ga="#icon-jupyter-client-kernelspec",ts="/kernels",va="#icon-jupyter-client-kernel",is="/sessions",ba="#icon-jupyter-client-session",Or="YYYY-MM-DD hh:mm:ss";function ag(e){e.detail.props.folded.set(!0)}async function lg(e){e.detail.props.folded.set(!1)}function cg(e,t,i){let{plugin:s}=t,{kernelspecs:r={default:"",kernelspecs:{}}}=t,{kernels:n=[]}=t,{sessions:l=[]}=t,{currentSpec:o=""}=t,{currentKernel:a=""}=t,{currentSession:h=""}=t,{currentDocument:u=""}=t;async function f(k,w,C){const L=[];for(const[R,O]of Object.entries(k.kernelspecs)){if(!O)continue;const T=`${_i}/${O.name}`,x={type:we.Folder,name:O.name,path:T,directory:_i,focus:O.name===o,folded:!1,icon:s.kernelName2logoObjectURL.has(O.name)?s.kernelName2logoObjectURL.get(O.name):await s.loadKernelSpecIcon(O),iconAriaLabel:O.language,text:O.name,textAriaLabel:O.display_name};x.children=await(async()=>{var q;const F=[],Y=await((q=s.bridge)==null?void 0:q.call("jupyter.kernels.running"));for(const M of Y??[]){if(M.name!==O.name)continue;const B=`${T}/${M.id}`,A=oe(M.last_activity),H={type:we.Folder,name:M.id,path:B,directory:T,focus:M.id===a,folded:!1,icon:`#icon-jupyter-client-kernel-${M.execution_state}`,iconAriaLabel:M.execution_state,text:M.name,textAriaLabel:`${A.format(Or)}<br/>${A.fromNow()}`,title:M.id};H.children=await(async()=>{var he,ae;const N=[],se=await((he=s.bridge)==null?void 0:he.call("jupyter.sessions.running"));for(const ye of se??[]){if(((ae=ye.kernel)==null?void 0:ae.id)!==M.id)continue;const D=`${B}/${ye.id}`,V={type:we.Folder,name:ye.id,path:D,directory:B,focus:ye.id===h,folded:!1,icon:`#icon-jupyter-client-session-${ye.type}`,iconAriaLabel:ye.type,text:ye.name,textAriaLabel:ye.path,title:ye.id};V.children=await(async()=>{const K=[],Z=s.session2docs.get(ye.id);if(Z&&Z.size>0)for(const _e of Z.values()){if(!s.doc2info.has(_e)){const ht=await s.client.getDocInfo({id:_e});s.doc2info.set(_e,ht.data)}const Q=s.doc2info.get(_e),Ee=`${D}/${Q.id}`,He=oe(Q.ial.updated,"YYYYMMDDhhmmss"),ze={type:we.File,name:Q.id,path:Ee,directory:D,focus:Q.id===u,icon:/^[1-9a-f]+$/.test(Q.icon)?n1(Q.icon):Q.icon?`/emojis/${Q.icon}`:"📄",text:Q.name,textAriaLabel:`${He.format(Or)}<br/>${A.fromNow()}`,title:Q.name};K.push(ze)}return K})(),V.count=V.children.length,N.push(V)}return N})(),H.count=H.children.length,F.push(H)}return F})(),x.count=x.children.length,L.push(x)}return L}async function _(k){const w=[];for(const[C,L]of Object.entries(k.kernelspecs)){if(!L)continue;const R={type:we.File,name:C,path:`${Ls}/${C}`,directory:Ls,focus:C===o,icon:ga,text:C,textAriaLabel:L.display_name},O=s.kernelName2logoObjectURL.get(C);O?R.icon=O:R.icon=await s.loadKernelSpecIcon(L),R.iconAriaLabel=L.language,w.push(R)}return w}function v(k){const w=[];for(const C of k){const L=oe(C.last_activity);w.push({type:we.File,name:C.id,path:`${ts}/${C.id}`,directory:ts,focus:C.id===a,icon:`#icon-jupyter-client-kernel-${C.execution_state}`,iconAriaLabel:C.execution_state,text:C.name,textAriaLabel:`${L.format(Or)}<br/>${L.fromNow()}`,symlinkIcon:s.kernelName2logoObjectURL.get(C.name)??va,symlinkAriaLabel:s.kernelName2language.get(C.name),symlink:!0,count:C.connections,title:C.id})}return w}function b(k){var C,L,R,O,T;const w=[];for(const x of k)w.push({type:we.File,name:x.id,path:`${is}/${x.id}`,directory:is,focus:x.id===h,icon:`#icon-jupyter-client-session-${x.type}`,iconAriaLabel:x.type,text:x.name,textAriaLabel:`${(C=x.kernel)==null?void 0:C.name}<br/>${x.path}`,symlink:!0,symlinkIcon:s.kernelName2logoObjectURL.get(((L=x.kernel)==null?void 0:L.name)??"")??ba,symlinkAriaLabel:s.kernelName2language.get(((R=x.kernel)==null?void 0:R.name)??""),count:((O=s.session2docs.get(x.id))==null?void 0:O.size)??0,countAriaLabel:(T=x.kernel)==null?void 0:T.execution_state,title:x.id});return w}function g(k,w,C,L){var R;(R=y[0].children)==null||R.forEach((O,T)=>{var x;(x=O.children)==null||x.forEach((F,Y)=>{var q;(q=F.children)==null||q.forEach((M,B)=>{var A;(A=M.children)==null||A.forEach((H,N)=>{i(0,y[0].children[T].children[Y].children[B].children[N].focus=H.name===L,y)}),i(0,y[0].children[T].children[Y].children[B].focus=M.name===C,y)}),i(0,y[0].children[T].children[Y].focus=F.name===w,y)}),i(0,y[0].children[T].focus=O.name===k,y)})}function c(k){var w;(w=y[1].children)==null||w.forEach((C,L)=>{i(0,y[1].children[L].focus=C.name===k,y)})}function d(k){var w;(w=y[2].children)==null||w.forEach((C,L)=>{i(0,y[2].children[L].focus=C.name===k,y)})}function m(k){var w;(w=y[3].children)==null||w.forEach((C,L)=>{i(0,y[3].children[L].focus=C.name===k,y)})}const p={logo:"#icon-jupyter-client",title:s.i18n.dock.title,icons:[{icon:"#iconRefresh",type:"refresh",ariaLabel:s.i18n.dock.refresh.ariaLabel,tooltipsDirection:xt.sw,onClick:async(k,w,C)=>{await s.jupyterForceRefresh()}},{icon:"#iconMin",type:"min",ariaLabel:`${globalThis.siyuan.languages.min} ${s.siyuan.adaptHotkey("⌘W")}`,tooltipsDirection:xt.sw}]};let y=[{type:we.Root,name:"respurces",path:_i,directory:Es,depth:0,folded:!1,icon:og,text:s.i18n.dock.resources.text},{type:we.Root,name:"kernelspec",path:Ls,directory:Es,depth:0,folded:!1,icon:ga,text:s.i18n.dock.kernelspecs.text},{type:we.Root,name:"kernels",path:ts,directory:Es,depth:0,folded:!1,icon:va,text:s.i18n.dock.kernels.text},{type:we.Root,name:"sessions",path:is,directory:Es,depth:0,folded:!1,icon:ba,text:s.i18n.dock.sessions.text}];bn(()=>{for(const k of s.kernelName2logoObjectURL.values())URL.revokeObjectURL(k);s.kernelName2logoObjectURL.clear()});function S(k){const w=k.detail.props,C=pi(w.name),L=pi(w.path),R=pi(w.depth);L.startsWith(_i)&&R===4&&s.siyuan.openTab({app:s.app,doc:{id:C,action:["cb-get-focus","cb-get-hl"]},keepCursor:!1,removeCurrentTab:!1})}async function E(k){const w=k.detail.props,C=pi(w.name),L=pi(w.path),R=pi(w.depth),O=pi(w.directory),T=[];if((L===Ls||L.startsWith(_i)&&R===0)&&T.push({icon:"iconRefresh",label:s.i18n.dock.refresh.label,click:async()=>{var x;await((x=s.bridge)==null?void 0:x.call("jupyter.kernelspecs.refreshSpecs"))}}),L===ts&&(T.push({icon:"iconRefresh",label:s.i18n.dock.refresh.label,click:async()=>{var x;await((x=s.bridge)==null?void 0:x.call("jupyter.kernels.refreshRunning"))}}),T.push({type:"separator"}),T.push({icon:"iconClose",label:s.i18n.dock.menu.shutdownAllKernels.label,click:async()=>{var x,F;await((x=s.bridge)==null?void 0:x.call("jupyter.kernels.shutdownAll")),await((F=s.bridge)==null?void 0:F.call("jupyter.sessions.refreshRunning"))}})),(O===ts||L.startsWith(_i)&&R===2)&&T.push({icon:"iconClose",label:s.i18n.dock.menu.shutdownKernel.label,click:async()=>{var x,F;await((x=s.bridge)==null?void 0:x.call("jupyter.kernels.shutdown",C)),await((F=s.bridge)==null?void 0:F.call("jupyter.sessions.refreshRunning"))}}),L===is&&(T.push({icon:"iconRefresh",label:s.i18n.dock.refresh.label,click:async()=>{var x;await((x=s.bridge)==null?void 0:x.call("jupyter.sessions.refreshRunning"))}}),T.push({type:"separator"}),T.push({icon:"iconClose",label:s.i18n.dock.menu.shutdownAllSessions.label,click:async()=>{var x,F;await((x=s.bridge)==null?void 0:x.call("jupyter.sessions.shutdownAll")),await((F=s.bridge)==null?void 0:F.call("jupyter.kernels.refreshRunning"))}})),(O===is||L.startsWith(_i)&&R===3)&&T.push({icon:"iconClose",label:s.i18n.dock.menu.shutdownSession.label,click:async()=>{var x,F;await((x=s.bridge)==null?void 0:x.call("jupyter.sessions.shutdown",C)),await((F=s.bridge)==null?void 0:F.call("jupyter.kernels.refreshRunning"))}}),L.startsWith(_i)&&R===4){const F=(await s.client.getBlockAttrs({id:C})).data;T.push({icon:"iconOpenWindow",label:s.i18n.menu.open.label,submenu:s.buildOpenDocumentMenuItems(C)}),T.push({type:"separator"}),T.push(...s.buildJupyterDocumentMenuItems(C,F,s.doc2session.get(C),{isDocumentBlock:!0,isMultiBlock:!1,id:C}))}if(r_(T),T.length>0){const x=new s.siyuan.Menu;T.forEach(Y=>x.addItem(Y));const F=k.detail.e;x.open({x:F.clientX,y:F.clientY,isLeft:!1})}}return e.$$set=k=>{"plugin"in k&&i(4,s=k.plugin),"kernelspecs"in k&&i(5,r=k.kernelspecs),"kernels"in k&&i(6,n=k.kernels),"sessions"in k&&i(7,l=k.sessions),"currentSpec"in k&&i(8,o=k.currentSpec),"currentKernel"in k&&i(9,a=k.currentKernel),"currentSession"in k&&i(10,h=k.currentSession),"currentDocument"in k&&i(11,u=k.currentDocument)},e.$$.update=()=>{e.$$.dirty&224&&(i(0,y[0].count=Object.keys(r.kernelspecs).length,y),f(r).then(k=>{i(0,y[0].children=k,y)})),e.$$.dirty&224&&(i(0,y[1].count=Object.keys(r.kernelspecs).length,y),_(r).then(async k=>{i(0,y[1].children=k,y),i(0,y[2].children=v(n),y),i(0,y[3].children=b(l),y)})),e.$$.dirty&64&&(i(0,y[2].count=n.length,y),i(0,y[2].children=v(n),y)),e.$$.dirty&128&&(i(0,y[3].count=l.length,y),i(0,y[3].children=b(l),y)),e.$$.dirty&3840&&(c(o),d(a),m(h),g(o,a,h,u))},[y,p,S,E,s,r,n,l,o,a,h,u]}class hg extends Ve{constructor(t){super(),Ne(this,t,cg,ng,Pe,{plugin:4,kernelspecs:5,kernels:6,sessions:7,currentSpec:8,currentKernel:9,currentSession:10,currentDocument:11})}}function ug(e){let t,i,s,r;const n=[e[2]];let l={};for(let o=0;o<n.length;o+=1)l=oi(l,n[o]);return t=new xl({props:l}),{c(){ie(t.$$.fragment),i=fe(),s=re("jupyter-xterm-output"),Hs(s,"data-stream",e[0]),Hs(s,"class","xtrem fn__flex-1 svelte-1gokk8m")},m(o,a){ee(t,o,a),J(o,i,a),J(o,s,a),e[4](s),r=!0},p(o,[a]){const h=a&4?wi(n,[Di(o[2])]):{};t.$set(h),(!r||a&1)&&Hs(s,"data-stream",o[0])},i(o){r||(j(t.$$.fragment,o),r=!0)},o(o){W(t.$$.fragment,o),r=!1},d(o){o&&(G(i),G(s)),te(t,o),e[4](null)}}}function fg(e,t,i){let{plugin:s}=t,{stream:r=""}=t,n;const l={logo:"#icon-jupyter-client-inspect",title:s.i18n.inspectDock.title,icons:[{icon:"#iconMin",type:"min",ariaLabel:`${globalThis.siyuan.languages.min} ${s.siyuan.adaptHotkey("⌘W")}`,tooltipsDirection:xt.sw}]};function o(a){Nt[a?"unshift":"push"](()=>{n=a,i(1,n)})}return e.$$set=a=>{"plugin"in a&&i(3,s=a.plugin),"stream"in a&&i(0,r=a.stream)},[r,n,l,s,o]}class dg extends Ve{constructor(t){super(),Ne(this,t,fg,ug,Pe,{plugin:3,stream:0})}}function _g(e){let t,i,s,r,n,l,o,a,h,u,f,_,v;const b=e[8].default,g=qe(b,e,e[7],null);return{c(){t=re("div"),g&&g.c(),i=fe(),s=re("div"),r=re("button"),n=bt(e[1]),l=fe(),o=re("div"),a=fe(),h=re("button"),u=bt(e[2]),I(t,"class","b3-dialog__content"),wt(t,"user-select",e[0]?"auto":"none"),I(r,"class","b3-button b3-button--cancel"),I(o,"class","fn__space"),I(h,"class","b3-button b3-button--text"),I(s,"class","b3-dialog__action")},m(c,d){J(c,t,d),g&&g.m(t,null),J(c,i,d),J(c,s,d),ce(s,r),ce(r,n),e[9](r),ce(s,l),ce(s,o),ce(s,a),ce(s,h),ce(h,u),e[10](h),f=!0,_||(v=[Ce(r,"click",e[5]),Ce(h,"click",e[6])],_=!0)},p(c,[d]){g&&g.p&&(!f||d&128)&&Ke(g,b,c,c[7],f?Ze(b,c[7],d,null):Ge(c[7]),null),d&1&&wt(t,"user-select",c[0]?"auto":"none"),(!f||d&2)&&It(n,c[1]),(!f||d&4)&&It(u,c[2])},i(c){f||(j(g,c),f=!0)},o(c){W(g,c),f=!1},d(c){c&&(G(t),G(i),G(s)),g&&g.d(c),e[9](null),e[10](null),_=!1,rt(v)}}}function pg(e,t,i){var g,c,d,m;let{$$slots:s={},$$scope:r}=t,{selectable:n=!0}=t,{cancelButtonText:l=((c=(g=globalThis.siyuan)==null?void 0:g.languages)==null?void 0:c.cancel)??"Cancel"}=t,{confirmButtonText:o=((m=(d=globalThis.siyuan)==null?void 0:d.languages)==null?void 0:m.confirm)??"Confirm"}=t,a,h;const u=ai();function f(p){u("cancel",{event:p})}function _(p){u("confirm",{event:p})}function v(p){Nt[p?"unshift":"push"](()=>{a=p,i(3,a)})}function b(p){Nt[p?"unshift":"push"](()=>{h=p,i(4,h)})}return e.$$set=p=>{"selectable"in p&&i(0,n=p.selectable),"cancelButtonText"in p&&i(1,l=p.cancelButtonText),"confirmButtonText"in p&&i(2,o=p.confirmButtonText),"$$scope"in p&&i(7,r=p.$$scope)},[n,l,o,a,h,f,_,r,s,v,b]}class Tc extends Ve{constructor(t){super(),Ne(this,t,pg,_g,Pe,{selectable:0,cancelButtonText:1,confirmButtonText:2})}}let Ms;const mg=new Uint8Array(16);function Dc(){if(!Ms&&(Ms=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!Ms))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Ms(mg)}const gg=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function mr(e){return typeof e=="string"&&gg.test(e)}const ut=[];for(let e=0;e<256;++e)ut.push((e+256).toString(16).slice(1));function gr(e,t=0){return ut[e[t+0]]+ut[e[t+1]]+ut[e[t+2]]+ut[e[t+3]]+"-"+ut[e[t+4]]+ut[e[t+5]]+"-"+ut[e[t+6]]+ut[e[t+7]]+"-"+ut[e[t+8]]+ut[e[t+9]]+"-"+ut[e[t+10]]+ut[e[t+11]]+ut[e[t+12]]+ut[e[t+13]]+ut[e[t+14]]+ut[e[t+15]]}function vg(e,t=0){const i=gr(e,t);if(!mr(i))throw TypeError("Stringified UUID is invalid");return i}let ya,Br,Hr=0,xr=0;function bg(e,t,i){let s=t&&i||0;const r=t||new Array(16);e=e||{};let n=e.node||ya,l=e.clockseq!==void 0?e.clockseq:Br;if(n==null||l==null){const _=e.random||(e.rng||Dc)();n==null&&(n=ya=[_[0]|1,_[1],_[2],_[3],_[4],_[5]]),l==null&&(l=Br=(_[6]<<8|_[7])&16383)}let o=e.msecs!==void 0?e.msecs:Date.now(),a=e.nsecs!==void 0?e.nsecs:xr+1;const h=o-Hr+(a-xr)/1e4;if(h<0&&e.clockseq===void 0&&(l=l+1&16383),(h<0||o>Hr)&&e.nsecs===void 0&&(a=0),a>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");Hr=o,xr=a,Br=l,o+=122192928e5;const u=((o&268435455)*1e4+a)%4294967296;r[s++]=u>>>24&255,r[s++]=u>>>16&255,r[s++]=u>>>8&255,r[s++]=u&255;const f=o/4294967296*1e4&268435455;r[s++]=f>>>8&255,r[s++]=f&255,r[s++]=f>>>24&15|16,r[s++]=f>>>16&255,r[s++]=l>>>8|128,r[s++]=l&255;for(let _=0;_<6;++_)r[s+_]=n[_];return t||gr(r)}function Ac(e){if(!mr(e))throw TypeError("Invalid UUID");let t;const i=new Uint8Array(16);return i[0]=(t=parseInt(e.slice(0,8),16))>>>24,i[1]=t>>>16&255,i[2]=t>>>8&255,i[3]=t&255,i[4]=(t=parseInt(e.slice(9,13),16))>>>8,i[5]=t&255,i[6]=(t=parseInt(e.slice(14,18),16))>>>8,i[7]=t&255,i[8]=(t=parseInt(e.slice(19,23),16))>>>8,i[9]=t&255,i[10]=(t=parseInt(e.slice(24,36),16))/1099511627776&255,i[11]=t/4294967296&255,i[12]=t>>>24&255,i[13]=t>>>16&255,i[14]=t>>>8&255,i[15]=t&255,i}function yg(e){e=unescape(encodeURIComponent(e));const t=[];for(let i=0;i<e.length;++i)t.push(e.charCodeAt(i));return t}const wg="6ba7b810-9dad-11d1-80b4-00c04fd430c8",Sg="6ba7b811-9dad-11d1-80b4-00c04fd430c8";function Rc(e,t,i){function s(r,n,l,o){var a;if(typeof r=="string"&&(r=yg(r)),typeof n=="string"&&(n=Ac(n)),((a=n)===null||a===void 0?void 0:a.length)!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let h=new Uint8Array(16+r.length);if(h.set(n),h.set(r,n.length),h=i(h),h[6]=h[6]&15|t,h[8]=h[8]&63|128,l){o=o||0;for(let u=0;u<16;++u)l[o+u]=h[u];return l}return gr(h)}try{s.name=e}catch{}return s.DNS=wg,s.URL=Sg,s}function Cg(e){if(typeof e=="string"){const t=unescape(encodeURIComponent(e));e=new Uint8Array(t.length);for(let i=0;i<t.length;++i)e[i]=t.charCodeAt(i)}return kg(Eg(Lg(e),e.length*8))}function kg(e){const t=[],i=e.length*32,s="0123456789abcdef";for(let r=0;r<i;r+=8){const n=e[r>>5]>>>r%32&255,l=parseInt(s.charAt(n>>>4&15)+s.charAt(n&15),16);t.push(l)}return t}function Oc(e){return(e+64>>>9<<4)+14+1}function Eg(e,t){e[t>>5]|=128<<t%32,e[Oc(t)-1]=t;let i=1732584193,s=-271733879,r=-1732584194,n=271733878;for(let l=0;l<e.length;l+=16){const o=i,a=s,h=r,u=n;i=_t(i,s,r,n,e[l],7,-680876936),n=_t(n,i,s,r,e[l+1],12,-389564586),r=_t(r,n,i,s,e[l+2],17,606105819),s=_t(s,r,n,i,e[l+3],22,-1044525330),i=_t(i,s,r,n,e[l+4],7,-176418897),n=_t(n,i,s,r,e[l+5],12,1200080426),r=_t(r,n,i,s,e[l+6],17,-1473231341),s=_t(s,r,n,i,e[l+7],22,-45705983),i=_t(i,s,r,n,e[l+8],7,1770035416),n=_t(n,i,s,r,e[l+9],12,-1958414417),r=_t(r,n,i,s,e[l+10],17,-42063),s=_t(s,r,n,i,e[l+11],22,-1990404162),i=_t(i,s,r,n,e[l+12],7,1804603682),n=_t(n,i,s,r,e[l+13],12,-40341101),r=_t(r,n,i,s,e[l+14],17,-1502002290),s=_t(s,r,n,i,e[l+15],22,1236535329),i=pt(i,s,r,n,e[l+1],5,-165796510),n=pt(n,i,s,r,e[l+6],9,-1069501632),r=pt(r,n,i,s,e[l+11],14,643717713),s=pt(s,r,n,i,e[l],20,-373897302),i=pt(i,s,r,n,e[l+5],5,-701558691),n=pt(n,i,s,r,e[l+10],9,38016083),r=pt(r,n,i,s,e[l+15],14,-660478335),s=pt(s,r,n,i,e[l+4],20,-405537848),i=pt(i,s,r,n,e[l+9],5,568446438),n=pt(n,i,s,r,e[l+14],9,-1019803690),r=pt(r,n,i,s,e[l+3],14,-187363961),s=pt(s,r,n,i,e[l+8],20,1163531501),i=pt(i,s,r,n,e[l+13],5,-1444681467),n=pt(n,i,s,r,e[l+2],9,-51403784),r=pt(r,n,i,s,e[l+7],14,1735328473),s=pt(s,r,n,i,e[l+12],20,-1926607734),i=mt(i,s,r,n,e[l+5],4,-378558),n=mt(n,i,s,r,e[l+8],11,-2022574463),r=mt(r,n,i,s,e[l+11],16,1839030562),s=mt(s,r,n,i,e[l+14],23,-35309556),i=mt(i,s,r,n,e[l+1],4,-1530992060),n=mt(n,i,s,r,e[l+4],11,1272893353),r=mt(r,n,i,s,e[l+7],16,-155497632),s=mt(s,r,n,i,e[l+10],23,-1094730640),i=mt(i,s,r,n,e[l+13],4,681279174),n=mt(n,i,s,r,e[l],11,-358537222),r=mt(r,n,i,s,e[l+3],16,-722521979),s=mt(s,r,n,i,e[l+6],23,76029189),i=mt(i,s,r,n,e[l+9],4,-640364487),n=mt(n,i,s,r,e[l+12],11,-421815835),r=mt(r,n,i,s,e[l+15],16,530742520),s=mt(s,r,n,i,e[l+2],23,-995338651),i=gt(i,s,r,n,e[l],6,-198630844),n=gt(n,i,s,r,e[l+7],10,1126891415),r=gt(r,n,i,s,e[l+14],15,-1416354905),s=gt(s,r,n,i,e[l+5],21,-57434055),i=gt(i,s,r,n,e[l+12],6,1700485571),n=gt(n,i,s,r,e[l+3],10,-1894986606),r=gt(r,n,i,s,e[l+10],15,-1051523),s=gt(s,r,n,i,e[l+1],21,-2054922799),i=gt(i,s,r,n,e[l+8],6,1873313359),n=gt(n,i,s,r,e[l+15],10,-30611744),r=gt(r,n,i,s,e[l+6],15,-1560198380),s=gt(s,r,n,i,e[l+13],21,1309151649),i=gt(i,s,r,n,e[l+4],6,-145523070),n=gt(n,i,s,r,e[l+11],10,-1120210379),r=gt(r,n,i,s,e[l+2],15,718787259),s=gt(s,r,n,i,e[l+9],21,-343485551),i=vi(i,o),s=vi(s,a),r=vi(r,h),n=vi(n,u)}return[i,s,r,n]}function Lg(e){if(e.length===0)return[];const t=e.length*8,i=new Uint32Array(Oc(t));for(let s=0;s<t;s+=8)i[s>>5]|=(e[s/8]&255)<<s%32;return i}function vi(e,t){const i=(e&65535)+(t&65535);return(e>>16)+(t>>16)+(i>>16)<<16|i&65535}function Mg(e,t){return e<<t|e>>>32-t}function vr(e,t,i,s,r,n){return vi(Mg(vi(vi(t,e),vi(s,n)),r),i)}function _t(e,t,i,s,r,n,l){return vr(t&i|~t&s,e,t,r,n,l)}function pt(e,t,i,s,r,n,l){return vr(t&s|i&~s,e,t,r,n,l)}function mt(e,t,i,s,r,n,l){return vr(t^i^s,e,t,r,n,l)}function gt(e,t,i,s,r,n,l){return vr(i^(t|~s),e,t,r,n,l)}const Tg=Rc("v3",48,Cg),Dg=Tg,Ag=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),wa={randomUUID:Ag};function Rg(e,t,i){if(wa.randomUUID&&!t&&!e)return wa.randomUUID();e=e||{};const s=e.random||(e.rng||Dc)();if(s[6]=s[6]&15|64,s[8]=s[8]&63|128,t){i=i||0;for(let r=0;r<16;++r)t[i+r]=s[r];return t}return gr(s)}function Og(e,t,i,s){switch(e){case 0:return t&i^~t&s;case 1:return t^i^s;case 2:return t&i^t&s^i&s;case 3:return t^i^s}}function Pr(e,t){return e<<t|e>>>32-t}function Bg(e){const t=[1518500249,1859775393,2400959708,3395469782],i=[1732584193,4023233417,2562383102,271733878,3285377520];if(typeof e=="string"){const l=unescape(encodeURIComponent(e));e=[];for(let o=0;o<l.length;++o)e.push(l.charCodeAt(o))}else Array.isArray(e)||(e=Array.prototype.slice.call(e));e.push(128);const s=e.length/4+2,r=Math.ceil(s/16),n=new Array(r);for(let l=0;l<r;++l){const o=new Uint32Array(16);for(let a=0;a<16;++a)o[a]=e[l*64+a*4]<<24|e[l*64+a*4+1]<<16|e[l*64+a*4+2]<<8|e[l*64+a*4+3];n[l]=o}n[r-1][14]=(e.length-1)*8/Math.pow(2,32),n[r-1][14]=Math.floor(n[r-1][14]),n[r-1][15]=(e.length-1)*8&4294967295;for(let l=0;l<r;++l){const o=new Uint32Array(80);for(let v=0;v<16;++v)o[v]=n[l][v];for(let v=16;v<80;++v)o[v]=Pr(o[v-3]^o[v-8]^o[v-14]^o[v-16],1);let a=i[0],h=i[1],u=i[2],f=i[3],_=i[4];for(let v=0;v<80;++v){const b=Math.floor(v/20),g=Pr(a,5)+Og(b,h,u,f)+_+t[b]+o[v]>>>0;_=f,f=u,u=Pr(h,30)>>>0,h=a,a=g}i[0]=i[0]+a>>>0,i[1]=i[1]+h>>>0,i[2]=i[2]+u>>>0,i[3]=i[3]+f>>>0,i[4]=i[4]+_>>>0}return[i[0]>>24&255,i[0]>>16&255,i[0]>>8&255,i[0]&255,i[1]>>24&255,i[1]>>16&255,i[1]>>8&255,i[1]&255,i[2]>>24&255,i[2]>>16&255,i[2]>>8&255,i[2]&255,i[3]>>24&255,i[3]>>16&255,i[3]>>8&255,i[3]&255,i[4]>>24&255,i[4]>>16&255,i[4]>>8&255,i[4]&255]}const Hg=Rc("v5",80,Bg),xg=Hg,Pg="00000000-0000-0000-0000-000000000000";function Ig(e){if(!mr(e))throw TypeError("Invalid UUID");return parseInt(e.slice(14,15),16)}const an=Object.freeze(Object.defineProperty({__proto__:null,NIL:Pg,parse:Ac,stringify:vg,v1:bg,v3:Dg,v4:Rg,v5:xg,validate:mr,version:Ig},Symbol.toStringTag,{value:"Module"}));function Ng(e){let t,i;return t=new Qe({props:{slot:"input",type:xe.select,settingKey:"session.id",settingValue:e[1].id,options:e[6]}}),t.$on("changed",e[13]),{c(){ie(t.$$.fragment)},m(s,r){ee(t,s,r),i=!0},p(s,r){const n={};r&2&&(n.settingValue=s[1].id),t.$set(n)},i(s){i||(j(t.$$.fragment,s),i=!0)},o(s){W(t.$$.fragment,s),i=!1},d(s){te(t,s)}}}function Vg(e){let t,i;return t=new Qe({props:{slot:"input",block:!0,type:xe.text,settingKey:"session.name",settingValue:e[1].name,disabled:e[3]?!1:!e[4]}}),t.$on("changed",e[14]),{c(){ie(t.$$.fragment)},m(s,r){ee(t,s,r),i=!0},p(s,r){const n={};r&2&&(n.settingValue=s[1].name),r&24&&(n.disabled=s[3]?!1:!s[4]),t.$set(n)},i(s){i||(j(t.$$.fragment,s),i=!0)},o(s){W(t.$$.fragment,s),i=!1},d(s){te(t,s)}}}function jg(e){let t,i;return t=new Qe({props:{slot:"input",block:!0,type:xe.text,settingKey:"session.path",settingValue:e[1].path,disabled:e[3]?!1:!e[4]}}),t.$on("changed",e[15]),{c(){ie(t.$$.fragment)},m(s,r){ee(t,s,r),i=!0},p(s,r){const n={};r&2&&(n.settingValue=s[1].path),r&24&&(n.disabled=s[3]?!1:!s[4]),t.$set(n)},i(s){i||(j(t.$$.fragment,s),i=!0)},o(s){W(t.$$.fragment,s),i=!1},d(s){te(t,s)}}}function Fg(e){let t,i;return t=new Qe({props:{slot:"input",type:xe.select,settingKey:"session.type",settingValue:e[1].type,options:[{key:"console",text:"console"},{key:"notebook",text:"notebook"}],disabled:e[3]?!1:!e[4]}}),t.$on("changed",e[16]),{c(){ie(t.$$.fragment)},m(s,r){ee(t,s,r),i=!0},p(s,r){const n={};r&2&&(n.settingValue=s[1].type),r&24&&(n.disabled=s[3]?!1:!s[4]),t.$set(n)},i(s){i||(j(t.$$.fragment,s),i=!0)},o(s){W(t.$$.fragment,s),i=!1},d(s){te(t,s)}}}function Ug(e){var s,r;let t,i;return t=new Qe({props:{slot:"input",block:!0,type:xe.select,settingKey:"session.kernel",settingValue:e[1].kernel?((s=e[0].kernels.find(e[17]))==null?void 0:s.id)??((r=e[1].kernel)==null?void 0:r.name)??e[0].kernelspecs.default:"",options:e[3]?e[8]:e[7],disabled:e[3]?!1:!e[4]}}),t.$on("changed",e[18]),{c(){ie(t.$$.fragment)},m(n,l){ee(t,n,l),i=!0},p(n,l){var a,h;const o={};l&3&&(o.settingValue=n[1].kernel?((a=n[0].kernels.find(n[17]))==null?void 0:a.id)??((h=n[1].kernel)==null?void 0:h.name)??n[0].kernelspecs.default:""),l&8&&(o.options=n[3]?n[8]:n[7]),l&24&&(o.disabled=n[3]?!1:!n[4]),t.$set(o)},i(n){i||(j(t.$$.fragment,n),i=!0)},o(n){W(t.$$.fragment,n),i=!1},d(n){te(t,n)}}}function Wg(e){let t,i,s,r,n,l,o,a,h,u;return t=new Ye({props:{title:e[5].settings.sessionSettings.connect.title,text:e[5].settings.sessionSettings.connect.description,$$slots:{input:[Ng]},$$scope:{ctx:e}}}),s=new Ye({props:{title:e[5].settings.sessionSettings.name.title,text:e[5].settings.sessionSettings.name.description,block:!0,$$slots:{input:[Vg]},$$scope:{ctx:e}}}),n=new Ye({props:{title:e[5].settings.sessionSettings.path.title,text:e[5].settings.sessionSettings.path.description,block:!0,$$slots:{input:[jg]},$$scope:{ctx:e}}}),o=new Ye({props:{title:e[5].settings.sessionSettings.type.title,text:e[5].settings.sessionSettings.type.description,$$slots:{input:[Fg]},$$scope:{ctx:e}}}),h=new Ye({props:{title:e[5].settings.sessionSettings.kernel.title,text:e[5].settings.sessionSettings.kernel.description,block:!0,$$slots:{input:[Ug]},$$scope:{ctx:e}}}),{c(){ie(t.$$.fragment),i=fe(),ie(s.$$.fragment),r=fe(),ie(n.$$.fragment),l=fe(),ie(o.$$.fragment),a=fe(),ie(h.$$.fragment)},m(f,_){ee(t,f,_),J(f,i,_),ee(s,f,_),J(f,r,_),ee(n,f,_),J(f,l,_),ee(o,f,_),J(f,a,_),ee(h,f,_),u=!0},p(f,_){const v={};_&4194311&&(v.$$scope={dirty:_,ctx:f}),t.$set(v);const b={};_&4194334&&(b.$$scope={dirty:_,ctx:f}),s.$set(b);const g={};_&4194334&&(g.$$scope={dirty:_,ctx:f}),n.$set(g);const c={};_&4194334&&(c.$$scope={dirty:_,ctx:f}),o.$set(c);const d={};_&4194335&&(d.$$scope={dirty:_,ctx:f}),h.$set(d)},i(f){u||(j(t.$$.fragment,f),j(s.$$.fragment,f),j(n.$$.fragment,f),j(o.$$.fragment,f),j(h.$$.fragment,f),u=!0)},o(f){W(t.$$.fragment,f),W(s.$$.fragment,f),W(n.$$.fragment,f),W(o.$$.fragment,f),W(h.$$.fragment,f),u=!1},d(f){f&&(G(i),G(r),G(l),G(a)),te(t,f),te(s,f),te(n,f),te(o,f),te(h,f)}}}function zg(e){let t,i;return t=new Ps({props:{$$slots:{default:[Wg]},$$scope:{ctx:e}}}),{c(){ie(t.$$.fragment)},m(s,r){ee(t,s,r),i=!0},p(s,r){const n={};r&4194335&&(n.$$scope={dirty:r,ctx:s}),t.$set(n)},i(s){i||(j(t.$$.fragment,s),i=!0)},o(s){W(t.$$.fragment,s),i=!1},d(s){te(t,s)}}}function Yg(e){let t,i;return t=new Tc({props:{confirmButtonText:e[3]?e[5].settings.sessionSettings.confirm.new:e[4]?e[5].settings.sessionSettings.confirm.update:e[5].settings.sessionSettings.confirm.connect,$$slots:{default:[zg]},$$scope:{ctx:e}}}),t.$on("cancel",e[9]),t.$on("confirm",e[10]),{c(){ie(t.$$.fragment)},m(s,r){ee(t,s,r),i=!0},p(s,[r]){const n={};r&24&&(n.confirmButtonText=s[3]?s[5].settings.sessionSettings.confirm.new:s[4]?s[5].settings.sessionSettings.confirm.update:s[5].settings.sessionSettings.confirm.connect),r&4194335&&(n.$$scope={dirty:r,ctx:s}),t.$set(n)},i(s){i||(j(t.$$.fragment,s),i=!0)},o(s){W(t.$$.fragment,s),i=!1},d(s){te(t,s)}}}function qg(e,t,i){let{docID:s}=t,{docIAL:r}=t,{plugin:n}=t;const l=n.i18n,o=ai();let a=n.ial2session(r,!0),h=a,u=!0,f=!1,_=!1;v(h);function v(C){const L=n.isSessionRunning(C.id);i(3,u=!L),f=L,i(4,_=n.doc2session.has(s))}const b=n.sessions.map(C=>({key:C.id,text:C.name}));f?(a=n.ial2session({},!0),b.unshift({key:a.id,text:l.settings.sessionSettings.connect.options.new.text}),h=n.sessions.find(C=>C.id===h.id)??h):b.unshift({key:h.id,text:l.settings.sessionSettings.connect.options.new.text});const g=[],c=[];g.push({key:"",text:`⏹ ${l.settings.sessionSettings.kernel.options.no.text}`}),g.push(...Array.from(Object.values(n.kernelspecs.kernelspecs)).filter(C=>C!==void 0).map(C=>({key:C.name,text:`▶ ${l.settings.sessionSettings.kernel.options.new.text} [${C.language}] ${C.name}: ${C.display_name}`}))),c.push(...g),g.push(...n.sessions.filter(C=>C.kernel).map(C=>{const L=n.kernelspecs.kernelspecs[C.kernel.name];return{key:C.kernel.id,text:`♻ ${l.settings.sessionSettings.kernel.options.use.text} [${L==null?void 0:L.language}] ${L==null?void 0:L.name}: ${C.name}`}}));async function d(C){o("cancel",{id:s,event:C.detail.event,session:h})}async function m(C){var R,O,T,x,F,Y,q,M;try{var L=h;if(u)h.kernel&&(L=await((R=n.bridge)==null?void 0:R.call("jupyter.sessions.startNew",s,{name:h.name,type:h.type,path:h.path,kernel:{name:h.kernel.name}},{username:n.username,clientId:n.clientId})));else if(!_)h.kernel&&(L=await((O=n.bridge)==null?void 0:O.call("jupyter.sessions.connectTo",s,{model:h,username:n.username,clientId:n.newClientId})));else{const B=n.doc2session.get(s);B&&(h.name!==B.name&&(L=await((T=n.bridge)==null?void 0:T.call("jupyter.session.connection.setName",h.id,h.name))),h.path!==B.path&&(L=await((x=n.bridge)==null?void 0:x.call("jupyter.session.connection.setPath",h.id,h.path))),h.type!==B.type&&(L=await((F=n.bridge)==null?void 0:F.call("jupyter.session.connection.setType",h.id,h.type))),h.kernel?!B.kernel||h.kernel.name!==B.kernel.name?L=await((Y=n.bridge)==null?void 0:Y.call("jupyter.session.connection.changeKernel",h.id,{name:h.kernel.name})):(!B.kernel||h.kernel.id!==B.kernel.id)&&(L=await((q=n.bridge)==null?void 0:q.call("jupyter.session.connection.changeKernel",h.id,{id:h.kernel.id}))):L=await((M=n.bridge)==null?void 0:M.call("jupyter.session.connection.changeKernel",h.id,{})))}if(L)i(1,h=L),n.relateDoc2Session(s,L);else{n.siyuan.showMessage(l.messages.uninitialized.text,void 0,"error");return}await n.client.setBlockAttrs({id:s,attrs:n.session2ial(h,!0)})}catch(B){n.logger.warn(B),n.siyuan.showMessage(String(B),void 0,"error");return}o("confirm",{id:s,event:C.detail.event,session:h})}const p=async C=>{const L=C.detail.value;if(L===b[0].key)i(1,h=a);else{const R=n.sessions.find(O=>O.id===L);R&&i(1,h=R)}},y=async C=>{const L=C.detail.value;i(1,h.name=L,h),u&&i(2,a.name=L,a)},S=async C=>{const L=C.detail.value;i(1,h.path=L,h),u&&i(2,a.path=L,a)},E=async C=>{const L=C.detail.value;i(1,h.type=L,h),u&&i(2,a.type=L,a)},k=C=>{var L;return C.id===((L=h.kernel)==null?void 0:L.id)},w=async C=>{const L=C.detail.value;if(L==="")i(1,h.kernel=null,h),u&&i(2,a.kernel=null,a);else if(n.kernels.some(R=>R.id===L))h.kernel&&i(1,h.kernel.id=L,h),u&&a.kernel&&i(2,a.kernel.id=L,a);else{const R=an.v4();h.kernel&&(i(1,h.kernel.id=R,h),i(1,h.kernel.name=L,h)),u&&a.kernel&&(i(2,a.kernel.id=R,a),i(2,a.kernel.name=L,a))}};return e.$$set=C=>{"docID"in C&&i(11,s=C.docID),"docIAL"in C&&i(12,r=C.docIAL),"plugin"in C&&i(0,n=C.plugin)},e.$$.update=()=>{e.$$.dirty&2&&v(h)},[n,h,a,u,_,l,b,g,c,d,m,s,r,p,y,S,E,k,w]}class Zg extends Ve{constructor(t){super(),Ne(this,t,qg,Yg,Pe,{docID:11,docIAL:12,plugin:0})}}var Bc={exports:{}};(function(e,t){(function(i,s){e.exports=s()})(self,()=>(()=>{var i={4567:function(l,o,a){var h=this&&this.__decorate||function(p,y,S,E){var k,w=arguments.length,C=w<3?y:E===null?E=Object.getOwnPropertyDescriptor(y,S):E;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")C=Reflect.decorate(p,y,S,E);else for(var L=p.length-1;L>=0;L--)(k=p[L])&&(C=(w<3?k(C):w>3?k(y,S,C):k(y,S))||C);return w>3&&C&&Object.defineProperty(y,S,C),C},u=this&&this.__param||function(p,y){return function(S,E){y(S,E,p)}};Object.defineProperty(o,"__esModule",{value:!0}),o.AccessibilityManager=void 0;const f=a(9042),_=a(6114),v=a(9924),b=a(844),g=a(5596),c=a(4725),d=a(3656);let m=o.AccessibilityManager=class extends b.Disposable{constructor(p,y){super(),this._terminal=p,this._renderService=y,this._liveRegionLineCount=0,this._charsToConsume=[],this._charsToAnnounce="",this._accessibilityContainer=document.createElement("div"),this._accessibilityContainer.classList.add("xterm-accessibility"),this._rowContainer=document.createElement("div"),this._rowContainer.setAttribute("role","list"),this._rowContainer.classList.add("xterm-accessibility-tree"),this._rowElements=[];for(let S=0;S<this._terminal.rows;S++)this._rowElements[S]=this._createAccessibilityTreeNode(),this._rowContainer.appendChild(this._rowElements[S]);if(this._topBoundaryFocusListener=S=>this._handleBoundaryFocus(S,0),this._bottomBoundaryFocusListener=S=>this._handleBoundaryFocus(S,1),this._rowElements[0].addEventListener("focus",this._topBoundaryFocusListener),this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._refreshRowsDimensions(),this._accessibilityContainer.appendChild(this._rowContainer),this._liveRegion=document.createElement("div"),this._liveRegion.classList.add("live-region"),this._liveRegion.setAttribute("aria-live","assertive"),this._accessibilityContainer.appendChild(this._liveRegion),this._liveRegionDebouncer=this.register(new v.TimeBasedDebouncer(this._renderRows.bind(this))),!this._terminal.element)throw new Error("Cannot enable accessibility before Terminal.open");this._terminal.element.insertAdjacentElement("afterbegin",this._accessibilityContainer),this.register(this._terminal.onResize(S=>this._handleResize(S.rows))),this.register(this._terminal.onRender(S=>this._refreshRows(S.start,S.end))),this.register(this._terminal.onScroll(()=>this._refreshRows())),this.register(this._terminal.onA11yChar(S=>this._handleChar(S))),this.register(this._terminal.onLineFeed(()=>this._handleChar(`
`))),this.register(this._terminal.onA11yTab(S=>this._handleTab(S))),this.register(this._terminal.onKey(S=>this._handleKey(S.key))),this.register(this._terminal.onBlur(()=>this._clearLiveRegion())),this.register(this._renderService.onDimensionsChange(()=>this._refreshRowsDimensions())),this._screenDprMonitor=new g.ScreenDprMonitor(window),this.register(this._screenDprMonitor),this._screenDprMonitor.setListener(()=>this._refreshRowsDimensions()),this.register((0,d.addDisposableDomListener)(window,"resize",()=>this._refreshRowsDimensions())),this._refreshRows(),this.register((0,b.toDisposable)(()=>{this._accessibilityContainer.remove(),this._rowElements.length=0}))}_handleTab(p){for(let y=0;y<p;y++)this._handleChar(" ")}_handleChar(p){this._liveRegionLineCount<21&&(this._charsToConsume.length>0?this._charsToConsume.shift()!==p&&(this._charsToAnnounce+=p):this._charsToAnnounce+=p,p===`
`&&(this._liveRegionLineCount++,this._liveRegionLineCount===21&&(this._liveRegion.textContent+=f.tooMuchOutput)),_.isMac&&this._liveRegion.textContent&&this._liveRegion.textContent.length>0&&!this._liveRegion.parentNode&&setTimeout(()=>{this._accessibilityContainer.appendChild(this._liveRegion)},0))}_clearLiveRegion(){this._liveRegion.textContent="",this._liveRegionLineCount=0,_.isMac&&this._liveRegion.remove()}_handleKey(p){this._clearLiveRegion(),new RegExp("\\p{Control}","u").test(p)||this._charsToConsume.push(p)}_refreshRows(p,y){this._liveRegionDebouncer.refresh(p,y,this._terminal.rows)}_renderRows(p,y){const S=this._terminal.buffer,E=S.lines.length.toString();for(let k=p;k<=y;k++){const w=S.translateBufferLineToString(S.ydisp+k,!0),C=(S.ydisp+k+1).toString(),L=this._rowElements[k];L&&(w.length===0?L.innerText=" ":L.textContent=w,L.setAttribute("aria-posinset",C),L.setAttribute("aria-setsize",E))}this._announceCharacters()}_announceCharacters(){this._charsToAnnounce.length!==0&&(this._liveRegion.textContent+=this._charsToAnnounce,this._charsToAnnounce="")}_handleBoundaryFocus(p,y){const S=p.target,E=this._rowElements[y===0?1:this._rowElements.length-2];if(S.getAttribute("aria-posinset")===(y===0?"1":`${this._terminal.buffer.lines.length}`)||p.relatedTarget!==E)return;let k,w;if(y===0?(k=S,w=this._rowElements.pop(),this._rowContainer.removeChild(w)):(k=this._rowElements.shift(),w=S,this._rowContainer.removeChild(k)),k.removeEventListener("focus",this._topBoundaryFocusListener),w.removeEventListener("focus",this._bottomBoundaryFocusListener),y===0){const C=this._createAccessibilityTreeNode();this._rowElements.unshift(C),this._rowContainer.insertAdjacentElement("afterbegin",C)}else{const C=this._createAccessibilityTreeNode();this._rowElements.push(C),this._rowContainer.appendChild(C)}this._rowElements[0].addEventListener("focus",this._topBoundaryFocusListener),this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._terminal.scrollLines(y===0?-1:1),this._rowElements[y===0?1:this._rowElements.length-2].focus(),p.preventDefault(),p.stopImmediatePropagation()}_handleResize(p){this._rowElements[this._rowElements.length-1].removeEventListener("focus",this._bottomBoundaryFocusListener);for(let y=this._rowContainer.children.length;y<this._terminal.rows;y++)this._rowElements[y]=this._createAccessibilityTreeNode(),this._rowContainer.appendChild(this._rowElements[y]);for(;this._rowElements.length>p;)this._rowContainer.removeChild(this._rowElements.pop());this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._refreshRowsDimensions()}_createAccessibilityTreeNode(){const p=document.createElement("div");return p.setAttribute("role","listitem"),p.tabIndex=-1,this._refreshRowDimensions(p),p}_refreshRowsDimensions(){if(this._renderService.dimensions.css.cell.height){this._accessibilityContainer.style.width=`${this._renderService.dimensions.css.canvas.width}px`,this._rowElements.length!==this._terminal.rows&&this._handleResize(this._terminal.rows);for(let p=0;p<this._terminal.rows;p++)this._refreshRowDimensions(this._rowElements[p])}}_refreshRowDimensions(p){p.style.height=`${this._renderService.dimensions.css.cell.height}px`}};o.AccessibilityManager=m=h([u(1,c.IRenderService)],m)},3614:(l,o)=>{function a(_){return _.replace(/\r?\n/g,"\r")}function h(_,v){return v?"\x1B[200~"+_+"\x1B[201~":_}function u(_,v,b,g){_=h(_=a(_),b.decPrivateModes.bracketedPasteMode&&g.rawOptions.ignoreBracketedPasteMode!==!0),b.triggerDataEvent(_,!0),v.value=""}function f(_,v,b){const g=b.getBoundingClientRect(),c=_.clientX-g.left-10,d=_.clientY-g.top-10;v.style.width="20px",v.style.height="20px",v.style.left=`${c}px`,v.style.top=`${d}px`,v.style.zIndex="1000",v.focus()}Object.defineProperty(o,"__esModule",{value:!0}),o.rightClickHandler=o.moveTextAreaUnderMouseCursor=o.paste=o.handlePasteEvent=o.copyHandler=o.bracketTextForPaste=o.prepareTextForTerminal=void 0,o.prepareTextForTerminal=a,o.bracketTextForPaste=h,o.copyHandler=function(_,v){_.clipboardData&&_.clipboardData.setData("text/plain",v.selectionText),_.preventDefault()},o.handlePasteEvent=function(_,v,b,g){_.stopPropagation(),_.clipboardData&&u(_.clipboardData.getData("text/plain"),v,b,g)},o.paste=u,o.moveTextAreaUnderMouseCursor=f,o.rightClickHandler=function(_,v,b,g,c){f(_,v,b),c&&g.rightClickSelect(_),v.value=g.selectionText,v.select()}},7239:(l,o,a)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.ColorContrastCache=void 0;const h=a(1505);o.ColorContrastCache=class{constructor(){this._color=new h.TwoKeyMap,this._css=new h.TwoKeyMap}setCss(u,f,_){this._css.set(u,f,_)}getCss(u,f){return this._css.get(u,f)}setColor(u,f,_){this._color.set(u,f,_)}getColor(u,f){return this._color.get(u,f)}clear(){this._color.clear(),this._css.clear()}}},3656:(l,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.addDisposableDomListener=void 0,o.addDisposableDomListener=function(a,h,u,f){a.addEventListener(h,u,f);let _=!1;return{dispose:()=>{_||(_=!0,a.removeEventListener(h,u,f))}}}},6465:function(l,o,a){var h=this&&this.__decorate||function(c,d,m,p){var y,S=arguments.length,E=S<3?d:p===null?p=Object.getOwnPropertyDescriptor(d,m):p;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")E=Reflect.decorate(c,d,m,p);else for(var k=c.length-1;k>=0;k--)(y=c[k])&&(E=(S<3?y(E):S>3?y(d,m,E):y(d,m))||E);return S>3&&E&&Object.defineProperty(d,m,E),E},u=this&&this.__param||function(c,d){return function(m,p){d(m,p,c)}};Object.defineProperty(o,"__esModule",{value:!0}),o.Linkifier2=void 0;const f=a(3656),_=a(8460),v=a(844),b=a(2585);let g=o.Linkifier2=class extends v.Disposable{get currentLink(){return this._currentLink}constructor(c){super(),this._bufferService=c,this._linkProviders=[],this._linkCacheDisposables=[],this._isMouseOut=!0,this._wasResized=!1,this._activeLine=-1,this._onShowLinkUnderline=this.register(new _.EventEmitter),this.onShowLinkUnderline=this._onShowLinkUnderline.event,this._onHideLinkUnderline=this.register(new _.EventEmitter),this.onHideLinkUnderline=this._onHideLinkUnderline.event,this.register((0,v.getDisposeArrayDisposable)(this._linkCacheDisposables)),this.register((0,v.toDisposable)(()=>{this._lastMouseEvent=void 0})),this.register(this._bufferService.onResize(()=>{this._clearCurrentLink(),this._wasResized=!0}))}registerLinkProvider(c){return this._linkProviders.push(c),{dispose:()=>{const d=this._linkProviders.indexOf(c);d!==-1&&this._linkProviders.splice(d,1)}}}attachToDom(c,d,m){this._element=c,this._mouseService=d,this._renderService=m,this.register((0,f.addDisposableDomListener)(this._element,"mouseleave",()=>{this._isMouseOut=!0,this._clearCurrentLink()})),this.register((0,f.addDisposableDomListener)(this._element,"mousemove",this._handleMouseMove.bind(this))),this.register((0,f.addDisposableDomListener)(this._element,"mousedown",this._handleMouseDown.bind(this))),this.register((0,f.addDisposableDomListener)(this._element,"mouseup",this._handleMouseUp.bind(this)))}_handleMouseMove(c){if(this._lastMouseEvent=c,!this._element||!this._mouseService)return;const d=this._positionFromMouseEvent(c,this._element,this._mouseService);if(!d)return;this._isMouseOut=!1;const m=c.composedPath();for(let p=0;p<m.length;p++){const y=m[p];if(y.classList.contains("xterm"))break;if(y.classList.contains("xterm-hover"))return}this._lastBufferCell&&d.x===this._lastBufferCell.x&&d.y===this._lastBufferCell.y||(this._handleHover(d),this._lastBufferCell=d)}_handleHover(c){if(this._activeLine!==c.y||this._wasResized)return this._clearCurrentLink(),this._askForLink(c,!1),void(this._wasResized=!1);this._currentLink&&this._linkAtPosition(this._currentLink.link,c)||(this._clearCurrentLink(),this._askForLink(c,!0))}_askForLink(c,d){var m,p;this._activeProviderReplies&&d||((m=this._activeProviderReplies)===null||m===void 0||m.forEach(S=>{S==null||S.forEach(E=>{E.link.dispose&&E.link.dispose()})}),this._activeProviderReplies=new Map,this._activeLine=c.y);let y=!1;for(const[S,E]of this._linkProviders.entries())d?!((p=this._activeProviderReplies)===null||p===void 0)&&p.get(S)&&(y=this._checkLinkProviderResult(S,c,y)):E.provideLinks(c.y,k=>{var w,C;if(this._isMouseOut)return;const L=k==null?void 0:k.map(R=>({link:R}));(w=this._activeProviderReplies)===null||w===void 0||w.set(S,L),y=this._checkLinkProviderResult(S,c,y),((C=this._activeProviderReplies)===null||C===void 0?void 0:C.size)===this._linkProviders.length&&this._removeIntersectingLinks(c.y,this._activeProviderReplies)})}_removeIntersectingLinks(c,d){const m=new Set;for(let p=0;p<d.size;p++){const y=d.get(p);if(y)for(let S=0;S<y.length;S++){const E=y[S],k=E.link.range.start.y<c?0:E.link.range.start.x,w=E.link.range.end.y>c?this._bufferService.cols:E.link.range.end.x;for(let C=k;C<=w;C++){if(m.has(C)){y.splice(S--,1);break}m.add(C)}}}}_checkLinkProviderResult(c,d,m){var p;if(!this._activeProviderReplies)return m;const y=this._activeProviderReplies.get(c);let S=!1;for(let E=0;E<c;E++)this._activeProviderReplies.has(E)&&!this._activeProviderReplies.get(E)||(S=!0);if(!S&&y){const E=y.find(k=>this._linkAtPosition(k.link,d));E&&(m=!0,this._handleNewLink(E))}if(this._activeProviderReplies.size===this._linkProviders.length&&!m)for(let E=0;E<this._activeProviderReplies.size;E++){const k=(p=this._activeProviderReplies.get(E))===null||p===void 0?void 0:p.find(w=>this._linkAtPosition(w.link,d));if(k){m=!0,this._handleNewLink(k);break}}return m}_handleMouseDown(){this._mouseDownLink=this._currentLink}_handleMouseUp(c){if(!this._element||!this._mouseService||!this._currentLink)return;const d=this._positionFromMouseEvent(c,this._element,this._mouseService);d&&this._mouseDownLink===this._currentLink&&this._linkAtPosition(this._currentLink.link,d)&&this._currentLink.link.activate(c,this._currentLink.link.text)}_clearCurrentLink(c,d){this._element&&this._currentLink&&this._lastMouseEvent&&(!c||!d||this._currentLink.link.range.start.y>=c&&this._currentLink.link.range.end.y<=d)&&(this._linkLeave(this._element,this._currentLink.link,this._lastMouseEvent),this._currentLink=void 0,(0,v.disposeArray)(this._linkCacheDisposables))}_handleNewLink(c){if(!this._element||!this._lastMouseEvent||!this._mouseService)return;const d=this._positionFromMouseEvent(this._lastMouseEvent,this._element,this._mouseService);d&&this._linkAtPosition(c.link,d)&&(this._currentLink=c,this._currentLink.state={decorations:{underline:c.link.decorations===void 0||c.link.decorations.underline,pointerCursor:c.link.decorations===void 0||c.link.decorations.pointerCursor},isHovered:!0},this._linkHover(this._element,c.link,this._lastMouseEvent),c.link.decorations={},Object.defineProperties(c.link.decorations,{pointerCursor:{get:()=>{var m,p;return(p=(m=this._currentLink)===null||m===void 0?void 0:m.state)===null||p===void 0?void 0:p.decorations.pointerCursor},set:m=>{var p,y;!((p=this._currentLink)===null||p===void 0)&&p.state&&this._currentLink.state.decorations.pointerCursor!==m&&(this._currentLink.state.decorations.pointerCursor=m,this._currentLink.state.isHovered&&((y=this._element)===null||y===void 0||y.classList.toggle("xterm-cursor-pointer",m)))}},underline:{get:()=>{var m,p;return(p=(m=this._currentLink)===null||m===void 0?void 0:m.state)===null||p===void 0?void 0:p.decorations.underline},set:m=>{var p,y,S;!((p=this._currentLink)===null||p===void 0)&&p.state&&((S=(y=this._currentLink)===null||y===void 0?void 0:y.state)===null||S===void 0?void 0:S.decorations.underline)!==m&&(this._currentLink.state.decorations.underline=m,this._currentLink.state.isHovered&&this._fireUnderlineEvent(c.link,m))}}}),this._renderService&&this._linkCacheDisposables.push(this._renderService.onRenderedViewportChange(m=>{if(!this._currentLink)return;const p=m.start===0?0:m.start+1+this._bufferService.buffer.ydisp,y=this._bufferService.buffer.ydisp+1+m.end;if(this._currentLink.link.range.start.y>=p&&this._currentLink.link.range.end.y<=y&&(this._clearCurrentLink(p,y),this._lastMouseEvent&&this._element)){const S=this._positionFromMouseEvent(this._lastMouseEvent,this._element,this._mouseService);S&&this._askForLink(S,!1)}})))}_linkHover(c,d,m){var p;!((p=this._currentLink)===null||p===void 0)&&p.state&&(this._currentLink.state.isHovered=!0,this._currentLink.state.decorations.underline&&this._fireUnderlineEvent(d,!0),this._currentLink.state.decorations.pointerCursor&&c.classList.add("xterm-cursor-pointer")),d.hover&&d.hover(m,d.text)}_fireUnderlineEvent(c,d){const m=c.range,p=this._bufferService.buffer.ydisp,y=this._createLinkUnderlineEvent(m.start.x-1,m.start.y-p-1,m.end.x,m.end.y-p-1,void 0);(d?this._onShowLinkUnderline:this._onHideLinkUnderline).fire(y)}_linkLeave(c,d,m){var p;!((p=this._currentLink)===null||p===void 0)&&p.state&&(this._currentLink.state.isHovered=!1,this._currentLink.state.decorations.underline&&this._fireUnderlineEvent(d,!1),this._currentLink.state.decorations.pointerCursor&&c.classList.remove("xterm-cursor-pointer")),d.leave&&d.leave(m,d.text)}_linkAtPosition(c,d){const m=c.range.start.y*this._bufferService.cols+c.range.start.x,p=c.range.end.y*this._bufferService.cols+c.range.end.x,y=d.y*this._bufferService.cols+d.x;return m<=y&&y<=p}_positionFromMouseEvent(c,d,m){const p=m.getCoords(c,d,this._bufferService.cols,this._bufferService.rows);if(p)return{x:p[0],y:p[1]+this._bufferService.buffer.ydisp}}_createLinkUnderlineEvent(c,d,m,p,y){return{x1:c,y1:d,x2:m,y2:p,cols:this._bufferService.cols,fg:y}}};o.Linkifier2=g=h([u(0,b.IBufferService)],g)},9042:(l,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.tooMuchOutput=o.promptLabel=void 0,o.promptLabel="Terminal input",o.tooMuchOutput="Too much output to announce, navigate to rows manually to read"},3730:function(l,o,a){var h=this&&this.__decorate||function(g,c,d,m){var p,y=arguments.length,S=y<3?c:m===null?m=Object.getOwnPropertyDescriptor(c,d):m;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")S=Reflect.decorate(g,c,d,m);else for(var E=g.length-1;E>=0;E--)(p=g[E])&&(S=(y<3?p(S):y>3?p(c,d,S):p(c,d))||S);return y>3&&S&&Object.defineProperty(c,d,S),S},u=this&&this.__param||function(g,c){return function(d,m){c(d,m,g)}};Object.defineProperty(o,"__esModule",{value:!0}),o.OscLinkProvider=void 0;const f=a(511),_=a(2585);let v=o.OscLinkProvider=class{constructor(g,c,d){this._bufferService=g,this._optionsService=c,this._oscLinkService=d}provideLinks(g,c){var d;const m=this._bufferService.buffer.lines.get(g-1);if(!m)return void c(void 0);const p=[],y=this._optionsService.rawOptions.linkHandler,S=new f.CellData,E=m.getTrimmedLength();let k=-1,w=-1,C=!1;for(let L=0;L<E;L++)if(w!==-1||m.hasContent(L)){if(m.loadCell(L,S),S.hasExtendedAttrs()&&S.extended.urlId){if(w===-1){w=L,k=S.extended.urlId;continue}C=S.extended.urlId!==k}else w!==-1&&(C=!0);if(C||w!==-1&&L===E-1){const R=(d=this._oscLinkService.getLinkData(k))===null||d===void 0?void 0:d.uri;if(R){const O={start:{x:w+1,y:g},end:{x:L+(C||L!==E-1?0:1),y:g}};let T=!1;if(!(y!=null&&y.allowNonHttpProtocols))try{const x=new URL(R);["http:","https:"].includes(x.protocol)||(T=!0)}catch{T=!0}T||p.push({text:R,range:O,activate:(x,F)=>y?y.activate(x,F,O):b(0,F),hover:(x,F)=>{var Y;return(Y=y==null?void 0:y.hover)===null||Y===void 0?void 0:Y.call(y,x,F,O)},leave:(x,F)=>{var Y;return(Y=y==null?void 0:y.leave)===null||Y===void 0?void 0:Y.call(y,x,F,O)}})}C=!1,S.hasExtendedAttrs()&&S.extended.urlId?(w=L,k=S.extended.urlId):(w=-1,k=-1)}}c(p)}};function b(g,c){if(confirm(`Do you want to navigate to ${c}?

WARNING: This link could potentially be dangerous`)){const d=window.open();if(d){try{d.opener=null}catch{}d.location.href=c}else console.warn("Opening link blocked as opener could not be cleared")}}o.OscLinkProvider=v=h([u(0,_.IBufferService),u(1,_.IOptionsService),u(2,_.IOscLinkService)],v)},6193:(l,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.RenderDebouncer=void 0,o.RenderDebouncer=class{constructor(a,h){this._parentWindow=a,this._renderCallback=h,this._refreshCallbacks=[]}dispose(){this._animationFrame&&(this._parentWindow.cancelAnimationFrame(this._animationFrame),this._animationFrame=void 0)}addRefreshCallback(a){return this._refreshCallbacks.push(a),this._animationFrame||(this._animationFrame=this._parentWindow.requestAnimationFrame(()=>this._innerRefresh())),this._animationFrame}refresh(a,h,u){this._rowCount=u,a=a!==void 0?a:0,h=h!==void 0?h:this._rowCount-1,this._rowStart=this._rowStart!==void 0?Math.min(this._rowStart,a):a,this._rowEnd=this._rowEnd!==void 0?Math.max(this._rowEnd,h):h,this._animationFrame||(this._animationFrame=this._parentWindow.requestAnimationFrame(()=>this._innerRefresh()))}_innerRefresh(){if(this._animationFrame=void 0,this._rowStart===void 0||this._rowEnd===void 0||this._rowCount===void 0)return void this._runRefreshCallbacks();const a=Math.max(this._rowStart,0),h=Math.min(this._rowEnd,this._rowCount-1);this._rowStart=void 0,this._rowEnd=void 0,this._renderCallback(a,h),this._runRefreshCallbacks()}_runRefreshCallbacks(){for(const a of this._refreshCallbacks)a(0);this._refreshCallbacks=[]}}},5596:(l,o,a)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.ScreenDprMonitor=void 0;const h=a(844);class u extends h.Disposable{constructor(_){super(),this._parentWindow=_,this._currentDevicePixelRatio=this._parentWindow.devicePixelRatio,this.register((0,h.toDisposable)(()=>{this.clearListener()}))}setListener(_){this._listener&&this.clearListener(),this._listener=_,this._outerListener=()=>{this._listener&&(this._listener(this._parentWindow.devicePixelRatio,this._currentDevicePixelRatio),this._updateDpr())},this._updateDpr()}_updateDpr(){var _;this._outerListener&&((_=this._resolutionMediaMatchList)===null||_===void 0||_.removeListener(this._outerListener),this._currentDevicePixelRatio=this._parentWindow.devicePixelRatio,this._resolutionMediaMatchList=this._parentWindow.matchMedia(`screen and (resolution: ${this._parentWindow.devicePixelRatio}dppx)`),this._resolutionMediaMatchList.addListener(this._outerListener))}clearListener(){this._resolutionMediaMatchList&&this._listener&&this._outerListener&&(this._resolutionMediaMatchList.removeListener(this._outerListener),this._resolutionMediaMatchList=void 0,this._listener=void 0,this._outerListener=void 0)}}o.ScreenDprMonitor=u},3236:(l,o,a)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.Terminal=void 0;const h=a(3614),u=a(3656),f=a(6465),_=a(9042),v=a(3730),b=a(1680),g=a(3107),c=a(5744),d=a(2950),m=a(1296),p=a(428),y=a(4269),S=a(5114),E=a(8934),k=a(3230),w=a(9312),C=a(4725),L=a(6731),R=a(8055),O=a(8969),T=a(8460),x=a(844),F=a(6114),Y=a(8437),q=a(2584),M=a(7399),B=a(5941),A=a(9074),H=a(2585),N=a(5435),se=a(4567),he=typeof window<"u"?window.document:null;class ae extends O.CoreTerminal{get onFocus(){return this._onFocus.event}get onBlur(){return this._onBlur.event}get onA11yChar(){return this._onA11yCharEmitter.event}get onA11yTab(){return this._onA11yTabEmitter.event}get onWillOpen(){return this._onWillOpen.event}constructor(D={}){super(D),this.browser=F,this._keyDownHandled=!1,this._keyDownSeen=!1,this._keyPressHandled=!1,this._unprocessedDeadKey=!1,this._accessibilityManager=this.register(new x.MutableDisposable),this._onCursorMove=this.register(new T.EventEmitter),this.onCursorMove=this._onCursorMove.event,this._onKey=this.register(new T.EventEmitter),this.onKey=this._onKey.event,this._onRender=this.register(new T.EventEmitter),this.onRender=this._onRender.event,this._onSelectionChange=this.register(new T.EventEmitter),this.onSelectionChange=this._onSelectionChange.event,this._onTitleChange=this.register(new T.EventEmitter),this.onTitleChange=this._onTitleChange.event,this._onBell=this.register(new T.EventEmitter),this.onBell=this._onBell.event,this._onFocus=this.register(new T.EventEmitter),this._onBlur=this.register(new T.EventEmitter),this._onA11yCharEmitter=this.register(new T.EventEmitter),this._onA11yTabEmitter=this.register(new T.EventEmitter),this._onWillOpen=this.register(new T.EventEmitter),this._setup(),this.linkifier2=this.register(this._instantiationService.createInstance(f.Linkifier2)),this.linkifier2.registerLinkProvider(this._instantiationService.createInstance(v.OscLinkProvider)),this._decorationService=this._instantiationService.createInstance(A.DecorationService),this._instantiationService.setService(H.IDecorationService,this._decorationService),this.register(this._inputHandler.onRequestBell(()=>this._onBell.fire())),this.register(this._inputHandler.onRequestRefreshRows((V,K)=>this.refresh(V,K))),this.register(this._inputHandler.onRequestSendFocus(()=>this._reportFocus())),this.register(this._inputHandler.onRequestReset(()=>this.reset())),this.register(this._inputHandler.onRequestWindowsOptionsReport(V=>this._reportWindowsOptions(V))),this.register(this._inputHandler.onColor(V=>this._handleColorEvent(V))),this.register((0,T.forwardEvent)(this._inputHandler.onCursorMove,this._onCursorMove)),this.register((0,T.forwardEvent)(this._inputHandler.onTitleChange,this._onTitleChange)),this.register((0,T.forwardEvent)(this._inputHandler.onA11yChar,this._onA11yCharEmitter)),this.register((0,T.forwardEvent)(this._inputHandler.onA11yTab,this._onA11yTabEmitter)),this.register(this._bufferService.onResize(V=>this._afterResize(V.cols,V.rows))),this.register((0,x.toDisposable)(()=>{var V,K;this._customKeyEventHandler=void 0,(K=(V=this.element)===null||V===void 0?void 0:V.parentNode)===null||K===void 0||K.removeChild(this.element)}))}_handleColorEvent(D){if(this._themeService)for(const V of D){let K,Z="";switch(V.index){case 256:K="foreground",Z="10";break;case 257:K="background",Z="11";break;case 258:K="cursor",Z="12";break;default:K="ansi",Z="4;"+V.index}switch(V.type){case 0:const _e=R.color.toColorRGB(K==="ansi"?this._themeService.colors.ansi[V.index]:this._themeService.colors[K]);this.coreService.triggerDataEvent(`${q.C0.ESC}]${Z};${(0,B.toRgbString)(_e)}${q.C1_ESCAPED.ST}`);break;case 1:if(K==="ansi")this._themeService.modifyColors(Q=>Q.ansi[V.index]=R.rgba.toColor(...V.color));else{const Q=K;this._themeService.modifyColors(Ee=>Ee[Q]=R.rgba.toColor(...V.color))}break;case 2:this._themeService.restoreColor(V.index)}}}_setup(){super._setup(),this._customKeyEventHandler=void 0}get buffer(){return this.buffers.active}focus(){this.textarea&&this.textarea.focus({preventScroll:!0})}_handleScreenReaderModeOptionChange(D){D?!this._accessibilityManager.value&&this._renderService&&(this._accessibilityManager.value=this._instantiationService.createInstance(se.AccessibilityManager,this)):this._accessibilityManager.clear()}_handleTextAreaFocus(D){this.coreService.decPrivateModes.sendFocus&&this.coreService.triggerDataEvent(q.C0.ESC+"[I"),this.updateCursorStyle(D),this.element.classList.add("focus"),this._showCursor(),this._onFocus.fire()}blur(){var D;return(D=this.textarea)===null||D===void 0?void 0:D.blur()}_handleTextAreaBlur(){this.textarea.value="",this.refresh(this.buffer.y,this.buffer.y),this.coreService.decPrivateModes.sendFocus&&this.coreService.triggerDataEvent(q.C0.ESC+"[O"),this.element.classList.remove("focus"),this._onBlur.fire()}_syncTextArea(){if(!this.textarea||!this.buffer.isCursorInViewport||this._compositionHelper.isComposing||!this._renderService)return;const D=this.buffer.ybase+this.buffer.y,V=this.buffer.lines.get(D);if(!V)return;const K=Math.min(this.buffer.x,this.cols-1),Z=this._renderService.dimensions.css.cell.height,_e=V.getWidth(K),Q=this._renderService.dimensions.css.cell.width*_e,Ee=this.buffer.y*this._renderService.dimensions.css.cell.height,He=K*this._renderService.dimensions.css.cell.width;this.textarea.style.left=He+"px",this.textarea.style.top=Ee+"px",this.textarea.style.width=Q+"px",this.textarea.style.height=Z+"px",this.textarea.style.lineHeight=Z+"px",this.textarea.style.zIndex="-5"}_initGlobal(){this._bindKeys(),this.register((0,u.addDisposableDomListener)(this.element,"copy",V=>{this.hasSelection()&&(0,h.copyHandler)(V,this._selectionService)}));const D=V=>(0,h.handlePasteEvent)(V,this.textarea,this.coreService,this.optionsService);this.register((0,u.addDisposableDomListener)(this.textarea,"paste",D)),this.register((0,u.addDisposableDomListener)(this.element,"paste",D)),F.isFirefox?this.register((0,u.addDisposableDomListener)(this.element,"mousedown",V=>{V.button===2&&(0,h.rightClickHandler)(V,this.textarea,this.screenElement,this._selectionService,this.options.rightClickSelectsWord)})):this.register((0,u.addDisposableDomListener)(this.element,"contextmenu",V=>{(0,h.rightClickHandler)(V,this.textarea,this.screenElement,this._selectionService,this.options.rightClickSelectsWord)})),F.isLinux&&this.register((0,u.addDisposableDomListener)(this.element,"auxclick",V=>{V.button===1&&(0,h.moveTextAreaUnderMouseCursor)(V,this.textarea,this.screenElement)}))}_bindKeys(){this.register((0,u.addDisposableDomListener)(this.textarea,"keyup",D=>this._keyUp(D),!0)),this.register((0,u.addDisposableDomListener)(this.textarea,"keydown",D=>this._keyDown(D),!0)),this.register((0,u.addDisposableDomListener)(this.textarea,"keypress",D=>this._keyPress(D),!0)),this.register((0,u.addDisposableDomListener)(this.textarea,"compositionstart",()=>this._compositionHelper.compositionstart())),this.register((0,u.addDisposableDomListener)(this.textarea,"compositionupdate",D=>this._compositionHelper.compositionupdate(D))),this.register((0,u.addDisposableDomListener)(this.textarea,"compositionend",()=>this._compositionHelper.compositionend())),this.register((0,u.addDisposableDomListener)(this.textarea,"input",D=>this._inputEvent(D),!0)),this.register(this.onRender(()=>this._compositionHelper.updateCompositionElements()))}open(D){var V;if(!D)throw new Error("Terminal requires a parent element.");D.isConnected||this._logService.debug("Terminal.open was called on an element that was not attached to the DOM"),this._document=D.ownerDocument,this.element=this._document.createElement("div"),this.element.dir="ltr",this.element.classList.add("terminal"),this.element.classList.add("xterm"),D.appendChild(this.element);const K=he.createDocumentFragment();this._viewportElement=he.createElement("div"),this._viewportElement.classList.add("xterm-viewport"),K.appendChild(this._viewportElement),this._viewportScrollArea=he.createElement("div"),this._viewportScrollArea.classList.add("xterm-scroll-area"),this._viewportElement.appendChild(this._viewportScrollArea),this.screenElement=he.createElement("div"),this.screenElement.classList.add("xterm-screen"),this._helperContainer=he.createElement("div"),this._helperContainer.classList.add("xterm-helpers"),this.screenElement.appendChild(this._helperContainer),K.appendChild(this.screenElement),this.textarea=he.createElement("textarea"),this.textarea.classList.add("xterm-helper-textarea"),this.textarea.setAttribute("aria-label",_.promptLabel),F.isChromeOS||this.textarea.setAttribute("aria-multiline","false"),this.textarea.setAttribute("autocorrect","off"),this.textarea.setAttribute("autocapitalize","off"),this.textarea.setAttribute("spellcheck","false"),this.textarea.tabIndex=0,this._coreBrowserService=this._instantiationService.createInstance(S.CoreBrowserService,this.textarea,(V=this._document.defaultView)!==null&&V!==void 0?V:window),this._instantiationService.setService(C.ICoreBrowserService,this._coreBrowserService),this.register((0,u.addDisposableDomListener)(this.textarea,"focus",Z=>this._handleTextAreaFocus(Z))),this.register((0,u.addDisposableDomListener)(this.textarea,"blur",()=>this._handleTextAreaBlur())),this._helperContainer.appendChild(this.textarea),this._charSizeService=this._instantiationService.createInstance(p.CharSizeService,this._document,this._helperContainer),this._instantiationService.setService(C.ICharSizeService,this._charSizeService),this._themeService=this._instantiationService.createInstance(L.ThemeService),this._instantiationService.setService(C.IThemeService,this._themeService),this._characterJoinerService=this._instantiationService.createInstance(y.CharacterJoinerService),this._instantiationService.setService(C.ICharacterJoinerService,this._characterJoinerService),this._renderService=this.register(this._instantiationService.createInstance(k.RenderService,this.rows,this.screenElement)),this._instantiationService.setService(C.IRenderService,this._renderService),this.register(this._renderService.onRenderedViewportChange(Z=>this._onRender.fire(Z))),this.onResize(Z=>this._renderService.resize(Z.cols,Z.rows)),this._compositionView=he.createElement("div"),this._compositionView.classList.add("composition-view"),this._compositionHelper=this._instantiationService.createInstance(d.CompositionHelper,this.textarea,this._compositionView),this._helperContainer.appendChild(this._compositionView),this.element.appendChild(K);try{this._onWillOpen.fire(this.element)}catch{}this._renderService.hasRenderer()||this._renderService.setRenderer(this._createRenderer()),this._mouseService=this._instantiationService.createInstance(E.MouseService),this._instantiationService.setService(C.IMouseService,this._mouseService),this.viewport=this._instantiationService.createInstance(b.Viewport,this._viewportElement,this._viewportScrollArea),this.viewport.onRequestScrollLines(Z=>this.scrollLines(Z.amount,Z.suppressScrollEvent,1)),this.register(this._inputHandler.onRequestSyncScrollBar(()=>this.viewport.syncScrollArea())),this.register(this.viewport),this.register(this.onCursorMove(()=>{this._renderService.handleCursorMove(),this._syncTextArea()})),this.register(this.onResize(()=>this._renderService.handleResize(this.cols,this.rows))),this.register(this.onBlur(()=>this._renderService.handleBlur())),this.register(this.onFocus(()=>this._renderService.handleFocus())),this.register(this._renderService.onDimensionsChange(()=>this.viewport.syncScrollArea())),this._selectionService=this.register(this._instantiationService.createInstance(w.SelectionService,this.element,this.screenElement,this.linkifier2)),this._instantiationService.setService(C.ISelectionService,this._selectionService),this.register(this._selectionService.onRequestScrollLines(Z=>this.scrollLines(Z.amount,Z.suppressScrollEvent))),this.register(this._selectionService.onSelectionChange(()=>this._onSelectionChange.fire())),this.register(this._selectionService.onRequestRedraw(Z=>this._renderService.handleSelectionChanged(Z.start,Z.end,Z.columnSelectMode))),this.register(this._selectionService.onLinuxMouseSelection(Z=>{this.textarea.value=Z,this.textarea.focus(),this.textarea.select()})),this.register(this._onScroll.event(Z=>{this.viewport.syncScrollArea(),this._selectionService.refresh()})),this.register((0,u.addDisposableDomListener)(this._viewportElement,"scroll",()=>this._selectionService.refresh())),this.linkifier2.attachToDom(this.screenElement,this._mouseService,this._renderService),this.register(this._instantiationService.createInstance(g.BufferDecorationRenderer,this.screenElement)),this.register((0,u.addDisposableDomListener)(this.element,"mousedown",Z=>this._selectionService.handleMouseDown(Z))),this.coreMouseService.areMouseEventsActive?(this._selectionService.disable(),this.element.classList.add("enable-mouse-events")):this._selectionService.enable(),this.options.screenReaderMode&&(this._accessibilityManager.value=this._instantiationService.createInstance(se.AccessibilityManager,this)),this.register(this.optionsService.onSpecificOptionChange("screenReaderMode",Z=>this._handleScreenReaderModeOptionChange(Z))),this.options.overviewRulerWidth&&(this._overviewRulerRenderer=this.register(this._instantiationService.createInstance(c.OverviewRulerRenderer,this._viewportElement,this.screenElement))),this.optionsService.onSpecificOptionChange("overviewRulerWidth",Z=>{!this._overviewRulerRenderer&&Z&&this._viewportElement&&this.screenElement&&(this._overviewRulerRenderer=this.register(this._instantiationService.createInstance(c.OverviewRulerRenderer,this._viewportElement,this.screenElement)))}),this._charSizeService.measure(),this.refresh(0,this.rows-1),this._initGlobal(),this.bindMouse()}_createRenderer(){return this._instantiationService.createInstance(m.DomRenderer,this.element,this.screenElement,this._viewportElement,this.linkifier2)}bindMouse(){const D=this,V=this.element;function K(Q){const Ee=D._mouseService.getMouseReportCoords(Q,D.screenElement);if(!Ee)return!1;let He,ze;switch(Q.overrideType||Q.type){case"mousemove":ze=32,Q.buttons===void 0?(He=3,Q.button!==void 0&&(He=Q.button<3?Q.button:3)):He=1&Q.buttons?0:4&Q.buttons?1:2&Q.buttons?2:3;break;case"mouseup":ze=0,He=Q.button<3?Q.button:3;break;case"mousedown":ze=1,He=Q.button<3?Q.button:3;break;case"wheel":if(D.viewport.getLinesScrolled(Q)===0)return!1;ze=Q.deltaY<0?0:1,He=4;break;default:return!1}return!(ze===void 0||He===void 0||He>4)&&D.coreMouseService.triggerMouseEvent({col:Ee.col,row:Ee.row,x:Ee.x,y:Ee.y,button:He,action:ze,ctrl:Q.ctrlKey,alt:Q.altKey,shift:Q.shiftKey})}const Z={mouseup:null,wheel:null,mousedrag:null,mousemove:null},_e={mouseup:Q=>(K(Q),Q.buttons||(this._document.removeEventListener("mouseup",Z.mouseup),Z.mousedrag&&this._document.removeEventListener("mousemove",Z.mousedrag)),this.cancel(Q)),wheel:Q=>(K(Q),this.cancel(Q,!0)),mousedrag:Q=>{Q.buttons&&K(Q)},mousemove:Q=>{Q.buttons||K(Q)}};this.register(this.coreMouseService.onProtocolChange(Q=>{Q?(this.optionsService.rawOptions.logLevel==="debug"&&this._logService.debug("Binding to mouse events:",this.coreMouseService.explainEvents(Q)),this.element.classList.add("enable-mouse-events"),this._selectionService.disable()):(this._logService.debug("Unbinding from mouse events."),this.element.classList.remove("enable-mouse-events"),this._selectionService.enable()),8&Q?Z.mousemove||(V.addEventListener("mousemove",_e.mousemove),Z.mousemove=_e.mousemove):(V.removeEventListener("mousemove",Z.mousemove),Z.mousemove=null),16&Q?Z.wheel||(V.addEventListener("wheel",_e.wheel,{passive:!1}),Z.wheel=_e.wheel):(V.removeEventListener("wheel",Z.wheel),Z.wheel=null),2&Q?Z.mouseup||(V.addEventListener("mouseup",_e.mouseup),Z.mouseup=_e.mouseup):(this._document.removeEventListener("mouseup",Z.mouseup),V.removeEventListener("mouseup",Z.mouseup),Z.mouseup=null),4&Q?Z.mousedrag||(Z.mousedrag=_e.mousedrag):(this._document.removeEventListener("mousemove",Z.mousedrag),Z.mousedrag=null)})),this.coreMouseService.activeProtocol=this.coreMouseService.activeProtocol,this.register((0,u.addDisposableDomListener)(V,"mousedown",Q=>{if(Q.preventDefault(),this.focus(),this.coreMouseService.areMouseEventsActive&&!this._selectionService.shouldForceSelection(Q))return K(Q),Z.mouseup&&this._document.addEventListener("mouseup",Z.mouseup),Z.mousedrag&&this._document.addEventListener("mousemove",Z.mousedrag),this.cancel(Q)})),this.register((0,u.addDisposableDomListener)(V,"wheel",Q=>{if(!Z.wheel){if(!this.buffer.hasScrollback){const Ee=this.viewport.getLinesScrolled(Q);if(Ee===0)return;const He=q.C0.ESC+(this.coreService.decPrivateModes.applicationCursorKeys?"O":"[")+(Q.deltaY<0?"A":"B");let ze="";for(let ht=0;ht<Math.abs(Ee);ht++)ze+=He;return this.coreService.triggerDataEvent(ze,!0),this.cancel(Q,!0)}return this.viewport.handleWheel(Q)?this.cancel(Q):void 0}},{passive:!1})),this.register((0,u.addDisposableDomListener)(V,"touchstart",Q=>{if(!this.coreMouseService.areMouseEventsActive)return this.viewport.handleTouchStart(Q),this.cancel(Q)},{passive:!0})),this.register((0,u.addDisposableDomListener)(V,"touchmove",Q=>{if(!this.coreMouseService.areMouseEventsActive)return this.viewport.handleTouchMove(Q)?void 0:this.cancel(Q)},{passive:!1}))}refresh(D,V){var K;(K=this._renderService)===null||K===void 0||K.refreshRows(D,V)}updateCursorStyle(D){var V;!((V=this._selectionService)===null||V===void 0)&&V.shouldColumnSelect(D)?this.element.classList.add("column-select"):this.element.classList.remove("column-select")}_showCursor(){this.coreService.isCursorInitialized||(this.coreService.isCursorInitialized=!0,this.refresh(this.buffer.y,this.buffer.y))}scrollLines(D,V,K=0){var Z;K===1?(super.scrollLines(D,V,K),this.refresh(0,this.rows-1)):(Z=this.viewport)===null||Z===void 0||Z.scrollLines(D)}paste(D){(0,h.paste)(D,this.textarea,this.coreService,this.optionsService)}attachCustomKeyEventHandler(D){this._customKeyEventHandler=D}registerLinkProvider(D){return this.linkifier2.registerLinkProvider(D)}registerCharacterJoiner(D){if(!this._characterJoinerService)throw new Error("Terminal must be opened first");const V=this._characterJoinerService.register(D);return this.refresh(0,this.rows-1),V}deregisterCharacterJoiner(D){if(!this._characterJoinerService)throw new Error("Terminal must be opened first");this._characterJoinerService.deregister(D)&&this.refresh(0,this.rows-1)}get markers(){return this.buffer.markers}registerMarker(D){return this.buffer.addMarker(this.buffer.ybase+this.buffer.y+D)}registerDecoration(D){return this._decorationService.registerDecoration(D)}hasSelection(){return!!this._selectionService&&this._selectionService.hasSelection}select(D,V,K){this._selectionService.setSelection(D,V,K)}getSelection(){return this._selectionService?this._selectionService.selectionText:""}getSelectionPosition(){if(this._selectionService&&this._selectionService.hasSelection)return{start:{x:this._selectionService.selectionStart[0],y:this._selectionService.selectionStart[1]},end:{x:this._selectionService.selectionEnd[0],y:this._selectionService.selectionEnd[1]}}}clearSelection(){var D;(D=this._selectionService)===null||D===void 0||D.clearSelection()}selectAll(){var D;(D=this._selectionService)===null||D===void 0||D.selectAll()}selectLines(D,V){var K;(K=this._selectionService)===null||K===void 0||K.selectLines(D,V)}_keyDown(D){if(this._keyDownHandled=!1,this._keyDownSeen=!0,this._customKeyEventHandler&&this._customKeyEventHandler(D)===!1)return!1;const V=this.browser.isMac&&this.options.macOptionIsMeta&&D.altKey;if(!V&&!this._compositionHelper.keydown(D))return this.options.scrollOnUserInput&&this.buffer.ybase!==this.buffer.ydisp&&this.scrollToBottom(),!1;V||D.key!=="Dead"&&D.key!=="AltGraph"||(this._unprocessedDeadKey=!0);const K=(0,M.evaluateKeyboardEvent)(D,this.coreService.decPrivateModes.applicationCursorKeys,this.browser.isMac,this.options.macOptionIsMeta);if(this.updateCursorStyle(D),K.type===3||K.type===2){const Z=this.rows-1;return this.scrollLines(K.type===2?-Z:Z),this.cancel(D,!0)}return K.type===1&&this.selectAll(),!!this._isThirdLevelShift(this.browser,D)||(K.cancel&&this.cancel(D,!0),!K.key||!!(D.key&&!D.ctrlKey&&!D.altKey&&!D.metaKey&&D.key.length===1&&D.key.charCodeAt(0)>=65&&D.key.charCodeAt(0)<=90)||(this._unprocessedDeadKey?(this._unprocessedDeadKey=!1,!0):(K.key!==q.C0.ETX&&K.key!==q.C0.CR||(this.textarea.value=""),this._onKey.fire({key:K.key,domEvent:D}),this._showCursor(),this.coreService.triggerDataEvent(K.key,!0),!this.optionsService.rawOptions.screenReaderMode||D.altKey||D.ctrlKey?this.cancel(D,!0):void(this._keyDownHandled=!0))))}_isThirdLevelShift(D,V){const K=D.isMac&&!this.options.macOptionIsMeta&&V.altKey&&!V.ctrlKey&&!V.metaKey||D.isWindows&&V.altKey&&V.ctrlKey&&!V.metaKey||D.isWindows&&V.getModifierState("AltGraph");return V.type==="keypress"?K:K&&(!V.keyCode||V.keyCode>47)}_keyUp(D){this._keyDownSeen=!1,this._customKeyEventHandler&&this._customKeyEventHandler(D)===!1||(function(V){return V.keyCode===16||V.keyCode===17||V.keyCode===18}(D)||this.focus(),this.updateCursorStyle(D),this._keyPressHandled=!1)}_keyPress(D){let V;if(this._keyPressHandled=!1,this._keyDownHandled||this._customKeyEventHandler&&this._customKeyEventHandler(D)===!1)return!1;if(this.cancel(D),D.charCode)V=D.charCode;else if(D.which===null||D.which===void 0)V=D.keyCode;else{if(D.which===0||D.charCode===0)return!1;V=D.which}return!(!V||(D.altKey||D.ctrlKey||D.metaKey)&&!this._isThirdLevelShift(this.browser,D)||(V=String.fromCharCode(V),this._onKey.fire({key:V,domEvent:D}),this._showCursor(),this.coreService.triggerDataEvent(V,!0),this._keyPressHandled=!0,this._unprocessedDeadKey=!1,0))}_inputEvent(D){if(D.data&&D.inputType==="insertText"&&(!D.composed||!this._keyDownSeen)&&!this.optionsService.rawOptions.screenReaderMode){if(this._keyPressHandled)return!1;this._unprocessedDeadKey=!1;const V=D.data;return this.coreService.triggerDataEvent(V,!0),this.cancel(D),!0}return!1}resize(D,V){D!==this.cols||V!==this.rows?super.resize(D,V):this._charSizeService&&!this._charSizeService.hasValidSize&&this._charSizeService.measure()}_afterResize(D,V){var K,Z;(K=this._charSizeService)===null||K===void 0||K.measure(),(Z=this.viewport)===null||Z===void 0||Z.syncScrollArea(!0)}clear(){var D;if(this.buffer.ybase!==0||this.buffer.y!==0){this.buffer.clearAllMarkers(),this.buffer.lines.set(0,this.buffer.lines.get(this.buffer.ybase+this.buffer.y)),this.buffer.lines.length=1,this.buffer.ydisp=0,this.buffer.ybase=0,this.buffer.y=0;for(let V=1;V<this.rows;V++)this.buffer.lines.push(this.buffer.getBlankLine(Y.DEFAULT_ATTR_DATA));this._onScroll.fire({position:this.buffer.ydisp,source:0}),(D=this.viewport)===null||D===void 0||D.reset(),this.refresh(0,this.rows-1)}}reset(){var D,V;this.options.rows=this.rows,this.options.cols=this.cols;const K=this._customKeyEventHandler;this._setup(),super.reset(),(D=this._selectionService)===null||D===void 0||D.reset(),this._decorationService.reset(),(V=this.viewport)===null||V===void 0||V.reset(),this._customKeyEventHandler=K,this.refresh(0,this.rows-1)}clearTextureAtlas(){var D;(D=this._renderService)===null||D===void 0||D.clearTextureAtlas()}_reportFocus(){var D;!((D=this.element)===null||D===void 0)&&D.classList.contains("focus")?this.coreService.triggerDataEvent(q.C0.ESC+"[I"):this.coreService.triggerDataEvent(q.C0.ESC+"[O")}_reportWindowsOptions(D){if(this._renderService)switch(D){case N.WindowsOptionsReportType.GET_WIN_SIZE_PIXELS:const V=this._renderService.dimensions.css.canvas.width.toFixed(0),K=this._renderService.dimensions.css.canvas.height.toFixed(0);this.coreService.triggerDataEvent(`${q.C0.ESC}[4;${K};${V}t`);break;case N.WindowsOptionsReportType.GET_CELL_SIZE_PIXELS:const Z=this._renderService.dimensions.css.cell.width.toFixed(0),_e=this._renderService.dimensions.css.cell.height.toFixed(0);this.coreService.triggerDataEvent(`${q.C0.ESC}[6;${_e};${Z}t`)}}cancel(D,V){if(this.options.cancelEvents||V)return D.preventDefault(),D.stopPropagation(),!1}}o.Terminal=ae},9924:(l,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.TimeBasedDebouncer=void 0,o.TimeBasedDebouncer=class{constructor(a,h=1e3){this._renderCallback=a,this._debounceThresholdMS=h,this._lastRefreshMs=0,this._additionalRefreshRequested=!1}dispose(){this._refreshTimeoutID&&clearTimeout(this._refreshTimeoutID)}refresh(a,h,u){this._rowCount=u,a=a!==void 0?a:0,h=h!==void 0?h:this._rowCount-1,this._rowStart=this._rowStart!==void 0?Math.min(this._rowStart,a):a,this._rowEnd=this._rowEnd!==void 0?Math.max(this._rowEnd,h):h;const f=Date.now();if(f-this._lastRefreshMs>=this._debounceThresholdMS)this._lastRefreshMs=f,this._innerRefresh();else if(!this._additionalRefreshRequested){const _=f-this._lastRefreshMs,v=this._debounceThresholdMS-_;this._additionalRefreshRequested=!0,this._refreshTimeoutID=window.setTimeout(()=>{this._lastRefreshMs=Date.now(),this._innerRefresh(),this._additionalRefreshRequested=!1,this._refreshTimeoutID=void 0},v)}}_innerRefresh(){if(this._rowStart===void 0||this._rowEnd===void 0||this._rowCount===void 0)return;const a=Math.max(this._rowStart,0),h=Math.min(this._rowEnd,this._rowCount-1);this._rowStart=void 0,this._rowEnd=void 0,this._renderCallback(a,h)}}},1680:function(l,o,a){var h=this&&this.__decorate||function(d,m,p,y){var S,E=arguments.length,k=E<3?m:y===null?y=Object.getOwnPropertyDescriptor(m,p):y;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")k=Reflect.decorate(d,m,p,y);else for(var w=d.length-1;w>=0;w--)(S=d[w])&&(k=(E<3?S(k):E>3?S(m,p,k):S(m,p))||k);return E>3&&k&&Object.defineProperty(m,p,k),k},u=this&&this.__param||function(d,m){return function(p,y){m(p,y,d)}};Object.defineProperty(o,"__esModule",{value:!0}),o.Viewport=void 0;const f=a(3656),_=a(4725),v=a(8460),b=a(844),g=a(2585);let c=o.Viewport=class extends b.Disposable{constructor(d,m,p,y,S,E,k,w){super(),this._viewportElement=d,this._scrollArea=m,this._bufferService=p,this._optionsService=y,this._charSizeService=S,this._renderService=E,this._coreBrowserService=k,this.scrollBarWidth=0,this._currentRowHeight=0,this._currentDeviceCellHeight=0,this._lastRecordedBufferLength=0,this._lastRecordedViewportHeight=0,this._lastRecordedBufferHeight=0,this._lastTouchY=0,this._lastScrollTop=0,this._wheelPartialScroll=0,this._refreshAnimationFrame=null,this._ignoreNextScrollEvent=!1,this._smoothScrollState={startTime:0,origin:-1,target:-1},this._onRequestScrollLines=this.register(new v.EventEmitter),this.onRequestScrollLines=this._onRequestScrollLines.event,this.scrollBarWidth=this._viewportElement.offsetWidth-this._scrollArea.offsetWidth||15,this.register((0,f.addDisposableDomListener)(this._viewportElement,"scroll",this._handleScroll.bind(this))),this._activeBuffer=this._bufferService.buffer,this.register(this._bufferService.buffers.onBufferActivate(C=>this._activeBuffer=C.activeBuffer)),this._renderDimensions=this._renderService.dimensions,this.register(this._renderService.onDimensionsChange(C=>this._renderDimensions=C)),this._handleThemeChange(w.colors),this.register(w.onChangeColors(C=>this._handleThemeChange(C))),this.register(this._optionsService.onSpecificOptionChange("scrollback",()=>this.syncScrollArea())),setTimeout(()=>this.syncScrollArea())}_handleThemeChange(d){this._viewportElement.style.backgroundColor=d.background.css}reset(){this._currentRowHeight=0,this._currentDeviceCellHeight=0,this._lastRecordedBufferLength=0,this._lastRecordedViewportHeight=0,this._lastRecordedBufferHeight=0,this._lastTouchY=0,this._lastScrollTop=0,this._coreBrowserService.window.requestAnimationFrame(()=>this.syncScrollArea())}_refresh(d){if(d)return this._innerRefresh(),void(this._refreshAnimationFrame!==null&&this._coreBrowserService.window.cancelAnimationFrame(this._refreshAnimationFrame));this._refreshAnimationFrame===null&&(this._refreshAnimationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>this._innerRefresh()))}_innerRefresh(){if(this._charSizeService.height>0){this._currentRowHeight=this._renderService.dimensions.device.cell.height/this._coreBrowserService.dpr,this._currentDeviceCellHeight=this._renderService.dimensions.device.cell.height,this._lastRecordedViewportHeight=this._viewportElement.offsetHeight;const m=Math.round(this._currentRowHeight*this._lastRecordedBufferLength)+(this._lastRecordedViewportHeight-this._renderService.dimensions.css.canvas.height);this._lastRecordedBufferHeight!==m&&(this._lastRecordedBufferHeight=m,this._scrollArea.style.height=this._lastRecordedBufferHeight+"px")}const d=this._bufferService.buffer.ydisp*this._currentRowHeight;this._viewportElement.scrollTop!==d&&(this._ignoreNextScrollEvent=!0,this._viewportElement.scrollTop=d),this._refreshAnimationFrame=null}syncScrollArea(d=!1){if(this._lastRecordedBufferLength!==this._bufferService.buffer.lines.length)return this._lastRecordedBufferLength=this._bufferService.buffer.lines.length,void this._refresh(d);this._lastRecordedViewportHeight===this._renderService.dimensions.css.canvas.height&&this._lastScrollTop===this._activeBuffer.ydisp*this._currentRowHeight&&this._renderDimensions.device.cell.height===this._currentDeviceCellHeight||this._refresh(d)}_handleScroll(d){if(this._lastScrollTop=this._viewportElement.scrollTop,!this._viewportElement.offsetParent)return;if(this._ignoreNextScrollEvent)return this._ignoreNextScrollEvent=!1,void this._onRequestScrollLines.fire({amount:0,suppressScrollEvent:!0});const m=Math.round(this._lastScrollTop/this._currentRowHeight)-this._bufferService.buffer.ydisp;this._onRequestScrollLines.fire({amount:m,suppressScrollEvent:!0})}_smoothScroll(){if(this._isDisposed||this._smoothScrollState.origin===-1||this._smoothScrollState.target===-1)return;const d=this._smoothScrollPercent();this._viewportElement.scrollTop=this._smoothScrollState.origin+Math.round(d*(this._smoothScrollState.target-this._smoothScrollState.origin)),d<1?this._coreBrowserService.window.requestAnimationFrame(()=>this._smoothScroll()):this._clearSmoothScrollState()}_smoothScrollPercent(){return this._optionsService.rawOptions.smoothScrollDuration&&this._smoothScrollState.startTime?Math.max(Math.min((Date.now()-this._smoothScrollState.startTime)/this._optionsService.rawOptions.smoothScrollDuration,1),0):1}_clearSmoothScrollState(){this._smoothScrollState.startTime=0,this._smoothScrollState.origin=-1,this._smoothScrollState.target=-1}_bubbleScroll(d,m){const p=this._viewportElement.scrollTop+this._lastRecordedViewportHeight;return!(m<0&&this._viewportElement.scrollTop!==0||m>0&&p<this._lastRecordedBufferHeight)||(d.cancelable&&d.preventDefault(),!1)}handleWheel(d){const m=this._getPixelsScrolled(d);return m!==0&&(this._optionsService.rawOptions.smoothScrollDuration?(this._smoothScrollState.startTime=Date.now(),this._smoothScrollPercent()<1?(this._smoothScrollState.origin=this._viewportElement.scrollTop,this._smoothScrollState.target===-1?this._smoothScrollState.target=this._viewportElement.scrollTop+m:this._smoothScrollState.target+=m,this._smoothScrollState.target=Math.max(Math.min(this._smoothScrollState.target,this._viewportElement.scrollHeight),0),this._smoothScroll()):this._clearSmoothScrollState()):this._viewportElement.scrollTop+=m,this._bubbleScroll(d,m))}scrollLines(d){if(d!==0)if(this._optionsService.rawOptions.smoothScrollDuration){const m=d*this._currentRowHeight;this._smoothScrollState.startTime=Date.now(),this._smoothScrollPercent()<1?(this._smoothScrollState.origin=this._viewportElement.scrollTop,this._smoothScrollState.target=this._smoothScrollState.origin+m,this._smoothScrollState.target=Math.max(Math.min(this._smoothScrollState.target,this._viewportElement.scrollHeight),0),this._smoothScroll()):this._clearSmoothScrollState()}else this._onRequestScrollLines.fire({amount:d,suppressScrollEvent:!1})}_getPixelsScrolled(d){if(d.deltaY===0||d.shiftKey)return 0;let m=this._applyScrollModifier(d.deltaY,d);return d.deltaMode===WheelEvent.DOM_DELTA_LINE?m*=this._currentRowHeight:d.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(m*=this._currentRowHeight*this._bufferService.rows),m}getBufferElements(d,m){var p;let y,S="";const E=[],k=m??this._bufferService.buffer.lines.length,w=this._bufferService.buffer.lines;for(let C=d;C<k;C++){const L=w.get(C);if(!L)continue;const R=(p=w.get(C+1))===null||p===void 0?void 0:p.isWrapped;if(S+=L.translateToString(!R),!R||C===w.length-1){const O=document.createElement("div");O.textContent=S,E.push(O),S.length>0&&(y=O),S=""}}return{bufferElements:E,cursorElement:y}}getLinesScrolled(d){if(d.deltaY===0||d.shiftKey)return 0;let m=this._applyScrollModifier(d.deltaY,d);return d.deltaMode===WheelEvent.DOM_DELTA_PIXEL?(m/=this._currentRowHeight+0,this._wheelPartialScroll+=m,m=Math.floor(Math.abs(this._wheelPartialScroll))*(this._wheelPartialScroll>0?1:-1),this._wheelPartialScroll%=1):d.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(m*=this._bufferService.rows),m}_applyScrollModifier(d,m){const p=this._optionsService.rawOptions.fastScrollModifier;return p==="alt"&&m.altKey||p==="ctrl"&&m.ctrlKey||p==="shift"&&m.shiftKey?d*this._optionsService.rawOptions.fastScrollSensitivity*this._optionsService.rawOptions.scrollSensitivity:d*this._optionsService.rawOptions.scrollSensitivity}handleTouchStart(d){this._lastTouchY=d.touches[0].pageY}handleTouchMove(d){const m=this._lastTouchY-d.touches[0].pageY;return this._lastTouchY=d.touches[0].pageY,m!==0&&(this._viewportElement.scrollTop+=m,this._bubbleScroll(d,m))}};o.Viewport=c=h([u(2,g.IBufferService),u(3,g.IOptionsService),u(4,_.ICharSizeService),u(5,_.IRenderService),u(6,_.ICoreBrowserService),u(7,_.IThemeService)],c)},3107:function(l,o,a){var h=this&&this.__decorate||function(c,d,m,p){var y,S=arguments.length,E=S<3?d:p===null?p=Object.getOwnPropertyDescriptor(d,m):p;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")E=Reflect.decorate(c,d,m,p);else for(var k=c.length-1;k>=0;k--)(y=c[k])&&(E=(S<3?y(E):S>3?y(d,m,E):y(d,m))||E);return S>3&&E&&Object.defineProperty(d,m,E),E},u=this&&this.__param||function(c,d){return function(m,p){d(m,p,c)}};Object.defineProperty(o,"__esModule",{value:!0}),o.BufferDecorationRenderer=void 0;const f=a(3656),_=a(4725),v=a(844),b=a(2585);let g=o.BufferDecorationRenderer=class extends v.Disposable{constructor(c,d,m,p){super(),this._screenElement=c,this._bufferService=d,this._decorationService=m,this._renderService=p,this._decorationElements=new Map,this._altBufferIsActive=!1,this._dimensionsChanged=!1,this._container=document.createElement("div"),this._container.classList.add("xterm-decoration-container"),this._screenElement.appendChild(this._container),this.register(this._renderService.onRenderedViewportChange(()=>this._doRefreshDecorations())),this.register(this._renderService.onDimensionsChange(()=>{this._dimensionsChanged=!0,this._queueRefresh()})),this.register((0,f.addDisposableDomListener)(window,"resize",()=>this._queueRefresh())),this.register(this._bufferService.buffers.onBufferActivate(()=>{this._altBufferIsActive=this._bufferService.buffer===this._bufferService.buffers.alt})),this.register(this._decorationService.onDecorationRegistered(()=>this._queueRefresh())),this.register(this._decorationService.onDecorationRemoved(y=>this._removeDecoration(y))),this.register((0,v.toDisposable)(()=>{this._container.remove(),this._decorationElements.clear()}))}_queueRefresh(){this._animationFrame===void 0&&(this._animationFrame=this._renderService.addRefreshCallback(()=>{this._doRefreshDecorations(),this._animationFrame=void 0}))}_doRefreshDecorations(){for(const c of this._decorationService.decorations)this._renderDecoration(c);this._dimensionsChanged=!1}_renderDecoration(c){this._refreshStyle(c),this._dimensionsChanged&&this._refreshXPosition(c)}_createElement(c){var d,m;const p=document.createElement("div");p.classList.add("xterm-decoration"),p.classList.toggle("xterm-decoration-top-layer",((d=c==null?void 0:c.options)===null||d===void 0?void 0:d.layer)==="top"),p.style.width=`${Math.round((c.options.width||1)*this._renderService.dimensions.css.cell.width)}px`,p.style.height=(c.options.height||1)*this._renderService.dimensions.css.cell.height+"px",p.style.top=(c.marker.line-this._bufferService.buffers.active.ydisp)*this._renderService.dimensions.css.cell.height+"px",p.style.lineHeight=`${this._renderService.dimensions.css.cell.height}px`;const y=(m=c.options.x)!==null&&m!==void 0?m:0;return y&&y>this._bufferService.cols&&(p.style.display="none"),this._refreshXPosition(c,p),p}_refreshStyle(c){const d=c.marker.line-this._bufferService.buffers.active.ydisp;if(d<0||d>=this._bufferService.rows)c.element&&(c.element.style.display="none",c.onRenderEmitter.fire(c.element));else{let m=this._decorationElements.get(c);m||(m=this._createElement(c),c.element=m,this._decorationElements.set(c,m),this._container.appendChild(m),c.onDispose(()=>{this._decorationElements.delete(c),m.remove()})),m.style.top=d*this._renderService.dimensions.css.cell.height+"px",m.style.display=this._altBufferIsActive?"none":"block",c.onRenderEmitter.fire(m)}}_refreshXPosition(c,d=c.element){var m;if(!d)return;const p=(m=c.options.x)!==null&&m!==void 0?m:0;(c.options.anchor||"left")==="right"?d.style.right=p?p*this._renderService.dimensions.css.cell.width+"px":"":d.style.left=p?p*this._renderService.dimensions.css.cell.width+"px":""}_removeDecoration(c){var d;(d=this._decorationElements.get(c))===null||d===void 0||d.remove(),this._decorationElements.delete(c),c.dispose()}};o.BufferDecorationRenderer=g=h([u(1,b.IBufferService),u(2,b.IDecorationService),u(3,_.IRenderService)],g)},5871:(l,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.ColorZoneStore=void 0,o.ColorZoneStore=class{constructor(){this._zones=[],this._zonePool=[],this._zonePoolIndex=0,this._linePadding={full:0,left:0,center:0,right:0}}get zones(){return this._zonePool.length=Math.min(this._zonePool.length,this._zones.length),this._zones}clear(){this._zones.length=0,this._zonePoolIndex=0}addDecoration(a){if(a.options.overviewRulerOptions){for(const h of this._zones)if(h.color===a.options.overviewRulerOptions.color&&h.position===a.options.overviewRulerOptions.position){if(this._lineIntersectsZone(h,a.marker.line))return;if(this._lineAdjacentToZone(h,a.marker.line,a.options.overviewRulerOptions.position))return void this._addLineToZone(h,a.marker.line)}if(this._zonePoolIndex<this._zonePool.length)return this._zonePool[this._zonePoolIndex].color=a.options.overviewRulerOptions.color,this._zonePool[this._zonePoolIndex].position=a.options.overviewRulerOptions.position,this._zonePool[this._zonePoolIndex].startBufferLine=a.marker.line,this._zonePool[this._zonePoolIndex].endBufferLine=a.marker.line,void this._zones.push(this._zonePool[this._zonePoolIndex++]);this._zones.push({color:a.options.overviewRulerOptions.color,position:a.options.overviewRulerOptions.position,startBufferLine:a.marker.line,endBufferLine:a.marker.line}),this._zonePool.push(this._zones[this._zones.length-1]),this._zonePoolIndex++}}setPadding(a){this._linePadding=a}_lineIntersectsZone(a,h){return h>=a.startBufferLine&&h<=a.endBufferLine}_lineAdjacentToZone(a,h,u){return h>=a.startBufferLine-this._linePadding[u||"full"]&&h<=a.endBufferLine+this._linePadding[u||"full"]}_addLineToZone(a,h){a.startBufferLine=Math.min(a.startBufferLine,h),a.endBufferLine=Math.max(a.endBufferLine,h)}}},5744:function(l,o,a){var h=this&&this.__decorate||function(y,S,E,k){var w,C=arguments.length,L=C<3?S:k===null?k=Object.getOwnPropertyDescriptor(S,E):k;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")L=Reflect.decorate(y,S,E,k);else for(var R=y.length-1;R>=0;R--)(w=y[R])&&(L=(C<3?w(L):C>3?w(S,E,L):w(S,E))||L);return C>3&&L&&Object.defineProperty(S,E,L),L},u=this&&this.__param||function(y,S){return function(E,k){S(E,k,y)}};Object.defineProperty(o,"__esModule",{value:!0}),o.OverviewRulerRenderer=void 0;const f=a(5871),_=a(3656),v=a(4725),b=a(844),g=a(2585),c={full:0,left:0,center:0,right:0},d={full:0,left:0,center:0,right:0},m={full:0,left:0,center:0,right:0};let p=o.OverviewRulerRenderer=class extends b.Disposable{get _width(){return this._optionsService.options.overviewRulerWidth||0}constructor(y,S,E,k,w,C,L){var R;super(),this._viewportElement=y,this._screenElement=S,this._bufferService=E,this._decorationService=k,this._renderService=w,this._optionsService=C,this._coreBrowseService=L,this._colorZoneStore=new f.ColorZoneStore,this._shouldUpdateDimensions=!0,this._shouldUpdateAnchor=!0,this._lastKnownBufferLength=0,this._canvas=document.createElement("canvas"),this._canvas.classList.add("xterm-decoration-overview-ruler"),this._refreshCanvasDimensions(),(R=this._viewportElement.parentElement)===null||R===void 0||R.insertBefore(this._canvas,this._viewportElement);const O=this._canvas.getContext("2d");if(!O)throw new Error("Ctx cannot be null");this._ctx=O,this._registerDecorationListeners(),this._registerBufferChangeListeners(),this._registerDimensionChangeListeners(),this.register((0,b.toDisposable)(()=>{var T;(T=this._canvas)===null||T===void 0||T.remove()}))}_registerDecorationListeners(){this.register(this._decorationService.onDecorationRegistered(()=>this._queueRefresh(void 0,!0))),this.register(this._decorationService.onDecorationRemoved(()=>this._queueRefresh(void 0,!0)))}_registerBufferChangeListeners(){this.register(this._renderService.onRenderedViewportChange(()=>this._queueRefresh())),this.register(this._bufferService.buffers.onBufferActivate(()=>{this._canvas.style.display=this._bufferService.buffer===this._bufferService.buffers.alt?"none":"block"})),this.register(this._bufferService.onScroll(()=>{this._lastKnownBufferLength!==this._bufferService.buffers.normal.lines.length&&(this._refreshDrawHeightConstants(),this._refreshColorZonePadding())}))}_registerDimensionChangeListeners(){this.register(this._renderService.onRender(()=>{this._containerHeight&&this._containerHeight===this._screenElement.clientHeight||(this._queueRefresh(!0),this._containerHeight=this._screenElement.clientHeight)})),this.register(this._optionsService.onSpecificOptionChange("overviewRulerWidth",()=>this._queueRefresh(!0))),this.register((0,_.addDisposableDomListener)(this._coreBrowseService.window,"resize",()=>this._queueRefresh(!0))),this._queueRefresh(!0)}_refreshDrawConstants(){const y=Math.floor(this._canvas.width/3),S=Math.ceil(this._canvas.width/3);d.full=this._canvas.width,d.left=y,d.center=S,d.right=y,this._refreshDrawHeightConstants(),m.full=0,m.left=0,m.center=d.left,m.right=d.left+d.center}_refreshDrawHeightConstants(){c.full=Math.round(2*this._coreBrowseService.dpr);const y=this._canvas.height/this._bufferService.buffer.lines.length,S=Math.round(Math.max(Math.min(y,12),6)*this._coreBrowseService.dpr);c.left=S,c.center=S,c.right=S}_refreshColorZonePadding(){this._colorZoneStore.setPadding({full:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*c.full),left:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*c.left),center:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*c.center),right:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*c.right)}),this._lastKnownBufferLength=this._bufferService.buffers.normal.lines.length}_refreshCanvasDimensions(){this._canvas.style.width=`${this._width}px`,this._canvas.width=Math.round(this._width*this._coreBrowseService.dpr),this._canvas.style.height=`${this._screenElement.clientHeight}px`,this._canvas.height=Math.round(this._screenElement.clientHeight*this._coreBrowseService.dpr),this._refreshDrawConstants(),this._refreshColorZonePadding()}_refreshDecorations(){this._shouldUpdateDimensions&&this._refreshCanvasDimensions(),this._ctx.clearRect(0,0,this._canvas.width,this._canvas.height),this._colorZoneStore.clear();for(const S of this._decorationService.decorations)this._colorZoneStore.addDecoration(S);this._ctx.lineWidth=1;const y=this._colorZoneStore.zones;for(const S of y)S.position!=="full"&&this._renderColorZone(S);for(const S of y)S.position==="full"&&this._renderColorZone(S);this._shouldUpdateDimensions=!1,this._shouldUpdateAnchor=!1}_renderColorZone(y){this._ctx.fillStyle=y.color,this._ctx.fillRect(m[y.position||"full"],Math.round((this._canvas.height-1)*(y.startBufferLine/this._bufferService.buffers.active.lines.length)-c[y.position||"full"]/2),d[y.position||"full"],Math.round((this._canvas.height-1)*((y.endBufferLine-y.startBufferLine)/this._bufferService.buffers.active.lines.length)+c[y.position||"full"]))}_queueRefresh(y,S){this._shouldUpdateDimensions=y||this._shouldUpdateDimensions,this._shouldUpdateAnchor=S||this._shouldUpdateAnchor,this._animationFrame===void 0&&(this._animationFrame=this._coreBrowseService.window.requestAnimationFrame(()=>{this._refreshDecorations(),this._animationFrame=void 0}))}};o.OverviewRulerRenderer=p=h([u(2,g.IBufferService),u(3,g.IDecorationService),u(4,v.IRenderService),u(5,g.IOptionsService),u(6,v.ICoreBrowserService)],p)},2950:function(l,o,a){var h=this&&this.__decorate||function(g,c,d,m){var p,y=arguments.length,S=y<3?c:m===null?m=Object.getOwnPropertyDescriptor(c,d):m;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")S=Reflect.decorate(g,c,d,m);else for(var E=g.length-1;E>=0;E--)(p=g[E])&&(S=(y<3?p(S):y>3?p(c,d,S):p(c,d))||S);return y>3&&S&&Object.defineProperty(c,d,S),S},u=this&&this.__param||function(g,c){return function(d,m){c(d,m,g)}};Object.defineProperty(o,"__esModule",{value:!0}),o.CompositionHelper=void 0;const f=a(4725),_=a(2585),v=a(2584);let b=o.CompositionHelper=class{get isComposing(){return this._isComposing}constructor(g,c,d,m,p,y){this._textarea=g,this._compositionView=c,this._bufferService=d,this._optionsService=m,this._coreService=p,this._renderService=y,this._isComposing=!1,this._isSendingComposition=!1,this._compositionPosition={start:0,end:0},this._dataAlreadySent=""}compositionstart(){this._isComposing=!0,this._compositionPosition.start=this._textarea.value.length,this._compositionView.textContent="",this._dataAlreadySent="",this._compositionView.classList.add("active")}compositionupdate(g){this._compositionView.textContent=g.data,this.updateCompositionElements(),setTimeout(()=>{this._compositionPosition.end=this._textarea.value.length},0)}compositionend(){this._finalizeComposition(!0)}keydown(g){if(this._isComposing||this._isSendingComposition){if(g.keyCode===229||g.keyCode===16||g.keyCode===17||g.keyCode===18)return!1;this._finalizeComposition(!1)}return g.keyCode!==229||(this._handleAnyTextareaChanges(),!1)}_finalizeComposition(g){if(this._compositionView.classList.remove("active"),this._isComposing=!1,g){const c={start:this._compositionPosition.start,end:this._compositionPosition.end};this._isSendingComposition=!0,setTimeout(()=>{if(this._isSendingComposition){let d;this._isSendingComposition=!1,c.start+=this._dataAlreadySent.length,d=this._isComposing?this._textarea.value.substring(c.start,c.end):this._textarea.value.substring(c.start),d.length>0&&this._coreService.triggerDataEvent(d,!0)}},0)}else{this._isSendingComposition=!1;const c=this._textarea.value.substring(this._compositionPosition.start,this._compositionPosition.end);this._coreService.triggerDataEvent(c,!0)}}_handleAnyTextareaChanges(){const g=this._textarea.value;setTimeout(()=>{if(!this._isComposing){const c=this._textarea.value,d=c.replace(g,"");this._dataAlreadySent=d,c.length>g.length?this._coreService.triggerDataEvent(d,!0):c.length<g.length?this._coreService.triggerDataEvent(`${v.C0.DEL}`,!0):c.length===g.length&&c!==g&&this._coreService.triggerDataEvent(c,!0)}},0)}updateCompositionElements(g){if(this._isComposing){if(this._bufferService.buffer.isCursorInViewport){const c=Math.min(this._bufferService.buffer.x,this._bufferService.cols-1),d=this._renderService.dimensions.css.cell.height,m=this._bufferService.buffer.y*this._renderService.dimensions.css.cell.height,p=c*this._renderService.dimensions.css.cell.width;this._compositionView.style.left=p+"px",this._compositionView.style.top=m+"px",this._compositionView.style.height=d+"px",this._compositionView.style.lineHeight=d+"px",this._compositionView.style.fontFamily=this._optionsService.rawOptions.fontFamily,this._compositionView.style.fontSize=this._optionsService.rawOptions.fontSize+"px";const y=this._compositionView.getBoundingClientRect();this._textarea.style.left=p+"px",this._textarea.style.top=m+"px",this._textarea.style.width=Math.max(y.width,1)+"px",this._textarea.style.height=Math.max(y.height,1)+"px",this._textarea.style.lineHeight=y.height+"px"}g||setTimeout(()=>this.updateCompositionElements(!0),0)}}};o.CompositionHelper=b=h([u(2,_.IBufferService),u(3,_.IOptionsService),u(4,_.ICoreService),u(5,f.IRenderService)],b)},9806:(l,o)=>{function a(h,u,f){const _=f.getBoundingClientRect(),v=h.getComputedStyle(f),b=parseInt(v.getPropertyValue("padding-left")),g=parseInt(v.getPropertyValue("padding-top"));return[u.clientX-_.left-b,u.clientY-_.top-g]}Object.defineProperty(o,"__esModule",{value:!0}),o.getCoords=o.getCoordsRelativeToElement=void 0,o.getCoordsRelativeToElement=a,o.getCoords=function(h,u,f,_,v,b,g,c,d){if(!b)return;const m=a(h,u,f);return m?(m[0]=Math.ceil((m[0]+(d?g/2:0))/g),m[1]=Math.ceil(m[1]/c),m[0]=Math.min(Math.max(m[0],1),_+(d?1:0)),m[1]=Math.min(Math.max(m[1],1),v),m):void 0}},9504:(l,o,a)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.moveToCellSequence=void 0;const h=a(2584);function u(c,d,m,p){const y=c-f(c,m),S=d-f(d,m),E=Math.abs(y-S)-function(k,w,C){let L=0;const R=k-f(k,C),O=w-f(w,C);for(let T=0;T<Math.abs(R-O);T++){const x=_(k,w)==="A"?-1:1,F=C.buffer.lines.get(R+x*T);F!=null&&F.isWrapped&&L++}return L}(c,d,m);return g(E,b(_(c,d),p))}function f(c,d){let m=0,p=d.buffer.lines.get(c),y=p==null?void 0:p.isWrapped;for(;y&&c>=0&&c<d.rows;)m++,p=d.buffer.lines.get(--c),y=p==null?void 0:p.isWrapped;return m}function _(c,d){return c>d?"A":"B"}function v(c,d,m,p,y,S){let E=c,k=d,w="";for(;E!==m||k!==p;)E+=y?1:-1,y&&E>S.cols-1?(w+=S.buffer.translateBufferLineToString(k,!1,c,E),E=0,c=0,k++):!y&&E<0&&(w+=S.buffer.translateBufferLineToString(k,!1,0,c+1),E=S.cols-1,c=E,k--);return w+S.buffer.translateBufferLineToString(k,!1,c,E)}function b(c,d){const m=d?"O":"[";return h.C0.ESC+m+c}function g(c,d){c=Math.floor(c);let m="";for(let p=0;p<c;p++)m+=d;return m}o.moveToCellSequence=function(c,d,m,p){const y=m.buffer.x,S=m.buffer.y;if(!m.buffer.hasScrollback)return function(w,C,L,R,O,T){return u(C,R,O,T).length===0?"":g(v(w,C,w,C-f(C,O),!1,O).length,b("D",T))}(y,S,0,d,m,p)+u(S,d,m,p)+function(w,C,L,R,O,T){let x;x=u(C,R,O,T).length>0?R-f(R,O):C;const F=R,Y=function(q,M,B,A,H,N){let se;return se=u(B,A,H,N).length>0?A-f(A,H):M,q<B&&se<=A||q>=B&&se<A?"C":"D"}(w,C,L,R,O,T);return g(v(w,x,L,F,Y==="C",O).length,b(Y,T))}(y,S,c,d,m,p);let E;if(S===d)return E=y>c?"D":"C",g(Math.abs(y-c),b(E,p));E=S>d?"D":"C";const k=Math.abs(S-d);return g(function(w,C){return C.cols-w}(S>d?c:y,m)+(k-1)*m.cols+1+((S>d?y:c)-1),b(E,p))}},1296:function(l,o,a){var h=this&&this.__decorate||function(O,T,x,F){var Y,q=arguments.length,M=q<3?T:F===null?F=Object.getOwnPropertyDescriptor(T,x):F;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")M=Reflect.decorate(O,T,x,F);else for(var B=O.length-1;B>=0;B--)(Y=O[B])&&(M=(q<3?Y(M):q>3?Y(T,x,M):Y(T,x))||M);return q>3&&M&&Object.defineProperty(T,x,M),M},u=this&&this.__param||function(O,T){return function(x,F){T(x,F,O)}};Object.defineProperty(o,"__esModule",{value:!0}),o.DomRenderer=void 0;const f=a(3787),_=a(2550),v=a(2223),b=a(6171),g=a(4725),c=a(8055),d=a(8460),m=a(844),p=a(2585),y="xterm-dom-renderer-owner-",S="xterm-rows",E="xterm-fg-",k="xterm-bg-",w="xterm-focus",C="xterm-selection";let L=1,R=o.DomRenderer=class extends m.Disposable{constructor(O,T,x,F,Y,q,M,B,A,H){super(),this._element=O,this._screenElement=T,this._viewportElement=x,this._linkifier2=F,this._charSizeService=q,this._optionsService=M,this._bufferService=B,this._coreBrowserService=A,this._themeService=H,this._terminalClass=L++,this._rowElements=[],this.onRequestRedraw=this.register(new d.EventEmitter).event,this._rowContainer=document.createElement("div"),this._rowContainer.classList.add(S),this._rowContainer.style.lineHeight="normal",this._rowContainer.setAttribute("aria-hidden","true"),this._refreshRowElements(this._bufferService.cols,this._bufferService.rows),this._selectionContainer=document.createElement("div"),this._selectionContainer.classList.add(C),this._selectionContainer.setAttribute("aria-hidden","true"),this.dimensions=(0,b.createRenderDimensions)(),this._updateDimensions(),this.register(this._optionsService.onOptionChange(()=>this._handleOptionsChanged())),this.register(this._themeService.onChangeColors(N=>this._injectCss(N))),this._injectCss(this._themeService.colors),this._rowFactory=Y.createInstance(f.DomRendererRowFactory,document),this._element.classList.add(y+this._terminalClass),this._screenElement.appendChild(this._rowContainer),this._screenElement.appendChild(this._selectionContainer),this.register(this._linkifier2.onShowLinkUnderline(N=>this._handleLinkHover(N))),this.register(this._linkifier2.onHideLinkUnderline(N=>this._handleLinkLeave(N))),this.register((0,m.toDisposable)(()=>{this._element.classList.remove(y+this._terminalClass),this._rowContainer.remove(),this._selectionContainer.remove(),this._widthCache.dispose(),this._themeStyleElement.remove(),this._dimensionsStyleElement.remove()})),this._widthCache=new _.WidthCache(document),this._widthCache.setFont(this._optionsService.rawOptions.fontFamily,this._optionsService.rawOptions.fontSize,this._optionsService.rawOptions.fontWeight,this._optionsService.rawOptions.fontWeightBold),this._setDefaultSpacing()}_updateDimensions(){const O=this._coreBrowserService.dpr;this.dimensions.device.char.width=this._charSizeService.width*O,this.dimensions.device.char.height=Math.ceil(this._charSizeService.height*O),this.dimensions.device.cell.width=this.dimensions.device.char.width+Math.round(this._optionsService.rawOptions.letterSpacing),this.dimensions.device.cell.height=Math.floor(this.dimensions.device.char.height*this._optionsService.rawOptions.lineHeight),this.dimensions.device.char.left=0,this.dimensions.device.char.top=0,this.dimensions.device.canvas.width=this.dimensions.device.cell.width*this._bufferService.cols,this.dimensions.device.canvas.height=this.dimensions.device.cell.height*this._bufferService.rows,this.dimensions.css.canvas.width=Math.round(this.dimensions.device.canvas.width/O),this.dimensions.css.canvas.height=Math.round(this.dimensions.device.canvas.height/O),this.dimensions.css.cell.width=this.dimensions.css.canvas.width/this._bufferService.cols,this.dimensions.css.cell.height=this.dimensions.css.canvas.height/this._bufferService.rows;for(const x of this._rowElements)x.style.width=`${this.dimensions.css.canvas.width}px`,x.style.height=`${this.dimensions.css.cell.height}px`,x.style.lineHeight=`${this.dimensions.css.cell.height}px`,x.style.overflow="hidden";this._dimensionsStyleElement||(this._dimensionsStyleElement=document.createElement("style"),this._screenElement.appendChild(this._dimensionsStyleElement));const T=`${this._terminalSelector} .${S} span { display: inline-block; height: 100%; vertical-align: top;}`;this._dimensionsStyleElement.textContent=T,this._selectionContainer.style.height=this._viewportElement.style.height,this._screenElement.style.width=`${this.dimensions.css.canvas.width}px`,this._screenElement.style.height=`${this.dimensions.css.canvas.height}px`}_injectCss(O){this._themeStyleElement||(this._themeStyleElement=document.createElement("style"),this._screenElement.appendChild(this._themeStyleElement));let T=`${this._terminalSelector} .${S} { color: ${O.foreground.css}; font-family: ${this._optionsService.rawOptions.fontFamily}; font-size: ${this._optionsService.rawOptions.fontSize}px; font-kerning: none; white-space: pre}`;T+=`${this._terminalSelector} .${S} .xterm-dim { color: ${c.color.multiplyOpacity(O.foreground,.5).css};}`,T+=`${this._terminalSelector} span:not(.xterm-bold) { font-weight: ${this._optionsService.rawOptions.fontWeight};}${this._terminalSelector} span.xterm-bold { font-weight: ${this._optionsService.rawOptions.fontWeightBold};}${this._terminalSelector} span.xterm-italic { font-style: italic;}`,T+="@keyframes blink_box_shadow_"+this._terminalClass+" { 50% {  border-bottom-style: hidden; }}",T+="@keyframes blink_block_"+this._terminalClass+` { 0% {  background-color: ${O.cursor.css};  color: ${O.cursorAccent.css}; } 50% {  background-color: inherit;  color: ${O.cursor.css}; }}`,T+=`${this._terminalSelector} .${S}.${w} .xterm-cursor.xterm-cursor-blink:not(.xterm-cursor-block) { animation: blink_box_shadow_`+this._terminalClass+` 1s step-end infinite;}${this._terminalSelector} .${S}.${w} .xterm-cursor.xterm-cursor-blink.xterm-cursor-block { animation: blink_block_`+this._terminalClass+` 1s step-end infinite;}${this._terminalSelector} .${S} .xterm-cursor.xterm-cursor-block { background-color: ${O.cursor.css}; color: ${O.cursorAccent.css};}${this._terminalSelector} .${S} .xterm-cursor.xterm-cursor-outline { outline: 1px solid ${O.cursor.css}; outline-offset: -1px;}${this._terminalSelector} .${S} .xterm-cursor.xterm-cursor-bar { box-shadow: ${this._optionsService.rawOptions.cursorWidth}px 0 0 ${O.cursor.css} inset;}${this._terminalSelector} .${S} .xterm-cursor.xterm-cursor-underline { border-bottom: 1px ${O.cursor.css}; border-bottom-style: solid; height: calc(100% - 1px);}`,T+=`${this._terminalSelector} .${C} { position: absolute; top: 0; left: 0; z-index: 1; pointer-events: none;}${this._terminalSelector}.focus .${C} div { position: absolute; background-color: ${O.selectionBackgroundOpaque.css};}${this._terminalSelector} .${C} div { position: absolute; background-color: ${O.selectionInactiveBackgroundOpaque.css};}`;for(const[x,F]of O.ansi.entries())T+=`${this._terminalSelector} .${E}${x} { color: ${F.css}; }${this._terminalSelector} .${E}${x}.xterm-dim { color: ${c.color.multiplyOpacity(F,.5).css}; }${this._terminalSelector} .${k}${x} { background-color: ${F.css}; }`;T+=`${this._terminalSelector} .${E}${v.INVERTED_DEFAULT_COLOR} { color: ${c.color.opaque(O.background).css}; }${this._terminalSelector} .${E}${v.INVERTED_DEFAULT_COLOR}.xterm-dim { color: ${c.color.multiplyOpacity(c.color.opaque(O.background),.5).css}; }${this._terminalSelector} .${k}${v.INVERTED_DEFAULT_COLOR} { background-color: ${O.foreground.css}; }`,this._themeStyleElement.textContent=T}_setDefaultSpacing(){const O=this.dimensions.css.cell.width-this._widthCache.get("W",!1,!1);this._rowContainer.style.letterSpacing=`${O}px`,this._rowFactory.defaultSpacing=O}handleDevicePixelRatioChange(){this._updateDimensions(),this._widthCache.clear(),this._setDefaultSpacing()}_refreshRowElements(O,T){for(let x=this._rowElements.length;x<=T;x++){const F=document.createElement("div");this._rowContainer.appendChild(F),this._rowElements.push(F)}for(;this._rowElements.length>T;)this._rowContainer.removeChild(this._rowElements.pop())}handleResize(O,T){this._refreshRowElements(O,T),this._updateDimensions()}handleCharSizeChanged(){this._updateDimensions(),this._widthCache.clear(),this._setDefaultSpacing()}handleBlur(){this._rowContainer.classList.remove(w)}handleFocus(){this._rowContainer.classList.add(w),this.renderRows(this._bufferService.buffer.y,this._bufferService.buffer.y)}handleSelectionChanged(O,T,x){if(this._selectionContainer.replaceChildren(),this._rowFactory.handleSelectionChanged(O,T,x),this.renderRows(0,this._bufferService.rows-1),!O||!T)return;const F=O[1]-this._bufferService.buffer.ydisp,Y=T[1]-this._bufferService.buffer.ydisp,q=Math.max(F,0),M=Math.min(Y,this._bufferService.rows-1);if(q>=this._bufferService.rows||M<0)return;const B=document.createDocumentFragment();if(x){const A=O[0]>T[0];B.appendChild(this._createSelectionElement(q,A?T[0]:O[0],A?O[0]:T[0],M-q+1))}else{const A=F===q?O[0]:0,H=q===Y?T[0]:this._bufferService.cols;B.appendChild(this._createSelectionElement(q,A,H));const N=M-q-1;if(B.appendChild(this._createSelectionElement(q+1,0,this._bufferService.cols,N)),q!==M){const se=Y===M?T[0]:this._bufferService.cols;B.appendChild(this._createSelectionElement(M,0,se))}}this._selectionContainer.appendChild(B)}_createSelectionElement(O,T,x,F=1){const Y=document.createElement("div");return Y.style.height=F*this.dimensions.css.cell.height+"px",Y.style.top=O*this.dimensions.css.cell.height+"px",Y.style.left=T*this.dimensions.css.cell.width+"px",Y.style.width=this.dimensions.css.cell.width*(x-T)+"px",Y}handleCursorMove(){}_handleOptionsChanged(){this._updateDimensions(),this._injectCss(this._themeService.colors),this._widthCache.setFont(this._optionsService.rawOptions.fontFamily,this._optionsService.rawOptions.fontSize,this._optionsService.rawOptions.fontWeight,this._optionsService.rawOptions.fontWeightBold),this._setDefaultSpacing()}clear(){for(const O of this._rowElements)O.replaceChildren()}renderRows(O,T){const x=this._bufferService.buffer,F=x.ybase+x.y,Y=Math.min(x.x,this._bufferService.cols-1),q=this._optionsService.rawOptions.cursorBlink,M=this._optionsService.rawOptions.cursorStyle,B=this._optionsService.rawOptions.cursorInactiveStyle;for(let A=O;A<=T;A++){const H=A+x.ydisp,N=this._rowElements[A],se=x.lines.get(H);if(!N||!se)break;N.replaceChildren(...this._rowFactory.createRow(se,H,H===F,M,B,Y,q,this.dimensions.css.cell.width,this._widthCache,-1,-1))}}get _terminalSelector(){return`.${y}${this._terminalClass}`}_handleLinkHover(O){this._setCellUnderline(O.x1,O.x2,O.y1,O.y2,O.cols,!0)}_handleLinkLeave(O){this._setCellUnderline(O.x1,O.x2,O.y1,O.y2,O.cols,!1)}_setCellUnderline(O,T,x,F,Y,q){x<0&&(O=0),F<0&&(T=0);const M=this._bufferService.rows-1;x=Math.max(Math.min(x,M),0),F=Math.max(Math.min(F,M),0),Y=Math.min(Y,this._bufferService.cols);const B=this._bufferService.buffer,A=B.ybase+B.y,H=Math.min(B.x,Y-1),N=this._optionsService.rawOptions.cursorBlink,se=this._optionsService.rawOptions.cursorStyle,he=this._optionsService.rawOptions.cursorInactiveStyle;for(let ae=x;ae<=F;++ae){const ye=ae+B.ydisp,D=this._rowElements[ae],V=B.lines.get(ye);if(!D||!V)break;D.replaceChildren(...this._rowFactory.createRow(V,ye,ye===A,se,he,H,N,this.dimensions.css.cell.width,this._widthCache,q?ae===x?O:0:-1,q?(ae===F?T:Y)-1:-1))}}};o.DomRenderer=R=h([u(4,p.IInstantiationService),u(5,g.ICharSizeService),u(6,p.IOptionsService),u(7,p.IBufferService),u(8,g.ICoreBrowserService),u(9,g.IThemeService)],R)},3787:function(l,o,a){var h=this&&this.__decorate||function(E,k,w,C){var L,R=arguments.length,O=R<3?k:C===null?C=Object.getOwnPropertyDescriptor(k,w):C;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")O=Reflect.decorate(E,k,w,C);else for(var T=E.length-1;T>=0;T--)(L=E[T])&&(O=(R<3?L(O):R>3?L(k,w,O):L(k,w))||O);return R>3&&O&&Object.defineProperty(k,w,O),O},u=this&&this.__param||function(E,k){return function(w,C){k(w,C,E)}};Object.defineProperty(o,"__esModule",{value:!0}),o.DomRendererRowFactory=void 0;const f=a(2223),_=a(643),v=a(511),b=a(2585),g=a(8055),c=a(4725),d=a(4269),m=a(6171),p=a(3734);let y=o.DomRendererRowFactory=class{constructor(E,k,w,C,L,R,O){this._document=E,this._characterJoinerService=k,this._optionsService=w,this._coreBrowserService=C,this._coreService=L,this._decorationService=R,this._themeService=O,this._workCell=new v.CellData,this._columnSelectMode=!1,this.defaultSpacing=0}handleSelectionChanged(E,k,w){this._selectionStart=E,this._selectionEnd=k,this._columnSelectMode=w}createRow(E,k,w,C,L,R,O,T,x,F,Y){const q=[],M=this._characterJoinerService.getJoinedCharacters(k),B=this._themeService.colors;let A,H=E.getNoBgTrimmedLength();w&&H<R+1&&(H=R+1);let N=0,se="",he=0,ae=0,ye=0,D=!1,V=0,K=!1,Z=0;const _e=[],Q=F!==-1&&Y!==-1;for(let Ee=0;Ee<H;Ee++){E.loadCell(Ee,this._workCell);let He=this._workCell.getWidth();if(He===0)continue;let ze=!1,ht=Ee,be=this._workCell;if(M.length>0&&Ee===M[0][0]){ze=!0;const le=M.shift();be=new d.JoinedCellData(this._workCell,E.translateToString(!0,le[0],le[1]),le[1]-le[0]),ht=le[1]-1,He=be.getWidth()}const Ht=this._isCellInSelection(Ee,k),Si=w&&Ee===R,hi=Q&&Ee>=F&&Ee<=Y;let ui=!1;this._decorationService.forEachDecorationAtCell(Ee,k,void 0,le=>{ui=!0});let at=be.getChars()||_.WHITESPACE_CELL_CHAR;if(at===" "&&(be.isUnderline()||be.isOverline())&&(at=" "),Z=He*T-x.get(at,be.isBold(),be.isItalic()),A){if(N&&(Ht&&K||!Ht&&!K&&be.bg===he)&&(Ht&&K&&B.selectionForeground||be.fg===ae)&&be.extended.ext===ye&&hi===D&&Z===V&&!Si&&!ze&&!ui){se+=at,N++;continue}N&&(A.textContent=se),A=this._document.createElement("span"),N=0,se=""}else A=this._document.createElement("span");if(he=be.bg,ae=be.fg,ye=be.extended.ext,D=hi,V=Z,K=Ht,ze&&R>=Ee&&R<=ht&&(R=Ee),!this._coreService.isCursorHidden&&Si){if(_e.push("xterm-cursor"),this._coreBrowserService.isFocused)O&&_e.push("xterm-cursor-blink"),_e.push(C==="bar"?"xterm-cursor-bar":C==="underline"?"xterm-cursor-underline":"xterm-cursor-block");else if(L)switch(L){case"outline":_e.push("xterm-cursor-outline");break;case"block":_e.push("xterm-cursor-block");break;case"bar":_e.push("xterm-cursor-bar");break;case"underline":_e.push("xterm-cursor-underline")}}if(be.isBold()&&_e.push("xterm-bold"),be.isItalic()&&_e.push("xterm-italic"),be.isDim()&&_e.push("xterm-dim"),se=be.isInvisible()?_.WHITESPACE_CELL_CHAR:be.getChars()||_.WHITESPACE_CELL_CHAR,be.isUnderline()&&(_e.push(`xterm-underline-${be.extended.underlineStyle}`),se===" "&&(se=" "),!be.isUnderlineColorDefault()))if(be.isUnderlineColorRGB())A.style.textDecorationColor=`rgb(${p.AttributeData.toColorRGB(be.getUnderlineColor()).join(",")})`;else{let le=be.getUnderlineColor();this._optionsService.rawOptions.drawBoldTextInBrightColors&&be.isBold()&&le<8&&(le+=8),A.style.textDecorationColor=B.ansi[le].css}be.isOverline()&&(_e.push("xterm-overline"),se===" "&&(se=" ")),be.isStrikethrough()&&_e.push("xterm-strikethrough"),hi&&(A.style.textDecoration="underline");let et=be.getFgColor(),Lt=be.getFgColorMode(),ge=be.getBgColor(),P=be.getBgColorMode();const ve=!!be.isInverse();if(ve){const le=et;et=ge,ge=le;const Tt=Lt;Lt=P,P=Tt}let Te,Mt,nt,Le=!1;switch(this._decorationService.forEachDecorationAtCell(Ee,k,void 0,le=>{le.options.layer!=="top"&&Le||(le.backgroundColorRGB&&(P=50331648,ge=le.backgroundColorRGB.rgba>>8&16777215,Te=le.backgroundColorRGB),le.foregroundColorRGB&&(Lt=50331648,et=le.foregroundColorRGB.rgba>>8&16777215,Mt=le.foregroundColorRGB),Le=le.options.layer==="top")}),!Le&&Ht&&(Te=this._coreBrowserService.isFocused?B.selectionBackgroundOpaque:B.selectionInactiveBackgroundOpaque,ge=Te.rgba>>8&16777215,P=50331648,Le=!0,B.selectionForeground&&(Lt=50331648,et=B.selectionForeground.rgba>>8&16777215,Mt=B.selectionForeground)),Le&&_e.push("xterm-decoration-top"),P){case 16777216:case 33554432:nt=B.ansi[ge],_e.push(`xterm-bg-${ge}`);break;case 50331648:nt=g.rgba.toColor(ge>>16,ge>>8&255,255&ge),this._addStyle(A,`background-color:#${S((ge>>>0).toString(16),"0",6)}`);break;default:ve?(nt=B.foreground,_e.push(`xterm-bg-${f.INVERTED_DEFAULT_COLOR}`)):nt=B.background}switch(Te||be.isDim()&&(Te=g.color.multiplyOpacity(nt,.5)),Lt){case 16777216:case 33554432:be.isBold()&&et<8&&this._optionsService.rawOptions.drawBoldTextInBrightColors&&(et+=8),this._applyMinimumContrast(A,nt,B.ansi[et],be,Te,void 0)||_e.push(`xterm-fg-${et}`);break;case 50331648:const le=g.rgba.toColor(et>>16&255,et>>8&255,255&et);this._applyMinimumContrast(A,nt,le,be,Te,Mt)||this._addStyle(A,`color:#${S(et.toString(16),"0",6)}`);break;default:this._applyMinimumContrast(A,nt,B.foreground,be,Te,void 0)||ve&&_e.push(`xterm-fg-${f.INVERTED_DEFAULT_COLOR}`)}_e.length&&(A.className=_e.join(" "),_e.length=0),Si||ze||ui?A.textContent=se:N++,Z!==this.defaultSpacing&&(A.style.letterSpacing=`${Z}px`),q.push(A),Ee=ht}return A&&N&&(A.textContent=se),q}_applyMinimumContrast(E,k,w,C,L,R){if(this._optionsService.rawOptions.minimumContrastRatio===1||(0,m.excludeFromContrastRatioDemands)(C.getCode()))return!1;const O=this._getContrastCache(C);let T;if(L||R||(T=O.getColor(k.rgba,w.rgba)),T===void 0){const x=this._optionsService.rawOptions.minimumContrastRatio/(C.isDim()?2:1);T=g.color.ensureContrastRatio(L||k,R||w,x),O.setColor((L||k).rgba,(R||w).rgba,T??null)}return!!T&&(this._addStyle(E,`color:${T.css}`),!0)}_getContrastCache(E){return E.isDim()?this._themeService.colors.halfContrastCache:this._themeService.colors.contrastCache}_addStyle(E,k){E.setAttribute("style",`${E.getAttribute("style")||""}${k};`)}_isCellInSelection(E,k){const w=this._selectionStart,C=this._selectionEnd;return!(!w||!C)&&(this._columnSelectMode?w[0]<=C[0]?E>=w[0]&&k>=w[1]&&E<C[0]&&k<=C[1]:E<w[0]&&k>=w[1]&&E>=C[0]&&k<=C[1]:k>w[1]&&k<C[1]||w[1]===C[1]&&k===w[1]&&E>=w[0]&&E<C[0]||w[1]<C[1]&&k===C[1]&&E<C[0]||w[1]<C[1]&&k===w[1]&&E>=w[0])}};function S(E,k,w){for(;E.length<w;)E=k+E;return E}o.DomRendererRowFactory=y=h([u(1,c.ICharacterJoinerService),u(2,b.IOptionsService),u(3,c.ICoreBrowserService),u(4,b.ICoreService),u(5,b.IDecorationService),u(6,c.IThemeService)],y)},2550:(l,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.WidthCache=void 0,o.WidthCache=class{constructor(a){this._flat=new Float32Array(256),this._font="",this._fontSize=0,this._weight="normal",this._weightBold="bold",this._measureElements=[],this._container=a.createElement("div"),this._container.style.position="absolute",this._container.style.top="-50000px",this._container.style.width="50000px",this._container.style.whiteSpace="pre",this._container.style.fontKerning="none";const h=a.createElement("span"),u=a.createElement("span");u.style.fontWeight="bold";const f=a.createElement("span");f.style.fontStyle="italic";const _=a.createElement("span");_.style.fontWeight="bold",_.style.fontStyle="italic",this._measureElements=[h,u,f,_],this._container.appendChild(h),this._container.appendChild(u),this._container.appendChild(f),this._container.appendChild(_),a.body.appendChild(this._container),this.clear()}dispose(){this._container.remove(),this._measureElements.length=0,this._holey=void 0}clear(){this._flat.fill(-9999),this._holey=new Map}setFont(a,h,u,f){a===this._font&&h===this._fontSize&&u===this._weight&&f===this._weightBold||(this._font=a,this._fontSize=h,this._weight=u,this._weightBold=f,this._container.style.fontFamily=this._font,this._container.style.fontSize=`${this._fontSize}px`,this._measureElements[0].style.fontWeight=`${u}`,this._measureElements[1].style.fontWeight=`${f}`,this._measureElements[2].style.fontWeight=`${u}`,this._measureElements[3].style.fontWeight=`${f}`,this.clear())}get(a,h,u){let f=0;if(!h&&!u&&a.length===1&&(f=a.charCodeAt(0))<256)return this._flat[f]!==-9999?this._flat[f]:this._flat[f]=this._measure(a,0);let _=a;h&&(_+="B"),u&&(_+="I");let v=this._holey.get(_);if(v===void 0){let b=0;h&&(b|=1),u&&(b|=2),v=this._measure(a,b),this._holey.set(_,v)}return v}_measure(a,h){const u=this._measureElements[h];return u.textContent=a.repeat(32),u.offsetWidth/32}}},2223:(l,o,a)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.TEXT_BASELINE=o.DIM_OPACITY=o.INVERTED_DEFAULT_COLOR=void 0;const h=a(6114);o.INVERTED_DEFAULT_COLOR=257,o.DIM_OPACITY=.5,o.TEXT_BASELINE=h.isFirefox||h.isLegacyEdge?"bottom":"ideographic"},6171:(l,o)=>{function a(h){return 57508<=h&&h<=57558}Object.defineProperty(o,"__esModule",{value:!0}),o.createRenderDimensions=o.excludeFromContrastRatioDemands=o.isRestrictedPowerlineGlyph=o.isPowerlineGlyph=o.throwIfFalsy=void 0,o.throwIfFalsy=function(h){if(!h)throw new Error("value must not be falsy");return h},o.isPowerlineGlyph=a,o.isRestrictedPowerlineGlyph=function(h){return 57520<=h&&h<=57527},o.excludeFromContrastRatioDemands=function(h){return a(h)||function(u){return 9472<=u&&u<=9631}(h)},o.createRenderDimensions=function(){return{css:{canvas:{width:0,height:0},cell:{width:0,height:0}},device:{canvas:{width:0,height:0},cell:{width:0,height:0},char:{width:0,height:0,left:0,top:0}}}}},456:(l,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.SelectionModel=void 0,o.SelectionModel=class{constructor(a){this._bufferService=a,this.isSelectAllActive=!1,this.selectionStartLength=0}clearSelection(){this.selectionStart=void 0,this.selectionEnd=void 0,this.isSelectAllActive=!1,this.selectionStartLength=0}get finalSelectionStart(){return this.isSelectAllActive?[0,0]:this.selectionEnd&&this.selectionStart&&this.areSelectionValuesReversed()?this.selectionEnd:this.selectionStart}get finalSelectionEnd(){if(this.isSelectAllActive)return[this._bufferService.cols,this._bufferService.buffer.ybase+this._bufferService.rows-1];if(this.selectionStart){if(!this.selectionEnd||this.areSelectionValuesReversed()){const a=this.selectionStart[0]+this.selectionStartLength;return a>this._bufferService.cols?a%this._bufferService.cols==0?[this._bufferService.cols,this.selectionStart[1]+Math.floor(a/this._bufferService.cols)-1]:[a%this._bufferService.cols,this.selectionStart[1]+Math.floor(a/this._bufferService.cols)]:[a,this.selectionStart[1]]}if(this.selectionStartLength&&this.selectionEnd[1]===this.selectionStart[1]){const a=this.selectionStart[0]+this.selectionStartLength;return a>this._bufferService.cols?[a%this._bufferService.cols,this.selectionStart[1]+Math.floor(a/this._bufferService.cols)]:[Math.max(a,this.selectionEnd[0]),this.selectionEnd[1]]}return this.selectionEnd}}areSelectionValuesReversed(){const a=this.selectionStart,h=this.selectionEnd;return!(!a||!h)&&(a[1]>h[1]||a[1]===h[1]&&a[0]>h[0])}handleTrim(a){return this.selectionStart&&(this.selectionStart[1]-=a),this.selectionEnd&&(this.selectionEnd[1]-=a),this.selectionEnd&&this.selectionEnd[1]<0?(this.clearSelection(),!0):(this.selectionStart&&this.selectionStart[1]<0&&(this.selectionStart[1]=0),!1)}}},428:function(l,o,a){var h=this&&this.__decorate||function(c,d,m,p){var y,S=arguments.length,E=S<3?d:p===null?p=Object.getOwnPropertyDescriptor(d,m):p;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")E=Reflect.decorate(c,d,m,p);else for(var k=c.length-1;k>=0;k--)(y=c[k])&&(E=(S<3?y(E):S>3?y(d,m,E):y(d,m))||E);return S>3&&E&&Object.defineProperty(d,m,E),E},u=this&&this.__param||function(c,d){return function(m,p){d(m,p,c)}};Object.defineProperty(o,"__esModule",{value:!0}),o.CharSizeService=void 0;const f=a(2585),_=a(8460),v=a(844);let b=o.CharSizeService=class extends v.Disposable{get hasValidSize(){return this.width>0&&this.height>0}constructor(c,d,m){super(),this._optionsService=m,this.width=0,this.height=0,this._onCharSizeChange=this.register(new _.EventEmitter),this.onCharSizeChange=this._onCharSizeChange.event,this._measureStrategy=new g(c,d,this._optionsService),this.register(this._optionsService.onMultipleOptionChange(["fontFamily","fontSize"],()=>this.measure()))}measure(){const c=this._measureStrategy.measure();c.width===this.width&&c.height===this.height||(this.width=c.width,this.height=c.height,this._onCharSizeChange.fire())}};o.CharSizeService=b=h([u(2,f.IOptionsService)],b);class g{constructor(d,m,p){this._document=d,this._parentElement=m,this._optionsService=p,this._result={width:0,height:0},this._measureElement=this._document.createElement("span"),this._measureElement.classList.add("xterm-char-measure-element"),this._measureElement.textContent="W".repeat(32),this._measureElement.setAttribute("aria-hidden","true"),this._measureElement.style.whiteSpace="pre",this._measureElement.style.fontKerning="none",this._parentElement.appendChild(this._measureElement)}measure(){this._measureElement.style.fontFamily=this._optionsService.rawOptions.fontFamily,this._measureElement.style.fontSize=`${this._optionsService.rawOptions.fontSize}px`;const d={height:Number(this._measureElement.offsetHeight),width:Number(this._measureElement.offsetWidth)};return d.width!==0&&d.height!==0&&(this._result.width=d.width/32,this._result.height=Math.ceil(d.height)),this._result}}},4269:function(l,o,a){var h=this&&this.__decorate||function(d,m,p,y){var S,E=arguments.length,k=E<3?m:y===null?y=Object.getOwnPropertyDescriptor(m,p):y;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")k=Reflect.decorate(d,m,p,y);else for(var w=d.length-1;w>=0;w--)(S=d[w])&&(k=(E<3?S(k):E>3?S(m,p,k):S(m,p))||k);return E>3&&k&&Object.defineProperty(m,p,k),k},u=this&&this.__param||function(d,m){return function(p,y){m(p,y,d)}};Object.defineProperty(o,"__esModule",{value:!0}),o.CharacterJoinerService=o.JoinedCellData=void 0;const f=a(3734),_=a(643),v=a(511),b=a(2585);class g extends f.AttributeData{constructor(m,p,y){super(),this.content=0,this.combinedData="",this.fg=m.fg,this.bg=m.bg,this.combinedData=p,this._width=y}isCombined(){return 2097152}getWidth(){return this._width}getChars(){return this.combinedData}getCode(){return 2097151}setFromCharData(m){throw new Error("not implemented")}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}}o.JoinedCellData=g;let c=o.CharacterJoinerService=class Hc{constructor(m){this._bufferService=m,this._characterJoiners=[],this._nextCharacterJoinerId=0,this._workCell=new v.CellData}register(m){const p={id:this._nextCharacterJoinerId++,handler:m};return this._characterJoiners.push(p),p.id}deregister(m){for(let p=0;p<this._characterJoiners.length;p++)if(this._characterJoiners[p].id===m)return this._characterJoiners.splice(p,1),!0;return!1}getJoinedCharacters(m){if(this._characterJoiners.length===0)return[];const p=this._bufferService.buffer.lines.get(m);if(!p||p.length===0)return[];const y=[],S=p.translateToString(!0);let E=0,k=0,w=0,C=p.getFg(0),L=p.getBg(0);for(let R=0;R<p.getTrimmedLength();R++)if(p.loadCell(R,this._workCell),this._workCell.getWidth()!==0){if(this._workCell.fg!==C||this._workCell.bg!==L){if(R-E>1){const O=this._getJoinedRanges(S,w,k,p,E);for(let T=0;T<O.length;T++)y.push(O[T])}E=R,w=k,C=this._workCell.fg,L=this._workCell.bg}k+=this._workCell.getChars().length||_.WHITESPACE_CELL_CHAR.length}if(this._bufferService.cols-E>1){const R=this._getJoinedRanges(S,w,k,p,E);for(let O=0;O<R.length;O++)y.push(R[O])}return y}_getJoinedRanges(m,p,y,S,E){const k=m.substring(p,y);let w=[];try{w=this._characterJoiners[0].handler(k)}catch(C){console.error(C)}for(let C=1;C<this._characterJoiners.length;C++)try{const L=this._characterJoiners[C].handler(k);for(let R=0;R<L.length;R++)Hc._mergeRanges(w,L[R])}catch(L){console.error(L)}return this._stringRangesToCellRanges(w,S,E),w}_stringRangesToCellRanges(m,p,y){let S=0,E=!1,k=0,w=m[S];if(w){for(let C=y;C<this._bufferService.cols;C++){const L=p.getWidth(C),R=p.getString(C).length||_.WHITESPACE_CELL_CHAR.length;if(L!==0){if(!E&&w[0]<=k&&(w[0]=C,E=!0),w[1]<=k){if(w[1]=C,w=m[++S],!w)break;w[0]<=k?(w[0]=C,E=!0):E=!1}k+=R}}w&&(w[1]=this._bufferService.cols)}}static _mergeRanges(m,p){let y=!1;for(let S=0;S<m.length;S++){const E=m[S];if(y){if(p[1]<=E[0])return m[S-1][1]=p[1],m;if(p[1]<=E[1])return m[S-1][1]=Math.max(p[1],E[1]),m.splice(S,1),m;m.splice(S,1),S--}else{if(p[1]<=E[0])return m.splice(S,0,p),m;if(p[1]<=E[1])return E[0]=Math.min(p[0],E[0]),m;p[0]<E[1]&&(E[0]=Math.min(p[0],E[0]),y=!0)}}return y?m[m.length-1][1]=p[1]:m.push(p),m}};o.CharacterJoinerService=c=h([u(0,b.IBufferService)],c)},5114:(l,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.CoreBrowserService=void 0,o.CoreBrowserService=class{constructor(a,h){this._textarea=a,this.window=h,this._isFocused=!1,this._cachedIsFocused=void 0,this._textarea.addEventListener("focus",()=>this._isFocused=!0),this._textarea.addEventListener("blur",()=>this._isFocused=!1)}get dpr(){return this.window.devicePixelRatio}get isFocused(){return this._cachedIsFocused===void 0&&(this._cachedIsFocused=this._isFocused&&this._textarea.ownerDocument.hasFocus(),queueMicrotask(()=>this._cachedIsFocused=void 0)),this._cachedIsFocused}}},8934:function(l,o,a){var h=this&&this.__decorate||function(b,g,c,d){var m,p=arguments.length,y=p<3?g:d===null?d=Object.getOwnPropertyDescriptor(g,c):d;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")y=Reflect.decorate(b,g,c,d);else for(var S=b.length-1;S>=0;S--)(m=b[S])&&(y=(p<3?m(y):p>3?m(g,c,y):m(g,c))||y);return p>3&&y&&Object.defineProperty(g,c,y),y},u=this&&this.__param||function(b,g){return function(c,d){g(c,d,b)}};Object.defineProperty(o,"__esModule",{value:!0}),o.MouseService=void 0;const f=a(4725),_=a(9806);let v=o.MouseService=class{constructor(b,g){this._renderService=b,this._charSizeService=g}getCoords(b,g,c,d,m){return(0,_.getCoords)(window,b,g,c,d,this._charSizeService.hasValidSize,this._renderService.dimensions.css.cell.width,this._renderService.dimensions.css.cell.height,m)}getMouseReportCoords(b,g){const c=(0,_.getCoordsRelativeToElement)(window,b,g);if(this._charSizeService.hasValidSize)return c[0]=Math.min(Math.max(c[0],0),this._renderService.dimensions.css.canvas.width-1),c[1]=Math.min(Math.max(c[1],0),this._renderService.dimensions.css.canvas.height-1),{col:Math.floor(c[0]/this._renderService.dimensions.css.cell.width),row:Math.floor(c[1]/this._renderService.dimensions.css.cell.height),x:Math.floor(c[0]),y:Math.floor(c[1])}}};o.MouseService=v=h([u(0,f.IRenderService),u(1,f.ICharSizeService)],v)},3230:function(l,o,a){var h=this&&this.__decorate||function(y,S,E,k){var w,C=arguments.length,L=C<3?S:k===null?k=Object.getOwnPropertyDescriptor(S,E):k;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")L=Reflect.decorate(y,S,E,k);else for(var R=y.length-1;R>=0;R--)(w=y[R])&&(L=(C<3?w(L):C>3?w(S,E,L):w(S,E))||L);return C>3&&L&&Object.defineProperty(S,E,L),L},u=this&&this.__param||function(y,S){return function(E,k){S(E,k,y)}};Object.defineProperty(o,"__esModule",{value:!0}),o.RenderService=void 0;const f=a(3656),_=a(6193),v=a(5596),b=a(4725),g=a(8460),c=a(844),d=a(7226),m=a(2585);let p=o.RenderService=class extends c.Disposable{get dimensions(){return this._renderer.value.dimensions}constructor(y,S,E,k,w,C,L,R){if(super(),this._rowCount=y,this._charSizeService=k,this._renderer=this.register(new c.MutableDisposable),this._pausedResizeTask=new d.DebouncedIdleTask,this._isPaused=!1,this._needsFullRefresh=!1,this._isNextRenderRedrawOnly=!0,this._needsSelectionRefresh=!1,this._canvasWidth=0,this._canvasHeight=0,this._selectionState={start:void 0,end:void 0,columnSelectMode:!1},this._onDimensionsChange=this.register(new g.EventEmitter),this.onDimensionsChange=this._onDimensionsChange.event,this._onRenderedViewportChange=this.register(new g.EventEmitter),this.onRenderedViewportChange=this._onRenderedViewportChange.event,this._onRender=this.register(new g.EventEmitter),this.onRender=this._onRender.event,this._onRefreshRequest=this.register(new g.EventEmitter),this.onRefreshRequest=this._onRefreshRequest.event,this._renderDebouncer=new _.RenderDebouncer(L.window,(O,T)=>this._renderRows(O,T)),this.register(this._renderDebouncer),this._screenDprMonitor=new v.ScreenDprMonitor(L.window),this._screenDprMonitor.setListener(()=>this.handleDevicePixelRatioChange()),this.register(this._screenDprMonitor),this.register(C.onResize(()=>this._fullRefresh())),this.register(C.buffers.onBufferActivate(()=>{var O;return(O=this._renderer.value)===null||O===void 0?void 0:O.clear()})),this.register(E.onOptionChange(()=>this._handleOptionsChanged())),this.register(this._charSizeService.onCharSizeChange(()=>this.handleCharSizeChanged())),this.register(w.onDecorationRegistered(()=>this._fullRefresh())),this.register(w.onDecorationRemoved(()=>this._fullRefresh())),this.register(E.onMultipleOptionChange(["customGlyphs","drawBoldTextInBrightColors","letterSpacing","lineHeight","fontFamily","fontSize","fontWeight","fontWeightBold","minimumContrastRatio"],()=>{this.clear(),this.handleResize(C.cols,C.rows),this._fullRefresh()})),this.register(E.onMultipleOptionChange(["cursorBlink","cursorStyle"],()=>this.refreshRows(C.buffer.y,C.buffer.y,!0))),this.register((0,f.addDisposableDomListener)(L.window,"resize",()=>this.handleDevicePixelRatioChange())),this.register(R.onChangeColors(()=>this._fullRefresh())),"IntersectionObserver"in L.window){const O=new L.window.IntersectionObserver(T=>this._handleIntersectionChange(T[T.length-1]),{threshold:0});O.observe(S),this.register({dispose:()=>O.disconnect()})}}_handleIntersectionChange(y){this._isPaused=y.isIntersecting===void 0?y.intersectionRatio===0:!y.isIntersecting,this._isPaused||this._charSizeService.hasValidSize||this._charSizeService.measure(),!this._isPaused&&this._needsFullRefresh&&(this._pausedResizeTask.flush(),this.refreshRows(0,this._rowCount-1),this._needsFullRefresh=!1)}refreshRows(y,S,E=!1){this._isPaused?this._needsFullRefresh=!0:(E||(this._isNextRenderRedrawOnly=!1),this._renderDebouncer.refresh(y,S,this._rowCount))}_renderRows(y,S){this._renderer.value&&(y=Math.min(y,this._rowCount-1),S=Math.min(S,this._rowCount-1),this._renderer.value.renderRows(y,S),this._needsSelectionRefresh&&(this._renderer.value.handleSelectionChanged(this._selectionState.start,this._selectionState.end,this._selectionState.columnSelectMode),this._needsSelectionRefresh=!1),this._isNextRenderRedrawOnly||this._onRenderedViewportChange.fire({start:y,end:S}),this._onRender.fire({start:y,end:S}),this._isNextRenderRedrawOnly=!0)}resize(y,S){this._rowCount=S,this._fireOnCanvasResize()}_handleOptionsChanged(){this._renderer.value&&(this.refreshRows(0,this._rowCount-1),this._fireOnCanvasResize())}_fireOnCanvasResize(){this._renderer.value&&(this._renderer.value.dimensions.css.canvas.width===this._canvasWidth&&this._renderer.value.dimensions.css.canvas.height===this._canvasHeight||this._onDimensionsChange.fire(this._renderer.value.dimensions))}hasRenderer(){return!!this._renderer.value}setRenderer(y){this._renderer.value=y,this._renderer.value.onRequestRedraw(S=>this.refreshRows(S.start,S.end,!0)),this._needsSelectionRefresh=!0,this._fullRefresh()}addRefreshCallback(y){return this._renderDebouncer.addRefreshCallback(y)}_fullRefresh(){this._isPaused?this._needsFullRefresh=!0:this.refreshRows(0,this._rowCount-1)}clearTextureAtlas(){var y,S;this._renderer.value&&((S=(y=this._renderer.value).clearTextureAtlas)===null||S===void 0||S.call(y),this._fullRefresh())}handleDevicePixelRatioChange(){this._charSizeService.measure(),this._renderer.value&&(this._renderer.value.handleDevicePixelRatioChange(),this.refreshRows(0,this._rowCount-1))}handleResize(y,S){this._renderer.value&&(this._isPaused?this._pausedResizeTask.set(()=>this._renderer.value.handleResize(y,S)):this._renderer.value.handleResize(y,S),this._fullRefresh())}handleCharSizeChanged(){var y;(y=this._renderer.value)===null||y===void 0||y.handleCharSizeChanged()}handleBlur(){var y;(y=this._renderer.value)===null||y===void 0||y.handleBlur()}handleFocus(){var y;(y=this._renderer.value)===null||y===void 0||y.handleFocus()}handleSelectionChanged(y,S,E){var k;this._selectionState.start=y,this._selectionState.end=S,this._selectionState.columnSelectMode=E,(k=this._renderer.value)===null||k===void 0||k.handleSelectionChanged(y,S,E)}handleCursorMove(){var y;(y=this._renderer.value)===null||y===void 0||y.handleCursorMove()}clear(){var y;(y=this._renderer.value)===null||y===void 0||y.clear()}};o.RenderService=p=h([u(2,m.IOptionsService),u(3,b.ICharSizeService),u(4,m.IDecorationService),u(5,m.IBufferService),u(6,b.ICoreBrowserService),u(7,b.IThemeService)],p)},9312:function(l,o,a){var h=this&&this.__decorate||function(w,C,L,R){var O,T=arguments.length,x=T<3?C:R===null?R=Object.getOwnPropertyDescriptor(C,L):R;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")x=Reflect.decorate(w,C,L,R);else for(var F=w.length-1;F>=0;F--)(O=w[F])&&(x=(T<3?O(x):T>3?O(C,L,x):O(C,L))||x);return T>3&&x&&Object.defineProperty(C,L,x),x},u=this&&this.__param||function(w,C){return function(L,R){C(L,R,w)}};Object.defineProperty(o,"__esModule",{value:!0}),o.SelectionService=void 0;const f=a(9806),_=a(9504),v=a(456),b=a(4725),g=a(8460),c=a(844),d=a(6114),m=a(4841),p=a(511),y=a(2585),S=" ",E=new RegExp(S,"g");let k=o.SelectionService=class extends c.Disposable{constructor(w,C,L,R,O,T,x,F,Y){super(),this._element=w,this._screenElement=C,this._linkifier=L,this._bufferService=R,this._coreService=O,this._mouseService=T,this._optionsService=x,this._renderService=F,this._coreBrowserService=Y,this._dragScrollAmount=0,this._enabled=!0,this._workCell=new p.CellData,this._mouseDownTimeStamp=0,this._oldHasSelection=!1,this._oldSelectionStart=void 0,this._oldSelectionEnd=void 0,this._onLinuxMouseSelection=this.register(new g.EventEmitter),this.onLinuxMouseSelection=this._onLinuxMouseSelection.event,this._onRedrawRequest=this.register(new g.EventEmitter),this.onRequestRedraw=this._onRedrawRequest.event,this._onSelectionChange=this.register(new g.EventEmitter),this.onSelectionChange=this._onSelectionChange.event,this._onRequestScrollLines=this.register(new g.EventEmitter),this.onRequestScrollLines=this._onRequestScrollLines.event,this._mouseMoveListener=q=>this._handleMouseMove(q),this._mouseUpListener=q=>this._handleMouseUp(q),this._coreService.onUserInput(()=>{this.hasSelection&&this.clearSelection()}),this._trimListener=this._bufferService.buffer.lines.onTrim(q=>this._handleTrim(q)),this.register(this._bufferService.buffers.onBufferActivate(q=>this._handleBufferActivate(q))),this.enable(),this._model=new v.SelectionModel(this._bufferService),this._activeSelectionMode=0,this.register((0,c.toDisposable)(()=>{this._removeMouseDownListeners()}))}reset(){this.clearSelection()}disable(){this.clearSelection(),this._enabled=!1}enable(){this._enabled=!0}get selectionStart(){return this._model.finalSelectionStart}get selectionEnd(){return this._model.finalSelectionEnd}get hasSelection(){const w=this._model.finalSelectionStart,C=this._model.finalSelectionEnd;return!(!w||!C||w[0]===C[0]&&w[1]===C[1])}get selectionText(){const w=this._model.finalSelectionStart,C=this._model.finalSelectionEnd;if(!w||!C)return"";const L=this._bufferService.buffer,R=[];if(this._activeSelectionMode===3){if(w[0]===C[0])return"";const O=w[0]<C[0]?w[0]:C[0],T=w[0]<C[0]?C[0]:w[0];for(let x=w[1];x<=C[1];x++){const F=L.translateBufferLineToString(x,!0,O,T);R.push(F)}}else{const O=w[1]===C[1]?C[0]:void 0;R.push(L.translateBufferLineToString(w[1],!0,w[0],O));for(let T=w[1]+1;T<=C[1]-1;T++){const x=L.lines.get(T),F=L.translateBufferLineToString(T,!0);x!=null&&x.isWrapped?R[R.length-1]+=F:R.push(F)}if(w[1]!==C[1]){const T=L.lines.get(C[1]),x=L.translateBufferLineToString(C[1],!0,0,C[0]);T&&T.isWrapped?R[R.length-1]+=x:R.push(x)}}return R.map(O=>O.replace(E," ")).join(d.isWindows?`\r
`:`
`)}clearSelection(){this._model.clearSelection(),this._removeMouseDownListeners(),this.refresh(),this._onSelectionChange.fire()}refresh(w){this._refreshAnimationFrame||(this._refreshAnimationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>this._refresh())),d.isLinux&&w&&this.selectionText.length&&this._onLinuxMouseSelection.fire(this.selectionText)}_refresh(){this._refreshAnimationFrame=void 0,this._onRedrawRequest.fire({start:this._model.finalSelectionStart,end:this._model.finalSelectionEnd,columnSelectMode:this._activeSelectionMode===3})}_isClickInSelection(w){const C=this._getMouseBufferCoords(w),L=this._model.finalSelectionStart,R=this._model.finalSelectionEnd;return!!(L&&R&&C)&&this._areCoordsInSelection(C,L,R)}isCellInSelection(w,C){const L=this._model.finalSelectionStart,R=this._model.finalSelectionEnd;return!(!L||!R)&&this._areCoordsInSelection([w,C],L,R)}_areCoordsInSelection(w,C,L){return w[1]>C[1]&&w[1]<L[1]||C[1]===L[1]&&w[1]===C[1]&&w[0]>=C[0]&&w[0]<L[0]||C[1]<L[1]&&w[1]===L[1]&&w[0]<L[0]||C[1]<L[1]&&w[1]===C[1]&&w[0]>=C[0]}_selectWordAtCursor(w,C){var L,R;const O=(R=(L=this._linkifier.currentLink)===null||L===void 0?void 0:L.link)===null||R===void 0?void 0:R.range;if(O)return this._model.selectionStart=[O.start.x-1,O.start.y-1],this._model.selectionStartLength=(0,m.getRangeLength)(O,this._bufferService.cols),this._model.selectionEnd=void 0,!0;const T=this._getMouseBufferCoords(w);return!!T&&(this._selectWordAt(T,C),this._model.selectionEnd=void 0,!0)}selectAll(){this._model.isSelectAllActive=!0,this.refresh(),this._onSelectionChange.fire()}selectLines(w,C){this._model.clearSelection(),w=Math.max(w,0),C=Math.min(C,this._bufferService.buffer.lines.length-1),this._model.selectionStart=[0,w],this._model.selectionEnd=[this._bufferService.cols,C],this.refresh(),this._onSelectionChange.fire()}_handleTrim(w){this._model.handleTrim(w)&&this.refresh()}_getMouseBufferCoords(w){const C=this._mouseService.getCoords(w,this._screenElement,this._bufferService.cols,this._bufferService.rows,!0);if(C)return C[0]--,C[1]--,C[1]+=this._bufferService.buffer.ydisp,C}_getMouseEventScrollAmount(w){let C=(0,f.getCoordsRelativeToElement)(this._coreBrowserService.window,w,this._screenElement)[1];const L=this._renderService.dimensions.css.canvas.height;return C>=0&&C<=L?0:(C>L&&(C-=L),C=Math.min(Math.max(C,-50),50),C/=50,C/Math.abs(C)+Math.round(14*C))}shouldForceSelection(w){return d.isMac?w.altKey&&this._optionsService.rawOptions.macOptionClickForcesSelection:w.shiftKey}handleMouseDown(w){if(this._mouseDownTimeStamp=w.timeStamp,(w.button!==2||!this.hasSelection)&&w.button===0){if(!this._enabled){if(!this.shouldForceSelection(w))return;w.stopPropagation()}w.preventDefault(),this._dragScrollAmount=0,this._enabled&&w.shiftKey?this._handleIncrementalClick(w):w.detail===1?this._handleSingleClick(w):w.detail===2?this._handleDoubleClick(w):w.detail===3&&this._handleTripleClick(w),this._addMouseDownListeners(),this.refresh(!0)}}_addMouseDownListeners(){this._screenElement.ownerDocument&&(this._screenElement.ownerDocument.addEventListener("mousemove",this._mouseMoveListener),this._screenElement.ownerDocument.addEventListener("mouseup",this._mouseUpListener)),this._dragScrollIntervalTimer=this._coreBrowserService.window.setInterval(()=>this._dragScroll(),50)}_removeMouseDownListeners(){this._screenElement.ownerDocument&&(this._screenElement.ownerDocument.removeEventListener("mousemove",this._mouseMoveListener),this._screenElement.ownerDocument.removeEventListener("mouseup",this._mouseUpListener)),this._coreBrowserService.window.clearInterval(this._dragScrollIntervalTimer),this._dragScrollIntervalTimer=void 0}_handleIncrementalClick(w){this._model.selectionStart&&(this._model.selectionEnd=this._getMouseBufferCoords(w))}_handleSingleClick(w){if(this._model.selectionStartLength=0,this._model.isSelectAllActive=!1,this._activeSelectionMode=this.shouldColumnSelect(w)?3:0,this._model.selectionStart=this._getMouseBufferCoords(w),!this._model.selectionStart)return;this._model.selectionEnd=void 0;const C=this._bufferService.buffer.lines.get(this._model.selectionStart[1]);C&&C.length!==this._model.selectionStart[0]&&C.hasWidth(this._model.selectionStart[0])===0&&this._model.selectionStart[0]++}_handleDoubleClick(w){this._selectWordAtCursor(w,!0)&&(this._activeSelectionMode=1)}_handleTripleClick(w){const C=this._getMouseBufferCoords(w);C&&(this._activeSelectionMode=2,this._selectLineAt(C[1]))}shouldColumnSelect(w){return w.altKey&&!(d.isMac&&this._optionsService.rawOptions.macOptionClickForcesSelection)}_handleMouseMove(w){if(w.stopImmediatePropagation(),!this._model.selectionStart)return;const C=this._model.selectionEnd?[this._model.selectionEnd[0],this._model.selectionEnd[1]]:null;if(this._model.selectionEnd=this._getMouseBufferCoords(w),!this._model.selectionEnd)return void this.refresh(!0);this._activeSelectionMode===2?this._model.selectionEnd[1]<this._model.selectionStart[1]?this._model.selectionEnd[0]=0:this._model.selectionEnd[0]=this._bufferService.cols:this._activeSelectionMode===1&&this._selectToWordAt(this._model.selectionEnd),this._dragScrollAmount=this._getMouseEventScrollAmount(w),this._activeSelectionMode!==3&&(this._dragScrollAmount>0?this._model.selectionEnd[0]=this._bufferService.cols:this._dragScrollAmount<0&&(this._model.selectionEnd[0]=0));const L=this._bufferService.buffer;if(this._model.selectionEnd[1]<L.lines.length){const R=L.lines.get(this._model.selectionEnd[1]);R&&R.hasWidth(this._model.selectionEnd[0])===0&&this._model.selectionEnd[0]++}C&&C[0]===this._model.selectionEnd[0]&&C[1]===this._model.selectionEnd[1]||this.refresh(!0)}_dragScroll(){if(this._model.selectionEnd&&this._model.selectionStart&&this._dragScrollAmount){this._onRequestScrollLines.fire({amount:this._dragScrollAmount,suppressScrollEvent:!1});const w=this._bufferService.buffer;this._dragScrollAmount>0?(this._activeSelectionMode!==3&&(this._model.selectionEnd[0]=this._bufferService.cols),this._model.selectionEnd[1]=Math.min(w.ydisp+this._bufferService.rows,w.lines.length-1)):(this._activeSelectionMode!==3&&(this._model.selectionEnd[0]=0),this._model.selectionEnd[1]=w.ydisp),this.refresh()}}_handleMouseUp(w){const C=w.timeStamp-this._mouseDownTimeStamp;if(this._removeMouseDownListeners(),this.selectionText.length<=1&&C<500&&w.altKey&&this._optionsService.rawOptions.altClickMovesCursor){if(this._bufferService.buffer.ybase===this._bufferService.buffer.ydisp){const L=this._mouseService.getCoords(w,this._element,this._bufferService.cols,this._bufferService.rows,!1);if(L&&L[0]!==void 0&&L[1]!==void 0){const R=(0,_.moveToCellSequence)(L[0]-1,L[1]-1,this._bufferService,this._coreService.decPrivateModes.applicationCursorKeys);this._coreService.triggerDataEvent(R,!0)}}}else this._fireEventIfSelectionChanged()}_fireEventIfSelectionChanged(){const w=this._model.finalSelectionStart,C=this._model.finalSelectionEnd,L=!(!w||!C||w[0]===C[0]&&w[1]===C[1]);L?w&&C&&(this._oldSelectionStart&&this._oldSelectionEnd&&w[0]===this._oldSelectionStart[0]&&w[1]===this._oldSelectionStart[1]&&C[0]===this._oldSelectionEnd[0]&&C[1]===this._oldSelectionEnd[1]||this._fireOnSelectionChange(w,C,L)):this._oldHasSelection&&this._fireOnSelectionChange(w,C,L)}_fireOnSelectionChange(w,C,L){this._oldSelectionStart=w,this._oldSelectionEnd=C,this._oldHasSelection=L,this._onSelectionChange.fire()}_handleBufferActivate(w){this.clearSelection(),this._trimListener.dispose(),this._trimListener=w.activeBuffer.lines.onTrim(C=>this._handleTrim(C))}_convertViewportColToCharacterIndex(w,C){let L=C;for(let R=0;C>=R;R++){const O=w.loadCell(R,this._workCell).getChars().length;this._workCell.getWidth()===0?L--:O>1&&C!==R&&(L+=O-1)}return L}setSelection(w,C,L){this._model.clearSelection(),this._removeMouseDownListeners(),this._model.selectionStart=[w,C],this._model.selectionStartLength=L,this.refresh(),this._fireEventIfSelectionChanged()}rightClickSelect(w){this._isClickInSelection(w)||(this._selectWordAtCursor(w,!1)&&this.refresh(!0),this._fireEventIfSelectionChanged())}_getWordAt(w,C,L=!0,R=!0){if(w[0]>=this._bufferService.cols)return;const O=this._bufferService.buffer,T=O.lines.get(w[1]);if(!T)return;const x=O.translateBufferLineToString(w[1],!1);let F=this._convertViewportColToCharacterIndex(T,w[0]),Y=F;const q=w[0]-F;let M=0,B=0,A=0,H=0;if(x.charAt(F)===" "){for(;F>0&&x.charAt(F-1)===" ";)F--;for(;Y<x.length&&x.charAt(Y+1)===" ";)Y++}else{let he=w[0],ae=w[0];T.getWidth(he)===0&&(M++,he--),T.getWidth(ae)===2&&(B++,ae++);const ye=T.getString(ae).length;for(ye>1&&(H+=ye-1,Y+=ye-1);he>0&&F>0&&!this._isCharWordSeparator(T.loadCell(he-1,this._workCell));){T.loadCell(he-1,this._workCell);const D=this._workCell.getChars().length;this._workCell.getWidth()===0?(M++,he--):D>1&&(A+=D-1,F-=D-1),F--,he--}for(;ae<T.length&&Y+1<x.length&&!this._isCharWordSeparator(T.loadCell(ae+1,this._workCell));){T.loadCell(ae+1,this._workCell);const D=this._workCell.getChars().length;this._workCell.getWidth()===2?(B++,ae++):D>1&&(H+=D-1,Y+=D-1),Y++,ae++}}Y++;let N=F+q-M+A,se=Math.min(this._bufferService.cols,Y-F+M+B-A-H);if(C||x.slice(F,Y).trim()!==""){if(L&&N===0&&T.getCodePoint(0)!==32){const he=O.lines.get(w[1]-1);if(he&&T.isWrapped&&he.getCodePoint(this._bufferService.cols-1)!==32){const ae=this._getWordAt([this._bufferService.cols-1,w[1]-1],!1,!0,!1);if(ae){const ye=this._bufferService.cols-ae.start;N-=ye,se+=ye}}}if(R&&N+se===this._bufferService.cols&&T.getCodePoint(this._bufferService.cols-1)!==32){const he=O.lines.get(w[1]+1);if(he!=null&&he.isWrapped&&he.getCodePoint(0)!==32){const ae=this._getWordAt([0,w[1]+1],!1,!1,!0);ae&&(se+=ae.length)}}return{start:N,length:se}}}_selectWordAt(w,C){const L=this._getWordAt(w,C);if(L){for(;L.start<0;)L.start+=this._bufferService.cols,w[1]--;this._model.selectionStart=[L.start,w[1]],this._model.selectionStartLength=L.length}}_selectToWordAt(w){const C=this._getWordAt(w,!0);if(C){let L=w[1];for(;C.start<0;)C.start+=this._bufferService.cols,L--;if(!this._model.areSelectionValuesReversed())for(;C.start+C.length>this._bufferService.cols;)C.length-=this._bufferService.cols,L++;this._model.selectionEnd=[this._model.areSelectionValuesReversed()?C.start:C.start+C.length,L]}}_isCharWordSeparator(w){return w.getWidth()!==0&&this._optionsService.rawOptions.wordSeparator.indexOf(w.getChars())>=0}_selectLineAt(w){const C=this._bufferService.buffer.getWrappedRangeForLine(w),L={start:{x:0,y:C.first},end:{x:this._bufferService.cols-1,y:C.last}};this._model.selectionStart=[0,C.first],this._model.selectionEnd=void 0,this._model.selectionStartLength=(0,m.getRangeLength)(L,this._bufferService.cols)}};o.SelectionService=k=h([u(3,y.IBufferService),u(4,y.ICoreService),u(5,b.IMouseService),u(6,y.IOptionsService),u(7,b.IRenderService),u(8,b.ICoreBrowserService)],k)},4725:(l,o,a)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.IThemeService=o.ICharacterJoinerService=o.ISelectionService=o.IRenderService=o.IMouseService=o.ICoreBrowserService=o.ICharSizeService=void 0;const h=a(8343);o.ICharSizeService=(0,h.createDecorator)("CharSizeService"),o.ICoreBrowserService=(0,h.createDecorator)("CoreBrowserService"),o.IMouseService=(0,h.createDecorator)("MouseService"),o.IRenderService=(0,h.createDecorator)("RenderService"),o.ISelectionService=(0,h.createDecorator)("SelectionService"),o.ICharacterJoinerService=(0,h.createDecorator)("CharacterJoinerService"),o.IThemeService=(0,h.createDecorator)("ThemeService")},6731:function(l,o,a){var h=this&&this.__decorate||function(k,w,C,L){var R,O=arguments.length,T=O<3?w:L===null?L=Object.getOwnPropertyDescriptor(w,C):L;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")T=Reflect.decorate(k,w,C,L);else for(var x=k.length-1;x>=0;x--)(R=k[x])&&(T=(O<3?R(T):O>3?R(w,C,T):R(w,C))||T);return O>3&&T&&Object.defineProperty(w,C,T),T},u=this&&this.__param||function(k,w){return function(C,L){w(C,L,k)}};Object.defineProperty(o,"__esModule",{value:!0}),o.ThemeService=o.DEFAULT_ANSI_COLORS=void 0;const f=a(7239),_=a(8055),v=a(8460),b=a(844),g=a(2585),c=_.css.toColor("#ffffff"),d=_.css.toColor("#000000"),m=_.css.toColor("#ffffff"),p=_.css.toColor("#000000"),y={css:"rgba(255, 255, 255, 0.3)",rgba:4294967117};o.DEFAULT_ANSI_COLORS=Object.freeze((()=>{const k=[_.css.toColor("#2e3436"),_.css.toColor("#cc0000"),_.css.toColor("#4e9a06"),_.css.toColor("#c4a000"),_.css.toColor("#3465a4"),_.css.toColor("#75507b"),_.css.toColor("#06989a"),_.css.toColor("#d3d7cf"),_.css.toColor("#555753"),_.css.toColor("#ef2929"),_.css.toColor("#8ae234"),_.css.toColor("#fce94f"),_.css.toColor("#729fcf"),_.css.toColor("#ad7fa8"),_.css.toColor("#34e2e2"),_.css.toColor("#eeeeec")],w=[0,95,135,175,215,255];for(let C=0;C<216;C++){const L=w[C/36%6|0],R=w[C/6%6|0],O=w[C%6];k.push({css:_.channels.toCss(L,R,O),rgba:_.channels.toRgba(L,R,O)})}for(let C=0;C<24;C++){const L=8+10*C;k.push({css:_.channels.toCss(L,L,L),rgba:_.channels.toRgba(L,L,L)})}return k})());let S=o.ThemeService=class extends b.Disposable{get colors(){return this._colors}constructor(k){super(),this._optionsService=k,this._contrastCache=new f.ColorContrastCache,this._halfContrastCache=new f.ColorContrastCache,this._onChangeColors=this.register(new v.EventEmitter),this.onChangeColors=this._onChangeColors.event,this._colors={foreground:c,background:d,cursor:m,cursorAccent:p,selectionForeground:void 0,selectionBackgroundTransparent:y,selectionBackgroundOpaque:_.color.blend(d,y),selectionInactiveBackgroundTransparent:y,selectionInactiveBackgroundOpaque:_.color.blend(d,y),ansi:o.DEFAULT_ANSI_COLORS.slice(),contrastCache:this._contrastCache,halfContrastCache:this._halfContrastCache},this._updateRestoreColors(),this._setTheme(this._optionsService.rawOptions.theme),this.register(this._optionsService.onSpecificOptionChange("minimumContrastRatio",()=>this._contrastCache.clear())),this.register(this._optionsService.onSpecificOptionChange("theme",()=>this._setTheme(this._optionsService.rawOptions.theme)))}_setTheme(k={}){const w=this._colors;if(w.foreground=E(k.foreground,c),w.background=E(k.background,d),w.cursor=E(k.cursor,m),w.cursorAccent=E(k.cursorAccent,p),w.selectionBackgroundTransparent=E(k.selectionBackground,y),w.selectionBackgroundOpaque=_.color.blend(w.background,w.selectionBackgroundTransparent),w.selectionInactiveBackgroundTransparent=E(k.selectionInactiveBackground,w.selectionBackgroundTransparent),w.selectionInactiveBackgroundOpaque=_.color.blend(w.background,w.selectionInactiveBackgroundTransparent),w.selectionForeground=k.selectionForeground?E(k.selectionForeground,_.NULL_COLOR):void 0,w.selectionForeground===_.NULL_COLOR&&(w.selectionForeground=void 0),_.color.isOpaque(w.selectionBackgroundTransparent)&&(w.selectionBackgroundTransparent=_.color.opacity(w.selectionBackgroundTransparent,.3)),_.color.isOpaque(w.selectionInactiveBackgroundTransparent)&&(w.selectionInactiveBackgroundTransparent=_.color.opacity(w.selectionInactiveBackgroundTransparent,.3)),w.ansi=o.DEFAULT_ANSI_COLORS.slice(),w.ansi[0]=E(k.black,o.DEFAULT_ANSI_COLORS[0]),w.ansi[1]=E(k.red,o.DEFAULT_ANSI_COLORS[1]),w.ansi[2]=E(k.green,o.DEFAULT_ANSI_COLORS[2]),w.ansi[3]=E(k.yellow,o.DEFAULT_ANSI_COLORS[3]),w.ansi[4]=E(k.blue,o.DEFAULT_ANSI_COLORS[4]),w.ansi[5]=E(k.magenta,o.DEFAULT_ANSI_COLORS[5]),w.ansi[6]=E(k.cyan,o.DEFAULT_ANSI_COLORS[6]),w.ansi[7]=E(k.white,o.DEFAULT_ANSI_COLORS[7]),w.ansi[8]=E(k.brightBlack,o.DEFAULT_ANSI_COLORS[8]),w.ansi[9]=E(k.brightRed,o.DEFAULT_ANSI_COLORS[9]),w.ansi[10]=E(k.brightGreen,o.DEFAULT_ANSI_COLORS[10]),w.ansi[11]=E(k.brightYellow,o.DEFAULT_ANSI_COLORS[11]),w.ansi[12]=E(k.brightBlue,o.DEFAULT_ANSI_COLORS[12]),w.ansi[13]=E(k.brightMagenta,o.DEFAULT_ANSI_COLORS[13]),w.ansi[14]=E(k.brightCyan,o.DEFAULT_ANSI_COLORS[14]),w.ansi[15]=E(k.brightWhite,o.DEFAULT_ANSI_COLORS[15]),k.extendedAnsi){const C=Math.min(w.ansi.length-16,k.extendedAnsi.length);for(let L=0;L<C;L++)w.ansi[L+16]=E(k.extendedAnsi[L],o.DEFAULT_ANSI_COLORS[L+16])}this._contrastCache.clear(),this._halfContrastCache.clear(),this._updateRestoreColors(),this._onChangeColors.fire(this.colors)}restoreColor(k){this._restoreColor(k),this._onChangeColors.fire(this.colors)}_restoreColor(k){if(k!==void 0)switch(k){case 256:this._colors.foreground=this._restoreColors.foreground;break;case 257:this._colors.background=this._restoreColors.background;break;case 258:this._colors.cursor=this._restoreColors.cursor;break;default:this._colors.ansi[k]=this._restoreColors.ansi[k]}else for(let w=0;w<this._restoreColors.ansi.length;++w)this._colors.ansi[w]=this._restoreColors.ansi[w]}modifyColors(k){k(this._colors),this._onChangeColors.fire(this.colors)}_updateRestoreColors(){this._restoreColors={foreground:this._colors.foreground,background:this._colors.background,cursor:this._colors.cursor,ansi:this._colors.ansi.slice()}}};function E(k,w){if(k!==void 0)try{return _.css.toColor(k)}catch{}return w}o.ThemeService=S=h([u(0,g.IOptionsService)],S)},6349:(l,o,a)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.CircularList=void 0;const h=a(8460),u=a(844);class f extends u.Disposable{constructor(v){super(),this._maxLength=v,this.onDeleteEmitter=this.register(new h.EventEmitter),this.onDelete=this.onDeleteEmitter.event,this.onInsertEmitter=this.register(new h.EventEmitter),this.onInsert=this.onInsertEmitter.event,this.onTrimEmitter=this.register(new h.EventEmitter),this.onTrim=this.onTrimEmitter.event,this._array=new Array(this._maxLength),this._startIndex=0,this._length=0}get maxLength(){return this._maxLength}set maxLength(v){if(this._maxLength===v)return;const b=new Array(v);for(let g=0;g<Math.min(v,this.length);g++)b[g]=this._array[this._getCyclicIndex(g)];this._array=b,this._maxLength=v,this._startIndex=0}get length(){return this._length}set length(v){if(v>this._length)for(let b=this._length;b<v;b++)this._array[b]=void 0;this._length=v}get(v){return this._array[this._getCyclicIndex(v)]}set(v,b){this._array[this._getCyclicIndex(v)]=b}push(v){this._array[this._getCyclicIndex(this._length)]=v,this._length===this._maxLength?(this._startIndex=++this._startIndex%this._maxLength,this.onTrimEmitter.fire(1)):this._length++}recycle(){if(this._length!==this._maxLength)throw new Error("Can only recycle when the buffer is full");return this._startIndex=++this._startIndex%this._maxLength,this.onTrimEmitter.fire(1),this._array[this._getCyclicIndex(this._length-1)]}get isFull(){return this._length===this._maxLength}pop(){return this._array[this._getCyclicIndex(this._length---1)]}splice(v,b,...g){if(b){for(let c=v;c<this._length-b;c++)this._array[this._getCyclicIndex(c)]=this._array[this._getCyclicIndex(c+b)];this._length-=b,this.onDeleteEmitter.fire({index:v,amount:b})}for(let c=this._length-1;c>=v;c--)this._array[this._getCyclicIndex(c+g.length)]=this._array[this._getCyclicIndex(c)];for(let c=0;c<g.length;c++)this._array[this._getCyclicIndex(v+c)]=g[c];if(g.length&&this.onInsertEmitter.fire({index:v,amount:g.length}),this._length+g.length>this._maxLength){const c=this._length+g.length-this._maxLength;this._startIndex+=c,this._length=this._maxLength,this.onTrimEmitter.fire(c)}else this._length+=g.length}trimStart(v){v>this._length&&(v=this._length),this._startIndex+=v,this._length-=v,this.onTrimEmitter.fire(v)}shiftElements(v,b,g){if(!(b<=0)){if(v<0||v>=this._length)throw new Error("start argument out of range");if(v+g<0)throw new Error("Cannot shift elements in list beyond index 0");if(g>0){for(let d=b-1;d>=0;d--)this.set(v+d+g,this.get(v+d));const c=v+b+g-this._length;if(c>0)for(this._length+=c;this._length>this._maxLength;)this._length--,this._startIndex++,this.onTrimEmitter.fire(1)}else for(let c=0;c<b;c++)this.set(v+c+g,this.get(v+c))}}_getCyclicIndex(v){return(this._startIndex+v)%this._maxLength}}o.CircularList=f},1439:(l,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.clone=void 0,o.clone=function a(h,u=5){if(typeof h!="object")return h;const f=Array.isArray(h)?[]:{};for(const _ in h)f[_]=u<=1?h[_]:h[_]&&a(h[_],u-1);return f}},8055:(l,o,a)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.contrastRatio=o.toPaddedHex=o.rgba=o.rgb=o.css=o.color=o.channels=o.NULL_COLOR=void 0;const h=a(6114);let u=0,f=0,_=0,v=0;var b,g,c,d,m;function p(S){const E=S.toString(16);return E.length<2?"0"+E:E}function y(S,E){return S<E?(E+.05)/(S+.05):(S+.05)/(E+.05)}o.NULL_COLOR={css:"#00000000",rgba:0},function(S){S.toCss=function(E,k,w,C){return C!==void 0?`#${p(E)}${p(k)}${p(w)}${p(C)}`:`#${p(E)}${p(k)}${p(w)}`},S.toRgba=function(E,k,w,C=255){return(E<<24|k<<16|w<<8|C)>>>0}}(b||(o.channels=b={})),function(S){function E(k,w){return v=Math.round(255*w),[u,f,_]=m.toChannels(k.rgba),{css:b.toCss(u,f,_,v),rgba:b.toRgba(u,f,_,v)}}S.blend=function(k,w){if(v=(255&w.rgba)/255,v===1)return{css:w.css,rgba:w.rgba};const C=w.rgba>>24&255,L=w.rgba>>16&255,R=w.rgba>>8&255,O=k.rgba>>24&255,T=k.rgba>>16&255,x=k.rgba>>8&255;return u=O+Math.round((C-O)*v),f=T+Math.round((L-T)*v),_=x+Math.round((R-x)*v),{css:b.toCss(u,f,_),rgba:b.toRgba(u,f,_)}},S.isOpaque=function(k){return(255&k.rgba)==255},S.ensureContrastRatio=function(k,w,C){const L=m.ensureContrastRatio(k.rgba,w.rgba,C);if(L)return m.toColor(L>>24&255,L>>16&255,L>>8&255)},S.opaque=function(k){const w=(255|k.rgba)>>>0;return[u,f,_]=m.toChannels(w),{css:b.toCss(u,f,_),rgba:w}},S.opacity=E,S.multiplyOpacity=function(k,w){return v=255&k.rgba,E(k,v*w/255)},S.toColorRGB=function(k){return[k.rgba>>24&255,k.rgba>>16&255,k.rgba>>8&255]}}(g||(o.color=g={})),function(S){let E,k;if(!h.isNode){const w=document.createElement("canvas");w.width=1,w.height=1;const C=w.getContext("2d",{willReadFrequently:!0});C&&(E=C,E.globalCompositeOperation="copy",k=E.createLinearGradient(0,0,1,1))}S.toColor=function(w){if(w.match(/#[\da-f]{3,8}/i))switch(w.length){case 4:return u=parseInt(w.slice(1,2).repeat(2),16),f=parseInt(w.slice(2,3).repeat(2),16),_=parseInt(w.slice(3,4).repeat(2),16),m.toColor(u,f,_);case 5:return u=parseInt(w.slice(1,2).repeat(2),16),f=parseInt(w.slice(2,3).repeat(2),16),_=parseInt(w.slice(3,4).repeat(2),16),v=parseInt(w.slice(4,5).repeat(2),16),m.toColor(u,f,_,v);case 7:return{css:w,rgba:(parseInt(w.slice(1),16)<<8|255)>>>0};case 9:return{css:w,rgba:parseInt(w.slice(1),16)>>>0}}const C=w.match(/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(,\s*(0|1|\d?\.(\d+))\s*)?\)/);if(C)return u=parseInt(C[1]),f=parseInt(C[2]),_=parseInt(C[3]),v=Math.round(255*(C[5]===void 0?1:parseFloat(C[5]))),m.toColor(u,f,_,v);if(!E||!k)throw new Error("css.toColor: Unsupported css format");if(E.fillStyle=k,E.fillStyle=w,typeof E.fillStyle!="string")throw new Error("css.toColor: Unsupported css format");if(E.fillRect(0,0,1,1),[u,f,_,v]=E.getImageData(0,0,1,1).data,v!==255)throw new Error("css.toColor: Unsupported css format");return{rgba:b.toRgba(u,f,_,v),css:w}}}(c||(o.css=c={})),function(S){function E(k,w,C){const L=k/255,R=w/255,O=C/255;return .2126*(L<=.03928?L/12.92:Math.pow((L+.055)/1.055,2.4))+.7152*(R<=.03928?R/12.92:Math.pow((R+.055)/1.055,2.4))+.0722*(O<=.03928?O/12.92:Math.pow((O+.055)/1.055,2.4))}S.relativeLuminance=function(k){return E(k>>16&255,k>>8&255,255&k)},S.relativeLuminance2=E}(d||(o.rgb=d={})),function(S){function E(w,C,L){const R=w>>24&255,O=w>>16&255,T=w>>8&255;let x=C>>24&255,F=C>>16&255,Y=C>>8&255,q=y(d.relativeLuminance2(x,F,Y),d.relativeLuminance2(R,O,T));for(;q<L&&(x>0||F>0||Y>0);)x-=Math.max(0,Math.ceil(.1*x)),F-=Math.max(0,Math.ceil(.1*F)),Y-=Math.max(0,Math.ceil(.1*Y)),q=y(d.relativeLuminance2(x,F,Y),d.relativeLuminance2(R,O,T));return(x<<24|F<<16|Y<<8|255)>>>0}function k(w,C,L){const R=w>>24&255,O=w>>16&255,T=w>>8&255;let x=C>>24&255,F=C>>16&255,Y=C>>8&255,q=y(d.relativeLuminance2(x,F,Y),d.relativeLuminance2(R,O,T));for(;q<L&&(x<255||F<255||Y<255);)x=Math.min(255,x+Math.ceil(.1*(255-x))),F=Math.min(255,F+Math.ceil(.1*(255-F))),Y=Math.min(255,Y+Math.ceil(.1*(255-Y))),q=y(d.relativeLuminance2(x,F,Y),d.relativeLuminance2(R,O,T));return(x<<24|F<<16|Y<<8|255)>>>0}S.ensureContrastRatio=function(w,C,L){const R=d.relativeLuminance(w>>8),O=d.relativeLuminance(C>>8);if(y(R,O)<L){if(O<R){const F=E(w,C,L),Y=y(R,d.relativeLuminance(F>>8));if(Y<L){const q=k(w,C,L);return Y>y(R,d.relativeLuminance(q>>8))?F:q}return F}const T=k(w,C,L),x=y(R,d.relativeLuminance(T>>8));if(x<L){const F=E(w,C,L);return x>y(R,d.relativeLuminance(F>>8))?T:F}return T}},S.reduceLuminance=E,S.increaseLuminance=k,S.toChannels=function(w){return[w>>24&255,w>>16&255,w>>8&255,255&w]},S.toColor=function(w,C,L,R){return{css:b.toCss(w,C,L,R),rgba:b.toRgba(w,C,L,R)}}}(m||(o.rgba=m={})),o.toPaddedHex=p,o.contrastRatio=y},8969:(l,o,a)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.CoreTerminal=void 0;const h=a(844),u=a(2585),f=a(4348),_=a(7866),v=a(744),b=a(7302),g=a(6975),c=a(8460),d=a(1753),m=a(1480),p=a(7994),y=a(9282),S=a(5435),E=a(5981),k=a(2660);let w=!1;class C extends h.Disposable{get onScroll(){return this._onScrollApi||(this._onScrollApi=this.register(new c.EventEmitter),this._onScroll.event(R=>{var O;(O=this._onScrollApi)===null||O===void 0||O.fire(R.position)})),this._onScrollApi.event}get cols(){return this._bufferService.cols}get rows(){return this._bufferService.rows}get buffers(){return this._bufferService.buffers}get options(){return this.optionsService.options}set options(R){for(const O in R)this.optionsService.options[O]=R[O]}constructor(R){super(),this._windowsWrappingHeuristics=this.register(new h.MutableDisposable),this._onBinary=this.register(new c.EventEmitter),this.onBinary=this._onBinary.event,this._onData=this.register(new c.EventEmitter),this.onData=this._onData.event,this._onLineFeed=this.register(new c.EventEmitter),this.onLineFeed=this._onLineFeed.event,this._onResize=this.register(new c.EventEmitter),this.onResize=this._onResize.event,this._onWriteParsed=this.register(new c.EventEmitter),this.onWriteParsed=this._onWriteParsed.event,this._onScroll=this.register(new c.EventEmitter),this._instantiationService=new f.InstantiationService,this.optionsService=this.register(new b.OptionsService(R)),this._instantiationService.setService(u.IOptionsService,this.optionsService),this._bufferService=this.register(this._instantiationService.createInstance(v.BufferService)),this._instantiationService.setService(u.IBufferService,this._bufferService),this._logService=this.register(this._instantiationService.createInstance(_.LogService)),this._instantiationService.setService(u.ILogService,this._logService),this.coreService=this.register(this._instantiationService.createInstance(g.CoreService)),this._instantiationService.setService(u.ICoreService,this.coreService),this.coreMouseService=this.register(this._instantiationService.createInstance(d.CoreMouseService)),this._instantiationService.setService(u.ICoreMouseService,this.coreMouseService),this.unicodeService=this.register(this._instantiationService.createInstance(m.UnicodeService)),this._instantiationService.setService(u.IUnicodeService,this.unicodeService),this._charsetService=this._instantiationService.createInstance(p.CharsetService),this._instantiationService.setService(u.ICharsetService,this._charsetService),this._oscLinkService=this._instantiationService.createInstance(k.OscLinkService),this._instantiationService.setService(u.IOscLinkService,this._oscLinkService),this._inputHandler=this.register(new S.InputHandler(this._bufferService,this._charsetService,this.coreService,this._logService,this.optionsService,this._oscLinkService,this.coreMouseService,this.unicodeService)),this.register((0,c.forwardEvent)(this._inputHandler.onLineFeed,this._onLineFeed)),this.register(this._inputHandler),this.register((0,c.forwardEvent)(this._bufferService.onResize,this._onResize)),this.register((0,c.forwardEvent)(this.coreService.onData,this._onData)),this.register((0,c.forwardEvent)(this.coreService.onBinary,this._onBinary)),this.register(this.coreService.onRequestScrollToBottom(()=>this.scrollToBottom())),this.register(this.coreService.onUserInput(()=>this._writeBuffer.handleUserInput())),this.register(this.optionsService.onMultipleOptionChange(["windowsMode","windowsPty"],()=>this._handleWindowsPtyOptionChange())),this.register(this._bufferService.onScroll(O=>{this._onScroll.fire({position:this._bufferService.buffer.ydisp,source:0}),this._inputHandler.markRangeDirty(this._bufferService.buffer.scrollTop,this._bufferService.buffer.scrollBottom)})),this.register(this._inputHandler.onScroll(O=>{this._onScroll.fire({position:this._bufferService.buffer.ydisp,source:0}),this._inputHandler.markRangeDirty(this._bufferService.buffer.scrollTop,this._bufferService.buffer.scrollBottom)})),this._writeBuffer=this.register(new E.WriteBuffer((O,T)=>this._inputHandler.parse(O,T))),this.register((0,c.forwardEvent)(this._writeBuffer.onWriteParsed,this._onWriteParsed))}write(R,O){this._writeBuffer.write(R,O)}writeSync(R,O){this._logService.logLevel<=u.LogLevelEnum.WARN&&!w&&(this._logService.warn("writeSync is unreliable and will be removed soon."),w=!0),this._writeBuffer.writeSync(R,O)}resize(R,O){isNaN(R)||isNaN(O)||(R=Math.max(R,v.MINIMUM_COLS),O=Math.max(O,v.MINIMUM_ROWS),this._bufferService.resize(R,O))}scroll(R,O=!1){this._bufferService.scroll(R,O)}scrollLines(R,O,T){this._bufferService.scrollLines(R,O,T)}scrollPages(R){this.scrollLines(R*(this.rows-1))}scrollToTop(){this.scrollLines(-this._bufferService.buffer.ydisp)}scrollToBottom(){this.scrollLines(this._bufferService.buffer.ybase-this._bufferService.buffer.ydisp)}scrollToLine(R){const O=R-this._bufferService.buffer.ydisp;O!==0&&this.scrollLines(O)}registerEscHandler(R,O){return this._inputHandler.registerEscHandler(R,O)}registerDcsHandler(R,O){return this._inputHandler.registerDcsHandler(R,O)}registerCsiHandler(R,O){return this._inputHandler.registerCsiHandler(R,O)}registerOscHandler(R,O){return this._inputHandler.registerOscHandler(R,O)}_setup(){this._handleWindowsPtyOptionChange()}reset(){this._inputHandler.reset(),this._bufferService.reset(),this._charsetService.reset(),this.coreService.reset(),this.coreMouseService.reset()}_handleWindowsPtyOptionChange(){let R=!1;const O=this.optionsService.rawOptions.windowsPty;O&&O.buildNumber!==void 0&&O.buildNumber!==void 0?R=O.backend==="conpty"&&O.buildNumber<21376:this.optionsService.rawOptions.windowsMode&&(R=!0),R?this._enableWindowsWrappingHeuristics():this._windowsWrappingHeuristics.clear()}_enableWindowsWrappingHeuristics(){if(!this._windowsWrappingHeuristics.value){const R=[];R.push(this.onLineFeed(y.updateWindowsModeWrappedState.bind(null,this._bufferService))),R.push(this.registerCsiHandler({final:"H"},()=>((0,y.updateWindowsModeWrappedState)(this._bufferService),!1))),this._windowsWrappingHeuristics.value=(0,h.toDisposable)(()=>{for(const O of R)O.dispose()})}}}o.CoreTerminal=C},8460:(l,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.forwardEvent=o.EventEmitter=void 0,o.EventEmitter=class{constructor(){this._listeners=[],this._disposed=!1}get event(){return this._event||(this._event=a=>(this._listeners.push(a),{dispose:()=>{if(!this._disposed){for(let h=0;h<this._listeners.length;h++)if(this._listeners[h]===a)return void this._listeners.splice(h,1)}}})),this._event}fire(a,h){const u=[];for(let f=0;f<this._listeners.length;f++)u.push(this._listeners[f]);for(let f=0;f<u.length;f++)u[f].call(void 0,a,h)}dispose(){this.clearListeners(),this._disposed=!0}clearListeners(){this._listeners&&(this._listeners.length=0)}},o.forwardEvent=function(a,h){return a(u=>h.fire(u))}},5435:function(l,o,a){var h=this&&this.__decorate||function(q,M,B,A){var H,N=arguments.length,se=N<3?M:A===null?A=Object.getOwnPropertyDescriptor(M,B):A;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")se=Reflect.decorate(q,M,B,A);else for(var he=q.length-1;he>=0;he--)(H=q[he])&&(se=(N<3?H(se):N>3?H(M,B,se):H(M,B))||se);return N>3&&se&&Object.defineProperty(M,B,se),se},u=this&&this.__param||function(q,M){return function(B,A){M(B,A,q)}};Object.defineProperty(o,"__esModule",{value:!0}),o.InputHandler=o.WindowsOptionsReportType=void 0;const f=a(2584),_=a(7116),v=a(2015),b=a(844),g=a(482),c=a(8437),d=a(8460),m=a(643),p=a(511),y=a(3734),S=a(2585),E=a(6242),k=a(6351),w=a(5941),C={"(":0,")":1,"*":2,"+":3,"-":1,".":2},L=131072;function R(q,M){if(q>24)return M.setWinLines||!1;switch(q){case 1:return!!M.restoreWin;case 2:return!!M.minimizeWin;case 3:return!!M.setWinPosition;case 4:return!!M.setWinSizePixels;case 5:return!!M.raiseWin;case 6:return!!M.lowerWin;case 7:return!!M.refreshWin;case 8:return!!M.setWinSizeChars;case 9:return!!M.maximizeWin;case 10:return!!M.fullscreenWin;case 11:return!!M.getWinState;case 13:return!!M.getWinPosition;case 14:return!!M.getWinSizePixels;case 15:return!!M.getScreenSizePixels;case 16:return!!M.getCellSizePixels;case 18:return!!M.getWinSizeChars;case 19:return!!M.getScreenSizeChars;case 20:return!!M.getIconTitle;case 21:return!!M.getWinTitle;case 22:return!!M.pushTitle;case 23:return!!M.popTitle;case 24:return!!M.setWinLines}return!1}var O;(function(q){q[q.GET_WIN_SIZE_PIXELS=0]="GET_WIN_SIZE_PIXELS",q[q.GET_CELL_SIZE_PIXELS=1]="GET_CELL_SIZE_PIXELS"})(O||(o.WindowsOptionsReportType=O={}));let T=0;class x extends b.Disposable{getAttrData(){return this._curAttrData}constructor(M,B,A,H,N,se,he,ae,ye=new v.EscapeSequenceParser){super(),this._bufferService=M,this._charsetService=B,this._coreService=A,this._logService=H,this._optionsService=N,this._oscLinkService=se,this._coreMouseService=he,this._unicodeService=ae,this._parser=ye,this._parseBuffer=new Uint32Array(4096),this._stringDecoder=new g.StringToUtf32,this._utf8Decoder=new g.Utf8ToUtf32,this._workCell=new p.CellData,this._windowTitle="",this._iconName="",this._windowTitleStack=[],this._iconNameStack=[],this._curAttrData=c.DEFAULT_ATTR_DATA.clone(),this._eraseAttrDataInternal=c.DEFAULT_ATTR_DATA.clone(),this._onRequestBell=this.register(new d.EventEmitter),this.onRequestBell=this._onRequestBell.event,this._onRequestRefreshRows=this.register(new d.EventEmitter),this.onRequestRefreshRows=this._onRequestRefreshRows.event,this._onRequestReset=this.register(new d.EventEmitter),this.onRequestReset=this._onRequestReset.event,this._onRequestSendFocus=this.register(new d.EventEmitter),this.onRequestSendFocus=this._onRequestSendFocus.event,this._onRequestSyncScrollBar=this.register(new d.EventEmitter),this.onRequestSyncScrollBar=this._onRequestSyncScrollBar.event,this._onRequestWindowsOptionsReport=this.register(new d.EventEmitter),this.onRequestWindowsOptionsReport=this._onRequestWindowsOptionsReport.event,this._onA11yChar=this.register(new d.EventEmitter),this.onA11yChar=this._onA11yChar.event,this._onA11yTab=this.register(new d.EventEmitter),this.onA11yTab=this._onA11yTab.event,this._onCursorMove=this.register(new d.EventEmitter),this.onCursorMove=this._onCursorMove.event,this._onLineFeed=this.register(new d.EventEmitter),this.onLineFeed=this._onLineFeed.event,this._onScroll=this.register(new d.EventEmitter),this.onScroll=this._onScroll.event,this._onTitleChange=this.register(new d.EventEmitter),this.onTitleChange=this._onTitleChange.event,this._onColor=this.register(new d.EventEmitter),this.onColor=this._onColor.event,this._parseStack={paused:!1,cursorStartX:0,cursorStartY:0,decodedLength:0,position:0},this._specialColors=[256,257,258],this.register(this._parser),this._dirtyRowTracker=new F(this._bufferService),this._activeBuffer=this._bufferService.buffer,this.register(this._bufferService.buffers.onBufferActivate(D=>this._activeBuffer=D.activeBuffer)),this._parser.setCsiHandlerFallback((D,V)=>{this._logService.debug("Unknown CSI code: ",{identifier:this._parser.identToString(D),params:V.toArray()})}),this._parser.setEscHandlerFallback(D=>{this._logService.debug("Unknown ESC code: ",{identifier:this._parser.identToString(D)})}),this._parser.setExecuteHandlerFallback(D=>{this._logService.debug("Unknown EXECUTE code: ",{code:D})}),this._parser.setOscHandlerFallback((D,V,K)=>{this._logService.debug("Unknown OSC code: ",{identifier:D,action:V,data:K})}),this._parser.setDcsHandlerFallback((D,V,K)=>{V==="HOOK"&&(K=K.toArray()),this._logService.debug("Unknown DCS code: ",{identifier:this._parser.identToString(D),action:V,payload:K})}),this._parser.setPrintHandler((D,V,K)=>this.print(D,V,K)),this._parser.registerCsiHandler({final:"@"},D=>this.insertChars(D)),this._parser.registerCsiHandler({intermediates:" ",final:"@"},D=>this.scrollLeft(D)),this._parser.registerCsiHandler({final:"A"},D=>this.cursorUp(D)),this._parser.registerCsiHandler({intermediates:" ",final:"A"},D=>this.scrollRight(D)),this._parser.registerCsiHandler({final:"B"},D=>this.cursorDown(D)),this._parser.registerCsiHandler({final:"C"},D=>this.cursorForward(D)),this._parser.registerCsiHandler({final:"D"},D=>this.cursorBackward(D)),this._parser.registerCsiHandler({final:"E"},D=>this.cursorNextLine(D)),this._parser.registerCsiHandler({final:"F"},D=>this.cursorPrecedingLine(D)),this._parser.registerCsiHandler({final:"G"},D=>this.cursorCharAbsolute(D)),this._parser.registerCsiHandler({final:"H"},D=>this.cursorPosition(D)),this._parser.registerCsiHandler({final:"I"},D=>this.cursorForwardTab(D)),this._parser.registerCsiHandler({final:"J"},D=>this.eraseInDisplay(D,!1)),this._parser.registerCsiHandler({prefix:"?",final:"J"},D=>this.eraseInDisplay(D,!0)),this._parser.registerCsiHandler({final:"K"},D=>this.eraseInLine(D,!1)),this._parser.registerCsiHandler({prefix:"?",final:"K"},D=>this.eraseInLine(D,!0)),this._parser.registerCsiHandler({final:"L"},D=>this.insertLines(D)),this._parser.registerCsiHandler({final:"M"},D=>this.deleteLines(D)),this._parser.registerCsiHandler({final:"P"},D=>this.deleteChars(D)),this._parser.registerCsiHandler({final:"S"},D=>this.scrollUp(D)),this._parser.registerCsiHandler({final:"T"},D=>this.scrollDown(D)),this._parser.registerCsiHandler({final:"X"},D=>this.eraseChars(D)),this._parser.registerCsiHandler({final:"Z"},D=>this.cursorBackwardTab(D)),this._parser.registerCsiHandler({final:"`"},D=>this.charPosAbsolute(D)),this._parser.registerCsiHandler({final:"a"},D=>this.hPositionRelative(D)),this._parser.registerCsiHandler({final:"b"},D=>this.repeatPrecedingCharacter(D)),this._parser.registerCsiHandler({final:"c"},D=>this.sendDeviceAttributesPrimary(D)),this._parser.registerCsiHandler({prefix:">",final:"c"},D=>this.sendDeviceAttributesSecondary(D)),this._parser.registerCsiHandler({final:"d"},D=>this.linePosAbsolute(D)),this._parser.registerCsiHandler({final:"e"},D=>this.vPositionRelative(D)),this._parser.registerCsiHandler({final:"f"},D=>this.hVPosition(D)),this._parser.registerCsiHandler({final:"g"},D=>this.tabClear(D)),this._parser.registerCsiHandler({final:"h"},D=>this.setMode(D)),this._parser.registerCsiHandler({prefix:"?",final:"h"},D=>this.setModePrivate(D)),this._parser.registerCsiHandler({final:"l"},D=>this.resetMode(D)),this._parser.registerCsiHandler({prefix:"?",final:"l"},D=>this.resetModePrivate(D)),this._parser.registerCsiHandler({final:"m"},D=>this.charAttributes(D)),this._parser.registerCsiHandler({final:"n"},D=>this.deviceStatus(D)),this._parser.registerCsiHandler({prefix:"?",final:"n"},D=>this.deviceStatusPrivate(D)),this._parser.registerCsiHandler({intermediates:"!",final:"p"},D=>this.softReset(D)),this._parser.registerCsiHandler({intermediates:" ",final:"q"},D=>this.setCursorStyle(D)),this._parser.registerCsiHandler({final:"r"},D=>this.setScrollRegion(D)),this._parser.registerCsiHandler({final:"s"},D=>this.saveCursor(D)),this._parser.registerCsiHandler({final:"t"},D=>this.windowOptions(D)),this._parser.registerCsiHandler({final:"u"},D=>this.restoreCursor(D)),this._parser.registerCsiHandler({intermediates:"'",final:"}"},D=>this.insertColumns(D)),this._parser.registerCsiHandler({intermediates:"'",final:"~"},D=>this.deleteColumns(D)),this._parser.registerCsiHandler({intermediates:'"',final:"q"},D=>this.selectProtected(D)),this._parser.registerCsiHandler({intermediates:"$",final:"p"},D=>this.requestMode(D,!0)),this._parser.registerCsiHandler({prefix:"?",intermediates:"$",final:"p"},D=>this.requestMode(D,!1)),this._parser.setExecuteHandler(f.C0.BEL,()=>this.bell()),this._parser.setExecuteHandler(f.C0.LF,()=>this.lineFeed()),this._parser.setExecuteHandler(f.C0.VT,()=>this.lineFeed()),this._parser.setExecuteHandler(f.C0.FF,()=>this.lineFeed()),this._parser.setExecuteHandler(f.C0.CR,()=>this.carriageReturn()),this._parser.setExecuteHandler(f.C0.BS,()=>this.backspace()),this._parser.setExecuteHandler(f.C0.HT,()=>this.tab()),this._parser.setExecuteHandler(f.C0.SO,()=>this.shiftOut()),this._parser.setExecuteHandler(f.C0.SI,()=>this.shiftIn()),this._parser.setExecuteHandler(f.C1.IND,()=>this.index()),this._parser.setExecuteHandler(f.C1.NEL,()=>this.nextLine()),this._parser.setExecuteHandler(f.C1.HTS,()=>this.tabSet()),this._parser.registerOscHandler(0,new E.OscHandler(D=>(this.setTitle(D),this.setIconName(D),!0))),this._parser.registerOscHandler(1,new E.OscHandler(D=>this.setIconName(D))),this._parser.registerOscHandler(2,new E.OscHandler(D=>this.setTitle(D))),this._parser.registerOscHandler(4,new E.OscHandler(D=>this.setOrReportIndexedColor(D))),this._parser.registerOscHandler(8,new E.OscHandler(D=>this.setHyperlink(D))),this._parser.registerOscHandler(10,new E.OscHandler(D=>this.setOrReportFgColor(D))),this._parser.registerOscHandler(11,new E.OscHandler(D=>this.setOrReportBgColor(D))),this._parser.registerOscHandler(12,new E.OscHandler(D=>this.setOrReportCursorColor(D))),this._parser.registerOscHandler(104,new E.OscHandler(D=>this.restoreIndexedColor(D))),this._parser.registerOscHandler(110,new E.OscHandler(D=>this.restoreFgColor(D))),this._parser.registerOscHandler(111,new E.OscHandler(D=>this.restoreBgColor(D))),this._parser.registerOscHandler(112,new E.OscHandler(D=>this.restoreCursorColor(D))),this._parser.registerEscHandler({final:"7"},()=>this.saveCursor()),this._parser.registerEscHandler({final:"8"},()=>this.restoreCursor()),this._parser.registerEscHandler({final:"D"},()=>this.index()),this._parser.registerEscHandler({final:"E"},()=>this.nextLine()),this._parser.registerEscHandler({final:"H"},()=>this.tabSet()),this._parser.registerEscHandler({final:"M"},()=>this.reverseIndex()),this._parser.registerEscHandler({final:"="},()=>this.keypadApplicationMode()),this._parser.registerEscHandler({final:">"},()=>this.keypadNumericMode()),this._parser.registerEscHandler({final:"c"},()=>this.fullReset()),this._parser.registerEscHandler({final:"n"},()=>this.setgLevel(2)),this._parser.registerEscHandler({final:"o"},()=>this.setgLevel(3)),this._parser.registerEscHandler({final:"|"},()=>this.setgLevel(3)),this._parser.registerEscHandler({final:"}"},()=>this.setgLevel(2)),this._parser.registerEscHandler({final:"~"},()=>this.setgLevel(1)),this._parser.registerEscHandler({intermediates:"%",final:"@"},()=>this.selectDefaultCharset()),this._parser.registerEscHandler({intermediates:"%",final:"G"},()=>this.selectDefaultCharset());for(const D in _.CHARSETS)this._parser.registerEscHandler({intermediates:"(",final:D},()=>this.selectCharset("("+D)),this._parser.registerEscHandler({intermediates:")",final:D},()=>this.selectCharset(")"+D)),this._parser.registerEscHandler({intermediates:"*",final:D},()=>this.selectCharset("*"+D)),this._parser.registerEscHandler({intermediates:"+",final:D},()=>this.selectCharset("+"+D)),this._parser.registerEscHandler({intermediates:"-",final:D},()=>this.selectCharset("-"+D)),this._parser.registerEscHandler({intermediates:".",final:D},()=>this.selectCharset("."+D)),this._parser.registerEscHandler({intermediates:"/",final:D},()=>this.selectCharset("/"+D));this._parser.registerEscHandler({intermediates:"#",final:"8"},()=>this.screenAlignmentPattern()),this._parser.setErrorHandler(D=>(this._logService.error("Parsing error: ",D),D)),this._parser.registerDcsHandler({intermediates:"$",final:"q"},new k.DcsHandler((D,V)=>this.requestStatusString(D,V)))}_preserveStack(M,B,A,H){this._parseStack.paused=!0,this._parseStack.cursorStartX=M,this._parseStack.cursorStartY=B,this._parseStack.decodedLength=A,this._parseStack.position=H}_logSlowResolvingAsync(M){this._logService.logLevel<=S.LogLevelEnum.WARN&&Promise.race([M,new Promise((B,A)=>setTimeout(()=>A("#SLOW_TIMEOUT"),5e3))]).catch(B=>{if(B!=="#SLOW_TIMEOUT")throw B;console.warn("async parser handler taking longer than 5000 ms")})}_getCurrentLinkId(){return this._curAttrData.extended.urlId}parse(M,B){let A,H=this._activeBuffer.x,N=this._activeBuffer.y,se=0;const he=this._parseStack.paused;if(he){if(A=this._parser.parse(this._parseBuffer,this._parseStack.decodedLength,B))return this._logSlowResolvingAsync(A),A;H=this._parseStack.cursorStartX,N=this._parseStack.cursorStartY,this._parseStack.paused=!1,M.length>L&&(se=this._parseStack.position+L)}if(this._logService.logLevel<=S.LogLevelEnum.DEBUG&&this._logService.debug("parsing data"+(typeof M=="string"?` "${M}"`:` "${Array.prototype.map.call(M,ae=>String.fromCharCode(ae)).join("")}"`),typeof M=="string"?M.split("").map(ae=>ae.charCodeAt(0)):M),this._parseBuffer.length<M.length&&this._parseBuffer.length<L&&(this._parseBuffer=new Uint32Array(Math.min(M.length,L))),he||this._dirtyRowTracker.clearRange(),M.length>L)for(let ae=se;ae<M.length;ae+=L){const ye=ae+L<M.length?ae+L:M.length,D=typeof M=="string"?this._stringDecoder.decode(M.substring(ae,ye),this._parseBuffer):this._utf8Decoder.decode(M.subarray(ae,ye),this._parseBuffer);if(A=this._parser.parse(this._parseBuffer,D))return this._preserveStack(H,N,D,ae),this._logSlowResolvingAsync(A),A}else if(!he){const ae=typeof M=="string"?this._stringDecoder.decode(M,this._parseBuffer):this._utf8Decoder.decode(M,this._parseBuffer);if(A=this._parser.parse(this._parseBuffer,ae))return this._preserveStack(H,N,ae,0),this._logSlowResolvingAsync(A),A}this._activeBuffer.x===H&&this._activeBuffer.y===N||this._onCursorMove.fire(),this._onRequestRefreshRows.fire(this._dirtyRowTracker.start,this._dirtyRowTracker.end)}print(M,B,A){let H,N;const se=this._charsetService.charset,he=this._optionsService.rawOptions.screenReaderMode,ae=this._bufferService.cols,ye=this._coreService.decPrivateModes.wraparound,D=this._coreService.modes.insertMode,V=this._curAttrData;let K=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._activeBuffer.x&&A-B>0&&K.getWidth(this._activeBuffer.x-1)===2&&K.setCellFromCodePoint(this._activeBuffer.x-1,0,1,V.fg,V.bg,V.extended);for(let Z=B;Z<A;++Z){if(H=M[Z],N=this._unicodeService.wcwidth(H),H<127&&se){const _e=se[String.fromCharCode(H)];_e&&(H=_e.charCodeAt(0))}if(he&&this._onA11yChar.fire((0,g.stringFromCodePoint)(H)),this._getCurrentLinkId()&&this._oscLinkService.addLineToLink(this._getCurrentLinkId(),this._activeBuffer.ybase+this._activeBuffer.y),N||!this._activeBuffer.x){if(this._activeBuffer.x+N-1>=ae){if(ye){for(;this._activeBuffer.x<ae;)K.setCellFromCodePoint(this._activeBuffer.x++,0,1,V.fg,V.bg,V.extended);this._activeBuffer.x=0,this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData(),!0)):(this._activeBuffer.y>=this._bufferService.rows&&(this._activeBuffer.y=this._bufferService.rows-1),this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!0),K=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y)}else if(this._activeBuffer.x=ae-1,N===2)continue}if(D&&(K.insertCells(this._activeBuffer.x,N,this._activeBuffer.getNullCell(V),V),K.getWidth(ae-1)===2&&K.setCellFromCodePoint(ae-1,m.NULL_CELL_CODE,m.NULL_CELL_WIDTH,V.fg,V.bg,V.extended)),K.setCellFromCodePoint(this._activeBuffer.x++,H,N,V.fg,V.bg,V.extended),N>0)for(;--N;)K.setCellFromCodePoint(this._activeBuffer.x++,0,0,V.fg,V.bg,V.extended)}else K.getWidth(this._activeBuffer.x-1)?K.addCodepointToCell(this._activeBuffer.x-1,H):K.addCodepointToCell(this._activeBuffer.x-2,H)}A-B>0&&(K.loadCell(this._activeBuffer.x-1,this._workCell),this._workCell.getWidth()===2||this._workCell.getCode()>65535?this._parser.precedingCodepoint=0:this._workCell.isCombined()?this._parser.precedingCodepoint=this._workCell.getChars().charCodeAt(0):this._parser.precedingCodepoint=this._workCell.content),this._activeBuffer.x<ae&&A-B>0&&K.getWidth(this._activeBuffer.x)===0&&!K.hasContent(this._activeBuffer.x)&&K.setCellFromCodePoint(this._activeBuffer.x,0,1,V.fg,V.bg,V.extended),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}registerCsiHandler(M,B){return M.final!=="t"||M.prefix||M.intermediates?this._parser.registerCsiHandler(M,B):this._parser.registerCsiHandler(M,A=>!R(A.params[0],this._optionsService.rawOptions.windowOptions)||B(A))}registerDcsHandler(M,B){return this._parser.registerDcsHandler(M,new k.DcsHandler(B))}registerEscHandler(M,B){return this._parser.registerEscHandler(M,B)}registerOscHandler(M,B){return this._parser.registerOscHandler(M,new E.OscHandler(B))}bell(){return this._onRequestBell.fire(),!0}lineFeed(){return this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._optionsService.rawOptions.convertEol&&(this._activeBuffer.x=0),this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData())):this._activeBuffer.y>=this._bufferService.rows?this._activeBuffer.y=this._bufferService.rows-1:this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!1,this._activeBuffer.x>=this._bufferService.cols&&this._activeBuffer.x--,this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._onLineFeed.fire(),!0}carriageReturn(){return this._activeBuffer.x=0,!0}backspace(){var M;if(!this._coreService.decPrivateModes.reverseWraparound)return this._restrictCursor(),this._activeBuffer.x>0&&this._activeBuffer.x--,!0;if(this._restrictCursor(this._bufferService.cols),this._activeBuffer.x>0)this._activeBuffer.x--;else if(this._activeBuffer.x===0&&this._activeBuffer.y>this._activeBuffer.scrollTop&&this._activeBuffer.y<=this._activeBuffer.scrollBottom&&(!((M=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y))===null||M===void 0)&&M.isWrapped)){this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!1,this._activeBuffer.y--,this._activeBuffer.x=this._bufferService.cols-1;const B=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);B.hasWidth(this._activeBuffer.x)&&!B.hasContent(this._activeBuffer.x)&&this._activeBuffer.x--}return this._restrictCursor(),!0}tab(){if(this._activeBuffer.x>=this._bufferService.cols)return!0;const M=this._activeBuffer.x;return this._activeBuffer.x=this._activeBuffer.nextStop(),this._optionsService.rawOptions.screenReaderMode&&this._onA11yTab.fire(this._activeBuffer.x-M),!0}shiftOut(){return this._charsetService.setgLevel(1),!0}shiftIn(){return this._charsetService.setgLevel(0),!0}_restrictCursor(M=this._bufferService.cols-1){this._activeBuffer.x=Math.min(M,Math.max(0,this._activeBuffer.x)),this._activeBuffer.y=this._coreService.decPrivateModes.origin?Math.min(this._activeBuffer.scrollBottom,Math.max(this._activeBuffer.scrollTop,this._activeBuffer.y)):Math.min(this._bufferService.rows-1,Math.max(0,this._activeBuffer.y)),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}_setCursor(M,B){this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._coreService.decPrivateModes.origin?(this._activeBuffer.x=M,this._activeBuffer.y=this._activeBuffer.scrollTop+B):(this._activeBuffer.x=M,this._activeBuffer.y=B),this._restrictCursor(),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}_moveCursor(M,B){this._restrictCursor(),this._setCursor(this._activeBuffer.x+M,this._activeBuffer.y+B)}cursorUp(M){const B=this._activeBuffer.y-this._activeBuffer.scrollTop;return B>=0?this._moveCursor(0,-Math.min(B,M.params[0]||1)):this._moveCursor(0,-(M.params[0]||1)),!0}cursorDown(M){const B=this._activeBuffer.scrollBottom-this._activeBuffer.y;return B>=0?this._moveCursor(0,Math.min(B,M.params[0]||1)):this._moveCursor(0,M.params[0]||1),!0}cursorForward(M){return this._moveCursor(M.params[0]||1,0),!0}cursorBackward(M){return this._moveCursor(-(M.params[0]||1),0),!0}cursorNextLine(M){return this.cursorDown(M),this._activeBuffer.x=0,!0}cursorPrecedingLine(M){return this.cursorUp(M),this._activeBuffer.x=0,!0}cursorCharAbsolute(M){return this._setCursor((M.params[0]||1)-1,this._activeBuffer.y),!0}cursorPosition(M){return this._setCursor(M.length>=2?(M.params[1]||1)-1:0,(M.params[0]||1)-1),!0}charPosAbsolute(M){return this._setCursor((M.params[0]||1)-1,this._activeBuffer.y),!0}hPositionRelative(M){return this._moveCursor(M.params[0]||1,0),!0}linePosAbsolute(M){return this._setCursor(this._activeBuffer.x,(M.params[0]||1)-1),!0}vPositionRelative(M){return this._moveCursor(0,M.params[0]||1),!0}hVPosition(M){return this.cursorPosition(M),!0}tabClear(M){const B=M.params[0];return B===0?delete this._activeBuffer.tabs[this._activeBuffer.x]:B===3&&(this._activeBuffer.tabs={}),!0}cursorForwardTab(M){if(this._activeBuffer.x>=this._bufferService.cols)return!0;let B=M.params[0]||1;for(;B--;)this._activeBuffer.x=this._activeBuffer.nextStop();return!0}cursorBackwardTab(M){if(this._activeBuffer.x>=this._bufferService.cols)return!0;let B=M.params[0]||1;for(;B--;)this._activeBuffer.x=this._activeBuffer.prevStop();return!0}selectProtected(M){const B=M.params[0];return B===1&&(this._curAttrData.bg|=536870912),B!==2&&B!==0||(this._curAttrData.bg&=-536870913),!0}_eraseInBufferLine(M,B,A,H=!1,N=!1){const se=this._activeBuffer.lines.get(this._activeBuffer.ybase+M);se.replaceCells(B,A,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData(),N),H&&(se.isWrapped=!1)}_resetBufferLine(M,B=!1){const A=this._activeBuffer.lines.get(this._activeBuffer.ybase+M);A&&(A.fill(this._activeBuffer.getNullCell(this._eraseAttrData()),B),this._bufferService.buffer.clearMarkers(this._activeBuffer.ybase+M),A.isWrapped=!1)}eraseInDisplay(M,B=!1){let A;switch(this._restrictCursor(this._bufferService.cols),M.params[0]){case 0:for(A=this._activeBuffer.y,this._dirtyRowTracker.markDirty(A),this._eraseInBufferLine(A++,this._activeBuffer.x,this._bufferService.cols,this._activeBuffer.x===0,B);A<this._bufferService.rows;A++)this._resetBufferLine(A,B);this._dirtyRowTracker.markDirty(A);break;case 1:for(A=this._activeBuffer.y,this._dirtyRowTracker.markDirty(A),this._eraseInBufferLine(A,0,this._activeBuffer.x+1,!0,B),this._activeBuffer.x+1>=this._bufferService.cols&&(this._activeBuffer.lines.get(A+1).isWrapped=!1);A--;)this._resetBufferLine(A,B);this._dirtyRowTracker.markDirty(0);break;case 2:for(A=this._bufferService.rows,this._dirtyRowTracker.markDirty(A-1);A--;)this._resetBufferLine(A,B);this._dirtyRowTracker.markDirty(0);break;case 3:const H=this._activeBuffer.lines.length-this._bufferService.rows;H>0&&(this._activeBuffer.lines.trimStart(H),this._activeBuffer.ybase=Math.max(this._activeBuffer.ybase-H,0),this._activeBuffer.ydisp=Math.max(this._activeBuffer.ydisp-H,0),this._onScroll.fire(0))}return!0}eraseInLine(M,B=!1){switch(this._restrictCursor(this._bufferService.cols),M.params[0]){case 0:this._eraseInBufferLine(this._activeBuffer.y,this._activeBuffer.x,this._bufferService.cols,this._activeBuffer.x===0,B);break;case 1:this._eraseInBufferLine(this._activeBuffer.y,0,this._activeBuffer.x+1,!1,B);break;case 2:this._eraseInBufferLine(this._activeBuffer.y,0,this._bufferService.cols,!0,B)}return this._dirtyRowTracker.markDirty(this._activeBuffer.y),!0}insertLines(M){this._restrictCursor();let B=M.params[0]||1;if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const A=this._activeBuffer.ybase+this._activeBuffer.y,H=this._bufferService.rows-1-this._activeBuffer.scrollBottom,N=this._bufferService.rows-1+this._activeBuffer.ybase-H+1;for(;B--;)this._activeBuffer.lines.splice(N-1,1),this._activeBuffer.lines.splice(A,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.y,this._activeBuffer.scrollBottom),this._activeBuffer.x=0,!0}deleteLines(M){this._restrictCursor();let B=M.params[0]||1;if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const A=this._activeBuffer.ybase+this._activeBuffer.y;let H;for(H=this._bufferService.rows-1-this._activeBuffer.scrollBottom,H=this._bufferService.rows-1+this._activeBuffer.ybase-H;B--;)this._activeBuffer.lines.splice(A,1),this._activeBuffer.lines.splice(H,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.y,this._activeBuffer.scrollBottom),this._activeBuffer.x=0,!0}insertChars(M){this._restrictCursor();const B=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return B&&(B.insertCells(this._activeBuffer.x,M.params[0]||1,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}deleteChars(M){this._restrictCursor();const B=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return B&&(B.deleteCells(this._activeBuffer.x,M.params[0]||1,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}scrollUp(M){let B=M.params[0]||1;for(;B--;)this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollTop,1),this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollBottom,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollDown(M){let B=M.params[0]||1;for(;B--;)this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollBottom,1),this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollTop,0,this._activeBuffer.getBlankLine(c.DEFAULT_ATTR_DATA));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollLeft(M){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const B=M.params[0]||1;for(let A=this._activeBuffer.scrollTop;A<=this._activeBuffer.scrollBottom;++A){const H=this._activeBuffer.lines.get(this._activeBuffer.ybase+A);H.deleteCells(0,B,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),H.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollRight(M){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const B=M.params[0]||1;for(let A=this._activeBuffer.scrollTop;A<=this._activeBuffer.scrollBottom;++A){const H=this._activeBuffer.lines.get(this._activeBuffer.ybase+A);H.insertCells(0,B,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),H.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}insertColumns(M){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const B=M.params[0]||1;for(let A=this._activeBuffer.scrollTop;A<=this._activeBuffer.scrollBottom;++A){const H=this._activeBuffer.lines.get(this._activeBuffer.ybase+A);H.insertCells(this._activeBuffer.x,B,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),H.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}deleteColumns(M){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const B=M.params[0]||1;for(let A=this._activeBuffer.scrollTop;A<=this._activeBuffer.scrollBottom;++A){const H=this._activeBuffer.lines.get(this._activeBuffer.ybase+A);H.deleteCells(this._activeBuffer.x,B,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),H.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}eraseChars(M){this._restrictCursor();const B=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return B&&(B.replaceCells(this._activeBuffer.x,this._activeBuffer.x+(M.params[0]||1),this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}repeatPrecedingCharacter(M){if(!this._parser.precedingCodepoint)return!0;const B=M.params[0]||1,A=new Uint32Array(B);for(let H=0;H<B;++H)A[H]=this._parser.precedingCodepoint;return this.print(A,0,A.length),!0}sendDeviceAttributesPrimary(M){return M.params[0]>0||(this._is("xterm")||this._is("rxvt-unicode")||this._is("screen")?this._coreService.triggerDataEvent(f.C0.ESC+"[?1;2c"):this._is("linux")&&this._coreService.triggerDataEvent(f.C0.ESC+"[?6c")),!0}sendDeviceAttributesSecondary(M){return M.params[0]>0||(this._is("xterm")?this._coreService.triggerDataEvent(f.C0.ESC+"[>0;276;0c"):this._is("rxvt-unicode")?this._coreService.triggerDataEvent(f.C0.ESC+"[>85;95;0c"):this._is("linux")?this._coreService.triggerDataEvent(M.params[0]+"c"):this._is("screen")&&this._coreService.triggerDataEvent(f.C0.ESC+"[>83;40003;0c")),!0}_is(M){return(this._optionsService.rawOptions.termName+"").indexOf(M)===0}setMode(M){for(let B=0;B<M.length;B++)switch(M.params[B]){case 4:this._coreService.modes.insertMode=!0;break;case 20:this._optionsService.options.convertEol=!0}return!0}setModePrivate(M){for(let B=0;B<M.length;B++)switch(M.params[B]){case 1:this._coreService.decPrivateModes.applicationCursorKeys=!0;break;case 2:this._charsetService.setgCharset(0,_.DEFAULT_CHARSET),this._charsetService.setgCharset(1,_.DEFAULT_CHARSET),this._charsetService.setgCharset(2,_.DEFAULT_CHARSET),this._charsetService.setgCharset(3,_.DEFAULT_CHARSET);break;case 3:this._optionsService.rawOptions.windowOptions.setWinLines&&(this._bufferService.resize(132,this._bufferService.rows),this._onRequestReset.fire());break;case 6:this._coreService.decPrivateModes.origin=!0,this._setCursor(0,0);break;case 7:this._coreService.decPrivateModes.wraparound=!0;break;case 12:this._optionsService.options.cursorBlink=!0;break;case 45:this._coreService.decPrivateModes.reverseWraparound=!0;break;case 66:this._logService.debug("Serial port requested application keypad."),this._coreService.decPrivateModes.applicationKeypad=!0,this._onRequestSyncScrollBar.fire();break;case 9:this._coreMouseService.activeProtocol="X10";break;case 1e3:this._coreMouseService.activeProtocol="VT200";break;case 1002:this._coreMouseService.activeProtocol="DRAG";break;case 1003:this._coreMouseService.activeProtocol="ANY";break;case 1004:this._coreService.decPrivateModes.sendFocus=!0,this._onRequestSendFocus.fire();break;case 1005:this._logService.debug("DECSET 1005 not supported (see #2507)");break;case 1006:this._coreMouseService.activeEncoding="SGR";break;case 1015:this._logService.debug("DECSET 1015 not supported (see #2507)");break;case 1016:this._coreMouseService.activeEncoding="SGR_PIXELS";break;case 25:this._coreService.isCursorHidden=!1;break;case 1048:this.saveCursor();break;case 1049:this.saveCursor();case 47:case 1047:this._bufferService.buffers.activateAltBuffer(this._eraseAttrData()),this._coreService.isCursorInitialized=!0,this._onRequestRefreshRows.fire(0,this._bufferService.rows-1),this._onRequestSyncScrollBar.fire();break;case 2004:this._coreService.decPrivateModes.bracketedPasteMode=!0}return!0}resetMode(M){for(let B=0;B<M.length;B++)switch(M.params[B]){case 4:this._coreService.modes.insertMode=!1;break;case 20:this._optionsService.options.convertEol=!1}return!0}resetModePrivate(M){for(let B=0;B<M.length;B++)switch(M.params[B]){case 1:this._coreService.decPrivateModes.applicationCursorKeys=!1;break;case 3:this._optionsService.rawOptions.windowOptions.setWinLines&&(this._bufferService.resize(80,this._bufferService.rows),this._onRequestReset.fire());break;case 6:this._coreService.decPrivateModes.origin=!1,this._setCursor(0,0);break;case 7:this._coreService.decPrivateModes.wraparound=!1;break;case 12:this._optionsService.options.cursorBlink=!1;break;case 45:this._coreService.decPrivateModes.reverseWraparound=!1;break;case 66:this._logService.debug("Switching back to normal keypad."),this._coreService.decPrivateModes.applicationKeypad=!1,this._onRequestSyncScrollBar.fire();break;case 9:case 1e3:case 1002:case 1003:this._coreMouseService.activeProtocol="NONE";break;case 1004:this._coreService.decPrivateModes.sendFocus=!1;break;case 1005:this._logService.debug("DECRST 1005 not supported (see #2507)");break;case 1006:case 1016:this._coreMouseService.activeEncoding="DEFAULT";break;case 1015:this._logService.debug("DECRST 1015 not supported (see #2507)");break;case 25:this._coreService.isCursorHidden=!0;break;case 1048:this.restoreCursor();break;case 1049:case 47:case 1047:this._bufferService.buffers.activateNormalBuffer(),M.params[B]===1049&&this.restoreCursor(),this._coreService.isCursorInitialized=!0,this._onRequestRefreshRows.fire(0,this._bufferService.rows-1),this._onRequestSyncScrollBar.fire();break;case 2004:this._coreService.decPrivateModes.bracketedPasteMode=!1}return!0}requestMode(M,B){const A=this._coreService.decPrivateModes,{activeProtocol:H,activeEncoding:N}=this._coreMouseService,se=this._coreService,{buffers:he,cols:ae}=this._bufferService,{active:ye,alt:D}=he,V=this._optionsService.rawOptions,K=Ee=>Ee?1:2,Z=M.params[0];return _e=Z,Q=B?Z===2?4:Z===4?K(se.modes.insertMode):Z===12?3:Z===20?K(V.convertEol):0:Z===1?K(A.applicationCursorKeys):Z===3?V.windowOptions.setWinLines?ae===80?2:ae===132?1:0:0:Z===6?K(A.origin):Z===7?K(A.wraparound):Z===8?3:Z===9?K(H==="X10"):Z===12?K(V.cursorBlink):Z===25?K(!se.isCursorHidden):Z===45?K(A.reverseWraparound):Z===66?K(A.applicationKeypad):Z===67?4:Z===1e3?K(H==="VT200"):Z===1002?K(H==="DRAG"):Z===1003?K(H==="ANY"):Z===1004?K(A.sendFocus):Z===1005?4:Z===1006?K(N==="SGR"):Z===1015?4:Z===1016?K(N==="SGR_PIXELS"):Z===1048?1:Z===47||Z===1047||Z===1049?K(ye===D):Z===2004?K(A.bracketedPasteMode):0,se.triggerDataEvent(`${f.C0.ESC}[${B?"":"?"}${_e};${Q}$y`),!0;var _e,Q}_updateAttrColor(M,B,A,H,N){return B===2?(M|=50331648,M&=-16777216,M|=y.AttributeData.fromColorRGB([A,H,N])):B===5&&(M&=-50331904,M|=33554432|255&A),M}_extractColor(M,B,A){const H=[0,0,-1,0,0,0];let N=0,se=0;do{if(H[se+N]=M.params[B+se],M.hasSubParams(B+se)){const he=M.getSubParams(B+se);let ae=0;do H[1]===5&&(N=1),H[se+ae+1+N]=he[ae];while(++ae<he.length&&ae+se+1+N<H.length);break}if(H[1]===5&&se+N>=2||H[1]===2&&se+N>=5)break;H[1]&&(N=1)}while(++se+B<M.length&&se+N<H.length);for(let he=2;he<H.length;++he)H[he]===-1&&(H[he]=0);switch(H[0]){case 38:A.fg=this._updateAttrColor(A.fg,H[1],H[3],H[4],H[5]);break;case 48:A.bg=this._updateAttrColor(A.bg,H[1],H[3],H[4],H[5]);break;case 58:A.extended=A.extended.clone(),A.extended.underlineColor=this._updateAttrColor(A.extended.underlineColor,H[1],H[3],H[4],H[5])}return se}_processUnderline(M,B){B.extended=B.extended.clone(),(!~M||M>5)&&(M=1),B.extended.underlineStyle=M,B.fg|=268435456,M===0&&(B.fg&=-268435457),B.updateExtended()}_processSGR0(M){M.fg=c.DEFAULT_ATTR_DATA.fg,M.bg=c.DEFAULT_ATTR_DATA.bg,M.extended=M.extended.clone(),M.extended.underlineStyle=0,M.extended.underlineColor&=-67108864,M.updateExtended()}charAttributes(M){if(M.length===1&&M.params[0]===0)return this._processSGR0(this._curAttrData),!0;const B=M.length;let A;const H=this._curAttrData;for(let N=0;N<B;N++)A=M.params[N],A>=30&&A<=37?(H.fg&=-50331904,H.fg|=16777216|A-30):A>=40&&A<=47?(H.bg&=-50331904,H.bg|=16777216|A-40):A>=90&&A<=97?(H.fg&=-50331904,H.fg|=16777224|A-90):A>=100&&A<=107?(H.bg&=-50331904,H.bg|=16777224|A-100):A===0?this._processSGR0(H):A===1?H.fg|=134217728:A===3?H.bg|=67108864:A===4?(H.fg|=268435456,this._processUnderline(M.hasSubParams(N)?M.getSubParams(N)[0]:1,H)):A===5?H.fg|=536870912:A===7?H.fg|=67108864:A===8?H.fg|=1073741824:A===9?H.fg|=2147483648:A===2?H.bg|=134217728:A===21?this._processUnderline(2,H):A===22?(H.fg&=-134217729,H.bg&=-134217729):A===23?H.bg&=-67108865:A===24?(H.fg&=-268435457,this._processUnderline(0,H)):A===25?H.fg&=-536870913:A===27?H.fg&=-67108865:A===28?H.fg&=-1073741825:A===29?H.fg&=2147483647:A===39?(H.fg&=-67108864,H.fg|=16777215&c.DEFAULT_ATTR_DATA.fg):A===49?(H.bg&=-67108864,H.bg|=16777215&c.DEFAULT_ATTR_DATA.bg):A===38||A===48||A===58?N+=this._extractColor(M,N,H):A===53?H.bg|=1073741824:A===55?H.bg&=-1073741825:A===59?(H.extended=H.extended.clone(),H.extended.underlineColor=-1,H.updateExtended()):A===100?(H.fg&=-67108864,H.fg|=16777215&c.DEFAULT_ATTR_DATA.fg,H.bg&=-67108864,H.bg|=16777215&c.DEFAULT_ATTR_DATA.bg):this._logService.debug("Unknown SGR attribute: %d.",A);return!0}deviceStatus(M){switch(M.params[0]){case 5:this._coreService.triggerDataEvent(`${f.C0.ESC}[0n`);break;case 6:const B=this._activeBuffer.y+1,A=this._activeBuffer.x+1;this._coreService.triggerDataEvent(`${f.C0.ESC}[${B};${A}R`)}return!0}deviceStatusPrivate(M){if(M.params[0]===6){const B=this._activeBuffer.y+1,A=this._activeBuffer.x+1;this._coreService.triggerDataEvent(`${f.C0.ESC}[?${B};${A}R`)}return!0}softReset(M){return this._coreService.isCursorHidden=!1,this._onRequestSyncScrollBar.fire(),this._activeBuffer.scrollTop=0,this._activeBuffer.scrollBottom=this._bufferService.rows-1,this._curAttrData=c.DEFAULT_ATTR_DATA.clone(),this._coreService.reset(),this._charsetService.reset(),this._activeBuffer.savedX=0,this._activeBuffer.savedY=this._activeBuffer.ybase,this._activeBuffer.savedCurAttrData.fg=this._curAttrData.fg,this._activeBuffer.savedCurAttrData.bg=this._curAttrData.bg,this._activeBuffer.savedCharset=this._charsetService.charset,this._coreService.decPrivateModes.origin=!1,!0}setCursorStyle(M){const B=M.params[0]||1;switch(B){case 1:case 2:this._optionsService.options.cursorStyle="block";break;case 3:case 4:this._optionsService.options.cursorStyle="underline";break;case 5:case 6:this._optionsService.options.cursorStyle="bar"}const A=B%2==1;return this._optionsService.options.cursorBlink=A,!0}setScrollRegion(M){const B=M.params[0]||1;let A;return(M.length<2||(A=M.params[1])>this._bufferService.rows||A===0)&&(A=this._bufferService.rows),A>B&&(this._activeBuffer.scrollTop=B-1,this._activeBuffer.scrollBottom=A-1,this._setCursor(0,0)),!0}windowOptions(M){if(!R(M.params[0],this._optionsService.rawOptions.windowOptions))return!0;const B=M.length>1?M.params[1]:0;switch(M.params[0]){case 14:B!==2&&this._onRequestWindowsOptionsReport.fire(O.GET_WIN_SIZE_PIXELS);break;case 16:this._onRequestWindowsOptionsReport.fire(O.GET_CELL_SIZE_PIXELS);break;case 18:this._bufferService&&this._coreService.triggerDataEvent(`${f.C0.ESC}[8;${this._bufferService.rows};${this._bufferService.cols}t`);break;case 22:B!==0&&B!==2||(this._windowTitleStack.push(this._windowTitle),this._windowTitleStack.length>10&&this._windowTitleStack.shift()),B!==0&&B!==1||(this._iconNameStack.push(this._iconName),this._iconNameStack.length>10&&this._iconNameStack.shift());break;case 23:B!==0&&B!==2||this._windowTitleStack.length&&this.setTitle(this._windowTitleStack.pop()),B!==0&&B!==1||this._iconNameStack.length&&this.setIconName(this._iconNameStack.pop())}return!0}saveCursor(M){return this._activeBuffer.savedX=this._activeBuffer.x,this._activeBuffer.savedY=this._activeBuffer.ybase+this._activeBuffer.y,this._activeBuffer.savedCurAttrData.fg=this._curAttrData.fg,this._activeBuffer.savedCurAttrData.bg=this._curAttrData.bg,this._activeBuffer.savedCharset=this._charsetService.charset,!0}restoreCursor(M){return this._activeBuffer.x=this._activeBuffer.savedX||0,this._activeBuffer.y=Math.max(this._activeBuffer.savedY-this._activeBuffer.ybase,0),this._curAttrData.fg=this._activeBuffer.savedCurAttrData.fg,this._curAttrData.bg=this._activeBuffer.savedCurAttrData.bg,this._charsetService.charset=this._savedCharset,this._activeBuffer.savedCharset&&(this._charsetService.charset=this._activeBuffer.savedCharset),this._restrictCursor(),!0}setTitle(M){return this._windowTitle=M,this._onTitleChange.fire(M),!0}setIconName(M){return this._iconName=M,!0}setOrReportIndexedColor(M){const B=[],A=M.split(";");for(;A.length>1;){const H=A.shift(),N=A.shift();if(/^\d+$/.exec(H)){const se=parseInt(H);if(Y(se))if(N==="?")B.push({type:0,index:se});else{const he=(0,w.parseColor)(N);he&&B.push({type:1,index:se,color:he})}}}return B.length&&this._onColor.fire(B),!0}setHyperlink(M){const B=M.split(";");return!(B.length<2)&&(B[1]?this._createHyperlink(B[0],B[1]):!B[0]&&this._finishHyperlink())}_createHyperlink(M,B){this._getCurrentLinkId()&&this._finishHyperlink();const A=M.split(":");let H;const N=A.findIndex(se=>se.startsWith("id="));return N!==-1&&(H=A[N].slice(3)||void 0),this._curAttrData.extended=this._curAttrData.extended.clone(),this._curAttrData.extended.urlId=this._oscLinkService.registerLink({id:H,uri:B}),this._curAttrData.updateExtended(),!0}_finishHyperlink(){return this._curAttrData.extended=this._curAttrData.extended.clone(),this._curAttrData.extended.urlId=0,this._curAttrData.updateExtended(),!0}_setOrReportSpecialColor(M,B){const A=M.split(";");for(let H=0;H<A.length&&!(B>=this._specialColors.length);++H,++B)if(A[H]==="?")this._onColor.fire([{type:0,index:this._specialColors[B]}]);else{const N=(0,w.parseColor)(A[H]);N&&this._onColor.fire([{type:1,index:this._specialColors[B],color:N}])}return!0}setOrReportFgColor(M){return this._setOrReportSpecialColor(M,0)}setOrReportBgColor(M){return this._setOrReportSpecialColor(M,1)}setOrReportCursorColor(M){return this._setOrReportSpecialColor(M,2)}restoreIndexedColor(M){if(!M)return this._onColor.fire([{type:2}]),!0;const B=[],A=M.split(";");for(let H=0;H<A.length;++H)if(/^\d+$/.exec(A[H])){const N=parseInt(A[H]);Y(N)&&B.push({type:2,index:N})}return B.length&&this._onColor.fire(B),!0}restoreFgColor(M){return this._onColor.fire([{type:2,index:256}]),!0}restoreBgColor(M){return this._onColor.fire([{type:2,index:257}]),!0}restoreCursorColor(M){return this._onColor.fire([{type:2,index:258}]),!0}nextLine(){return this._activeBuffer.x=0,this.index(),!0}keypadApplicationMode(){return this._logService.debug("Serial port requested application keypad."),this._coreService.decPrivateModes.applicationKeypad=!0,this._onRequestSyncScrollBar.fire(),!0}keypadNumericMode(){return this._logService.debug("Switching back to normal keypad."),this._coreService.decPrivateModes.applicationKeypad=!1,this._onRequestSyncScrollBar.fire(),!0}selectDefaultCharset(){return this._charsetService.setgLevel(0),this._charsetService.setgCharset(0,_.DEFAULT_CHARSET),!0}selectCharset(M){return M.length!==2?(this.selectDefaultCharset(),!0):(M[0]==="/"||this._charsetService.setgCharset(C[M[0]],_.CHARSETS[M[1]]||_.DEFAULT_CHARSET),!0)}index(){return this._restrictCursor(),this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData())):this._activeBuffer.y>=this._bufferService.rows&&(this._activeBuffer.y=this._bufferService.rows-1),this._restrictCursor(),!0}tabSet(){return this._activeBuffer.tabs[this._activeBuffer.x]=!0,!0}reverseIndex(){if(this._restrictCursor(),this._activeBuffer.y===this._activeBuffer.scrollTop){const M=this._activeBuffer.scrollBottom-this._activeBuffer.scrollTop;this._activeBuffer.lines.shiftElements(this._activeBuffer.ybase+this._activeBuffer.y,M,1),this._activeBuffer.lines.set(this._activeBuffer.ybase+this._activeBuffer.y,this._activeBuffer.getBlankLine(this._eraseAttrData())),this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom)}else this._activeBuffer.y--,this._restrictCursor();return!0}fullReset(){return this._parser.reset(),this._onRequestReset.fire(),!0}reset(){this._curAttrData=c.DEFAULT_ATTR_DATA.clone(),this._eraseAttrDataInternal=c.DEFAULT_ATTR_DATA.clone()}_eraseAttrData(){return this._eraseAttrDataInternal.bg&=-67108864,this._eraseAttrDataInternal.bg|=67108863&this._curAttrData.bg,this._eraseAttrDataInternal}setgLevel(M){return this._charsetService.setgLevel(M),!0}screenAlignmentPattern(){const M=new p.CellData;M.content=4194373,M.fg=this._curAttrData.fg,M.bg=this._curAttrData.bg,this._setCursor(0,0);for(let B=0;B<this._bufferService.rows;++B){const A=this._activeBuffer.ybase+this._activeBuffer.y+B,H=this._activeBuffer.lines.get(A);H&&(H.fill(M),H.isWrapped=!1)}return this._dirtyRowTracker.markAllDirty(),this._setCursor(0,0),!0}requestStatusString(M,B){const A=this._bufferService.buffer,H=this._optionsService.rawOptions;return(N=>(this._coreService.triggerDataEvent(`${f.C0.ESC}${N}${f.C0.ESC}\\`),!0))(M==='"q'?`P1$r${this._curAttrData.isProtected()?1:0}"q`:M==='"p'?'P1$r61;1"p':M==="r"?`P1$r${A.scrollTop+1};${A.scrollBottom+1}r`:M==="m"?"P1$r0m":M===" q"?`P1$r${{block:2,underline:4,bar:6}[H.cursorStyle]-(H.cursorBlink?1:0)} q`:"P0$r")}markRangeDirty(M,B){this._dirtyRowTracker.markRangeDirty(M,B)}}o.InputHandler=x;let F=class{constructor(q){this._bufferService=q,this.clearRange()}clearRange(){this.start=this._bufferService.buffer.y,this.end=this._bufferService.buffer.y}markDirty(q){q<this.start?this.start=q:q>this.end&&(this.end=q)}markRangeDirty(q,M){q>M&&(T=q,q=M,M=T),q<this.start&&(this.start=q),M>this.end&&(this.end=M)}markAllDirty(){this.markRangeDirty(0,this._bufferService.rows-1)}};function Y(q){return 0<=q&&q<256}F=h([u(0,S.IBufferService)],F)},844:(l,o)=>{function a(h){for(const u of h)u.dispose();h.length=0}Object.defineProperty(o,"__esModule",{value:!0}),o.getDisposeArrayDisposable=o.disposeArray=o.toDisposable=o.MutableDisposable=o.Disposable=void 0,o.Disposable=class{constructor(){this._disposables=[],this._isDisposed=!1}dispose(){this._isDisposed=!0;for(const h of this._disposables)h.dispose();this._disposables.length=0}register(h){return this._disposables.push(h),h}unregister(h){const u=this._disposables.indexOf(h);u!==-1&&this._disposables.splice(u,1)}},o.MutableDisposable=class{constructor(){this._isDisposed=!1}get value(){return this._isDisposed?void 0:this._value}set value(h){var u;this._isDisposed||h===this._value||((u=this._value)===null||u===void 0||u.dispose(),this._value=h)}clear(){this.value=void 0}dispose(){var h;this._isDisposed=!0,(h=this._value)===null||h===void 0||h.dispose(),this._value=void 0}},o.toDisposable=function(h){return{dispose:h}},o.disposeArray=a,o.getDisposeArrayDisposable=function(h){return{dispose:()=>a(h)}}},1505:(l,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.FourKeyMap=o.TwoKeyMap=void 0;class a{constructor(){this._data={}}set(u,f,_){this._data[u]||(this._data[u]={}),this._data[u][f]=_}get(u,f){return this._data[u]?this._data[u][f]:void 0}clear(){this._data={}}}o.TwoKeyMap=a,o.FourKeyMap=class{constructor(){this._data=new a}set(h,u,f,_,v){this._data.get(h,u)||this._data.set(h,u,new a),this._data.get(h,u).set(f,_,v)}get(h,u,f,_){var v;return(v=this._data.get(h,u))===null||v===void 0?void 0:v.get(f,_)}clear(){this._data.clear()}}},6114:(l,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.isChromeOS=o.isLinux=o.isWindows=o.isIphone=o.isIpad=o.isMac=o.getSafariVersion=o.isSafari=o.isLegacyEdge=o.isFirefox=o.isNode=void 0,o.isNode=typeof navigator>"u";const a=o.isNode?"node":navigator.userAgent,h=o.isNode?"node":navigator.platform;o.isFirefox=a.includes("Firefox"),o.isLegacyEdge=a.includes("Edge"),o.isSafari=/^((?!chrome|android).)*safari/i.test(a),o.getSafariVersion=function(){if(!o.isSafari)return 0;const u=a.match(/Version\/(\d+)/);return u===null||u.length<2?0:parseInt(u[1])},o.isMac=["Macintosh","MacIntel","MacPPC","Mac68K"].includes(h),o.isIpad=h==="iPad",o.isIphone=h==="iPhone",o.isWindows=["Windows","Win16","Win32","WinCE"].includes(h),o.isLinux=h.indexOf("Linux")>=0,o.isChromeOS=/\bCrOS\b/.test(a)},6106:(l,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.SortedList=void 0;let a=0;o.SortedList=class{constructor(h){this._getKey=h,this._array=[]}clear(){this._array.length=0}insert(h){this._array.length!==0?(a=this._search(this._getKey(h)),this._array.splice(a,0,h)):this._array.push(h)}delete(h){if(this._array.length===0)return!1;const u=this._getKey(h);if(u===void 0||(a=this._search(u),a===-1)||this._getKey(this._array[a])!==u)return!1;do if(this._array[a]===h)return this._array.splice(a,1),!0;while(++a<this._array.length&&this._getKey(this._array[a])===u);return!1}*getKeyIterator(h){if(this._array.length!==0&&(a=this._search(h),!(a<0||a>=this._array.length)&&this._getKey(this._array[a])===h))do yield this._array[a];while(++a<this._array.length&&this._getKey(this._array[a])===h)}forEachByKey(h,u){if(this._array.length!==0&&(a=this._search(h),!(a<0||a>=this._array.length)&&this._getKey(this._array[a])===h))do u(this._array[a]);while(++a<this._array.length&&this._getKey(this._array[a])===h)}values(){return[...this._array].values()}_search(h){let u=0,f=this._array.length-1;for(;f>=u;){let _=u+f>>1;const v=this._getKey(this._array[_]);if(v>h)f=_-1;else{if(!(v<h)){for(;_>0&&this._getKey(this._array[_-1])===h;)_--;return _}u=_+1}}return u}}},7226:(l,o,a)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.DebouncedIdleTask=o.IdleTaskQueue=o.PriorityTaskQueue=void 0;const h=a(6114);class u{constructor(){this._tasks=[],this._i=0}enqueue(v){this._tasks.push(v),this._start()}flush(){for(;this._i<this._tasks.length;)this._tasks[this._i]()||this._i++;this.clear()}clear(){this._idleCallback&&(this._cancelCallback(this._idleCallback),this._idleCallback=void 0),this._i=0,this._tasks.length=0}_start(){this._idleCallback||(this._idleCallback=this._requestCallback(this._process.bind(this)))}_process(v){this._idleCallback=void 0;let b=0,g=0,c=v.timeRemaining(),d=0;for(;this._i<this._tasks.length;){if(b=Date.now(),this._tasks[this._i]()||this._i++,b=Math.max(1,Date.now()-b),g=Math.max(b,g),d=v.timeRemaining(),1.5*g>d)return c-b<-20&&console.warn(`task queue exceeded allotted deadline by ${Math.abs(Math.round(c-b))}ms`),void this._start();c=d}this.clear()}}class f extends u{_requestCallback(v){return setTimeout(()=>v(this._createDeadline(16)))}_cancelCallback(v){clearTimeout(v)}_createDeadline(v){const b=Date.now()+v;return{timeRemaining:()=>Math.max(0,b-Date.now())}}}o.PriorityTaskQueue=f,o.IdleTaskQueue=!h.isNode&&"requestIdleCallback"in window?class extends u{_requestCallback(_){return requestIdleCallback(_)}_cancelCallback(_){cancelIdleCallback(_)}}:f,o.DebouncedIdleTask=class{constructor(){this._queue=new o.IdleTaskQueue}set(_){this._queue.clear(),this._queue.enqueue(_)}flush(){this._queue.flush()}}},9282:(l,o,a)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.updateWindowsModeWrappedState=void 0;const h=a(643);o.updateWindowsModeWrappedState=function(u){const f=u.buffer.lines.get(u.buffer.ybase+u.buffer.y-1),_=f==null?void 0:f.get(u.cols-1),v=u.buffer.lines.get(u.buffer.ybase+u.buffer.y);v&&_&&(v.isWrapped=_[h.CHAR_DATA_CODE_INDEX]!==h.NULL_CELL_CODE&&_[h.CHAR_DATA_CODE_INDEX]!==h.WHITESPACE_CELL_CODE)}},3734:(l,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.ExtendedAttrs=o.AttributeData=void 0;class a{constructor(){this.fg=0,this.bg=0,this.extended=new h}static toColorRGB(f){return[f>>>16&255,f>>>8&255,255&f]}static fromColorRGB(f){return(255&f[0])<<16|(255&f[1])<<8|255&f[2]}clone(){const f=new a;return f.fg=this.fg,f.bg=this.bg,f.extended=this.extended.clone(),f}isInverse(){return 67108864&this.fg}isBold(){return 134217728&this.fg}isUnderline(){return this.hasExtendedAttrs()&&this.extended.underlineStyle!==0?1:268435456&this.fg}isBlink(){return 536870912&this.fg}isInvisible(){return 1073741824&this.fg}isItalic(){return 67108864&this.bg}isDim(){return 134217728&this.bg}isStrikethrough(){return 2147483648&this.fg}isProtected(){return 536870912&this.bg}isOverline(){return 1073741824&this.bg}getFgColorMode(){return 50331648&this.fg}getBgColorMode(){return 50331648&this.bg}isFgRGB(){return(50331648&this.fg)==50331648}isBgRGB(){return(50331648&this.bg)==50331648}isFgPalette(){return(50331648&this.fg)==16777216||(50331648&this.fg)==33554432}isBgPalette(){return(50331648&this.bg)==16777216||(50331648&this.bg)==33554432}isFgDefault(){return(50331648&this.fg)==0}isBgDefault(){return(50331648&this.bg)==0}isAttributeDefault(){return this.fg===0&&this.bg===0}getFgColor(){switch(50331648&this.fg){case 16777216:case 33554432:return 255&this.fg;case 50331648:return 16777215&this.fg;default:return-1}}getBgColor(){switch(50331648&this.bg){case 16777216:case 33554432:return 255&this.bg;case 50331648:return 16777215&this.bg;default:return-1}}hasExtendedAttrs(){return 268435456&this.bg}updateExtended(){this.extended.isEmpty()?this.bg&=-268435457:this.bg|=268435456}getUnderlineColor(){if(268435456&this.bg&&~this.extended.underlineColor)switch(50331648&this.extended.underlineColor){case 16777216:case 33554432:return 255&this.extended.underlineColor;case 50331648:return 16777215&this.extended.underlineColor;default:return this.getFgColor()}return this.getFgColor()}getUnderlineColorMode(){return 268435456&this.bg&&~this.extended.underlineColor?50331648&this.extended.underlineColor:this.getFgColorMode()}isUnderlineColorRGB(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==50331648:this.isFgRGB()}isUnderlineColorPalette(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==16777216||(50331648&this.extended.underlineColor)==33554432:this.isFgPalette()}isUnderlineColorDefault(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==0:this.isFgDefault()}getUnderlineStyle(){return 268435456&this.fg?268435456&this.bg?this.extended.underlineStyle:1:0}}o.AttributeData=a;class h{get ext(){return this._urlId?-469762049&this._ext|this.underlineStyle<<26:this._ext}set ext(f){this._ext=f}get underlineStyle(){return this._urlId?5:(469762048&this._ext)>>26}set underlineStyle(f){this._ext&=-469762049,this._ext|=f<<26&469762048}get underlineColor(){return 67108863&this._ext}set underlineColor(f){this._ext&=-67108864,this._ext|=67108863&f}get urlId(){return this._urlId}set urlId(f){this._urlId=f}constructor(f=0,_=0){this._ext=0,this._urlId=0,this._ext=f,this._urlId=_}clone(){return new h(this._ext,this._urlId)}isEmpty(){return this.underlineStyle===0&&this._urlId===0}}o.ExtendedAttrs=h},9092:(l,o,a)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.Buffer=o.MAX_BUFFER_SIZE=void 0;const h=a(6349),u=a(7226),f=a(3734),_=a(8437),v=a(4634),b=a(511),g=a(643),c=a(4863),d=a(7116);o.MAX_BUFFER_SIZE=4294967295,o.Buffer=class{constructor(m,p,y){this._hasScrollback=m,this._optionsService=p,this._bufferService=y,this.ydisp=0,this.ybase=0,this.y=0,this.x=0,this.tabs={},this.savedY=0,this.savedX=0,this.savedCurAttrData=_.DEFAULT_ATTR_DATA.clone(),this.savedCharset=d.DEFAULT_CHARSET,this.markers=[],this._nullCell=b.CellData.fromCharData([0,g.NULL_CELL_CHAR,g.NULL_CELL_WIDTH,g.NULL_CELL_CODE]),this._whitespaceCell=b.CellData.fromCharData([0,g.WHITESPACE_CELL_CHAR,g.WHITESPACE_CELL_WIDTH,g.WHITESPACE_CELL_CODE]),this._isClearing=!1,this._memoryCleanupQueue=new u.IdleTaskQueue,this._memoryCleanupPosition=0,this._cols=this._bufferService.cols,this._rows=this._bufferService.rows,this.lines=new h.CircularList(this._getCorrectBufferLength(this._rows)),this.scrollTop=0,this.scrollBottom=this._rows-1,this.setupTabStops()}getNullCell(m){return m?(this._nullCell.fg=m.fg,this._nullCell.bg=m.bg,this._nullCell.extended=m.extended):(this._nullCell.fg=0,this._nullCell.bg=0,this._nullCell.extended=new f.ExtendedAttrs),this._nullCell}getWhitespaceCell(m){return m?(this._whitespaceCell.fg=m.fg,this._whitespaceCell.bg=m.bg,this._whitespaceCell.extended=m.extended):(this._whitespaceCell.fg=0,this._whitespaceCell.bg=0,this._whitespaceCell.extended=new f.ExtendedAttrs),this._whitespaceCell}getBlankLine(m,p){return new _.BufferLine(this._bufferService.cols,this.getNullCell(m),p)}get hasScrollback(){return this._hasScrollback&&this.lines.maxLength>this._rows}get isCursorInViewport(){const m=this.ybase+this.y-this.ydisp;return m>=0&&m<this._rows}_getCorrectBufferLength(m){if(!this._hasScrollback)return m;const p=m+this._optionsService.rawOptions.scrollback;return p>o.MAX_BUFFER_SIZE?o.MAX_BUFFER_SIZE:p}fillViewportRows(m){if(this.lines.length===0){m===void 0&&(m=_.DEFAULT_ATTR_DATA);let p=this._rows;for(;p--;)this.lines.push(this.getBlankLine(m))}}clear(){this.ydisp=0,this.ybase=0,this.y=0,this.x=0,this.lines=new h.CircularList(this._getCorrectBufferLength(this._rows)),this.scrollTop=0,this.scrollBottom=this._rows-1,this.setupTabStops()}resize(m,p){const y=this.getNullCell(_.DEFAULT_ATTR_DATA);let S=0;const E=this._getCorrectBufferLength(p);if(E>this.lines.maxLength&&(this.lines.maxLength=E),this.lines.length>0){if(this._cols<m)for(let w=0;w<this.lines.length;w++)S+=+this.lines.get(w).resize(m,y);let k=0;if(this._rows<p)for(let w=this._rows;w<p;w++)this.lines.length<p+this.ybase&&(this._optionsService.rawOptions.windowsMode||this._optionsService.rawOptions.windowsPty.backend!==void 0||this._optionsService.rawOptions.windowsPty.buildNumber!==void 0?this.lines.push(new _.BufferLine(m,y)):this.ybase>0&&this.lines.length<=this.ybase+this.y+k+1?(this.ybase--,k++,this.ydisp>0&&this.ydisp--):this.lines.push(new _.BufferLine(m,y)));else for(let w=this._rows;w>p;w--)this.lines.length>p+this.ybase&&(this.lines.length>this.ybase+this.y+1?this.lines.pop():(this.ybase++,this.ydisp++));if(E<this.lines.maxLength){const w=this.lines.length-E;w>0&&(this.lines.trimStart(w),this.ybase=Math.max(this.ybase-w,0),this.ydisp=Math.max(this.ydisp-w,0),this.savedY=Math.max(this.savedY-w,0)),this.lines.maxLength=E}this.x=Math.min(this.x,m-1),this.y=Math.min(this.y,p-1),k&&(this.y+=k),this.savedX=Math.min(this.savedX,m-1),this.scrollTop=0}if(this.scrollBottom=p-1,this._isReflowEnabled&&(this._reflow(m,p),this._cols>m))for(let k=0;k<this.lines.length;k++)S+=+this.lines.get(k).resize(m,y);this._cols=m,this._rows=p,this._memoryCleanupQueue.clear(),S>.1*this.lines.length&&(this._memoryCleanupPosition=0,this._memoryCleanupQueue.enqueue(()=>this._batchedMemoryCleanup()))}_batchedMemoryCleanup(){let m=!0;this._memoryCleanupPosition>=this.lines.length&&(this._memoryCleanupPosition=0,m=!1);let p=0;for(;this._memoryCleanupPosition<this.lines.length;)if(p+=this.lines.get(this._memoryCleanupPosition++).cleanupMemory(),p>100)return!0;return m}get _isReflowEnabled(){const m=this._optionsService.rawOptions.windowsPty;return m&&m.buildNumber?this._hasScrollback&&m.backend==="conpty"&&m.buildNumber>=21376:this._hasScrollback&&!this._optionsService.rawOptions.windowsMode}_reflow(m,p){this._cols!==m&&(m>this._cols?this._reflowLarger(m,p):this._reflowSmaller(m,p))}_reflowLarger(m,p){const y=(0,v.reflowLargerGetLinesToRemove)(this.lines,this._cols,m,this.ybase+this.y,this.getNullCell(_.DEFAULT_ATTR_DATA));if(y.length>0){const S=(0,v.reflowLargerCreateNewLayout)(this.lines,y);(0,v.reflowLargerApplyNewLayout)(this.lines,S.layout),this._reflowLargerAdjustViewport(m,p,S.countRemoved)}}_reflowLargerAdjustViewport(m,p,y){const S=this.getNullCell(_.DEFAULT_ATTR_DATA);let E=y;for(;E-- >0;)this.ybase===0?(this.y>0&&this.y--,this.lines.length<p&&this.lines.push(new _.BufferLine(m,S))):(this.ydisp===this.ybase&&this.ydisp--,this.ybase--);this.savedY=Math.max(this.savedY-y,0)}_reflowSmaller(m,p){const y=this.getNullCell(_.DEFAULT_ATTR_DATA),S=[];let E=0;for(let k=this.lines.length-1;k>=0;k--){let w=this.lines.get(k);if(!w||!w.isWrapped&&w.getTrimmedLength()<=m)continue;const C=[w];for(;w.isWrapped&&k>0;)w=this.lines.get(--k),C.unshift(w);const L=this.ybase+this.y;if(L>=k&&L<k+C.length)continue;const R=C[C.length-1].getTrimmedLength(),O=(0,v.reflowSmallerGetNewLineLengths)(C,this._cols,m),T=O.length-C.length;let x;x=this.ybase===0&&this.y!==this.lines.length-1?Math.max(0,this.y-this.lines.maxLength+T):Math.max(0,this.lines.length-this.lines.maxLength+T);const F=[];for(let H=0;H<T;H++){const N=this.getBlankLine(_.DEFAULT_ATTR_DATA,!0);F.push(N)}F.length>0&&(S.push({start:k+C.length+E,newLines:F}),E+=F.length),C.push(...F);let Y=O.length-1,q=O[Y];q===0&&(Y--,q=O[Y]);let M=C.length-T-1,B=R;for(;M>=0;){const H=Math.min(B,q);if(C[Y]===void 0)break;if(C[Y].copyCellsFrom(C[M],B-H,q-H,H,!0),q-=H,q===0&&(Y--,q=O[Y]),B-=H,B===0){M--;const N=Math.max(M,0);B=(0,v.getWrappedLineTrimmedLength)(C,N,this._cols)}}for(let H=0;H<C.length;H++)O[H]<m&&C[H].setCell(O[H],y);let A=T-x;for(;A-- >0;)this.ybase===0?this.y<p-1?(this.y++,this.lines.pop()):(this.ybase++,this.ydisp++):this.ybase<Math.min(this.lines.maxLength,this.lines.length+E)-p&&(this.ybase===this.ydisp&&this.ydisp++,this.ybase++);this.savedY=Math.min(this.savedY+T,this.ybase+p-1)}if(S.length>0){const k=[],w=[];for(let Y=0;Y<this.lines.length;Y++)w.push(this.lines.get(Y));const C=this.lines.length;let L=C-1,R=0,O=S[R];this.lines.length=Math.min(this.lines.maxLength,this.lines.length+E);let T=0;for(let Y=Math.min(this.lines.maxLength-1,C+E-1);Y>=0;Y--)if(O&&O.start>L+T){for(let q=O.newLines.length-1;q>=0;q--)this.lines.set(Y--,O.newLines[q]);Y++,k.push({index:L+1,amount:O.newLines.length}),T+=O.newLines.length,O=S[++R]}else this.lines.set(Y,w[L--]);let x=0;for(let Y=k.length-1;Y>=0;Y--)k[Y].index+=x,this.lines.onInsertEmitter.fire(k[Y]),x+=k[Y].amount;const F=Math.max(0,C+E-this.lines.maxLength);F>0&&this.lines.onTrimEmitter.fire(F)}}translateBufferLineToString(m,p,y=0,S){const E=this.lines.get(m);return E?E.translateToString(p,y,S):""}getWrappedRangeForLine(m){let p=m,y=m;for(;p>0&&this.lines.get(p).isWrapped;)p--;for(;y+1<this.lines.length&&this.lines.get(y+1).isWrapped;)y++;return{first:p,last:y}}setupTabStops(m){for(m!=null?this.tabs[m]||(m=this.prevStop(m)):(this.tabs={},m=0);m<this._cols;m+=this._optionsService.rawOptions.tabStopWidth)this.tabs[m]=!0}prevStop(m){for(m==null&&(m=this.x);!this.tabs[--m]&&m>0;);return m>=this._cols?this._cols-1:m<0?0:m}nextStop(m){for(m==null&&(m=this.x);!this.tabs[++m]&&m<this._cols;);return m>=this._cols?this._cols-1:m<0?0:m}clearMarkers(m){this._isClearing=!0;for(let p=0;p<this.markers.length;p++)this.markers[p].line===m&&(this.markers[p].dispose(),this.markers.splice(p--,1));this._isClearing=!1}clearAllMarkers(){this._isClearing=!0;for(let m=0;m<this.markers.length;m++)this.markers[m].dispose(),this.markers.splice(m--,1);this._isClearing=!1}addMarker(m){const p=new c.Marker(m);return this.markers.push(p),p.register(this.lines.onTrim(y=>{p.line-=y,p.line<0&&p.dispose()})),p.register(this.lines.onInsert(y=>{p.line>=y.index&&(p.line+=y.amount)})),p.register(this.lines.onDelete(y=>{p.line>=y.index&&p.line<y.index+y.amount&&p.dispose(),p.line>y.index&&(p.line-=y.amount)})),p.register(p.onDispose(()=>this._removeMarker(p))),p}_removeMarker(m){this._isClearing||this.markers.splice(this.markers.indexOf(m),1)}}},8437:(l,o,a)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.BufferLine=o.DEFAULT_ATTR_DATA=void 0;const h=a(3734),u=a(511),f=a(643),_=a(482);o.DEFAULT_ATTR_DATA=Object.freeze(new h.AttributeData);let v=0;class b{constructor(c,d,m=!1){this.isWrapped=m,this._combined={},this._extendedAttrs={},this._data=new Uint32Array(3*c);const p=d||u.CellData.fromCharData([0,f.NULL_CELL_CHAR,f.NULL_CELL_WIDTH,f.NULL_CELL_CODE]);for(let y=0;y<c;++y)this.setCell(y,p);this.length=c}get(c){const d=this._data[3*c+0],m=2097151&d;return[this._data[3*c+1],2097152&d?this._combined[c]:m?(0,_.stringFromCodePoint)(m):"",d>>22,2097152&d?this._combined[c].charCodeAt(this._combined[c].length-1):m]}set(c,d){this._data[3*c+1]=d[f.CHAR_DATA_ATTR_INDEX],d[f.CHAR_DATA_CHAR_INDEX].length>1?(this._combined[c]=d[1],this._data[3*c+0]=2097152|c|d[f.CHAR_DATA_WIDTH_INDEX]<<22):this._data[3*c+0]=d[f.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|d[f.CHAR_DATA_WIDTH_INDEX]<<22}getWidth(c){return this._data[3*c+0]>>22}hasWidth(c){return 12582912&this._data[3*c+0]}getFg(c){return this._data[3*c+1]}getBg(c){return this._data[3*c+2]}hasContent(c){return 4194303&this._data[3*c+0]}getCodePoint(c){const d=this._data[3*c+0];return 2097152&d?this._combined[c].charCodeAt(this._combined[c].length-1):2097151&d}isCombined(c){return 2097152&this._data[3*c+0]}getString(c){const d=this._data[3*c+0];return 2097152&d?this._combined[c]:2097151&d?(0,_.stringFromCodePoint)(2097151&d):""}isProtected(c){return 536870912&this._data[3*c+2]}loadCell(c,d){return v=3*c,d.content=this._data[v+0],d.fg=this._data[v+1],d.bg=this._data[v+2],2097152&d.content&&(d.combinedData=this._combined[c]),268435456&d.bg&&(d.extended=this._extendedAttrs[c]),d}setCell(c,d){2097152&d.content&&(this._combined[c]=d.combinedData),268435456&d.bg&&(this._extendedAttrs[c]=d.extended),this._data[3*c+0]=d.content,this._data[3*c+1]=d.fg,this._data[3*c+2]=d.bg}setCellFromCodePoint(c,d,m,p,y,S){268435456&y&&(this._extendedAttrs[c]=S),this._data[3*c+0]=d|m<<22,this._data[3*c+1]=p,this._data[3*c+2]=y}addCodepointToCell(c,d){let m=this._data[3*c+0];2097152&m?this._combined[c]+=(0,_.stringFromCodePoint)(d):(2097151&m?(this._combined[c]=(0,_.stringFromCodePoint)(2097151&m)+(0,_.stringFromCodePoint)(d),m&=-2097152,m|=2097152):m=d|4194304,this._data[3*c+0]=m)}insertCells(c,d,m,p){if((c%=this.length)&&this.getWidth(c-1)===2&&this.setCellFromCodePoint(c-1,0,1,(p==null?void 0:p.fg)||0,(p==null?void 0:p.bg)||0,(p==null?void 0:p.extended)||new h.ExtendedAttrs),d<this.length-c){const y=new u.CellData;for(let S=this.length-c-d-1;S>=0;--S)this.setCell(c+d+S,this.loadCell(c+S,y));for(let S=0;S<d;++S)this.setCell(c+S,m)}else for(let y=c;y<this.length;++y)this.setCell(y,m);this.getWidth(this.length-1)===2&&this.setCellFromCodePoint(this.length-1,0,1,(p==null?void 0:p.fg)||0,(p==null?void 0:p.bg)||0,(p==null?void 0:p.extended)||new h.ExtendedAttrs)}deleteCells(c,d,m,p){if(c%=this.length,d<this.length-c){const y=new u.CellData;for(let S=0;S<this.length-c-d;++S)this.setCell(c+S,this.loadCell(c+d+S,y));for(let S=this.length-d;S<this.length;++S)this.setCell(S,m)}else for(let y=c;y<this.length;++y)this.setCell(y,m);c&&this.getWidth(c-1)===2&&this.setCellFromCodePoint(c-1,0,1,(p==null?void 0:p.fg)||0,(p==null?void 0:p.bg)||0,(p==null?void 0:p.extended)||new h.ExtendedAttrs),this.getWidth(c)!==0||this.hasContent(c)||this.setCellFromCodePoint(c,0,1,(p==null?void 0:p.fg)||0,(p==null?void 0:p.bg)||0,(p==null?void 0:p.extended)||new h.ExtendedAttrs)}replaceCells(c,d,m,p,y=!1){if(y)for(c&&this.getWidth(c-1)===2&&!this.isProtected(c-1)&&this.setCellFromCodePoint(c-1,0,1,(p==null?void 0:p.fg)||0,(p==null?void 0:p.bg)||0,(p==null?void 0:p.extended)||new h.ExtendedAttrs),d<this.length&&this.getWidth(d-1)===2&&!this.isProtected(d)&&this.setCellFromCodePoint(d,0,1,(p==null?void 0:p.fg)||0,(p==null?void 0:p.bg)||0,(p==null?void 0:p.extended)||new h.ExtendedAttrs);c<d&&c<this.length;)this.isProtected(c)||this.setCell(c,m),c++;else for(c&&this.getWidth(c-1)===2&&this.setCellFromCodePoint(c-1,0,1,(p==null?void 0:p.fg)||0,(p==null?void 0:p.bg)||0,(p==null?void 0:p.extended)||new h.ExtendedAttrs),d<this.length&&this.getWidth(d-1)===2&&this.setCellFromCodePoint(d,0,1,(p==null?void 0:p.fg)||0,(p==null?void 0:p.bg)||0,(p==null?void 0:p.extended)||new h.ExtendedAttrs);c<d&&c<this.length;)this.setCell(c++,m)}resize(c,d){if(c===this.length)return 4*this._data.length*2<this._data.buffer.byteLength;const m=3*c;if(c>this.length){if(this._data.buffer.byteLength>=4*m)this._data=new Uint32Array(this._data.buffer,0,m);else{const p=new Uint32Array(m);p.set(this._data),this._data=p}for(let p=this.length;p<c;++p)this.setCell(p,d)}else{this._data=this._data.subarray(0,m);const p=Object.keys(this._combined);for(let S=0;S<p.length;S++){const E=parseInt(p[S],10);E>=c&&delete this._combined[E]}const y=Object.keys(this._extendedAttrs);for(let S=0;S<y.length;S++){const E=parseInt(y[S],10);E>=c&&delete this._extendedAttrs[E]}}return this.length=c,4*m*2<this._data.buffer.byteLength}cleanupMemory(){if(4*this._data.length*2<this._data.buffer.byteLength){const c=new Uint32Array(this._data.length);return c.set(this._data),this._data=c,1}return 0}fill(c,d=!1){if(d)for(let m=0;m<this.length;++m)this.isProtected(m)||this.setCell(m,c);else{this._combined={},this._extendedAttrs={};for(let m=0;m<this.length;++m)this.setCell(m,c)}}copyFrom(c){this.length!==c.length?this._data=new Uint32Array(c._data):this._data.set(c._data),this.length=c.length,this._combined={};for(const d in c._combined)this._combined[d]=c._combined[d];this._extendedAttrs={};for(const d in c._extendedAttrs)this._extendedAttrs[d]=c._extendedAttrs[d];this.isWrapped=c.isWrapped}clone(){const c=new b(0);c._data=new Uint32Array(this._data),c.length=this.length;for(const d in this._combined)c._combined[d]=this._combined[d];for(const d in this._extendedAttrs)c._extendedAttrs[d]=this._extendedAttrs[d];return c.isWrapped=this.isWrapped,c}getTrimmedLength(){for(let c=this.length-1;c>=0;--c)if(4194303&this._data[3*c+0])return c+(this._data[3*c+0]>>22);return 0}getNoBgTrimmedLength(){for(let c=this.length-1;c>=0;--c)if(4194303&this._data[3*c+0]||50331648&this._data[3*c+2])return c+(this._data[3*c+0]>>22);return 0}copyCellsFrom(c,d,m,p,y){const S=c._data;if(y)for(let k=p-1;k>=0;k--){for(let w=0;w<3;w++)this._data[3*(m+k)+w]=S[3*(d+k)+w];268435456&S[3*(d+k)+2]&&(this._extendedAttrs[m+k]=c._extendedAttrs[d+k])}else for(let k=0;k<p;k++){for(let w=0;w<3;w++)this._data[3*(m+k)+w]=S[3*(d+k)+w];268435456&S[3*(d+k)+2]&&(this._extendedAttrs[m+k]=c._extendedAttrs[d+k])}const E=Object.keys(c._combined);for(let k=0;k<E.length;k++){const w=parseInt(E[k],10);w>=d&&(this._combined[w-d+m]=c._combined[w])}}translateToString(c=!1,d=0,m=this.length){c&&(m=Math.min(m,this.getTrimmedLength()));let p="";for(;d<m;){const y=this._data[3*d+0],S=2097151&y;p+=2097152&y?this._combined[d]:S?(0,_.stringFromCodePoint)(S):f.WHITESPACE_CELL_CHAR,d+=y>>22||1}return p}}o.BufferLine=b},4841:(l,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.getRangeLength=void 0,o.getRangeLength=function(a,h){if(a.start.y>a.end.y)throw new Error(`Buffer range end (${a.end.x}, ${a.end.y}) cannot be before start (${a.start.x}, ${a.start.y})`);return h*(a.end.y-a.start.y)+(a.end.x-a.start.x+1)}},4634:(l,o)=>{function a(h,u,f){if(u===h.length-1)return h[u].getTrimmedLength();const _=!h[u].hasContent(f-1)&&h[u].getWidth(f-1)===1,v=h[u+1].getWidth(0)===2;return _&&v?f-1:f}Object.defineProperty(o,"__esModule",{value:!0}),o.getWrappedLineTrimmedLength=o.reflowSmallerGetNewLineLengths=o.reflowLargerApplyNewLayout=o.reflowLargerCreateNewLayout=o.reflowLargerGetLinesToRemove=void 0,o.reflowLargerGetLinesToRemove=function(h,u,f,_,v){const b=[];for(let g=0;g<h.length-1;g++){let c=g,d=h.get(++c);if(!d.isWrapped)continue;const m=[h.get(g)];for(;c<h.length&&d.isWrapped;)m.push(d),d=h.get(++c);if(_>=g&&_<c){g+=m.length-1;continue}let p=0,y=a(m,p,u),S=1,E=0;for(;S<m.length;){const w=a(m,S,u),C=w-E,L=f-y,R=Math.min(C,L);m[p].copyCellsFrom(m[S],E,y,R,!1),y+=R,y===f&&(p++,y=0),E+=R,E===w&&(S++,E=0),y===0&&p!==0&&m[p-1].getWidth(f-1)===2&&(m[p].copyCellsFrom(m[p-1],f-1,y++,1,!1),m[p-1].setCell(f-1,v))}m[p].replaceCells(y,f,v);let k=0;for(let w=m.length-1;w>0&&(w>p||m[w].getTrimmedLength()===0);w--)k++;k>0&&(b.push(g+m.length-k),b.push(k)),g+=m.length-1}return b},o.reflowLargerCreateNewLayout=function(h,u){const f=[];let _=0,v=u[_],b=0;for(let g=0;g<h.length;g++)if(v===g){const c=u[++_];h.onDeleteEmitter.fire({index:g-b,amount:c}),g+=c-1,b+=c,v=u[++_]}else f.push(g);return{layout:f,countRemoved:b}},o.reflowLargerApplyNewLayout=function(h,u){const f=[];for(let _=0;_<u.length;_++)f.push(h.get(u[_]));for(let _=0;_<f.length;_++)h.set(_,f[_]);h.length=u.length},o.reflowSmallerGetNewLineLengths=function(h,u,f){const _=[],v=h.map((d,m)=>a(h,m,u)).reduce((d,m)=>d+m);let b=0,g=0,c=0;for(;c<v;){if(v-c<f){_.push(v-c);break}b+=f;const d=a(h,g,u);b>d&&(b-=d,g++);const m=h[g].getWidth(b-1)===2;m&&b--;const p=m?f-1:f;_.push(p),c+=p}return _},o.getWrappedLineTrimmedLength=a},5295:(l,o,a)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.BufferSet=void 0;const h=a(8460),u=a(844),f=a(9092);class _ extends u.Disposable{constructor(b,g){super(),this._optionsService=b,this._bufferService=g,this._onBufferActivate=this.register(new h.EventEmitter),this.onBufferActivate=this._onBufferActivate.event,this.reset(),this.register(this._optionsService.onSpecificOptionChange("scrollback",()=>this.resize(this._bufferService.cols,this._bufferService.rows))),this.register(this._optionsService.onSpecificOptionChange("tabStopWidth",()=>this.setupTabStops()))}reset(){this._normal=new f.Buffer(!0,this._optionsService,this._bufferService),this._normal.fillViewportRows(),this._alt=new f.Buffer(!1,this._optionsService,this._bufferService),this._activeBuffer=this._normal,this._onBufferActivate.fire({activeBuffer:this._normal,inactiveBuffer:this._alt}),this.setupTabStops()}get alt(){return this._alt}get active(){return this._activeBuffer}get normal(){return this._normal}activateNormalBuffer(){this._activeBuffer!==this._normal&&(this._normal.x=this._alt.x,this._normal.y=this._alt.y,this._alt.clearAllMarkers(),this._alt.clear(),this._activeBuffer=this._normal,this._onBufferActivate.fire({activeBuffer:this._normal,inactiveBuffer:this._alt}))}activateAltBuffer(b){this._activeBuffer!==this._alt&&(this._alt.fillViewportRows(b),this._alt.x=this._normal.x,this._alt.y=this._normal.y,this._activeBuffer=this._alt,this._onBufferActivate.fire({activeBuffer:this._alt,inactiveBuffer:this._normal}))}resize(b,g){this._normal.resize(b,g),this._alt.resize(b,g),this.setupTabStops(b)}setupTabStops(b){this._normal.setupTabStops(b),this._alt.setupTabStops(b)}}o.BufferSet=_},511:(l,o,a)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.CellData=void 0;const h=a(482),u=a(643),f=a(3734);class _ extends f.AttributeData{constructor(){super(...arguments),this.content=0,this.fg=0,this.bg=0,this.extended=new f.ExtendedAttrs,this.combinedData=""}static fromCharData(b){const g=new _;return g.setFromCharData(b),g}isCombined(){return 2097152&this.content}getWidth(){return this.content>>22}getChars(){return 2097152&this.content?this.combinedData:2097151&this.content?(0,h.stringFromCodePoint)(2097151&this.content):""}getCode(){return this.isCombined()?this.combinedData.charCodeAt(this.combinedData.length-1):2097151&this.content}setFromCharData(b){this.fg=b[u.CHAR_DATA_ATTR_INDEX],this.bg=0;let g=!1;if(b[u.CHAR_DATA_CHAR_INDEX].length>2)g=!0;else if(b[u.CHAR_DATA_CHAR_INDEX].length===2){const c=b[u.CHAR_DATA_CHAR_INDEX].charCodeAt(0);if(55296<=c&&c<=56319){const d=b[u.CHAR_DATA_CHAR_INDEX].charCodeAt(1);56320<=d&&d<=57343?this.content=1024*(c-55296)+d-56320+65536|b[u.CHAR_DATA_WIDTH_INDEX]<<22:g=!0}else g=!0}else this.content=b[u.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|b[u.CHAR_DATA_WIDTH_INDEX]<<22;g&&(this.combinedData=b[u.CHAR_DATA_CHAR_INDEX],this.content=2097152|b[u.CHAR_DATA_WIDTH_INDEX]<<22)}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}}o.CellData=_},643:(l,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.WHITESPACE_CELL_CODE=o.WHITESPACE_CELL_WIDTH=o.WHITESPACE_CELL_CHAR=o.NULL_CELL_CODE=o.NULL_CELL_WIDTH=o.NULL_CELL_CHAR=o.CHAR_DATA_CODE_INDEX=o.CHAR_DATA_WIDTH_INDEX=o.CHAR_DATA_CHAR_INDEX=o.CHAR_DATA_ATTR_INDEX=o.DEFAULT_EXT=o.DEFAULT_ATTR=o.DEFAULT_COLOR=void 0,o.DEFAULT_COLOR=0,o.DEFAULT_ATTR=256|o.DEFAULT_COLOR<<9,o.DEFAULT_EXT=0,o.CHAR_DATA_ATTR_INDEX=0,o.CHAR_DATA_CHAR_INDEX=1,o.CHAR_DATA_WIDTH_INDEX=2,o.CHAR_DATA_CODE_INDEX=3,o.NULL_CELL_CHAR="",o.NULL_CELL_WIDTH=1,o.NULL_CELL_CODE=0,o.WHITESPACE_CELL_CHAR=" ",o.WHITESPACE_CELL_WIDTH=1,o.WHITESPACE_CELL_CODE=32},4863:(l,o,a)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.Marker=void 0;const h=a(8460),u=a(844);class f{get id(){return this._id}constructor(v){this.line=v,this.isDisposed=!1,this._disposables=[],this._id=f._nextId++,this._onDispose=this.register(new h.EventEmitter),this.onDispose=this._onDispose.event}dispose(){this.isDisposed||(this.isDisposed=!0,this.line=-1,this._onDispose.fire(),(0,u.disposeArray)(this._disposables),this._disposables.length=0)}register(v){return this._disposables.push(v),v}}o.Marker=f,f._nextId=1},7116:(l,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.DEFAULT_CHARSET=o.CHARSETS=void 0,o.CHARSETS={},o.DEFAULT_CHARSET=o.CHARSETS.B,o.CHARSETS[0]={"`":"◆",a:"▒",b:"␉",c:"␌",d:"␍",e:"␊",f:"°",g:"±",h:"␤",i:"␋",j:"┘",k:"┐",l:"┌",m:"└",n:"┼",o:"⎺",p:"⎻",q:"─",r:"⎼",s:"⎽",t:"├",u:"┤",v:"┴",w:"┬",x:"│",y:"≤",z:"≥","{":"π","|":"≠","}":"£","~":"·"},o.CHARSETS.A={"#":"£"},o.CHARSETS.B=void 0,o.CHARSETS[4]={"#":"£","@":"¾","[":"ij","\\":"½","]":"|","{":"¨","|":"f","}":"¼","~":"´"},o.CHARSETS.C=o.CHARSETS[5]={"[":"Ä","\\":"Ö","]":"Å","^":"Ü","`":"é","{":"ä","|":"ö","}":"å","~":"ü"},o.CHARSETS.R={"#":"£","@":"à","[":"°","\\":"ç","]":"§","{":"é","|":"ù","}":"è","~":"¨"},o.CHARSETS.Q={"@":"à","[":"â","\\":"ç","]":"ê","^":"î","`":"ô","{":"é","|":"ù","}":"è","~":"û"},o.CHARSETS.K={"@":"§","[":"Ä","\\":"Ö","]":"Ü","{":"ä","|":"ö","}":"ü","~":"ß"},o.CHARSETS.Y={"#":"£","@":"§","[":"°","\\":"ç","]":"é","`":"ù","{":"à","|":"ò","}":"è","~":"ì"},o.CHARSETS.E=o.CHARSETS[6]={"@":"Ä","[":"Æ","\\":"Ø","]":"Å","^":"Ü","`":"ä","{":"æ","|":"ø","}":"å","~":"ü"},o.CHARSETS.Z={"#":"£","@":"§","[":"¡","\\":"Ñ","]":"¿","{":"°","|":"ñ","}":"ç"},o.CHARSETS.H=o.CHARSETS[7]={"@":"É","[":"Ä","\\":"Ö","]":"Å","^":"Ü","`":"é","{":"ä","|":"ö","}":"å","~":"ü"},o.CHARSETS["="]={"#":"ù","@":"à","[":"é","\\":"ç","]":"ê","^":"î",_:"è","`":"ô","{":"ä","|":"ö","}":"ü","~":"û"}},2584:(l,o)=>{var a,h,u;Object.defineProperty(o,"__esModule",{value:!0}),o.C1_ESCAPED=o.C1=o.C0=void 0,function(f){f.NUL="\0",f.SOH="",f.STX="",f.ETX="",f.EOT="",f.ENQ="",f.ACK="",f.BEL="\x07",f.BS="\b",f.HT="	",f.LF=`
`,f.VT="\v",f.FF="\f",f.CR="\r",f.SO="",f.SI="",f.DLE="",f.DC1="",f.DC2="",f.DC3="",f.DC4="",f.NAK="",f.SYN="",f.ETB="",f.CAN="",f.EM="",f.SUB="",f.ESC="\x1B",f.FS="",f.GS="",f.RS="",f.US="",f.SP=" ",f.DEL=""}(a||(o.C0=a={})),function(f){f.PAD="",f.HOP="",f.BPH="",f.NBH="",f.IND="",f.NEL="",f.SSA="",f.ESA="",f.HTS="",f.HTJ="",f.VTS="",f.PLD="",f.PLU="",f.RI="",f.SS2="",f.SS3="",f.DCS="",f.PU1="",f.PU2="",f.STS="",f.CCH="",f.MW="",f.SPA="",f.EPA="",f.SOS="",f.SGCI="",f.SCI="",f.CSI="",f.ST="",f.OSC="",f.PM="",f.APC=""}(h||(o.C1=h={})),function(f){f.ST=`${a.ESC}\\`}(u||(o.C1_ESCAPED=u={}))},7399:(l,o,a)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.evaluateKeyboardEvent=void 0;const h=a(2584),u={48:["0",")"],49:["1","!"],50:["2","@"],51:["3","#"],52:["4","$"],53:["5","%"],54:["6","^"],55:["7","&"],56:["8","*"],57:["9","("],186:[";",":"],187:["=","+"],188:[",","<"],189:["-","_"],190:[".",">"],191:["/","?"],192:["`","~"],219:["[","{"],220:["\\","|"],221:["]","}"],222:["'",'"']};o.evaluateKeyboardEvent=function(f,_,v,b){const g={type:0,cancel:!1,key:void 0},c=(f.shiftKey?1:0)|(f.altKey?2:0)|(f.ctrlKey?4:0)|(f.metaKey?8:0);switch(f.keyCode){case 0:f.key==="UIKeyInputUpArrow"?g.key=_?h.C0.ESC+"OA":h.C0.ESC+"[A":f.key==="UIKeyInputLeftArrow"?g.key=_?h.C0.ESC+"OD":h.C0.ESC+"[D":f.key==="UIKeyInputRightArrow"?g.key=_?h.C0.ESC+"OC":h.C0.ESC+"[C":f.key==="UIKeyInputDownArrow"&&(g.key=_?h.C0.ESC+"OB":h.C0.ESC+"[B");break;case 8:if(f.altKey){g.key=h.C0.ESC+h.C0.DEL;break}g.key=h.C0.DEL;break;case 9:if(f.shiftKey){g.key=h.C0.ESC+"[Z";break}g.key=h.C0.HT,g.cancel=!0;break;case 13:g.key=f.altKey?h.C0.ESC+h.C0.CR:h.C0.CR,g.cancel=!0;break;case 27:g.key=h.C0.ESC,f.altKey&&(g.key=h.C0.ESC+h.C0.ESC),g.cancel=!0;break;case 37:if(f.metaKey)break;c?(g.key=h.C0.ESC+"[1;"+(c+1)+"D",g.key===h.C0.ESC+"[1;3D"&&(g.key=h.C0.ESC+(v?"b":"[1;5D"))):g.key=_?h.C0.ESC+"OD":h.C0.ESC+"[D";break;case 39:if(f.metaKey)break;c?(g.key=h.C0.ESC+"[1;"+(c+1)+"C",g.key===h.C0.ESC+"[1;3C"&&(g.key=h.C0.ESC+(v?"f":"[1;5C"))):g.key=_?h.C0.ESC+"OC":h.C0.ESC+"[C";break;case 38:if(f.metaKey)break;c?(g.key=h.C0.ESC+"[1;"+(c+1)+"A",v||g.key!==h.C0.ESC+"[1;3A"||(g.key=h.C0.ESC+"[1;5A")):g.key=_?h.C0.ESC+"OA":h.C0.ESC+"[A";break;case 40:if(f.metaKey)break;c?(g.key=h.C0.ESC+"[1;"+(c+1)+"B",v||g.key!==h.C0.ESC+"[1;3B"||(g.key=h.C0.ESC+"[1;5B")):g.key=_?h.C0.ESC+"OB":h.C0.ESC+"[B";break;case 45:f.shiftKey||f.ctrlKey||(g.key=h.C0.ESC+"[2~");break;case 46:g.key=c?h.C0.ESC+"[3;"+(c+1)+"~":h.C0.ESC+"[3~";break;case 36:g.key=c?h.C0.ESC+"[1;"+(c+1)+"H":_?h.C0.ESC+"OH":h.C0.ESC+"[H";break;case 35:g.key=c?h.C0.ESC+"[1;"+(c+1)+"F":_?h.C0.ESC+"OF":h.C0.ESC+"[F";break;case 33:f.shiftKey?g.type=2:f.ctrlKey?g.key=h.C0.ESC+"[5;"+(c+1)+"~":g.key=h.C0.ESC+"[5~";break;case 34:f.shiftKey?g.type=3:f.ctrlKey?g.key=h.C0.ESC+"[6;"+(c+1)+"~":g.key=h.C0.ESC+"[6~";break;case 112:g.key=c?h.C0.ESC+"[1;"+(c+1)+"P":h.C0.ESC+"OP";break;case 113:g.key=c?h.C0.ESC+"[1;"+(c+1)+"Q":h.C0.ESC+"OQ";break;case 114:g.key=c?h.C0.ESC+"[1;"+(c+1)+"R":h.C0.ESC+"OR";break;case 115:g.key=c?h.C0.ESC+"[1;"+(c+1)+"S":h.C0.ESC+"OS";break;case 116:g.key=c?h.C0.ESC+"[15;"+(c+1)+"~":h.C0.ESC+"[15~";break;case 117:g.key=c?h.C0.ESC+"[17;"+(c+1)+"~":h.C0.ESC+"[17~";break;case 118:g.key=c?h.C0.ESC+"[18;"+(c+1)+"~":h.C0.ESC+"[18~";break;case 119:g.key=c?h.C0.ESC+"[19;"+(c+1)+"~":h.C0.ESC+"[19~";break;case 120:g.key=c?h.C0.ESC+"[20;"+(c+1)+"~":h.C0.ESC+"[20~";break;case 121:g.key=c?h.C0.ESC+"[21;"+(c+1)+"~":h.C0.ESC+"[21~";break;case 122:g.key=c?h.C0.ESC+"[23;"+(c+1)+"~":h.C0.ESC+"[23~";break;case 123:g.key=c?h.C0.ESC+"[24;"+(c+1)+"~":h.C0.ESC+"[24~";break;default:if(!f.ctrlKey||f.shiftKey||f.altKey||f.metaKey)if(v&&!b||!f.altKey||f.metaKey)!v||f.altKey||f.ctrlKey||f.shiftKey||!f.metaKey?f.key&&!f.ctrlKey&&!f.altKey&&!f.metaKey&&f.keyCode>=48&&f.key.length===1?g.key=f.key:f.key&&f.ctrlKey&&(f.key==="_"&&(g.key=h.C0.US),f.key==="@"&&(g.key=h.C0.NUL)):f.keyCode===65&&(g.type=1);else{const d=u[f.keyCode],m=d==null?void 0:d[f.shiftKey?1:0];if(m)g.key=h.C0.ESC+m;else if(f.keyCode>=65&&f.keyCode<=90){const p=f.ctrlKey?f.keyCode-64:f.keyCode+32;let y=String.fromCharCode(p);f.shiftKey&&(y=y.toUpperCase()),g.key=h.C0.ESC+y}else if(f.keyCode===32)g.key=h.C0.ESC+(f.ctrlKey?h.C0.NUL:" ");else if(f.key==="Dead"&&f.code.startsWith("Key")){let p=f.code.slice(3,4);f.shiftKey||(p=p.toLowerCase()),g.key=h.C0.ESC+p,g.cancel=!0}}else f.keyCode>=65&&f.keyCode<=90?g.key=String.fromCharCode(f.keyCode-64):f.keyCode===32?g.key=h.C0.NUL:f.keyCode>=51&&f.keyCode<=55?g.key=String.fromCharCode(f.keyCode-51+27):f.keyCode===56?g.key=h.C0.DEL:f.keyCode===219?g.key=h.C0.ESC:f.keyCode===220?g.key=h.C0.FS:f.keyCode===221&&(g.key=h.C0.GS)}return g}},482:(l,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.Utf8ToUtf32=o.StringToUtf32=o.utf32ToString=o.stringFromCodePoint=void 0,o.stringFromCodePoint=function(a){return a>65535?(a-=65536,String.fromCharCode(55296+(a>>10))+String.fromCharCode(a%1024+56320)):String.fromCharCode(a)},o.utf32ToString=function(a,h=0,u=a.length){let f="";for(let _=h;_<u;++_){let v=a[_];v>65535?(v-=65536,f+=String.fromCharCode(55296+(v>>10))+String.fromCharCode(v%1024+56320)):f+=String.fromCharCode(v)}return f},o.StringToUtf32=class{constructor(){this._interim=0}clear(){this._interim=0}decode(a,h){const u=a.length;if(!u)return 0;let f=0,_=0;if(this._interim){const v=a.charCodeAt(_++);56320<=v&&v<=57343?h[f++]=1024*(this._interim-55296)+v-56320+65536:(h[f++]=this._interim,h[f++]=v),this._interim=0}for(let v=_;v<u;++v){const b=a.charCodeAt(v);if(55296<=b&&b<=56319){if(++v>=u)return this._interim=b,f;const g=a.charCodeAt(v);56320<=g&&g<=57343?h[f++]=1024*(b-55296)+g-56320+65536:(h[f++]=b,h[f++]=g)}else b!==65279&&(h[f++]=b)}return f}},o.Utf8ToUtf32=class{constructor(){this.interim=new Uint8Array(3)}clear(){this.interim.fill(0)}decode(a,h){const u=a.length;if(!u)return 0;let f,_,v,b,g=0,c=0,d=0;if(this.interim[0]){let y=!1,S=this.interim[0];S&=(224&S)==192?31:(240&S)==224?15:7;let E,k=0;for(;(E=63&this.interim[++k])&&k<4;)S<<=6,S|=E;const w=(224&this.interim[0])==192?2:(240&this.interim[0])==224?3:4,C=w-k;for(;d<C;){if(d>=u)return 0;if(E=a[d++],(192&E)!=128){d--,y=!0;break}this.interim[k++]=E,S<<=6,S|=63&E}y||(w===2?S<128?d--:h[g++]=S:w===3?S<2048||S>=55296&&S<=57343||S===65279||(h[g++]=S):S<65536||S>1114111||(h[g++]=S)),this.interim.fill(0)}const m=u-4;let p=d;for(;p<u;){for(;!(!(p<m)||128&(f=a[p])||128&(_=a[p+1])||128&(v=a[p+2])||128&(b=a[p+3]));)h[g++]=f,h[g++]=_,h[g++]=v,h[g++]=b,p+=4;if(f=a[p++],f<128)h[g++]=f;else if((224&f)==192){if(p>=u)return this.interim[0]=f,g;if(_=a[p++],(192&_)!=128){p--;continue}if(c=(31&f)<<6|63&_,c<128){p--;continue}h[g++]=c}else if((240&f)==224){if(p>=u)return this.interim[0]=f,g;if(_=a[p++],(192&_)!=128){p--;continue}if(p>=u)return this.interim[0]=f,this.interim[1]=_,g;if(v=a[p++],(192&v)!=128){p--;continue}if(c=(15&f)<<12|(63&_)<<6|63&v,c<2048||c>=55296&&c<=57343||c===65279)continue;h[g++]=c}else if((248&f)==240){if(p>=u)return this.interim[0]=f,g;if(_=a[p++],(192&_)!=128){p--;continue}if(p>=u)return this.interim[0]=f,this.interim[1]=_,g;if(v=a[p++],(192&v)!=128){p--;continue}if(p>=u)return this.interim[0]=f,this.interim[1]=_,this.interim[2]=v,g;if(b=a[p++],(192&b)!=128){p--;continue}if(c=(7&f)<<18|(63&_)<<12|(63&v)<<6|63&b,c<65536||c>1114111)continue;h[g++]=c}}return g}}},225:(l,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.UnicodeV6=void 0;const a=[[768,879],[1155,1158],[1160,1161],[1425,1469],[1471,1471],[1473,1474],[1476,1477],[1479,1479],[1536,1539],[1552,1557],[1611,1630],[1648,1648],[1750,1764],[1767,1768],[1770,1773],[1807,1807],[1809,1809],[1840,1866],[1958,1968],[2027,2035],[2305,2306],[2364,2364],[2369,2376],[2381,2381],[2385,2388],[2402,2403],[2433,2433],[2492,2492],[2497,2500],[2509,2509],[2530,2531],[2561,2562],[2620,2620],[2625,2626],[2631,2632],[2635,2637],[2672,2673],[2689,2690],[2748,2748],[2753,2757],[2759,2760],[2765,2765],[2786,2787],[2817,2817],[2876,2876],[2879,2879],[2881,2883],[2893,2893],[2902,2902],[2946,2946],[3008,3008],[3021,3021],[3134,3136],[3142,3144],[3146,3149],[3157,3158],[3260,3260],[3263,3263],[3270,3270],[3276,3277],[3298,3299],[3393,3395],[3405,3405],[3530,3530],[3538,3540],[3542,3542],[3633,3633],[3636,3642],[3655,3662],[3761,3761],[3764,3769],[3771,3772],[3784,3789],[3864,3865],[3893,3893],[3895,3895],[3897,3897],[3953,3966],[3968,3972],[3974,3975],[3984,3991],[3993,4028],[4038,4038],[4141,4144],[4146,4146],[4150,4151],[4153,4153],[4184,4185],[4448,4607],[4959,4959],[5906,5908],[5938,5940],[5970,5971],[6002,6003],[6068,6069],[6071,6077],[6086,6086],[6089,6099],[6109,6109],[6155,6157],[6313,6313],[6432,6434],[6439,6440],[6450,6450],[6457,6459],[6679,6680],[6912,6915],[6964,6964],[6966,6970],[6972,6972],[6978,6978],[7019,7027],[7616,7626],[7678,7679],[8203,8207],[8234,8238],[8288,8291],[8298,8303],[8400,8431],[12330,12335],[12441,12442],[43014,43014],[43019,43019],[43045,43046],[64286,64286],[65024,65039],[65056,65059],[65279,65279],[65529,65531]],h=[[68097,68099],[68101,68102],[68108,68111],[68152,68154],[68159,68159],[119143,119145],[119155,119170],[119173,119179],[119210,119213],[119362,119364],[917505,917505],[917536,917631],[917760,917999]];let u;o.UnicodeV6=class{constructor(){if(this.version="6",!u){u=new Uint8Array(65536),u.fill(1),u[0]=0,u.fill(0,1,32),u.fill(0,127,160),u.fill(2,4352,4448),u[9001]=2,u[9002]=2,u.fill(2,11904,42192),u[12351]=1,u.fill(2,44032,55204),u.fill(2,63744,64256),u.fill(2,65040,65050),u.fill(2,65072,65136),u.fill(2,65280,65377),u.fill(2,65504,65511);for(let f=0;f<a.length;++f)u.fill(0,a[f][0],a[f][1]+1)}}wcwidth(f){return f<32?0:f<127?1:f<65536?u[f]:function(_,v){let b,g=0,c=v.length-1;if(_<v[0][0]||_>v[c][1])return!1;for(;c>=g;)if(b=g+c>>1,_>v[b][1])g=b+1;else{if(!(_<v[b][0]))return!0;c=b-1}return!1}(f,h)?0:f>=131072&&f<=196605||f>=196608&&f<=262141?2:1}}},5981:(l,o,a)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.WriteBuffer=void 0;const h=a(8460),u=a(844);class f extends u.Disposable{constructor(v){super(),this._action=v,this._writeBuffer=[],this._callbacks=[],this._pendingData=0,this._bufferOffset=0,this._isSyncWriting=!1,this._syncCalls=0,this._didUserInput=!1,this._onWriteParsed=this.register(new h.EventEmitter),this.onWriteParsed=this._onWriteParsed.event}handleUserInput(){this._didUserInput=!0}writeSync(v,b){if(b!==void 0&&this._syncCalls>b)return void(this._syncCalls=0);if(this._pendingData+=v.length,this._writeBuffer.push(v),this._callbacks.push(void 0),this._syncCalls++,this._isSyncWriting)return;let g;for(this._isSyncWriting=!0;g=this._writeBuffer.shift();){this._action(g);const c=this._callbacks.shift();c&&c()}this._pendingData=0,this._bufferOffset=2147483647,this._isSyncWriting=!1,this._syncCalls=0}write(v,b){if(this._pendingData>5e7)throw new Error("write data discarded, use flow control to avoid losing data");if(!this._writeBuffer.length){if(this._bufferOffset=0,this._didUserInput)return this._didUserInput=!1,this._pendingData+=v.length,this._writeBuffer.push(v),this._callbacks.push(b),void this._innerWrite();setTimeout(()=>this._innerWrite())}this._pendingData+=v.length,this._writeBuffer.push(v),this._callbacks.push(b)}_innerWrite(v=0,b=!0){const g=v||Date.now();for(;this._writeBuffer.length>this._bufferOffset;){const c=this._writeBuffer[this._bufferOffset],d=this._action(c,b);if(d){const p=y=>Date.now()-g>=12?setTimeout(()=>this._innerWrite(0,y)):this._innerWrite(g,y);return void d.catch(y=>(queueMicrotask(()=>{throw y}),Promise.resolve(!1))).then(p)}const m=this._callbacks[this._bufferOffset];if(m&&m(),this._bufferOffset++,this._pendingData-=c.length,Date.now()-g>=12)break}this._writeBuffer.length>this._bufferOffset?(this._bufferOffset>50&&(this._writeBuffer=this._writeBuffer.slice(this._bufferOffset),this._callbacks=this._callbacks.slice(this._bufferOffset),this._bufferOffset=0),setTimeout(()=>this._innerWrite())):(this._writeBuffer.length=0,this._callbacks.length=0,this._pendingData=0,this._bufferOffset=0),this._onWriteParsed.fire()}}o.WriteBuffer=f},5941:(l,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.toRgbString=o.parseColor=void 0;const a=/^([\da-f])\/([\da-f])\/([\da-f])$|^([\da-f]{2})\/([\da-f]{2})\/([\da-f]{2})$|^([\da-f]{3})\/([\da-f]{3})\/([\da-f]{3})$|^([\da-f]{4})\/([\da-f]{4})\/([\da-f]{4})$/,h=/^[\da-f]+$/;function u(f,_){const v=f.toString(16),b=v.length<2?"0"+v:v;switch(_){case 4:return v[0];case 8:return b;case 12:return(b+b).slice(0,3);default:return b+b}}o.parseColor=function(f){if(!f)return;let _=f.toLowerCase();if(_.indexOf("rgb:")===0){_=_.slice(4);const v=a.exec(_);if(v){const b=v[1]?15:v[4]?255:v[7]?4095:65535;return[Math.round(parseInt(v[1]||v[4]||v[7]||v[10],16)/b*255),Math.round(parseInt(v[2]||v[5]||v[8]||v[11],16)/b*255),Math.round(parseInt(v[3]||v[6]||v[9]||v[12],16)/b*255)]}}else if(_.indexOf("#")===0&&(_=_.slice(1),h.exec(_)&&[3,6,9,12].includes(_.length))){const v=_.length/3,b=[0,0,0];for(let g=0;g<3;++g){const c=parseInt(_.slice(v*g,v*g+v),16);b[g]=v===1?c<<4:v===2?c:v===3?c>>4:c>>8}return b}},o.toRgbString=function(f,_=16){const[v,b,g]=f;return`rgb:${u(v,_)}/${u(b,_)}/${u(g,_)}`}},5770:(l,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.PAYLOAD_LIMIT=void 0,o.PAYLOAD_LIMIT=1e7},6351:(l,o,a)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.DcsHandler=o.DcsParser=void 0;const h=a(482),u=a(8742),f=a(5770),_=[];o.DcsParser=class{constructor(){this._handlers=Object.create(null),this._active=_,this._ident=0,this._handlerFb=()=>{},this._stack={paused:!1,loopPosition:0,fallThrough:!1}}dispose(){this._handlers=Object.create(null),this._handlerFb=()=>{},this._active=_}registerHandler(b,g){this._handlers[b]===void 0&&(this._handlers[b]=[]);const c=this._handlers[b];return c.push(g),{dispose:()=>{const d=c.indexOf(g);d!==-1&&c.splice(d,1)}}}clearHandler(b){this._handlers[b]&&delete this._handlers[b]}setHandlerFallback(b){this._handlerFb=b}reset(){if(this._active.length)for(let b=this._stack.paused?this._stack.loopPosition-1:this._active.length-1;b>=0;--b)this._active[b].unhook(!1);this._stack.paused=!1,this._active=_,this._ident=0}hook(b,g){if(this.reset(),this._ident=b,this._active=this._handlers[b]||_,this._active.length)for(let c=this._active.length-1;c>=0;c--)this._active[c].hook(g);else this._handlerFb(this._ident,"HOOK",g)}put(b,g,c){if(this._active.length)for(let d=this._active.length-1;d>=0;d--)this._active[d].put(b,g,c);else this._handlerFb(this._ident,"PUT",(0,h.utf32ToString)(b,g,c))}unhook(b,g=!0){if(this._active.length){let c=!1,d=this._active.length-1,m=!1;if(this._stack.paused&&(d=this._stack.loopPosition-1,c=g,m=this._stack.fallThrough,this._stack.paused=!1),!m&&c===!1){for(;d>=0&&(c=this._active[d].unhook(b),c!==!0);d--)if(c instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=d,this._stack.fallThrough=!1,c;d--}for(;d>=0;d--)if(c=this._active[d].unhook(!1),c instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=d,this._stack.fallThrough=!0,c}else this._handlerFb(this._ident,"UNHOOK",b);this._active=_,this._ident=0}};const v=new u.Params;v.addParam(0),o.DcsHandler=class{constructor(b){this._handler=b,this._data="",this._params=v,this._hitLimit=!1}hook(b){this._params=b.length>1||b.params[0]?b.clone():v,this._data="",this._hitLimit=!1}put(b,g,c){this._hitLimit||(this._data+=(0,h.utf32ToString)(b,g,c),this._data.length>f.PAYLOAD_LIMIT&&(this._data="",this._hitLimit=!0))}unhook(b){let g=!1;if(this._hitLimit)g=!1;else if(b&&(g=this._handler(this._data,this._params),g instanceof Promise))return g.then(c=>(this._params=v,this._data="",this._hitLimit=!1,c));return this._params=v,this._data="",this._hitLimit=!1,g}}},2015:(l,o,a)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.EscapeSequenceParser=o.VT500_TRANSITION_TABLE=o.TransitionTable=void 0;const h=a(844),u=a(8742),f=a(6242),_=a(6351);class v{constructor(d){this.table=new Uint8Array(d)}setDefault(d,m){this.table.fill(d<<4|m)}add(d,m,p,y){this.table[m<<8|d]=p<<4|y}addMany(d,m,p,y){for(let S=0;S<d.length;S++)this.table[m<<8|d[S]]=p<<4|y}}o.TransitionTable=v;const b=160;o.VT500_TRANSITION_TABLE=function(){const c=new v(4095),d=Array.apply(null,Array(256)).map((k,w)=>w),m=(k,w)=>d.slice(k,w),p=m(32,127),y=m(0,24);y.push(25),y.push.apply(y,m(28,32));const S=m(0,14);let E;for(E in c.setDefault(1,0),c.addMany(p,0,2,0),S)c.addMany([24,26,153,154],E,3,0),c.addMany(m(128,144),E,3,0),c.addMany(m(144,152),E,3,0),c.add(156,E,0,0),c.add(27,E,11,1),c.add(157,E,4,8),c.addMany([152,158,159],E,0,7),c.add(155,E,11,3),c.add(144,E,11,9);return c.addMany(y,0,3,0),c.addMany(y,1,3,1),c.add(127,1,0,1),c.addMany(y,8,0,8),c.addMany(y,3,3,3),c.add(127,3,0,3),c.addMany(y,4,3,4),c.add(127,4,0,4),c.addMany(y,6,3,6),c.addMany(y,5,3,5),c.add(127,5,0,5),c.addMany(y,2,3,2),c.add(127,2,0,2),c.add(93,1,4,8),c.addMany(p,8,5,8),c.add(127,8,5,8),c.addMany([156,27,24,26,7],8,6,0),c.addMany(m(28,32),8,0,8),c.addMany([88,94,95],1,0,7),c.addMany(p,7,0,7),c.addMany(y,7,0,7),c.add(156,7,0,0),c.add(127,7,0,7),c.add(91,1,11,3),c.addMany(m(64,127),3,7,0),c.addMany(m(48,60),3,8,4),c.addMany([60,61,62,63],3,9,4),c.addMany(m(48,60),4,8,4),c.addMany(m(64,127),4,7,0),c.addMany([60,61,62,63],4,0,6),c.addMany(m(32,64),6,0,6),c.add(127,6,0,6),c.addMany(m(64,127),6,0,0),c.addMany(m(32,48),3,9,5),c.addMany(m(32,48),5,9,5),c.addMany(m(48,64),5,0,6),c.addMany(m(64,127),5,7,0),c.addMany(m(32,48),4,9,5),c.addMany(m(32,48),1,9,2),c.addMany(m(32,48),2,9,2),c.addMany(m(48,127),2,10,0),c.addMany(m(48,80),1,10,0),c.addMany(m(81,88),1,10,0),c.addMany([89,90,92],1,10,0),c.addMany(m(96,127),1,10,0),c.add(80,1,11,9),c.addMany(y,9,0,9),c.add(127,9,0,9),c.addMany(m(28,32),9,0,9),c.addMany(m(32,48),9,9,12),c.addMany(m(48,60),9,8,10),c.addMany([60,61,62,63],9,9,10),c.addMany(y,11,0,11),c.addMany(m(32,128),11,0,11),c.addMany(m(28,32),11,0,11),c.addMany(y,10,0,10),c.add(127,10,0,10),c.addMany(m(28,32),10,0,10),c.addMany(m(48,60),10,8,10),c.addMany([60,61,62,63],10,0,11),c.addMany(m(32,48),10,9,12),c.addMany(y,12,0,12),c.add(127,12,0,12),c.addMany(m(28,32),12,0,12),c.addMany(m(32,48),12,9,12),c.addMany(m(48,64),12,0,11),c.addMany(m(64,127),12,12,13),c.addMany(m(64,127),10,12,13),c.addMany(m(64,127),9,12,13),c.addMany(y,13,13,13),c.addMany(p,13,13,13),c.add(127,13,0,13),c.addMany([27,156,24,26],13,14,0),c.add(b,0,2,0),c.add(b,8,5,8),c.add(b,6,0,6),c.add(b,11,0,11),c.add(b,13,13,13),c}();class g extends h.Disposable{constructor(d=o.VT500_TRANSITION_TABLE){super(),this._transitions=d,this._parseStack={state:0,handlers:[],handlerPos:0,transition:0,chunkPos:0},this.initialState=0,this.currentState=this.initialState,this._params=new u.Params,this._params.addParam(0),this._collect=0,this.precedingCodepoint=0,this._printHandlerFb=(m,p,y)=>{},this._executeHandlerFb=m=>{},this._csiHandlerFb=(m,p)=>{},this._escHandlerFb=m=>{},this._errorHandlerFb=m=>m,this._printHandler=this._printHandlerFb,this._executeHandlers=Object.create(null),this._csiHandlers=Object.create(null),this._escHandlers=Object.create(null),this.register((0,h.toDisposable)(()=>{this._csiHandlers=Object.create(null),this._executeHandlers=Object.create(null),this._escHandlers=Object.create(null)})),this._oscParser=this.register(new f.OscParser),this._dcsParser=this.register(new _.DcsParser),this._errorHandler=this._errorHandlerFb,this.registerEscHandler({final:"\\"},()=>!0)}_identifier(d,m=[64,126]){let p=0;if(d.prefix){if(d.prefix.length>1)throw new Error("only one byte as prefix supported");if(p=d.prefix.charCodeAt(0),p&&60>p||p>63)throw new Error("prefix must be in range 0x3c .. 0x3f")}if(d.intermediates){if(d.intermediates.length>2)throw new Error("only two bytes as intermediates are supported");for(let S=0;S<d.intermediates.length;++S){const E=d.intermediates.charCodeAt(S);if(32>E||E>47)throw new Error("intermediate must be in range 0x20 .. 0x2f");p<<=8,p|=E}}if(d.final.length!==1)throw new Error("final must be a single byte");const y=d.final.charCodeAt(0);if(m[0]>y||y>m[1])throw new Error(`final must be in range ${m[0]} .. ${m[1]}`);return p<<=8,p|=y,p}identToString(d){const m=[];for(;d;)m.push(String.fromCharCode(255&d)),d>>=8;return m.reverse().join("")}setPrintHandler(d){this._printHandler=d}clearPrintHandler(){this._printHandler=this._printHandlerFb}registerEscHandler(d,m){const p=this._identifier(d,[48,126]);this._escHandlers[p]===void 0&&(this._escHandlers[p]=[]);const y=this._escHandlers[p];return y.push(m),{dispose:()=>{const S=y.indexOf(m);S!==-1&&y.splice(S,1)}}}clearEscHandler(d){this._escHandlers[this._identifier(d,[48,126])]&&delete this._escHandlers[this._identifier(d,[48,126])]}setEscHandlerFallback(d){this._escHandlerFb=d}setExecuteHandler(d,m){this._executeHandlers[d.charCodeAt(0)]=m}clearExecuteHandler(d){this._executeHandlers[d.charCodeAt(0)]&&delete this._executeHandlers[d.charCodeAt(0)]}setExecuteHandlerFallback(d){this._executeHandlerFb=d}registerCsiHandler(d,m){const p=this._identifier(d);this._csiHandlers[p]===void 0&&(this._csiHandlers[p]=[]);const y=this._csiHandlers[p];return y.push(m),{dispose:()=>{const S=y.indexOf(m);S!==-1&&y.splice(S,1)}}}clearCsiHandler(d){this._csiHandlers[this._identifier(d)]&&delete this._csiHandlers[this._identifier(d)]}setCsiHandlerFallback(d){this._csiHandlerFb=d}registerDcsHandler(d,m){return this._dcsParser.registerHandler(this._identifier(d),m)}clearDcsHandler(d){this._dcsParser.clearHandler(this._identifier(d))}setDcsHandlerFallback(d){this._dcsParser.setHandlerFallback(d)}registerOscHandler(d,m){return this._oscParser.registerHandler(d,m)}clearOscHandler(d){this._oscParser.clearHandler(d)}setOscHandlerFallback(d){this._oscParser.setHandlerFallback(d)}setErrorHandler(d){this._errorHandler=d}clearErrorHandler(){this._errorHandler=this._errorHandlerFb}reset(){this.currentState=this.initialState,this._oscParser.reset(),this._dcsParser.reset(),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingCodepoint=0,this._parseStack.state!==0&&(this._parseStack.state=2,this._parseStack.handlers=[])}_preserveStack(d,m,p,y,S){this._parseStack.state=d,this._parseStack.handlers=m,this._parseStack.handlerPos=p,this._parseStack.transition=y,this._parseStack.chunkPos=S}parse(d,m,p){let y,S=0,E=0,k=0;if(this._parseStack.state)if(this._parseStack.state===2)this._parseStack.state=0,k=this._parseStack.chunkPos+1;else{if(p===void 0||this._parseStack.state===1)throw this._parseStack.state=1,new Error("improper continuation due to previous async handler, giving up parsing");const w=this._parseStack.handlers;let C=this._parseStack.handlerPos-1;switch(this._parseStack.state){case 3:if(p===!1&&C>-1){for(;C>=0&&(y=w[C](this._params),y!==!0);C--)if(y instanceof Promise)return this._parseStack.handlerPos=C,y}this._parseStack.handlers=[];break;case 4:if(p===!1&&C>-1){for(;C>=0&&(y=w[C](),y!==!0);C--)if(y instanceof Promise)return this._parseStack.handlerPos=C,y}this._parseStack.handlers=[];break;case 6:if(S=d[this._parseStack.chunkPos],y=this._dcsParser.unhook(S!==24&&S!==26,p),y)return y;S===27&&(this._parseStack.transition|=1),this._params.reset(),this._params.addParam(0),this._collect=0;break;case 5:if(S=d[this._parseStack.chunkPos],y=this._oscParser.end(S!==24&&S!==26,p),y)return y;S===27&&(this._parseStack.transition|=1),this._params.reset(),this._params.addParam(0),this._collect=0}this._parseStack.state=0,k=this._parseStack.chunkPos+1,this.precedingCodepoint=0,this.currentState=15&this._parseStack.transition}for(let w=k;w<m;++w){switch(S=d[w],E=this._transitions.table[this.currentState<<8|(S<160?S:b)],E>>4){case 2:for(let T=w+1;;++T){if(T>=m||(S=d[T])<32||S>126&&S<b){this._printHandler(d,w,T),w=T-1;break}if(++T>=m||(S=d[T])<32||S>126&&S<b){this._printHandler(d,w,T),w=T-1;break}if(++T>=m||(S=d[T])<32||S>126&&S<b){this._printHandler(d,w,T),w=T-1;break}if(++T>=m||(S=d[T])<32||S>126&&S<b){this._printHandler(d,w,T),w=T-1;break}}break;case 3:this._executeHandlers[S]?this._executeHandlers[S]():this._executeHandlerFb(S),this.precedingCodepoint=0;break;case 0:break;case 1:if(this._errorHandler({position:w,code:S,currentState:this.currentState,collect:this._collect,params:this._params,abort:!1}).abort)return;break;case 7:const C=this._csiHandlers[this._collect<<8|S];let L=C?C.length-1:-1;for(;L>=0&&(y=C[L](this._params),y!==!0);L--)if(y instanceof Promise)return this._preserveStack(3,C,L,E,w),y;L<0&&this._csiHandlerFb(this._collect<<8|S,this._params),this.precedingCodepoint=0;break;case 8:do switch(S){case 59:this._params.addParam(0);break;case 58:this._params.addSubParam(-1);break;default:this._params.addDigit(S-48)}while(++w<m&&(S=d[w])>47&&S<60);w--;break;case 9:this._collect<<=8,this._collect|=S;break;case 10:const R=this._escHandlers[this._collect<<8|S];let O=R?R.length-1:-1;for(;O>=0&&(y=R[O](),y!==!0);O--)if(y instanceof Promise)return this._preserveStack(4,R,O,E,w),y;O<0&&this._escHandlerFb(this._collect<<8|S),this.precedingCodepoint=0;break;case 11:this._params.reset(),this._params.addParam(0),this._collect=0;break;case 12:this._dcsParser.hook(this._collect<<8|S,this._params);break;case 13:for(let T=w+1;;++T)if(T>=m||(S=d[T])===24||S===26||S===27||S>127&&S<b){this._dcsParser.put(d,w,T),w=T-1;break}break;case 14:if(y=this._dcsParser.unhook(S!==24&&S!==26),y)return this._preserveStack(6,[],0,E,w),y;S===27&&(E|=1),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingCodepoint=0;break;case 4:this._oscParser.start();break;case 5:for(let T=w+1;;T++)if(T>=m||(S=d[T])<32||S>127&&S<b){this._oscParser.put(d,w,T),w=T-1;break}break;case 6:if(y=this._oscParser.end(S!==24&&S!==26),y)return this._preserveStack(5,[],0,E,w),y;S===27&&(E|=1),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingCodepoint=0}this.currentState=15&E}}}o.EscapeSequenceParser=g},6242:(l,o,a)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.OscHandler=o.OscParser=void 0;const h=a(5770),u=a(482),f=[];o.OscParser=class{constructor(){this._state=0,this._active=f,this._id=-1,this._handlers=Object.create(null),this._handlerFb=()=>{},this._stack={paused:!1,loopPosition:0,fallThrough:!1}}registerHandler(_,v){this._handlers[_]===void 0&&(this._handlers[_]=[]);const b=this._handlers[_];return b.push(v),{dispose:()=>{const g=b.indexOf(v);g!==-1&&b.splice(g,1)}}}clearHandler(_){this._handlers[_]&&delete this._handlers[_]}setHandlerFallback(_){this._handlerFb=_}dispose(){this._handlers=Object.create(null),this._handlerFb=()=>{},this._active=f}reset(){if(this._state===2)for(let _=this._stack.paused?this._stack.loopPosition-1:this._active.length-1;_>=0;--_)this._active[_].end(!1);this._stack.paused=!1,this._active=f,this._id=-1,this._state=0}_start(){if(this._active=this._handlers[this._id]||f,this._active.length)for(let _=this._active.length-1;_>=0;_--)this._active[_].start();else this._handlerFb(this._id,"START")}_put(_,v,b){if(this._active.length)for(let g=this._active.length-1;g>=0;g--)this._active[g].put(_,v,b);else this._handlerFb(this._id,"PUT",(0,u.utf32ToString)(_,v,b))}start(){this.reset(),this._state=1}put(_,v,b){if(this._state!==3){if(this._state===1)for(;v<b;){const g=_[v++];if(g===59){this._state=2,this._start();break}if(g<48||57<g)return void(this._state=3);this._id===-1&&(this._id=0),this._id=10*this._id+g-48}this._state===2&&b-v>0&&this._put(_,v,b)}}end(_,v=!0){if(this._state!==0){if(this._state!==3)if(this._state===1&&this._start(),this._active.length){let b=!1,g=this._active.length-1,c=!1;if(this._stack.paused&&(g=this._stack.loopPosition-1,b=v,c=this._stack.fallThrough,this._stack.paused=!1),!c&&b===!1){for(;g>=0&&(b=this._active[g].end(_),b!==!0);g--)if(b instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=g,this._stack.fallThrough=!1,b;g--}for(;g>=0;g--)if(b=this._active[g].end(!1),b instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=g,this._stack.fallThrough=!0,b}else this._handlerFb(this._id,"END",_);this._active=f,this._id=-1,this._state=0}}},o.OscHandler=class{constructor(_){this._handler=_,this._data="",this._hitLimit=!1}start(){this._data="",this._hitLimit=!1}put(_,v,b){this._hitLimit||(this._data+=(0,u.utf32ToString)(_,v,b),this._data.length>h.PAYLOAD_LIMIT&&(this._data="",this._hitLimit=!0))}end(_){let v=!1;if(this._hitLimit)v=!1;else if(_&&(v=this._handler(this._data),v instanceof Promise))return v.then(b=>(this._data="",this._hitLimit=!1,b));return this._data="",this._hitLimit=!1,v}}},8742:(l,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.Params=void 0;const a=2147483647;class h{static fromArray(f){const _=new h;if(!f.length)return _;for(let v=Array.isArray(f[0])?1:0;v<f.length;++v){const b=f[v];if(Array.isArray(b))for(let g=0;g<b.length;++g)_.addSubParam(b[g]);else _.addParam(b)}return _}constructor(f=32,_=32){if(this.maxLength=f,this.maxSubParamsLength=_,_>256)throw new Error("maxSubParamsLength must not be greater than 256");this.params=new Int32Array(f),this.length=0,this._subParams=new Int32Array(_),this._subParamsLength=0,this._subParamsIdx=new Uint16Array(f),this._rejectDigits=!1,this._rejectSubDigits=!1,this._digitIsSub=!1}clone(){const f=new h(this.maxLength,this.maxSubParamsLength);return f.params.set(this.params),f.length=this.length,f._subParams.set(this._subParams),f._subParamsLength=this._subParamsLength,f._subParamsIdx.set(this._subParamsIdx),f._rejectDigits=this._rejectDigits,f._rejectSubDigits=this._rejectSubDigits,f._digitIsSub=this._digitIsSub,f}toArray(){const f=[];for(let _=0;_<this.length;++_){f.push(this.params[_]);const v=this._subParamsIdx[_]>>8,b=255&this._subParamsIdx[_];b-v>0&&f.push(Array.prototype.slice.call(this._subParams,v,b))}return f}reset(){this.length=0,this._subParamsLength=0,this._rejectDigits=!1,this._rejectSubDigits=!1,this._digitIsSub=!1}addParam(f){if(this._digitIsSub=!1,this.length>=this.maxLength)this._rejectDigits=!0;else{if(f<-1)throw new Error("values lesser than -1 are not allowed");this._subParamsIdx[this.length]=this._subParamsLength<<8|this._subParamsLength,this.params[this.length++]=f>a?a:f}}addSubParam(f){if(this._digitIsSub=!0,this.length)if(this._rejectDigits||this._subParamsLength>=this.maxSubParamsLength)this._rejectSubDigits=!0;else{if(f<-1)throw new Error("values lesser than -1 are not allowed");this._subParams[this._subParamsLength++]=f>a?a:f,this._subParamsIdx[this.length-1]++}}hasSubParams(f){return(255&this._subParamsIdx[f])-(this._subParamsIdx[f]>>8)>0}getSubParams(f){const _=this._subParamsIdx[f]>>8,v=255&this._subParamsIdx[f];return v-_>0?this._subParams.subarray(_,v):null}getSubParamsAll(){const f={};for(let _=0;_<this.length;++_){const v=this._subParamsIdx[_]>>8,b=255&this._subParamsIdx[_];b-v>0&&(f[_]=this._subParams.slice(v,b))}return f}addDigit(f){let _;if(this._rejectDigits||!(_=this._digitIsSub?this._subParamsLength:this.length)||this._digitIsSub&&this._rejectSubDigits)return;const v=this._digitIsSub?this._subParams:this.params,b=v[_-1];v[_-1]=~b?Math.min(10*b+f,a):f}}o.Params=h},5741:(l,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.AddonManager=void 0,o.AddonManager=class{constructor(){this._addons=[]}dispose(){for(let a=this._addons.length-1;a>=0;a--)this._addons[a].instance.dispose()}loadAddon(a,h){const u={instance:h,dispose:h.dispose,isDisposed:!1};this._addons.push(u),h.dispose=()=>this._wrappedAddonDispose(u),h.activate(a)}_wrappedAddonDispose(a){if(a.isDisposed)return;let h=-1;for(let u=0;u<this._addons.length;u++)if(this._addons[u]===a){h=u;break}if(h===-1)throw new Error("Could not dispose an addon that has not been loaded");a.isDisposed=!0,a.dispose.apply(a.instance),this._addons.splice(h,1)}}},8771:(l,o,a)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.BufferApiView=void 0;const h=a(3785),u=a(511);o.BufferApiView=class{constructor(f,_){this._buffer=f,this.type=_}init(f){return this._buffer=f,this}get cursorY(){return this._buffer.y}get cursorX(){return this._buffer.x}get viewportY(){return this._buffer.ydisp}get baseY(){return this._buffer.ybase}get length(){return this._buffer.lines.length}getLine(f){const _=this._buffer.lines.get(f);if(_)return new h.BufferLineApiView(_)}getNullCell(){return new u.CellData}}},3785:(l,o,a)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.BufferLineApiView=void 0;const h=a(511);o.BufferLineApiView=class{constructor(u){this._line=u}get isWrapped(){return this._line.isWrapped}get length(){return this._line.length}getCell(u,f){if(!(u<0||u>=this._line.length))return f?(this._line.loadCell(u,f),f):this._line.loadCell(u,new h.CellData)}translateToString(u,f,_){return this._line.translateToString(u,f,_)}}},8285:(l,o,a)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.BufferNamespaceApi=void 0;const h=a(8771),u=a(8460),f=a(844);class _ extends f.Disposable{constructor(b){super(),this._core=b,this._onBufferChange=this.register(new u.EventEmitter),this.onBufferChange=this._onBufferChange.event,this._normal=new h.BufferApiView(this._core.buffers.normal,"normal"),this._alternate=new h.BufferApiView(this._core.buffers.alt,"alternate"),this._core.buffers.onBufferActivate(()=>this._onBufferChange.fire(this.active))}get active(){if(this._core.buffers.active===this._core.buffers.normal)return this.normal;if(this._core.buffers.active===this._core.buffers.alt)return this.alternate;throw new Error("Active buffer is neither normal nor alternate")}get normal(){return this._normal.init(this._core.buffers.normal)}get alternate(){return this._alternate.init(this._core.buffers.alt)}}o.BufferNamespaceApi=_},7975:(l,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.ParserApi=void 0,o.ParserApi=class{constructor(a){this._core=a}registerCsiHandler(a,h){return this._core.registerCsiHandler(a,u=>h(u.toArray()))}addCsiHandler(a,h){return this.registerCsiHandler(a,h)}registerDcsHandler(a,h){return this._core.registerDcsHandler(a,(u,f)=>h(u,f.toArray()))}addDcsHandler(a,h){return this.registerDcsHandler(a,h)}registerEscHandler(a,h){return this._core.registerEscHandler(a,h)}addEscHandler(a,h){return this.registerEscHandler(a,h)}registerOscHandler(a,h){return this._core.registerOscHandler(a,h)}addOscHandler(a,h){return this.registerOscHandler(a,h)}}},7090:(l,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.UnicodeApi=void 0,o.UnicodeApi=class{constructor(a){this._core=a}register(a){this._core.unicodeService.register(a)}get versions(){return this._core.unicodeService.versions}get activeVersion(){return this._core.unicodeService.activeVersion}set activeVersion(a){this._core.unicodeService.activeVersion=a}}},744:function(l,o,a){var h=this&&this.__decorate||function(c,d,m,p){var y,S=arguments.length,E=S<3?d:p===null?p=Object.getOwnPropertyDescriptor(d,m):p;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")E=Reflect.decorate(c,d,m,p);else for(var k=c.length-1;k>=0;k--)(y=c[k])&&(E=(S<3?y(E):S>3?y(d,m,E):y(d,m))||E);return S>3&&E&&Object.defineProperty(d,m,E),E},u=this&&this.__param||function(c,d){return function(m,p){d(m,p,c)}};Object.defineProperty(o,"__esModule",{value:!0}),o.BufferService=o.MINIMUM_ROWS=o.MINIMUM_COLS=void 0;const f=a(8460),_=a(844),v=a(5295),b=a(2585);o.MINIMUM_COLS=2,o.MINIMUM_ROWS=1;let g=o.BufferService=class extends _.Disposable{get buffer(){return this.buffers.active}constructor(c){super(),this.isUserScrolling=!1,this._onResize=this.register(new f.EventEmitter),this.onResize=this._onResize.event,this._onScroll=this.register(new f.EventEmitter),this.onScroll=this._onScroll.event,this.cols=Math.max(c.rawOptions.cols||0,o.MINIMUM_COLS),this.rows=Math.max(c.rawOptions.rows||0,o.MINIMUM_ROWS),this.buffers=this.register(new v.BufferSet(c,this))}resize(c,d){this.cols=c,this.rows=d,this.buffers.resize(c,d),this._onResize.fire({cols:c,rows:d})}reset(){this.buffers.reset(),this.isUserScrolling=!1}scroll(c,d=!1){const m=this.buffer;let p;p=this._cachedBlankLine,p&&p.length===this.cols&&p.getFg(0)===c.fg&&p.getBg(0)===c.bg||(p=m.getBlankLine(c,d),this._cachedBlankLine=p),p.isWrapped=d;const y=m.ybase+m.scrollTop,S=m.ybase+m.scrollBottom;if(m.scrollTop===0){const E=m.lines.isFull;S===m.lines.length-1?E?m.lines.recycle().copyFrom(p):m.lines.push(p.clone()):m.lines.splice(S+1,0,p.clone()),E?this.isUserScrolling&&(m.ydisp=Math.max(m.ydisp-1,0)):(m.ybase++,this.isUserScrolling||m.ydisp++)}else{const E=S-y+1;m.lines.shiftElements(y+1,E-1,-1),m.lines.set(S,p.clone())}this.isUserScrolling||(m.ydisp=m.ybase),this._onScroll.fire(m.ydisp)}scrollLines(c,d,m){const p=this.buffer;if(c<0){if(p.ydisp===0)return;this.isUserScrolling=!0}else c+p.ydisp>=p.ybase&&(this.isUserScrolling=!1);const y=p.ydisp;p.ydisp=Math.max(Math.min(p.ydisp+c,p.ybase),0),y!==p.ydisp&&(d||this._onScroll.fire(p.ydisp))}};o.BufferService=g=h([u(0,b.IOptionsService)],g)},7994:(l,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.CharsetService=void 0,o.CharsetService=class{constructor(){this.glevel=0,this._charsets=[]}reset(){this.charset=void 0,this._charsets=[],this.glevel=0}setgLevel(a){this.glevel=a,this.charset=this._charsets[a]}setgCharset(a,h){this._charsets[a]=h,this.glevel===a&&(this.charset=h)}}},1753:function(l,o,a){var h=this&&this.__decorate||function(p,y,S,E){var k,w=arguments.length,C=w<3?y:E===null?E=Object.getOwnPropertyDescriptor(y,S):E;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")C=Reflect.decorate(p,y,S,E);else for(var L=p.length-1;L>=0;L--)(k=p[L])&&(C=(w<3?k(C):w>3?k(y,S,C):k(y,S))||C);return w>3&&C&&Object.defineProperty(y,S,C),C},u=this&&this.__param||function(p,y){return function(S,E){y(S,E,p)}};Object.defineProperty(o,"__esModule",{value:!0}),o.CoreMouseService=void 0;const f=a(2585),_=a(8460),v=a(844),b={NONE:{events:0,restrict:()=>!1},X10:{events:1,restrict:p=>p.button!==4&&p.action===1&&(p.ctrl=!1,p.alt=!1,p.shift=!1,!0)},VT200:{events:19,restrict:p=>p.action!==32},DRAG:{events:23,restrict:p=>p.action!==32||p.button!==3},ANY:{events:31,restrict:p=>!0}};function g(p,y){let S=(p.ctrl?16:0)|(p.shift?4:0)|(p.alt?8:0);return p.button===4?(S|=64,S|=p.action):(S|=3&p.button,4&p.button&&(S|=64),8&p.button&&(S|=128),p.action===32?S|=32:p.action!==0||y||(S|=3)),S}const c=String.fromCharCode,d={DEFAULT:p=>{const y=[g(p,!1)+32,p.col+32,p.row+32];return y[0]>255||y[1]>255||y[2]>255?"":`\x1B[M${c(y[0])}${c(y[1])}${c(y[2])}`},SGR:p=>{const y=p.action===0&&p.button!==4?"m":"M";return`\x1B[<${g(p,!0)};${p.col};${p.row}${y}`},SGR_PIXELS:p=>{const y=p.action===0&&p.button!==4?"m":"M";return`\x1B[<${g(p,!0)};${p.x};${p.y}${y}`}};let m=o.CoreMouseService=class extends v.Disposable{constructor(p,y){super(),this._bufferService=p,this._coreService=y,this._protocols={},this._encodings={},this._activeProtocol="",this._activeEncoding="",this._lastEvent=null,this._onProtocolChange=this.register(new _.EventEmitter),this.onProtocolChange=this._onProtocolChange.event;for(const S of Object.keys(b))this.addProtocol(S,b[S]);for(const S of Object.keys(d))this.addEncoding(S,d[S]);this.reset()}addProtocol(p,y){this._protocols[p]=y}addEncoding(p,y){this._encodings[p]=y}get activeProtocol(){return this._activeProtocol}get areMouseEventsActive(){return this._protocols[this._activeProtocol].events!==0}set activeProtocol(p){if(!this._protocols[p])throw new Error(`unknown protocol "${p}"`);this._activeProtocol=p,this._onProtocolChange.fire(this._protocols[p].events)}get activeEncoding(){return this._activeEncoding}set activeEncoding(p){if(!this._encodings[p])throw new Error(`unknown encoding "${p}"`);this._activeEncoding=p}reset(){this.activeProtocol="NONE",this.activeEncoding="DEFAULT",this._lastEvent=null}triggerMouseEvent(p){if(p.col<0||p.col>=this._bufferService.cols||p.row<0||p.row>=this._bufferService.rows||p.button===4&&p.action===32||p.button===3&&p.action!==32||p.button!==4&&(p.action===2||p.action===3)||(p.col++,p.row++,p.action===32&&this._lastEvent&&this._equalEvents(this._lastEvent,p,this._activeEncoding==="SGR_PIXELS"))||!this._protocols[this._activeProtocol].restrict(p))return!1;const y=this._encodings[this._activeEncoding](p);return y&&(this._activeEncoding==="DEFAULT"?this._coreService.triggerBinaryEvent(y):this._coreService.triggerDataEvent(y,!0)),this._lastEvent=p,!0}explainEvents(p){return{down:!!(1&p),up:!!(2&p),drag:!!(4&p),move:!!(8&p),wheel:!!(16&p)}}_equalEvents(p,y,S){if(S){if(p.x!==y.x||p.y!==y.y)return!1}else if(p.col!==y.col||p.row!==y.row)return!1;return p.button===y.button&&p.action===y.action&&p.ctrl===y.ctrl&&p.alt===y.alt&&p.shift===y.shift}};o.CoreMouseService=m=h([u(0,f.IBufferService),u(1,f.ICoreService)],m)},6975:function(l,o,a){var h=this&&this.__decorate||function(m,p,y,S){var E,k=arguments.length,w=k<3?p:S===null?S=Object.getOwnPropertyDescriptor(p,y):S;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")w=Reflect.decorate(m,p,y,S);else for(var C=m.length-1;C>=0;C--)(E=m[C])&&(w=(k<3?E(w):k>3?E(p,y,w):E(p,y))||w);return k>3&&w&&Object.defineProperty(p,y,w),w},u=this&&this.__param||function(m,p){return function(y,S){p(y,S,m)}};Object.defineProperty(o,"__esModule",{value:!0}),o.CoreService=void 0;const f=a(1439),_=a(8460),v=a(844),b=a(2585),g=Object.freeze({insertMode:!1}),c=Object.freeze({applicationCursorKeys:!1,applicationKeypad:!1,bracketedPasteMode:!1,origin:!1,reverseWraparound:!1,sendFocus:!1,wraparound:!0});let d=o.CoreService=class extends v.Disposable{constructor(m,p,y){super(),this._bufferService=m,this._logService=p,this._optionsService=y,this.isCursorInitialized=!1,this.isCursorHidden=!1,this._onData=this.register(new _.EventEmitter),this.onData=this._onData.event,this._onUserInput=this.register(new _.EventEmitter),this.onUserInput=this._onUserInput.event,this._onBinary=this.register(new _.EventEmitter),this.onBinary=this._onBinary.event,this._onRequestScrollToBottom=this.register(new _.EventEmitter),this.onRequestScrollToBottom=this._onRequestScrollToBottom.event,this.modes=(0,f.clone)(g),this.decPrivateModes=(0,f.clone)(c)}reset(){this.modes=(0,f.clone)(g),this.decPrivateModes=(0,f.clone)(c)}triggerDataEvent(m,p=!1){if(this._optionsService.rawOptions.disableStdin)return;const y=this._bufferService.buffer;p&&this._optionsService.rawOptions.scrollOnUserInput&&y.ybase!==y.ydisp&&this._onRequestScrollToBottom.fire(),p&&this._onUserInput.fire(),this._logService.debug(`sending data "${m}"`,()=>m.split("").map(S=>S.charCodeAt(0))),this._onData.fire(m)}triggerBinaryEvent(m){this._optionsService.rawOptions.disableStdin||(this._logService.debug(`sending binary "${m}"`,()=>m.split("").map(p=>p.charCodeAt(0))),this._onBinary.fire(m))}};o.CoreService=d=h([u(0,b.IBufferService),u(1,b.ILogService),u(2,b.IOptionsService)],d)},9074:(l,o,a)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.DecorationService=void 0;const h=a(8055),u=a(8460),f=a(844),_=a(6106);let v=0,b=0;class g extends f.Disposable{get decorations(){return this._decorations.values()}constructor(){super(),this._decorations=new _.SortedList(m=>m==null?void 0:m.marker.line),this._onDecorationRegistered=this.register(new u.EventEmitter),this.onDecorationRegistered=this._onDecorationRegistered.event,this._onDecorationRemoved=this.register(new u.EventEmitter),this.onDecorationRemoved=this._onDecorationRemoved.event,this.register((0,f.toDisposable)(()=>this.reset()))}registerDecoration(m){if(m.marker.isDisposed)return;const p=new c(m);if(p){const y=p.marker.onDispose(()=>p.dispose());p.onDispose(()=>{p&&(this._decorations.delete(p)&&this._onDecorationRemoved.fire(p),y.dispose())}),this._decorations.insert(p),this._onDecorationRegistered.fire(p)}return p}reset(){for(const m of this._decorations.values())m.dispose();this._decorations.clear()}*getDecorationsAtCell(m,p,y){var S,E,k;let w=0,C=0;for(const L of this._decorations.getKeyIterator(p))w=(S=L.options.x)!==null&&S!==void 0?S:0,C=w+((E=L.options.width)!==null&&E!==void 0?E:1),m>=w&&m<C&&(!y||((k=L.options.layer)!==null&&k!==void 0?k:"bottom")===y)&&(yield L)}forEachDecorationAtCell(m,p,y,S){this._decorations.forEachByKey(p,E=>{var k,w,C;v=(k=E.options.x)!==null&&k!==void 0?k:0,b=v+((w=E.options.width)!==null&&w!==void 0?w:1),m>=v&&m<b&&(!y||((C=E.options.layer)!==null&&C!==void 0?C:"bottom")===y)&&S(E)})}}o.DecorationService=g;class c extends f.Disposable{get isDisposed(){return this._isDisposed}get backgroundColorRGB(){return this._cachedBg===null&&(this.options.backgroundColor?this._cachedBg=h.css.toColor(this.options.backgroundColor):this._cachedBg=void 0),this._cachedBg}get foregroundColorRGB(){return this._cachedFg===null&&(this.options.foregroundColor?this._cachedFg=h.css.toColor(this.options.foregroundColor):this._cachedFg=void 0),this._cachedFg}constructor(m){super(),this.options=m,this.onRenderEmitter=this.register(new u.EventEmitter),this.onRender=this.onRenderEmitter.event,this._onDispose=this.register(new u.EventEmitter),this.onDispose=this._onDispose.event,this._cachedBg=null,this._cachedFg=null,this.marker=m.marker,this.options.overviewRulerOptions&&!this.options.overviewRulerOptions.position&&(this.options.overviewRulerOptions.position="full")}dispose(){this._onDispose.fire(),super.dispose()}}},4348:(l,o,a)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.InstantiationService=o.ServiceCollection=void 0;const h=a(2585),u=a(8343);class f{constructor(...v){this._entries=new Map;for(const[b,g]of v)this.set(b,g)}set(v,b){const g=this._entries.get(v);return this._entries.set(v,b),g}forEach(v){for(const[b,g]of this._entries.entries())v(b,g)}has(v){return this._entries.has(v)}get(v){return this._entries.get(v)}}o.ServiceCollection=f,o.InstantiationService=class{constructor(){this._services=new f,this._services.set(h.IInstantiationService,this)}setService(_,v){this._services.set(_,v)}getService(_){return this._services.get(_)}createInstance(_,...v){const b=(0,u.getServiceDependencies)(_).sort((d,m)=>d.index-m.index),g=[];for(const d of b){const m=this._services.get(d.id);if(!m)throw new Error(`[createInstance] ${_.name} depends on UNKNOWN service ${d.id}.`);g.push(m)}const c=b.length>0?b[0].index:v.length;if(v.length!==c)throw new Error(`[createInstance] First service dependency of ${_.name} at position ${c+1} conflicts with ${v.length} static arguments`);return new _(...v,...g)}}},7866:function(l,o,a){var h=this&&this.__decorate||function(c,d,m,p){var y,S=arguments.length,E=S<3?d:p===null?p=Object.getOwnPropertyDescriptor(d,m):p;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")E=Reflect.decorate(c,d,m,p);else for(var k=c.length-1;k>=0;k--)(y=c[k])&&(E=(S<3?y(E):S>3?y(d,m,E):y(d,m))||E);return S>3&&E&&Object.defineProperty(d,m,E),E},u=this&&this.__param||function(c,d){return function(m,p){d(m,p,c)}};Object.defineProperty(o,"__esModule",{value:!0}),o.traceCall=o.setTraceLogger=o.LogService=void 0;const f=a(844),_=a(2585),v={trace:_.LogLevelEnum.TRACE,debug:_.LogLevelEnum.DEBUG,info:_.LogLevelEnum.INFO,warn:_.LogLevelEnum.WARN,error:_.LogLevelEnum.ERROR,off:_.LogLevelEnum.OFF};let b,g=o.LogService=class extends f.Disposable{get logLevel(){return this._logLevel}constructor(c){super(),this._optionsService=c,this._logLevel=_.LogLevelEnum.OFF,this._updateLogLevel(),this.register(this._optionsService.onSpecificOptionChange("logLevel",()=>this._updateLogLevel())),b=this}_updateLogLevel(){this._logLevel=v[this._optionsService.rawOptions.logLevel]}_evalLazyOptionalParams(c){for(let d=0;d<c.length;d++)typeof c[d]=="function"&&(c[d]=c[d]())}_log(c,d,m){this._evalLazyOptionalParams(m),c.call(console,(this._optionsService.options.logger?"":"xterm.js: ")+d,...m)}trace(c,...d){var m,p;this._logLevel<=_.LogLevelEnum.TRACE&&this._log((p=(m=this._optionsService.options.logger)===null||m===void 0?void 0:m.trace.bind(this._optionsService.options.logger))!==null&&p!==void 0?p:console.log,c,d)}debug(c,...d){var m,p;this._logLevel<=_.LogLevelEnum.DEBUG&&this._log((p=(m=this._optionsService.options.logger)===null||m===void 0?void 0:m.debug.bind(this._optionsService.options.logger))!==null&&p!==void 0?p:console.log,c,d)}info(c,...d){var m,p;this._logLevel<=_.LogLevelEnum.INFO&&this._log((p=(m=this._optionsService.options.logger)===null||m===void 0?void 0:m.info.bind(this._optionsService.options.logger))!==null&&p!==void 0?p:console.info,c,d)}warn(c,...d){var m,p;this._logLevel<=_.LogLevelEnum.WARN&&this._log((p=(m=this._optionsService.options.logger)===null||m===void 0?void 0:m.warn.bind(this._optionsService.options.logger))!==null&&p!==void 0?p:console.warn,c,d)}error(c,...d){var m,p;this._logLevel<=_.LogLevelEnum.ERROR&&this._log((p=(m=this._optionsService.options.logger)===null||m===void 0?void 0:m.error.bind(this._optionsService.options.logger))!==null&&p!==void 0?p:console.error,c,d)}};o.LogService=g=h([u(0,_.IOptionsService)],g),o.setTraceLogger=function(c){b=c},o.traceCall=function(c,d,m){if(typeof m.value!="function")throw new Error("not supported");const p=m.value;m.value=function(...y){if(b.logLevel!==_.LogLevelEnum.TRACE)return p.apply(this,y);b.trace(`GlyphRenderer#${p.name}(${y.map(E=>JSON.stringify(E)).join(", ")})`);const S=p.apply(this,y);return b.trace(`GlyphRenderer#${p.name} return`,S),S}}},7302:(l,o,a)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.OptionsService=o.DEFAULT_OPTIONS=void 0;const h=a(8460),u=a(844),f=a(6114);o.DEFAULT_OPTIONS={cols:80,rows:24,cursorBlink:!1,cursorStyle:"block",cursorWidth:1,cursorInactiveStyle:"outline",customGlyphs:!0,drawBoldTextInBrightColors:!0,fastScrollModifier:"alt",fastScrollSensitivity:5,fontFamily:"courier-new, courier, monospace",fontSize:15,fontWeight:"normal",fontWeightBold:"bold",ignoreBracketedPasteMode:!1,lineHeight:1,letterSpacing:0,linkHandler:null,logLevel:"info",logger:null,scrollback:1e3,scrollOnUserInput:!0,scrollSensitivity:1,screenReaderMode:!1,smoothScrollDuration:0,macOptionIsMeta:!1,macOptionClickForcesSelection:!1,minimumContrastRatio:1,disableStdin:!1,allowProposedApi:!1,allowTransparency:!1,tabStopWidth:8,theme:{},rightClickSelectsWord:f.isMac,windowOptions:{},windowsMode:!1,windowsPty:{},wordSeparator:" ()[]{}',\"`",altClickMovesCursor:!0,convertEol:!1,termName:"xterm",cancelEvents:!1,overviewRulerWidth:0};const _=["normal","bold","100","200","300","400","500","600","700","800","900"];class v extends u.Disposable{constructor(g){super(),this._onOptionChange=this.register(new h.EventEmitter),this.onOptionChange=this._onOptionChange.event;const c=Object.assign({},o.DEFAULT_OPTIONS);for(const d in g)if(d in c)try{const m=g[d];c[d]=this._sanitizeAndValidateOption(d,m)}catch(m){console.error(m)}this.rawOptions=c,this.options=Object.assign({},c),this._setupOptions()}onSpecificOptionChange(g,c){return this.onOptionChange(d=>{d===g&&c(this.rawOptions[g])})}onMultipleOptionChange(g,c){return this.onOptionChange(d=>{g.indexOf(d)!==-1&&c()})}_setupOptions(){const g=d=>{if(!(d in o.DEFAULT_OPTIONS))throw new Error(`No option with key "${d}"`);return this.rawOptions[d]},c=(d,m)=>{if(!(d in o.DEFAULT_OPTIONS))throw new Error(`No option with key "${d}"`);m=this._sanitizeAndValidateOption(d,m),this.rawOptions[d]!==m&&(this.rawOptions[d]=m,this._onOptionChange.fire(d))};for(const d in this.rawOptions){const m={get:g.bind(this,d),set:c.bind(this,d)};Object.defineProperty(this.options,d,m)}}_sanitizeAndValidateOption(g,c){switch(g){case"cursorStyle":if(c||(c=o.DEFAULT_OPTIONS[g]),!function(d){return d==="block"||d==="underline"||d==="bar"}(c))throw new Error(`"${c}" is not a valid value for ${g}`);break;case"wordSeparator":c||(c=o.DEFAULT_OPTIONS[g]);break;case"fontWeight":case"fontWeightBold":if(typeof c=="number"&&1<=c&&c<=1e3)break;c=_.includes(c)?c:o.DEFAULT_OPTIONS[g];break;case"cursorWidth":c=Math.floor(c);case"lineHeight":case"tabStopWidth":if(c<1)throw new Error(`${g} cannot be less than 1, value: ${c}`);break;case"minimumContrastRatio":c=Math.max(1,Math.min(21,Math.round(10*c)/10));break;case"scrollback":if((c=Math.min(c,4294967295))<0)throw new Error(`${g} cannot be less than 0, value: ${c}`);break;case"fastScrollSensitivity":case"scrollSensitivity":if(c<=0)throw new Error(`${g} cannot be less than or equal to 0, value: ${c}`);break;case"rows":case"cols":if(!c&&c!==0)throw new Error(`${g} must be numeric, value: ${c}`);break;case"windowsPty":c=c??{}}return c}}o.OptionsService=v},2660:function(l,o,a){var h=this&&this.__decorate||function(v,b,g,c){var d,m=arguments.length,p=m<3?b:c===null?c=Object.getOwnPropertyDescriptor(b,g):c;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")p=Reflect.decorate(v,b,g,c);else for(var y=v.length-1;y>=0;y--)(d=v[y])&&(p=(m<3?d(p):m>3?d(b,g,p):d(b,g))||p);return m>3&&p&&Object.defineProperty(b,g,p),p},u=this&&this.__param||function(v,b){return function(g,c){b(g,c,v)}};Object.defineProperty(o,"__esModule",{value:!0}),o.OscLinkService=void 0;const f=a(2585);let _=o.OscLinkService=class{constructor(v){this._bufferService=v,this._nextId=1,this._entriesWithId=new Map,this._dataByLinkId=new Map}registerLink(v){const b=this._bufferService.buffer;if(v.id===void 0){const y=b.addMarker(b.ybase+b.y),S={data:v,id:this._nextId++,lines:[y]};return y.onDispose(()=>this._removeMarkerFromLink(S,y)),this._dataByLinkId.set(S.id,S),S.id}const g=v,c=this._getEntryIdKey(g),d=this._entriesWithId.get(c);if(d)return this.addLineToLink(d.id,b.ybase+b.y),d.id;const m=b.addMarker(b.ybase+b.y),p={id:this._nextId++,key:this._getEntryIdKey(g),data:g,lines:[m]};return m.onDispose(()=>this._removeMarkerFromLink(p,m)),this._entriesWithId.set(p.key,p),this._dataByLinkId.set(p.id,p),p.id}addLineToLink(v,b){const g=this._dataByLinkId.get(v);if(g&&g.lines.every(c=>c.line!==b)){const c=this._bufferService.buffer.addMarker(b);g.lines.push(c),c.onDispose(()=>this._removeMarkerFromLink(g,c))}}getLinkData(v){var b;return(b=this._dataByLinkId.get(v))===null||b===void 0?void 0:b.data}_getEntryIdKey(v){return`${v.id};;${v.uri}`}_removeMarkerFromLink(v,b){const g=v.lines.indexOf(b);g!==-1&&(v.lines.splice(g,1),v.lines.length===0&&(v.data.id!==void 0&&this._entriesWithId.delete(v.key),this._dataByLinkId.delete(v.id)))}};o.OscLinkService=_=h([u(0,f.IBufferService)],_)},8343:(l,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.createDecorator=o.getServiceDependencies=o.serviceRegistry=void 0;const a="di$target",h="di$dependencies";o.serviceRegistry=new Map,o.getServiceDependencies=function(u){return u[h]||[]},o.createDecorator=function(u){if(o.serviceRegistry.has(u))return o.serviceRegistry.get(u);const f=function(_,v,b){if(arguments.length!==3)throw new Error("@IServiceName-decorator can only be used to decorate a parameter");(function(g,c,d){c[a]===c?c[h].push({id:g,index:d}):(c[h]=[{id:g,index:d}],c[a]=c)})(f,_,b)};return f.toString=()=>u,o.serviceRegistry.set(u,f),f}},2585:(l,o,a)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.IDecorationService=o.IUnicodeService=o.IOscLinkService=o.IOptionsService=o.ILogService=o.LogLevelEnum=o.IInstantiationService=o.ICharsetService=o.ICoreService=o.ICoreMouseService=o.IBufferService=void 0;const h=a(8343);var u;o.IBufferService=(0,h.createDecorator)("BufferService"),o.ICoreMouseService=(0,h.createDecorator)("CoreMouseService"),o.ICoreService=(0,h.createDecorator)("CoreService"),o.ICharsetService=(0,h.createDecorator)("CharsetService"),o.IInstantiationService=(0,h.createDecorator)("InstantiationService"),function(f){f[f.TRACE=0]="TRACE",f[f.DEBUG=1]="DEBUG",f[f.INFO=2]="INFO",f[f.WARN=3]="WARN",f[f.ERROR=4]="ERROR",f[f.OFF=5]="OFF"}(u||(o.LogLevelEnum=u={})),o.ILogService=(0,h.createDecorator)("LogService"),o.IOptionsService=(0,h.createDecorator)("OptionsService"),o.IOscLinkService=(0,h.createDecorator)("OscLinkService"),o.IUnicodeService=(0,h.createDecorator)("UnicodeService"),o.IDecorationService=(0,h.createDecorator)("DecorationService")},1480:(l,o,a)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.UnicodeService=void 0;const h=a(8460),u=a(225);o.UnicodeService=class{constructor(){this._providers=Object.create(null),this._active="",this._onChange=new h.EventEmitter,this.onChange=this._onChange.event;const f=new u.UnicodeV6;this.register(f),this._active=f.version,this._activeProvider=f}dispose(){this._onChange.dispose()}get versions(){return Object.keys(this._providers)}get activeVersion(){return this._active}set activeVersion(f){if(!this._providers[f])throw new Error(`unknown Unicode version "${f}"`);this._active=f,this._activeProvider=this._providers[f],this._onChange.fire(f)}register(f){this._providers[f.version]=f}wcwidth(f){return this._activeProvider.wcwidth(f)}getStringCellWidth(f){let _=0;const v=f.length;for(let b=0;b<v;++b){let g=f.charCodeAt(b);if(55296<=g&&g<=56319){if(++b>=v)return _+this.wcwidth(g);const c=f.charCodeAt(b);56320<=c&&c<=57343?g=1024*(g-55296)+c-56320+65536:_+=this.wcwidth(c)}_+=this.wcwidth(g)}return _}}}},s={};function r(l){var o=s[l];if(o!==void 0)return o.exports;var a=s[l]={exports:{}};return i[l].call(a.exports,a,a.exports,r),a.exports}var n={};return(()=>{var l=n;Object.defineProperty(l,"__esModule",{value:!0}),l.Terminal=void 0;const o=r(9042),a=r(3236),h=r(844),u=r(5741),f=r(8285),_=r(7975),v=r(7090),b=["cols","rows"];class g extends h.Disposable{constructor(d){super(),this._core=this.register(new a.Terminal(d)),this._addonManager=this.register(new u.AddonManager),this._publicOptions=Object.assign({},this._core.options);const m=y=>this._core.options[y],p=(y,S)=>{this._checkReadonlyOptions(y),this._core.options[y]=S};for(const y in this._core.options){const S={get:m.bind(this,y),set:p.bind(this,y)};Object.defineProperty(this._publicOptions,y,S)}}_checkReadonlyOptions(d){if(b.includes(d))throw new Error(`Option "${d}" can only be set in the constructor`)}_checkProposedApi(){if(!this._core.optionsService.rawOptions.allowProposedApi)throw new Error("You must set the allowProposedApi option to true to use proposed API")}get onBell(){return this._core.onBell}get onBinary(){return this._core.onBinary}get onCursorMove(){return this._core.onCursorMove}get onData(){return this._core.onData}get onKey(){return this._core.onKey}get onLineFeed(){return this._core.onLineFeed}get onRender(){return this._core.onRender}get onResize(){return this._core.onResize}get onScroll(){return this._core.onScroll}get onSelectionChange(){return this._core.onSelectionChange}get onTitleChange(){return this._core.onTitleChange}get onWriteParsed(){return this._core.onWriteParsed}get element(){return this._core.element}get parser(){return this._parser||(this._parser=new _.ParserApi(this._core)),this._parser}get unicode(){return this._checkProposedApi(),new v.UnicodeApi(this._core)}get textarea(){return this._core.textarea}get rows(){return this._core.rows}get cols(){return this._core.cols}get buffer(){return this._buffer||(this._buffer=this.register(new f.BufferNamespaceApi(this._core))),this._buffer}get markers(){return this._checkProposedApi(),this._core.markers}get modes(){const d=this._core.coreService.decPrivateModes;let m="none";switch(this._core.coreMouseService.activeProtocol){case"X10":m="x10";break;case"VT200":m="vt200";break;case"DRAG":m="drag";break;case"ANY":m="any"}return{applicationCursorKeysMode:d.applicationCursorKeys,applicationKeypadMode:d.applicationKeypad,bracketedPasteMode:d.bracketedPasteMode,insertMode:this._core.coreService.modes.insertMode,mouseTrackingMode:m,originMode:d.origin,reverseWraparoundMode:d.reverseWraparound,sendFocusMode:d.sendFocus,wraparoundMode:d.wraparound}}get options(){return this._publicOptions}set options(d){for(const m in d)this._publicOptions[m]=d[m]}blur(){this._core.blur()}focus(){this._core.focus()}resize(d,m){this._verifyIntegers(d,m),this._core.resize(d,m)}open(d){this._core.open(d)}attachCustomKeyEventHandler(d){this._core.attachCustomKeyEventHandler(d)}registerLinkProvider(d){return this._core.registerLinkProvider(d)}registerCharacterJoiner(d){return this._checkProposedApi(),this._core.registerCharacterJoiner(d)}deregisterCharacterJoiner(d){this._checkProposedApi(),this._core.deregisterCharacterJoiner(d)}registerMarker(d=0){return this._verifyIntegers(d),this._core.registerMarker(d)}registerDecoration(d){var m,p,y;return this._checkProposedApi(),this._verifyPositiveIntegers((m=d.x)!==null&&m!==void 0?m:0,(p=d.width)!==null&&p!==void 0?p:0,(y=d.height)!==null&&y!==void 0?y:0),this._core.registerDecoration(d)}hasSelection(){return this._core.hasSelection()}select(d,m,p){this._verifyIntegers(d,m,p),this._core.select(d,m,p)}getSelection(){return this._core.getSelection()}getSelectionPosition(){return this._core.getSelectionPosition()}clearSelection(){this._core.clearSelection()}selectAll(){this._core.selectAll()}selectLines(d,m){this._verifyIntegers(d,m),this._core.selectLines(d,m)}dispose(){super.dispose()}scrollLines(d){this._verifyIntegers(d),this._core.scrollLines(d)}scrollPages(d){this._verifyIntegers(d),this._core.scrollPages(d)}scrollToTop(){this._core.scrollToTop()}scrollToBottom(){this._core.scrollToBottom()}scrollToLine(d){this._verifyIntegers(d),this._core.scrollToLine(d)}clear(){this._core.clear()}write(d,m){this._core.write(d,m)}writeln(d,m){this._core.write(d),this._core.write(`\r
`,m)}paste(d){this._core.paste(d)}refresh(d,m){this._verifyIntegers(d,m),this._core.refresh(d,m)}reset(){this._core.reset()}clearTextureAtlas(){this._core.clearTextureAtlas()}loadAddon(d){this._addonManager.loadAddon(this,d)}static get strings(){return o}_verifyIntegers(...d){for(const m of d)if(m===1/0||isNaN(m)||m%1!=0)throw new Error("This API only accepts integers")}_verifyPositiveIntegers(...d){for(const m of d)if(m&&(m===1/0||isNaN(m)||m%1!=0||m<0))throw new Error("This API only accepts positive integers")}}l.Terminal=g})(),n})())})(Bc);var Kg=Bc.exports,xc={exports:{}};(function(e,t){(function(i,s){e.exports=s()})(self,()=>(()=>{var i={};return(()=>{var s=i;Object.defineProperty(s,"__esModule",{value:!0}),s.FitAddon=void 0,s.FitAddon=class{activate(r){this._terminal=r}dispose(){}fit(){const r=this.proposeDimensions();if(!r||!this._terminal||isNaN(r.cols)||isNaN(r.rows))return;const n=this._terminal._core;this._terminal.rows===r.rows&&this._terminal.cols===r.cols||(n._renderService.clear(),this._terminal.resize(r.cols,r.rows))}proposeDimensions(){if(!this._terminal||!this._terminal.element||!this._terminal.element.parentElement)return;const r=this._terminal._core,n=r._renderService.dimensions;if(n.css.cell.width===0||n.css.cell.height===0)return;const l=this._terminal.options.scrollback===0?0:r.viewport.scrollBarWidth,o=window.getComputedStyle(this._terminal.element.parentElement),a=parseInt(o.getPropertyValue("height")),h=Math.max(0,parseInt(o.getPropertyValue("width"))),u=window.getComputedStyle(this._terminal.element),f=a-(parseInt(u.getPropertyValue("padding-top"))+parseInt(u.getPropertyValue("padding-bottom"))),_=h-(parseInt(u.getPropertyValue("padding-right"))+parseInt(u.getPropertyValue("padding-left")))-l;return{cols:Math.max(2,Math.floor(_/n.css.cell.width)),rows:Math.max(1,Math.floor(f/n.css.cell.height))}}}})(),i})())})(xc);var Gg=xc.exports;function Jg(){var i,s,r,n,l,o;switch((r=(s=(i=globalThis==null?void 0:globalThis.document)==null?void 0:i.documentElement)==null?void 0:s.dataset)==null?void 0:r.themeMode){case"dark":return!0;case"light":return!1}switch((o=(l=(n=globalThis==null?void 0:globalThis.siyuan)==null?void 0:n.config)==null?void 0:l.appearance)==null?void 0:o.mode){case 1:return!0;case 0:return!1}return window.matchMedia("(prefers-color-scheme: dark)").matches}function Pc(){return!Jg()}function Ic(e,t=100){let i;return function(...s){clearTimeout(i),i=setTimeout(()=>{e.apply(this,s)},t)}}const $g=typeof atob=="function",Xg=typeof btoa=="function",$i=typeof Buffer=="function",Sa=typeof TextDecoder=="function"?new TextDecoder:void 0,Ca=typeof TextEncoder=="function"?new TextEncoder:void 0,Qg="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",ss=Array.prototype.slice.call(Qg),Ts=(e=>{let t={};return e.forEach((i,s)=>t[i]=s),t})(ss),e3=/^(?:[A-Za-z\d+\/]{4})*?(?:[A-Za-z\d+\/]{2}(?:==)?|[A-Za-z\d+\/]{3}=?)?$/,dt=String.fromCharCode.bind(String),ka=typeof Uint8Array.from=="function"?Uint8Array.from.bind(Uint8Array):e=>new Uint8Array(Array.prototype.slice.call(e,0)),t3=e=>e.replace(/=/g,"").replace(/[+\/]/g,t=>t=="+"?"-":"_"),Nc=e=>e.replace(/[^A-Za-z0-9\+\/]/g,""),i3=e=>{let t,i,s,r,n="";const l=e.length%3;for(let o=0;o<e.length;){if((i=e.charCodeAt(o++))>255||(s=e.charCodeAt(o++))>255||(r=e.charCodeAt(o++))>255)throw new TypeError("invalid character found");t=i<<16|s<<8|r,n+=ss[t>>18&63]+ss[t>>12&63]+ss[t>>6&63]+ss[t&63]}return l?n.slice(0,l-3)+"===".substring(l):n},Vc=Xg?e=>btoa(e):$i?e=>Buffer.from(e,"binary").toString("base64"):i3,s3=$i?e=>Buffer.from(e).toString("base64"):e=>{let i=[];for(let s=0,r=e.length;s<r;s+=4096)i.push(dt.apply(null,e.subarray(s,s+4096)));return Vc(i.join(""))},r3=e=>{if(e.length<2){var t=e.charCodeAt(0);return t<128?e:t<2048?dt(192|t>>>6)+dt(128|t&63):dt(224|t>>>12&15)+dt(128|t>>>6&63)+dt(128|t&63)}else{var t=65536+(e.charCodeAt(0)-55296)*1024+(e.charCodeAt(1)-56320);return dt(240|t>>>18&7)+dt(128|t>>>12&63)+dt(128|t>>>6&63)+dt(128|t&63)}},n3=/[\uD800-\uDBFF][\uDC00-\uDFFFF]|[^\x00-\x7F]/g,o3=e=>e.replace(n3,r3),Ea=$i?e=>Buffer.from(e,"utf8").toString("base64"):Ca?e=>s3(Ca.encode(e)):e=>Vc(o3(e)),a3=(e,t=!1)=>t?t3(Ea(e)):Ea(e),l3=/[\xC0-\xDF][\x80-\xBF]|[\xE0-\xEF][\x80-\xBF]{2}|[\xF0-\xF7][\x80-\xBF]{3}/g,c3=e=>{switch(e.length){case 4:var t=(7&e.charCodeAt(0))<<18|(63&e.charCodeAt(1))<<12|(63&e.charCodeAt(2))<<6|63&e.charCodeAt(3),i=t-65536;return dt((i>>>10)+55296)+dt((i&1023)+56320);case 3:return dt((15&e.charCodeAt(0))<<12|(63&e.charCodeAt(1))<<6|63&e.charCodeAt(2));default:return dt((31&e.charCodeAt(0))<<6|63&e.charCodeAt(1))}},h3=e=>e.replace(l3,c3),u3=e=>{if(e=e.replace(/\s+/g,""),!e3.test(e))throw new TypeError("malformed base64.");e+="==".slice(2-(e.length&3));let t,i="",s,r;for(let n=0;n<e.length;)t=Ts[e.charAt(n++)]<<18|Ts[e.charAt(n++)]<<12|(s=Ts[e.charAt(n++)])<<6|(r=Ts[e.charAt(n++)]),i+=s===64?dt(t>>16&255):r===64?dt(t>>16&255,t>>8&255):dt(t>>16&255,t>>8&255,t&255);return i},jc=$g?e=>atob(Nc(e)):$i?e=>Buffer.from(e,"base64").toString("binary"):u3,Fc=$i?e=>ka(Buffer.from(e,"base64")):e=>ka(jc(e).split("").map(t=>t.charCodeAt(0))),f3=e=>Fc(Uc(e)),d3=$i?e=>Buffer.from(e,"base64").toString("utf8"):Sa?e=>Sa.decode(Fc(e)):e=>h3(jc(e)),Uc=e=>Nc(e.replace(/[-_]/g,t=>t=="-"?"+":"/")),Ir=e=>d3(Uc(e));function _3(e,t){switch(!0){case t instanceof Set:return t.has(e);case t instanceof Function:return t(e);default:return e===t}}function Ks(e,t){return _3(e.key,t.key)&&e.type===t.type&&e.altKey===t.altKey&&e.ctrlKey===t.ctrlKey&&e.metaKey===t.metaKey&&e.shiftKey===t.shiftKey}function p3(e){return class extends m3{constructor(){super(e)}}}var Ct;let m3=(Ct=class extends HTMLElement{constructor(i){super();ne(this,"save");ne(this,"blockId");ne(this,"linkHref");ne(this,"shadowRoot");ne(this,"link");ne(this,"content");ne(this,"preview");ne(this,"data","");ne(this,"_terminal");ne(this,"fitAddon");ne(this,"resizeObserver");ne(this,"customAddon",{activate:i=>{i.attachCustomKeyEventHandler(s=>{if(Ks(s,{type:"keydown",key:"c",ctrlKey:!0,metaKey:!1,altKey:!1,shiftKey:!1})||Ks(s,{type:"keydown",key:"c",ctrlKey:!1,metaKey:!0,altKey:!1,shiftKey:!1})){const r=i.getSelection();return Hl(r),!1}return!0})},dispose(){},fit:()=>{var i;(i=this._terminal)==null||i.resize(this._terminal.cols,this._terminal.buffer.active.baseY+this._terminal.buffer.active.cursorY+1)}});ne(this,"fit",()=>{var i,s;try{this._terminal&&this._terminal.options.fontSize!==this.fontSize&&(this._terminal.options.fontSize=this.fontSize),(i=this.fitAddon)==null||i.fit(),(s=this.customAddon)==null||s.fit()}catch(r){this.plugin.logger.warn(r)}});this.plugin=i,this.save=this.dataset.save,this.blockId=this.dataset.blockId,this.linkHref=`plugins/${this.plugin.name}/index.css?v=${za.version}`,this.shadowRoot=this.attachShadow({mode:"open"})}static get observedAttributes(){return["data-stream"]}get fontSize(){var i,s,r;return parseFloat(globalThis.getComputedStyle(this).getPropertyValue("font-size"))||((r=(s=(i=globalThis.siyuan)==null?void 0:i.config)==null?void 0:s.editor)==null?void 0:r.fontSize)}get terminal(){return this._terminal}connectedCallback(){if(this.plugin.xtermElements.add(this),this.link=this.querySelector(`link#${Ct.ELEMENT_ID_STYLE}`),this.content=this.querySelector(`pre#${Ct.ELEMENT_ID_CONTENT}`),this.preview=this.querySelector(`div#${Ct.ELEMENT_ID_PREVIEW}`),this.link||(this.link=document.createElement("link"),this.link.id=Ct.ELEMENT_ID_STYLE,this.link.rel="stylesheet",this.link.href=this.linkHref,this.shadowRoot.appendChild(this.link)),this.dataset.stream!==void 0?this.data=Ir(this.dataset.stream):this.content&&(this.shadowRoot.appendChild(this.content),this.content.style.display="none",this.data=Ir(this.content.dataset.stream??"")),this.preview)this.shadowRoot.appendChild(this.preview);else{this.preview=document.createElement("div"),this.preview.id=Ct.ELEMENT_ID_PREVIEW,this.sizeObserver(this.preview),this.shadowRoot.appendChild(this.preview);const i=Pc()?g3:v3;this._terminal=new Kg.Terminal({rows:0,theme:i,fontSize:this.fontSize,...this.plugin.config.xterm.options}),this.fitAddon=new Gg.FitAddon,this._terminal.loadAddon(this.fitAddon),this._terminal.loadAddon(this.customAddon),this._terminal.open(this.preview),this._terminal.write(this.data,this.fit)}}async write(i){return new Promise(s=>{var r;(r=this._terminal)==null||r.write(i,s)})}async writeln(i){return new Promise(s=>{var r;(r=this._terminal)==null||r.writeln(i,s)})}sizeObserver(i){this.resizeObserver??(this.resizeObserver=new ResizeObserver(Ic(this.fit,125))),this.resizeObserver.observe(i,{box:"content-box"})}disconnectedCallback(){var i,s;this.plugin.xtermElements.delete(this),(i=this.resizeObserver)==null||i.disconnect(),(s=this._terminal)==null||s.dispose()}adoptedCallback(){}async attributeChangedCallback(i,s,r){switch(i){case"data-stream":this._terminal&&(this.data=Ir(r),await this.write(`
`),this._terminal.clear(),this._terminal.write(this.data,this.fit));break}}},ne(Ct,"TAG_NAME","jupyter-xterm-output"),ne(Ct,"ELEMENT_ID_STYLE","style"),ne(Ct,"ELEMENT_ID_CONTENT","content"),ne(Ct,"ELEMENT_ID_PREVIEW","preview"),Ct);const Wc={background:"#0000",extendedAnsi:["#000000","#00005f","#000087","#0000af","#0000d7","#0000ff","#005f00","#005f5f","#005f87","#005faf","#005fd7","#005fff","#008700","#00875f","#008787","#0087af","#0087d7","#0087ff","#00af00","#00af5f","#00af87","#00afaf","#00afd7","#00afff","#00d700","#00d75f","#00d787","#00d7af","#00d7d7","#00d7ff","#00ff00","#00ff5f","#00ff87","#00ffaf","#00ffd7","#00ffff","#5f0000","#5f005f","#5f0087","#5f00af","#5f00d7","#5f00ff","#5f5f00","#5f5f5f","#5f5f87","#5f5faf","#5f5fd7","#5f5fff","#5f8700","#5f875f","#5f8787","#5f87af","#5f87d7","#5f87ff","#5faf00","#5faf5f","#5faf87","#5fafaf","#5fafd7","#5fafff","#5fd700","#5fd75f","#5fd787","#5fd7af","#5fd7d7","#5fd7ff","#5fff00","#5fff5f","#5fff87","#5fffaf","#5fffd7","#5fffff","#870000","#87005f","#870087","#8700af","#8700d7","#8700ff","#875f00","#875f5f","#875f87","#875faf","#875fd7","#875fff","#878700","#87875f","#878787","#8787af","#8787d7","#8787ff","#87af00","#87af5f","#87af87","#87afaf","#87afd7","#87afff","#87d700","#87d75f","#87d787","#87d7af","#87d7d7","#87d7ff","#87ff00","#87ff5f","#87ff87","#87ffaf","#87ffd7","#87ffff","#af0000","#af005f","#af0087","#af00af","#af00d7","#af00ff","#af5f00","#af5f5f","#af5f87","#af5faf","#af5fd7","#af5fff","#af8700","#af875f","#af8787","#af87af","#af87d7","#af87ff","#afaf00","#afaf5f","#afaf87","#afafaf","#afafd7","#afafff","#afd700","#afd75f","#afd787","#afd7af","#afd7d7","#afd7ff","#afff00","#afff5f","#afff87","#afffaf","#afffd7","#afffff","#d70000","#d7005f","#d70087","#d700af","#d700d7","#d700ff","#d75f00","#d75f5f","#d75f87","#d75faf","#d75fd7","#d75fff","#d78700","#d7875f","#d78787","#d787af","#d787d7","#d787ff","#d7af00","#d7af5f","#d7af87","#d7afaf","#d7afd7","#d7afff","#d7d700","#d7d75f","#d7d787","#d7d7af","#d7d7d7","#d7d7ff","#d7ff00","#d7ff5f","#d7ff87","#d7ffaf","#d7ffd7","#d7ffff","#ff0000","#ff005f","#ff0087","#ff00af","#ff00d7","#ff00ff","#ff5f00","#ff5f5f","#ff5f87","#ff5faf","#ff5fd7","#ff5fff","#ff8700","#ff875f","#ff8787","#ff87af","#ff87d7","#ff87ff","#ffaf00","#ffaf5f","#ffaf87","#ffafaf","#ffafd7","#ffafff","#ffd700","#ffd75f","#ffd787","#ffd7af","#ffd7d7","#ffd7ff","#ffff00","#ffff5f","#ffff87","#ffffaf","#ffffd7","#ffffff","#080808","#121212","#1c1c1c","#262626","#303030","#3a3a3a","#444444","#4e4e4e","#585858","#626262","#6c6c6c","#767676","#808080","#8a8a8a","#949494","#9e9e9e","#a8a8a8","#b2b2b2","#bcbcbc","#c6c6c6","#d0d0d0","#dadada","#e4e4e4","#eeeeee"]},g3={foreground:"#3e424d",selectionBackground:"#fffe",selectionInactiveBackground:"#fffe",black:"#282c36",red:"#b22b31",green:"#007427",yellow:"#b27d12",blue:"#0065ca",magenta:"#a03196",cyan:"#258f8f",white:"#a1a6b2",brightBlack:"#3e424d",brightRed:"#e75c58",brightGreen:"#00a250",brightYellow:"#ddb62b",brightBlue:"#208ffb",brightMagenta:"#d160c4",brightCyan:"#60c6c8",brightWhite:"#c5c1b4",...Wc},v3={foreground:"#a1a6b2",selectionBackground:"#fff3",selectionInactiveBackground:"#fff3",black:"#3e424d",red:"#e75c58",green:"#00a250",yellow:"#ddb62b",blue:"#208ffb",magenta:"#d160c4",cyan:"#60c6c8",white:"#c5c1b4",brightBlack:"#282c36",brightRed:"#b22b31",brightGreen:"#007427",brightYellow:"#b27d12",brightBlue:"#0065ca",brightMagenta:"#a03196",brightCyan:"#258f8f",brightWhite:"#a1a6b2",...Wc},b3=e=>({}),La=e=>({});function Ma(e,t,i){const s=e.slice();return s[0]=t[i],s}const y3=e=>({}),Ta=e=>({}),w3=e=>({}),Da=e=>({});function S3(e){let t;return{c(){t=re("div"),I(t,"class","ft__breakword")},m(i,s){J(i,t,s),t.innerHTML=e[1]},p(i,s){s&2&&(t.innerHTML=i[1])},d(i){i&&G(t)}}}function Aa(e){let t,i=ct(e[5]),s=[];for(let r=0;r<i.length;r+=1)s[r]=Ra(Ma(e,i,r));return{c(){t=re("datalist");for(let r=0;r<s.length;r+=1)s[r].c();I(t,"id",e[4])},m(r,n){J(r,t,n);for(let l=0;l<s.length;l+=1)s[l]&&s[l].m(t,null)},p(r,n){if(n&32){i=ct(r[5]);let l;for(l=0;l<i.length;l+=1){const o=Ma(r,i,l);s[l]?s[l].p(o,n):(s[l]=Ra(o),s[l].c(),s[l].m(t,null))}for(;l<s.length;l+=1)s[l].d(1);s.length=i.length}n&16&&I(t,"id",r[4])},d(r){r&&G(t),Kf(s,r)}}}function Ra(e){let t,i;return{c(){t=re("option"),t.__value=i=e[0],lt(t,t.__value)},m(s,r){J(s,t,r)},p(s,r){r&32&&i!==(i=s[0])&&(t.__value=i,lt(t,t.__value))},d(s){s&&G(t)}}}function C3(e){let t,i,s,r,n,l=e[5].length>0&&Aa(e);return{c(){t=re("input"),i=fe(),l&&l.c(),s=Xe(),t.autofocus=e[7],I(t,"placeholder",e[2]),I(t,"list",e[4]),I(t,"class","b3-text-field fn__block")},m(o,a){J(o,t,a),lt(t,e[0]),J(o,i,a),l&&l.m(o,a),J(o,s,a),e[7]&&t.focus(),r||(n=[Ce(t,"input",e[15]),Ce(t,"input",e[13]),Ce(t,"change",e[12])],r=!0)},p(o,a){a&128&&(t.autofocus=o[7]),a&4&&I(t,"placeholder",o[2]),a&16&&I(t,"list",o[4]),a&1&&t.value!==o[0]&&lt(t,o[0]),o[5].length>0?l?l.p(o,a):(l=Aa(o),l.c(),l.m(s.parentNode,s)):l&&(l.d(1),l=null)},d(o){o&&(G(t),G(i),G(s)),l&&l.d(o),r=!1,rt(n)}}}function k3(e){let t,i;return{c(){t=new Zi(!1),i=Xe(),t.a=i},m(s,r){t.m(e[3],s,r),J(s,i,r)},p(s,r){r&8&&t.p(s[3])},d(s){s&&(G(i),t.d())}}}function E3(e){let t,i,s,r,n;const l=e[14].text,o=qe(l,e,e[16],Da),a=o||S3(e),h=e[14].input,u=qe(h,e,e[16],Ta),f=u||C3(e),_=e[14].tips,v=qe(_,e,e[16],La),b=v||k3(e);return{c(){a&&a.c(),t=fe(),i=re("br"),s=fe(),f&&f.c(),r=fe(),b&&b.c()},m(g,c){a&&a.m(g,c),J(g,t,c),J(g,i,c),J(g,s,c),f&&f.m(g,c),J(g,r,c),b&&b.m(g,c),n=!0},p(g,c){o?o.p&&(!n||c&65536)&&Ke(o,l,g,g[16],n?Ze(l,g[16],c,w3):Ge(g[16]),Da):a&&a.p&&(!n||c&2)&&a.p(g,n?c:-1),u?u.p&&(!n||c&65536)&&Ke(u,h,g,g[16],n?Ze(h,g[16],c,y3):Ge(g[16]),Ta):f&&f.p&&(!n||c&181)&&f.p(g,n?c:-1),v?v.p&&(!n||c&65536)&&Ke(v,_,g,g[16],n?Ze(_,g[16],c,b3):Ge(g[16]),La):b&&b.p&&(!n||c&8)&&b.p(g,n?c:-1)},i(g){n||(j(a,g),j(f,g),j(b,g),n=!0)},o(g){W(a,g),W(f,g),W(b,g),n=!1},d(g){g&&(G(t),G(i),G(s),G(r)),a&&a.d(g),f&&f.d(g),b&&b.d(g)}}}function L3(e){let t,i;return t=new Tc({props:{selectable:e[6],cancelButtonText:e[8],confirmButtonText:e[9],$$slots:{default:[E3]},$$scope:{ctx:e}}}),t.$on("cancel",e[10]),t.$on("confirm",e[11]),{c(){ie(t.$$.fragment)},m(s,r){ee(t,s,r),i=!0},p(s,[r]){const n={};r&64&&(n.selectable=s[6]),r&256&&(n.cancelButtonText=s[8]),r&512&&(n.confirmButtonText=s[9]),r&65727&&(n.$$scope={dirty:r,ctx:s}),t.$set(n)},i(s){i||(j(t.$$.fragment,s),i=!0)},o(s){W(t.$$.fragment,s),i=!1},d(s){te(t,s)}}}function M3(e,t,i){var S,E,k,w;let{$$slots:s={},$$scope:r}=t,{text:n=""}=t,{value:l=""}=t,{placeholder:o=""}=t,{tips:a=""}=t,{listID:h=Math.random().toString(36).slice(2)}=t,{datalist:u=[]}=t,{selectable:f=!0}=t,{autofocus:_=!0}=t,{cancelButtonText:v=((E=(S=globalThis.siyuan)==null?void 0:S.languages)==null?void 0:E.cancel)??"Cancel"}=t,{confirmButtonText:b=((w=(k=globalThis.siyuan)==null?void 0:k.languages)==null?void 0:w.confirm)??"Confirm"}=t;const g=ai();function c(C){g("cancel",{value:l,event:C.detail.event})}function d(C){g("confirm",{value:l,event:C.detail.event})}function m(C){g("change",{value:l,event:C})}function p(C){g("input",{value:l,event:C})}function y(){l=this.value,i(0,l)}return e.$$set=C=>{"text"in C&&i(1,n=C.text),"value"in C&&i(0,l=C.value),"placeholder"in C&&i(2,o=C.placeholder),"tips"in C&&i(3,a=C.tips),"listID"in C&&i(4,h=C.listID),"datalist"in C&&i(5,u=C.datalist),"selectable"in C&&i(6,f=C.selectable),"autofocus"in C&&i(7,_=C.autofocus),"cancelButtonText"in C&&i(8,v=C.cancelButtonText),"confirmButtonText"in C&&i(9,b=C.confirmButtonText),"$$scope"in C&&i(16,r=C.$$scope)},[l,n,o,a,h,u,f,_,v,b,c,d,m,p,s,y,r]}class T3 extends Ve{constructor(t){super(),Ne(this,t,M3,L3,Pe,{text:1,value:0,placeholder:2,tips:3,listID:4,datalist:5,selectable:6,autofocus:7,cancelButtonText:8,confirmButtonText:9})}}async function D3(e,t){return new Promise((i,s)=>{const r=t.confirm,n=t.cancel;t.confirm=async(l,...o)=>{const a=await(r==null?void 0:r.call(t,l,...o))??!0;return a&&i(l),a},t.cancel=async(l,...o)=>{const a=await(n==null?void 0:n.call(t,l,...o))??!0;return a&&s(l),a},A3(e,t)})}function A3(e,t){const i=`dialog-prompt-${Date.now()}`,s=new e({title:t.title,content:`<div id="${i}" class="fn__flex-column" />`,width:t.width||void 0,height:t.height||void 0,destroyCallback:()=>r==null?void 0:r.$destroy()}),r=new T3({target:s.element.querySelector(`#${i}`),props:{text:t.text,value:t.value,placeholder:t.placeholder,tips:t.tips,listID:t.listID,datalist:t.datalist,selectable:t.selectable,autofocus:t.autofocus}});return r.$on("input",async n=>{if(t.input){const l=await t.input(n.detail.value,s,r);r.$set({tips:l})}}),r.$on("change",async n=>{if(t.change){const l=await t.change(n.detail.value,s,r);r.$set({tips:l})}}),r.$on("confirm",async n=>{(t.confirm?await t.confirm(n.detail.value,s,r):!0)&&s.destroy()}),r.$on("cancel",async n=>{(t.cancel?await t.cancel(n.detail.value,s,r):!0)&&s.destroy()}),{id:i,dialog:s,component:r}}R3();B3();const Ds=O3();function R3(){switch(ft.getFrontend()){case"desktop":case"desktop-window":case"browser-desktop":return!0;case"mobile":case"browser-mobile":return!1;default:return!1}}function O3(){switch(ft.getFrontend()){case"mobile":case"browser-mobile":return!0;case"desktop":case"desktop-window":case"browser-desktop":return!1;default:return!1}}function B3(){switch(ft.getFrontend()){case"browser-desktop":case"browser-mobile":return!0;case"desktop":case"desktop-window":case"mobile":return!1;default:return!1}}function H3(e){const{protyle:t,data:i,blockElements:s}=e;if(i){const r={element:t.wysiwyg.element,id:i.id,type:Dl.NodeType.NodeDocument};return{...r,isDocumentBlock:!0,isMultiBlock:!1,blocks:[r],protyle:t,data:i}}else if(s&&s.length>0){const r=[];return s.forEach(n=>{r.push({element:n,id:n.dataset.nodeId,type:n.dataset.type,subtype:n.dataset.subtype})}),{...r[0],isDocumentBlock:!1,isMultiBlock:r.length>1,blocks:r,protyle:t}}return null}function Ui(e){return!!(e&&e instanceof HTMLElement&&e.dataset.type&&e.dataset.nodeId&&zi.id.test(e.dataset.nodeId))}function x3(e){return!!(e&&e instanceof HTMLElement&&e.classList.contains("protyle-title")&&e.dataset.nodeId&&zi.id.test(e.dataset.nodeId))}const P3=x3;function I3(e){return!!(e&&e instanceof HTMLElement&&e.classList.contains("protyle-wysiwyg"))}const N3=I3;function V3(){return Array.from(document.querySelectorAll(".protyle-wysiwyg div.protyle-wysiwyg--select[data-node-id]"))}function Gs(){const e=document.getSelection();for(var t=e==null?void 0:e.focusNode;t&&(!(t instanceof HTMLElement)||!Ui(t));)t=t.parentElement;return t}function j3(){const e=Gs();return e==null?void 0:e.dataset.nodeId}function F3(){const e=V3();if(e.length>0)return e;{const t=Gs();return t?[t]:[]}}function U3(e=(t=>(t=globalThis.document.getSelection())==null?void 0:t.focusNode)()){for(;e&&(!(e instanceof HTMLElement)||!e.classList.contains("hljs"));)e=e.parentElement;return e}function Oa(){const e=globalThis.document.getSelection();if((e==null?void 0:e.rangeCount)===1){const t=e.getRangeAt(0),i=U3(t.commonAncestorContainer);if(i){const s=i.textContent??"",r=globalThis.document.createRange(),n=globalThis.document.createRange(),l=globalThis.document.createRange(),o=globalThis.document.createRange(),{anchorNode:a,anchorOffset:h,focusNode:u,focusOffset:f}=e;if(a&&u&&i.firstChild&&i.lastChild){const _=a===u?h<=f:!!(a.compareDocumentPosition(u)&Node.DOCUMENT_POSITION_FOLLOWING);r.setStartBefore(i.firstChild),n.setEndAfter(i.lastChild),l.setStartBefore(i.firstChild),o.setEndAfter(i.lastChild),_?(r.setEnd(a,h),n.setStart(u,f)):(r.setEnd(u,f),n.setStart(a,h)),l.setEnd(u,f),o.setStart(u,f);const v=l.toString(),b=v.split(`
`),g=b.at(-1),c=b.length,d=g.length,m=v.length;return{code:s,row:c,column:d,offset:m,container:i,selection:e,order:_,before:r,current:t,after:n,prefix:l,suffix:o}}}}}var ln={exports:{}};(function(e,t){(function(i,s){var r="1.0.37",n="",l="?",o="function",a="undefined",h="object",u="string",f="major",_="model",v="name",b="type",g="vendor",c="version",d="architecture",m="console",p="mobile",y="tablet",S="smarttv",E="wearable",k="embedded",w=500,C="Amazon",L="Apple",R="ASUS",O="BlackBerry",T="Browser",x="Chrome",F="Edge",Y="Firefox",q="Google",M="Huawei",B="LG",A="Microsoft",H="Motorola",N="Opera",se="Samsung",he="Sharp",ae="Sony",ye="Xiaomi",D="Zebra",V="Facebook",K="Chromium OS",Z="Mac OS",_e=function(ge,P){var ve={};for(var Te in ge)P[Te]&&P[Te].length%2===0?ve[Te]=P[Te].concat(ge[Te]):ve[Te]=ge[Te];return ve},Q=function(ge){for(var P={},ve=0;ve<ge.length;ve++)P[ge[ve].toUpperCase()]=ge[ve];return P},Ee=function(ge,P){return typeof ge===u?He(P).indexOf(He(ge))!==-1:!1},He=function(ge){return ge.toLowerCase()},ze=function(ge){return typeof ge===u?ge.replace(/[^\d\.]/g,n).split(".")[0]:s},ht=function(ge,P){if(typeof ge===u)return ge=ge.replace(/^\s\s*/,n),typeof P===a?ge:ge.substring(0,w)},be=function(ge,P){for(var ve=0,Te,Mt,nt,Le,le,Tt;ve<P.length&&!le;){var br=P[ve],zn=P[ve+1];for(Te=Mt=0;Te<br.length&&!le&&br[Te];)if(le=br[Te++].exec(ge),le)for(nt=0;nt<zn.length;nt++)Tt=le[++Mt],Le=zn[nt],typeof Le===h&&Le.length>0?Le.length===2?typeof Le[1]==o?this[Le[0]]=Le[1].call(this,Tt):this[Le[0]]=Le[1]:Le.length===3?typeof Le[1]===o&&!(Le[1].exec&&Le[1].test)?this[Le[0]]=Tt?Le[1].call(this,Tt,Le[2]):s:this[Le[0]]=Tt?Tt.replace(Le[1],Le[2]):s:Le.length===4&&(this[Le[0]]=Tt?Le[3].call(this,Tt.replace(Le[1],Le[2])):s):this[Le]=Tt||s;ve+=2}},Ht=function(ge,P){for(var ve in P)if(typeof P[ve]===h&&P[ve].length>0){for(var Te=0;Te<P[ve].length;Te++)if(Ee(P[ve][Te],ge))return ve===l?s:ve}else if(Ee(P[ve],ge))return ve===l?s:ve;return ge},Si={"1.0":"/8","1.2":"/1","1.3":"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"},hi={ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2","8.1":"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"},ui={browser:[[/\b(?:crmo|crios)\/([\w\.]+)/i],[c,[v,"Chrome"]],[/edg(?:e|ios|a)?\/([\w\.]+)/i],[c,[v,"Edge"]],[/(opera mini)\/([-\w\.]+)/i,/(opera [mobiletab]{3,6})\b.+version\/([-\w\.]+)/i,/(opera)(?:.+version\/|[\/ ]+)([\w\.]+)/i],[v,c],[/opios[\/ ]+([\w\.]+)/i],[c,[v,N+" Mini"]],[/\bopr\/([\w\.]+)/i],[c,[v,N]],[/\bb[ai]*d(?:uhd|[ub]*[aekoprswx]{5,6})[\/ ]?([\w\.]+)/i],[c,[v,"Baidu"]],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/ ]?([\w\.]*)/i,/(avant|iemobile|slim)\s?(?:browser)?[\/ ]?([\w\.]*)/i,/(?:ms|\()(ie) ([\w\.]+)/i,/(flock|rockmelt|midori|epiphany|silk|skyfire|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark|qupzilla|falkon|rekonq|puffin|brave|whale(?!.+naver)|qqbrowserlite|qq|duckduckgo)\/([-\w\.]+)/i,/(heytap|ovi)browser\/([\d\.]+)/i,/(weibo)__([\d\.]+)/i],[v,c],[/(?:\buc? ?browser|(?:juc.+)ucweb)[\/ ]?([\w\.]+)/i],[c,[v,"UC"+T]],[/microm.+\bqbcore\/([\w\.]+)/i,/\bqbcore\/([\w\.]+).+microm/i,/micromessenger\/([\w\.]+)/i],[c,[v,"WeChat"]],[/konqueror\/([\w\.]+)/i],[c,[v,"Konqueror"]],[/trident.+rv[: ]([\w\.]{1,9})\b.+like gecko/i],[c,[v,"IE"]],[/ya(?:search)?browser\/([\w\.]+)/i],[c,[v,"Yandex"]],[/slbrowser\/([\w\.]+)/i],[c,[v,"Smart Lenovo "+T]],[/(avast|avg)\/([\w\.]+)/i],[[v,/(.+)/,"$1 Secure "+T],c],[/\bfocus\/([\w\.]+)/i],[c,[v,Y+" Focus"]],[/\bopt\/([\w\.]+)/i],[c,[v,N+" Touch"]],[/coc_coc\w+\/([\w\.]+)/i],[c,[v,"Coc Coc"]],[/dolfin\/([\w\.]+)/i],[c,[v,"Dolphin"]],[/coast\/([\w\.]+)/i],[c,[v,N+" Coast"]],[/miuibrowser\/([\w\.]+)/i],[c,[v,"MIUI "+T]],[/fxios\/([-\w\.]+)/i],[c,[v,Y]],[/\bqihu|(qi?ho?o?|360)browser/i],[[v,"360 "+T]],[/(oculus|sailfish|huawei|vivo)browser\/([\w\.]+)/i],[[v,/(.+)/,"$1 "+T],c],[/samsungbrowser\/([\w\.]+)/i],[c,[v,se+" Internet"]],[/(comodo_dragon)\/([\w\.]+)/i],[[v,/_/g," "],c],[/metasr[\/ ]?([\d\.]+)/i],[c,[v,"Sogou Explorer"]],[/(sogou)mo\w+\/([\d\.]+)/i],[[v,"Sogou Mobile"],c],[/(electron)\/([\w\.]+) safari/i,/(tesla)(?: qtcarbrowser|\/(20\d\d\.[-\w\.]+))/i,/m?(qqbrowser|2345Explorer)[\/ ]?([\w\.]+)/i],[v,c],[/(lbbrowser)/i,/\[(linkedin)app\]/i],[v],[/((?:fban\/fbios|fb_iab\/fb4a)(?!.+fbav)|;fbav\/([\w\.]+);)/i],[[v,V],c],[/(Klarna)\/([\w\.]+)/i,/(kakao(?:talk|story))[\/ ]([\w\.]+)/i,/(naver)\(.*?(\d+\.[\w\.]+).*\)/i,/safari (line)\/([\w\.]+)/i,/\b(line)\/([\w\.]+)\/iab/i,/(alipay)client\/([\w\.]+)/i,/(chromium|instagram|snapchat)[\/ ]([-\w\.]+)/i],[v,c],[/\bgsa\/([\w\.]+) .*safari\//i],[c,[v,"GSA"]],[/musical_ly(?:.+app_?version\/|_)([\w\.]+)/i],[c,[v,"TikTok"]],[/headlesschrome(?:\/([\w\.]+)| )/i],[c,[v,x+" Headless"]],[/ wv\).+(chrome)\/([\w\.]+)/i],[[v,x+" WebView"],c],[/droid.+ version\/([\w\.]+)\b.+(?:mobile safari|safari)/i],[c,[v,"Android "+T]],[/(chrome|omniweb|arora|[tizenoka]{5} ?browser)\/v?([\w\.]+)/i],[v,c],[/version\/([\w\.\,]+) .*mobile\/\w+ (safari)/i],[c,[v,"Mobile Safari"]],[/version\/([\w(\.|\,)]+) .*(mobile ?safari|safari)/i],[c,v],[/webkit.+?(mobile ?safari|safari)(\/[\w\.]+)/i],[v,[c,Ht,Si]],[/(webkit|khtml)\/([\w\.]+)/i],[v,c],[/(navigator|netscape\d?)\/([-\w\.]+)/i],[[v,"Netscape"],c],[/mobile vr; rv:([\w\.]+)\).+firefox/i],[c,[v,Y+" Reality"]],[/ekiohf.+(flow)\/([\w\.]+)/i,/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo browser|minimo|conkeror|klar)[\/ ]?([\w\.\+]+)/i,/(seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([-\w\.]+)$/i,/(firefox)\/([\w\.]+)/i,/(mozilla)\/([\w\.]+) .+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir|obigo|mosaic|(?:go|ice|up)[\. ]?browser)[-\/ ]?v?([\w\.]+)/i,/(links) \(([\w\.]+)/i,/panasonic;(viera)/i],[v,c],[/(cobalt)\/([\w\.]+)/i],[v,[c,/master.|lts./,""]]],cpu:[[/(?:(amd|x(?:(?:86|64)[-_])?|wow|win)64)[;\)]/i],[[d,"amd64"]],[/(ia32(?=;))/i],[[d,He]],[/((?:i[346]|x)86)[;\)]/i],[[d,"ia32"]],[/\b(aarch64|arm(v?8e?l?|_?64))\b/i],[[d,"arm64"]],[/\b(arm(?:v[67])?ht?n?[fl]p?)\b/i],[[d,"armhf"]],[/windows (ce|mobile); ppc;/i],[[d,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?: mac|;|\))/i],[[d,/ower/,n,He]],[/(sun4\w)[;\)]/i],[[d,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|\barm(?=v(?:[1-7]|[5-7]1)l?|;|eabi)|(?=atmel )avr|(?:irix|mips|sparc)(?:64)?\b|pa-risc)/i],[[d,He]]],device:[[/\b(sch-i[89]0\d|shw-m380s|sm-[ptx]\w{2,4}|gt-[pn]\d{2,4}|sgh-t8[56]9|nexus 10)/i],[_,[g,se],[b,y]],[/\b((?:s[cgp]h|gt|sm)-\w+|sc[g-]?[\d]+a?|galaxy nexus)/i,/samsung[- ]([-\w]+)/i,/sec-(sgh\w+)/i],[_,[g,se],[b,p]],[/(?:\/|\()(ip(?:hone|od)[\w, ]*)(?:\/|;)/i],[_,[g,L],[b,p]],[/\((ipad);[-\w\),; ]+apple/i,/applecoremedia\/[\w\.]+ \((ipad)/i,/\b(ipad)\d\d?,\d\d?[;\]].+ios/i],[_,[g,L],[b,y]],[/(macintosh);/i],[_,[g,L]],[/\b(sh-?[altvz]?\d\d[a-ekm]?)/i],[_,[g,he],[b,p]],[/\b((?:ag[rs][23]?|bah2?|sht?|btv)-a?[lw]\d{2})\b(?!.+d\/s)/i],[_,[g,M],[b,y]],[/(?:huawei|honor)([-\w ]+)[;\)]/i,/\b(nexus 6p|\w{2,4}e?-[atu]?[ln][\dx][012359c][adn]?)\b(?!.+d\/s)/i],[_,[g,M],[b,p]],[/\b(poco[\w ]+|m2\d{3}j\d\d[a-z]{2})(?: bui|\))/i,/\b; (\w+) build\/hm\1/i,/\b(hm[-_ ]?note?[_ ]?(?:\d\w)?) bui/i,/\b(redmi[\-_ ]?(?:note|k)?[\w_ ]+)(?: bui|\))/i,/oid[^\)]+; (m?[12][0-389][01]\w{3,6}[c-y])( bui|; wv|\))/i,/\b(mi[-_ ]?(?:a\d|one|one[_ ]plus|note lte|max|cc)?[_ ]?(?:\d?\w?)[_ ]?(?:plus|se|lite)?)(?: bui|\))/i],[[_,/_/g," "],[g,ye],[b,p]],[/oid[^\)]+; (2\d{4}(283|rpbf)[cgl])( bui|\))/i,/\b(mi[-_ ]?(?:pad)(?:[\w_ ]+))(?: bui|\))/i],[[_,/_/g," "],[g,ye],[b,y]],[/; (\w+) bui.+ oppo/i,/\b(cph[12]\d{3}|p(?:af|c[al]|d\w|e[ar])[mt]\d0|x9007|a101op)\b/i],[_,[g,"OPPO"],[b,p]],[/vivo (\w+)(?: bui|\))/i,/\b(v[12]\d{3}\w?[at])(?: bui|;)/i],[_,[g,"Vivo"],[b,p]],[/\b(rmx[1-3]\d{3})(?: bui|;|\))/i],[_,[g,"Realme"],[b,p]],[/\b(milestone|droid(?:[2-4x]| (?:bionic|x2|pro|razr))?:?( 4g)?)\b[\w ]+build\//i,/\bmot(?:orola)?[- ](\w*)/i,/((?:moto[\w\(\) ]+|xt\d{3,4}|nexus 6)(?= bui|\)))/i],[_,[g,H],[b,p]],[/\b(mz60\d|xoom[2 ]{0,2}) build\//i],[_,[g,H],[b,y]],[/((?=lg)?[vl]k\-?\d{3}) bui| 3\.[-\w; ]{10}lg?-([06cv9]{3,4})/i],[_,[g,B],[b,y]],[/(lm(?:-?f100[nv]?|-[\w\.]+)(?= bui|\))|nexus [45])/i,/\blg[-e;\/ ]+((?!browser|netcast|android tv)\w+)/i,/\blg-?([\d\w]+) bui/i],[_,[g,B],[b,p]],[/(ideatab[-\w ]+)/i,/lenovo ?(s[56]000[-\w]+|tab(?:[\w ]+)|yt[-\d\w]{6}|tb[-\d\w]{6})/i],[_,[g,"Lenovo"],[b,y]],[/(?:maemo|nokia).*(n900|lumia \d+)/i,/nokia[-_ ]?([-\w\.]*)/i],[[_,/_/g," "],[g,"Nokia"],[b,p]],[/(pixel c)\b/i],[_,[g,q],[b,y]],[/droid.+; (pixel[\daxl ]{0,6})(?: bui|\))/i],[_,[g,q],[b,p]],[/droid.+ (a?\d[0-2]{2}so|[c-g]\d{4}|so[-gl]\w+|xq-a\w[4-7][12])(?= bui|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[_,[g,ae],[b,p]],[/sony tablet [ps]/i,/\b(?:sony)?sgp\w+(?: bui|\))/i],[[_,"Xperia Tablet"],[g,ae],[b,y]],[/ (kb2005|in20[12]5|be20[12][59])\b/i,/(?:one)?(?:plus)? (a\d0\d\d)(?: b|\))/i],[_,[g,"OnePlus"],[b,p]],[/(alexa)webm/i,/(kf[a-z]{2}wi|aeo[c-r]{2})( bui|\))/i,/(kf[a-z]+)( bui|\)).+silk\//i],[_,[g,C],[b,y]],[/((?:sd|kf)[0349hijorstuw]+)( bui|\)).+silk\//i],[[_,/(.+)/g,"Fire Phone $1"],[g,C],[b,p]],[/(playbook);[-\w\),; ]+(rim)/i],[_,g,[b,y]],[/\b((?:bb[a-f]|st[hv])100-\d)/i,/\(bb10; (\w+)/i],[_,[g,O],[b,p]],[/(?:\b|asus_)(transfo[prime ]{4,10} \w+|eeepc|slider \w+|nexus 7|padfone|p00[cj])/i],[_,[g,R],[b,y]],[/ (z[bes]6[027][012][km][ls]|zenfone \d\w?)\b/i],[_,[g,R],[b,p]],[/(nexus 9)/i],[_,[g,"HTC"],[b,y]],[/(htc)[-;_ ]{1,2}([\w ]+(?=\)| bui)|\w+)/i,/(zte)[- ]([\w ]+?)(?: bui|\/|\))/i,/(alcatel|geeksphone|nexian|panasonic(?!(?:;|\.))|sony(?!-bra))[-_ ]?([-\w]*)/i],[g,[_,/_/g," "],[b,p]],[/droid.+; ([ab][1-7]-?[0178a]\d\d?)/i],[_,[g,"Acer"],[b,y]],[/droid.+; (m[1-5] note) bui/i,/\bmz-([-\w]{2,})/i],[_,[g,"Meizu"],[b,p]],[/; ((?:power )?armor(?:[\w ]{0,8}))(?: bui|\))/i],[_,[g,"Ulefone"],[b,p]],[/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron|infinix|tecno)[-_ ]?([-\w]*)/i,/(hp) ([\w ]+\w)/i,/(asus)-?(\w+)/i,/(microsoft); (lumia[\w ]+)/i,/(lenovo)[-_ ]?([-\w]+)/i,/(jolla)/i,/(oppo) ?([\w ]+) bui/i],[g,_,[b,p]],[/(kobo)\s(ereader|touch)/i,/(archos) (gamepad2?)/i,/(hp).+(touchpad(?!.+tablet)|tablet)/i,/(kindle)\/([\w\.]+)/i,/(nook)[\w ]+build\/(\w+)/i,/(dell) (strea[kpr\d ]*[\dko])/i,/(le[- ]+pan)[- ]+(\w{1,9}) bui/i,/(trinity)[- ]*(t\d{3}) bui/i,/(gigaset)[- ]+(q\w{1,9}) bui/i,/(vodafone) ([\w ]+)(?:\)| bui)/i],[g,_,[b,y]],[/(surface duo)/i],[_,[g,A],[b,y]],[/droid [\d\.]+; (fp\du?)(?: b|\))/i],[_,[g,"Fairphone"],[b,p]],[/(u304aa)/i],[_,[g,"AT&T"],[b,p]],[/\bsie-(\w*)/i],[_,[g,"Siemens"],[b,p]],[/\b(rct\w+) b/i],[_,[g,"RCA"],[b,y]],[/\b(venue[\d ]{2,7}) b/i],[_,[g,"Dell"],[b,y]],[/\b(q(?:mv|ta)\w+) b/i],[_,[g,"Verizon"],[b,y]],[/\b(?:barnes[& ]+noble |bn[rt])([\w\+ ]*) b/i],[_,[g,"Barnes & Noble"],[b,y]],[/\b(tm\d{3}\w+) b/i],[_,[g,"NuVision"],[b,y]],[/\b(k88) b/i],[_,[g,"ZTE"],[b,y]],[/\b(nx\d{3}j) b/i],[_,[g,"ZTE"],[b,p]],[/\b(gen\d{3}) b.+49h/i],[_,[g,"Swiss"],[b,p]],[/\b(zur\d{3}) b/i],[_,[g,"Swiss"],[b,y]],[/\b((zeki)?tb.*\b) b/i],[_,[g,"Zeki"],[b,y]],[/\b([yr]\d{2}) b/i,/\b(dragon[- ]+touch |dt)(\w{5}) b/i],[[g,"Dragon Touch"],_,[b,y]],[/\b(ns-?\w{0,9}) b/i],[_,[g,"Insignia"],[b,y]],[/\b((nxa|next)-?\w{0,9}) b/i],[_,[g,"NextBook"],[b,y]],[/\b(xtreme\_)?(v(1[045]|2[015]|[3469]0|7[05])) b/i],[[g,"Voice"],_,[b,p]],[/\b(lvtel\-)?(v1[12]) b/i],[[g,"LvTel"],_,[b,p]],[/\b(ph-1) /i],[_,[g,"Essential"],[b,p]],[/\b(v(100md|700na|7011|917g).*\b) b/i],[_,[g,"Envizen"],[b,y]],[/\b(trio[-\w\. ]+) b/i],[_,[g,"MachSpeed"],[b,y]],[/\btu_(1491) b/i],[_,[g,"Rotor"],[b,y]],[/(shield[\w ]+) b/i],[_,[g,"Nvidia"],[b,y]],[/(sprint) (\w+)/i],[g,_,[b,p]],[/(kin\.[onetw]{3})/i],[[_,/\./g," "],[g,A],[b,p]],[/droid.+; (cc6666?|et5[16]|mc[239][23]x?|vc8[03]x?)\)/i],[_,[g,D],[b,y]],[/droid.+; (ec30|ps20|tc[2-8]\d[kx])\)/i],[_,[g,D],[b,p]],[/smart-tv.+(samsung)/i],[g,[b,S]],[/hbbtv.+maple;(\d+)/i],[[_,/^/,"SmartTV"],[g,se],[b,S]],[/(nux; netcast.+smarttv|lg (netcast\.tv-201\d|android tv))/i],[[g,B],[b,S]],[/(apple) ?tv/i],[g,[_,L+" TV"],[b,S]],[/crkey/i],[[_,x+"cast"],[g,q],[b,S]],[/droid.+aft(\w+)( bui|\))/i],[_,[g,C],[b,S]],[/\(dtv[\);].+(aquos)/i,/(aquos-tv[\w ]+)\)/i],[_,[g,he],[b,S]],[/(bravia[\w ]+)( bui|\))/i],[_,[g,ae],[b,S]],[/(mitv-\w{5}) bui/i],[_,[g,ye],[b,S]],[/Hbbtv.*(technisat) (.*);/i],[g,_,[b,S]],[/\b(roku)[\dx]*[\)\/]((?:dvp-)?[\d\.]*)/i,/hbbtv\/\d+\.\d+\.\d+ +\([\w\+ ]*; *([\w\d][^;]*);([^;]*)/i],[[g,ht],[_,ht],[b,S]],[/\b(android tv|smart[- ]?tv|opera tv|tv; rv:)\b/i],[[b,S]],[/(ouya)/i,/(nintendo) ([wids3utch]+)/i],[g,_,[b,m]],[/droid.+; (shield) bui/i],[_,[g,"Nvidia"],[b,m]],[/(playstation [345portablevi]+)/i],[_,[g,ae],[b,m]],[/\b(xbox(?: one)?(?!; xbox))[\); ]/i],[_,[g,A],[b,m]],[/((pebble))app/i],[g,_,[b,E]],[/(watch)(?: ?os[,\/]|\d,\d\/)[\d\.]+/i],[_,[g,L],[b,E]],[/droid.+; (glass) \d/i],[_,[g,q],[b,E]],[/droid.+; (wt63?0{2,3})\)/i],[_,[g,D],[b,E]],[/(quest( 2| pro)?)/i],[_,[g,V],[b,E]],[/(tesla)(?: qtcarbrowser|\/[-\w\.]+)/i],[g,[b,k]],[/(aeobc)\b/i],[_,[g,C],[b,k]],[/droid .+?; ([^;]+?)(?: bui|; wv\)|\) applew).+? mobile safari/i],[_,[b,p]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+?(?! mobile) safari/i],[_,[b,y]],[/\b((tablet|tab)[;\/]|focus\/\d(?!.+mobile))/i],[[b,y]],[/(phone|mobile(?:[;\/]| [ \w\/\.]*safari)|pda(?=.+windows ce))/i],[[b,p]],[/(android[-\w\. ]{0,9});.+buil/i],[_,[g,"Generic"]]],engine:[[/windows.+ edge\/([\w\.]+)/i],[c,[v,F+"HTML"]],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[c,[v,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\/([\w\.]+)/i,/ekioh(flow)\/([\w\.]+)/i,/(khtml|tasman|links)[\/ ]\(?([\w\.]+)/i,/(icab)[\/ ]([23]\.[\d\.]+)/i,/\b(libweb)/i],[v,c],[/rv\:([\w\.]{1,9})\b.+(gecko)/i],[c,v]],os:[[/microsoft (windows) (vista|xp)/i],[v,c],[/(windows (?:phone(?: os)?|mobile))[\/ ]?([\d\.\w ]*)/i],[v,[c,Ht,hi]],[/windows nt 6\.2; (arm)/i,/windows[\/ ]?([ntce\d\. ]+\w)(?!.+xbox)/i,/(?:win(?=3|9|n)|win 9x )([nt\d\.]+)/i],[[c,Ht,hi],[v,"Windows"]],[/ip[honead]{2,4}\b(?:.*os ([\w]+) like mac|; opera)/i,/(?:ios;fbsv\/|iphone.+ios[\/ ])([\d\.]+)/i,/cfnetwork\/.+darwin/i],[[c,/_/g,"."],[v,"iOS"]],[/(mac os x) ?([\w\. ]*)/i,/(macintosh|mac_powerpc\b)(?!.+haiku)/i],[[v,Z],[c,/_/g,"."]],[/droid ([\w\.]+)\b.+(android[- ]x86|harmonyos)/i],[c,v],[/(android|webos|qnx|bada|rim tablet os|maemo|meego|sailfish)[-\/ ]?([\w\.]*)/i,/(blackberry)\w*\/([\w\.]*)/i,/(tizen|kaios)[\/ ]([\w\.]+)/i,/\((series40);/i],[v,c],[/\(bb(10);/i],[c,[v,O]],[/(?:symbian ?os|symbos|s60(?=;)|series60)[-\/ ]?([\w\.]*)/i],[c,[v,"Symbian"]],[/mozilla\/[\d\.]+ \((?:mobile|tablet|tv|mobile; [\w ]+); rv:.+ gecko\/([\w\.]+)/i],[c,[v,Y+" OS"]],[/web0s;.+rt(tv)/i,/\b(?:hp)?wos(?:browser)?\/([\w\.]+)/i],[c,[v,"webOS"]],[/watch(?: ?os[,\/]|\d,\d\/)([\d\.]+)/i],[c,[v,"watchOS"]],[/crkey\/([\d\.]+)/i],[c,[v,x+"cast"]],[/(cros) [\w]+(?:\)| ([\w\.]+)\b)/i],[[v,K],c],[/panasonic;(viera)/i,/(netrange)mmh/i,/(nettv)\/(\d+\.[\w\.]+)/i,/(nintendo|playstation) ([wids345portablevuch]+)/i,/(xbox); +xbox ([^\);]+)/i,/\b(joli|palm)\b ?(?:os)?\/?([\w\.]*)/i,/(mint)[\/\(\) ]?(\w*)/i,/(mageia|vectorlinux)[; ]/i,/([kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?= linux)|slackware|fedora|mandriva|centos|pclinuxos|red ?hat|zenwalk|linpus|raspbian|plan 9|minix|risc os|contiki|deepin|manjaro|elementary os|sabayon|linspire)(?: gnu\/linux)?(?: enterprise)?(?:[- ]linux)?(?:-gnu)?[-\/ ]?(?!chrom|package)([-\w\.]*)/i,/(hurd|linux) ?([\w\.]*)/i,/(gnu) ?([\w\.]*)/i,/\b([-frentopcghs]{0,5}bsd|dragonfly)[\/ ]?(?!amd|[ix346]{1,2}86)([\w\.]*)/i,/(haiku) (\w+)/i],[v,c],[/(sunos) ?([\w\.\d]*)/i],[[v,"Solaris"],c],[/((?:open)?solaris)[-\/ ]?([\w\.]*)/i,/(aix) ((\d)(?=\.|\)| )[\w\.])*/i,/\b(beos|os\/2|amigaos|morphos|openvms|fuchsia|hp-ux|serenityos)/i,/(unix) ?([\w\.]*)/i],[v,c]]},at=function(ge,P){if(typeof ge===h&&(P=ge,ge=s),!(this instanceof at))return new at(ge,P).getResult();var ve=typeof i!==a&&i.navigator?i.navigator:s,Te=ge||(ve&&ve.userAgent?ve.userAgent:n),Mt=ve&&ve.userAgentData?ve.userAgentData:s,nt=P?_e(ui,P):ui,Le=ve&&ve.userAgent==Te;return this.getBrowser=function(){var le={};return le[v]=s,le[c]=s,be.call(le,Te,nt.browser),le[f]=ze(le[c]),Le&&ve&&ve.brave&&typeof ve.brave.isBrave==o&&(le[v]="Brave"),le},this.getCPU=function(){var le={};return le[d]=s,be.call(le,Te,nt.cpu),le},this.getDevice=function(){var le={};return le[g]=s,le[_]=s,le[b]=s,be.call(le,Te,nt.device),Le&&!le[b]&&Mt&&Mt.mobile&&(le[b]=p),Le&&le[_]=="Macintosh"&&ve&&typeof ve.standalone!==a&&ve.maxTouchPoints&&ve.maxTouchPoints>2&&(le[_]="iPad",le[b]=y),le},this.getEngine=function(){var le={};return le[v]=s,le[c]=s,be.call(le,Te,nt.engine),le},this.getOS=function(){var le={};return le[v]=s,le[c]=s,be.call(le,Te,nt.os),Le&&!le[v]&&Mt&&Mt.platform!="Unknown"&&(le[v]=Mt.platform.replace(/chrome os/i,K).replace(/macos/i,Z)),le},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return Te},this.setUA=function(le){return Te=typeof le===u&&le.length>w?ht(le,w):le,this},this.setUA(Te),this};at.VERSION=r,at.BROWSER=Q([v,c,f]),at.CPU=Q([d]),at.DEVICE=Q([_,g,b,m,p,S,y,E,k]),at.ENGINE=at.OS=Q([v,c]),e.exports&&(t=e.exports=at),t.UAParser=at;var et=typeof i!==a&&(i.jQuery||i.Zepto);if(et&&!et.ua){var Lt=new at;et.ua=Lt.getResult(),et.ua.get=function(){return Lt.getUA()},et.ua.set=function(ge){Lt.setUA(ge);var P=Lt.getResult();for(var ve in P)et.ua[ve]=P[ve]}}})(typeof window=="object"?window:Xd)})(ln,ln.exports);var W3=ln.exports;const z3=new W3.UAParser,Ba=z3.getResult();class Y3{constructor(t,i=!0){this.label=t,this.collapsed=i,this.FLAG_FIREFOX=Ba.browser.name==="Firefox"||Ba.engine.name==="Gecko"}stdout(t,i,...s){const r=this.FLAG_FIREFOX?`[${this.label}] - <${t.name.toUpperCase()}>`:`[\x1B[4m${this.label}\x1B[0m] - <\x1B[1m${t.name.toUpperCase()}\x1B[0m>`;if(this.collapsed?globalThis.console.groupCollapsed(r):globalThis.console.group(r),i)for(const n of s)Array.isArray(n)?t(...n):t(n);else t(...s);globalThis.console.trace(),globalThis.console.groupEnd()}clear(...t){this.stdout(globalThis.console.clear,!1,...t)}countReset(...t){this.stdout(globalThis.console.countReset,!1,...t)}count(...t){this.stdout(globalThis.console.count,!1,...t)}counts(...t){this.stdout(globalThis.console.count,!0,...t)}assert(...t){this.stdout(globalThis.console.assert,!1,...t)}asserts(...t){this.stdout(globalThis.console.assert,!0,...t)}dir(...t){this.stdout(globalThis.console.dir,!1,...t)}dirs(...t){this.stdout(globalThis.console.dir,!0,...t)}dirxml(...t){this.stdout(globalThis.console.dirxml,!1,...t)}dirxmls(...t){this.stdout(globalThis.console.dirxml,!0,...t)}table(...t){this.stdout(globalThis.console.table,!1,...t)}tables(...t){this.stdout(globalThis.console.table,!0,...t)}debug(...t){this.stdout(globalThis.console.debug,!1,...t)}debugs(...t){this.stdout(globalThis.console.debug,!0,...t)}info(...t){this.stdout(globalThis.console.info,!1,...t)}infos(...t){this.stdout(globalThis.console.info,!0,...t)}log(...t){this.stdout(globalThis.console.log,!1,...t)}logs(...t){this.stdout(globalThis.console.log,!0,...t)}warn(...t){this.stdout(globalThis.console.warn,!1,...t)}warns(...t){this.stdout(globalThis.console.warn,!0,...t)}error(...t){this.stdout(globalThis.console.error,!1,...t)}errors(...t){this.stdout(globalThis.console.error,!0,...t)}}function q3(e,t,i="span"){return`<${i} class="${t}">${e}</${i}>`}function yt(e){return q3(e,"fn__code","code")}var Z3=function(t){return K3(t)&&!G3(t)};function K3(e){return!!e&&typeof e=="object"}function G3(e){var t=Object.prototype.toString.call(e);return t==="[object RegExp]"||t==="[object Date]"||X3(e)}var J3=typeof Symbol=="function"&&Symbol.for,$3=J3?Symbol.for("react.element"):60103;function X3(e){return e.$$typeof===$3}function Q3(e){return Array.isArray(e)?[]:{}}function _s(e,t){return t.clone!==!1&&t.isMergeableObject(e)?Yi(Q3(e),e,t):e}function e6(e,t,i){return e.concat(t).map(function(s){return _s(s,i)})}function t6(e,t){if(!t.customMerge)return Yi;var i=t.customMerge(e);return typeof i=="function"?i:Yi}function i6(e){return Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(e).filter(function(t){return Object.propertyIsEnumerable.call(e,t)}):[]}function Ha(e){return Object.keys(e).concat(i6(e))}function zc(e,t){try{return t in e}catch{return!1}}function s6(e,t){return zc(e,t)&&!(Object.hasOwnProperty.call(e,t)&&Object.propertyIsEnumerable.call(e,t))}function r6(e,t,i){var s={};return i.isMergeableObject(e)&&Ha(e).forEach(function(r){s[r]=_s(e[r],i)}),Ha(t).forEach(function(r){s6(e,r)||(zc(e,r)&&i.isMergeableObject(t[r])?s[r]=t6(r,i)(e[r],t[r],i):s[r]=_s(t[r],i))}),s}function Yi(e,t,i){i=i||{},i.arrayMerge=i.arrayMerge||e6,i.isMergeableObject=i.isMergeableObject||Z3,i.cloneUnlessOtherwiseSpecified=_s;var s=Array.isArray(t),r=Array.isArray(e),n=s===r;return n?s?i.arrayMerge(e,t,i):r6(e,t,i):_s(t,i)}Yi.all=function(t,i){if(!Array.isArray(t))throw new Error("first argument should be an array");return t.reduce(function(s,r){return Yi(s,r,i)},{})};var n6=Yi,o6=n6;const a6=yn(o6);function xa(...e){return a6.all(e,{arrayMerge:(t,i,s)=>i})}class l6{constructor(t,i,s,r){ne(this,"map",new Map);ne(this,"counter",Math.random());ne(this,"errerEventListener",async t=>{this.logger.warn(t)});ne(this,"messageEventListener",async t=>{const i=t.data;switch(i.type){case"call":{try{if(i.uuid&&i.uuid!==this.uuid)break;if(i.handler.name in this.handlers){const s=this.handlers[i.handler.name],r=await s.func.call(s.this,...i.handler.args),n={type:"return",id:i.id,handler:{name:i.handler.name,result:r}};this.port.postMessage(n)}}catch(s){const r={type:"error",id:i.id,error:s};this.port.postMessage(r)}break}case"error":{const s=this.map.get(i.id);s&&(this.map.delete(i.id),s.reject(i.error));break}case"return":{const s=this.map.get(i.id);s&&(this.map.delete(i.id),s.resolve(i.handler.result));break}}});this.port=t,this.logger=i,this.handlers=s,this.uuid=r,this.port.addEventListener("error",this.errerEventListener),this.port.addEventListener("messageerror",this.errerEventListener),this.port.addEventListener("message",this.messageEventListener)}async call(t,...i){return new Promise((s,r)=>{const n=this.counter++;this.map.set(n,{resolve:s,reject:r});const l={type:"call",id:n,handler:{name:t,args:i}};this.port.postMessage(l)})}async singleCall(t,i,...s){return new Promise((r,n)=>{const l=this.counter++;this.map.set(l,{resolve:r,reject:n});const o={type:"call",id:l,uuid:i,handler:{name:t,args:s}};this.port.postMessage(o)})}}function*Yc(e=0){for(;;)yield e++}const c6=Yc(Math.round(Math.random()*(36**8-1)));function h6(e,t){return`${e.getFullYear().toString().padStart(4,"0")}${(e.getMonth()+1).toString().padStart(2,"0")}${e.getDate().toString().padStart(2,"0")}${e.getHours().toString().padStart(2,"0")}${e.getMinutes().toString().padStart(2,"0")}${e.getSeconds().toString().padStart(2,"0")}-${t.toString(36).padStart(7,"0").slice(-7)}`}function u6(e=new Date,t=c6){return h6(e,t.next().value)}class f6 extends l6{constructor(t,i,s={},r=u6()){super(t,i,s,r)}async ping(t=1e3){const i=Date.now();return new Promise((s,r)=>{const n=setTimeout(()=>{r(new Error(`timeout: ${t}`))},t);this.port.addEventListener("message",l=>{l.data==="pong"&&(clearTimeout(n),s(Date.now()-i))}),this.port.postMessage("ping")})}terminate(){switch(!0){case"terminate"in this.port:this.port.terminate();break;case"close"in this.port:this.port.close();break}}}async function d6(e){return new Promise(t=>{setTimeout(t,e)})}var Nr,Pa;function Ia(){if(Pa)return Nr;Pa=1,Nr=e;function e(t,i){return!t!=!i}return Nr}var Vr,Na;function Va(){if(Na)return Vr;Na=1;var e=/\b(Array|Date|Object|Math|JSON)\b/g;Vr=function(n,l){var o=s(t(n));return l&&typeof l=="string"&&(l=r(l)),l?i(n,o,l):o};function t(n){return n.replace(/\.\w+|\w+ *\(|"[^"]*"|'[^']*'|\/([^/]+)\//g,"").replace(e,"").match(/[a-zA-Z_]\w*/g)||[]}function i(n,l,o){var a=/\.\w+|\w+ *\(|"[^"]*"|'[^']*'|\/([^/]+)\/|[a-zA-Z_]\w*/g;return n.replace(a,function(h){return h[h.length-1]=="("||~l.indexOf(h)?o(h):h})}function s(n){for(var l=[],o=0;o<n.length;o++)~l.indexOf(n[o])||l.push(n[o]);return l}function r(n){return function(l){return n+l}}return Vr}var Js,cn;try{Js=Ia()}catch{Js=Ia()}try{cn=Va()}catch{cn=Va()}var _6=it;function it(e,t){if(!(this instanceof it))return new it(e,t);if(this.node=this.start=this.peeked=e,this.root=t,this.closingTag=!1,this._revisit=!0,this._selects=[],this._rejects=[],e&&this.higher(e))throw new Error("root must be a parent or ancestor to node")}it.prototype.reset=function(e){return this.node=e||this.start,this};it.prototype.revisit=function(e){return this._revisit=e??!0,this};it.prototype.opening=function(){return this.node.nodeType==1&&(this.closingTag=!1),this};it.prototype.atOpening=function(){return!this.closingTag};it.prototype.closing=function(){return this.node.nodeType==1&&(this.closingTag=!0),this};it.prototype.atClosing=function(){return this.closingTag};it.prototype.next=qc("nextSibling","firstChild");it.prototype.previous=it.prototype.prev=qc("previousSibling","lastChild");function qc(e,t){var i=e=="nextSibling";return function(r,n,l){r=this.compile(r),n=n&&n>0?n:1;for(var o=this.node,a=this.closingTag,h=this._revisit;o;){if(Js(i,a)&&o[t])o=o[t],a=!i;else if(o.nodeType==1&&!o[t]&&Js(i,a)){if(a=i,!h)continue}else if(o[e])o=o[e],a=!i;else if(o=o.parentNode,a=i,!h)continue;if(!o||this.higher(o,this.root))break;if(r(o)&&this.selects(o,l)&&this.rejects(o,l)){if(--n)continue;return l||(this.node=o),this.closingTag=a,o}}return null}}it.prototype.select=function(e){return e=this.compile(e),this._selects.push(e),this};it.prototype.selects=function(e,t){var i=this._selects,s=i.length;if(!s)return!0;for(var r=0;r<s;r++)if(i[r].call(this,e,t))return!0;return!1};it.prototype.reject=function(e){return e=this.compile(e),this._rejects.push(e),this};it.prototype.rejects=function(e,t){var i=this._rejects,s=i.length;if(!s)return!0;for(var r=0;r<s;r++)if(i[r].call(this,e,t))return!1;return!0};it.prototype.higher=function(e){var t=this.root;if(!t)return!1;for(e=e.parentNode;e&&e!=t;)e=e.parentNode;return e!=t};it.prototype.compile=function(e){switch(typeof e){case"number":return function(t){return e==t.nodeType};case"string":return new Function("node","return "+cn(e,"node."));case"function":return e;default:return function(){return!0}}};it.prototype.peak=it.prototype.peek=function(e,t){return arguments.length==1&&(t=e,e=!0),t=t??1,t?t>0?this.next(e,t,!0):this.prev(e,Math.abs(t),!0):this.node};it.prototype.use=function(e){return e(this),this};var p6=_6,$s=window.getSelection(),m6=g6;function g6(e,t){if(arguments.length==1){if(!$s.rangeCount)return;var i={},l=$s.getRangeAt(0),s=l.cloneRange();return s.selectNodeContents(e),s.setEnd(l.endContainer,l.endOffset),i.end=s.toString().length,s.setStart(l.startContainer,l.startOffset),i.start=i.end-s.toString().length,i.atStart=s.startOffset===0,i}for(var r=t.end&&t.end!==t.start,n=0,l=document.createRange(),o=p6(e).select(Node.TEXT_NODE).revisit(!1),a,h,u=t.start>e.textContent.length?e.textContent.length:t.start,f=t.end>e.textContent.length?e.textContent.length:t.end,_=t.atStart;a=o.next();){var v=n;n+=a.textContent.length;var b=_?n>u:n>=u;if(!h&&b&&(h=!0,l.setStart(a,u-v),!r)){l.collapse(!0),ja(e,l);break}if(r&&n>=f){l.setEnd(a,f-v),ja(e,l);break}}}function ja(e,t){e.focus(),$s.removeAllRanges(),$s.addRange(t)}const Fa=yn(m6);function v6(e,t){e.deleteContents(),e.insertNode(document.createTextNode(t))}const b6=C6();Zc();k6();function y6(){return!!globalThis.require}function w6(){return!!globalThis.process}function S6(){var e,t;return!!((t=(e=globalThis.process)==null?void 0:e.versions)!=null&&t.hasOwnProperty("electron"))}function C6(){return w6()&&y6()&&S6()}function Zc(){var i,s,r,n,l,o;switch((r=(s=(i=globalThis==null?void 0:globalThis.document)==null?void 0:i.documentElement)==null?void 0:s.dataset)==null?void 0:r.themeMode){case"light":return!0;case"dark":return!1}switch((o=(l=(n=globalThis==null?void 0:globalThis.siyuan)==null?void 0:n.config)==null?void 0:l.appearance)==null?void 0:o.mode){case 0:return!0;case 1:return!1}return window.matchMedia("(prefers-color-scheme: light)").matches}function k6(){return!Zc()}function E6(e=!0,t=(i=>(i=globalThis.process)==null?void 0:i.platform)()==="darwin"){const s=[{role:"about"},...t?[{type:"separator"},{role:"help"},{type:"separator"},{role:"services"},{type:"separator"},{role:"hide"},{role:"hideOthers"},{role:"unhide"}]:[],{type:"separator"},{role:"quit"}],r=[...t?[{role:"recentDocuments"},{role:"clearRecentDocuments"},{type:"separator"}]:[],{role:"close"}],n=[{role:"undo"},{role:"redo"},{type:"separator"},{role:"cut"},{role:"copy"},{role:"paste"},{role:"pasteAndMatchStyle"},{role:"delete"},{type:"separator"},{role:"selectAll"},{type:"separator"},{role:"toggleSpellChecker"},...t?[{type:"separator"},{role:"showSubstitutions"},{role:"toggleTextReplacement"},{type:"separator"},{role:"toggleSmartQuotes"},{role:"toggleSmartDashes"},{type:"separator"},{role:"startSpeaking"},{role:"stopSpeaking"}]:[]],l=[{role:"reload"},{role:"forceReload"},{type:"separator"},{role:"resetZoom"},{role:"zoomIn",accelerator:"CmdOrCtrl+="},{role:"zoomOut"},...t?[{role:"zoom"},{type:"separator"},{role:"front"}]:[{type:"separator"},{label:"Toggle On Top",click:(h,u,f)=>{u&&u.setAlwaysOnTop(!u.isAlwaysOnTop())},type:"checkbox",checked:e,accelerator:"CmdOrCtrl+Shift+Space"}],{role:"togglefullscreen"},{type:"separator"},{role:"toggleDevTools"}],o=[...t?[{role:"window"},{type:"separator"},{role:"toggleTabBar"},{role:"selectNextTab"},{role:"selectPreviousTab"},{role:"mergeAllWindows"},{role:"moveTabToNewWindow"},{type:"separator"}]:[],{role:"minimize"},{role:"close"}],a=[{role:"appMenu",submenu:s},{role:"fileMenu",submenu:r},{role:"editMenu",submenu:n},{role:"viewMenu",submenu:l},{role:"windowMenu",submenu:o}];return t&&a.push({role:"shareMenu"}),a}function L6(e){var r,n,l,o;e.base.center&&(delete e.base.x,delete e.base.y);const{BrowserWindow:t,Menu:i}=globalThis.require("@electron/remote"),s=new t(e.base);if((r=e.extra)!=null&&r.enableMenuBar)if((n=e.extra)!=null&&n.menu)s.setMenu(e.extra.menu);else{const a=i.buildFromTemplate(E6(e.base.alwaysOnTop));s.setMenu(a)}else s.removeMenu();return(l=e.extra)!=null&&l.enableElectron&&globalThis.require("@electron/remote").require("@electron/remote/main").enable(s.webContents),s.loadURL(e.url.toString(),(o=e.extra)==null?void 0:o.loadURLOptions),s}function M6(e){var s,r,n;e.base.center&&(e.base.width&&(e.base.x=(globalThis.screen.width-e.base.width)/2),e.base.height&&(e.base.y=(globalThis.screen.height-e.base.height)/2));const t=["popup = true"];return e.base.x!==void 0&&t.push(`left = ${e.base.x}`),e.base.y!==void 0&&t.push(`top = ${e.base.y}`),e.base.width!==void 0&&t.push(`width = ${e.base.width}`),e.base.height!==void 0&&t.push(`height = ${e.base.height}`),((s=e.extra)==null?void 0:s.noopener)!==void 0&&t.push(`noopener = ${e.extra.noopener}`),((r=e.extra)==null?void 0:r.noreferrer)!==void 0&&t.push(`noreferrer = ${e.extra.noreferrer}`),globalThis.open(e.url.toString(),(n=e.extra)==null?void 0:n.target,t.join(", "))}function T6(e){return b6?L6(e):M6(e)}const me={JUPYTER_WORKER_FILE_NAME:"jupyter",JUPYTER_WORKER_BROADCAST_CHANNEL_NAME:"jupyter-worker",JUPYTER_UNKNOWN_VALUE:"unknown",JUPYTER_LAST_RUN_TIME_FORMAT:"YYYY-MM-DD HH:mm:ss.SSS",JUPYTER_RUNTIME_FORMAT:"HH:mm:ss.SSS",JUPYTER_CODE_CELL_ACTION_RUN_CLASS_NAME:"protyle-action__jupyter-client-code-cell-run",JUPYTER_NOTEBOOK_BUTTON_MENU_CLASS_NAME:"protyle-breadcrumb__jupyter-client-notebook-menu",attrs:{kernel:{id:"custom-jupyter-kernel-id",name:"custom-jupyter-kernel-name",language:"custom-jupyter-kernel-language",display_name:"custom-jupyter-kernel-display-name",status:"custom-jupyter-kernel-status",connection_status:"custom-jupyter-kernel-connection-status"},session:{id:"custom-jupyter-session-id",type:"custom-jupyter-session-type",name:"custom-jupyter-session-name",path:"custom-jupyter-session-path"},code:{type:{key:"custom-jupyter-block-type",value:"code"},time:"custom-jupyter-time",output:"custom-jupyter-output-block-id",index:"custom-jupyter-index",execute_input:"custom-jupyter-time-execute-input",execute_reply:"custom-jupyter-time-execute-reply",busy:"custom-jupyter-time-busy",idle:"custom-jupyter-time-idle"},output:{type:{key:"custom-jupyter-block-type",value:"output"},code:"custom-jupyter-code-block-id",index:"custom-jupyter-index"},other:{prompt:"custom-prompt"}},styles:{success:"color: var(--b3-card-success-color); background-color: var(--b3-card-success-background);",info:"color: var(--b3-card-info-color); background-color: var(--b3-card-info-background);",warning:"color: var(--b3-card-warning-color); background-color: var(--b3-card-warning-background);",error:"color: var(--b3-card-error-color); background-color: var(--b3-card-error-background);"}},jr={jupyter:{server:{enable:!1,settings:{baseUrl:"",appUrl:"",wsUrl:"",token:""}},execute:{goto:!0,content:{silent:!1,store_history:!0,user_expressions:{},allow_stdin:!0,stop_on_error:!0},input:{goto:!0},output:{parser:{xterm:!1,escaped:!0,cntrl:!0}}},inspect:{detail_level:1},complete:{},import:{parser:{xterm:!1,escaped:!0,cntrl:!0}},edit:{delay:125}},xterm:{options:{allowTransparency:!0,disableStdin:!0,convertEol:!0,logLevel:"off",fontFamily:""}}},D6=`<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
<path fill-rule="evenodd" clip-rule="evenodd" d="M10.57 1.14L13.85 4.44L14 4.8V14.5L13.5 15H2.5L2 14.5V1.5L2.5 1H10.22L10.57 1.14ZM10 5H13L10 2V5ZM3 2V14H13V6H9.5L9 5.5V2H3ZM11 7H5V8H11V7ZM5 9H11V10H5V9ZM11 11H5V12H11V11Z" fill="#424242"/>
</svg>
`,A6=`<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
<g clip-path="url(#clip0)">
<path d="M14.4998 3H7.70978L6.8598 2.15002L6.50983 2H1.50983L1.00983 2.5V6.5V13.5L1.50983 14H14.5098L15.0098 13.5V9V3.5L14.4998 3ZM13.9898 11.49V13H1.98981V11.49V7.48999V7H6.4798L6.82977 6.84998L7.68976 5.98999H13.9998V7.48999L13.9898 11.49ZM13.9898 5H7.48981L7.13983 5.15002L6.27985 6.01001H1.99982V3.01001H6.28986L7.13983 3.85999L7.49982 4.01001H13.9998L13.9898 5Z" fill="#424242"/>
</g>
<defs>
<clipPath id="clip0">
<path d="M-0.000183105 0H15.9998V16H-0.000183105V0Z" fill="white"/>
</clipPath>
</defs>
</svg>
`,R6=`<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
<path fill-rule="evenodd" clip-rule="evenodd" d="M6 2.98361V2.97184V2H5.91083C5.59743 2 5.29407 2.06161 5.00128 2.18473C4.70818 2.30798 4.44942 2.48474 4.22578 2.71498C4.00311 2.94422 3.83792 3.19498 3.73282 3.46766L3.73233 3.46898C3.63382 3.7352 3.56814 4.01201 3.53533 4.29917L3.53519 4.30053C3.50678 4.5805 3.4987 4.86844 3.51084 5.16428C3.52272 5.45379 3.52866 5.74329 3.52866 6.03279C3.52866 6.23556 3.48974 6.42594 3.412 6.60507L3.4116 6.60601C3.33687 6.78296 3.23423 6.93866 3.10317 7.07359C2.97644 7.20405 2.82466 7.31055 2.64672 7.3925C2.4706 7.46954 2.28497 7.5082 2.08917 7.5082H2V7.6V8.4V8.4918H2.08917C2.28465 8.4918 2.47001 8.53238 2.64601 8.61334L2.64742 8.61396C2.82457 8.69157 2.97577 8.79762 3.10221 8.93161L3.10412 8.93352C3.23428 9.0637 3.33659 9.21871 3.41129 9.39942L3.41201 9.40108C3.48986 9.58047 3.52866 9.76883 3.52866 9.96721C3.52866 10.2567 3.52272 10.5462 3.51084 10.8357C3.4987 11.1316 3.50677 11.4215 3.53516 11.7055L3.53535 11.7072C3.56819 11.9903 3.63387 12.265 3.73232 12.531L3.73283 12.5323C3.83793 12.805 4.00311 13.0558 4.22578 13.285C4.44942 13.5153 4.70818 13.692 5.00128 13.8153C5.29407 13.9384 5.59743 14 5.91083 14H6V13.2V13.0164H5.91083C5.71095 13.0164 5.52346 12.9777 5.34763 12.9008C5.17396 12.8191 5.02194 12.7126 4.89086 12.5818C4.76386 12.4469 4.66104 12.2911 4.58223 12.1137C4.50838 11.9346 4.47134 11.744 4.47134 11.541C4.47134 11.3127 4.4753 11.0885 4.48321 10.8686C4.49125 10.6411 4.49127 10.4195 4.48324 10.2039C4.47914 9.98246 4.46084 9.76883 4.42823 9.56312C4.39513 9.35024 4.33921 9.14757 4.26039 8.95536C4.18091 8.76157 4.07258 8.57746 3.93616 8.40298C3.82345 8.25881 3.68538 8.12462 3.52283 8C3.68538 7.87538 3.82345 7.74119 3.93616 7.59702C4.07258 7.42254 4.18091 7.23843 4.26039 7.04464C4.33913 6.85263 4.39513 6.65175 4.42826 6.44285C4.46082 6.2333 4.47914 6.01973 4.48324 5.80219C4.49127 5.58262 4.49125 5.36105 4.48321 5.13749C4.4753 4.9134 4.47134 4.68725 4.47134 4.45902C4.47134 4.26019 4.50833 4.07152 4.58238 3.89205C4.66135 3.71034 4.76421 3.55475 4.89086 3.42437C5.02193 3.28942 5.17461 3.18275 5.34802 3.10513C5.5238 3.02427 5.71113 2.98361 5.91083 2.98361H6ZM10 13.0164V13.0282V14H10.0892C10.4026 14 10.7059 13.9384 10.9987 13.8153C11.2918 13.692 11.5506 13.5153 11.7742 13.285C11.9969 13.0558 12.1621 12.805 12.2672 12.5323L12.2677 12.531C12.3662 12.2648 12.4319 11.988 12.4647 11.7008L12.4648 11.6995C12.4932 11.4195 12.5013 11.1316 12.4892 10.8357C12.4773 10.5462 12.4713 10.2567 12.4713 9.96721C12.4713 9.76444 12.5103 9.57406 12.588 9.39493L12.5884 9.39399C12.6631 9.21704 12.7658 9.06134 12.8968 8.92642C13.0236 8.79595 13.1753 8.68945 13.3533 8.6075C13.5294 8.53046 13.715 8.4918 13.9108 8.4918H14V8.4V7.6V7.5082H13.9108C13.7153 7.5082 13.53 7.46762 13.354 7.38666L13.3526 7.38604C13.1754 7.30844 13.0242 7.20238 12.8978 7.06839L12.8959 7.06648C12.7657 6.9363 12.6634 6.78129 12.5887 6.60058L12.588 6.59892C12.5101 6.41953 12.4713 6.23117 12.4713 6.03279C12.4713 5.74329 12.4773 5.45379 12.4892 5.16428C12.5013 4.86842 12.4932 4.57848 12.4648 4.29454L12.4646 4.29285C12.4318 4.00971 12.3661 3.73502 12.2677 3.46897L12.2672 3.46766C12.1621 3.19499 11.9969 2.94422 11.7742 2.71498C11.5506 2.48474 11.2918 2.30798 10.9987 2.18473C10.7059 2.06161 10.4026 2 10.0892 2H10V2.8V2.98361H10.0892C10.2891 2.98361 10.4765 3.0223 10.6524 3.09917C10.826 3.18092 10.9781 3.28736 11.1091 3.41823C11.2361 3.55305 11.339 3.70889 11.4178 3.88628C11.4916 4.0654 11.5287 4.25596 11.5287 4.45902C11.5287 4.68727 11.5247 4.91145 11.5168 5.13142C11.5088 5.35894 11.5087 5.58049 11.5168 5.79605C11.5209 6.01754 11.5392 6.23117 11.5718 6.43688C11.6049 6.64976 11.6608 6.85243 11.7396 7.04464C11.8191 7.23843 11.9274 7.42254 12.0638 7.59702C12.1765 7.74119 12.3146 7.87538 12.4772 8C12.3146 8.12462 12.1765 8.25881 12.0638 8.40298C11.9274 8.57746 11.8191 8.76157 11.7396 8.95536C11.6609 9.14737 11.6049 9.34825 11.5717 9.55715C11.5392 9.7667 11.5209 9.98027 11.5168 10.1978C11.5087 10.4174 11.5087 10.6389 11.5168 10.8625C11.5247 11.0866 11.5287 11.3128 11.5287 11.541C11.5287 11.7398 11.4917 11.9285 11.4176 12.1079C11.3386 12.2897 11.2358 12.4452 11.1091 12.5756C10.9781 12.7106 10.8254 12.8173 10.652 12.8949C10.4762 12.9757 10.2889 13.0164 10.0892 13.0164H10Z" fill="#424242"/>
</svg>
`,O6=`<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
<path fill-rule="evenodd" clip-rule="evenodd" d="M1.49915 2H14.4991L14.9991 2.5V12.5L14.4991 13H1.49915L0.999146 12.5V2.5L1.49915 2ZM1.99915 3V12H13.9991V3H1.99915ZM3.99915 5H11.9991V6H3.99915V5ZM9.99915 7H3.99915V8H9.99915V7ZM3.99915 9H7.99915V10H3.99915V9Z" fill="#424242"/>
</svg>
`,B6=`<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
<path fill-rule="evenodd" clip-rule="evenodd" d="M11.1052 4.5613L7.67505 7.98827L6.54072 6.86834L8.61098 4.78848H3.81131C3.17483 4.78848 2.56442 5.04132 2.11436 5.49138C1.6643 5.94144 1.41147 6.55184 1.41147 7.18832C1.41147 7.8248 1.6643 8.43521 2.11436 8.88527C2.56442 9.33532 3.17483 9.58816 3.81131 9.58816H4.70085V11.1881H3.8209C2.7921 11.142 1.8207 10.7009 1.10896 9.95661C0.397222 9.21231 0 8.22216 0 7.19232C0 6.16249 0.397222 5.17234 1.10896 4.42803C1.8207 3.68373 2.7921 3.24263 3.8209 3.19659H8.62058L6.54072 1.13112L7.67505 0L11.1052 3.43177V4.5613ZM16.6201 24H7.0207L6.22075 23.2V10.4121L7.0207 9.61215H16.6201L17.42 10.4121V23.2L16.6201 24ZM7.82064 22.4001H15.8201V11.212H7.82064V22.4001ZM13.4203 1.6015H23.0196L23.8196 2.40145V15.1878L23.0196 15.9877H19.0199V14.3878H22.2197V3.20139H14.2202V7.98828H12.6203V2.40145L13.4203 1.6015ZM14.2202 12.7879H9.42053V14.3878H14.2202V12.7879ZM9.42053 15.9877H14.2202V17.5876H9.42053V15.9877ZM14.2202 19.1875H9.42053V20.7874H14.2202V19.1875ZM15.8201 4.78848H20.6198V6.38838H15.8201V4.78848ZM20.6198 11.188H19.0199V12.7879H20.6198V11.188ZM17.2824 8.01228V7.98828H20.6198V9.58817H18.8583L17.2824 8.01228Z" fill="#424242"/>
</svg>
`,H6=`<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M11.34 9.70998H12.05L14.72 7.04005V6.32997L13.38 5.00001H12.68L10.86 6.81007H5.86V5.56007L7.71999 3.70997V3L5.71998 1H5.00001L1 5.00001V5.70997L3 7.70998H3.71003L4.84998 6.56007V12.35L5.34999 12.85H10V13.37L11.33 14.71H12.04L14.7101 12.0401V11.33L13.37 10H12.67L10.81 11.85H5.81001V7.84999H10V8.32997L11.34 9.70998ZM13.0301 6.06007L13.66 6.68995L11.66 8.68996L11.0301 8.06007L13.0301 6.06007ZM13.0301 11.0601L13.66 11.69L11.66 13.69L11.0301 13.0601L13.0301 11.0601ZM3.34998 6.65004L2.06 5.34999L5.34999 2.06006L6.65004 3.34998L3.34998 6.65004Z" fill="#EE9D28"/>
</svg>
`,x6=`<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
<path fill-rule="evenodd" clip-rule="evenodd" d="M8 1.00305C6.14348 1.00305 4.36299 1.74059 3.05023 3.05334C1.73748 4.3661 1 6.14654 1 8.00305V8.43311C1.09 9.94311 2.91 10.2231 4 9.13306C4.35648 8.81625 4.82054 8.64759 5.29724 8.66162C5.77395 8.67565 6.22729 8.87127 6.56451 9.2085C6.90174 9.54572 7.09736 9.99912 7.11139 10.4758C7.12542 10.9525 6.95682 11.4166 6.64001 11.7731C5.54001 12.9331 5.85 14.843 7.44 14.973H8.03998C9.89649 14.973 11.677 14.2356 12.9897 12.9229C14.3025 11.6101 15.04 9.82954 15.04 7.97302C15.04 6.11651 14.3025 4.33607 12.9897 3.02332C11.677 1.71056 9.89649 0.973022 8.03998 0.973022L8 1.00305ZM8 14.0031H7.47998C7.34751 13.9989 7.22047 13.9495 7.12 13.863C7.04052 13.7807 6.98815 13.6761 6.96997 13.5631C6.9381 13.3682 6.95328 13.1684 7.01416 12.9806C7.07504 12.7927 7.17989 12.6222 7.32001 12.483C7.84048 11.9474 8.13165 11.2299 8.13165 10.483C8.13165 9.73615 7.84048 9.0187 7.32001 8.48303C7.05348 8.21635 6.73699 8.00481 6.38867 7.86047C6.04036 7.71614 5.66702 7.64185 5.28998 7.64185C4.91294 7.64185 4.5396 7.71614 4.19128 7.86047C3.84297 8.00481 3.52654 8.21635 3.26001 8.48303C3.15068 8.61081 3.01089 8.709 2.85358 8.76843C2.69626 8.82786 2.52649 8.84657 2.35999 8.823C2.27593 8.80694 2.19903 8.76498 2.14001 8.703C2.07131 8.6224 2.03556 8.5189 2.03998 8.41309V8.04309C2.03998 6.8564 2.39192 5.69629 3.05121 4.70959C3.7105 3.7229 4.64754 2.95388 5.7439 2.49976C6.84025 2.04563 8.04669 1.92681 9.21057 2.15833C10.3745 2.38984 11.4435 2.9613 12.2827 3.80042C13.1218 4.63953 13.6932 5.70867 13.9247 6.87256C14.1562 8.03644 14.0374 9.24275 13.5833 10.3391C13.1291 11.4355 12.3601 12.3726 11.3734 13.0319C10.3867 13.6911 9.22667 14.0431 8.03998 14.0431L8 14.0031ZM9 3.99683C9 4.54911 8.55228 4.99683 8 4.99683C7.44771 4.99683 7 4.54911 7 3.99683C7 3.44454 7.44771 2.99683 8 2.99683C8.55228 2.99683 9 3.44454 9 3.99683ZM12 11.0037C12 11.5559 11.5523 12.0037 11 12.0037C10.4477 12.0037 10 11.5559 10 11.0037C10 10.4514 10.4477 10.0037 11 10.0037C11.5523 10.0037 12 10.4514 12 11.0037ZM5 6.00415C5.55229 6.00415 6 5.55644 6 5.00415C6 4.45187 5.55229 4.00415 5 4.00415C4.44772 4.00415 4 4.45187 4 5.00415C4 5.55644 4.44772 6.00415 5 6.00415ZM12 5.00415C12 5.55644 11.5523 6.00415 11 6.00415C10.4477 6.00415 10 5.55644 10 5.00415C10 4.45187 10.4477 4.00415 11 4.00415C11.5523 4.00415 12 4.45187 12 5.00415ZM13.0001 7.99939C13.0001 8.55167 12.5524 8.99939 12.0001 8.99939C11.4478 8.99939 11.0001 8.55167 11.0001 7.99939C11.0001 7.4471 11.4478 6.99939 12.0001 6.99939C12.5524 6.99939 13.0001 7.4471 13.0001 7.99939Z" fill="#424242"/>
</svg>
`,P6=`<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
<path fill-rule="evenodd" clip-rule="evenodd" d="M4 6H12V7H4V6ZM12 9H4V10H12V9Z" fill="#424242"/>
<path fill-rule="evenodd" clip-rule="evenodd" d="M1 4L2 3H14L15 4V12L14 13H2L1 12V4ZM2 4V12H14V4H2Z" fill="#424242"/>
</svg>
`,I6=`<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
<path fill-rule="evenodd" clip-rule="evenodd" d="M7 3L8 2H14L15 3V8L14 9H10V8H14V3H8V6H7V3ZM9 9V8L8 7H7H2L1 8V13L2 14H8L9 13V9ZM8 8V9V13H2V8H7H8ZM9.41421 7L9 6.58579V6H13V7H9.41421ZM9 4H13V5H9V4ZM7 10H3V11H7V10Z" fill="#007ACC"/>
</svg>
`,N6=`<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
<path fill-rule="evenodd" clip-rule="evenodd" d="M14 2H8L7 3V6H8V3H14V8H10V9H14L15 8V3L14 2ZM9 6H13V7H9.41L9 6.59V6ZM7 7H2L1 8V13L2 14H8L9 13V8L8 7H7ZM8 13H2V8H8V9V13ZM3 9H7V10H3V9ZM3 11H7V12H3V11ZM9 4H13V5H9V4Z" fill="#EE9D28"/>
</svg>
`,V6=`<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
<path fill-rule="evenodd" clip-rule="evenodd" d="M7.41354 1.55996L8.31152 1H11.6056L12.424 2.57465L10.2356 6H12.0174L12.7363 7.69512L5.61943 15L4.01675 13.837L6.11943 10H4.89798L4 8.55996L7.41354 1.55996ZM7.78033 9L4.90054 14.3049L12.0174 7H8.31152L11.6056 2H8.31152L4.89798 9H7.78033Z" fill="#FF8E00"/>
</svg>
`,j6=`<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M14.45 4.5L9.44995 2H8.55005L1.55005 5.5L1 6.39001V10.89L1.55005 11.79L6.55005 14.29H7.44995L14.45 10.79L15 9.89001V5.39001L14.45 4.5ZM6.44995 13.14L1.94995 10.89V7.17004L6.44995 9.17004V13.14ZM6.94995 8.33997L2.29004 6.22998L8.94995 2.89001L13.62 5.22998L6.94995 8.33997ZM13.95 9.89001L7.44995 13.14V9.20996L13.95 6.20996V9.89001Z" fill="#007ACC"/>
</svg>
`,F6=`<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M11.4965 4C10.655 3.9989 9.84136 4.30189 9.20557 4.85315C8.56977 5.40442 8.15465 6.16684 8.0365 7H4.9364C4.8147 6.52867 4.52533 6.11794 4.12244 5.84473C3.71955 5.57152 3.23083 5.45466 2.74792 5.51599C2.26502 5.57733 1.82106 5.81261 1.49927 6.17786C1.17747 6.54311 1 7.01322 1 7.5C1 7.98679 1.17747 8.45689 1.49927 8.82215C1.82106 9.1874 2.26502 9.42267 2.74792 9.48401C3.23083 9.54535 3.71955 9.42848 4.12244 9.15528C4.52533 8.88207 4.8147 8.47133 4.9364 8H8.0365C8.13236 8.66418 8.41717 9.28683 8.85693 9.7937C9.2967 10.3006 9.87284 10.6703 10.5168 10.8589C11.1609 11.0475 11.8455 11.047 12.4893 10.8574C13.133 10.6679 13.7087 10.2973 14.1477 9.7898C14.5867 9.28227 14.8706 8.65919 14.9655 7.99488C15.0603 7.33056 14.9621 6.65298 14.6827 6.04285C14.4034 5.43272 13.9545 4.91578 13.3895 4.55359C12.8246 4.19141 12.1675 3.99922 11.4965 4ZM11.4965 10C11.002 10 10.5187 9.85332 10.1075 9.57862C9.69642 9.30391 9.37599 8.91348 9.18677 8.45667C8.99755 7.99985 8.94809 7.49728 9.04456 7.01233C9.14102 6.52738 9.37901 6.08181 9.72864 5.73218C10.0783 5.38255 10.5238 5.14456 11.0088 5.0481C11.4937 4.95164 11.9963 5.00109 12.4531 5.19031C12.9099 5.37953 13.3004 5.69996 13.5751 6.11109C13.8498 6.52221 13.9965 7.00555 13.9965 7.5C13.9965 8.16304 13.7331 8.79898 13.2643 9.26783C12.7954 9.73667 12.1595 10 11.4965 10Z" fill="#007ACC"/>
</svg>
`,U6=`<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M15 4H10V3H15V4ZM14 7H12V8H14V7ZM10 7H1V8H10V7ZM12 13H1V14H12V13ZM7 10H1V11H7V10ZM15 10H10V11H15V10ZM8 2V5H1V2H8ZM7 3H2V4H7V3Z" fill="#424242"/>
</svg>
`,Fr=`<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M13.51 4L8.51001 1H7.51001L2.51001 4L2.02002 4.85999V10.86L2.51001 11.71L7.51001 14.71H8.51001L13.51 11.71L14 10.86V4.85999L13.51 4ZM7.51001 13.5601L3.01001 10.86V5.69995L7.51001 8.15002V13.5601ZM3.27002 4.69995L8.01001 1.85999L12.75 4.69995L8.01001 7.29004L3.27002 4.69995ZM13.01 10.86L8.51001 13.5601V8.15002L13.01 5.69995V10.86Z" fill="#652D90"/>
</svg>
`,W6=`<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
<path fill-rule="evenodd" clip-rule="evenodd" d="M2.87289 1.10023C3.20768 1.23579 3.47545 1.498 3.61802 1.82988C3.69032 1.99959 3.72675 2.18242 3.72502 2.36688C3.72617 2.54999 3.68975 2.7314 3.61802 2.89988C3.51299 3.14567 3.33782 3.35503 3.11442 3.50177C2.89102 3.64851 2.6293 3.72612 2.36202 3.72488C2.17924 3.72592 1.99818 3.68951 1.83002 3.61788C1.58298 3.51406 1.37227 3.33932 1.22453 3.11575C1.0768 2.89219 0.998666 2.62984 1.00002 2.36188C0.99913 2.17921 1.03519 1.99825 1.10602 1.82988C1.24337 1.50314 1.50328 1.24323 1.83002 1.10588C2.16332 0.966692 2.53809 0.964661 2.87289 1.10023ZM2.57502 2.86488C2.7054 2.80913 2.80927 2.70526 2.86502 2.57488C2.8929 2.50838 2.90718 2.43698 2.90702 2.36488C2.90813 2.2654 2.88215 2.1675 2.83185 2.08167C2.78156 1.99584 2.70884 1.92531 2.62151 1.87767C2.53418 1.83002 2.43553 1.80705 2.33614 1.81121C2.23674 1.81537 2.14035 1.8465 2.05731 1.90128C1.97426 1.95606 1.9077 2.03241 1.86475 2.12215C1.8218 2.21188 1.80409 2.31161 1.81352 2.41065C1.82294 2.50968 1.85915 2.60428 1.91825 2.6843C1.97736 2.76433 2.05713 2.82675 2.14902 2.86488C2.28549 2.92089 2.43854 2.92089 2.57502 2.86488ZM6.42995 1.1095L1.10967 6.42977L1.79557 7.11567L7.11584 1.7954L6.42995 1.1095ZM11.5 8.99999H12.5V11.5H15V12.5H12.5V15H11.5V12.5H9V11.5H11.5V8.99999ZM5.76777 9.52509L6.47487 10.2322L4.70711 12L6.47487 13.7677L5.76777 14.4748L4 12.7071L2.23223 14.4748L1.52513 13.7677L3.29289 12L1.52513 10.2322L2.23223 9.52509L4 11.2929L5.76777 9.52509ZM7.11802 5.32988C7.01442 5.08268 6.83973 4.87183 6.61612 4.72406C6.3925 4.57629 6.13004 4.49826 5.86202 4.49988C5.67935 4.49899 5.49839 4.53505 5.33002 4.60588C5.00328 4.74323 4.74337 5.00314 4.60602 5.32988C4.53588 5.49478 4.49897 5.67191 4.49741 5.8511C4.49586 6.0303 4.52967 6.20804 4.59693 6.37414C4.66419 6.54024 4.76356 6.69143 4.88936 6.81906C5.01516 6.94669 5.1649 7.04823 5.33002 7.11788C5.49867 7.18848 5.67968 7.22484 5.86252 7.22484C6.04535 7.22484 6.22636 7.18848 6.39502 7.11788C6.64201 7.01388 6.8527 6.83913 7.00058 6.61563C7.14845 6.39213 7.22689 6.12987 7.22602 5.86188C7.22655 5.67905 7.1898 5.49803 7.11802 5.32988ZM6.36502 6.07488C6.33766 6.13937 6.29829 6.19808 6.24902 6.24788C6.19908 6.29724 6.14042 6.33691 6.07602 6.36488C6.00854 6.39297 5.93611 6.40725 5.86302 6.40688C5.78991 6.40744 5.71744 6.39315 5.65002 6.36488C5.58541 6.33729 5.52668 6.29757 5.47702 6.24788C5.42691 6.19856 5.38713 6.13975 5.36002 6.07488C5.30401 5.9384 5.30401 5.78536 5.36002 5.64888C5.41536 5.51846 5.51941 5.41477 5.65002 5.35988C5.71737 5.33126 5.78984 5.31663 5.86302 5.31688C5.93618 5.31685 6.0086 5.33147 6.07602 5.35988C6.14037 5.38749 6.19904 5.42682 6.24902 5.47588C6.29786 5.52603 6.33717 5.58465 6.36502 5.64888C6.3934 5.7163 6.40802 5.78872 6.40802 5.86188C6.40802 5.93503 6.3934 6.00745 6.36502 6.07488ZM14 3H10V4H14V3Z" fill="#424242"/>
</svg>
`,z6=`<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
<path fill-rule="evenodd" clip-rule="evenodd" d="M11 6H10V5.5C10 5.22386 9.77616 5 9.50001 5H8.47902V10.5C8.47902 10.7761 8.70288 11 8.97902 11H9.47902V12H6.47902V11H6.97902C7.25516 11 7.47902 10.7761 7.47902 10.5V5H6.50001C6.22387 5 6.00001 5.22386 6.00001 5.5V6H5.00001V4H11V6ZM13.9142 8.0481L12.4519 6.58581L13.159 5.87871L14.9749 7.69454V8.40165L13.2071 10.1694L12.5 9.46231L13.9142 8.0481ZM3.5481 9.4623L2.08581 8.00002L3.50002 6.58581L2.79291 5.8787L1.02515 7.64647V8.35357L2.841 10.1694L3.5481 9.4623Z" fill="#424242"/>
</svg>
`,Y6=`<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M2.80723 14.9754C2.57119 14.9721 2.33826 14.9211 2.12247 14.8254C1.90667 14.7297 1.71248 14.5913 1.55158 14.4186C1.2385 14.1334 1.04433 13.7408 1.00775 13.3189C0.966225 12.8828 1.09269 12.4473 1.36133 12.1013C2.56779 10.8289 4.9473 8.4494 6.67811 6.75479C6.30983 5.75887 6.32704 4.66127 6.72637 3.67739C7.05474 2.85876 7.63869 2.16805 8.39129 1.70807C8.9817 1.31706 9.66031 1.07944 10.3657 1.01673C11.0711 0.954022 11.7809 1.06819 12.4311 1.34892L13.0482 1.6162L10.1824 4.56738L11.4371 5.82582L14.3809 2.94887L14.6482 3.56788C14.8735 4.08976 14.993 4.65119 14.9997 5.21961C15.0064 5.78802 14.9002 6.35211 14.6872 6.87915C14.476 7.40029 14.1623 7.87368 13.7647 8.27122C13.5394 8.49169 13.2904 8.68653 13.0222 8.85218C12.4673 9.22275 11.8324 9.45636 11.1697 9.5338C10.5069 9.61124 9.83521 9.5303 9.20982 9.29764C8.11194 10.4113 5.37142 13.1704 3.89119 14.5522C3.59426 14.8219 3.20832 14.9726 2.80723 14.9754ZM10.7448 1.92802C10.087 1.92637 9.44359 2.12018 8.89614 2.48485C8.68265 2.6152 8.48437 2.76897 8.30498 2.9433C7.82789 3.42423 7.50926 4.03953 7.39182 4.70669C7.27437 5.37385 7.36374 6.06098 7.64792 6.67591L7.78342 6.97288L7.55048 7.20025C5.81224 8.89672 3.28146 11.4201 2.06479 12.7045C1.95646 12.8658 1.91012 13.0608 1.93435 13.2535C1.95857 13.4463 2.05171 13.6238 2.19657 13.7532C2.28005 13.8462 2.38177 13.9211 2.49541 13.9731C2.59557 14.0184 2.70383 14.043 2.81373 14.0455C2.98064 14.0413 3.14044 13.977 3.26383 13.8646C4.83687 12.3964 7.87622 9.32641 8.76807 8.42435L8.9973 8.19326L9.29242 8.32783C9.80618 8.56732 10.3731 8.66985 10.9382 8.62545C11.5033 8.58106 12.0473 8.39125 12.5174 8.07447C12.7313 7.9426 12.9296 7.78694 13.1085 7.61045C13.4183 7.30153 13.6631 6.93374 13.8286 6.52874C13.994 6.12375 14.0767 5.68974 14.0719 5.25228C14.0719 5.03662 14.0505 4.82148 14.0078 4.61007L11.4306 7.12508L8.87944 4.57759L11.3944 1.98834C11.1804 1.94674 10.9628 1.92653 10.7448 1.92802Z" fill="#424242"/>
</svg>
`,q6=`<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
<path fill-rule="evenodd" clip-rule="evenodd" d="M4 1L3 2V14L4 15H12L13 14V2L12 1H4ZM4 3V2H12V14H4V13H6V12H4V10H8V9H4V7H6V6H4V4H8V3H4Z" fill="#424242"/>
</svg>
`,Z6=`<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
<path fill-rule="evenodd" clip-rule="evenodd" d="M2.5 1L2 1.5V13H3V2H14V13H15V1.5L14.5 1H2.5ZM2 15V14H3V15H2ZM5 14.0001H4V15.0001H5V14.0001ZM6 14.0001H7V15.0001H6V14.0001ZM9 14.0001H8V15.0001H9V14.0001ZM10 14.0001H11V15.0001H10V14.0001ZM15 15.0001V14.0001H14V15.0001H15ZM12 14.0001H13V15.0001H12V14.0001Z" fill="#424242"/>
</svg>
`,K6=`<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
<path fill-rule="evenodd" clip-rule="evenodd" d="M2 2L1 3V12L2 13H14L15 12V3L14 2H2ZM2 12V3H14V12H2ZM5.3556 8.93017H6V7.22067C6 6.40689 5.68534 6 5.05603 6C4.92098 6 4.77083 6.02421 4.6056 6.07263C4.44181 6.12104 4.3125 6.17691 4.21767 6.24022V6.90503C4.45474 6.70205 4.70474 6.60056 4.96767 6.60056C5.22917 6.60056 5.35991 6.75698 5.35991 7.06983L4.76078 7.17318C4.25359 7.25885 4 7.57914 4 8.13408C4 8.39665 4.06106 8.60708 4.18319 8.76536C4.30675 8.92179 4.47557 9 4.68966 9C4.97989 9 5.19899 8.83985 5.34698 8.51955H5.3556V8.93017ZM5.35991 7.57542V7.76816C5.35991 7.9432 5.31968 8.08845 5.23922 8.20391C5.15876 8.3175 5.0546 8.3743 4.92672 8.3743C4.83477 8.3743 4.76149 8.34264 4.7069 8.27933C4.65374 8.21415 4.62716 8.13128 4.62716 8.03073C4.62716 7.80912 4.73779 7.6797 4.95905 7.64246L5.35991 7.57542ZM7.60094 8.62622H7.59343V8.93511H7V5H7.59343V6.67683H7.60094C7.74742 6.36708 7.95587 6.2122 8.22629 6.2122C8.47418 6.2122 8.6651 6.32987 8.79906 6.56522C8.93302 6.80056 9 7.12243 9 7.53082C9 7.97383 8.92175 8.32944 8.76526 8.59766C8.60876 8.86589 8.39969 9 8.13803 9C7.90141 9 7.72238 8.87541 7.60094 8.62622ZM7.58404 7.50487V7.77742C7.58404 7.94873 7.61972 8.09063 7.69108 8.20311C7.76244 8.3156 7.85383 8.37184 7.96526 8.37184C8.10047 8.37184 8.20501 8.30002 8.27887 8.15639C8.35399 8.01103 8.39155 7.80597 8.39155 7.54121C8.39155 7.32144 8.35712 7.15012 8.28826 7.02726C8.22066 6.90266 8.12363 6.84036 7.99718 6.84036C7.87825 6.84036 7.77934 6.9018 7.70047 7.02466C7.62285 7.14752 7.58404 7.30759 7.58404 7.50487ZM11.2616 9C11.5834 9 11.8295 8.94227 12 8.82682V8.11732C11.82 8.25512 11.636 8.32402 11.448 8.32402C11.2362 8.32402 11.0697 8.25233 10.9486 8.10894C10.8276 7.96369 10.767 7.76443 10.767 7.51117C10.767 7.25047 10.8299 7.04656 10.9558 6.89944C11.0832 6.75047 11.2553 6.67598 11.4719 6.67598C11.6663 6.67598 11.8423 6.74488 12 6.88268V6.13408C11.871 6.04469 11.6623 6 11.374 6C10.9566 6 10.6229 6.1406 10.3728 6.42179C10.1243 6.70112 10 7.0838 10 7.56983C10 7.99069 10.1163 8.33426 10.3489 8.60056C10.5814 8.86685 10.8857 9 11.2616 9Z" fill="#424242"/>
</svg>
`,G6=`<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
<path fill-rule="evenodd" clip-rule="evenodd" d="M14 3H2V6H14V3ZM2 10H5V13H2V10ZM11 10H14V13H11V10Z" fill="#424242"/>
</svg>
`,Ua=`<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
<path fill-rule="evenodd" clip-rule="evenodd" d="M2 5H4V4H1.5L1 4.5V12.5L1.5 13H4V12H2V5ZM14.5 4H12V5H14V12H12V13H14.5L15 12.5V4.5L14.5 4ZM11.76 6.56995L12 7V9.51001L11.7 9.95996L7.19995 11.96H6.73999L4.23999 10.46L4 10.03V7.53003L4.30005 7.06995L8.80005 5.06995H9.26001L11.76 6.56995ZM5 9.70996L6.5 10.61V9.28003L5 8.38V9.70996ZM5.57996 7.56006L7.03003 8.43005L10.42 6.93005L8.96997 6.06006L5.57996 7.56006ZM7.53003 10.73L11.03 9.17004V7.77002L7.53003 9.31995V10.73Z" fill="#007ACC"/>
</svg>
`,J6=`<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
<path fill-rule="evenodd" clip-rule="evenodd" d="M10.57 1.14L13.85 4.44L14 4.8V14.5L13.5 15H2.5L2 14.5V1.5L2.5 1H10.22L10.57 1.14ZM10 5H13L10 2V5ZM3 2V14H13V6H9.5L9 5.5V2H3ZM11 7H5V8H11V7ZM5 9H11V10H5V9ZM11 11H5V12H11V11Z" fill="#C5C5C5"/>
</svg>
`,$6=`<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M14.5 3H7.70996L6.85999 2.15002L6.51001 2H1.51001L1.01001 2.5V6.5V13.5L1.51001 14H14.51L15.01 13.5V9V3.5L14.5 3ZM13.99 11.49V13H1.98999V11.49V7.48999V7H6.47998L6.82996 6.84998L7.68994 5.98999H14V7.48999L13.99 11.49ZM13.99 5H7.48999L7.14001 5.15002L6.28003 6.01001H2V3.01001H6.29004L7.14001 3.85999L7.5 4.01001H14L13.99 5Z" fill="#C5C5C5"/>
</svg>
`,X6=`<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
<path fill-rule="evenodd" clip-rule="evenodd" d="M6 2.98361V2.97184V2H5.91083C5.59743 2 5.29407 2.06161 5.00128 2.18473C4.70818 2.30798 4.44942 2.48474 4.22578 2.71498C4.00311 2.94422 3.83792 3.19498 3.73282 3.46766L3.73233 3.46898C3.63382 3.7352 3.56814 4.01201 3.53533 4.29917L3.53519 4.30053C3.50678 4.5805 3.4987 4.86844 3.51084 5.16428C3.52272 5.45379 3.52866 5.74329 3.52866 6.03279C3.52866 6.23556 3.48974 6.42594 3.412 6.60507L3.4116 6.60601C3.33687 6.78296 3.23423 6.93866 3.10317 7.07359C2.97644 7.20405 2.82466 7.31055 2.64672 7.3925C2.4706 7.46954 2.28497 7.5082 2.08917 7.5082H2V7.6V8.4V8.4918H2.08917C2.28465 8.4918 2.47001 8.53238 2.64601 8.61334L2.64742 8.61396C2.82457 8.69157 2.97577 8.79762 3.10221 8.93161L3.10412 8.93352C3.23428 9.0637 3.33659 9.21871 3.41129 9.39942L3.41201 9.40108C3.48986 9.58047 3.52866 9.76883 3.52866 9.96721C3.52866 10.2567 3.52272 10.5462 3.51084 10.8357C3.4987 11.1316 3.50677 11.4215 3.53516 11.7055L3.53535 11.7072C3.56819 11.9903 3.63387 12.265 3.73232 12.531L3.73283 12.5323C3.83793 12.805 4.00311 13.0558 4.22578 13.285C4.44942 13.5153 4.70818 13.692 5.00128 13.8153C5.29407 13.9384 5.59743 14 5.91083 14H6V13.2V13.0164H5.91083C5.71095 13.0164 5.52346 12.9777 5.34763 12.9008C5.17396 12.8191 5.02194 12.7126 4.89086 12.5818C4.76386 12.4469 4.66104 12.2911 4.58223 12.1137C4.50838 11.9346 4.47134 11.744 4.47134 11.541C4.47134 11.3127 4.4753 11.0885 4.48321 10.8686C4.49125 10.6411 4.49127 10.4195 4.48324 10.2039C4.47914 9.98246 4.46084 9.76883 4.42823 9.56312C4.39513 9.35024 4.33921 9.14757 4.26039 8.95536C4.18091 8.76157 4.07258 8.57746 3.93616 8.40298C3.82345 8.25881 3.68538 8.12462 3.52283 8C3.68538 7.87538 3.82345 7.74119 3.93616 7.59702C4.07258 7.42254 4.18091 7.23843 4.26039 7.04464C4.33913 6.85263 4.39513 6.65175 4.42826 6.44285C4.46082 6.2333 4.47914 6.01973 4.48324 5.80219C4.49127 5.58262 4.49125 5.36105 4.48321 5.13749C4.4753 4.9134 4.47134 4.68725 4.47134 4.45902C4.47134 4.26019 4.50833 4.07152 4.58238 3.89205C4.66135 3.71034 4.76421 3.55475 4.89086 3.42437C5.02193 3.28942 5.17461 3.18275 5.34802 3.10513C5.5238 3.02427 5.71113 2.98361 5.91083 2.98361H6ZM10 13.0164V13.0282V14H10.0892C10.4026 14 10.7059 13.9384 10.9987 13.8153C11.2918 13.692 11.5506 13.5153 11.7742 13.285C11.9969 13.0558 12.1621 12.805 12.2672 12.5323L12.2677 12.531C12.3662 12.2648 12.4319 11.988 12.4647 11.7008L12.4648 11.6995C12.4932 11.4195 12.5013 11.1316 12.4892 10.8357C12.4773 10.5462 12.4713 10.2567 12.4713 9.96721C12.4713 9.76444 12.5103 9.57406 12.588 9.39493L12.5884 9.39399C12.6631 9.21704 12.7658 9.06134 12.8968 8.92642C13.0236 8.79595 13.1753 8.68945 13.3533 8.6075C13.5294 8.53046 13.715 8.4918 13.9108 8.4918H14V8.4V7.6V7.5082H13.9108C13.7153 7.5082 13.53 7.46762 13.354 7.38666L13.3526 7.38604C13.1754 7.30844 13.0242 7.20238 12.8978 7.06839L12.8959 7.06648C12.7657 6.9363 12.6634 6.78129 12.5887 6.60058L12.588 6.59892C12.5101 6.41953 12.4713 6.23117 12.4713 6.03279C12.4713 5.74329 12.4773 5.45379 12.4892 5.16428C12.5013 4.86842 12.4932 4.57848 12.4648 4.29454L12.4646 4.29285C12.4318 4.00971 12.3661 3.73502 12.2677 3.46897L12.2672 3.46766C12.1621 3.19499 11.9969 2.94422 11.7742 2.71498C11.5506 2.48474 11.2918 2.30798 10.9987 2.18473C10.7059 2.06161 10.4026 2 10.0892 2H10V2.8V2.98361H10.0892C10.2891 2.98361 10.4765 3.0223 10.6524 3.09917C10.826 3.18092 10.9781 3.28736 11.1091 3.41823C11.2361 3.55305 11.339 3.70889 11.4178 3.88628C11.4916 4.0654 11.5287 4.25596 11.5287 4.45902C11.5287 4.68727 11.5247 4.91145 11.5168 5.13142C11.5088 5.35894 11.5087 5.58049 11.5168 5.79605C11.5209 6.01754 11.5392 6.23117 11.5718 6.43688C11.6049 6.64976 11.6608 6.85243 11.7396 7.04464C11.8191 7.23843 11.9274 7.42254 12.0638 7.59702C12.1765 7.74119 12.3146 7.87538 12.4772 8C12.3146 8.12462 12.1765 8.25881 12.0638 8.40298C11.9274 8.57746 11.8191 8.76157 11.7396 8.95536C11.6609 9.14737 11.6049 9.34825 11.5717 9.55715C11.5392 9.7667 11.5209 9.98027 11.5168 10.1978C11.5087 10.4174 11.5087 10.6389 11.5168 10.8625C11.5247 11.0866 11.5287 11.3128 11.5287 11.541C11.5287 11.7398 11.4917 11.9285 11.4176 12.1079C11.3386 12.2897 11.2358 12.4452 11.1091 12.5756C10.9781 12.7106 10.8254 12.8173 10.652 12.8949C10.4762 12.9757 10.2889 13.0164 10.0892 13.0164H10Z" fill="#C5C5C5"/>
</svg>
`,Q6=`<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
<path fill-rule="evenodd" clip-rule="evenodd" d="M1.49915 2H14.4991L14.9991 2.5V12.5L14.4991 13H1.49915L0.999146 12.5V2.5L1.49915 2ZM1.99915 3V12H13.9991V3H1.99915ZM3.99915 5H11.9991V6H3.99915V5ZM9.99915 7H3.99915V8H9.99915V7ZM3.99915 9H7.99915V10H3.99915V9Z" fill="#C5C5C5"/>
</svg>
`,e4=`<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
<path fill-rule="evenodd" clip-rule="evenodd" d="M11.1052 4.5613L7.67505 7.98827L6.54072 6.86834L8.61098 4.78848H3.81131C3.17483 4.78848 2.56442 5.04132 2.11436 5.49138C1.6643 5.94144 1.41147 6.55184 1.41147 7.18832C1.41147 7.8248 1.6643 8.43521 2.11436 8.88527C2.56442 9.33532 3.17483 9.58816 3.81131 9.58816H4.70085V11.1881H3.8209C2.7921 11.142 1.8207 10.7009 1.10896 9.95661C0.397222 9.21231 0 8.22216 0 7.19232C0 6.16249 0.397222 5.17234 1.10896 4.42803C1.8207 3.68373 2.7921 3.24263 3.8209 3.19659H8.62058L6.54072 1.13112L7.67505 0L11.1052 3.43177V4.5613ZM16.6201 24H7.0207L6.22075 23.2V10.4121L7.0207 9.61215H16.6201L17.42 10.4121V23.2L16.6201 24ZM7.82064 22.4001H15.8201V11.212H7.82064V22.4001ZM13.4203 1.6015H23.0196L23.8196 2.40145V15.1878L23.0196 15.9877H19.0199V14.3878H22.2197V3.20139H14.2202V7.98828H12.6203V2.40145L13.4203 1.6015ZM14.2202 12.7879H9.42053V14.3878H14.2202V12.7879ZM9.42053 15.9877H14.2202V17.5876H9.42053V15.9877ZM14.2202 19.1875H9.42053V20.7874H14.2202V19.1875ZM15.8201 4.78848H20.6198V6.38838H15.8201V4.78848ZM20.6198 11.188H19.0199V12.7879H20.6198V11.188ZM17.2824 8.01228V7.98828H20.6198V9.58817H18.8583L17.2824 8.01228Z" fill="#C5C5C5"/>
</svg>
`,t4=`<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M11.34 9.70998H12.05L14.72 7.04005V6.32997L13.38 5.00001H12.68L10.86 6.81007H5.86V5.56007L7.71999 3.70997V3L5.71998 1H5.00001L1 5.00001V5.70997L3 7.70998H3.71003L4.84998 6.56007V12.35L5.34999 12.85H10V13.37L11.33 14.71H12.04L14.7101 12.0401V11.33L13.37 10H12.67L10.81 11.85H5.81001V7.84999H10V8.32997L11.34 9.70998ZM13.0301 6.06007L13.66 6.68995L11.66 8.68996L11.0301 8.06007L13.0301 6.06007ZM13.0301 11.0601L13.66 11.69L11.66 13.69L11.0301 13.0601L13.0301 11.0601ZM3.34998 6.65004L2.06 5.34999L5.34999 2.06006L6.65004 3.34998L3.34998 6.65004Z" fill="#EE9D28"/>
</svg>
`,i4=`<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
<path fill-rule="evenodd" clip-rule="evenodd" d="M8 1.00305C6.14348 1.00305 4.36299 1.74059 3.05023 3.05334C1.73748 4.3661 1 6.14654 1 8.00305V8.43311C1.09 9.94311 2.91 10.2231 4 9.13306C4.35648 8.81625 4.82054 8.64759 5.29724 8.66162C5.77395 8.67565 6.22729 8.87127 6.56451 9.2085C6.90174 9.54572 7.09736 9.99912 7.11139 10.4758C7.12542 10.9525 6.95682 11.4166 6.64001 11.7731C5.54001 12.9331 5.85 14.843 7.44 14.973H8.03998C9.89649 14.973 11.677 14.2356 12.9897 12.9229C14.3025 11.6101 15.04 9.82954 15.04 7.97302C15.04 6.11651 14.3025 4.33607 12.9897 3.02332C11.677 1.71056 9.89649 0.973022 8.03998 0.973022L8 1.00305ZM8 14.0031H7.47998C7.34751 13.9989 7.22047 13.9495 7.12 13.863C7.04052 13.7807 6.98815 13.6761 6.96997 13.5631C6.9381 13.3682 6.95328 13.1684 7.01416 12.9806C7.07504 12.7927 7.17989 12.6222 7.32001 12.483C7.84048 11.9474 8.13165 11.2299 8.13165 10.483C8.13165 9.73615 7.84048 9.0187 7.32001 8.48303C7.05348 8.21635 6.73699 8.00481 6.38867 7.86047C6.04036 7.71614 5.66702 7.64185 5.28998 7.64185C4.91294 7.64185 4.5396 7.71614 4.19128 7.86047C3.84297 8.00481 3.52654 8.21635 3.26001 8.48303C3.15068 8.61081 3.01089 8.709 2.85358 8.76843C2.69626 8.82786 2.52649 8.84657 2.35999 8.823C2.27593 8.80694 2.19903 8.76498 2.14001 8.703C2.07131 8.6224 2.03556 8.5189 2.03998 8.41309V8.04309C2.03998 6.8564 2.39192 5.69629 3.05121 4.70959C3.7105 3.7229 4.64754 2.95388 5.7439 2.49976C6.84025 2.04563 8.04669 1.92681 9.21057 2.15833C10.3745 2.38984 11.4435 2.9613 12.2827 3.80042C13.1218 4.63953 13.6932 5.70867 13.9247 6.87256C14.1562 8.03644 14.0374 9.24275 13.5833 10.3391C13.1291 11.4355 12.3601 12.3726 11.3734 13.0319C10.3867 13.6911 9.22667 14.0431 8.03998 14.0431L8 14.0031ZM9 3.99683C9 4.54911 8.55228 4.99683 8 4.99683C7.44771 4.99683 7 4.54911 7 3.99683C7 3.44454 7.44771 2.99683 8 2.99683C8.55228 2.99683 9 3.44454 9 3.99683ZM12 11.0037C12 11.5559 11.5523 12.0037 11 12.0037C10.4477 12.0037 10 11.5559 10 11.0037C10 10.4514 10.4477 10.0037 11 10.0037C11.5523 10.0037 12 10.4514 12 11.0037ZM5 6.00415C5.55229 6.00415 6 5.55644 6 5.00415C6 4.45187 5.55229 4.00415 5 4.00415C4.44772 4.00415 4 4.45187 4 5.00415C4 5.55644 4.44772 6.00415 5 6.00415ZM12 5.00415C12 5.55644 11.5523 6.00415 11 6.00415C10.4477 6.00415 10 5.55644 10 5.00415C10 4.45187 10.4477 4.00415 11 4.00415C11.5523 4.00415 12 4.45187 12 5.00415ZM13.0001 7.99939C13.0001 8.55167 12.5524 8.99939 12.0001 8.99939C11.4478 8.99939 11.0001 8.55167 11.0001 7.99939C11.0001 7.4471 11.4478 6.99939 12.0001 6.99939C12.5524 6.99939 13.0001 7.4471 13.0001 7.99939Z" fill="#C5C5C5"/>
</svg>
`,s4=`<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
<path fill-rule="evenodd" clip-rule="evenodd" d="M4 6H12V7H4V6ZM12 9H4V10H12V9Z" fill="#C5C5C5"/>
<path fill-rule="evenodd" clip-rule="evenodd" d="M1 4L2 3H14L15 4V12L14 13H2L1 12V4ZM2 4V12H14V4H2Z" fill="#C5C5C5"/>
</svg>
`,r4=`<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
<path fill-rule="evenodd" clip-rule="evenodd" d="M7 3L8 2H14L15 3V8L14 9H10V8H14V3H8V6H7V3ZM9 9V8L8 7H7H2L1 8V13L2 14H8L9 13V9ZM8 8V9V13H2V8H7H8ZM9.41421 7L9 6.58579V6H13V7H9.41421ZM9 4H13V5H9V4ZM7 10H3V11H7V10Z" fill="#75BEFF"/>
</svg>
`,n4=`<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
<path fill-rule="evenodd" clip-rule="evenodd" d="M14 2H8L7 3V6H8V3H14V8H10V9H14L15 8V3L14 2ZM9 6H13V7H9.41L9 6.59V6ZM7 7H2L1 8V13L2 14H8L9 13V8L8 7H7ZM8 13H2V8H8V9V13ZM3 9H7V10H3V9ZM3 11H7V12H3V11ZM9 4H13V5H9V4Z" fill="#EE9D28"/>
</svg>
`,o4=`<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
<path fill-rule="evenodd" clip-rule="evenodd" d="M7.41354 1.55996L8.31152 1H11.6056L12.424 2.57465L10.2356 6H12.0174L12.7363 7.69512L5.61943 15L4.01675 13.837L6.11943 10H4.89798L4 8.55996L7.41354 1.55996ZM7.78033 9L4.90054 14.3049L12.0174 7H8.31152L11.6056 2H8.31152L4.89798 9H7.78033Z" fill="#EE9D28"/>
</svg>
`,a4=`<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M14.45 4.5L9.44995 2H8.55005L1.55005 5.5L1 6.39001V10.89L1.55005 11.79L6.55005 14.29H7.44995L14.45 10.79L15 9.89001V5.39001L14.45 4.5ZM6.44995 13.14L1.94995 10.89V7.17004L6.44995 9.17004V13.14ZM6.94995 8.33997L2.29004 6.22998L8.94995 2.89001L13.62 5.22998L6.94995 8.33997ZM13.95 9.89001L7.44995 13.14V9.20996L13.95 6.20996V9.89001Z" fill="#75BEFF"/>
</svg>
`,l4=`<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M11.4965 4C10.655 3.9989 9.84136 4.30189 9.20557 4.85315C8.56977 5.40442 8.15465 6.16684 8.0365 7H4.9364C4.8147 6.52867 4.52533 6.11794 4.12244 5.84473C3.71955 5.57152 3.23083 5.45466 2.74792 5.51599C2.26502 5.57733 1.82106 5.81261 1.49927 6.17786C1.17747 6.54311 1 7.01322 1 7.5C1 7.98679 1.17747 8.45689 1.49927 8.82215C1.82106 9.1874 2.26502 9.42267 2.74792 9.48401C3.23083 9.54535 3.71955 9.42848 4.12244 9.15528C4.52533 8.88207 4.8147 8.47133 4.9364 8H8.0365C8.13236 8.66418 8.41717 9.28683 8.85693 9.7937C9.2967 10.3006 9.87284 10.6703 10.5168 10.8589C11.1609 11.0475 11.8455 11.047 12.4893 10.8574C13.133 10.6679 13.7087 10.2973 14.1477 9.7898C14.5867 9.28227 14.8706 8.65919 14.9655 7.99488C15.0603 7.33056 14.9621 6.65298 14.6827 6.04285C14.4034 5.43272 13.9545 4.91578 13.3895 4.55359C12.8246 4.19141 12.1675 3.99922 11.4965 4ZM11.4965 10C11.002 10 10.5187 9.85332 10.1075 9.57862C9.69642 9.30391 9.37599 8.91348 9.18677 8.45667C8.99755 7.99985 8.94809 7.49728 9.04456 7.01233C9.14102 6.52738 9.37901 6.08181 9.72864 5.73218C10.0783 5.38255 10.5238 5.14456 11.0088 5.0481C11.4937 4.95164 11.9963 5.00109 12.4531 5.19031C12.9099 5.37953 13.3004 5.69996 13.5751 6.11109C13.8498 6.52221 13.9965 7.00555 13.9965 7.5C13.9965 8.16304 13.7331 8.79898 13.2643 9.26783C12.7954 9.73667 12.1595 10 11.4965 10Z" fill="#75BEFF"/>
</svg>
`,c4=`<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M15 4H10V3H15V4ZM14 7H12V8H14V7ZM10 7H1V8H10V7ZM12 13H1V14H12V13ZM7 10H1V11H7V10ZM15 10H10V11H15V10ZM8 2V5H1V2H8ZM7 3H2V4H7V3Z" fill="#C5C5C5"/>
</svg>
`,Ur=`<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M13.51 4L8.51001 1H7.51001L2.51001 4L2.02002 4.85999V10.86L2.51001 11.71L7.51001 14.71H8.51001L13.51 11.71L14 10.86V4.85999L13.51 4ZM7.51001 13.5601L3.01001 10.86V5.69995L7.51001 8.15002V13.5601ZM3.27002 4.69995L8.01001 1.85999L12.75 4.69995L8.01001 7.29004L3.27002 4.69995ZM13.01 10.86L8.51001 13.5601V8.15002L13.01 5.69995V10.86Z" fill="#B180D7"/>
</svg>
`,h4=`<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
<path fill-rule="evenodd" clip-rule="evenodd" d="M2.87289 1.10023C3.20768 1.23579 3.47545 1.498 3.61802 1.82988C3.69032 1.99959 3.72675 2.18242 3.72502 2.36688C3.72617 2.54999 3.68975 2.7314 3.61802 2.89988C3.51299 3.14567 3.33782 3.35503 3.11442 3.50177C2.89102 3.64851 2.6293 3.72612 2.36202 3.72488C2.17924 3.72592 1.99818 3.68951 1.83002 3.61788C1.58298 3.51406 1.37227 3.33932 1.22453 3.11575C1.0768 2.89219 0.998666 2.62984 1.00002 2.36188C0.99913 2.17921 1.03519 1.99825 1.10602 1.82988C1.24337 1.50314 1.50328 1.24323 1.83002 1.10588C2.16332 0.966692 2.53809 0.964661 2.87289 1.10023ZM2.57502 2.86488C2.7054 2.80913 2.80927 2.70526 2.86502 2.57488C2.8929 2.50838 2.90718 2.43698 2.90702 2.36488C2.90813 2.2654 2.88215 2.1675 2.83185 2.08167C2.78156 1.99584 2.70884 1.92531 2.62151 1.87767C2.53418 1.83002 2.43553 1.80705 2.33614 1.81121C2.23674 1.81537 2.14035 1.8465 2.05731 1.90128C1.97426 1.95606 1.9077 2.03241 1.86475 2.12215C1.8218 2.21188 1.80409 2.31161 1.81352 2.41065C1.82294 2.50968 1.85915 2.60428 1.91825 2.6843C1.97736 2.76433 2.05713 2.82675 2.14902 2.86488C2.28549 2.92089 2.43854 2.92089 2.57502 2.86488ZM6.42995 1.1095L1.10967 6.42977L1.79557 7.11567L7.11584 1.7954L6.42995 1.1095ZM11.5 8.99999H12.5V11.5H15V12.5H12.5V15H11.5V12.5H9V11.5H11.5V8.99999ZM5.76777 9.52509L6.47487 10.2322L4.70711 12L6.47487 13.7677L5.76777 14.4748L4 12.7071L2.23223 14.4748L1.52513 13.7677L3.29289 12L1.52513 10.2322L2.23223 9.52509L4 11.2929L5.76777 9.52509ZM7.11802 5.32988C7.01442 5.08268 6.83973 4.87183 6.61612 4.72406C6.3925 4.57629 6.13004 4.49826 5.86202 4.49988C5.67935 4.49899 5.49839 4.53505 5.33002 4.60588C5.00328 4.74323 4.74337 5.00314 4.60602 5.32988C4.53588 5.49478 4.49897 5.67191 4.49741 5.8511C4.49586 6.0303 4.52967 6.20804 4.59693 6.37414C4.66419 6.54024 4.76356 6.69143 4.88936 6.81906C5.01516 6.94669 5.1649 7.04823 5.33002 7.11788C5.49867 7.18848 5.67968 7.22484 5.86252 7.22484C6.04535 7.22484 6.22636 7.18848 6.39502 7.11788C6.64201 7.01388 6.8527 6.83913 7.00058 6.61563C7.14845 6.39213 7.22689 6.12987 7.22602 5.86188C7.22655 5.67905 7.1898 5.49803 7.11802 5.32988ZM6.36502 6.07488C6.33766 6.13937 6.29829 6.19808 6.24902 6.24788C6.19908 6.29724 6.14042 6.33691 6.07602 6.36488C6.00854 6.39297 5.93611 6.40725 5.86302 6.40688C5.78991 6.40744 5.71744 6.39315 5.65002 6.36488C5.58541 6.33729 5.52668 6.29757 5.47702 6.24788C5.42691 6.19856 5.38713 6.13975 5.36002 6.07488C5.30401 5.9384 5.30401 5.78536 5.36002 5.64888C5.41536 5.51846 5.51941 5.41477 5.65002 5.35988C5.71737 5.33126 5.78984 5.31663 5.86302 5.31688C5.93618 5.31685 6.0086 5.33147 6.07602 5.35988C6.14037 5.38749 6.19904 5.42682 6.24902 5.47588C6.29786 5.52603 6.33716 5.58465 6.36502 5.64888C6.3934 5.7163 6.40802 5.78872 6.40802 5.86188C6.40802 5.93503 6.3934 6.00745 6.36502 6.07488ZM14 3H10V4H14V3Z" fill="#C5C5C5"/>
</svg>
`,u4=`<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
<path fill-rule="evenodd" clip-rule="evenodd" d="M11 6H10V5.5C10 5.22386 9.77614 5 9.5 5H8.479V10.5C8.479 10.7761 8.70286 11 8.979 11H9.479V12H6.479V11H6.979C7.25515 11 7.479 10.7761 7.479 10.5V5H6.5C6.22386 5 6 5.22386 6 5.5V6H5V4H11V6ZM13.9142 8.0481L12.4519 6.58581L13.159 5.87871L14.9749 7.69454V8.40165L13.2071 10.1694L12.5 9.46231L13.9142 8.0481ZM3.54809 9.4623L2.08579 8.00002L3.5 6.58581L2.7929 5.8787L1.02513 7.64647V8.35357L2.84098 10.1694L3.54809 9.4623Z" fill="#C5C5C5"/>
</svg>
`,f4=`<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M2.80723 14.9754C2.57119 14.9721 2.33826 14.9211 2.12247 14.8254C1.90667 14.7297 1.71248 14.5913 1.55158 14.4186C1.2385 14.1334 1.04433 13.7408 1.00775 13.3189C0.966225 12.8828 1.09269 12.4473 1.36133 12.1013C2.56779 10.8289 4.9473 8.4494 6.67811 6.75479C6.30983 5.75887 6.32704 4.66127 6.72637 3.67739C7.05474 2.85876 7.63869 2.16805 8.39129 1.70807C8.9817 1.31706 9.66031 1.07944 10.3657 1.01673C11.0711 0.954022 11.7809 1.06819 12.4311 1.34892L13.0482 1.6162L10.1824 4.56738L11.4371 5.82582L14.3809 2.94887L14.6482 3.56788C14.8735 4.08976 14.993 4.65119 14.9997 5.21961C15.0064 5.78802 14.9002 6.35211 14.6872 6.87915C14.476 7.40029 14.1623 7.87368 13.7647 8.27122C13.5394 8.49169 13.2904 8.68653 13.0222 8.85218C12.4673 9.22275 11.8324 9.45636 11.1697 9.5338C10.5069 9.61124 9.83521 9.5303 9.20982 9.29764C8.11194 10.4113 5.37142 13.1704 3.89119 14.5522C3.59426 14.8219 3.20832 14.9726 2.80723 14.9754ZM10.7448 1.92802C10.087 1.92637 9.44359 2.12018 8.89614 2.48485C8.68265 2.6152 8.48437 2.76897 8.30498 2.9433C7.82789 3.42423 7.50926 4.03953 7.39182 4.70669C7.27437 5.37385 7.36374 6.06098 7.64792 6.67591L7.78342 6.97288L7.55048 7.20025C5.81224 8.89672 3.28146 11.4201 2.06479 12.7045C1.95646 12.8658 1.91012 13.0608 1.93435 13.2535C1.95857 13.4463 2.05171 13.6238 2.19657 13.7532C2.28005 13.8462 2.38177 13.9211 2.49541 13.9731C2.59557 14.0184 2.70383 14.043 2.81373 14.0455C2.98064 14.0413 3.14044 13.977 3.26383 13.8646C4.83687 12.3964 7.87622 9.32641 8.76807 8.42435L8.9973 8.19326L9.29242 8.32783C9.80618 8.56732 10.3731 8.66985 10.9382 8.62545C11.5033 8.58106 12.0473 8.39125 12.5174 8.07447C12.7313 7.9426 12.9296 7.78694 13.1085 7.61045C13.4183 7.30153 13.6631 6.93374 13.8286 6.52874C13.994 6.12375 14.0767 5.68974 14.0719 5.25228C14.0719 5.03662 14.0505 4.82148 14.0078 4.61007L11.4306 7.12508L8.87944 4.57759L11.3944 1.98834C11.1804 1.94674 10.9628 1.92653 10.7448 1.92802Z" fill="#C5C5C5"/>
</svg>
`,d4=`<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
<path fill-rule="evenodd" clip-rule="evenodd" d="M4 1L3 2V14L4 15H12L13 14V2L12 1H4ZM4 3V2H12V14H4V13H6V12H4V10H8V9H4V7H6V6H4V4H8V3H4Z" fill="#C5C5C5"/>
</svg>
`,_4=`<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
<path fill-rule="evenodd" clip-rule="evenodd" d="M2.5 1L2 1.5V13H3V2H14V13H15V1.5L14.5 1H2.5ZM2 15V14H3V15H2ZM5 14.0001H4V15.0001H5V14.0001ZM6 14.0001H7V15.0001H6V14.0001ZM9 14.0001H8V15.0001H9V14.0001ZM10 14.0001H11V15.0001H10V14.0001ZM15 15.0001V14.0001H14V15.0001H15ZM12 14.0001H13V15.0001H12V14.0001Z" fill="#C5C5C5"/>
</svg>
`,p4=`<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
<path fill-rule="evenodd" clip-rule="evenodd" d="M2 2L1 3V12L2 13H14L15 12V3L14 2H2ZM2 12V3H14V12H2ZM5.3556 8.93017H6V7.22067C6 6.40689 5.68534 6 5.05603 6C4.92098 6 4.77083 6.02421 4.6056 6.07263C4.44181 6.12104 4.3125 6.17691 4.21767 6.24022V6.90503C4.45474 6.70205 4.70474 6.60056 4.96767 6.60056C5.22917 6.60056 5.35991 6.75698 5.35991 7.06983L4.76078 7.17318C4.25359 7.25885 4 7.57914 4 8.13408C4 8.39665 4.06106 8.60708 4.18319 8.76536C4.30675 8.92179 4.47557 9 4.68966 9C4.97989 9 5.19899 8.83985 5.34698 8.51955H5.3556V8.93017ZM5.35991 7.57542V7.76816C5.35991 7.9432 5.31968 8.08845 5.23922 8.20391C5.15876 8.3175 5.0546 8.3743 4.92672 8.3743C4.83477 8.3743 4.76149 8.34264 4.7069 8.27933C4.65374 8.21415 4.62716 8.13128 4.62716 8.03073C4.62716 7.80912 4.73779 7.6797 4.95905 7.64246L5.35991 7.57542ZM7.60094 8.62622H7.59343V8.93511H7V5H7.59343V6.67683H7.60094C7.74742 6.36708 7.95587 6.2122 8.22629 6.2122C8.47418 6.2122 8.6651 6.32987 8.79906 6.56522C8.93302 6.80056 9 7.12243 9 7.53082C9 7.97383 8.92175 8.32944 8.76526 8.59766C8.60876 8.86589 8.39969 9 8.13803 9C7.90141 9 7.72238 8.87541 7.60094 8.62622ZM7.58404 7.50487V7.77742C7.58404 7.94873 7.61972 8.09063 7.69108 8.20311C7.76244 8.3156 7.85383 8.37184 7.96526 8.37184C8.10047 8.37184 8.20501 8.30002 8.27887 8.15639C8.35399 8.01103 8.39155 7.80597 8.39155 7.54121C8.39155 7.32144 8.35712 7.15012 8.28826 7.02726C8.22066 6.90266 8.12363 6.84036 7.99718 6.84036C7.87825 6.84036 7.77934 6.9018 7.70047 7.02466C7.62285 7.14752 7.58404 7.30759 7.58404 7.50487ZM11.2616 9C11.5834 9 11.8295 8.94227 12 8.82682V8.11732C11.82 8.25512 11.636 8.32402 11.448 8.32402C11.2362 8.32402 11.0697 8.25233 10.9486 8.10894C10.8276 7.96369 10.767 7.76443 10.767 7.51117C10.767 7.25047 10.8299 7.04656 10.9558 6.89944C11.0832 6.75047 11.2553 6.67598 11.4719 6.67598C11.6663 6.67598 11.8423 6.74488 12 6.88268V6.13408C11.871 6.04469 11.6623 6 11.374 6C10.9566 6 10.6229 6.1406 10.3728 6.42179C10.1243 6.70112 10 7.0838 10 7.56983C10 7.99069 10.1163 8.33426 10.3489 8.60056C10.5814 8.86685 10.8857 9 11.2616 9Z" fill="#C5C5C5"/>
</svg>
`,m4=`<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
<path fill-rule="evenodd" clip-rule="evenodd" d="M2 2L1 3V6L2 7H14L15 6V3L14 2H2ZM2 3H3H13H14V4V5V6H13H3H2V5V4V3ZM1 10L2 9H5L6 10V13L5 14H2L1 13V10ZM3 10H2V11V12V13H3H4H5V12V11V10H4H3ZM10 10L11 9H14L15 10V13L14 14H11L10 13V10ZM12 10H11V11V12V13H12H13H14V12V11V10H13H12Z" fill="#C5C5C5"/>
</svg>
`,Wa=`<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
<path fill-rule="evenodd" clip-rule="evenodd" d="M2 5H4V4H1.5L1 4.5V12.5L1.5 13H4V12H2V5ZM14.5 4H12V5H14V12H12V13H14.5L15 12.5V4.5L14.5 4ZM11.76 6.56995L12 7V9.51001L11.7 9.95996L7.19995 11.96H6.73999L4.23999 10.46L4 10.03V7.53003L4.30005 7.06995L8.80005 5.06995H9.26001L11.76 6.56995ZM5 9.70996L6.5 10.61V9.28003L5 8.38V9.70996ZM5.57996 7.56006L7.03003 8.43005L10.42 6.93005L8.96997 6.06006L5.57996 7.56006ZM7.53003 10.73L11.03 9.17004V7.77002L7.53003 9.31995V10.73Z" fill="#75BEFF"/>
</svg>
`;function pe(e){const t=document.createElement("span");return t.innerHTML=e,t.firstElementChild instanceof SVGElement&&t.firstElementChild.classList.toggle("b3-menu__icon",!0),t.innerHTML}const g4=new Map([["class",pe(H6)],["color",pe(x6)],["constant",pe(P6)],["constructor",pe(Fr)],["enum",pe(N6)],["enumMember",pe(I6)],["event",pe(V6)],["field",pe(j6)],["file",pe(D6)],["folder",pe(A6)],["function",pe(Fr)],["instance",pe(Ua)],["interface",pe(F6)],["keyword",pe(U6)],["method",pe(Fr)],["module",pe(R6)],["operator",pe(W6)],["property",pe(Y6)],["reference",pe(B6)],["snippet",pe(Z6)],["struct",pe(G6)],["text",pe(K6)],["typeParameter",pe(z6)],["unit",pe(q6)],["value",pe(O6)],["variable",pe(Ua)]]),v4=new Map([["class",pe(t4)],["color",pe(i4)],["constant",pe(s4)],["constructor",pe(Ur)],["enum",pe(n4)],["enumMember",pe(r4)],["event",pe(o4)],["field",pe(a4)],["file",pe(J6)],["folder",pe($6)],["function",pe(Ur)],["instance",pe(Wa)],["interface",pe(l4)],["keyword",pe(c4)],["method",pe(Ur)],["module",pe(X6)],["operator",pe(h4)],["property",pe(f4)],["reference",pe(e4)],["snippet",pe(_4)],["struct",pe(m4)],["text",pe(p4)],["typeParameter",pe(u4)],["unit",pe(d4)],["value",pe(Q6)],["variable",pe(Wa)]]),{replace:b4}="",y4=/[&<>'"]/g,w4={"&":"&amp;","<":"&lt;",">":"&gt;","'":"&#39;",'"':"&quot;"},S4=e=>w4[e],Kc=e=>b4.call(e,y4,S4);function C4(e){let t=[];for(const[i,s]of Object.entries(e))s&&t.push(`${i}="${Kc(s).replaceAll(`
`,"_esc_newline_")}"`);return`{: ${t.join(" ")}}`}function as(e,t){const i=document.createElement("div");return i.innerHTML=e,Array.from(i.querySelectorAll("div.code-block[data-node-id]")).filter(r=>t?r.getAttribute(me.attrs.code.type.key)===me.attrs.code.type.value:!0).map(r=>({id:r.dataset.nodeId,code:globalThis.Lute.BlockDOM2Content(r.outerHTML)}))}function k4(){const e={cells:[],elements:F3()};switch(e.elements.length){case 0:break;case 1:e.cells=as(e.elements[0].outerHTML,!1);break;default:e.cells=as(e.elements.reduce((t,i)=>(t.push(i.outerHTML),t),[]).join(""),!0);break}return e}function E4(e=(s=>(s=(i=>(i=globalThis.siyuan)==null?void 0:i.storage)())==null?void 0:s["local-codelang"])()??"",t=" "){return[`\`\`\`${e}`,"","```",C4({[me.attrs.code.type.key]:me.attrs.code.type.value,[me.attrs.code.index]:t})].join(`
`)}function As(e){return Ui(e)&&e instanceof HTMLElement&&e.getAttribute(me.attrs.code.type.key)===me.attrs.code.type.value&&e.dataset.type==="NodeCodeBlock"&&e.classList.contains("code-block")}function L4(e){return Ui(e)&&e instanceof HTMLElement&&e.getAttribute(me.attrs.output.type.key)===me.attrs.output.type.value&&e.dataset.type==="NodeSuperBlock"}const Dt=class Dt extends ft.Plugin{constructor(i){super(i);ne(this,"siyuan",ft);ne(this,"logger");ne(this,"client");ne(this,"TOP_BAR_MENU_ID");ne(this,"SETTINGS_DIALOG_ID");ne(this,"CUSTOM_TAB_ID_JUPYTER");ne(this,"jupyterTab");ne(this,"topBarButton");ne(this,"config",jr);ne(this,"worker");ne(this,"bridge");ne(this,"complating",!1);ne(this,"editEventHandler");ne(this,"protyles",new WeakMap);ne(this,"jupyterDock");ne(this,"jupyterInspectDock");ne(this,"doc2session",new Map);ne(this,"doc2info",new Map);ne(this,"session2docs",new Map);ne(this,"handlers");ne(this,"kernelspecs",{default:"",kernelspecs:{}});ne(this,"kernels",[]);ne(this,"sessions",[]);ne(this,"kernelName2logoObjectURL",new Map);ne(this,"kernelName2language",new Map);ne(this,"kernelName2displayName",new Map);ne(this,"xtermElements",new Set);ne(this,"counter",Yc());ne(this,"username",`siyuan-${ft.getBackend()}-${ft.getFrontend()}`);ne(this,"clientId",globalThis.Lute.NewNodeID());ne(this,"editEventListener",(i,s)=>{this.editEventHandler(s,Ks(i,Dt.EDIT_KEYBOARD_EVENT_STATUS_INSPECT),Ks(i,Dt.EDIT_KEYBOARD_EVENT_STATUS_COMPLATE))});ne(this,"blockMenuEventListener",i=>{const s=i.detail,r=H3(s);if(r){const n=this.doc2session.get(r.protyle.block.rootID),l=[];r.isDocumentBlock?l.push(...this.buildJupyterDocumentMenuItems(r.id,r.data.ial,n,r)):l.push(...this.buildExecuteMenuItems(!1,n,r)),s.menu.addItem({submenu:l,icon:"icon-jupyter-client-simple",label:this.i18n.displayName,accelerator:this.name}),this.updateDockFocusItem(r.protyle.block.rootID)}});ne(this,"clickEditorContentEventListener",i=>{var l,o,a,h,u,f,_;const s=i.detail.protyle;(o=(l=s.background)==null?void 0:l.ial)!=null&&o[me.attrs.kernel.language]&&(a=globalThis.siyuan)!=null&&a.storage&&(globalThis.siyuan.storage["local-codelang"]=s.background.ial[me.attrs.kernel.language]);const r=this.doc2session.get(s.block.rootID);r?this.toggleEditEventListener(s,!0):this.toggleEditEventListener(s,!1);const n=Gs();if(n&&n.dataset.type===Dl.NodeType.NodeCodeBlock&&n.classList.contains("code-block")){const v=n.querySelector(`.${me.JUPYTER_CODE_CELL_ACTION_RUN_CLASS_NAME}`);if(r&&(As(n)||((h=n.querySelector(".protyle-action__language"))==null?void 0:h.innerText)===((f=(u=s.background)==null?void 0:u.ial)==null?void 0:f[me.attrs.kernel.language]))){const b=Oa();if(b&&this.requestInspect(r.id,b),!v){const g=n.querySelector(".protyle-icon--last");if(g){const c=globalThis.document.createElement("span");c.classList.add("b3-tooltips","b3-tooltips__nw","protyle-icon",me.JUPYTER_CODE_CELL_ACTION_RUN_CLASS_NAME),c.ariaLabel=this.i18n.menu.run.label,c.innerHTML='<svg><use xlink:href="#iconPlay"></use></svg>',c.onclick=async d=>{const m=as(n.outerHTML,!1);await this.requestExecuteCells(m,r,this.config.jupyter.execute.output.parser)},(_=g.parentElement)==null||_.insertBefore(c,g)}}}else v&&v.remove()}this.updateDockFocusItem(s.block.rootID)});ne(this,"loadedProtyleEventListener",async i=>{var r,n,l,o,a,h,u,f,_,v,b;const s=i.detail.protyle;if(this.doc2session.has(s.block.rootID))this.toggleEditEventListener(s,!0);else{const g={};(n=(r=s.background)==null?void 0:r.ial)!=null&&n[me.attrs.kernel.connection_status]&&s.background.ial[me.attrs.kernel.connection_status]!=="disconnected"&&(g[me.attrs.kernel.connection_status]="disconnected"),(o=(l=s.background)==null?void 0:l.ial)!=null&&o[me.attrs.kernel.status]&&s.background.ial[me.attrs.kernel.status]!=="unknown"&&(g[me.attrs.kernel.status]="unknown"),Object.keys(g).length>0&&await this.client.setBlockAttrs({id:s.block.rootID,attrs:g})}if((h=(a=s.title)==null?void 0:a.editElement)!=null&&h.innerText.endsWith(".ipynb")||(f=(u=s.background)==null?void 0:u.ial)!=null&&f[me.attrs.kernel.name]){const g=(v=(_=s.breadcrumb)==null?void 0:_.element.parentElement)==null?void 0:v.querySelector(".protyle-breadcrumb__icon[data-type=exit-focus]");if(g){if((b=g.nextElementSibling)!=null&&b.classList.contains(me.JUPYTER_NOTEBOOK_BUTTON_MENU_CLASS_NAME))return;{const c=globalThis.document.createElement("button");c.classList.add("block__icon","block__icon--show","fn__flex-center","b3-tooltips","b3-tooltips__sw",me.JUPYTER_NOTEBOOK_BUTTON_MENU_CLASS_NAME),c.dataset.type="jupyter-client-notebook-menu",c.ariaLabel="Jupyter",c.innerHTML='<svg><use xlink:href="#icon-jupyter-client-session-notebook"></use></svg>',c.onclick=async d=>{var m;if(d.preventDefault(),d.stopPropagation(),s.block.rootID&&((m=s.background)!=null&&m.ial)){const p=s.block.rootID,y=this.buildJupyterDocumentMenuItems(p,s.background.ial,this.doc2session.get(p),{isDocumentBlock:!0,isMultiBlock:!1,id:p});if(y.length>0){const S=new this.siyuan.Menu;y.forEach(E=>S.addItem(E)),S.open({x:d.clientX,y:d.clientY,isLeft:!0})}}},g.parentElement.insertBefore(c,g.nextElementSibling)}}}});ne(this,"destroyProtyleEventListener",i=>{const s=i.detail.protyle;this.toggleEditEventListener(s,!1)});ne(this,"inputRequest",async(i,s,r="")=>{if(s===this.clientId){this.config.jupyter.execute.input.goto&&await this.gotoBlock(i);try{return await D3(this.siyuan.Dialog,{title:this.i18n.messages.inputRequest.title,text:r?yt(r):void 0,cancel:()=>!1})}catch{return}}});ne(this,"updateKernelSpecs",i=>{var s;Object.assign(this.kernelspecs,i);for(const[r,n]of Object.entries(i.kernelspecs))n&&(this.kernelName2language.set(r,n.language),this.kernelName2displayName.set(r,n.display_name));(s=this.jupyterDock.component)==null||s.$set({kernelspecs:i})});ne(this,"updateKernels",i=>{var s;this.kernels.length=0,this.kernels.push(...i),(s=this.jupyterDock.component)==null||s.$set({kernels:i})});ne(this,"updateSessions",i=>{var r;const s=new Set(i.map(n=>n.id));for(const n of this.session2docs.keys())if(!s.has(n)){const l=this.session2docs.get(n);l&&l.forEach(o=>this.doc2session.delete(o)),this.session2docs.delete(n)}this.sessions.length=0,this.sessions.push(...i),(r=this.jupyterDock.component)==null||r.$set({sessions:i})});ne(this,"openJupyterTab",async()=>{ft.openTab({app:this.app,custom:{icon:"icon-jupyter-client",title:"Jupyter",id:this.CUSTOM_TAB_ID_JUPYTER,data:{src:this.baseUrl,title:"Jupyter"}},keepCursor:!1,removeCurrentTab:!1})});ne(this,"openJupyterBrowser",async()=>{globalThis.open(this.baseUrl)});ne(this,"openJupyterWindow",async()=>{T6({url:this.baseUrl,base:{center:!0},extra:{enableMenuBar:!0}})});this.logger=new Y3(this.name),this.client=new Wf(void 0,"fetch"),this.TOP_BAR_MENU_ID=`${this.name}-top-bar-menu`,this.SETTINGS_DIALOG_ID=`${this.name}-settings-dialog`,this.CUSTOM_TAB_ID_JUPYTER=`${this.name}${Dt.CUSTOM_TAB_TYPE_JUPYTER}`,this.handlers={gotoBlock:{this:this,func:async(r,n)=>{n===this.clientId&&this.doc2session.has(r)&&await this.gotoBlock(r)}},inputRequest:{this:this,func:this.inputRequest},updateKernelSpecs:{this:this,func:this.updateKernelSpecs},updateKernels:{this:this,func:this.updateKernels},updateSessions:{this:this,func:this.updateSessions}},this.jupyterTab=this.addTab({type:Dt.CUSTOM_TAB_TYPE_JUPYTER,init(){const r=this;r.component=new f1({target:r.element,props:{...r.data}})},destroy(){var n;(n=this.component)==null||n.$destroy()}});const s=p3(this);globalThis.customElements.get(s.TAG_NAME)??globalThis.customElements.define(s.TAG_NAME,s),this.updateEditEventHandler()}onload(){this.addIcons([ch,hh,uh,fh,dh,_h,ph,mh,gh,vh,bh,yh,wh,Sh,Ch,kh,Eh,Lh].join(""));const i=this;this.jupyterDock={dock:this.addDock({config:{position:"LeftTop",size:{width:256,height:0},icon:"icon-jupyter-client",title:this.i18n.dock.title,show:!0},data:{},type:"-dock",init(){this.element.classList.add("fn__flex-column");const s=new hg({target:this.element,props:{plugin:i,...this.data,kernelspecs:i.kernelspecs,kernels:i.kernels,sessions:i.sessions}});i.jupyterDock.model=this,i.jupyterDock.component=s},destroy(){var s;(s=i.jupyterDock.component)==null||s.$destroy(),delete i.jupyterDock.component,delete i.jupyterDock.model}})},this.jupyterInspectDock={dock:this.addDock({config:{position:"BottomLeft",size:{width:256,height:0},icon:"icon-jupyter-client-inspect",title:this.i18n.inspectDock.title,show:!0},data:{stream:""},type:"-inspect-dock",init(){this.element.classList.add("fn__flex-column");const s=new dg({target:this.element,props:{plugin:i,...this.data}});i.jupyterInspectDock.model=this,i.jupyterInspectDock.component=s},destroy(){var s;(s=i.jupyterInspectDock.component)==null||s.$destroy(),delete i.jupyterInspectDock.component,delete i.jupyterInspectDock.model}})},this.addCommand({langKey:"run-selected-cells",langText:this.i18n.commands.runSelectedCells.text,hotkey:"⌘↩",customHotkey:"⌘↩",editorCallback:async()=>{const r=(await this.executeSelectedCellBlocks()).cells.at(-1);r&&await this.gotoBlock(r.id,!1)}}),this.addCommand({langKey:"run-selected-cells-and-goto-next",langText:this.i18n.commands.runSelectedCellsAndGotoNext.text,hotkey:"⇧↩",customHotkey:"⇧↩",editorCallback:async()=>{const s=await this.executeSelectedCellBlocks(),r=await this.getNextCodeCell(s);if(r)await this.gotoBlock(r.id,!1);else{if(s.cells.length==0)return;const n=await this.insertNewCodeCell(s);n&&await this.gotoBlock(n.id,!1)}}}),this.addCommand({langKey:"run-selected-cells-and-insert-below",langText:this.i18n.commands.runSelectedCellsAndInsertBelow.text,hotkey:"⌥↩",customHotkey:"⌥↩",editorCallback:async()=>{const s=await this.executeSelectedCellBlocks(),r=await this.insertNewCodeCell(s);r&&await this.gotoBlock(r.id,!1)}}),this.addCommand({langKey:"open-jupyter-tab",langText:this.i18n.commands.openJupyterTab.text,hotkey:"",customHotkey:"",callback:this.openJupyterTab}),this.addCommand({langKey:"open-jupyter-browser",langText:this.i18n.commands.openJupyterBrowser.text,hotkey:"",customHotkey:"",callback:this.openJupyterBrowser}),this.addCommand({langKey:"open-jupyter-window",langText:this.i18n.commands.openJupyterWindow.text,hotkey:"",customHotkey:"",callback:this.openJupyterWindow}),this.loadData(Dt.GLOBAL_CONFIG_NAME).then(s=>{this.config=xa(jr,s||{})}).catch(s=>this.logger.error(s)).finally(async()=>{var r;if(this.initBridge(),await this.isWorkerRunning())await this.jupyterForceRefresh();else{for(this.initWorker();await this.isWorkerRunning();)await d6(1e3);await((r=this.bridge)==null?void 0:r.call("onload",this.i18n)),await this.updateWorkerConfig(!0)}this.eventBus.on("click-editortitleicon",this.blockMenuEventListener),this.eventBus.on("click-blockicon",this.blockMenuEventListener),this.eventBus.on("click-editorcontent",this.clickEditorContentEventListener),this.eventBus.on("loaded-protyle-static",this.loadedProtyleEventListener),this.eventBus.on("switch-protyle",this.loadedProtyleEventListener),this.eventBus.off("destroy-protyle",this.destroyProtyleEventListener)})}onLayoutReady(){this.topBarButton=this.addTopBar({icon:"icon-jupyter-client",title:this.displayName,position:"right",callback:i=>{var r,n,l,o;const s=new ft.Menu(this.TOP_BAR_MENU_ID);s.addItem({icon:"iconLayout",label:this.i18n.commands.openJupyterTab.text,click:this.openJupyterTab}),s.addItem({icon:"iconOpen",label:this.i18n.commands.openJupyterBrowser.text,click:this.openJupyterBrowser}),s.addItem({icon:"iconOpenWindow",label:this.i18n.commands.openJupyterWindow.text,click:this.openJupyterWindow}),Ds?s.fullscreen():s.open({x:((n=(r=globalThis.siyuan)==null?void 0:r.coordinates)==null?void 0:n.pageX)??0,y:((o=(l=globalThis.siyuan)==null?void 0:l.coordinates)==null?void 0:o.pageY)??0,isLeft:!0})}})}onunload(){var i,s;this.eventBus.off("click-editortitleicon",this.blockMenuEventListener),this.eventBus.off("click-blockicon",this.blockMenuEventListener),this.eventBus.off("click-editorcontent",this.clickEditorContentEventListener),this.eventBus.off("loaded-protyle-static",this.loadedProtyleEventListener),this.eventBus.off("switch-protyle",this.loadedProtyleEventListener),this.eventBus.off("destroy-protyle",this.destroyProtyleEventListener);for(const r of this.kernelName2logoObjectURL.values())URL.revokeObjectURL(r);this.doc2session.clear(),this.doc2info.clear(),this.session2docs.clear(),this.kernelName2logoObjectURL.clear(),this.kernelName2language.clear(),this.kernelName2displayName.clear(),this.worker?(i=this.bridge)==null||i.call("unload").then(()=>{var r,n;(r=this.bridge)==null||r.terminate(),this.bridge=void 0,(n=this.worker)==null||n.terminate(),this.worker=void 0}):((s=this.bridge)==null||s.terminate(),this.bridge=void 0)}openSetting(){const i=this,r=new ft.Dialog({title:`${this.i18n.displayName} <code class="fn__code">${this.name}</code>`,content:`<div id="${i.SETTINGS_DIALOG_ID}" class="fn__flex-column" />`,width:Ds?"92vw":"720px",height:Ds?void 0:"640px"}).element.querySelector(`#${i.SETTINGS_DIALOG_ID}`);r&&new E0({target:r,props:{config:this.config,plugin:this}})}get baseUrl(){var i;return((i=this.config)==null?void 0:i.jupyter.server.settings.baseUrl)||rr.baseUrl}get newClientId(){return globalThis.Lute.NewNodeID()}async resetConfig(i=!0){return this.updateConfig(xa(jr),i)}async updateConfig(i,s=!1){i&&i!==this.config&&(this.config=i),this.updateXtermElement(),this.updateEditEventHandler(),await this.updateWorkerConfig(s),await this.saveData(Dt.GLOBAL_CONFIG_NAME,this.config)}initBridge(){var i;(i=this.bridge)==null||i.terminate(),this.bridge=new f6(new BroadcastChannel(me.JUPYTER_WORKER_BROADCAST_CHANNEL_NAME),this.logger,this.handlers,this.clientId)}initWorker(){var i;(i=this.worker)==null||i.terminate(),this.worker=new Worker(`${globalThis.document.baseURI}plugins/${this.name}/workers/${me.JUPYTER_WORKER_FILE_NAME}.js?v=${za.version}`,{type:"module",name:this.name,credentials:"same-origin"})}async isWorkerRunning(){try{return this.bridge||this.initBridge(),await this.bridge.ping(),!0}catch{return!1}}isSessionRunning(i){return this.sessions.some(s=>s.id===i)}isSessionConnected(i){return this.session2docs.has(i)}relateDoc2Session(i,s){const r=this.doc2session.get(i);if(r){const l=this.session2docs.get(r.id);l&&(l.delete(i),l.size===0&&this.session2docs.delete(r.id))}this.doc2session.set(i,s);const n=this.session2docs.get(s.id)??new Set;n.add(i),this.session2docs.set(s.id,n)}async updateWorkerConfig(i){var s,r;await((s=this.bridge)==null?void 0:s.call("updateConfig",this.config)),i&&await((r=this.bridge)==null?void 0:r.call("restart"))}updateXtermElement(i=this.config.xterm.options){for(const s of this.xtermElements)if(s.terminal)for(const[r,n]of Object.entries(i))s.terminal.options[r]!==n&&(s.terminal.options[r]=n)}updateEditEventHandler(i=this.config.jupyter.edit.delay){this.editEventHandler=Ic(async(s,r,n)=>{if(r||n){const l=this.doc2session.get(s.block.rootID);if(l){const o=Gs();if(As(o)){const a=Oa();if(a){const h=[];r&&h.push(this.requestInspect(l.id,a)),n&&h.push(this.requestComplete(l.id,a)),await Promise.allSettled(h)}}}}},i)}async jupyterFetch(i,s={}){const r=new URL(this.baseUrl);i.startsWith("/")?r.pathname=i:r.pathname=`${r.pathname}/${i}`;const n={Authorization:`token ${this.config.jupyter.server.settings.token}`};s.headers?Object.assign(n,s.headers):s.headers=n;const l=await this.client.forwardProxy({url:r.href,method:s.method,headers:[s.headers],responseEncoding:"base64"});if(200<=l.data.status&&l.data.status<300)return new Blob([f3(l.data.body)],{type:l.data.contentType});throw new Error(l.msg)}async jupyterForceRefresh(){var s,r,n;const i=await Promise.allSettled([(s=this.bridge)==null?void 0:s.call("jupyter.kernelspecs.specs"),(r=this.bridge)==null?void 0:r.call("jupyter.kernels.running"),(n=this.bridge)==null?void 0:n.call("jupyter.sessions.running")]);i[0].status==="fulfilled"&&i[0].value&&this.updateKernelSpecs(i[0].value),i[1].status==="fulfilled"&&i[1].value&&this.updateKernels(i[1].value),i[2].status==="fulfilled"&&i[2].value&&this.updateSessions(i[2].value)}async loadKernelSpecIcon(i,s="#icon-jupyter-client-kernelspec"){if(this.kernelName2logoObjectURL.has(i.name))return this.kernelName2logoObjectURL.get(i.name);const r=(()=>{switch(!0){case"logo-64x64"in i.resources:return i.resources["logo-64x64"];case"logo-32x32"in i.resources:return i.resources["logo-32x32"];case"logo-svg"in i.resources:return i.resources["logo-svg"];default:return Object.keys(i.resources).length>0?Object.values(i.resources)[0]:""}})();if(r)try{const n=await this.jupyterFetch(r,{method:"GET"});if(this.kernelName2logoObjectURL.has(i.name))return this.kernelName2logoObjectURL.get(i.name);{const l=URL.createObjectURL(n);return this.kernelName2logoObjectURL.set(i.name,l),l}}catch(n){this.logger.warn(n)}return this.kernelName2logoObjectURL.set(i.name,s),s}session2ial(i,s=!1){return{[me.attrs.session.id]:i.id,[me.attrs.session.name]:i.name,[me.attrs.session.path]:i.path,[me.attrs.session.type]:i.type,...this.kernel2ial(i.kernel,s)}}ial2session(i,s=!1){const r=this.counter.next().value,n=i[me.attrs.session.id]??(s?an.v4():me.JUPYTER_UNKNOWN_VALUE),l=i[me.attrs.session.name]??(s?`siyuan-console-${r}`:me.JUPYTER_UNKNOWN_VALUE),o=i[me.attrs.session.path]??(s?`siyuan-console-${r}-${globalThis.Lute.NewNodeID()}`:me.JUPYTER_UNKNOWN_VALUE),a=i[me.attrs.session.type]??(s?"console":me.JUPYTER_UNKNOWN_VALUE),h=this.ial2kernel(i,s);return{id:n,type:a,name:l,path:o,kernel:h}}kernel2ial(i,s=!1){const r=i&&this.kernelspecs.kernelspecs[i.name]||void 0;return{[me.attrs.kernel.id]:(i==null?void 0:i.id)??(s?null:void 0),[me.attrs.kernel.name]:(i==null?void 0:i.name)??(s?null:void 0),[me.attrs.kernel.language]:(r==null?void 0:r.language)??(s?null:void 0),[me.attrs.kernel.display_name]:(r==null?void 0:r.display_name)??(s?null:void 0)}}ial2kernel(i,s=!1){const r=i[me.attrs.kernel.id]??(s?an.v4():me.JUPYTER_UNKNOWN_VALUE),n=i[me.attrs.kernel.name]??(s?this.kernelspecs.default:me.JUPYTER_UNKNOWN_VALUE);return{id:r,name:n}}buildJupyterDocumentMenuItems(i,s,r,n){var f,_;const l=[],o=this.ial2session(s,!1),a=((f=r==null?void 0:r.kernel)==null?void 0:f.name)??o.kernel.name,h=this.kernelName2language.get(a)??s[me.attrs.kernel.language]??me.JUPYTER_UNKNOWN_VALUE,u=this.kernelName2displayName.get(a)??s[me.attrs.kernel.display_name]??me.JUPYTER_UNKNOWN_VALUE;return l.push({icon:"icon-jupyter-client-session",label:this.i18n.menu.session.label,accelerator:r?yt(r.name):void 0,submenu:[{icon:"iconSettings",label:this.i18n.menu.session.submenu.settings.label,click:()=>{const v=new ft.Dialog({title:`Jupyter ${this.i18n.settings.sessionSettings.title} <code class="fn__code">${this.name}</code>`,content:`<div id="${this.SETTINGS_DIALOG_ID}" class="fn__flex-column" />`,width:Ds?"92vw":"720px"}),b=v.element.querySelector(`#${this.SETTINGS_DIALOG_ID}`);if(b){const g=new Zg({target:b,props:{docID:i,docIAL:s,plugin:this}});g.$on("cancel",c=>{v.destroy()}),g.$on("confirm",c=>{v.destroy(),this.updateDockFocusItem(i)})}}},{icon:"iconRefresh",label:this.i18n.menu.session.submenu.shutdown.label,disabled:!r,click:()=>{var v;r&&((v=this.bridge)==null||v.call("jupyter.sessions.shutdown",r.id))}},{type:"separator"},{type:"readonly",iconHTML:"",label:this.i18n.menu.session.submenu.info.label.replaceAll("${1}",yt((r==null?void 0:r.id)??o.id)).replaceAll("${2}",yt((r==null?void 0:r.name)??o.name)).replaceAll("${3}",yt((r==null?void 0:r.path)??o.path)).replaceAll("${4}",yt((r==null?void 0:r.type)??o.type)),disabled:!r}]}),l.push({icon:"icon-jupyter-client-kernel",label:this.i18n.menu.kernel.label,accelerator:r!=null&&r.kernel?yt(r.kernel.name):void 0,submenu:[{icon:"iconRefresh",label:this.i18n.menu.kernel.submenu.reconnect.label,disabled:!(r!=null&&r.kernel),click:async()=>{var v;r!=null&&r.kernel&&await((v=this.bridge)==null?void 0:v.call("jupyter.session.kernel.connection.reconnect",r.id))}},{icon:"iconPause",label:this.i18n.menu.kernel.submenu.interrupt.label,disabled:!(r!=null&&r.kernel),click:async()=>{var v;r!=null&&r.kernel&&await((v=this.bridge)==null?void 0:v.call("jupyter.session.kernel.connection.interrupt",r.id))}},{icon:"iconRefresh",label:this.i18n.menu.kernel.submenu.restart.label,disabled:!(r!=null&&r.kernel),click:async()=>{var v;r!=null&&r.kernel&&await((v=this.bridge)==null?void 0:v.call("jupyter.session.kernel.connection.restart",r.id))}},{icon:"iconClose",label:this.i18n.menu.kernel.submenu.shutdown.label,disabled:!(r!=null&&r.kernel),click:async()=>{var v;r!=null&&r.kernel&&await((v=this.bridge)==null?void 0:v.call("jupyter.session.kernel.connection.shutdown",r.id))}},{type:"separator"},{type:"readonly",iconHTML:"",label:this.i18n.menu.kernel.submenu.info.label.replaceAll("${1}",yt(((_=r==null?void 0:r.kernel)==null?void 0:_.id)??o.kernel.id)).replaceAll("${2}",yt(a)).replaceAll("${3}",yt(h)).replaceAll("${4}",yt(u)),disabled:!(r!=null&&r.kernel)}]}),l.push({type:"separator"}),l.push({icon:"iconPlay",label:this.i18n.menu.run.label,submenu:[{icon:"iconPlay",label:this.i18n.menu.run.submenu.all.label,disabled:!(r!=null&&r.kernel),submenu:this.buildExecuteMenuItems(!1,r,n)},{icon:"iconRefresh",label:this.i18n.menu.run.submenu.restart.label,accelerator:this.i18n.menu.run.submenu.restart.accelerator,disabled:!(r!=null&&r.kernel),submenu:this.buildExecuteMenuItems(!0,r,n)}]}),l.push({type:"separator"}),l.push({icon:"iconUpload",label:this.i18n.menu.import.label,accelerator:yt(this.i18n.menu.import.accelerator),submenu:[{element:globalThis.document.createElement("div"),bind:v=>{new bo({target:v,props:{file:!0,icon:"#iconEdit",label:this.i18n.menu.import.submenu.override.label,accept:".ipynb",multiple:!1,webkitdirectory:!1}}).$on("selected",async g=>{var m;const d=g.detail.files.item(0);d&&await((m=this.bridge)==null?void 0:m.call("importIpynb",i,d,"override"))})}},{element:globalThis.document.createElement("div"),bind:v=>{new bo({target:v,props:{file:!0,icon:"#iconAfter",label:this.i18n.menu.import.submenu.append.label,accept:".ipynb",multiple:!1,webkitdirectory:!1}}).$on("selected",async g=>{var m;const d=g.detail.files.item(0);d&&await((m=this.bridge)==null?void 0:m.call("importIpynb",i,d,"append"))})}}]}),l}buildExecuteMenuItems(i,s,r){const n=!(s!=null&&s.kernel),l=r.isDocumentBlock||r.isMultiBlock,o=async u=>{var v;i&&await((v=this.bridge)==null?void 0:v.call("jupyter.session.kernel.connection.restart",s.id));const f=await this.getBlockDOM(r),_=as(f,l);await this.requestExecuteCells(_,s,u)},a=u=>[{icon:"iconTheme",label:this.i18n.menu.run.submenu.cntrl.enable.label,accelerator:this.i18n.menu.run.submenu.cntrl.enable.accelerator,disabled:n,click:async()=>{u.cntrl=!0,await o(u)}},{icon:"icon-jupyter-client-text",label:this.i18n.menu.run.submenu.cntrl.disable.label,accelerator:this.i18n.menu.run.submenu.cntrl.disable.accelerator,disabled:n,click:async()=>{u.cntrl=!1,await o(u)}}];return[{icon:"iconPlay",label:this.i18n.menu.run.submenu.custom.label,disabled:n,click:async()=>{const u=this.config.jupyter.execute.output.parser;await o(u)}},{icon:"iconCode",label:this.i18n.menu.run.submenu.terminal.label,accelerator:yt("Xterm"),disabled:n,click:async()=>{await o({xterm:!0,escaped:!1,cntrl:!1})}},{icon:"icon-jupyter-client-text",label:this.i18n.menu.run.submenu.escape.enable.label,accelerator:this.i18n.menu.run.submenu.escape.enable.accelerator,disabled:n,submenu:a({xterm:!1,escaped:!0,cntrl:!0})},{icon:"iconMarkdown",label:this.i18n.menu.run.submenu.escape.disable.label,accelerator:this.i18n.menu.run.submenu.escape.disable.accelerator,disabled:n,submenu:a({xterm:!1,escaped:!1,cntrl:!0})}]}buildOpenDocumentMenuItems(i){const s=[];return s.push({icon:"iconAdd",label:this.i18n.menu.openTab.label,click:()=>{ft.openTab({app:this.app,doc:{id:i,action:["cb-get-focus","cb-get-hl"]},keepCursor:!1,removeCurrentTab:!1})}}),s.push({icon:"iconMin",label:this.i18n.menu.openTabBackground.label,click:()=>{ft.openTab({app:this.app,doc:{id:i,action:["cb-get-focus","cb-get-hl"]},keepCursor:!0,removeCurrentTab:!1})}}),s.push({icon:"iconLayoutRight",label:this.i18n.menu.openTabRight.label,click:()=>{ft.openTab({app:this.app,doc:{id:i,action:["cb-get-focus","cb-get-hl"]},position:"right",keepCursor:!1,removeCurrentTab:!1})}}),s.push({icon:"iconLayoutBottom",label:this.i18n.menu.openTabBottom.label,click:()=>{ft.openTab({app:this.app,doc:{id:i,action:["cb-get-focus","cb-get-hl"]},position:"bottom",keepCursor:!1,removeCurrentTab:!1})}}),s}async requestInspect(i,s){var n,l;const r=await((n=this.bridge)==null?void 0:n.call("jupyter.session.kernel.connection.requestInspect",i,{code:s.code,cursor_pos:s.offset,detail_level:this.config.jupyter.inspect.detail_level}));if(r)switch(r.content.status){case"ok":if(r.content.found){const o=r.content.data["text/plain"];if(o!==void 0){const a=a3(Array.isArray(o)?o.join():o,!0);return(l=this.jupyterInspectDock.component)==null||l.$set({stream:a}),!0}else this.logger.warn(r)}break;case"abort":this.logger.info(r);case"error":this.logger.warn(r);break}return!1}async requestComplete(i,s){var l;const r={code:s.code,cursor_pos:s.offset},n=await((l=this.bridge)==null?void 0:l.call("jupyter.session.kernel.connection.requestComplete",i,r));if(n)switch(n.content.status){case"ok":{const o=n.content,a=[],h=Pc()?g4:v4,u=o.metadata._jupyter_types_experimental;if(Array.isArray(u)&&u.length>0?u.reduce((f,_)=>{f.type!==_.type&&a.push({type:"separator"});const v=()=>this.complete(s,_.start,_.end,_.text),b={label:_.text,accelerator:yt(_.type),click:v,submenu:_.signature?[{iconHTML:"",label:yt(Kc(_.signature)),click:v}]:void 0},g=h.get(_.type);if(g)b.iconHTML=g;else switch(_.type){case"magic":b.icon="icon-jupyter-client-simple";break;case"path":switch(!0){case _.text.endsWith("/"):b.iconHTML=h.get("folder");break;default:b.iconHTML=h.get("file");break}break;default:b.icon=void 0;break}return a.push(b),_},u[0]):a.push(...o.matches.map(f=>({label:f,click:()=>this.complete(s,o.cursor_start,o.cursor_end,f)}))),a.length>0){const f=s.current,_=(()=>{var c;var g;return g=f.getBoundingClientRect(),g.x>0&&g.y>0?{x:g.right,y:g.bottom}:(g=f.commonAncestorContainer instanceof Element?f.commonAncestorContainer.getBoundingClientRect():void 0,g&&g.x>0&&g.y>0?{x:g.right,y:g.bottom}:(g=f.commonAncestorContainer.parentElement instanceof HTMLSpanElement?(c=f.commonAncestorContainer.parentElement)==null?void 0:c.getBoundingClientRect():void 0,g&&g.x>0&&g.y>0?{x:g.right,y:g.bottom}:(g=s.container.getBoundingClientRect(),{x:g.left,y:g.bottom})))})(),v=new ft.Menu(n.header.msg_id,()=>{this.complating=!1,v.element.lastElementChild instanceof HTMLElement&&(v.element.lastElementChild.style.maxHeight="")});if(a.forEach(g=>v.addItem(g)),this.complating=!0,v.open(_),v.element.getBoundingClientRect().y!==_.y){const g=v.element.lastElementChild;if(g instanceof HTMLElement){const c=globalThis.innerHeight-_.y-32;g.style.maxHeight=`${c}px`,v.element.style.top=`${_.y}px`}}}break}case"abort":this.logger.info(n);case"error":this.logger.warn(n);break}return!1}complete(i,s,r,n){var o;Fa(i.container,{start:s,end:r});const l=(o=globalThis.getSelection())==null?void 0:o.getRangeAt(0);l&&l.toString()!==n&&v6(l,n),Fa(i.container,{start:s+n.length})}async requestExecuteCell(i,s,r,n,l=this.config.jupyter.execute.goto){var o;await((o=this.bridge)==null?void 0:o.call("jupyter.session.kernel.connection.requestExecute",this.clientId,i,s,r,n,l))}async requestExecuteCells(i,s,r,n=this.config.jupyter.execute.goto){for(const l of i)await this.requestExecuteCell(l.code,l.id,s.id,r,n)}async executeSelectedCellBlocks(){const i=k4();if(i.cells.length>0){const s=i.cells[0],r=await this.client.getBlockInfo({id:s.id}),n=this.doc2session.get(r.data.rootID);n?await this.requestExecuteCells(i.cells,n,this.config.jupyter.execute.output.parser,!1):this.siyuan.showMessage(this.i18n.messages.sessionNotConnected.text)}else this.siyuan.showMessage(this.i18n.messages.noValidBlockSelected.text);return i}async getNextCodeCell(i){const s=i.cells.at(-1);if(s){const n=(await this.client.getBlockInfo({id:s.id})).data,o=(await this.client.getDoc({id:n.rootID})).data.content,a=as(o,!0),h=a.findIndex(u=>u.id===s.id);if(h>=0)return a.at(h+1)}}async insertNewCodeCell(i){var r,n;const s={data:E4(),dataType:"markdown"};switch(i.elements.length){case 0:{const l=j3();if(l){s.previousID=l;break}else return}default:{const l=i.elements.at(-1);if(!Ui(l))return;if(As(l)){const o=l.nextElementSibling;switch(!0){case L4(o):s.previousID=o.dataset.nodeId;break;case As(o):case Ui(o):s.nextID=o.dataset.nodeId;break;default:{const a=l.parentElement;let h;switch(!0){case N3(a):{const u=a==null?void 0:a.previousElementSibling;if(P3(u)){h=a.dataset.nodeId;break}else return}case Ui(a):h=a.dataset.nodeId;break;default:return}try{return(r=(await this.client.appendBlock({...s,parentID:h})).data[0])==null?void 0:r.doOperations[0]}catch{return}}}}else{s.previousID=l.dataset.nodeId;break}break}}try{return(n=(await this.client.insertBlock(s)).data[0])==null?void 0:n.doOperations[0]}catch{return}}async gotoBlock(i,s=!0,r){await ft.openTab({app:this.app,doc:{id:i,action:[s?"cb-get-hl":"cb-get-focus"]},keepCursor:!1,removeCurrentTab:!1,afterOpen:r})}async getBlockDOM(i){var s;if(i.isDocumentBlock)s=(await this.client.getDoc({id:i.id})).data.content;else{const r=[];for(const n of i.blocks)r.push(n.element.outerHTML);s=r.join("")}return s}updateDockFocusItem(i){var r,n,l;const s=this.doc2session.get(i);(l=this.jupyterDock.component)==null||l.$set({currentSpec:(r=s==null?void 0:s.kernel)==null?void 0:r.name,currentKernel:(n=s==null?void 0:s.kernel)==null?void 0:n.id,currentSession:s==null?void 0:s.id,currentDocument:i})}toggleEditEventListener(i,s){var r,n,l,o;if(s){if(!this.protyles.has(i)){const a=["keyup",h=>this.editEventListener(h,i),{capture:!0}];this.protyles.set(i,a),(n=(r=i.wysiwyg)==null?void 0:r.element)==null||n.addEventListener(...a)}}else{const a=this.protyles.get(i);a&&((o=(l=i.wysiwyg)==null?void 0:l.element)==null||o.removeEventListener(...a))}}};ne(Dt,"GLOBAL_CONFIG_NAME","global-config"),ne(Dt,"CUSTOM_TAB_TYPE_JUPYTER","-jupyter-tab"),ne(Dt,"EDIT_KEYBOARD_EVENT_STATUS_INSPECT",{type:"keyup",altKey:!1,ctrlKey:!1,metaKey:!1,shiftKey:!1,key:i=>/^(\S|Tab|Delete|Backspace|ArrowUp|ArrowDown|ArrowLeft|ArrowRight|Home|End)$/.test(i)}),ne(Dt,"EDIT_KEYBOARD_EVENT_STATUS_COMPLATE",{type:"keyup",altKey:!1,ctrlKey:!1,metaKey:!1,shiftKey:!1,key:i=>/^(\S|Tab|Delete|Backspace)$/.test(i)});let hn=Dt;module.exports=hn;
