"use strict";var Lc=Object.defineProperty;var Ec=(e,t,i)=>t in e?Lc(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i;var ce=(e,t,i)=>(Ec(e,typeof t!="symbol"?t+"":t,i),i);const ut=require("siyuan"),Dc="jupyter-client",Mc="Zuoqiu Yingyi",Tc="https://github.com/Zuoqiu-Yingyi/siyuan-plugin-jupyter-client",Ac="0.2.0",Rc="2.10.3",Oc={default:"Jupyter Client",zh_CN:"Jupyter 客户端",zh_CHT:"Jupyter 客戶端"},Bc={default:"The plugin can connect to the Jupyter service, run the code block, output and save the run result.",zh_CN:"该插件可以连接 Jupyter 服务，运行代码块，输出并保存运行结果。",zh_CHT:"該插件可以連接 Jupyter 服務，運行代碼塊，輸出並保存運行結果。"},Hc={default:"README.md",zh_CN:"README_zh_CN.md",zh_CHT:"README_zh_CN.md"},xc={openCollective:"",patreon:"",github:"",custom:["https://afdian.net/a/zuoqiu","https://ko-fi.com/zuoqiu"]},Sa={name:Dc,author:Mc,url:Tc,version:Ac,minAppVersion:Rc,displayName:Oc,description:Bc,readme:Hc,funding:xc};const Pc=`<symbol
    id="icon-jupyter-client"
    viewBox="0 0 44 51"
    xmlns="http://www.w3.org/2000/svg"
    xmlns:xlink="http://www.w3.org/1999/xlink"
    xmlns:figma="http://www.figma.com/figma/ns"
>
    <title>Group.svg</title>
    <desc>Created using Figma 0.90</desc>
    <g transform="translate(-1640 -2453)" figma:type="canvas">
        <g style="mix-blend-mode:normal;" figma:type="group">
            <g style="mix-blend-mode:normal;" figma:type="group">
                <g style="mix-blend-mode:normal;" figma:type="group">
                    <g style="mix-blend-mode:normal;" figma:type="group">
                        <g style="mix-blend-mode:normal;" figma:type="group">
                            <g style="mix-blend-mode:normal;" figma:type="vector">
                                <use xlink:href="#jupyter-client-path0_fill" transform="translate(1640.54 2474.36)"
                                    fill="#4E4E4E" style="mix-blend-mode:normal;" />
                            </g>
                        </g>
                        <g style="mix-blend-mode:normal;" figma:type="group">
                            <g style="mix-blend-mode:normal;" figma:type="vector">
                                <use xlink:href="#jupyter-client-path1_fill" transform="translate(1645.68 2474.37)"
                                    fill="#4E4E4E" style="mix-blend-mode:normal;" />
                            </g>
                        </g>
                        <g style="mix-blend-mode:normal;" figma:type="group">
                            <g style="mix-blend-mode:normal;" figma:type="vector">
                                <use xlink:href="#jupyter-client-path2_fill" transform="translate(1653.39 2474.26)"
                                    fill="#4E4E4E" style="mix-blend-mode:normal;" />
                            </g>
                        </g>
                        <g style="mix-blend-mode:normal;" figma:type="group">
                            <g style="mix-blend-mode:normal;" figma:type="vector">
                                <use xlink:href="#jupyter-client-path3_fill" transform="translate(1660.43 2474.39)"
                                    fill="#4E4E4E" style="mix-blend-mode:normal;" />
                            </g>
                        </g>
                        <g style="mix-blend-mode:normal;" figma:type="group">
                            <g style="mix-blend-mode:normal;" figma:type="vector">
                                <use xlink:href="#jupyter-client-path4_fill" transform="translate(1667.55 2472.54)"
                                    fill="#4E4E4E" style="mix-blend-mode:normal;" />
                            </g>
                        </g>
                        <g style="mix-blend-mode:normal;" figma:type="group">
                            <g style="mix-blend-mode:normal;" figma:type="vector">
                                <use xlink:href="#jupyter-client-path5_fill" transform="translate(1672.47 2474.29)"
                                    fill="#4E4E4E" style="mix-blend-mode:normal;" />
                            </g>
                        </g>
                        <g style="mix-blend-mode:normal;" figma:type="group">
                            <g style="mix-blend-mode:normal;" figma:type="vector">
                                <use xlink:href="#jupyter-client-path6_fill" transform="translate(1679.98 2474.24)"
                                    fill="#4E4E4E" style="mix-blend-mode:normal;" />
                            </g>
                        </g>
                    </g>
                </g>
                <g style="mix-blend-mode:normal;" figma:type="group">
                    <g style="mix-blend-mode:normal;" figma:type="group">
                        <g style="mix-blend-mode:normal;" figma:type="vector">
                            <use xlink:href="#jupyter-client-path7_fill" transform="translate(1673.48 2453.69)"
                                fill="#767677" style="mix-blend-mode:normal;" />
                        </g>
                    </g>
                    <g style="mix-blend-mode:normal;" figma:type="group">
                        <g style="mix-blend-mode:normal;" figma:type="vector">
                            <use xlink:href="#jupyter-client-path8_fill" transform="translate(1643.21 2484.27)"
                                fill="#F37726" style="mix-blend-mode:normal;" />
                        </g>
                    </g>
                    <g style="mix-blend-mode:normal;" figma:type="group">
                        <g style="mix-blend-mode:normal;" figma:type="vector">
                            <use xlink:href="#jupyter-client-path9_fill" transform="translate(1643.21 2457.88)"
                                fill="#F37726" style="mix-blend-mode:normal;" />
                        </g>
                    </g>
                    <g style="mix-blend-mode:normal;" figma:type="group">
                        <g style="mix-blend-mode:normal;" figma:type="vector">
                            <use xlink:href="#jupyter-client-path10_fill" transform="translate(1643.28 2496.09)"
                                fill="#9E9E9E" style="mix-blend-mode:normal;" />
                        </g>
                    </g>
                    <g style="mix-blend-mode:normal;" figma:type="group">
                        <g style="mix-blend-mode:normal;" figma:type="vector">
                            <use xlink:href="#jupyter-client-path11_fill" transform="translate(1641.87 2458.43)"
                                fill="#616262" style="mix-blend-mode:normal;" />
                        </g>
                    </g>
                </g>
            </g>
        </g>
    </g>
    <defs>
        <path id="jupyter-client-path0_fill"
            d="M 1.74498 5.47533C 1.74498 7.03335 1.62034 7.54082 1.29983 7.91474C 0.943119 8.23595 0.480024 8.41358 0 8.41331L 0.124642 9.3036C 0.86884 9.31366 1.59095 9.05078 2.15452 8.56466C 2.45775 8.19487 2.6834 7.76781 2.818 7.30893C 2.95261 6.85005 2.99341 6.36876 2.93798 5.89377L 2.93798 0L 1.74498 0L 1.74498 5.43972L 1.74498 5.47533Z" />
        <path id="jupyter-client-path1_fill"
            d="M 5.50204 4.76309C 5.50204 5.43081 5.50204 6.02731 5.55545 6.54368L 4.496 6.54368L 4.42478 5.48423C 4.20318 5.85909 3.88627 6.16858 3.50628 6.38125C 3.12628 6.59392 2.69675 6.70219 2.26135 6.69503C 1.22861 6.69503 0 6.13415 0 3.84608L 0 0.0445149L 1.193 0.0445149L 1.193 3.6057C 1.193 4.84322 1.57583 5.67119 2.65309 5.67119C 2.87472 5.67358 3.09459 5.63168 3.29982 5.54796C 3.50505 5.46424 3.69149 5.34039 3.84822 5.18366C 4.00494 5.02694 4.1288 4.84049 4.21252 4.63527C 4.29623 4.43004 4.33813 4.21016 4.33575 3.98853L 4.33575 0L 5.52874 0L 5.52874 4.72748L 5.50204 4.76309Z" />
        <path id="jupyter-client-path2_fill"
            d="M 0.0534178 2.27264C 0.0534178 1.44466 0.0534178 0.768036 0 0.153731L 1.06836 0.153731L 1.12177 1.2666C 1.3598 0.864535 1.70247 0.534594 2.11325 0.311954C 2.52404 0.0893145 2.98754 -0.0176786 3.45435 0.00238095C 5.03908 0.00238095 6.23208 1.32892 6.23208 3.30538C 6.23208 5.63796 4.7987 6.79535 3.24958 6.79535C 2.85309 6.81304 2.45874 6.7281 2.10469 6.54874C 1.75064 6.36937 1.44888 6.10166 1.22861 5.77151L 1.22861 5.77151L 1.22861 9.33269L 0.0534178 9.33269L 0.0534178 2.29935L 0.0534178 2.27264ZM 1.22861 4.00872C 1.23184 4.17026 1.24972 4.33117 1.28203 4.48948C 1.38304 4.88479 1.61299 5.23513 1.93548 5.48506C 2.25798 5.735 2.65461 5.87026 3.06262 5.86944C 4.31794 5.86944 5.05689 4.8456 5.05689 3.3588C 5.05689 2.05897 4.36246 0.946096 3.10714 0.946096C 2.61036 0.986777 2.14548 1.20726 1.79965 1.5662C 1.45382 1.92514 1.25079 2.3979 1.22861 2.89585L 1.22861 4.00872Z" />
        <path id="jupyter-client-path3_fill"
            d="M 1.31764 0.0178059L 2.75102 3.85499C 2.90237 4.28233 3.06262 4.7987 3.16946 5.18153C 3.2941 4.7898 3.42764 4.29123 3.5879 3.82828L 4.88773 0.0178059L 6.14305 0.0178059L 4.36246 4.64735C 3.47216 6.87309 2.92908 8.02158 2.11 8.71601C 1.69745 9.09283 1.19448 9.35658 0.649917 9.48166L 0.356119 8.48453C 0.736886 8.35942 1.09038 8.16304 1.39777 7.90584C 1.8321 7.55188 2.17678 7.10044 2.4038 6.5882C 2.45239 6.49949 2.48551 6.40314 2.50173 6.3033C 2.49161 6.19586 2.46457 6.0907 2.42161 5.9917L 0 0L 1.29983 0L 1.31764 0.0178059Z" />
        <path id="jupyter-client-path4_fill"
            d="M 2.19013 0L 2.19013 1.86962L 3.8995 1.86962L 3.8995 2.75992L 2.19013 2.75992L 2.19013 6.26769C 2.19013 7.06896 2.42161 7.53191 3.08043 7.53191C 3.31442 7.53574 3.54789 7.5088 3.77486 7.45179L 3.82828 8.34208C 3.48794 8.45999 3.12881 8.51431 2.76882 8.50234C 2.53042 8.51726 2.29161 8.48043 2.06878 8.39437C 1.84595 8.30831 1.64438 8.17506 1.47789 8.00377C 1.11525 7.51873 0.949826 6.91431 1.01494 6.31221L 1.01494 2.75102L 0 2.75102L 0 1.86072L 1.03274 1.86072L 1.03274 0.275992L 2.19013 0Z" />
        <path id="jupyter-client-path5_fill"
            d="M 1.17716 3.57899C 1.153 3.88093 1.19468 4.18451 1.29933 4.46876C 1.40398 4.75301 1.5691 5.01114 1.78329 5.22532C 1.99747 5.43951 2.2556 5.60463 2.53985 5.70928C 2.8241 5.81393 3.12768 5.85561 3.42962 5.83145C 4.04033 5.84511 4.64706 5.72983 5.21021 5.49313L 5.41498 6.38343C 4.72393 6.66809 3.98085 6.80458 3.23375 6.78406C 2.79821 6.81388 2.36138 6.74914 1.95322 6.59427C 1.54505 6.43941 1.17522 6.19809 0.869071 5.88688C 0.562928 5.57566 0.327723 5.2019 0.179591 4.79125C 0.0314584 4.38059 -0.0260962 3.94276 0.0108748 3.50777C 0.0108748 1.54912 1.17716 0 3.0824 0C 5.21911 0 5.75329 1.86962 5.75329 3.06262C 5.76471 3.24644 5.76471 3.43079 5.75329 3.61461L 1.15046 3.61461L 1.17716 3.57899ZM 4.66713 2.6887C 4.70149 2.45067 4.68443 2.20805 4.61709 1.97718C 4.54976 1.74631 4.43372 1.53255 4.2768 1.35031C 4.11987 1.16808 3.92571 1.0216 3.70739 0.920744C 3.48907 0.81989 3.25166 0.767006 3.01118 0.765656C 2.52201 0.801064 2.06371 1.01788 1.72609 1.37362C 1.38847 1.72935 1.19588 2.19835 1.18607 2.6887L 4.66713 2.6887Z" />
        <path id="jupyter-client-path6_fill"
            d="M 0.0534178 2.19228C 0.0534178 1.42663 0.0534178 0.767806 0 0.162404L 1.06836 0.162404L 1.06836 1.43553L 1.12177 1.43553C 1.23391 1.04259 1.4656 0.694314 1.78468 0.439049C 2.10376 0.183783 2.4944 0.034196 2.90237 0.0110538C 3.01466 -0.00368459 3.12839 -0.00368459 3.24068 0.0110538L 3.24068 1.12393C 3.10462 1.10817 2.9672 1.10817 2.83114 1.12393C 2.427 1.13958 2.04237 1.30182 1.7491 1.58035C 1.45583 1.85887 1.27398 2.23462 1.23751 2.63743C 1.20422 2.8196 1.18635 3.00425 1.1841 3.18941L 1.1841 6.65267L 0.00890297 6.65267L 0.00890297 2.20118L 0.0534178 2.19228Z" />
        <path id="jupyter-client-path7_fill"
            d="M 6.03059 2.83565C 6.06715 3.43376 5.92485 4.02921 5.6218 4.54615C 5.31875 5.0631 4.86869 5.47813 4.32893 5.73839C 3.78917 5.99864 3.18416 6.09233 2.59097 6.00753C 1.99778 5.92272 1.44326 5.66326 0.998048 5.26219C 0.552837 4.86113 0.23709 4.33661 0.0910307 3.75546C -0.0550287 3.17431 -0.0247891 2.56283 0.177897 1.99893C 0.380583 1.43503 0.746541 0.944221 1.22915 0.589037C 1.71176 0.233853 2.28918 0.0303686 2.88784 0.00450543C 3.28035 -0.0170932 3.67326 0.0391144 4.04396 0.169896C 4.41467 0.300677 4.75587 0.503453 5.04794 0.766561C 5.34 1.02967 5.57718 1.34792 5.74582 1.70301C 5.91446 2.0581 6.01124 2.44303 6.03059 2.83565L 6.03059 2.83565Z" />
        <path id="jupyter-client-path8_fill"
            d="M 18.6962 7.12238C 10.6836 7.12238 3.64131 4.24672 0 0C 1.41284 3.82041 3.96215 7.1163 7.30479 9.44404C 10.6474 11.7718 14.623 13.0196 18.6962 13.0196C 22.7695 13.0196 26.745 11.7718 30.0877 9.44404C 33.4303 7.1163 35.9796 3.82041 37.3925 4.0486e-13C 33.7601 4.24672 26.7445 7.12238 18.6962 7.12238Z" />
        <path id="jupyter-client-path9_fill"
            d="M 18.6962 5.89725C 26.7089 5.89725 33.7512 8.77291 37.3925 13.0196C 35.9796 9.19922 33.4303 5.90333 30.0877 3.57559C 26.745 1.24785 22.7695 4.0486e-13 18.6962 0C 14.623 4.0486e-13 10.6474 1.24785 7.30479 3.57559C 3.96215 5.90333 1.41284 9.19922 0 13.0196C 3.64131 8.76401 10.648 5.89725 18.6962 5.89725Z" />
        <path id="jupyter-client-path10_fill"
            d="M 7.59576 3.56656C 7.64276 4.31992 7.46442 5.07022 7.08347 5.72186C 6.70251 6.3735 6.13619 6.89698 5.45666 7.22561C 4.77713 7.55424 4.01515 7.67314 3.26781 7.56716C 2.52046 7.46117 1.82158 7.13511 1.26021 6.63051C 0.698839 6.12591 0.300394 5.46561 0.115637 4.73375C -0.0691191 4.00188 -0.0318219 3.23159 0.222777 2.52099C 0.477376 1.8104 0.93775 1.19169 1.54524 0.743685C 2.15274 0.295678 2.87985 0.0386595 3.63394 0.00537589C 4.12793 -0.0210471 4.62229 0.0501173 5.08878 0.214803C 5.55526 0.37949 5.98473 0.63447 6.35264 0.965179C 6.72055 1.29589 7.01971 1.69584 7.233 2.1422C 7.4463 2.58855 7.56957 3.07256 7.59576 3.56656L 7.59576 3.56656Z" />
        <path id="jupyter-client-path11_fill"
            d="M 2.25061 4.37943C 1.81886 4.39135 1.39322 4.27535 1.02722 4.04602C 0.661224 3.81668 0.371206 3.48424 0.193641 3.09052C 0.0160762 2.69679 -0.0411078 2.25935 0.0292804 1.83321C 0.0996686 1.40707 0.294486 1.01125 0.589233 0.695542C 0.883981 0.37983 1.2655 0.158316 1.68581 0.0588577C 2.10611 -0.0406005 2.54644 -0.0135622 2.95143 0.136572C 3.35641 0.286707 3.70796 0.553234 3.96186 0.902636C 4.21577 1.25204 4.3607 1.66872 4.37842 2.10027C 4.39529 2.6838 4.18131 3.25044 3.78293 3.67715C 3.38455 4.10387 2.83392 4.35623 2.25061 4.37943Z" />
    </defs>
</symbol>
`,Ic=`<symbol
    id="icon-jupyter-client-inspect"
    viewBox="0 0 24 24"
>
    <path
        d="M20 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm-5 14H4v-4h11v4zm0-5H4V9h11v4zm5 5h-4V9h4v9z"
    />
</symbol>
`,Nc=`<symbol
    id="icon-jupyter-client-text"
    viewBox="0 0 1024 1024"
>
    <path
        d="M853.333333 1024 170.666667 1024c-93.866667 0-170.666667-76.8-170.666667-170.666667L0 170.666667c0-93.866667 76.8-170.666667 170.666667-170.666667l682.666667 0c93.866667 0 170.666667 76.8 170.666667 170.666667l0 682.666667C1024 947.2 947.2 1024 853.333333 1024zM170.666667 85.333333C123.733333 85.333333 85.333333 123.733333 85.333333 170.666667l0 682.666667c0 46.933333 38.4 85.333333 85.333333 85.333333l682.666667 0c46.933333 0 85.333333-38.4 85.333333-85.333333L938.666667 170.666667c0-46.933333-38.4-85.333333-85.333333-85.333333L170.666667 85.333333zM725.333333 341.333333 298.666667 341.333333C273.066667 341.333333 256 324.266667 256 298.666667s17.066667-42.666667 42.666667-42.666667l426.666667 0c25.6 0 42.666667 17.066667 42.666667 42.666667S750.933333 341.333333 725.333333 341.333333zM298.666667 384C273.066667 384 256 366.933333 256 341.333333L256 298.666667c0-25.6 17.066667-42.666667 42.666667-42.666667s42.666667 17.066667 42.666667 42.666667l0 42.666667C341.333333 366.933333 324.266667 384 298.666667 384zM725.333333 384c-25.6 0-42.666667-17.066667-42.666667-42.666667L682.666667 298.666667c0-25.6 17.066667-42.666667 42.666667-42.666667s42.666667 17.066667 42.666667 42.666667l0 42.666667C768 366.933333 750.933333 384 725.333333 384zM512 768c-25.6 0-42.666667-17.066667-42.666667-42.666667L469.333333 298.666667c0-25.6 17.066667-42.666667 42.666667-42.666667s42.666667 17.066667 42.666667 42.666667l0 426.666667C554.666667 750.933333 537.6 768 512 768zM554.666667 768l-85.333333 0c-25.6 0-42.666667-17.066667-42.666667-42.666667s17.066667-42.666667 42.666667-42.666667l85.333333 0c25.6 0 42.666667 17.066667 42.666667 42.666667S580.266667 768 554.666667 768z"
    />
</symbol>
`,Vc=`<symbol
    id="icon-jupyter-client-simple"
    viewBox="0 0 152 165"
    xmlns="http://www.w3.org/2000/svg"
    xmlns:xlink="http://www.w3.org/1999/xlink"
>
  <g class="jp-jupyter-icon-color" fill="#F37726">
    <path transform="translate(0.078947, 110.582927)" d="M75.9422842,29.5804561 C43.3023947,29.5804561 14.7967832,17.6534634 0,0 C5.51083211,15.8406829 15.7815389,29.5667732 29.3904947,39.2784171 C42.9997,48.9898537 59.2737,54.2067805 75.9605789,54.2067805 C92.6474579,54.2067805 108.921458,48.9898537 122.530663,39.2784171 C136.139453,29.5667732 146.410284,15.8406829 151.921158,0 C137.087868,17.6534634 108.582589,29.5804561 75.9422842,29.5804561 L75.9422842,29.5804561 Z" />
    <path transform="translate(0.037368, 0.704878)" d="M75.9784579,24.6264073 C108.618763,24.6264073 137.124458,36.5534415 151.921158,54.2067805 C146.410284,38.366222 136.139453,24.6401317 122.530663,14.9284878 C108.921458,5.2168439 92.6474579,0 75.9605789,0 C59.2737,0 42.9997,5.2168439 29.3904947,14.9284878 C15.7815389,24.6401317 5.51083211,38.366222 0,54.2067805 C14.8330816,36.5899293 43.3385684,24.6264073 75.9784579,24.6264073 L75.9784579,24.6264073 Z" />
  </g>
</symbol>
`,jc=`<symbol
    id="icon-jupyter-client-terminal"
    viewBox="0 0 24 24"
>
    <path
        d="M3 3H21C21.5523 3 22 3.44772 22 4V20C22 20.5523 21.5523 21 21 21H3C2.44772 21 2 20.5523 2 20V4C2 3.44772 2.44772 3 3 3ZM4 5V19H20V5H4ZM12 15H18V17H12V15ZM8.66685 12L5.83842 9.17157L7.25264 7.75736L11.4953 12L7.25264 16.2426L5.83842 14.8284L8.66685 12Z"
    />
</symbol>
`,Fc=`<symbol
    id="icon-jupyter-client-kernelspec"
    viewBox="0 0 512 512"
>
    <g>
        <path
            d="M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8zm96 328c0 8.8-7.2 16-16 16H176c-8.8 0-16-7.2-16-16V176c0-8.8 7.2-16 16-16h160c8.8 0 16 7.2 16 16v160z"
        />
    </g>
</symbol>
`,Uc=`<symbol
    id="icon-jupyter-client-kernel"
    viewBox="0 0 24 24"
>
    <path
        d="M15 9H9v6h6V9zm-2 4h-2v-2h2v2zm8-2V9h-2V7c0-1.1-.9-2-2-2h-2V3h-2v2h-2V3H9v2H7c-1.1 0-2 .9-2 2v2H3v2h2v2H3v2h2v2c0 1.1.9 2 2 2h2v2h2v-2h2v2h2v-2h2c1.1 0 2-.9 2-2v-2h2v-2h-2v-2h2zm-4 6H7V7h10v10z"
    />
</symbol>
`,Wc=`<symbol
    id="icon-jupyter-client-kernel-unknown"
    viewBox="0 0 24 24"
    fill="none"
>
    <path
        stroke="currentColor"
        stroke-width="2"
        d="M2,3.99079514 C2,2.89130934 2.89821238,2 3.99079514,2 L20.0092049,2 C21.1086907,2 22,2.89821238 22,3.99079514 L22,20.0092049 C22,21.1086907 21.1017876,22 20.0092049,22 L3.99079514,22 C2.89130934,22 2,21.1017876 2,20.0092049 L2,3.99079514 Z M12,15 L12,14 C12,13 12,12.5 13,12 C14,11.5 15,11 15,9.5 C15,8.5 14,7 12,7 C10,7 9,8.26413718 9,10 M12,16 L12,18"
    />
</symbol>
`,Yc=`<symbol
    id="icon-jupyter-client-kernel-starting"
    viewBox="0 0 1024 1024"
>
    <path
        d="M256 640c-35.413333 0-67.413333 14.506667-90.453333 37.546667C115.2 727.893333 85.333333 938.666667 85.333333 938.666667s210.773333-29.866667 261.12-80.213334A127.829333 127.829333 0 0 0 256 640z m30.293333 158.293333c-11.946667 11.946667-92.586667 32.426667-92.586666 32.426667s20.053333-80.213333 32.426666-92.586667c7.253333-8.106667 17.92-12.8 29.866667-12.8a42.794667 42.794667 0 0 1 30.293333 72.96z m456.96-215.893333c271.36-271.36 180.906667-482.56 180.906667-482.56S712.96 9.386667 441.6 280.746667l-106.24-21.333334a86.613333 86.613333 0 0 0-77.226667 23.466667L85.333333 456.106667l213.333334 91.306666L476.586667 725.333333l91.306666 213.333334 172.8-172.8c20.053333-20.053333 29.013333-49.066667 23.466667-77.226667l-20.906667-106.24zM316.16 462.08l-81.493333-34.986667 84.053333-84.053333 61.44 12.373333c-24.32 35.413333-46.08 72.533333-64 106.666667z m280.746667 327.253333l-34.986667-81.493333c34.133333-17.92 71.253333-39.68 106.24-64l12.373333 61.44-83.626666 84.053333zM682.666667 522.24c-56.32 56.32-144.213333 102.4-172.373334 116.48l-125.013333-125.013333c13.653333-27.733333 59.733333-115.626667 116.48-172.373334 199.68-199.68 351.146667-170.24 351.146667-170.24s29.44 151.466667-170.24 351.146667zM640 469.333333c46.933333 0 85.333333-38.4 85.333333-85.333333s-38.4-85.333333-85.333333-85.333333-85.333333 38.4-85.333333 85.333333 38.4 85.333333 85.333333 85.333333z"
    />
</symbol>
`,zc=`<symbol
    id="icon-jupyter-client-kernel-idle"
    viewBox="0 0 1024 1024"
>
    <path
        d="M926.3 337.9c-22.6-53.3-54.8-101.2-96-142.3-41.1-41.1-89-73.4-142.3-96-55.2-23.4-113.9-35.2-174.3-35.2S394.6 76.2 339.3 99.6c-53.3 22.6-101.2 54.8-142.3 96-41.1 41.1-73.4 89-96 142.3-23.4 55.2-35.2 113.9-35.2 174.3 0 60.4 11.8 119.1 35.2 174.3 22.6 53.3 54.8 101.2 96 142.3 41.1 41.1 89 73.4 142.3 96 55.2 23.4 113.9 35.2 174.3 35.2s119.1-11.8 174.3-35.2c53.3-22.6 101.2-54.8 142.3-96 41.1-41.1 73.4-89 96-142.3 23.4-55.2 35.2-113.9 35.2-174.3 0.1-60.4-11.8-119.1-35.1-174.3zM513.7 879.1c-202.3 0-366.9-164.6-366.9-366.9s164.6-366.9 366.9-366.9c202.3 0 366.9 164.6 366.9 366.9S716 879.1 513.7 879.1zM715.6 371.6c-15.7-15.7-41.4-15.7-57 0l-196 196-95.9-95.9c-15.7-15.7-41.4-15.7-57 0-15.7 15.7-15.7 41.4 0 57l124.5 124.5c15.7 15.7 41.4 15.7 57 0l224.5-224.5c15.6-15.7 15.6-41.4-0.1-57.1z"
    />
</symbol>
`,qc=`<symbol
    id="icon-jupyter-client-kernel-busy"
    viewBox="0 0 1024 1024"
>
    <path
        d="M492.8 214.4c19.2 0 38.4 16 38.4 38.4v243.2c0 41.6-32 73.6-73.6 73.6h-166.4c-19.2 0-38.4-16-38.4-38.4 0-19.2 16-38.4 38.4-38.4h166.4v-243.2c0-16 16-35.2 35.2-35.2zM873.6 291.2c35.2 67.2 54.4 140.8 51.2 211.2-22.4-6.4-48-3.2-73.6 0 0-60.8-12.8-121.6-44.8-176-96-182.4-323.2-249.6-505.6-153.6s-249.6 323.2-153.6 505.6c51.2 96 137.6 160 233.6 185.6l-38.4 64c-108.8-35.2-201.6-108.8-259.2-214.4-115.2-217.6-35.2-486.4 182.4-604.8s492.8-35.2 608 182.4zM755.2 150.4c60.8 48 105.6 105.6 134.4 172.8-22.4 6.4-48 16-67.2 28.8-22.4-54.4-60.8-105.6-112-144-163.2-128-396.8-99.2-524.8 64-128 163.2-99.2 396.8 64 524.8 83.2 67.2 188.8 89.6 288 73.6l-9.6 73.6c-112 12.8-227.2-16-323.2-92.8-195.2-153.6-227.2-432-76.8-627.2 153.6-192 435.2-227.2 627.2-73.6zM748.8 496c-128 0-233.6 105.6-233.6 233.6s105.6 233.6 233.6 233.6 233.6-105.6 233.6-233.6c3.2-128-102.4-233.6-233.6-233.6z m0 393.6c-89.6 0-160-70.4-160-160s70.4-160 160-160 160 70.4 160 160-70.4 160-160 160zM627.2 732.8v-3.2c0-16 12.8-32 32-32h172.8c16 0 32 12.8 32 32v3.2c0 16-12.8 32-32 32h-172.8c-16 0-32-16-32-32z"
    />
</symbol>
`,Zc=`<symbol
    id="icon-jupyter-client-kernel-terminating"
    viewBox="0 0 1024 1024"
>
    <path
        d="M57.33 0h909.34q24 0 40.67 16.66Q1024 33.32 1024 57.32v909.34q0 24-16.66 40.67-16.67 16.66-40.67 16.66H57.33q-24 0-40.66-16.66Q0.01 990.66 0.01 966.66V57.32q0-24 16.66-40.66Q33.33 0 57.33 0z m56 113.33v797.34h797.34V113.33H113.33zM228 454.67h568v114.66H228V454.67z"
    />
</symbol>
`,Kc=`<symbol
    id="icon-jupyter-client-kernel-restarting"
    viewBox="0 0 1024 1024"
>
    <path
        d="M707.584 389.312c-12.928-6.08-18.88-14.272-17.728-24.576s5.504-18.432 13.12-24.576c2.304-1.536 9.728-7.424 22.272-17.664 12.544-10.304 28.032-22.656 46.272-37.12-32-36.544-70.144-65.28-114.304-86.208-44.096-20.864-92.096-31.36-143.936-31.36-48 0-92.992 8.96-134.912 26.816-41.92 17.92-78.528 42.432-109.76 73.664-31.232 31.168-55.808 67.712-73.728 109.568s-26.88 86.784-26.88 134.72c0 47.168 8.96 91.712 26.88 133.568s42.496 78.4 73.728 109.568c31.232 31.232 67.84 55.744 109.76 73.6s86.848 26.816 134.912 26.816c39.616 0 77.184-6.272 112.576-18.816 35.456-12.544 67.84-30.272 97.152-53.056 29.312-22.848 54.464-49.664 75.456-80.512 20.928-30.848 36.416-64.512 46.272-101.056 5.312-17.472 15.232-31.936 29.696-43.392 14.464-11.392 31.616-17.152 51.456-17.152 23.616 0 43.648 8.384 60.032 25.152 16.384 16.704 24.576 36.544 24.576 59.328 0 10.624-1.92 20.928-5.696 30.848-16 53.248-39.616 102.336-70.848 147.264s-68.416 83.52-111.488 115.84c-43.072 32.32-90.88 57.664-143.488 75.904-52.544 18.368-107.776 27.52-165.696 27.52-70.848 0-137.536-13.312-200.064-39.936-62.464-26.624-116.8-63.168-162.88-109.568s-82.688-100.672-109.76-162.688c-27.072-62.016-40.576-128.448-40.576-199.232s13.504-137.344 40.576-199.808c27.072-62.4 63.616-116.608 109.76-162.688 46.08-46.016 100.416-82.56 162.88-109.568s129.152-40.512 200.064-40.512c78.528 0 151.296 16.192 218.368 48.512s124.224 76.288 171.456 131.84c17.536-12.928 32.192-24.192 44.032-33.664 11.84-9.536 19.264-15.424 22.272-17.728 4.608-3.776 9.536-6.656 14.848-8.576s10.304-1.92 14.848 0c4.544 1.92 8.576 5.888 12.032 11.968s5.888 15.232 7.424 27.392c0.768 6.848 1.536 18.432 2.304 34.816s1.536 35.392 2.304 57.088c0.768 21.696 1.152 44.16 1.152 67.328 0 23.232-0.384 45.12-1.152 65.664-0.768 25.856-6.848 44.544-18.304 55.936-6.144 6.144-15.296 9.6-27.456 10.368-12.224 0.768-25.152-0.384-38.848-3.456-20.608-4.544-43.264-9.472-68.032-14.848-24.768-5.312-48.384-10.816-70.848-16.576-22.464-5.696-42.304-11.072-59.456-16-17.152-4.864-28.032-8.512-32.64-10.752l0 0 0 0z"
    />
</symbol>
`,$c=`<symbol
    id="icon-jupyter-client-kernel-autorestarting"
    viewBox="0 0 1024 1024"
>
    <path
        d="M150.613333 640H61.44A461.653333 461.653333 0 0 1 42.666667 512 469.333333 469.333333 0 0 1 512 42.666667a463.786667 463.786667 0 0 1 298.666667 107.52V42.666667h85.333333v256h-256V213.333333h111.36A384 384 0 0 0 128 512a378.453333 378.453333 0 0 0 22.613333 128z m810.666667-256h-89.6A384 384 0 0 1 270.506667 810.666667H384v-85.333334H128v256h85.333333v-107.946666A469.333333 469.333333 0 0 0 981.333333 512a462.08 462.08 0 0 0-17.92-128h-2.133333z m-376.746667 208.213333h-150.613333L401.92 682.666667H330.666667l148.906666-384h61.44l149.333334 384H618.666667l-34.133334-90.453334z m-133.546666-53.333333h116.48L512 380.16l-61.013333 158.72z"
    />
</symbol>
`,Gc=`<symbol
    id="icon-jupyter-client-kernel-dead"
    viewBox="0 0 1024 1024"
>
    <path
        d="M512 960c-60.416 0-119.296-11.776-174.592-35.328-53.248-22.528-101.376-54.784-142.336-95.744s-73.216-89.088-95.744-142.336c-23.552-55.296-35.328-114.176-35.328-174.592s11.776-119.296 35.328-174.592c22.528-53.248 54.784-101.376 95.744-142.336s89.088-73.216 142.336-95.744c55.296-23.552 114.176-35.328 174.592-35.328s119.296 11.776 174.592 35.328c53.248 22.528 101.376 54.784 142.336 95.744s73.216 89.088 95.744 142.336c23.552 55.296 35.328 114.176 35.328 174.592s-11.776 119.296-35.328 174.592c-22.528 53.248-54.784 101.376-95.744 142.336s-89.088 73.216-142.336 95.744c-55.296 23.552-114.176 35.328-174.592 35.328z m0-809.472c-96.256 0-187.392 37.376-255.488 105.984-68.096 68.096-105.984 158.72-105.984 255.488s37.376 187.392 105.984 255.488 158.72 105.984 255.488 105.984 187.392-37.376 255.488-105.984 105.984-158.72 105.984-255.488-37.376-187.392-105.984-255.488-159.232-105.984-255.488-105.984zM242.688 824.832c-11.264 0-22.016-4.096-30.72-12.8-16.896-16.896-16.896-44.544 0-61.44L729.6 232.96c16.896-16.896 44.544-16.896 61.44 0 16.896 16.896 16.896 44.544 0 61.44L273.408 812.032c-8.704 8.704-19.968 12.8-30.72 12.8z"
    />
</symbol>
`,Jc=`<symbol
    id="icon-jupyter-client-session"
    viewBox="0 0 1024 1024"
>
    <path
        d="M213.33 532.33v-320h405.33V383H704V169.67c0-23.57-19.1-42.67-42.67-42.67H170.67c-11.32 0-22.17 4.5-30.17 12.5S128 158.35 128 169.67v448h170v-85.34h-84.67z m85.34 321V426.67c0-11.32 4.5-22.17 12.5-30.17s18.85-12.5 30.17-12.5h511.99c11.32 0 22.17 4.5 30.17 12.5s12.5 18.85 12.5 30.17V896H341.34c-11.32 0-22.17-4.5-30.17-12.5s-12.5-18.85-12.5-30.17z m512-384H384v341.33h426.67V469.33z m-384 213.33v-85.33H512v85.33h-85.33zM640 597.33v85.33h-85.33v-85.33H640z m42.67 85.33v-85.33H768v85.33h-85.33z"
    ></path>
</symbol>
`,Xc=`<symbol
    id="icon-jupyter-client-session-console"
    viewBox="0 0 200 200"
>
    <g fill="#0288D1">
        <path
            d="M20 19.8h160v159.9H20z"
        />
    </g>
    <g fill="#fff">
        <path
            d="M105 127.3h40v12.8h-40zM51.1 77L74 99.9l-23.3 23.3 10.5 10.5 23.3-23.3L95 99.9 84.5 89.4 61.6 66.5z"
        />
    </g>
</symbol>
`,Qc=`<symbol
    id="icon-jupyter-client-session-notebook"
    viewBox="0 0 22 22"
>
    <g fill="#EF6C00">
        <path
            d="M18.7 3.3v15.4H3.3V3.3h15.4m1.5-1.5H1.8v18.3h18.3l.1-18.3z"
        />
        <path
            d="M16.5 16.5l-5.4-4.3-5.6 4.3v-11h11z"
        />
    </g>
</symbol>
`;var eh=Object.defineProperty,th=(e,t,i)=>t in e?eh(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i,zt=(e,t,i)=>(th(e,typeof t!="symbol"?t+"":t,i),i);const ih=/"(?:_|\\u0{2}5[Ff]){2}(?:p|\\u0{2}70)(?:r|\\u0{2}72)(?:o|\\u0{2}6[Ff])(?:t|\\u0{2}74)(?:o|\\u0{2}6[Ff])(?:_|\\u0{2}5[Ff]){2}"\s*:/,sh=/"(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)"\s*:/,rh=/^\s*["[{]|^\s*-?\d[\d.]{0,14}\s*$/;function nh(e,t){if(e==="__proto__"||e==="constructor"&&t&&typeof t=="object"&&"prototype"in t){oh(e);return}return t}function oh(e){console.warn(`[destr] Dropping "${e}" key to prevent prototype pollution.`)}function ah(e,t={}){if(typeof e!="string")return e;const i=e.trim();if(e[0]==='"'&&e[e.length-1]==='"')return i.slice(1,-1);if(i.length<=9){const s=i.toLowerCase();if(s==="true")return!0;if(s==="false")return!1;if(s==="undefined")return;if(s==="null")return null;if(s==="nan")return Number.NaN;if(s==="infinity")return Number.POSITIVE_INFINITY;if(s==="-infinity")return Number.NEGATIVE_INFINITY}if(!rh.test(e)){if(t.strict)throw new SyntaxError("[destr] Invalid JSON");return e}try{if(ih.test(e)||sh.test(e)){if(t.strict)throw new Error("[destr] Possible prototype pollution");return JSON.parse(e,nh)}return JSON.parse(e)}catch(s){if(t.strict)throw s;return e}}const lh=/#/g,ch=/&/g,hh=/=/g,hn=/\+/g,uh=/%5e/gi,fh=/%60/gi,dh=/%7c/gi,_h=/%20/gi;function ph(e){return encodeURI(""+e).replace(dh,"|")}function Yr(e){return ph(typeof e=="string"?e:JSON.stringify(e)).replace(hn,"%2B").replace(_h,"+").replace(lh,"%23").replace(ch,"%26").replace(fh,"`").replace(uh,"^")}function yr(e){return Yr(e).replace(hh,"%3D")}function wa(e=""){try{return decodeURIComponent(""+e)}catch{return""+e}}function gh(e){return wa(e.replace(hn," "))}function mh(e){return wa(e.replace(hn," "))}function vh(e=""){const t={};e[0]==="?"&&(e=e.slice(1));for(const i of e.split("&")){const s=i.match(/([^=]+)=?(.*)/)||[];if(s.length<2)continue;const r=gh(s[1]);if(r==="__proto__"||r==="constructor")continue;const n=mh(s[2]||"");t[r]===void 0?t[r]=n:Array.isArray(t[r])?t[r].push(n):t[r]=[t[r],n]}return t}function bh(e,t){return(typeof t=="number"||typeof t=="boolean")&&(t=String(t)),t?Array.isArray(t)?t.map(i=>`${yr(e)}=${Yr(i)}`).join("&"):`${yr(e)}=${Yr(t)}`:yr(e)}function yh(e){return Object.keys(e).filter(t=>e[t]!==void 0).map(t=>bh(t,e[t])).filter(Boolean).join("&")}const Ch=/^[\s\w\0+.-]{2,}:([/\\]{1,2})/,Sh=/^[\s\w\0+.-]{2,}:([/\\]{2})?/,wh=/^([/\\]\s*){2,}[^/\\]/;function ka(e,t={}){return typeof t=="boolean"&&(t={acceptRelative:t}),t.strict?Ch.test(e):Sh.test(e)||(t.acceptRelative?wh.test(e):!1)}const kh=/\/$|\/\?/;function zr(e="",t=!1){return t?kh.test(e):e.endsWith("/")}function Lh(e="",t=!1){if(!t)return(zr(e)?e.slice(0,-1):e)||"/";if(!zr(e,!0))return e||"/";const[i,...s]=e.split("?");return(i.slice(0,-1)||"/")+(s.length>0?`?${s.join("?")}`:"")}function Eh(e="",t=!1){if(!t)return e.endsWith("/")?e:e+"/";if(zr(e,!0))return e||"/";const[i,...s]=e.split("?");return i+"/"+(s.length>0?`?${s.join("?")}`:"")}function Dh(e,t){if(Th(t)||ka(e))return e;const i=Lh(t);return e.startsWith(i)?e:Oh(i,e)}function Mh(e,t){const i=La(e),s={...vh(i.search),...t};return i.search=yh(s),Bh(i)}function Th(e){return!e||e==="/"}function Ah(e){return e&&e!=="/"}const Rh=/^\.?\//;function Oh(e,...t){let i=e||"";for(const s of t.filter(r=>Ah(r)))if(i){const r=s.replace(Rh,"");i=Eh(i)+r}else i=s;return i}function La(e="",t){const i=e.match(/^[\s\0]*(blob:|data:|javascript:|vbscript:)(.*)/);if(i){const[,u,g=""]=i;return{protocol:u,pathname:g,href:u+g,auth:"",host:"",search:"",hash:""}}if(!ka(e,{acceptRelative:!0}))return t?La(t+e):jn(e);const[,s="",r,n=""]=e.replace(/\\/g,"/").match(/^[\s\0]*([\w+.-]{2,}:)?\/\/([^/@]+@)?(.*)/)||[],[,l="",o=""]=n.match(/([^#/?]*)(.*)?/)||[],{pathname:a,search:h,hash:d}=jn(o.replace(/\/(?=[A-Za-z]:)/,""));return{protocol:s,auth:r?r.slice(0,Math.max(0,r.length-1)):"",host:l,pathname:a,search:h,hash:d}}function jn(e=""){const[t="",i="",s=""]=(e.match(/([^#?]*)(\?[^#]*)?(#.*)?/)||[]).splice(1);return{pathname:t,search:i,hash:s}}function Bh(e){const t=e.pathname||"",i=e.search?(e.search.startsWith("?")?"":"?")+e.search:"",s=e.hash||"",r=e.auth?e.auth+"@":"",n=e.host||"";return(e.protocol?e.protocol+"//":"")+r+n+t+i+s}class Hh extends Error{constructor(t,i){super(t,i),this.name="FetchError",i!=null&&i.cause&&!this.cause&&(this.cause=i.cause)}}function xh(e){var t,i,s,r,n;const l=((t=e.error)==null?void 0:t.message)||((i=e.error)==null?void 0:i.toString())||"",o=((s=e.request)==null?void 0:s.method)||((r=e.options)==null?void 0:r.method)||"GET",a=((n=e.request)==null?void 0:n.url)||String(e.request)||"/",h=`[${o}] ${JSON.stringify(a)}`,d=e.response?`${e.response.status} ${e.response.statusText}`:"<no response>",u=`${h}: ${d}${l?` ${l}`:""}`,g=new Hh(u,e.error?{cause:e.error}:void 0);for(const b of["request","options","response"])Object.defineProperty(g,b,{get(){return e[b]}});for(const[b,y]of[["data","_data"],["status","status"],["statusCode","status"],["statusText","statusText"],["statusMessage","statusText"]])Object.defineProperty(g,b,{get(){return e.response&&e.response[y]}});return g}const Ph=new Set(Object.freeze(["PATCH","POST","PUT","DELETE"]));function Fn(e="GET"){return Ph.has(e.toUpperCase())}function Ih(e){if(e===void 0)return!1;const t=typeof e;return t==="string"||t==="number"||t==="boolean"||t===null?!0:t!=="object"?!1:Array.isArray(e)?!0:e.buffer?!1:e.constructor&&e.constructor.name==="Object"||typeof e.toJSON=="function"}const Nh=new Set(["image/svg","application/xml","application/xhtml","application/html"]),Vh=/^application\/(?:[\w!#$%&*.^`~-]*\+)?json(;.+)?$/i;function jh(e=""){if(!e)return"json";const t=e.split(";").shift()||"";return Vh.test(t)?"json":Nh.has(t)||t.startsWith("text/")?"text":"blob"}function Fh(e,t,i=globalThis.Headers){const s={...t,...e};if(t!=null&&t.params&&e!=null&&e.params&&(s.params={...t==null?void 0:t.params,...e==null?void 0:e.params}),t!=null&&t.query&&e!=null&&e.query&&(s.query={...t==null?void 0:t.query,...e==null?void 0:e.query}),t!=null&&t.headers&&e!=null&&e.headers){s.headers=new i((t==null?void 0:t.headers)||{});for(const[r,n]of new i((e==null?void 0:e.headers)||{}))s.headers.set(r,n)}return s}const Uh=new Set([408,409,425,429,500,502,503,504]),Wh=new Set([101,204,205,304]);function Ea(e={}){const{fetch:t=globalThis.fetch,Headers:i=globalThis.Headers,AbortController:s=globalThis.AbortController}=e;async function r(o){const a=o.error&&o.error.name==="AbortError"&&!o.options.timeout||!1;if(o.options.retry!==!1&&!a){let d;typeof o.options.retry=="number"?d=o.options.retry:d=Fn(o.options.method)?0:1;const u=o.response&&o.response.status||500;if(d>0&&(Array.isArray(o.options.retryStatusCodes)?o.options.retryStatusCodes.includes(u):Uh.has(u))){const g=o.options.retryDelay||0;return g>0&&await new Promise(b=>setTimeout(b,g)),n(o.request,{...o.options,retry:d-1,timeout:o.options.timeout})}}const h=xh(o);throw Error.captureStackTrace&&Error.captureStackTrace(h,n),h}const n=async function(o,a={}){var h;const d={request:o,options:Fh(a,e.defaults,i),response:void 0,error:void 0};if(d.options.method=(h=d.options.method)==null?void 0:h.toUpperCase(),d.options.onRequest&&await d.options.onRequest(d),typeof d.request=="string"&&(d.options.baseURL&&(d.request=Dh(d.request,d.options.baseURL)),(d.options.query||d.options.params)&&(d.request=Mh(d.request,{...d.options.params,...d.options.query}))),d.options.body&&Fn(d.options.method)&&(Ih(d.options.body)?(d.options.body=typeof d.options.body=="string"?d.options.body:JSON.stringify(d.options.body),d.options.headers=new i(d.options.headers||{}),d.options.headers.has("content-type")||d.options.headers.set("content-type","application/json"),d.options.headers.has("accept")||d.options.headers.set("accept","application/json")):("pipeTo"in d.options.body&&typeof d.options.body.pipeTo=="function"||typeof d.options.body.pipe=="function")&&("duplex"in d.options||(d.options.duplex="half"))),!d.options.signal&&d.options.timeout){const u=new s;setTimeout(()=>u.abort(),d.options.timeout),d.options.signal=u.signal}try{d.response=await t(d.request,d.options)}catch(u){return d.error=u,d.options.onRequestError&&await d.options.onRequestError(d),await r(d)}if(d.response.body&&!Wh.has(d.response.status)&&d.options.method!=="HEAD"){const u=(d.options.parseResponse?"json":d.options.responseType)||jh(d.response.headers.get("content-type")||"");switch(u){case"json":{const g=await d.response.text(),b=d.options.parseResponse||ah;d.response._data=b(g);break}case"stream":{d.response._data=d.response.body;break}default:d.response._data=await d.response[u]()}}return d.options.onResponse&&await d.options.onResponse(d),!d.options.ignoreResponseError&&d.response.status>=400&&d.response.status<600?(d.options.onResponseError&&await d.options.onResponseError(d),await r(d)):d.response},l=async function(o,a){return(await n(o,a))._data};return l.raw=n,l.native=(...o)=>t(...o),l.create=(o={})=>Ea({...e,defaults:{...e.defaults,...o}}),l}const un=function(){if(typeof globalThis<"u")return globalThis;if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")}(),Yh=un.fetch||(()=>Promise.reject(new Error("[ofetch] global.fetch is not supported!"))),zh=un.Headers,qh=un.AbortController,Zh=Ea({fetch:Yh,Headers:zh,AbortController:qh});class Kh extends Error{constructor(t){super(t.statusText),zt(this,"status"),this.response=t,this.status=t.status}}class Un extends Error{constructor(t,i){super(t.msg),zt(this,"code"),this.body=t,this.response=i,this.code=t.code}}function Bt(e){if(typeof e!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(e))}function Wn(e,t){for(var i="",s=0,r=-1,n=0,l,o=0;o<=e.length;++o){if(o<e.length)l=e.charCodeAt(o);else{if(l===47)break;l=47}if(l===47){if(!(r===o-1||n===1))if(r!==o-1&&n===2){if(i.length<2||s!==2||i.charCodeAt(i.length-1)!==46||i.charCodeAt(i.length-2)!==46){if(i.length>2){var a=i.lastIndexOf("/");if(a!==i.length-1){a===-1?(i="",s=0):(i=i.slice(0,a),s=i.length-1-i.lastIndexOf("/")),r=o,n=0;continue}}else if(i.length===2||i.length===1){i="",s=0,r=o,n=0;continue}}t&&(i.length>0?i+="/..":i="..",s=2)}else i.length>0?i+="/"+e.slice(r+1,o):i=e.slice(r+1,o),s=o-r-1;r=o,n=0}else l===46&&n!==-1?++n:n=-1}return i}function $h(e,t){var i=t.dir||t.root,s=t.base||(t.name||"")+(t.ext||"");return i?i===t.root?i+s:i+e+s:s}var es={resolve:function(){for(var e="",t=!1,i,s=arguments.length-1;s>=-1&&!t;s--){var r;s>=0?r=arguments[s]:(i===void 0&&(i=process.cwd()),r=i),Bt(r),r.length!==0&&(e=r+"/"+e,t=r.charCodeAt(0)===47)}return e=Wn(e,!t),t?e.length>0?"/"+e:"/":e.length>0?e:"."},normalize:function(e){if(Bt(e),e.length===0)return".";var t=e.charCodeAt(0)===47,i=e.charCodeAt(e.length-1)===47;return e=Wn(e,!t),e.length===0&&!t&&(e="."),e.length>0&&i&&(e+="/"),t?"/"+e:e},isAbsolute:function(e){return Bt(e),e.length>0&&e.charCodeAt(0)===47},join:function(){if(arguments.length===0)return".";for(var e,t=0;t<arguments.length;++t){var i=arguments[t];Bt(i),i.length>0&&(e===void 0?e=i:e+="/"+i)}return e===void 0?".":es.normalize(e)},relative:function(e,t){if(Bt(e),Bt(t),e===t||(e=es.resolve(e),t=es.resolve(t),e===t))return"";for(var i=1;i<e.length&&e.charCodeAt(i)===47;++i);for(var s=e.length,r=s-i,n=1;n<t.length&&t.charCodeAt(n)===47;++n);for(var l=t.length,o=l-n,a=r<o?r:o,h=-1,d=0;d<=a;++d){if(d===a){if(o>a){if(t.charCodeAt(n+d)===47)return t.slice(n+d+1);if(d===0)return t.slice(n+d)}else r>a&&(e.charCodeAt(i+d)===47?h=d:d===0&&(h=0));break}var u=e.charCodeAt(i+d),g=t.charCodeAt(n+d);if(u!==g)break;u===47&&(h=d)}var b="";for(d=i+h+1;d<=s;++d)(d===s||e.charCodeAt(d)===47)&&(b.length===0?b+="..":b+="/..");return b.length>0?b+t.slice(n+h):(n+=h,t.charCodeAt(n)===47&&++n,t.slice(n))},_makeLong:function(e){return e},dirname:function(e){if(Bt(e),e.length===0)return".";for(var t=e.charCodeAt(0),i=t===47,s=-1,r=!0,n=e.length-1;n>=1;--n)if(t=e.charCodeAt(n),t===47){if(!r){s=n;break}}else r=!1;return s===-1?i?"/":".":i&&s===1?"//":e.slice(0,s)},basename:function(e,t){if(t!==void 0&&typeof t!="string")throw new TypeError('"ext" argument must be a string');Bt(e);var i=0,s=-1,r=!0,n;if(t!==void 0&&t.length>0&&t.length<=e.length){if(t.length===e.length&&t===e)return"";var l=t.length-1,o=-1;for(n=e.length-1;n>=0;--n){var a=e.charCodeAt(n);if(a===47){if(!r){i=n+1;break}}else o===-1&&(r=!1,o=n+1),l>=0&&(a===t.charCodeAt(l)?--l===-1&&(s=n):(l=-1,s=o))}return i===s?s=o:s===-1&&(s=e.length),e.slice(i,s)}else{for(n=e.length-1;n>=0;--n)if(e.charCodeAt(n)===47){if(!r){i=n+1;break}}else s===-1&&(r=!1,s=n+1);return s===-1?"":e.slice(i,s)}},extname:function(e){Bt(e);for(var t=-1,i=0,s=-1,r=!0,n=0,l=e.length-1;l>=0;--l){var o=e.charCodeAt(l);if(o===47){if(!r){i=l+1;break}continue}s===-1&&(r=!1,s=l+1),o===46?t===-1?t=l:n!==1&&(n=1):t!==-1&&(n=-1)}return t===-1||s===-1||n===0||n===1&&t===s-1&&t===i+1?"":e.slice(t,s)},format:function(e){if(e===null||typeof e!="object")throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof e);return $h("/",e)},parse:function(e){Bt(e);var t={root:"",dir:"",base:"",ext:"",name:""};if(e.length===0)return t;var i=e.charCodeAt(0),s=i===47,r;s?(t.root="/",r=1):r=0;for(var n=-1,l=0,o=-1,a=!0,h=e.length-1,d=0;h>=r;--h){if(i=e.charCodeAt(h),i===47){if(!a){l=h+1;break}continue}o===-1&&(a=!1,o=h+1),i===46?n===-1?n=h:d!==1&&(d=1):n!==-1&&(d=-1)}return n===-1||o===-1||d===0||d===1&&n===o-1&&n===l+1?o!==-1&&(l===0&&s?t.base=t.name=e.slice(1,o):t.base=t.name=e.slice(l,o)):(l===0&&s?(t.name=e.slice(1,n),t.base=e.slice(1,o)):(t.name=e.slice(l,n),t.base=e.slice(l,o)),t.ext=e.slice(n,o)),l>0?t.dir=e.slice(0,l-1):s&&(t.dir="/"),t},sep:"/",delimiter:":",win32:null,posix:null};es.posix=es;function Da(e,t){return function(){return e.apply(t,arguments)}}const{toString:Gh}=Object.prototype,{getPrototypeOf:fn}=Object,Gs=(e=>t=>{const i=Gh.call(t);return e[i]||(e[i]=i.slice(8,-1).toLowerCase())})(Object.create(null)),Vt=e=>(e=e.toLowerCase(),t=>Gs(t)===e),Js=e=>t=>typeof t===e,{isArray:Ii}=Array,ns=Js("undefined");function Jh(e){return e!==null&&!ns(e)&&e.constructor!==null&&!ns(e.constructor)&&wt(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const Ma=Vt("ArrayBuffer");function Xh(e){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&Ma(e.buffer),t}const Qh=Js("string"),wt=Js("function"),Ta=Js("number"),Xs=e=>e!==null&&typeof e=="object",eu=e=>e===!0||e===!1,Ms=e=>{if(Gs(e)!=="object")return!1;const t=fn(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},tu=Vt("Date"),iu=Vt("File"),su=Vt("Blob"),ru=Vt("FileList"),nu=e=>Xs(e)&&wt(e.pipe),ou=e=>{let t;return e&&(typeof FormData=="function"&&e instanceof FormData||wt(e.append)&&((t=Gs(e))==="formdata"||t==="object"&&wt(e.toString)&&e.toString()==="[object FormData]"))},au=Vt("URLSearchParams"),lu=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function us(e,t,{allOwnKeys:i=!1}={}){if(e===null||typeof e>"u")return;let s,r;if(typeof e!="object"&&(e=[e]),Ii(e))for(s=0,r=e.length;s<r;s++)t.call(null,e[s],s,e);else{const n=i?Object.getOwnPropertyNames(e):Object.keys(e),l=n.length;let o;for(s=0;s<l;s++)o=n[s],t.call(null,e[o],o,e)}}function Aa(e,t){t=t.toLowerCase();const i=Object.keys(e);let s=i.length,r;for(;s-- >0;)if(r=i[s],t===r.toLowerCase())return r;return null}const Ra=(()=>typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global)(),Oa=e=>!ns(e)&&e!==Ra;function qr(){const{caseless:e}=Oa(this)&&this||{},t={},i=(s,r)=>{const n=e&&Aa(t,r)||r;Ms(t[n])&&Ms(s)?t[n]=qr(t[n],s):Ms(s)?t[n]=qr({},s):Ii(s)?t[n]=s.slice():t[n]=s};for(let s=0,r=arguments.length;s<r;s++)arguments[s]&&us(arguments[s],i);return t}const cu=(e,t,i,{allOwnKeys:s}={})=>(us(t,(r,n)=>{i&&wt(r)?e[n]=Da(r,i):e[n]=r},{allOwnKeys:s}),e),hu=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),uu=(e,t,i,s)=>{e.prototype=Object.create(t.prototype,s),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),i&&Object.assign(e.prototype,i)},fu=(e,t,i,s)=>{let r,n,l;const o={};if(t=t||{},e==null)return t;do{for(r=Object.getOwnPropertyNames(e),n=r.length;n-- >0;)l=r[n],(!s||s(l,e,t))&&!o[l]&&(t[l]=e[l],o[l]=!0);e=i!==!1&&fn(e)}while(e&&(!i||i(e,t))&&e!==Object.prototype);return t},du=(e,t,i)=>{e=String(e),(i===void 0||i>e.length)&&(i=e.length),i-=t.length;const s=e.indexOf(t,i);return s!==-1&&s===i},_u=e=>{if(!e)return null;if(Ii(e))return e;let t=e.length;if(!Ta(t))return null;const i=new Array(t);for(;t-- >0;)i[t]=e[t];return i},pu=(e=>t=>e&&t instanceof e)(typeof Uint8Array<"u"&&fn(Uint8Array)),gu=(e,t)=>{const i=(e&&e[Symbol.iterator]).call(e);let s;for(;(s=i.next())&&!s.done;){const r=s.value;t.call(e,r[0],r[1])}},mu=(e,t)=>{let i;const s=[];for(;(i=e.exec(t))!==null;)s.push(i);return s},vu=Vt("HTMLFormElement"),bu=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(t,i,s){return i.toUpperCase()+s}),Yn=(({hasOwnProperty:e})=>(t,i)=>e.call(t,i))(Object.prototype),yu=Vt("RegExp"),Ba=(e,t)=>{const i=Object.getOwnPropertyDescriptors(e),s={};us(i,(r,n)=>{let l;(l=t(r,n,e))!==!1&&(s[n]=l||r)}),Object.defineProperties(e,s)},Cu=e=>{Ba(e,(t,i)=>{if(wt(e)&&["arguments","caller","callee"].indexOf(i)!==-1)return!1;const s=e[i];if(wt(s)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+i+"'")})}})},Su=(e,t)=>{const i={},s=r=>{r.forEach(n=>{i[n]=!0})};return Ii(e)?s(e):s(String(e).split(t)),i},wu=()=>{},ku=(e,t)=>(e=+e,Number.isFinite(e)?e:t),Cr="abcdefghijklmnopqrstuvwxyz",zn="0123456789",Ha={DIGIT:zn,ALPHA:Cr,ALPHA_DIGIT:Cr+Cr.toUpperCase()+zn},Lu=(e=16,t=Ha.ALPHA_DIGIT)=>{let i="";const{length:s}=t;for(;e--;)i+=t[Math.random()*s|0];return i};function Eu(e){return!!(e&&wt(e.append)&&e[Symbol.toStringTag]==="FormData"&&e[Symbol.iterator])}const Du=e=>{const t=new Array(10),i=(s,r)=>{if(Xs(s)){if(t.indexOf(s)>=0)return;if(!("toJSON"in s)){t[r]=s;const n=Ii(s)?[]:{};return us(s,(l,o)=>{const a=i(l,r+1);!ns(a)&&(n[o]=a)}),t[r]=void 0,n}}return s};return i(e,0)},Mu=Vt("AsyncFunction"),Tu=e=>e&&(Xs(e)||wt(e))&&wt(e.then)&&wt(e.catch),$={isArray:Ii,isArrayBuffer:Ma,isBuffer:Jh,isFormData:ou,isArrayBufferView:Xh,isString:Qh,isNumber:Ta,isBoolean:eu,isObject:Xs,isPlainObject:Ms,isUndefined:ns,isDate:tu,isFile:iu,isBlob:su,isRegExp:yu,isFunction:wt,isStream:nu,isURLSearchParams:au,isTypedArray:pu,isFileList:ru,forEach:us,merge:qr,extend:cu,trim:lu,stripBOM:hu,inherits:uu,toFlatObject:fu,kindOf:Gs,kindOfTest:Vt,endsWith:du,toArray:_u,forEachEntry:gu,matchAll:mu,isHTMLForm:vu,hasOwnProperty:Yn,hasOwnProp:Yn,reduceDescriptors:Ba,freezeMethods:Cu,toObjectSet:Su,toCamelCase:bu,noop:wu,toFiniteNumber:ku,findKey:Aa,global:Ra,isContextDefined:Oa,ALPHABET:Ha,generateString:Lu,isSpecCompliantForm:Eu,toJSONObject:Du,isAsyncFn:Mu,isThenable:Tu};function Le(e,t,i,s,r){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=e,this.name="AxiosError",t&&(this.code=t),i&&(this.config=i),s&&(this.request=s),r&&(this.response=r)}$.inherits(Le,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:$.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});const xa=Le.prototype,Pa={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{Pa[e]={value:e}});Object.defineProperties(Le,Pa);Object.defineProperty(xa,"isAxiosError",{value:!0});Le.from=(e,t,i,s,r,n)=>{const l=Object.create(xa);return $.toFlatObject(e,l,function(o){return o!==Error.prototype},o=>o!=="isAxiosError"),Le.call(l,e.message,t,i,s,r),l.cause=e,l.name=e.name,n&&Object.assign(l,n),l};const Au=null;function Zr(e){return $.isPlainObject(e)||$.isArray(e)}function Ia(e){return $.endsWith(e,"[]")?e.slice(0,-2):e}function qn(e,t,i){return e?e.concat(t).map(function(s,r){return s=Ia(s),!i&&r?"["+s+"]":s}).join(i?".":""):t}function Ru(e){return $.isArray(e)&&!e.some(Zr)}const Ou=$.toFlatObject($,{},null,function(e){return/^is[A-Z]/.test(e)});function Qs(e,t,i){if(!$.isObject(e))throw new TypeError("target must be an object");t=t||new FormData,i=$.toFlatObject(i,{metaTokens:!0,dots:!1,indexes:!1},!1,function(b,y){return!$.isUndefined(y[b])});const s=i.metaTokens,r=i.visitor||h,n=i.dots,l=i.indexes,o=(i.Blob||typeof Blob<"u"&&Blob)&&$.isSpecCompliantForm(t);if(!$.isFunction(r))throw new TypeError("visitor must be a function");function a(b){if(b===null)return"";if($.isDate(b))return b.toISOString();if(!o&&$.isBlob(b))throw new Le("Blob is not supported. Use a Buffer instead.");return $.isArrayBuffer(b)||$.isTypedArray(b)?o&&typeof Blob=="function"?new Blob([b]):Buffer.from(b):b}function h(b,y,m){let c=b;if(b&&!m&&typeof b=="object"){if($.endsWith(y,"{}"))y=s?y:y.slice(0,-2),b=JSON.stringify(b);else if($.isArray(b)&&Ru(b)||($.isFileList(b)||$.endsWith(y,"[]"))&&(c=$.toArray(b)))return y=Ia(y),c.forEach(function(f,_){!($.isUndefined(f)||f===null)&&t.append(l===!0?qn([y],_,n):l===null?y:y+"[]",a(f))}),!1}return Zr(b)?!0:(t.append(qn(m,y,n),a(b)),!1)}const d=[],u=Object.assign(Ou,{defaultVisitor:h,convertValue:a,isVisitable:Zr});function g(b,y){if(!$.isUndefined(b)){if(d.indexOf(b)!==-1)throw Error("Circular reference detected in "+y.join("."));d.push(b),$.forEach(b,function(m,c){(!($.isUndefined(m)||m===null)&&r.call(t,m,$.isString(c)?c.trim():c,y,u))===!0&&g(m,y?y.concat(c):[c])}),d.pop()}}if(!$.isObject(e))throw new TypeError("data must be an object");return g(e),t}function Zn(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(i){return t[i]})}function dn(e,t){this._pairs=[],e&&Qs(e,this,t)}const Na=dn.prototype;Na.append=function(e,t){this._pairs.push([e,t])};Na.toString=function(e){const t=e?function(i){return e.call(this,i,Zn)}:Zn;return this._pairs.map(function(i){return t(i[0])+"="+t(i[1])},"").join("&")};function Bu(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function Va(e,t,i){if(!t)return e;const s=i&&i.encode||Bu,r=i&&i.serialize;let n;if(r?n=r(t,i):n=$.isURLSearchParams(t)?t.toString():new dn(t,i).toString(s),n){const l=e.indexOf("#");l!==-1&&(e=e.slice(0,l)),e+=(e.indexOf("?")===-1?"?":"&")+n}return e}class Hu{constructor(){this.handlers=[]}use(t,i,s){return this.handlers.push({fulfilled:t,rejected:i,synchronous:s?s.synchronous:!1,runWhen:s?s.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){$.forEach(this.handlers,function(i){i!==null&&t(i)})}}const Kn=Hu,ja={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},xu=typeof URLSearchParams<"u"?URLSearchParams:dn,Pu=typeof FormData<"u"?FormData:null,Iu=typeof Blob<"u"?Blob:null,Nu=(()=>{let e;return typeof navigator<"u"&&((e=navigator.product)==="ReactNative"||e==="NativeScript"||e==="NS")?!1:typeof window<"u"&&typeof document<"u"})(),Vu=(()=>typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function")(),Dt={isBrowser:!0,classes:{URLSearchParams:xu,FormData:Pu,Blob:Iu},isStandardBrowserEnv:Nu,isStandardBrowserWebWorkerEnv:Vu,protocols:["http","https","file","blob","url","data"]};function ju(e,t){return Qs(e,new Dt.classes.URLSearchParams,Object.assign({visitor:function(i,s,r,n){return Dt.isNode&&$.isBuffer(i)?(this.append(s,i.toString("base64")),!1):n.defaultVisitor.apply(this,arguments)}},t))}function Fu(e){return $.matchAll(/\w+|\[(\w*)]/g,e).map(t=>t[0]==="[]"?"":t[1]||t[0])}function Uu(e){const t={},i=Object.keys(e);let s;const r=i.length;let n;for(s=0;s<r;s++)n=i[s],t[n]=e[n];return t}function Fa(e){function t(i,s,r,n){let l=i[n++];const o=Number.isFinite(+l),a=n>=i.length;return l=!l&&$.isArray(r)?r.length:l,a?($.hasOwnProp(r,l)?r[l]=[r[l],s]:r[l]=s,!o):((!r[l]||!$.isObject(r[l]))&&(r[l]=[]),t(i,s,r[l],n)&&$.isArray(r[l])&&(r[l]=Uu(r[l])),!o)}if($.isFormData(e)&&$.isFunction(e.entries)){const i={};return $.forEachEntry(e,(s,r)=>{t(Fu(s),r,i,0)}),i}return null}function Wu(e,t,i){if($.isString(e))try{return(t||JSON.parse)(e),$.trim(e)}catch(s){if(s.name!=="SyntaxError")throw s}return(i||JSON.stringify)(e)}const _n={transitional:ja,adapter:Dt.isNode?"http":"xhr",transformRequest:[function(e,t){const i=t.getContentType()||"",s=i.indexOf("application/json")>-1,r=$.isObject(e);if(r&&$.isHTMLForm(e)&&(e=new FormData(e)),$.isFormData(e))return s&&s?JSON.stringify(Fa(e)):e;if($.isArrayBuffer(e)||$.isBuffer(e)||$.isStream(e)||$.isFile(e)||$.isBlob(e))return e;if($.isArrayBufferView(e))return e.buffer;if($.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let n;if(r){if(i.indexOf("application/x-www-form-urlencoded")>-1)return ju(e,this.formSerializer).toString();if((n=$.isFileList(e))||i.indexOf("multipart/form-data")>-1){const l=this.env&&this.env.FormData;return Qs(n?{"files[]":e}:e,l&&new l,this.formSerializer)}}return r||s?(t.setContentType("application/json",!1),Wu(e)):e}],transformResponse:[function(e){const t=this.transitional||_n.transitional,i=t&&t.forcedJSONParsing,s=this.responseType==="json";if(e&&$.isString(e)&&(i&&!this.responseType||s)){const r=!(t&&t.silentJSONParsing)&&s;try{return JSON.parse(e)}catch(n){if(r)throw n.name==="SyntaxError"?Le.from(n,Le.ERR_BAD_RESPONSE,this,null,this.response):n}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Dt.classes.FormData,Blob:Dt.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};$.forEach(["delete","get","head","post","put","patch"],e=>{_n.headers[e]={}});const pn=_n,Yu=$.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),zu=e=>{const t={};let i,s,r;return e&&e.split(`
`).forEach(function(n){r=n.indexOf(":"),i=n.substring(0,r).trim().toLowerCase(),s=n.substring(r+1).trim(),!(!i||t[i]&&Yu[i])&&(i==="set-cookie"?t[i]?t[i].push(s):t[i]=[s]:t[i]=t[i]?t[i]+", "+s:s)}),t},$n=Symbol("internals");function Ki(e){return e&&String(e).trim().toLowerCase()}function Ts(e){return e===!1||e==null?e:$.isArray(e)?e.map(Ts):String(e)}function qu(e){const t=Object.create(null),i=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let s;for(;s=i.exec(e);)t[s[1]]=s[2];return t}const Zu=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function Sr(e,t,i,s,r){if($.isFunction(s))return s.call(this,t,i);if(r&&(t=i),!!$.isString(t)){if($.isString(s))return t.indexOf(s)!==-1;if($.isRegExp(s))return s.test(t)}}function Ku(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,i,s)=>i.toUpperCase()+s)}function $u(e,t){const i=$.toCamelCase(" "+t);["get","set","has"].forEach(s=>{Object.defineProperty(e,s+i,{value:function(r,n,l){return this[s].call(this,t,r,n,l)},configurable:!0})})}let er=class{constructor(e){e&&this.set(e)}set(e,t,i){const s=this;function r(l,o,a){const h=Ki(o);if(!h)throw new Error("header name must be a non-empty string");const d=$.findKey(s,h);(!d||s[d]===void 0||a===!0||a===void 0&&s[d]!==!1)&&(s[d||o]=Ts(l))}const n=(l,o)=>$.forEach(l,(a,h)=>r(a,h,o));return $.isPlainObject(e)||e instanceof this.constructor?n(e,t):$.isString(e)&&(e=e.trim())&&!Zu(e)?n(zu(e),t):e!=null&&r(t,e,i),this}get(e,t){if(e=Ki(e),e){const i=$.findKey(this,e);if(i){const s=this[i];if(!t)return s;if(t===!0)return qu(s);if($.isFunction(t))return t.call(this,s,i);if($.isRegExp(t))return t.exec(s);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,t){if(e=Ki(e),e){const i=$.findKey(this,e);return!!(i&&this[i]!==void 0&&(!t||Sr(this,this[i],i,t)))}return!1}delete(e,t){const i=this;let s=!1;function r(n){if(n=Ki(n),n){const l=$.findKey(i,n);l&&(!t||Sr(i,i[l],l,t))&&(delete i[l],s=!0)}}return $.isArray(e)?e.forEach(r):r(e),s}clear(e){const t=Object.keys(this);let i=t.length,s=!1;for(;i--;){const r=t[i];(!e||Sr(this,this[r],r,e,!0))&&(delete this[r],s=!0)}return s}normalize(e){const t=this,i={};return $.forEach(this,(s,r)=>{const n=$.findKey(i,r);if(n){t[n]=Ts(s),delete t[r];return}const l=e?Ku(r):String(r).trim();l!==r&&delete t[r],t[l]=Ts(s),i[l]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const t=Object.create(null);return $.forEach(this,(i,s)=>{i!=null&&i!==!1&&(t[s]=e&&$.isArray(i)?i.join(", "):i)}),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,t])=>e+": "+t).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...t){const i=new this(e);return t.forEach(s=>i.set(s)),i}static accessor(e){const t=(this[$n]=this[$n]={accessors:{}}).accessors,i=this.prototype;function s(r){const n=Ki(r);t[n]||($u(i,r),t[n]=!0)}return $.isArray(e)?e.forEach(s):s(e),this}};er.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);$.reduceDescriptors(er.prototype,({value:e},t)=>{let i=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(s){this[i]=s}}});$.freezeMethods(er);const Kt=er;function wr(e,t){const i=this||pn,s=t||i,r=Kt.from(s.headers);let n=s.data;return $.forEach(e,function(l){n=l.call(i,n,r.normalize(),t?t.status:void 0)}),r.normalize(),n}function Ua(e){return!!(e&&e.__CANCEL__)}function fs(e,t,i){Le.call(this,e??"canceled",Le.ERR_CANCELED,t,i),this.name="CanceledError"}$.inherits(fs,Le,{__CANCEL__:!0});function Gu(e,t,i){const s=i.config.validateStatus;!i.status||!s||s(i.status)?e(i):t(new Le("Request failed with status code "+i.status,[Le.ERR_BAD_REQUEST,Le.ERR_BAD_RESPONSE][Math.floor(i.status/100)-4],i.config,i.request,i))}const Ju=Dt.isStandardBrowserEnv?function(){return{write:function(e,t,i,s,r,n){const l=[];l.push(e+"="+encodeURIComponent(t)),$.isNumber(i)&&l.push("expires="+new Date(i).toGMTString()),$.isString(s)&&l.push("path="+s),$.isString(r)&&l.push("domain="+r),n===!0&&l.push("secure"),document.cookie=l.join("; ")},read:function(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}();function Xu(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function Qu(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}function Wa(e,t){return e&&!Xu(t)?Qu(e,t):t}const e1=Dt.isStandardBrowserEnv?function(){const e=/(msie|trident)/i.test(navigator.userAgent),t=document.createElement("a");let i;function s(r){let n=r;return e&&(t.setAttribute("href",n),n=t.href),t.setAttribute("href",n),{href:t.href,protocol:t.protocol?t.protocol.replace(/:$/,""):"",host:t.host,search:t.search?t.search.replace(/^\?/,""):"",hash:t.hash?t.hash.replace(/^#/,""):"",hostname:t.hostname,port:t.port,pathname:t.pathname.charAt(0)==="/"?t.pathname:"/"+t.pathname}}return i=s(window.location.href),function(r){const n=$.isString(r)?s(r):r;return n.protocol===i.protocol&&n.host===i.host}}():function(){return function(){return!0}}();function t1(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}function i1(e,t){e=e||10;const i=new Array(e),s=new Array(e);let r=0,n=0,l;return t=t!==void 0?t:1e3,function(o){const a=Date.now(),h=s[n];l||(l=a),i[r]=o,s[r]=a;let d=n,u=0;for(;d!==r;)u+=i[d++],d=d%e;if(r=(r+1)%e,r===n&&(n=(n+1)%e),a-l<t)return;const g=h&&a-h;return g?Math.round(u*1e3/g):void 0}}function Gn(e,t){let i=0;const s=i1(50,250);return r=>{const n=r.loaded,l=r.lengthComputable?r.total:void 0,o=n-i,a=s(o),h=n<=l;i=n;const d={loaded:n,total:l,progress:l?n/l:void 0,bytes:o,rate:a||void 0,estimated:a&&l&&h?(l-n)/a:void 0,event:r};d[t?"download":"upload"]=!0,e(d)}}const s1=typeof XMLHttpRequest<"u",r1=s1&&function(e){return new Promise(function(t,i){let s=e.data;const r=Kt.from(e.headers).normalize(),n=e.responseType;let l;function o(){e.cancelToken&&e.cancelToken.unsubscribe(l),e.signal&&e.signal.removeEventListener("abort",l)}$.isFormData(s)&&(Dt.isStandardBrowserEnv||Dt.isStandardBrowserWebWorkerEnv?r.setContentType(!1):r.setContentType("multipart/form-data;",!1));let a=new XMLHttpRequest;if(e.auth){const g=e.auth.username||"",b=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";r.set("Authorization","Basic "+btoa(g+":"+b))}const h=Wa(e.baseURL,e.url);a.open(e.method.toUpperCase(),Va(h,e.params,e.paramsSerializer),!0),a.timeout=e.timeout;function d(){if(!a)return;const g=Kt.from("getAllResponseHeaders"in a&&a.getAllResponseHeaders()),b={data:!n||n==="text"||n==="json"?a.responseText:a.response,status:a.status,statusText:a.statusText,headers:g,config:e,request:a};Gu(function(y){t(y),o()},function(y){i(y),o()},b),a=null}if("onloadend"in a?a.onloadend=d:a.onreadystatechange=function(){!a||a.readyState!==4||a.status===0&&!(a.responseURL&&a.responseURL.indexOf("file:")===0)||setTimeout(d)},a.onabort=function(){a&&(i(new Le("Request aborted",Le.ECONNABORTED,e,a)),a=null)},a.onerror=function(){i(new Le("Network Error",Le.ERR_NETWORK,e,a)),a=null},a.ontimeout=function(){let g=e.timeout?"timeout of "+e.timeout+"ms exceeded":"timeout exceeded";const b=e.transitional||ja;e.timeoutErrorMessage&&(g=e.timeoutErrorMessage),i(new Le(g,b.clarifyTimeoutError?Le.ETIMEDOUT:Le.ECONNABORTED,e,a)),a=null},Dt.isStandardBrowserEnv){const g=(e.withCredentials||e1(h))&&e.xsrfCookieName&&Ju.read(e.xsrfCookieName);g&&r.set(e.xsrfHeaderName,g)}s===void 0&&r.setContentType(null),"setRequestHeader"in a&&$.forEach(r.toJSON(),function(g,b){a.setRequestHeader(b,g)}),$.isUndefined(e.withCredentials)||(a.withCredentials=!!e.withCredentials),n&&n!=="json"&&(a.responseType=e.responseType),typeof e.onDownloadProgress=="function"&&a.addEventListener("progress",Gn(e.onDownloadProgress,!0)),typeof e.onUploadProgress=="function"&&a.upload&&a.upload.addEventListener("progress",Gn(e.onUploadProgress)),(e.cancelToken||e.signal)&&(l=g=>{a&&(i(!g||g.type?new fs(null,e,a):g),a.abort(),a=null)},e.cancelToken&&e.cancelToken.subscribe(l),e.signal&&(e.signal.aborted?l():e.signal.addEventListener("abort",l)));const u=t1(h);if(u&&Dt.protocols.indexOf(u)===-1){i(new Le("Unsupported protocol "+u+":",Le.ERR_BAD_REQUEST,e));return}a.send(s||null)})},As={http:Au,xhr:r1};$.forEach(As,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch{}Object.defineProperty(e,"adapterName",{value:t})}});const Ya={getAdapter:e=>{e=$.isArray(e)?e:[e];const{length:t}=e;let i,s;for(let r=0;r<t&&(i=e[r],!(s=$.isString(i)?As[i.toLowerCase()]:i));r++);if(!s)throw s===!1?new Le(`Adapter ${i} is not supported by the environment`,"ERR_NOT_SUPPORT"):new Error($.hasOwnProp(As,i)?`Adapter '${i}' is not available in the build`:`Unknown adapter '${i}'`);if(!$.isFunction(s))throw new TypeError("adapter is not a function");return s},adapters:As};function kr(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new fs(null,e)}function Jn(e){return kr(e),e.headers=Kt.from(e.headers),e.data=wr.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),Ya.getAdapter(e.adapter||pn.adapter)(e).then(function(t){return kr(e),t.data=wr.call(e,e.transformResponse,t),t.headers=Kt.from(t.headers),t},function(t){return Ua(t)||(kr(e),t&&t.response&&(t.response.data=wr.call(e,e.transformResponse,t.response),t.response.headers=Kt.from(t.response.headers))),Promise.reject(t)})}const Xn=e=>e instanceof Kt?e.toJSON():e;function Hi(e,t){t=t||{};const i={};function s(h,d,u){return $.isPlainObject(h)&&$.isPlainObject(d)?$.merge.call({caseless:u},h,d):$.isPlainObject(d)?$.merge({},d):$.isArray(d)?d.slice():d}function r(h,d,u){if($.isUndefined(d)){if(!$.isUndefined(h))return s(void 0,h,u)}else return s(h,d,u)}function n(h,d){if(!$.isUndefined(d))return s(void 0,d)}function l(h,d){if($.isUndefined(d)){if(!$.isUndefined(h))return s(void 0,h)}else return s(void 0,d)}function o(h,d,u){if(u in t)return s(h,d);if(u in e)return s(void 0,h)}const a={url:n,method:n,data:n,baseURL:l,transformRequest:l,transformResponse:l,paramsSerializer:l,timeout:l,timeoutMessage:l,withCredentials:l,adapter:l,responseType:l,xsrfCookieName:l,xsrfHeaderName:l,onUploadProgress:l,onDownloadProgress:l,decompress:l,maxContentLength:l,maxBodyLength:l,beforeRedirect:l,transport:l,httpAgent:l,httpsAgent:l,cancelToken:l,socketPath:l,responseEncoding:l,validateStatus:o,headers:(h,d)=>r(Xn(h),Xn(d),!0)};return $.forEach(Object.keys(Object.assign({},e,t)),function(h){const d=a[h]||r,u=d(e[h],t[h],h);$.isUndefined(u)&&d!==o||(i[h]=u)}),i}const za="1.5.0",gn={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{gn[e]=function(i){return typeof i===e||"a"+(t<1?"n ":" ")+e}});const Qn={};gn.transitional=function(e,t,i){function s(r,n){return"[Axios v"+za+"] Transitional option '"+r+"'"+n+(i?". "+i:"")}return(r,n,l)=>{if(e===!1)throw new Le(s(n," has been removed"+(t?" in "+t:"")),Le.ERR_DEPRECATED);return t&&!Qn[n]&&(Qn[n]=!0,console.warn(s(n," has been deprecated since v"+t+" and will be removed in the near future"))),e?e(r,n,l):!0}};function n1(e,t,i){if(typeof e!="object")throw new Le("options must be an object",Le.ERR_BAD_OPTION_VALUE);const s=Object.keys(e);let r=s.length;for(;r-- >0;){const n=s[r],l=t[n];if(l){const o=e[n],a=o===void 0||l(o,n,e);if(a!==!0)throw new Le("option "+n+" must be "+a,Le.ERR_BAD_OPTION_VALUE);continue}if(i!==!0)throw new Le("Unknown option "+n,Le.ERR_BAD_OPTION)}}const Kr={assertOptions:n1,validators:gn},ii=Kr.validators;let Ns=class{constructor(e){this.defaults=e,this.interceptors={request:new Kn,response:new Kn}}request(e,t){typeof e=="string"?(t=t||{},t.url=e):t=e||{},t=Hi(this.defaults,t);const{transitional:i,paramsSerializer:s,headers:r}=t;i!==void 0&&Kr.assertOptions(i,{silentJSONParsing:ii.transitional(ii.boolean),forcedJSONParsing:ii.transitional(ii.boolean),clarifyTimeoutError:ii.transitional(ii.boolean)},!1),s!=null&&($.isFunction(s)?t.paramsSerializer={serialize:s}:Kr.assertOptions(s,{encode:ii.function,serialize:ii.function},!0)),t.method=(t.method||this.defaults.method||"get").toLowerCase();let n=r&&$.merge(r.common,r[t.method]);r&&$.forEach(["delete","get","head","post","put","patch","common"],b=>{delete r[b]}),t.headers=Kt.concat(n,r);const l=[];let o=!0;this.interceptors.request.forEach(function(b){typeof b.runWhen=="function"&&b.runWhen(t)===!1||(o=o&&b.synchronous,l.unshift(b.fulfilled,b.rejected))});const a=[];this.interceptors.response.forEach(function(b){a.push(b.fulfilled,b.rejected)});let h,d=0,u;if(!o){const b=[Jn.bind(this),void 0];for(b.unshift.apply(b,l),b.push.apply(b,a),u=b.length,h=Promise.resolve(t);d<u;)h=h.then(b[d++],b[d++]);return h}u=l.length;let g=t;for(d=0;d<u;){const b=l[d++],y=l[d++];try{g=b(g)}catch(m){y.call(this,m);break}}try{h=Jn.call(this,g)}catch(b){return Promise.reject(b)}for(d=0,u=a.length;d<u;)h=h.then(a[d++],a[d++]);return h}getUri(e){e=Hi(this.defaults,e);const t=Wa(e.baseURL,e.url);return Va(t,e.params,e.paramsSerializer)}};$.forEach(["delete","get","head","options"],function(e){Ns.prototype[e]=function(t,i){return this.request(Hi(i||{},{method:e,url:t,data:(i||{}).data}))}});$.forEach(["post","put","patch"],function(e){function t(i){return function(s,r,n){return this.request(Hi(n||{},{method:e,headers:i?{"Content-Type":"multipart/form-data"}:{},url:s,data:r}))}}Ns.prototype[e]=t(),Ns.prototype[e+"Form"]=t(!0)});const Rs=Ns;let o1=class qa{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let i;this.promise=new Promise(function(r){i=r});const s=this;this.promise.then(r=>{if(!s._listeners)return;let n=s._listeners.length;for(;n-- >0;)s._listeners[n](r);s._listeners=null}),this.promise.then=r=>{let n;const l=new Promise(o=>{s.subscribe(o),n=o}).then(r);return l.cancel=function(){s.unsubscribe(n)},l},t(function(r,n,l){s.reason||(s.reason=new fs(r,n,l),i(s.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const i=this._listeners.indexOf(t);i!==-1&&this._listeners.splice(i,1)}static source(){let t;return{token:new qa(function(i){t=i}),cancel:t}}};const a1=o1;function l1(e){return function(t){return e.apply(null,t)}}function c1(e){return $.isObject(e)&&e.isAxiosError===!0}const $r={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries($r).forEach(([e,t])=>{$r[t]=e});const h1=$r;function Za(e){const t=new Rs(e),i=Da(Rs.prototype.request,t);return $.extend(i,Rs.prototype,t,{allOwnKeys:!0}),$.extend(i,t,null,{allOwnKeys:!0}),i.create=function(s){return Za(Hi(e,s))},i}const ze=Za(pn);ze.Axios=Rs;ze.CanceledError=fs;ze.CancelToken=a1;ze.isCancel=Ua;ze.VERSION=za;ze.toFormData=Qs;ze.AxiosError=Le;ze.Cancel=ze.CanceledError;ze.all=function(e){return Promise.all(e)};ze.spread=l1;ze.isAxiosError=c1;ze.mergeConfig=Hi;ze.AxiosHeaders=Kt;ze.formToJSON=e=>Fa($.isHTMLForm(e)?new FormData(e):e);ze.getAdapter=Ya.getAdapter;ze.HttpStatusCode=h1;ze.default=ze;const Ka=ze,{Axios:s6,AxiosError:r6,CanceledError:n6,isCancel:o6,CancelToken:a6,VERSION:l6,all:c6,Cancel:h6,isAxiosError:u6,spread:f6,toFormData:d6,AxiosHeaders:_6,HttpStatusCode:bs,formToJSON:p6,getAdapter:g6,mergeConfig:m6}=Ka;var Li=null;typeof WebSocket<"u"?Li=WebSocket:typeof MozWebSocket<"u"?Li=MozWebSocket:typeof global<"u"?Li=global.WebSocket||global.MozWebSocket:typeof window<"u"?Li=window.WebSocket||window.MozWebSocket:typeof self<"u"&&(Li=self.WebSocket||self.MozWebSocket);const u1=Li,Lr={SCHEMA_DIR_RELATIVE_PATH:"./../schemas/",SCHEMA_FILENAME_PAYLOAD:"payload.schema.json",SCHEMA_FILENAME_RESPONSE:"response.schema.json",SIYUAN_DEFAULT_BASE_URL:"http://localhost:6806/",SIYUAN_DEFAULT_TOKEN:"",REQUEST_TIMEOUT:6e4};var eo,to,io,so,ro;const Gr=class U{constructor(t={},i="xhr"){zt(this,"_type","xhr"),zt(this,"_baseURL",((to=(eo=globalThis.top)==null?void 0:eo.document)==null?void 0:to.baseURI)??((so=(io=globalThis.parent)==null?void 0:io.document)==null?void 0:so.baseURI)??((ro=globalThis.location)==null?void 0:ro.origin)??Lr.SIYUAN_DEFAULT_BASE_URL),zt(this,"_token",Lr.SIYUAN_DEFAULT_TOKEN),zt(this,"_axios",Ka.create({baseURL:this._baseURL,timeout:Lr.REQUEST_TIMEOUT,headers:{Authorization:`Token ${this._token}`}})),zt(this,"_fetch",Zh.create({baseURL:this._baseURL,headers:{Authorization:`Token ${this._token}`}})),this._setClientType(i),this._updateOptions(t,i)}_setClientType(t){this._type=t}_updateOptions(t,i=this._type){switch(this._token=t.token??this._token,this._baseURL=t.baseURL??this._baseURL,i){case"fetch":const s=t;if(s.token){const r="Authorization",n=`Token ${t.token}`;Array.isArray(s.headers)?s.headers.push([r,n]):s.headers instanceof Headers?s.headers.set(r,n):typeof s.headers=="object"?s.headers[r]=n:s.headers={[r]:n},delete t.token}this._fetch=this._fetch.create(s);break;case"xhr":default:for(const[r,n]of Object.entries(t))switch(r){case"token":this._axios.defaults.headers.Authorization=`Token ${this._token}`;break;default:this._axios.defaults[r]=n;break}break}this._baseURL=t.baseURL??this._baseURL}broadcast(t,i,s){const r=(s==null?void 0:s.baseURL)??this._baseURL,n=(s==null?void 0:s.token)??this._token,l=new URLSearchParams(t);l.set("token",n);const o=new URL(r);return o.protocol=o.protocol.replace(/^http/,"ws"),o.pathname=o.pathname.endsWith("/")?`${o.pathname}${U.ws.broadcast.pathname.substring(1)}`:`${o.pathname}${U.ws.broadcast.pathname}`,o.search=l.toString(),new u1(o,i)}async getConf(t){return await this._request(U.api.system.getConf.pathname,U.api.system.getConf.method,void 0,t)}async upload(t,i){const s=new FormData;return s.append("assetsDirPath",t.assetsDirPath??"/assets/"),t.files.forEach(r=>s.append("file[]",r)),await this._request(U.api.asset.upload.pathname,U.api.asset.upload.method,s,i)}async getBlockAttrs(t,i){return await this._request(U.api.attr.getBlockAttrs.pathname,U.api.attr.getBlockAttrs.method,t,i)}async getBookmarkLabels(t){return await this._request(U.api.attr.getBookmarkLabels.pathname,U.api.attr.getBookmarkLabels.method,void 0,t)}async setBlockAttrs(t,i){return await this._request(U.api.attr.setBlockAttrs.pathname,U.api.attr.setBlockAttrs.method,t,i)}async appendBlock(t,i){return await this._request(U.api.block.appendBlock.pathname,U.api.block.appendBlock.method,t,i)}async deleteBlock(t,i){return await this._request(U.api.block.deleteBlock.pathname,U.api.block.deleteBlock.method,t,i)}async getBlockBreadcrumb(t,i){return await this._request(U.api.block.getBlockBreadcrumb.pathname,U.api.block.getBlockBreadcrumb.method,t,i)}async getBlockDOM(t,i){return await this._request(U.api.block.getBlockDOM.pathname,U.api.block.getBlockDOM.method,t,i)}async getBlockInfo(t,i){return await this._request(U.api.block.getBlockInfo.pathname,U.api.block.getBlockInfo.method,t,i)}async getBlockKramdown(t,i){return await this._request(U.api.block.getBlockKramdown.pathname,U.api.block.getBlockKramdown.method,t,i)}async getChildBlocks(t,i){return await this._request(U.api.block.getChildBlocks.pathname,U.api.block.getChildBlocks.method,t,i)}async getDocInfo(t,i){return await this._request(U.api.block.getDocInfo.pathname,U.api.block.getDocInfo.method,t,i)}async insertBlock(t,i){return await this._request(U.api.block.insertBlock.pathname,U.api.block.insertBlock.method,t,i)}async moveBlock(t,i){return await this._request(U.api.block.moveBlock.pathname,U.api.block.moveBlock.method,t,i)}async prependBlock(t,i){return await this._request(U.api.block.prependBlock.pathname,U.api.block.prependBlock.method,t,i)}async transferBlockRef(t,i){return await this._request(U.api.block.transferBlockRef.pathname,U.api.block.transferBlockRef.method,t,i)}async updateBlock(t,i){return await this._request(U.api.block.updateBlock.pathname,U.api.block.updateBlock.method,t,i)}async channels(t){return await this._request(U.api.broadcast.channels.pathname,U.api.broadcast.channels.method,void 0,t)}async getChannelInfo(t,i){return await this._request(U.api.broadcast.getChannelInfo.pathname,U.api.broadcast.getChannelInfo.method,t,i)}async postMessage(t,i){return await this._request(U.api.broadcast.postMessage.pathname,U.api.broadcast.postMessage.method,t,i)}async pandoc(t,i){return await this._request(U.api.convert.pandoc.pathname,U.api.convert.pandoc.method,t,i)}async exportResources(t,i){return await this._request(U.api.export.exportResources.pathname,U.api.export.exportResources.method,t,i)}async exportMdContent(t,i){return await this._request(U.api.export.exportMdContent.pathname,U.api.export.exportMdContent.method,t,i)}async getFile(t,i="text",s){return await this._request(U.api.file.getFile.pathname,U.api.file.getFile.method,t,s,!1,i)}async putFile(t,i){t.file!==void 0&&!(t.file instanceof File)&&(t.file=new File([t.file],t.path.split("/").pop()));const s=new FormData;for(const[r,n]of Object.entries(t))t.hasOwnProperty(r)&&(n instanceof Blob?s.append(r,n):s.append(r,String(n)));return await this._request(U.api.file.putFile.pathname,U.api.file.putFile.method,s,i)}async readDir(t,i){return await this._request(U.api.file.readDir.pathname,U.api.file.readDir.method,t,i)}async removeFile(t,i){return await this._request(U.api.file.removeFile.pathname,U.api.file.removeFile.method,t,i)}async renameFile(t,i){return await this._request(U.api.file.renameFile.pathname,U.api.file.renameFile.method,t,i)}async createDocWithMd(t,i){return await this._request(U.api.filetree.createDocWithMd.pathname,U.api.filetree.createDocWithMd.method,t,i)}async getDoc(t,i){return await this._request(U.api.filetree.getDoc.pathname,U.api.filetree.getDoc.method,t,i)}async getHPathByID(t,i){return await this._request(U.api.filetree.getHPathByID.pathname,U.api.filetree.getHPathByID.method,t,i)}async getHPathByPath(t,i){return await this._request(U.api.filetree.getHPathByPath.pathname,U.api.filetree.getHPathByPath.method,t,i)}async listDocsByPath(t,i){return await this._request(U.api.filetree.listDocsByPath.pathname,U.api.filetree.listDocsByPath.method,t,i)}async moveDocs(t,i){return await this._request(U.api.filetree.moveDocs.pathname,U.api.filetree.moveDocs.method,t,i)}async removeDoc(t,i){return await this._request(U.api.filetree.removeDoc.pathname,U.api.filetree.removeDoc.method,t,i)}async renameDoc(t,i){return await this._request(U.api.filetree.renameDoc.pathname,U.api.filetree.renameDoc.method,t,i)}async searchDocs(t,i){return await this._request(U.api.filetree.searchDocs.pathname,U.api.filetree.searchDocs.method,t,i)}async getDocHistoryContent(t,i){return await this._request(U.api.history.getDocHistoryContent.pathname,U.api.history.getDocHistoryContent.method,t,i)}async getHistoryItems(t,i){return await this._request(U.api.history.getHistoryItems.pathname,U.api.history.getHistoryItems.method,t,i)}async getShorthand(t,i){return await this._request(U.api.inbox.getShorthand.pathname,U.api.inbox.getShorthand.method,t,i)}async forwardProxy(t,i){return await this._request(U.api.network.forwardProxy.pathname,U.api.network.forwardProxy.method,t,i)}async closeNotebook(t,i){return await this._request(U.api.notebook.closeNotebook.pathname,U.api.notebook.closeNotebook.method,t,i)}async createNotebook(t,i){return await this._request(U.api.notebook.createNotebook.pathname,U.api.notebook.createNotebook.method,t,i)}async getNotebookConf(t,i){return await this._request(U.api.notebook.getNotebookConf.pathname,U.api.notebook.getNotebookConf.method,t,i)}async lsNotebooks(t){return await this._request(U.api.notebook.lsNotebooks.pathname,U.api.notebook.lsNotebooks.method,void 0,t)}async openNotebook(t,i){return await this._request(U.api.notebook.openNotebook.pathname,U.api.notebook.openNotebook.method,t,i)}async removeNotebook(t,i){return await this._request(U.api.notebook.removeNotebook.pathname,U.api.notebook.removeNotebook.method,t,i)}async renameNotebook(t,i){return await this._request(U.api.notebook.renameNotebook.pathname,U.api.notebook.renameNotebook.method,t,i)}async setNotebookConf(t,i){return await this._request(U.api.notebook.setNotebookConf.pathname,U.api.notebook.setNotebookConf.method,t,i)}async pushErrMsg(t,i){return await this._request(U.api.notification.pushErrMsg.pathname,U.api.notification.pushErrMsg.method,t,i)}async pushMsg(t,i){return await this._request(U.api.notification.pushMsg.pathname,U.api.notification.pushMsg.method,t,i)}async sql(t,i){return await this._request(U.api.query.sql.pathname,U.api.query.sql.method,t,i)}async openRepoSnapshotDoc(t,i){return await this._request(U.api.repo.openRepoSnapshotDoc.pathname,U.api.repo.openRepoSnapshotDoc.method,t,i)}async fullTextSearchBlock(t,i){return await this._request(U.api.search.fullTextSearchBlock.pathname,U.api.search.fullTextSearchBlock.method,t,i)}async getSnippet(t,i){return await this._request(U.api.snippet.getSnippet.pathname,U.api.snippet.getSnippet.method,t,i)}async setSnippet(t,i){return await this._request(U.api.snippet.setSnippet.pathname,U.api.snippet.setSnippet.method,t,i)}async getRecentDocs(t){return await this._request(U.api.storage.getRecentDocs.pathname,U.api.storage.getRecentDocs.method,void 0,t)}async bootProgress(t){return await this._request(U.api.system.bootProgress.pathname,U.api.system.bootProgress.method,void 0,t)}async currentTime(t){return await this._request(U.api.system.currentTime.pathname,U.api.system.currentTime.method,void 0,t)}async version(t){return await this._request(U.api.system.version.pathname,U.api.system.version.method,void 0,t)}async render(t,i){return await this._request(U.api.template.render.pathname,U.api.template.render.method,t,i)}async renderSprig(t,i){return await this._request(U.api.template.renderSprig.pathname,U.api.template.renderSprig.method,t,i)}async _request(t,i,s,r,n=!0,l="json"){try{switch((r==null?void 0:r.type)??this._type){case"fetch":{const o=r==null?void 0:r.options;l=(()=>{switch(l){case"arraybuffer":return"arrayBuffer";case"document":return"text";default:return l}})();const a=await this._fetch(t,{method:i,body:s,responseType:l,onResponse:async h=>{switch(h.response.status){case bs.Ok:break;case bs.Accepted:t===U.api.file.getFile.pathname&&this._parseFetchResponse(h.response._data);break;default:break}},...o});return n&&l==="json"&&typeof a=="object"?this._parseFetchResponse(a):a}case"xhr":default:{const o=r==null?void 0:r.options;l=(()=>{switch(l){case"arrayBuffer":return"arraybuffer";default:return l}})();const a=await this._axios.request({url:t,method:i,data:s,responseType:l,...o});switch(a.status){case bs.Ok:return n&&l==="json"&&typeof a.data=="object"?this._parseAxiosResponse(a):a.data;case bs.Accepted:return t===U.api.file.getFile.pathname?this._parseAxiosResponse(a):a.data;default:throw new Kh(a)}}}}catch(o){throw o}}_parseFetchResponse(t){if(t.code===0)return t;throw new Un(t)}_parseAxiosResponse(t){if(t.data.code===0)return t.data;throw new Un(t.data,t)}};zt(Gr,"ws",{broadcast:{pathname:"/ws/broadcast"}}),zt(Gr,"api",{asset:{upload:{pathname:"/api/asset/upload",method:"POST"}},attr:{getBlockAttrs:{pathname:"/api/attr/getBlockAttrs",method:"POST"},getBookmarkLabels:{pathname:"/api/attr/getBookmarkLabels",method:"POST"},setBlockAttrs:{pathname:"/api/attr/setBlockAttrs",method:"POST"}},block:{appendBlock:{pathname:"/api/block/appendBlock",method:"POST"},deleteBlock:{pathname:"/api/block/deleteBlock",method:"POST"},getBlockBreadcrumb:{pathname:"/api/block/getBlockBreadcrumb",method:"POST"},getBlockDOM:{pathname:"/api/block/getBlockDOM",method:"POST"},getBlockInfo:{pathname:"/api/block/getBlockInfo",method:"POST"},getBlockKramdown:{pathname:"/api/block/getBlockKramdown",method:"POST"},getChildBlocks:{pathname:"/api/block/getChildBlocks",method:"POST"},getDocInfo:{pathname:"/api/block/getDocInfo",method:"POST"},insertBlock:{pathname:"/api/block/insertBlock",method:"POST"},moveBlock:{pathname:"/api/block/moveBlock",method:"POST"},prependBlock:{pathname:"/api/block/prependBlock",method:"POST"},transferBlockRef:{pathname:"/api/block/transferBlockRef",method:"POST"},updateBlock:{pathname:"/api/block/updateBlock",method:"POST"}},broadcast:{channels:{pathname:"/api/broadcast/channels",method:"GET"},getChannelInfo:{pathname:"/api/broadcast/getChannelInfo",method:"POST"},postMessage:{pathname:"/api/broadcast/postMessage",method:"POST"}},convert:{pandoc:{pathname:"/api/convert/pandoc",method:"POST"}},export:{exportMdContent:{pathname:"/api/export/exportMdContent",method:"POST"},exportResources:{pathname:"/api/export/exportResources",method:"POST"}},file:{getFile:{pathname:"/api/file/getFile",method:"POST"},putFile:{pathname:"/api/file/putFile",method:"POST"},readDir:{pathname:"/api/file/readDir",method:"POST"},removeFile:{pathname:"/api/file/removeFile",method:"POST"},renameFile:{pathname:"/api/file/renameFile",method:"POST"}},filetree:{createDocWithMd:{pathname:"/api/filetree/createDocWithMd",method:"POST"},getDoc:{pathname:"/api/filetree/getDoc",method:"POST"},getHPathByID:{pathname:"/api/filetree/getHPathByID",method:"POST"},getHPathByPath:{pathname:"/api/filetree/getHPathByPath",method:"POST"},listDocsByPath:{pathname:"/api/filetree/listDocsByPath",method:"POST"},moveDocs:{pathname:"/api/filetree/moveDocs",method:"POST"},removeDoc:{pathname:"/api/filetree/removeDoc",method:"POST"},renameDoc:{pathname:"/api/filetree/renameDoc",method:"POST"},searchDocs:{pathname:"/api/filetree/searchDocs",method:"POST"}},history:{getDocHistoryContent:{pathname:"/api/history/getDocHistoryContent",method:"POST"},getHistoryItems:{pathname:"/api/history/getHistoryItems",method:"POST"}},inbox:{getShorthand:{pathname:"/api/inbox/getShorthand",method:"POST"}},network:{forwardProxy:{pathname:"/api/network/forwardProxy",method:"POST"}},notebook:{closeNotebook:{pathname:"/api/notebook/closeNotebook",method:"POST"},createNotebook:{pathname:"/api/notebook/createNotebook",method:"POST"},getNotebookConf:{pathname:"/api/notebook/getNotebookConf",method:"POST"},lsNotebooks:{pathname:"/api/notebook/lsNotebooks",method:"POST"},openNotebook:{pathname:"/api/notebook/openNotebook",method:"POST"},removeNotebook:{pathname:"/api/notebook/removeNotebook",method:"POST"},renameNotebook:{pathname:"/api/notebook/renameNotebook",method:"POST"},setNotebookConf:{pathname:"/api/notebook/setNotebookConf",method:"POST"}},notification:{pushErrMsg:{pathname:"/api/notification/pushErrMsg",method:"POST"},pushMsg:{pathname:"/api/notification/pushMsg",method:"POST"}},query:{sql:{pathname:"/api/query/sql",method:"POST"}},repo:{openRepoSnapshotDoc:{pathname:"/api/repo/openRepoSnapshotDoc",method:"POST"}},search:{fullTextSearchBlock:{pathname:"/api/search/fullTextSearchBlock",method:"POST"}},snippet:{getSnippet:{pathname:"/api/snippet/getSnippet",method:"POST"},setSnippet:{pathname:"/api/snippet/setSnippet",method:"POST"}},storage:{getRecentDocs:{pathname:"/api/storage/getRecentDocs",method:"POST"}},system:{bootProgress:{pathname:"/api/system/bootProgress",method:"POST"},currentTime:{pathname:"/api/system/currentTime",method:"POST"},version:{pathname:"/api/system/version",method:"POST"},getConf:{pathname:"/api/system/getConf",method:"POST"}},template:{render:{pathname:"/api/template/render",method:"POST"},renderSprig:{pathname:"/api/template/renderSprig",method:"POST"}}});let f1=Gr;var $a=(e=>(e.NodeNotebook="NodeNotebook",e.NodeFolder="NodeFolder",e.NodeDocument="NodeDocument",e.NodeSuperBlock="NodeSuperBlock",e.NodeBlockquote="NodeBlockquote",e.NodeList="NodeList",e.NodeListItem="NodeListItem",e.NodeHeading="NodeHeading",e.NodeParagraph="NodeParagraph",e.NodeMathBlock="NodeMathBlock",e.NodeTable="NodeTable",e.NodeCodeBlock="NodeCodeBlock",e.NodeHTMLBlock="NodeHTMLBlock",e.NodeThematicBreak="NodeThematicBreak",e.NodeAudio="NodeAudio",e.NodeVideo="NodeVideo",e.NodeIFrame="NodeIFrame",e.NodeWidget="NodeWidget",e.NodeBlockQueryEmbed="NodeBlockQueryEmbed",e))($a||{}),Ga=(e=>(e.d="d",e.s="s",e.b="b",e.l="l",e.i="i",e.h="h",e.p="p",e.m="m",e.t="t",e.c="c",e.html="html",e.query_embed="query_embed",e.tb="tb",e.audio="audio",e.video="video",e.iframe="iframe",e.widget="widget",e))(Ga||{}),Ja=(e=>(e.d="d",e.s="s",e.b="b",e.l="l",e.i="i",e))(Ja||{}),Xa=(e=>(e.h="h",e.p="p",e.m="m",e.t="t",e.c="c",e.html="html",e.query_embed="query_embed",e.tb="tb",e.audio="audio",e.video="video",e.iframe="iframe",e.widget="widget",e))(Xa||{}),Qa=(e=>(e.h1="h1",e.h2="h2",e.h3="h3",e.h4="h4",e.h5="h5",e.h6="h6",e.u="u",e.o="o",e.t="t",e.none="",e))(Qa||{}),el=(e=>(e.u="u",e.o="o",e.t="t",e))(el||{}),tl=(e=>(e.h1="h1",e.h2="h2",e.h3="h3",e.h4="h4",e.h5="h5",e.h6="h6",e))(tl||{}),il=(e=>(e[e.keyword=0]="keyword",e[e.querySyntax=1]="querySyntax",e[e.sql=2]="sql",e[e.regex=3]="regex",e))(il||{}),sl=(e=>(e[e.noGroupBy=0]="noGroupBy",e[e.group=1]="group",e))(sl||{}),rl=(e=>(e[e.type=0]="type",e[e.createdASC=1]="createdASC",e[e.createdDESC=2]="createdDESC",e[e.modifiedASC=3]="modifiedASC",e[e.modifiedDESC=4]="modifiedDESC",e[e.sortByContent=5]="sortByContent",e[e.sortByRankAsc=6]="sortByRankAsc",e[e.sortByRankDesc=7]="sortByRankDesc",e))(rl||{}),nl=(e=>(e[e.SortModeNameASC=0]="SortModeNameASC",e[e.SortModeNameDESC=1]="SortModeNameDESC",e[e.SortModeUpdatedASC=2]="SortModeUpdatedASC",e[e.SortModeUpdatedDESC=3]="SortModeUpdatedDESC",e[e.SortModeAlphanumASC=4]="SortModeAlphanumASC",e[e.SortModeAlphanumDESC=5]="SortModeAlphanumDESC",e[e.SortModeCustom=6]="SortModeCustom",e[e.SortModeRefCountASC=7]="SortModeRefCountASC",e[e.SortModeRefCountDESC=8]="SortModeRefCountDESC",e[e.SortModeCreatedASC=9]="SortModeCreatedASC",e[e.SortModeCreatedDESC=10]="SortModeCreatedDESC",e[e.SortModeSizeASC=11]="SortModeSizeASC",e[e.SortModeSizeDESC=12]="SortModeSizeDESC",e[e.SortModeSubDocCountASC=13]="SortModeSubDocCountASC",e[e.SortModeSubDocCountDESC=14]="SortModeSubDocCountDESC",e))(nl||{});const ol=Object.freeze(Object.defineProperty({__proto__:null,BlockSubType:Qa,BlockType:Ga,Container:Ja,GroupBy:sl,Leaf:Xa,Method:il,NodeHeadingSubType:tl,NodeListSubType:el,NodeType:$a,OrderBy:rl,SortMode:nl},Symbol.toStringTag,{value:"Module"}));function Re(){}function bi(e,t){for(const i in t)e[i]=t[i];return e}function al(e){return e()}function no(){return Object.create(null)}function qe(e){e.forEach(al)}function ll(e){return typeof e=="function"}function Pe(e,t){return e!=e?t==t:e!==t||e&&typeof e=="object"||typeof e=="function"}let ys;function oo(e,t){return e===t?!0:(ys||(ys=document.createElement("a")),ys.href=t,e===ys.href)}function d1(e){return Object.keys(e).length===0}function _1(e,...t){if(e==null){for(const s of t)s(void 0);return Re}const i=e.subscribe(...t);return i.unsubscribe?()=>i.unsubscribe():i}function fi(e){let t;return _1(e,i=>t=i)(),t}function it(e,t,i,s){if(e){const r=cl(e,t,i,s);return e[0](r)}}function cl(e,t,i,s){return e[1]&&s?bi(i.ctx.slice(),e[1](s(t))):i.ctx}function st(e,t,i,s){if(e[2]&&s){const r=e[2](s(i));if(t.dirty===void 0)return r;if(typeof r=="object"){const n=[],l=Math.max(t.dirty.length,r.length);for(let o=0;o<l;o+=1)n[o]=t.dirty[o]|r[o];return n}return t.dirty|r}return t.dirty}function rt(e,t,i,s,r,n){if(r){const l=cl(t,i,s,n);e.p(l,r)}}function nt(e){if(e.ctx.length>32){const t=[],i=e.ctx.length/32;for(let s=0;s<i;s++)t[s]=-1;return t}return-1}function p1(e){const t={};for(const i in e)t[i]=!0;return t}function he(e,t){e.appendChild(t)}function J(e,t,i){e.insertBefore(t,i||null)}function G(e){e.parentNode&&e.parentNode.removeChild(e)}function ne(e){return document.createElement(e)}function Gt(e){return document.createElementNS("http://www.w3.org/2000/svg",e)}function ft(e){return document.createTextNode(e)}function ue(){return ft(" ")}function pt(){return ft("")}function ve(e,t,i,s){return e.addEventListener(t,i,s),()=>e.removeEventListener(t,i,s)}function si(e){return function(t){return t.preventDefault(),e.call(this,t)}}function Ht(e){return function(t){return t.stopPropagation(),e.call(this,t)}}function V(e,t,i){i==null?e.removeAttribute(t):e.getAttribute(t)!==i&&e.setAttribute(t,i)}const g1=["width","height"];function m1(e,t){const i=Object.getOwnPropertyDescriptors(e.__proto__);for(const s in t)t[s]==null?e.removeAttribute(s):s==="style"?e.style.cssText=t[s]:s==="__value"?e.value=e[s]=t[s]:i[s]&&i[s].set&&g1.indexOf(s)===-1?e[s]=t[s]:V(e,s,t[s])}function v1(e,t){Object.keys(t).forEach(i=>{Os(e,i,t[i])})}function Os(e,t,i){t in e?e[t]=typeof e[t]=="boolean"&&i===""?!0:i:V(e,t,i)}function ao(e){return/-/.test(e)?v1:m1}function mi(e,t,i){e.setAttributeNS("http://www.w3.org/1999/xlink",t,i)}function Jr(e){return e===""?null:+e}function b1(e){return Array.from(e.childNodes)}function Pt(e,t){t=""+t,e.data!==t&&(e.data=t)}function at(e,t){e.value=t??""}function bt(e,t,i,s){i==null?e.style.removeProperty(t):e.style.setProperty(t,i,s?"important":"")}function lo(e,t,i){for(let s=0;s<e.options.length;s+=1){const r=e.options[s];if(r.__value===t){r.selected=!0;return}}(!i||t!==void 0)&&(e.selectedIndex=-1)}function y1(e){const t=e.querySelector(":checked");return t&&t.__value}function F(e,t,i){e.classList.toggle(t,!!i)}function C1(e,t,{bubbles:i=!1,cancelable:s=!1}={}){return new CustomEvent(e,{detail:t,bubbles:i,cancelable:s})}class Ni{constructor(t=!1){ce(this,"is_svg",!1);ce(this,"e");ce(this,"n");ce(this,"t");ce(this,"a");this.is_svg=t,this.e=this.n=null}c(t){this.h(t)}m(t,i,s=null){this.e||(this.is_svg?this.e=Gt(i.nodeName):this.e=ne(i.nodeType===11?"TEMPLATE":i.nodeName),this.t=i.tagName!=="TEMPLATE"?i:i.content,this.c(t)),this.i(s)}h(t){this.e.innerHTML=t,this.n=Array.from(this.e.nodeName==="TEMPLATE"?this.e.content.childNodes:this.e.childNodes)}i(t){for(let i=0;i<this.n.length;i+=1)J(this.t,this.n[i],t)}p(t){this.d(),this.h(t),this.i(this.a)}d(){this.n.forEach(G)}}let os;function ts(e){os=e}function tr(){if(!os)throw new Error("Function called outside component initialization");return os}function S1(e){tr().$$.on_mount.push(e)}function mn(e){tr().$$.on_destroy.push(e)}function ci(){const e=tr();return(t,i,{cancelable:s=!1}={})=>{const r=e.$$.callbacks[t];if(r){const n=C1(t,i,{cancelable:s});return r.slice().forEach(l=>{l.call(e,n)}),!n.defaultPrevented}return!0}}function w1(e){return tr().$$.context.get(e)}function Ee(e,t){const i=e.$$.callbacks[t.type];i&&i.slice().forEach(s=>s.call(this,t))}const Ei=[],It=[];let Ti=[];const co=[],k1=Promise.resolve();let Xr=!1;function L1(){Xr||(Xr=!0,k1.then(hl))}function Vs(e){Ti.push(e)}const Er=new Set;let Si=0;function hl(){if(Si!==0)return;const e=os;do{try{for(;Si<Ei.length;){const t=Ei[Si];Si++,ts(t),E1(t.$$)}}catch(t){throw Ei.length=0,Si=0,t}for(ts(null),Ei.length=0,Si=0;It.length;)It.pop()();for(let t=0;t<Ti.length;t+=1){const i=Ti[t];Er.has(i)||(Er.add(i),i())}Ti.length=0}while(Ei.length);for(;co.length;)co.pop()();Xr=!1,Er.clear(),ts(e)}function E1(e){if(e.fragment!==null){e.update(),qe(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(Vs)}}function D1(e){const t=[],i=[];Ti.forEach(s=>e.indexOf(s)===-1?t.push(s):i.push(s)),i.forEach(s=>s()),Ti=t}const Bs=new Set;let _i;function Ge(){_i={r:0,c:[],p:_i}}function Je(){_i.r||qe(_i.c),_i=_i.p}function W(e,t){e&&e.i&&(Bs.delete(e),e.i(t))}function q(e,t,i,s){if(e&&e.o){if(Bs.has(e))return;Bs.add(e),_i.c.push(()=>{Bs.delete(e),s&&(i&&e.d(1),s())}),e.o(t)}else s&&s()}function kt(e){return(e==null?void 0:e.length)!==void 0?e:Array.from(e)}function M1(e,t){e.d(1),t.delete(e.key)}function ds(e,t){q(e,1,1,()=>{t.delete(e.key)})}function Vi(e,t,i,s,r,n,l,o,a,h,d,u){let g=e.length,b=n.length,y=g;const m={};for(;y--;)m[e[y].key]=y;const c=[],f=new Map,_=new Map,p=[];for(y=b;y--;){const k=u(r,n,y),C=i(k);let w=l.get(C);w?s&&p.push(()=>w.p(k,t)):(w=h(C,k),w.c()),f.set(C,c[y]=w),C in m&&_.set(C,Math.abs(y-m[C]))}const v=new Set,S=new Set;function L(k){W(k,1),k.m(o,d),l.set(k.key,k),d=k.first,b--}for(;g&&b;){const k=c[b-1],C=e[g-1],w=k.key,E=C.key;k===C?(d=k.first,g--,b--):f.has(E)?!l.has(w)||v.has(w)?L(k):S.has(E)?g--:_.get(w)>_.get(E)?(S.add(w),L(k)):(v.add(E),g--):(a(C,l),g--)}for(;g--;){const k=e[g];f.has(k.key)||a(k,l)}for(;b;)L(c[b-1]);return qe(p),c}function ji(e,t){const i={},s={},r={$$scope:1};let n=e.length;for(;n--;){const l=e[n],o=t[n];if(o){for(const a in l)a in o||(s[a]=1);for(const a in o)r[a]||(i[a]=o[a],r[a]=1);e[n]=o}else for(const a in l)r[a]=1}for(const l in s)l in i||(i[l]=void 0);return i}function _s(e){return typeof e=="object"&&e!==null?e:{}}function se(e){e&&e.c()}function te(e,t,i){const{fragment:s,after_update:r}=e.$$;s&&s.m(t,i),Vs(()=>{const n=e.$$.on_mount.map(al).filter(ll);e.$$.on_destroy?e.$$.on_destroy.push(...n):qe(n),e.$$.on_mount=[]}),r.forEach(Vs)}function ie(e,t){const i=e.$$;i.fragment!==null&&(D1(i.after_update),qe(i.on_destroy),i.fragment&&i.fragment.d(t),i.on_destroy=i.fragment=null,i.ctx=[])}function T1(e,t){e.$$.dirty[0]===-1&&(Ei.push(e),L1(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function Ve(e,t,i,s,r,n,l,o=[-1]){const a=os;ts(e);const h=e.$$={fragment:null,ctx:[],props:n,update:Re,not_equal:r,bound:no(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(a?a.$$.context:[])),callbacks:no(),dirty:o,skip_bound:!1,root:t.target||a.$$.root};l&&l(h.root);let d=!1;if(h.ctx=i?i(e,t.props||{},(u,g,...b)=>{const y=b.length?b[0]:g;return h.ctx&&r(h.ctx[u],h.ctx[u]=y)&&(!h.skip_bound&&h.bound[u]&&h.bound[u](y),d&&T1(e,u)),g}):[],h.update(),d=!0,qe(h.before_update),h.fragment=s?s(h.ctx):!1,t.target){if(t.hydrate){const u=b1(t.target);h.fragment&&h.fragment.l(u),u.forEach(G)}else h.fragment&&h.fragment.c();t.intro&&W(e.$$.fragment),te(e,t.target,t.anchor),hl()}ts(a)}class je{constructor(){ce(this,"$$");ce(this,"$$set")}$destroy(){ie(this,1),this.$destroy=Re}$on(t,i){if(!ll(i))return Re;const s=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return s.push(i),()=>{const r=s.indexOf(i);r!==-1&&s.splice(r,1)}}$set(t){this.$$set&&!d1(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const A1="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(A1);const R1=e=>({}),ho=e=>({});function O1(e){let t;const i=e[16].icon,s=it(i,e,e[15],ho),r=s||H1();return{c(){r&&r.c()},m(n,l){r&&r.m(n,l),t=!0},p(n,l){s&&s.p&&(!t||l&32768)&&rt(s,i,n,n[15],t?st(i,n[15],l,R1):nt(n[15]),ho)},i(n){t||(W(r,n),t=!0)},o(n){q(r,n),t=!1},d(n){r&&r.d(n)}}}function B1(e){let t,i;return{c(){t=Gt("svg"),i=Gt("use"),mi(i,"xlink:href",e[1]),V(t,"class","b3-menu__icon")},m(s,r){J(s,t,r),he(t,i)},p(s,r){r&2&&mi(i,"xlink:href",s[1])},i:Re,o:Re,d(s){s&&G(t)}}}function H1(e){let t,i;return{c(){t=Gt("svg"),i=Gt("use"),mi(i,"xlink:href","#"),V(t,"class","b3-menu__icon")},m(s,r){J(s,t,r),he(t,i)},p:Re,d(s){s&&G(t)}}}function x1(e){let t,i,s,r,n,l,o;return{c(){t=ne("div"),i=ue(),s=ne("input"),r=ue(),n=ne("div"),V(t,"class","fn__hr--small"),s.disabled=e[4],V(s,"placeholder",e[3]),V(s,"class","b3-text-field fn__size200"),V(n,"class","fn__hr--small")},m(a,h){J(a,t,h),J(a,i,h),J(a,s,h),e[17](s),at(s,e[0]),J(a,r,h),J(a,n,h),l||(o=[ve(s,"input",e[18]),ve(s,"change",e[12])],l=!0)},p(a,h){h&16&&(s.disabled=a[4]),h&8&&V(s,"placeholder",a[3]),h&1&&s.value!==a[0]&&at(s,a[0])},d(a){a&&(G(t),G(i),G(s),G(r),G(n)),e[17](null),l=!1,qe(o)}}}function P1(e){let t;return{c(){t=ft(e[3])},m(i,s){J(i,t,s)},p(i,s){s&8&&Pt(t,i[3])},d(i){i&&G(t)}}}function uo(e){let t,i,s;return{c(){t=ne("input"),V(t,"type","file"),V(t,"accept",e[8]),t.disabled=e[4],t.multiple=e[9],V(t,"class","file-input svelte-14whws2")},m(r,n){J(r,t,n),e[19](t),i||(s=[ve(t,"change",e[20]),ve(t,"change",e[13])],i=!0)},p(r,n){n&256&&V(t,"accept",r[8]),n&16&&(t.disabled=r[4]),n&512&&(t.multiple=r[9])},d(r){r&&G(t),e[19](null),i=!1,qe(s)}}}function fo(e){let t,i;return{c(){t=ne("span"),i=ft(e[6]),V(t,"class","b3-menu__accelerator")},m(s,r){J(s,t,r),he(t,i)},p(s,r){r&64&&Pt(i,s[6])},d(s){s&&G(t)}}}function I1(e){let t,i,s,r,n,l,o,a;const h=[B1,O1],d=[];function u(f,_){return f[1]?0:1}t=u(e),i=d[t]=h[t](e);function g(f,_){return!f[5]||f[7]?P1:x1}let b=g(e),y=b(e),m=e[7]&&uo(e),c=e[6]&&fo(e);return{c(){i.c(),s=ue(),r=ne("span"),y.c(),n=ue(),m&&m.c(),l=ue(),c&&c.c(),o=pt(),V(r,"class","b3-menu__label"),bt(r,"font",e[2]),bt(r,"position",e[7]?"relative":"initial")},m(f,_){d[t].m(f,_),J(f,s,_),J(f,r,_),y.m(r,null),he(r,n),m&&m.m(r,null),J(f,l,_),c&&c.m(f,_),J(f,o,_),a=!0},p(f,[_]){let p=t;t=u(f),t===p?d[t].p(f,_):(Ge(),q(d[p],1,1,()=>{d[p]=null}),Je(),i=d[t],i?i.p(f,_):(i=d[t]=h[t](f),i.c()),W(i,1),i.m(s.parentNode,s)),b===(b=g(f))&&y?y.p(f,_):(y.d(1),y=b(f),y&&(y.c(),y.m(r,n))),f[7]?m?m.p(f,_):(m=uo(f),m.c(),m.m(r,null)):m&&(m.d(1),m=null),_&4&&bt(r,"font",f[2]),_&128&&bt(r,"position",f[7]?"relative":"initial"),f[6]?c?c.p(f,_):(c=fo(f),c.c(),c.m(o.parentNode,o)):c&&(c.d(1),c=null)},i(f){a||(W(i),a=!0)},o(f){q(i),a=!1},d(f){f&&(G(s),G(r),G(l),G(o)),d[t].d(f),y.d(),m&&m.d(),c&&c.d(f)}}}function N1(e,t,i){let{$$slots:s={},$$scope:r}=t,{icon:n=""}=t,{font:l=""}=t,{label:o=""}=t,{disabled:a=!1}=t,{input:h=!1}=t,{value:d=""}=t,{accelerator:u=""}=t,{file:g=!1}=t,{accept:b=""}=t,{multiple:y=!0}=t,{webkitdirectory:m=!0}=t,c=null,f;function _(E){f&&i(11,f.webkitdirectory=E,f)}S1(()=>{_(m)});const p=ci();function v(E){p("changed",{value:d,event:E})}function S(E){p("selected",{files:c,event:E})}function L(E){It[E?"unshift":"push"](()=>{f=E,i(11,f)})}function k(){d=this.value,i(0,d)}function C(E){It[E?"unshift":"push"](()=>{f=E,i(11,f)})}function w(){c=this.files,i(10,c)}return e.$$set=E=>{"icon"in E&&i(1,n=E.icon),"font"in E&&i(2,l=E.font),"label"in E&&i(3,o=E.label),"disabled"in E&&i(4,a=E.disabled),"input"in E&&i(5,h=E.input),"value"in E&&i(0,d=E.value),"accelerator"in E&&i(6,u=E.accelerator),"file"in E&&i(7,g=E.file),"accept"in E&&i(8,b=E.accept),"multiple"in E&&i(9,y=E.multiple),"webkitdirectory"in E&&i(14,m=E.webkitdirectory),"$$scope"in E&&i(15,r=E.$$scope)},e.$$.update=()=>{e.$$.dirty&16384&&_(m)},[d,n,l,o,a,h,u,g,b,y,c,f,v,S,m,r,s,L,k,C,w]}let _o=class extends je{constructor(t){super(),Ve(this,t,N1,I1,Pe,{icon:1,font:2,label:3,disabled:4,input:5,value:0,accelerator:6,file:7,accept:8,multiple:9,webkitdirectory:14})}};const xi={id:/^\d{14}-[0-9a-z]{7}$/,url:/^siyuan:\/\/blocks\/(\d{14}-[0-9a-z]{7})/,snippet:/^\d{14}-[0-9a-z]{7}$/,created:/^\d{10}$/,history:/[\/\\]history[\/\\]\d{4}-\d{2}-\d{2}-\d{6}-(clean|update|delete|format|sync|replace)([\/\\]\d{14}-[0-9a-z]{7})+\.sy$/,snapshot:/^[0-9a-f]{40}$/,shorthand:/^\d{13}$/};function V1(e){let t,i;return{c(){t=Gt("svg"),i=Gt("use"),mi(i,"xlink:href",e[0]),V(t,"style",e[3]),V(t,"data-id",e[1]),V(t,"class",e[2]),F(t,"popover__block",xi.id.test(e[1]))},m(s,r){J(s,t,r),he(t,i)},p(s,[r]){r&1&&mi(i,"xlink:href",s[0]),r&8&&V(t,"style",s[3]),r&2&&V(t,"data-id",s[1]),r&4&&V(t,"class",s[2]),r&6&&F(t,"popover__block",xi.id.test(s[1]))},i:Re,o:Re,d(s){s&&G(t)}}}function j1(e,t,i){let{icon:s}=t,{id:r=""}=t,{className:n=""}=t,{style:l=""}=t;return e.$$set=o=>{"icon"in o&&i(0,s=o.icon),"id"in o&&i(1,r=o.id),"className"in o&&i(2,n=o.className),"style"in o&&i(3,l=o.style)},[s,r,n,l]}class Rt extends je{constructor(t){super(),Ve(this,t,j1,V1,Pe,{icon:0,id:1,className:2,style:3})}}const F1=e=>({focus:e&1}),po=e=>({focus:e[0]});function go(e,t,i){const s=e.slice();return s[13]=t[i],s}function mo(e){let t,i,s,r,n,l,o;return i=new Rt({props:{icon:"#iconSearch",className:"b3-form__icon-icon"}}),{c(){t=ne("div"),se(i.$$.fragment),s=ue(),r=ne("input"),V(r,"placeholder",e[4]),V(r,"class","b3-text-field fn__block b3-form__icon-input"),V(t,"class","b3-form__icon")},m(a,h){J(a,t,h),te(i,t,null),he(t,s),he(t,r),at(r,e[1]),n=!0,l||(o=[ve(r,"input",e[9]),ve(r,"change",e[5])],l=!0)},p(a,h){(!n||h&16)&&V(r,"placeholder",a[4]),h&2&&r.value!==a[1]&&at(r,a[1])},i(a){n||(W(i.$$.fragment,a),n=!0)},o(a){q(i.$$.fragment,a),n=!1},d(a){a&&G(t),ie(i),l=!1,qe(o)}}}function vo(e,t){let i,s,r,n,l=t[13].text+"",o,a,h,d,u;s=new Rt({props:{icon:t[13].icon,className:"b3-list-item__graphic"}});function g(){return t[10](t[13])}function b(){return t[11](t[13])}return{key:e,first:null,c(){i=ne("li"),se(s.$$.fragment),r=ue(),n=ne("span"),o=ue(),V(n,"class","b3-list-item__text svelte-15drd7h"),V(i,"role","button"),V(i,"data-name",a=t[13].name),V(i,"class","b3-list-item"),F(i,"b3-list-item--focus",t[13].key===t[0]),this.first=i},m(y,m){J(y,i,m),te(s,i,null),he(i,r),he(i,n),n.innerHTML=l,he(i,o),h=!0,d||(u=[ve(i,"click",g),ve(i,"keyup",b)],d=!0)},p(y,m){t=y;const c={};m&4&&(c.icon=t[13].icon),s.$set(c),(!h||m&4)&&l!==(l=t[13].text+"")&&(n.innerHTML=l),(!h||m&4&&a!==(a=t[13].name))&&V(i,"data-name",a),(!h||m&5)&&F(i,"b3-list-item--focus",t[13].key===t[0])},i(y){h||(W(s.$$.fragment,y),h=!0)},o(y){q(s.$$.fragment,y),h=!1},d(y){y&&G(i),ie(s),d=!1,qe(u)}}}function U1(e){let t;return{c(){t=ft("Container")},m(i,s){J(i,t,s)},d(i){i&&G(t)}}}function W1(e){let t,i,s,r=[],n=new Map,l,o,a,h=e[3]&&mo(e),d=kt(e[2]);const u=m=>m[13].key;for(let m=0;m<d.length;m+=1){let c=go(e,d,m),f=u(c);n.set(f,r[m]=vo(f,c))}const g=e[8].default,b=it(g,e,e[7],po),y=b||U1();return{c(){t=ne("div"),i=ne("ul"),h&&h.c(),s=ue();for(let m=0;m<r.length;m+=1)r[m].c();l=ue(),o=ne("div"),y&&y.c(),V(i,"class","b3-tab-bar b3-list b3-list--background"),V(o,"class","config__tab-wrap"),V(t,"class","fn__flex-1 fn__flex config__panel")},m(m,c){J(m,t,c),he(t,i),h&&h.m(i,null),he(i,s);for(let f=0;f<r.length;f+=1)r[f]&&r[f].m(i,null);he(t,l),he(t,o),y&&y.m(o,null),a=!0},p(m,[c]){m[3]?h?(h.p(m,c),c&8&&W(h,1)):(h=mo(m),h.c(),W(h,1),h.m(i,s)):h&&(Ge(),q(h,1,1,()=>{h=null}),Je()),c&69&&(d=kt(m[2]),Ge(),r=Vi(r,c,u,1,m,d,n,i,ds,vo,null,go),Je()),b&&b.p&&(!a||c&129)&&rt(b,g,m,m[7],a?st(g,m[7],c,F1):nt(m[7]),po)},i(m){if(!a){W(h);for(let c=0;c<d.length;c+=1)W(r[c]);W(y,m),a=!0}},o(m){q(h);for(let c=0;c<r.length;c+=1)q(r[c]);q(y,m),a=!1},d(m){m&&G(t),h&&h.d();for(let c=0;c<r.length;c+=1)r[c].d();y&&y.d(m)}}}function Y1(e,t,i){let{$$slots:s={},$$scope:r}=t,{panels:n}=t,{focus:l}=t,{searchEnable:o=!1}=t,{searchPlaceholder:a=""}=t,{searchValue:h=""}=t;const d=ci();function u(){d("search-changed",{value:h})}function g(c){d("changed",{key:c}),i(0,l=c)}function b(){h=this.value,i(1,h)}const y=c=>g(c.key),m=c=>g(c.key);return e.$$set=c=>{"panels"in c&&i(2,n=c.panels),"focus"in c&&i(0,l=c.focus),"searchEnable"in c&&i(3,o=c.searchEnable),"searchPlaceholder"in c&&i(4,a=c.searchPlaceholder),"searchValue"in c&&i(1,h=c.searchValue),"$$scope"in c&&i(7,r=c.$$scope)},[l,h,n,o,a,u,g,r,s,b,y,m]}class z1 extends je{constructor(t){super(),Ve(this,t,Y1,W1,Pe,{panels:2,focus:0,searchEnable:3,searchPlaceholder:4,searchValue:1})}}function q1(e){let t,i;const s=e[4].default,r=it(s,e,e[3],null);return{c(){t=ne("div"),r&&r.c(),V(t,"data-name",e[2]),V(t,"class","config__tab-container"),F(t,"fn__none",!e[0]),F(t,"config__tab-container--top",e[1])},m(n,l){J(n,t,l),r&&r.m(t,null),i=!0},p(n,[l]){r&&r.p&&(!i||l&8)&&rt(r,s,n,n[3],i?st(s,n[3],l,null):nt(n[3]),null),(!i||l&4)&&V(t,"data-name",n[2]),(!i||l&1)&&F(t,"fn__none",!n[0]),(!i||l&2)&&F(t,"config__tab-container--top",n[1])},i(n){i||(W(r,n),i=!0)},o(n){q(r,n),i=!1},d(n){n&&G(t),r&&r.d(n)}}}function Z1(e,t,i){let{$$slots:s={},$$scope:r}=t,{display:n=!0}=t,{top:l=!0}=t,{name:o=""}=t;return e.$$set=a=>{"display"in a&&i(0,n=a.display),"top"in a&&i(1,l=a.top),"name"in a&&i(2,o=a.name),"$$scope"in a&&i(3,r=a.$$scope)},[n,l,o,r,s]}class Hs extends je{constructor(t){super(),Ve(this,t,Z1,q1,Pe,{display:0,top:1,name:2})}}const K1=e=>({}),bo=e=>({}),$1=e=>({}),yo=e=>({});function Co(e){let t,i;const s=e[7].icon,r=it(s,e,e[6],yo);return{c(){t=ne("span"),r&&r.c(),V(t,"class","item__icon")},m(n,l){J(n,t,l),r&&r.m(t,null),i=!0},p(n,l){r&&r.p&&(!i||l&64)&&rt(r,s,n,n[6],i?st(s,n[6],l,$1):nt(n[6]),yo)},i(n){i||(W(r,n),i=!0)},o(n){q(r,n),i=!1},d(n){n&&G(t),r&&r.d(n)}}}function G1(e){let t;return{c(){t=ft("text")},m(i,s){J(i,t,s)},d(i){i&&G(t)}}}function J1(e){let t,i,s,r,n,l,o,a,h,d,u=e[0]&&e[4].icon&&Co(e);const g=e[7].text,b=it(g,e,e[6],bo),y=b||G1();return{c(){t=ne("div"),i=ne("span"),s=ue(),u&&u.c(),r=ue(),n=ne("span"),y&&y.c(),l=ue(),o=ne("span"),V(i,"class","fn__flex-1"),V(n,"class","item__text"),V(o,"class","fn__flex-1"),V(t,"role","button"),V(t,"data-type",e[1]),V(t,"class","item item--full"),F(t,"item--focus",e[2])},m(m,c){J(m,t,c),he(t,i),he(t,s),u&&u.m(t,null),he(t,r),he(t,n),y&&y.m(n,null),he(t,l),he(t,o),a=!0,h||(d=ve(t,"click",e[3]),h=!0)},p(m,[c]){m[0]&&m[4].icon?u?(u.p(m,c),c&17&&W(u,1)):(u=Co(m),u.c(),W(u,1),u.m(t,r)):u&&(Ge(),q(u,1,1,()=>{u=null}),Je()),b&&b.p&&(!a||c&64)&&rt(b,g,m,m[6],a?st(g,m[6],c,K1):nt(m[6]),bo),(!a||c&2)&&V(t,"data-type",m[1]),(!a||c&4)&&F(t,"item--focus",m[2])},i(m){a||(W(u),W(y,m),a=!0)},o(m){q(u),q(y,m),a=!1},d(m){m&&G(t),u&&u.d(),y&&y.d(m),h=!1,d()}}}function X1(e,t,i){let{$$slots:s={},$$scope:r}=t;const n=p1(s);let{key:l}=t,{icon:o}=t,{name:a=""}=t,{focus:h=!1}=t;const d=ci();function u(){h||d("changed",{key:l})}return e.$$set=g=>{"key"in g&&i(5,l=g.key),"icon"in g&&i(0,o=g.icon),"name"in g&&i(1,a=g.name),"focus"in g&&i(2,h=g.focus),"$$scope"in g&&i(6,r=g.$$scope)},[o,a,h,u,n,l,r,s]}class Q1 extends je{constructor(t){super(),Ve(this,t,X1,J1,Pe,{key:5,icon:0,name:1,focus:2})}}const ef=e=>({focus:e&1}),So=e=>({focus:e[0]});function wo(e,t,i){const s=e.slice();return s[5]=t[i],s}function tf(e){let t,i=e[5].icon+"",s;return{c(){t=new Ni(!1),s=pt(),t.a=s},m(r,n){t.m(i,r,n),J(r,s,n)},p(r,n){n&2&&i!==(i=r[5].icon+"")&&t.p(i)},i:Re,o:Re,d(r){r&&(G(s),t.d())}}}function sf(e){let t,i;return t=new Rt({props:{icon:e[5].icon}}),{c(){se(t.$$.fragment)},m(s,r){te(t,s,r),i=!0},p(s,r){const n={};r&2&&(n.icon=s[5].icon),t.$set(n)},i(s){i||(W(t.$$.fragment,s),i=!0)},o(s){q(t.$$.fragment,s),i=!1},d(s){ie(t,s)}}}function rf(e){let t,i,s,r,n,l;const o=[sf,tf],a=[];function h(d,u){var g;return u&2&&(i=null),i==null&&(i=!!((g=d[5].icon)!=null&&g.startsWith("#"))),i?0:d[5].icon?1:-1}return~(s=h(e,-1))&&(r=a[s]=o[s](e)),{c(){t=ne("span"),r&&r.c(),n=ue(),V(t,"slot","icon")},m(d,u){J(d,t,u),~s&&a[s].m(t,null),he(t,n),l=!0},p(d,u){let g=s;s=h(d,u),s===g?~s&&a[s].p(d,u):(r&&(Ge(),q(a[g],1,1,()=>{a[g]=null}),Je()),~s?(r=a[s],r?r.p(d,u):(r=a[s]=o[s](d),r.c()),W(r,1),r.m(t,n)):r=null)},i(d){l||(W(r),l=!0)},o(d){q(r),l=!1},d(d){d&&G(t),~s&&a[s].d()}}}function nf(e){let t,i,s=e[5].text+"",r;return{c(){t=ne("span"),i=new Ni(!1),r=ue(),i.a=r,V(t,"slot","text")},m(n,l){J(n,t,l),i.m(s,t),he(t,r)},p(n,l){l&2&&s!==(s=n[5].text+"")&&i.p(s)},d(n){n&&G(t)}}}function ko(e,t){let i,s,r;return s=new Q1({props:{key:t[5].key,icon:!!t[5].icon,name:t[5].name,focus:t[5].key===t[0],$$slots:{text:[nf],icon:[rf]},$$scope:{ctx:t}}}),s.$on("changed",t[2]),{key:e,first:null,c(){i=pt(),se(s.$$.fragment),this.first=i},m(n,l){J(n,i,l),te(s,n,l),r=!0},p(n,l){t=n;const o={};l&2&&(o.key=t[5].key),l&2&&(o.icon=!!t[5].icon),l&2&&(o.name=t[5].name),l&3&&(o.focus=t[5].key===t[0]),l&18&&(o.$$scope={dirty:l,ctx:t}),s.$set(o)},i(n){r||(W(s.$$.fragment,n),r=!0)},o(n){q(s.$$.fragment,n),r=!1},d(n){n&&G(i),ie(s,n)}}}function of(e){let t;return{c(){t=ft("Container")},m(i,s){J(i,t,s)},d(i){i&&G(t)}}}function af(e){let t,i,s=[],r=new Map,n,l,o,a=kt(e[1]);const h=b=>b[5].key;for(let b=0;b<a.length;b+=1){let y=wo(e,a,b),m=h(y);r.set(m,s[b]=ko(m,y))}const d=e[3].default,u=it(d,e,e[4],So),g=u||of();return{c(){t=ne("div"),i=ne("div");for(let b=0;b<s.length;b+=1)s[b].c();n=ue(),l=ne("div"),g&&g.c(),V(i,"class","layout-tab-bar fn__flex"),V(l,"class","fn__flex-1"),V(t,"class","fn__flex-column"),bt(t,"height","100%")},m(b,y){J(b,t,y),he(t,i);for(let m=0;m<s.length;m+=1)s[m]&&s[m].m(i,null);he(t,n),he(t,l),g&&g.m(l,null),o=!0},p(b,[y]){y&7&&(a=kt(b[1]),Ge(),s=Vi(s,y,h,1,b,a,r,i,ds,ko,null,wo),Je()),u&&u.p&&(!o||y&17)&&rt(u,d,b,b[4],o?st(d,b[4],y,ef):nt(b[4]),So)},i(b){if(!o){for(let y=0;y<a.length;y+=1)W(s[y]);W(g,b),o=!0}},o(b){for(let y=0;y<s.length;y+=1)q(s[y]);q(g,b),o=!1},d(b){b&&G(t);for(let y=0;y<s.length;y+=1)s[y].d();g&&g.d(b)}}}function lf(e,t,i){let{$$slots:s={},$$scope:r}=t,{tabs:n}=t,{focus:l}=t;function o(a){i(0,l=a.detail.key)}return e.$$set=a=>{"tabs"in a&&i(1,n=a.tabs),"focus"in a&&i(0,l=a.focus),"$$scope"in a&&i(4,r=a.$$scope)},[l,n,o,s,r]}class cf extends je{constructor(t){super(),Ve(this,t,lf,af,Pe,{tabs:1,focus:0})}}const hf=e=>({}),Lo=e=>({}),uf=e=>({}),Eo=e=>({}),ff=e=>({}),Do=e=>({}),df=e=>({}),Mo=e=>({});function _f(e){let t,i;return{c(){t=new Ni(!1),i=pt(),t.a=i},m(s,r){t.m(e[0],s,r),J(s,i,r)},p(s,r){r&1&&t.p(s[0])},d(s){s&&(G(i),t.d())}}}function pf(e){let t,i;return{c(){t=new Ni(!1),i=pt(),t.a=i},m(s,r){t.m(e[1],s,r),J(s,i,r)},p(s,r){r&2&&t.p(s[1])},d(s){s&&(G(i),t.d())}}}function To(e){let t,i,s;const r=e[4].input,n=it(r,e,e[3],Eo);return{c(){t=ne("div"),i=ue(),n&&n.c(),V(t,"class","fn__hr")},m(l,o){J(l,t,o),J(l,i,o),n&&n.m(l,o),s=!0},p(l,o){n&&n.p&&(!s||o&8)&&rt(n,r,l,l[3],s?st(r,l[3],o,uf):nt(l[3]),Eo)},i(l){s||(W(n,l),s=!0)},o(l){q(n,l),s=!1},d(l){l&&(G(t),G(i)),n&&n.d(l)}}}function Ao(e){let t,i,s;const r=e[4].input,n=it(r,e,e[3],Lo);return{c(){t=ne("span"),i=ue(),n&&n.c(),V(t,"class","fn__space")},m(l,o){J(l,t,o),J(l,i,o),n&&n.m(l,o),s=!0},p(l,o){n&&n.p&&(!s||o&8)&&rt(n,r,l,l[3],s?st(r,l[3],o,hf):nt(l[3]),Lo)},i(l){s||(W(n,l),s=!0)},o(l){q(n,l),s=!1},d(l){l&&(G(t),G(i)),n&&n.d(l)}}}function gf(e){let t,i,s,r,n,l,o;const a=e[4].title,h=it(a,e,e[3],Mo),d=h||_f(e),u=e[4].text,g=it(u,e,e[3],Do),b=g||pf(e);let y=e[2]&&To(e),m=!e[2]&&Ao(e);return{c(){t=ne("label"),i=ne("div"),d&&d.c(),s=ue(),r=ne("div"),b&&b.c(),n=ue(),y&&y.c(),l=ue(),m&&m.c(),V(r,"class","b3-label__text"),V(i,"class","fn__flex-1 svelte-2m76cy"),F(i,"visible",e[2]),V(t,"class","fn__flex b3-label")},m(c,f){J(c,t,f),he(t,i),d&&d.m(i,null),he(i,s),he(i,r),b&&b.m(r,null),he(i,n),y&&y.m(i,null),he(t,l),m&&m.m(t,null),o=!0},p(c,[f]){h?h.p&&(!o||f&8)&&rt(h,a,c,c[3],o?st(a,c[3],f,df):nt(c[3]),Mo):d&&d.p&&(!o||f&1)&&d.p(c,o?f:-1),g?g.p&&(!o||f&8)&&rt(g,u,c,c[3],o?st(u,c[3],f,ff):nt(c[3]),Do):b&&b.p&&(!o||f&2)&&b.p(c,o?f:-1),c[2]?y?(y.p(c,f),f&4&&W(y,1)):(y=To(c),y.c(),W(y,1),y.m(i,null)):y&&(Ge(),q(y,1,1,()=>{y=null}),Je()),(!o||f&4)&&F(i,"visible",c[2]),c[2]?m&&(Ge(),q(m,1,1,()=>{m=null}),Je()):m?(m.p(c,f),f&4&&W(m,1)):(m=Ao(c),m.c(),W(m,1),m.m(t,null))},i(c){o||(W(d,c),W(b,c),W(y),W(m),o=!0)},o(c){q(d,c),q(b,c),q(y),q(m),o=!1},d(c){c&&G(t),d&&d.d(c),b&&b.d(c),y&&y.d(),m&&m.d()}}}function mf(e,t,i){let{$$slots:s={},$$scope:r}=t,{title:n=""}=t,{text:l=""}=t,{block:o=!1}=t;return e.$$set=a=>{"title"in a&&i(0,n=a.title),"text"in a&&i(1,l=a.text),"block"in a&&i(2,o=a.block),"$$scope"in a&&i(3,r=a.$$scope)},[n,l,o,r,s]}class Ne extends je{constructor(t){super(),Ve(this,t,mf,gf,Pe,{title:0,text:1,block:2})}}var Te=(e=>(e[e.checkbox=0]="checkbox",e[e.text=1]="text",e[e.number=2]="number",e[e.slider=3]="slider",e[e.button=4]="button",e[e.select=5]="select",e[e.textarea=6]="textarea",e))(Te||{});function Ro(e,t,i){const s=e.slice();return s[19]=t[i],s}function vf(e){let t,i,s;return{c(){t=ne("textarea"),t.disabled=e[2],V(t,"class","b3-text-field"),V(t,"placeholder",e[5]),F(t,"fn__block",e[3]),F(t,"fn__size200",!e[3]&&e[4]),bt(t,"height",e[8]>0?`${e[8]}px`:void 0)},m(r,n){J(r,t,n),at(t,e[0]),i||(s=[ve(t,"input",e[17]),ve(t,"change",e[10])],i=!0)},p(r,n){n&4&&(t.disabled=r[2]),n&32&&V(t,"placeholder",r[5]),n&65&&at(t,r[0]),n&8&&F(t,"fn__block",r[3]),n&24&&F(t,"fn__size200",!r[3]&&r[4]),n&256&&bt(t,"height",r[8]>0?`${r[8]}px`:void 0)},d(r){r&&G(t),i=!1,qe(s)}}}function bf(e){let t,i=[],s=new Map,r,n,l=kt(e[6]);const o=a=>a[19].key;for(let a=0;a<l.length;a+=1){let h=Ro(e,l,a),d=o(h);s.set(d,i[a]=Oo(d,h))}return{c(){t=ne("select");for(let a=0;a<i.length;a+=1)i[a].c();t.disabled=e[2],V(t,"class","b3-select"),e[0]===void 0&&Vs(()=>e[16].call(t)),F(t,"fn__block",e[3]),F(t,"fn__size200",!e[3]&&e[4]),F(t,"fn__flex-center",!e[3])},m(a,h){J(a,t,h);for(let d=0;d<i.length;d+=1)i[d]&&i[d].m(t,null);lo(t,e[0],!0),r||(n=[ve(t,"change",e[16]),ve(t,"change",e[10])],r=!0)},p(a,h){h&64&&(l=kt(a[6]),i=Vi(i,h,o,1,a,l,s,t,M1,Oo,null,Ro)),h&4&&(t.disabled=a[2]),h&65&&lo(t,a[0]),h&8&&F(t,"fn__block",a[3]),h&24&&F(t,"fn__size200",!a[3]&&a[4]),h&8&&F(t,"fn__flex-center",!a[3])},d(a){a&&G(t);for(let h=0;h<i.length;h+=1)i[h].d();r=!1,qe(n)}}}function yf(e){let t,i,s,r;return{c(){t=ne("button"),i=ft(e[0]),t.disabled=e[2],V(t,"class","b3-button b3-button--outline"),F(t,"fn__block",e[3]),F(t,"fn__size200",!e[3]&&e[4]),F(t,"fn__flex-center",!e[3])},m(n,l){J(n,t,l),he(t,i),s||(r=ve(t,"click",e[9]),s=!0)},p(n,l){l&1&&Pt(i,n[0]),l&4&&(t.disabled=n[2]),l&8&&F(t,"fn__block",n[3]),l&24&&F(t,"fn__size200",!n[3]&&n[4]),l&8&&F(t,"fn__flex-center",!n[3])},d(n){n&&G(t),s=!1,r()}}}function Cf(e){let t,i,s,r,n,l;return{c(){t=ne("input"),t.disabled=e[2],V(t,"class","b3-slider svelte-edt8og"),V(t,"type","range"),V(t,"min",i=e[7].min),V(t,"max",s=e[7].max),V(t,"step",r=e[7].step),F(t,"fn__block",e[3]),F(t,"fn__size200",!e[3]&&e[4])},m(o,a){J(o,t,a),at(t,e[0]),n||(l=[ve(t,"change",e[15]),ve(t,"input",e[15]),ve(t,"change",e[10])],n=!0)},p(o,a){a&4&&(t.disabled=o[2]),a&128&&i!==(i=o[7].min)&&V(t,"min",i),a&128&&s!==(s=o[7].max)&&V(t,"max",s),a&128&&r!==(r=o[7].step)&&V(t,"step",r),a&65&&at(t,o[0]),a&8&&F(t,"fn__block",o[3]),a&24&&F(t,"fn__size200",!o[3]&&o[4])},d(o){o&&G(t),n=!1,qe(l)}}}function Sf(e){let t,i,s,r,n,l;return{c(){t=ne("input"),t.disabled=e[2],V(t,"class","b3-text-field"),V(t,"type","number"),V(t,"placeholder",e[5]),V(t,"min",i=e[7].min),V(t,"max",s=e[7].max),V(t,"step",r=e[7].step),F(t,"fn__block",e[3]),F(t,"fn__size200",!e[3]&&e[4]),F(t,"fn__flex-center",!e[3])},m(o,a){J(o,t,a),at(t,e[0]),n||(l=[ve(t,"input",e[14]),ve(t,"change",e[10])],n=!0)},p(o,a){a&4&&(t.disabled=o[2]),a&32&&V(t,"placeholder",o[5]),a&128&&i!==(i=o[7].min)&&V(t,"min",i),a&128&&s!==(s=o[7].max)&&V(t,"max",s),a&128&&r!==(r=o[7].step)&&V(t,"step",r),a&65&&Jr(t.value)!==o[0]&&at(t,o[0]),a&8&&F(t,"fn__block",o[3]),a&24&&F(t,"fn__size200",!o[3]&&o[4]),a&8&&F(t,"fn__flex-center",!o[3])},d(o){o&&G(t),n=!1,qe(l)}}}function wf(e){let t,i,s;return{c(){t=ne("input"),t.disabled=e[2],V(t,"class","b3-text-field"),V(t,"placeholder",e[5]),F(t,"fn__block",e[3]),F(t,"fn__size200",!e[3]&&e[4]),F(t,"fn__flex-center",!e[3])},m(r,n){J(r,t,n),at(t,e[0]),i||(s=[ve(t,"input",e[13]),ve(t,"change",e[10])],i=!0)},p(r,n){n&4&&(t.disabled=r[2]),n&32&&V(t,"placeholder",r[5]),n&65&&t.value!==r[0]&&at(t,r[0]),n&8&&F(t,"fn__block",r[3]),n&24&&F(t,"fn__size200",!r[3]&&r[4]),n&8&&F(t,"fn__flex-center",!r[3])},d(r){r&&G(t),i=!1,qe(s)}}}function kf(e){let t,i,s;return{c(){t=ne("input"),t.disabled=e[2],V(t,"class","b3-switch svelte-edt8og"),V(t,"type","checkbox"),F(t,"fn__block",e[3]),F(t,"fn__flex-center",!e[3])},m(r,n){J(r,t,n),t.checked=e[0],i||(s=[ve(t,"change",e[12]),ve(t,"change",e[10])],i=!0)},p(r,n){n&4&&(t.disabled=r[2]),n&65&&(t.checked=r[0]),n&8&&F(t,"fn__block",r[3]),n&8&&F(t,"fn__flex-center",!r[3])},d(r){r&&G(t),i=!1,qe(s)}}}function Oo(e,t){let i,s=t[19].text+"",r,n;return{key:e,first:null,c(){i=ne("option"),r=ft(s),i.__value=n=t[19].key,at(i,i.__value),this.first=i},m(l,o){J(l,i,o),he(i,r)},p(l,o){t=l,o&64&&s!==(s=t[19].text+"")&&Pt(r,s),o&64&&n!==(n=t[19].key)&&(i.__value=n,at(i,i.__value))},d(l){l&&G(i)}}}function Lf(e){let t;function i(n,l){if(n[1]===Te.checkbox)return kf;if(n[1]===Te.text)return wf;if(n[1]===Te.number)return Sf;if(n[1]===Te.slider)return Cf;if(n[1]===Te.button)return yf;if(n[1]===Te.select)return bf;if(n[1]===Te.textarea)return vf}let s=i(e),r=s&&s(e);return{c(){r&&r.c(),t=pt()},m(n,l){r&&r.m(n,l),J(n,t,l)},p(n,[l]){s===(s=i(n))&&r?r.p(n,l):(r&&r.d(1),r=s&&s(n),r&&(r.c(),r.m(t.parentNode,t)))},i:Re,o:Re,d(n){n&&G(t),r&&r.d(n)}}}function Ef(e,t,i){let{type:s}=t,{settingKey:r}=t,{settingValue:n}=t,{disabled:l=!1}=t,{block:o=!1}=t,{normal:a=!0}=t,{placeholder:h=""}=t,{options:d=[]}=t,{limits:u={min:0,max:100,step:1}}=t,{height:g=0}=t;const b=ci();function y(L){b("clicked",{event:L})}function m(L){b("changed",{key:r,value:n,event:L})}function c(){n=this.checked,i(0,n),i(6,d)}function f(){n=this.value,i(0,n),i(6,d)}function _(){n=Jr(this.value),i(0,n),i(6,d)}function p(){n=Jr(this.value),i(0,n),i(6,d)}function v(){n=y1(this),i(0,n),i(6,d)}function S(){n=this.value,i(0,n),i(6,d)}return e.$$set=L=>{"type"in L&&i(1,s=L.type),"settingKey"in L&&i(11,r=L.settingKey),"settingValue"in L&&i(0,n=L.settingValue),"disabled"in L&&i(2,l=L.disabled),"block"in L&&i(3,o=L.block),"normal"in L&&i(4,a=L.normal),"placeholder"in L&&i(5,h=L.placeholder),"options"in L&&i(6,d=L.options),"limits"in L&&i(7,u=L.limits),"height"in L&&i(8,g=L.height)},[n,s,l,o,a,h,d,u,g,y,m,r,c,f,_,p,v,S]}class Fe extends je{constructor(t){super(),Ve(this,t,Ef,Lf,Pe,{type:1,settingKey:11,settingValue:0,disabled:2,block:3,normal:4,placeholder:5,options:6,limits:7,height:8})}}const ir={baseUrl:"http://localhost:8888/",appUrl:"/lab",wsUrl:"",token:""};function Df(e){return e=e||ir.baseUrl,`ws${e.slice(4)}`}function Mf(e){let t,i;return t=new Fe({props:{slot:"input",type:Te.button,settingKey:"Reset",settingValue:e[2].settings.generalSettings.reset.text}}),t.$on("clicked",e[4]),{c(){se(t.$$.fragment)},m(s,r){te(t,s,r),i=!0},p:Re,i(s){i||(W(t.$$.fragment,s),i=!0)},o(s){q(t.$$.fragment,s),i=!1},d(s){ie(t,s)}}}function Tf(e){let t,i;return t=new Ne({props:{title:e[2].settings.generalSettings.reset.title,text:e[2].settings.generalSettings.reset.description,$$slots:{input:[Mf]},$$scope:{ctx:e}}}),{c(){se(t.$$.fragment)},m(s,r){te(t,s,r),i=!0},p(s,r){const n={};r&268435456&&(n.$$scope={dirty:r,ctx:s}),t.$set(n)},i(s){i||(W(t.$$.fragment,s),i=!0)},o(s){q(t.$$.fragment,s),i=!1},d(s){ie(t,s)}}}function Af(e){let t,i;return t=new Fe({props:{slot:"input",type:Te.checkbox,settingKey:"enable",settingValue:e[0].jupyter.server.enable}}),t.$on("changed",e[8]),{c(){se(t.$$.fragment)},m(s,r){te(t,s,r),i=!0},p(s,r){const n={};r&1&&(n.settingValue=s[0].jupyter.server.enable),t.$set(n)},i(s){i||(W(t.$$.fragment,s),i=!0)},o(s){q(t.$$.fragment,s),i=!1},d(s){ie(t,s)}}}function Rf(e){let t,i;return t=new Fe({props:{slot:"input",type:Te.number,settingKey:"delay",settingValue:e[0].jupyter.edit.delay,limits:{min:0,max:1/0,step:25}}}),t.$on("changed",e[9]),{c(){se(t.$$.fragment)},m(s,r){te(t,s,r),i=!0},p(s,r){const n={};r&1&&(n.settingValue=s[0].jupyter.edit.delay),t.$set(n)},i(s){i||(W(t.$$.fragment,s),i=!0)},o(s){q(t.$$.fragment,s),i=!1},d(s){ie(t,s)}}}function Of(e){let t,i;return t=new Fe({props:{slot:"input",type:Te.text,settingKey:"baseUrl",settingValue:e[0].jupyter.server.settings.baseUrl,placeholder:ir.baseUrl,block:!0}}),t.$on("changed",e[10]),{c(){se(t.$$.fragment)},m(s,r){te(t,s,r),i=!0},p(s,r){const n={};r&1&&(n.settingValue=s[0].jupyter.server.settings.baseUrl),t.$set(n)},i(s){i||(W(t.$$.fragment,s),i=!0)},o(s){q(t.$$.fragment,s),i=!1},d(s){ie(t,s)}}}function Bf(e){let t,i;return t=new Fe({props:{slot:"input",type:Te.text,settingKey:"appUrl",settingValue:e[0].jupyter.server.settings.appUrl,placeholder:ir.appUrl,block:!0}}),t.$on("changed",e[11]),{c(){se(t.$$.fragment)},m(s,r){te(t,s,r),i=!0},p(s,r){const n={};r&1&&(n.settingValue=s[0].jupyter.server.settings.appUrl),t.$set(n)},i(s){i||(W(t.$$.fragment,s),i=!0)},o(s){q(t.$$.fragment,s),i=!1},d(s){ie(t,s)}}}function Hf(e){let t,i;return t=new Fe({props:{slot:"input",type:Te.text,settingKey:"wsUrl",settingValue:e[0].jupyter.server.settings.wsUrl,placeholder:e[1],block:!0}}),t.$on("changed",e[12]),{c(){se(t.$$.fragment)},m(s,r){te(t,s,r),i=!0},p(s,r){const n={};r&1&&(n.settingValue=s[0].jupyter.server.settings.wsUrl),r&2&&(n.placeholder=s[1]),t.$set(n)},i(s){i||(W(t.$$.fragment,s),i=!0)},o(s){q(t.$$.fragment,s),i=!1},d(s){ie(t,s)}}}function xf(e){let t,i;return t=new Fe({props:{slot:"input",type:Te.text,settingKey:"token",settingValue:e[0].jupyter.server.settings.token,block:!0}}),t.$on("changed",e[13]),{c(){se(t.$$.fragment)},m(s,r){te(t,s,r),i=!0},p(s,r){const n={};r&1&&(n.settingValue=s[0].jupyter.server.settings.token),t.$set(n)},i(s){i||(W(t.$$.fragment,s),i=!0)},o(s){q(t.$$.fragment,s),i=!1},d(s){ie(t,s)}}}function Pf(e){let t,i;return t=new Fe({props:{slot:"input",type:Te.checkbox,settingKey:"goto",settingValue:e[0].jupyter.execute.goto}}),t.$on("changed",e[14]),{c(){se(t.$$.fragment)},m(s,r){te(t,s,r),i=!0},p(s,r){const n={};r&1&&(n.settingValue=s[0].jupyter.execute.goto),t.$set(n)},i(s){i||(W(t.$$.fragment,s),i=!0)},o(s){q(t.$$.fragment,s),i=!1},d(s){ie(t,s)}}}function If(e){let t,i;return t=new Fe({props:{slot:"input",type:Te.checkbox,settingKey:"input.goto",settingValue:e[0].jupyter.execute.input.goto}}),t.$on("changed",e[15]),{c(){se(t.$$.fragment)},m(s,r){te(t,s,r),i=!0},p(s,r){const n={};r&1&&(n.settingValue=s[0].jupyter.execute.input.goto),t.$set(n)},i(s){i||(W(t.$$.fragment,s),i=!0)},o(s){q(t.$$.fragment,s),i=!1},d(s){ie(t,s)}}}function Nf(e){let t,i;return t=new Fe({props:{slot:"input",type:Te.checkbox,settingKey:"content.stop_on_error",settingValue:e[0].jupyter.execute.content.stop_on_error}}),t.$on("changed",e[16]),{c(){se(t.$$.fragment)},m(s,r){te(t,s,r),i=!0},p(s,r){const n={};r&1&&(n.settingValue=s[0].jupyter.execute.content.stop_on_error),t.$set(n)},i(s){i||(W(t.$$.fragment,s),i=!0)},o(s){q(t.$$.fragment,s),i=!1},d(s){ie(t,s)}}}function Vf(e){let t,i;return t=new Fe({props:{slot:"input",type:Te.checkbox,settingKey:"output.parser.xterm",settingValue:e[0].jupyter.execute.output.parser.xterm}}),t.$on("changed",e[17]),{c(){se(t.$$.fragment)},m(s,r){te(t,s,r),i=!0},p(s,r){const n={};r&1&&(n.settingValue=s[0].jupyter.execute.output.parser.xterm),t.$set(n)},i(s){i||(W(t.$$.fragment,s),i=!0)},o(s){q(t.$$.fragment,s),i=!1},d(s){ie(t,s)}}}function jf(e){let t,i;return t=new Fe({props:{slot:"input",type:Te.checkbox,settingKey:"output.parser.escaped",settingValue:e[0].jupyter.execute.output.parser.escaped}}),t.$on("changed",e[18]),{c(){se(t.$$.fragment)},m(s,r){te(t,s,r),i=!0},p(s,r){const n={};r&1&&(n.settingValue=s[0].jupyter.execute.output.parser.escaped),t.$set(n)},i(s){i||(W(t.$$.fragment,s),i=!0)},o(s){q(t.$$.fragment,s),i=!1},d(s){ie(t,s)}}}function Ff(e){let t,i;return t=new Fe({props:{slot:"input",type:Te.checkbox,settingKey:"output.parser.cntrl",settingValue:e[0].jupyter.execute.output.parser.cntrl}}),t.$on("changed",e[19]),{c(){se(t.$$.fragment)},m(s,r){te(t,s,r),i=!0},p(s,r){const n={};r&1&&(n.settingValue=s[0].jupyter.execute.output.parser.cntrl),t.$set(n)},i(s){i||(W(t.$$.fragment,s),i=!0)},o(s){q(t.$$.fragment,s),i=!1},d(s){ie(t,s)}}}function Uf(e){let t,i;return t=new Fe({props:{slot:"input",type:Te.checkbox,settingKey:"import.parser.xterm",settingValue:e[0].jupyter.import.parser.xterm}}),t.$on("changed",e[20]),{c(){se(t.$$.fragment)},m(s,r){te(t,s,r),i=!0},p(s,r){const n={};r&1&&(n.settingValue=s[0].jupyter.import.parser.xterm),t.$set(n)},i(s){i||(W(t.$$.fragment,s),i=!0)},o(s){q(t.$$.fragment,s),i=!1},d(s){ie(t,s)}}}function Wf(e){let t,i;return t=new Fe({props:{slot:"input",type:Te.checkbox,settingKey:"import.parser.escaped",settingValue:e[0].jupyter.import.parser.escaped}}),t.$on("changed",e[21]),{c(){se(t.$$.fragment)},m(s,r){te(t,s,r),i=!0},p(s,r){const n={};r&1&&(n.settingValue=s[0].jupyter.import.parser.escaped),t.$set(n)},i(s){i||(W(t.$$.fragment,s),i=!0)},o(s){q(t.$$.fragment,s),i=!1},d(s){ie(t,s)}}}function Yf(e){let t,i;return t=new Fe({props:{slot:"input",type:Te.checkbox,settingKey:"import.parser.cntrl",settingValue:e[0].jupyter.import.parser.cntrl}}),t.$on("changed",e[22]),{c(){se(t.$$.fragment)},m(s,r){te(t,s,r),i=!0},p(s,r){const n={};r&1&&(n.settingValue=s[0].jupyter.import.parser.cntrl),t.$set(n)},i(s){i||(W(t.$$.fragment,s),i=!0)},o(s){q(t.$$.fragment,s),i=!1},d(s){ie(t,s)}}}function zf(e){let t,i,s,r,n,l,o,a,h,d,u,g,b,y,m,c,f,_,p,v,S,L,k,C,w,E,R,O,T,x,j,Y,Z,D,B;return i=new Ne({props:{title:e[2].settings.jupyterSettings.globalTab.enable.title,text:e[2].settings.jupyterSettings.globalTab.enable.description,$$slots:{input:[Af]},$$scope:{ctx:e}}}),r=new Ne({props:{title:e[2].settings.jupyterSettings.globalTab.delay.title,text:e[2].settings.jupyterSettings.globalTab.delay.description,$$slots:{input:[Rf]},$$scope:{ctx:e}}}),o=new Ne({props:{title:e[2].settings.jupyterSettings.serviceTab.baseUrl.title,text:e[2].settings.jupyterSettings.serviceTab.baseUrl.description,block:!0,$$slots:{input:[Of]},$$scope:{ctx:e}}}),h=new Ne({props:{title:e[2].settings.jupyterSettings.serviceTab.appUrl.title,text:e[2].settings.jupyterSettings.serviceTab.appUrl.description,block:!0,$$slots:{input:[Bf]},$$scope:{ctx:e}}}),u=new Ne({props:{title:e[2].settings.jupyterSettings.serviceTab.wsUrl.title,text:e[2].settings.jupyterSettings.serviceTab.wsUrl.description,block:!0,$$slots:{input:[Hf]},$$scope:{ctx:e}}}),b=new Ne({props:{title:e[2].settings.jupyterSettings.serviceTab.token.title,text:e[2].settings.jupyterSettings.serviceTab.token.description,block:!0,$$slots:{input:[xf]},$$scope:{ctx:e}}}),c=new Ne({props:{title:e[2].settings.jupyterSettings.executeTab.executeGoto.title,text:e[2].settings.jupyterSettings.executeTab.executeGoto.description,$$slots:{input:[Pf]},$$scope:{ctx:e}}}),_=new Ne({props:{title:e[2].settings.jupyterSettings.executeTab.inputGoto.title,text:e[2].settings.jupyterSettings.executeTab.inputGoto.description,$$slots:{input:[If]},$$scope:{ctx:e}}}),v=new Ne({props:{title:e[2].settings.jupyterSettings.executeTab.stopOnError.title,text:e[2].settings.jupyterSettings.executeTab.stopOnError.description,$$slots:{input:[Nf]},$$scope:{ctx:e}}}),k=new Ne({props:{title:e[2].settings.jupyterSettings.outputTab.xterm.title,text:e[2].settings.jupyterSettings.outputTab.xterm.description,$$slots:{input:[Vf]},$$scope:{ctx:e}}}),w=new Ne({props:{title:e[2].settings.jupyterSettings.outputTab.escaped.title,text:e[2].settings.jupyterSettings.outputTab.escaped.description,$$slots:{input:[jf]},$$scope:{ctx:e}}}),R=new Ne({props:{title:e[2].settings.jupyterSettings.outputTab.cntrl.title,text:e[2].settings.jupyterSettings.outputTab.cntrl.description,$$slots:{input:[Ff]},$$scope:{ctx:e}}}),x=new Ne({props:{title:e[2].settings.jupyterSettings.importTab.xterm.title,text:e[2].settings.jupyterSettings.importTab.xterm.description,$$slots:{input:[Uf]},$$scope:{ctx:e}}}),Y=new Ne({props:{title:e[2].settings.jupyterSettings.importTab.escaped.title,text:e[2].settings.jupyterSettings.importTab.escaped.description,$$slots:{input:[Wf]},$$scope:{ctx:e}}}),D=new Ne({props:{title:e[2].settings.jupyterSettings.importTab.cntrl.title,text:e[2].settings.jupyterSettings.importTab.cntrl.description,$$slots:{input:[Yf]},$$scope:{ctx:e}}}),{c(){t=ne("div"),se(i.$$.fragment),s=ue(),se(r.$$.fragment),n=ue(),l=ne("div"),se(o.$$.fragment),a=ue(),se(h.$$.fragment),d=ue(),se(u.$$.fragment),g=ue(),se(b.$$.fragment),y=ue(),m=ne("div"),se(c.$$.fragment),f=ue(),se(_.$$.fragment),p=ue(),se(v.$$.fragment),S=ue(),L=ne("div"),se(k.$$.fragment),C=ue(),se(w.$$.fragment),E=ue(),se(R.$$.fragment),O=ue(),T=ne("div"),se(x.$$.fragment),j=ue(),se(Y.$$.fragment),Z=ue(),se(D.$$.fragment),V(t,"data-type",e[6].jupyter[0].name),F(t,"fn__none",e[6].jupyter[0].key!==e[27]),V(l,"data-type",e[6].jupyter[1].name),F(l,"fn__none",e[6].jupyter[1].key!==e[27]),V(m,"data-type",e[6].jupyter[2].name),F(m,"fn__none",e[6].jupyter[2].key!==e[27]),V(L,"data-type",e[6].jupyter[3].name),F(L,"fn__none",e[6].jupyter[3].key!==e[27]),V(T,"data-type",e[6].jupyter[4].name),F(T,"fn__none",e[6].jupyter[4].key!==e[27])},m(A,H){J(A,t,H),te(i,t,null),he(t,s),te(r,t,null),J(A,n,H),J(A,l,H),te(o,l,null),he(l,a),te(h,l,null),he(l,d),te(u,l,null),he(l,g),te(b,l,null),J(A,y,H),J(A,m,H),te(c,m,null),he(m,f),te(_,m,null),he(m,p),te(v,m,null),J(A,S,H),J(A,L,H),te(k,L,null),he(L,C),te(w,L,null),he(L,E),te(R,L,null),J(A,O,H),J(A,T,H),te(x,T,null),he(T,j),te(Y,T,null),he(T,Z),te(D,T,null),B=!0},p(A,H){const I={};H&268435457&&(I.$$scope={dirty:H,ctx:A}),i.$set(I);const ee={};H&268435457&&(ee.$$scope={dirty:H,ctx:A}),r.$set(ee),(!B||H&134217792)&&F(t,"fn__none",A[6].jupyter[0].key!==A[27]);const le={};H&268435457&&(le.$$scope={dirty:H,ctx:A}),o.$set(le);const ae={};H&268435457&&(ae.$$scope={dirty:H,ctx:A}),h.$set(ae);const be={};H&268435459&&(be.$$scope={dirty:H,ctx:A}),u.$set(be);const M={};H&268435457&&(M.$$scope={dirty:H,ctx:A}),b.$set(M),(!B||H&134217792)&&F(l,"fn__none",A[6].jupyter[1].key!==A[27]);const N={};H&268435457&&(N.$$scope={dirty:H,ctx:A}),c.$set(N);const K={};H&268435457&&(K.$$scope={dirty:H,ctx:A}),_.$set(K);const z={};H&268435457&&(z.$$scope={dirty:H,ctx:A}),v.$set(z),(!B||H&134217792)&&F(m,"fn__none",A[6].jupyter[2].key!==A[27]);const _e={};H&268435457&&(_e.$$scope={dirty:H,ctx:A}),k.$set(_e);const Q={};H&268435457&&(Q.$$scope={dirty:H,ctx:A}),w.$set(Q);const we={};H&268435457&&(we.$$scope={dirty:H,ctx:A}),R.$set(we),(!B||H&134217792)&&F(L,"fn__none",A[6].jupyter[3].key!==A[27]);const He={};H&268435457&&(He.$$scope={dirty:H,ctx:A}),x.$set(He);const Ue={};H&268435457&&(Ue.$$scope={dirty:H,ctx:A}),Y.$set(Ue);const gt={};H&268435457&&(gt.$$scope={dirty:H,ctx:A}),D.$set(gt),(!B||H&134217792)&&F(T,"fn__none",A[6].jupyter[4].key!==A[27])},i(A){B||(W(i.$$.fragment,A),W(r.$$.fragment,A),W(o.$$.fragment,A),W(h.$$.fragment,A),W(u.$$.fragment,A),W(b.$$.fragment,A),W(c.$$.fragment,A),W(_.$$.fragment,A),W(v.$$.fragment,A),W(k.$$.fragment,A),W(w.$$.fragment,A),W(R.$$.fragment,A),W(x.$$.fragment,A),W(Y.$$.fragment,A),W(D.$$.fragment,A),B=!0)},o(A){q(i.$$.fragment,A),q(r.$$.fragment,A),q(o.$$.fragment,A),q(h.$$.fragment,A),q(u.$$.fragment,A),q(b.$$.fragment,A),q(c.$$.fragment,A),q(_.$$.fragment,A),q(v.$$.fragment,A),q(k.$$.fragment,A),q(w.$$.fragment,A),q(R.$$.fragment,A),q(x.$$.fragment,A),q(Y.$$.fragment,A),q(D.$$.fragment,A),B=!1},d(A){A&&(G(t),G(n),G(l),G(y),G(m),G(S),G(L),G(O),G(T)),ie(i),ie(r),ie(o),ie(h),ie(u),ie(b),ie(c),ie(_),ie(v),ie(k),ie(w),ie(R),ie(x),ie(Y),ie(D)}}}function qf(e){let t,i;return t=new cf({props:{focus:Xf,tabs:e[6].jupyter,$$slots:{default:[zf,({focus:s})=>({27:s}),({focus:s})=>s?134217728:0]},$$scope:{ctx:e}}}),{c(){se(t.$$.fragment)},m(s,r){te(t,s,r),i=!0},p(s,r){const n={};r&402653187&&(n.$$scope={dirty:r,ctx:s}),t.$set(n)},i(s){i||(W(t.$$.fragment,s),i=!0)},o(s){q(t.$$.fragment,s),i=!1},d(s){ie(t,s)}}}function Zf(e){let t,i;return t=new Fe({props:{slot:"input",type:Te.text,settingKey:"fontFamily",settingValue:e[0].xterm.options.fontFamily,placeholder:"--b3-font-family-code"}}),t.$on("changed",e[23]),{c(){se(t.$$.fragment)},m(s,r){te(t,s,r),i=!0},p(s,r){const n={};r&1&&(n.settingValue=s[0].xterm.options.fontFamily),t.$set(n)},i(s){i||(W(t.$$.fragment,s),i=!0)},o(s){q(t.$$.fragment,s),i=!1},d(s){ie(t,s)}}}function Kf(e){let t,i;return t=new Ne({props:{title:e[2].settings.xtermSettings.fontFamily.title,text:e[2].settings.xtermSettings.fontFamily.description,$$slots:{input:[Zf]},$$scope:{ctx:e}}}),{c(){se(t.$$.fragment)},m(s,r){te(t,s,r),i=!0},p(s,r){const n={};r&268435457&&(n.$$scope={dirty:r,ctx:s}),t.$set(n)},i(s){i||(W(t.$$.fragment,s),i=!0)},o(s){q(t.$$.fragment,s),i=!1},d(s){ie(t,s)}}}function $f(e){let t,i,s,r,n,l;return t=new Hs({props:{display:e[5][0].key===e[26],$$slots:{default:[Tf]},$$scope:{ctx:e}}}),s=new Hs({props:{display:e[5][1].key===e[26],$$slots:{default:[qf]},$$scope:{ctx:e}}}),n=new Hs({props:{display:e[5][2].key===e[26],$$slots:{default:[Kf]},$$scope:{ctx:e}}}),{c(){se(t.$$.fragment),i=ue(),se(s.$$.fragment),r=ue(),se(n.$$.fragment)},m(o,a){te(t,o,a),J(o,i,a),te(s,o,a),J(o,r,a),te(n,o,a),l=!0},p(o,a){const h={};a&67108864&&(h.display=o[5][0].key===o[26]),a&268435456&&(h.$$scope={dirty:a,ctx:o}),t.$set(h);const d={};a&67108864&&(d.display=o[5][1].key===o[26]),a&268435459&&(d.$$scope={dirty:a,ctx:o}),s.$set(d);const u={};a&67108864&&(u.display=o[5][2].key===o[26]),a&268435457&&(u.$$scope={dirty:a,ctx:o}),n.$set(u)},i(o){l||(W(t.$$.fragment,o),W(s.$$.fragment,o),W(n.$$.fragment,o),l=!0)},o(o){q(t.$$.fragment,o),q(s.$$.fragment,o),q(n.$$.fragment,o),l=!1},d(o){o&&(G(i),G(r)),ie(t,o),ie(s,o),ie(n,o)}}}function Gf(e){let t,i;return t=new z1({props:{panels:e[5],focus:Jf,$$slots:{default:[$f,({focus:s})=>({26:s}),({focus:s})=>s?67108864:0]},$$scope:{ctx:e}}}),{c(){se(t.$$.fragment)},m(s,r){te(t,s,r),i=!0},p(s,[r]){const n={};r&335544323&&(n.$$scope={dirty:r,ctx:s}),t.$set(n)},i(s){i||(W(t.$$.fragment,s),i=!0)},o(s){q(t.$$.fragment,s),i=!1},d(s){ie(t,s)}}}let Jf=0,Xf=0;function Qf(e,t,i){let s,{config:r}=t,{plugin:n}=t;const l=n.i18n;async function o(R=!1){await n.updateConfig(r,R)}function a(){n.siyuan.confirm(l.settings.generalSettings.reset.title,l.settings.generalSettings.reset.description,async()=>{await n.resetConfig(),globalThis.location.reload()})}const h=[{key:0,text:l.settings.generalSettings.title,name:l.settings.generalSettings.title,icon:"#iconSettings"},{key:1,text:l.settings.jupyterSettings.title,name:l.settings.jupyterSettings.title,icon:"#icon-jupyter-client"},{key:2,text:l.settings.xtermSettings.title,name:l.settings.xtermSettings.title,icon:"#icon-jupyter-client-terminal"}],d={jupyter:[{key:0,text:l.settings.jupyterSettings.globalTab.title,name:l.settings.jupyterSettings.globalTab.title,icon:"⚙"},{key:1,text:l.settings.jupyterSettings.serviceTab.title,name:l.settings.jupyterSettings.serviceTab.title,icon:"🌐"},{key:2,text:l.settings.jupyterSettings.executeTab.title,name:l.settings.jupyterSettings.executeTab.title,icon:"▶"},{key:3,text:l.settings.jupyterSettings.outputTab.title,name:l.settings.jupyterSettings.outputTab.title,icon:"🖨️"},{key:4,text:l.settings.jupyterSettings.importTab.title,name:l.settings.jupyterSettings.importTab.title,icon:"📤︎"}]},u=async R=>{i(0,r.jupyter.server.enable=R.detail.value,r),await o(!0)},g=async R=>{i(0,r.jupyter.edit.delay=R.detail.value,r),await o()},b=async R=>{i(0,r.jupyter.server.settings.baseUrl=R.detail.value,r),await o(!0)},y=async R=>{i(0,r.jupyter.server.settings.appUrl=R.detail.value,r),await o(!0)},m=async R=>{i(0,r.jupyter.server.settings.wsUrl=R.detail.value,r),await o(!0)},c=async R=>{i(0,r.jupyter.server.settings.token=R.detail.value,r),await o(!0)},f=async R=>{i(0,r.jupyter.execute.goto=R.detail.value,r),await o()},_=async R=>{i(0,r.jupyter.execute.input.goto=R.detail.value,r),await o()},p=async R=>{i(0,r.jupyter.execute.content.stop_on_error=R.detail.value,r),await o()},v=async R=>{i(0,r.jupyter.execute.output.parser.xterm=R.detail.value,r),await o()},S=async R=>{i(0,r.jupyter.execute.output.parser.escaped=R.detail.value,r),await o()},L=async R=>{i(0,r.jupyter.execute.output.parser.cntrl=R.detail.value,r),await o()},k=async R=>{i(0,r.jupyter.import.parser.xterm=R.detail.value,r),await o()},C=async R=>{i(0,r.jupyter.import.parser.escaped=R.detail.value,r),await o()},w=async R=>{i(0,r.jupyter.import.parser.cntrl=R.detail.value,r),await o()},E=async R=>{i(0,r.xterm.options.fontFamily=R.detail.value,r),await o()};return e.$$set=R=>{"config"in R&&i(0,r=R.config),"plugin"in R&&i(7,n=R.plugin)},e.$$.update=()=>{e.$$.dirty&1&&i(1,s=Df(r.jupyter.server.settings.baseUrl))},[r,s,l,o,a,h,d,n,u,g,b,y,m,c,f,_,p,v,S,L,k,C,w,E]}class ed extends je{constructor(t){super(),Ve(this,t,Qf,Gf,Pe,{config:0,plugin:7})}}const wi=[];function ye(e,t=Re){let i;const s=new Set;function r(o){if(Pe(e,o)&&(e=o,i)){const a=!wi.length;for(const h of s)h[1](),wi.push(h,e);if(a){for(let h=0;h<wi.length;h+=2)wi[h][0](wi[h+1]);wi.length=0}}}function n(o){r(o(e))}function l(o,a=Re){const h=[o,a];return s.add(h),s.size===1&&(i=t(r,n)||Re),o(e),()=>{s.delete(h),s.size===0&&i&&(i(),i=null)}}return{set:r,update:n,subscribe:l}}function Bo(e){let t,i;return t=new Rt({props:{icon:e[0]}}),{c(){se(t.$$.fragment)},m(s,r){te(t,s,r),i=!0},p(s,r){const n={};r&1&&(n.icon=s[0]),t.$set(n)},i(s){i||(W(t.$$.fragment,s),i=!0)},o(s){q(t.$$.fragment,s),i=!1},d(s){ie(t,s)}}}function Ho(e){let t;return{c(){t=ft(e[1])},m(i,s){J(i,t,s)},p(i,s){s&2&&Pt(t,i[1])},d(i){i&&G(t)}}}function td(e){let t,i,s,r=e[0]&&Bo(e),n=e[1]&&Ho(e);return{c(){t=ne("div"),r&&r.c(),i=ue(),n&&n.c(),V(t,"class","block__logo")},m(l,o){J(l,t,o),r&&r.m(t,null),he(t,i),n&&n.m(t,null),s=!0},p(l,[o]){l[0]?r?(r.p(l,o),o&1&&W(r,1)):(r=Bo(l),r.c(),W(r,1),r.m(t,i)):r&&(Ge(),q(r,1,1,()=>{r=null}),Je()),l[1]?n?n.p(l,o):(n=Ho(l),n.c(),n.m(t,null)):n&&(n.d(1),n=null)},i(l){s||(W(r),s=!0)},o(l){q(r),s=!1},d(l){l&&G(t),r&&r.d(),n&&n.d()}}}function id(e,t,i){let{icon:s=""}=t,{title:r=""}=t;return e.$$set=n=>{"icon"in n&&i(0,s=n.icon),"title"in n&&i(1,r=n.title)},[s,r]}class sd extends je{constructor(t){super(),Ve(this,t,id,td,Pe,{icon:0,title:1})}}var vi=(e=>(e.none="",e.n="b3-tooltips__n",e.ne="b3-tooltips__ne",e.e="b3-tooltips__e",e.se="b3-tooltips__se",e.s="b3-tooltips__s",e.sw="b3-tooltips__sw",e.w="b3-tooltips__w",e.nw="b3-tooltips__nw",e))(vi||{});function Dr(e){let t,i,s,r,n,l;i=new Rt({props:{icon:e[0]}});let o=[{role:"button"},{"data-type":e[5]},{"aria-label":e[6]},{class:s="block__icon fn__flex-center "+e[7]}],a={};for(let h=0;h<o.length;h+=1)a=bi(a,o[h]);return{c(){t=ne(e[8]),se(i.$$.fragment),ao(e[8])(t,a),F(t,"fn__none",e[2]),F(t,"block__icon--show",e[1]),F(t,"toolbar__item--active",e[3]),F(t,"toolbar__item--disabled",e[4]),F(t,"b3-tooltips",e[7]!==vi.none)},m(h,d){J(h,t,d),te(i,t,null),e[14](t),r=!0,n||(l=[ve(t,"click",e[12]),ve(t,"dblclick",e[13]),ve(t,"click",e[15])],n=!0)},p(h,d){const u={};d&1&&(u.icon=h[0]),i.$set(u),ao(h[8])(t,a=ji(o,[{role:"button"},(!r||d&32)&&{"data-type":h[5]},(!r||d&64)&&{"aria-label":h[6]},(!r||d&128&&s!==(s="block__icon fn__flex-center "+h[7]))&&{class:s}])),F(t,"fn__none",h[2]),F(t,"block__icon--show",h[1]),F(t,"toolbar__item--active",h[3]),F(t,"toolbar__item--disabled",h[4]),F(t,"b3-tooltips",h[7]!==vi.none)},i(h){r||(W(i.$$.fragment,h),r=!0)},o(h){q(i.$$.fragment,h),r=!1},d(h){h&&G(t),ie(i),e[14](null),n=!1,qe(l)}}}function rd(e){let t=e[8],i,s=e[8]&&Dr(e);return{c(){s&&s.c(),i=pt()},m(r,n){s&&s.m(r,n),J(r,i,n)},p(r,[n]){r[8]?t?Pe(t,r[8])?(s.d(1),s=Dr(r),t=r[8],s.c(),s.m(i.parentNode,i)):s.p(r,n):(s=Dr(r),t=r[8],s.c(),s.m(i.parentNode,i)):t&&(s.d(1),s=null,t=r[8])},i:Re,o(r){q(s,r)},d(r){r&&G(i),s&&s.d(r)}}}function nd(e,t,i){let{icon:s="#iconHelp"}=t,{tag:r="button"}=t,{show:n=!0}=t,{none:l=!1}=t,{active:o=!1}=t,{disabled:a=!1}=t,{type:h=""}=t,{ariaLabel:d=""}=t,{tooltipsDirection:u=vi.none}=t,{onClick:g=()=>null}=t,b;const y={icon:ye(s),show:ye(n),none:ye(l),active:ye(o),disabled:ye(a),type:ye(h),ariaLabel:ye(d),tooltipsDirection:ye(u)},m=[y.icon.subscribe(v=>i(0,s=v)),y.show.subscribe(v=>i(1,n=v)),y.none.subscribe(v=>i(2,l=v)),y.active.subscribe(v=>i(3,o=v)),y.disabled.subscribe(v=>i(4,a=v)),y.type.subscribe(v=>i(5,h=v)),y.ariaLabel.subscribe(v=>i(6,d=v)),y.tooltipsDirection.subscribe(v=>i(7,u=v))];mn(()=>{m.forEach(v=>v())});function c(v){Ee.call(this,e,v)}function f(v){Ee.call(this,e,v)}function _(v){It[v?"unshift":"push"](()=>{b=v,i(10,b)})}const p=v=>g(v,b,y);return e.$$set=v=>{"icon"in v&&i(0,s=v.icon),"tag"in v&&i(8,r=v.tag),"show"in v&&i(1,n=v.show),"none"in v&&i(2,l=v.none),"active"in v&&i(3,o=v.active),"disabled"in v&&i(4,a=v.disabled),"type"in v&&i(5,h=v.type),"ariaLabel"in v&&i(6,d=v.ariaLabel),"tooltipsDirection"in v&&i(7,u=v.tooltipsDirection),"onClick"in v&&i(9,g=v.onClick)},e.$$.update=()=>{e.$$.dirty&1&&y.icon.set(s),e.$$.dirty&2&&y.show.set(n),e.$$.dirty&4&&y.none.set(l),e.$$.dirty&8&&y.active.set(o),e.$$.dirty&16&&y.disabled.set(a),e.$$.dirty&32&&y.type.set(h),e.$$.dirty&64&&y.ariaLabel.set(d),e.$$.dirty&128&&y.tooltipsDirection.set(u)},[s,n,l,o,a,h,d,u,r,g,b,y,c,f,_,p]}class od extends je{constructor(t){super(),Ve(this,t,nd,rd,Pe,{icon:0,tag:8,show:1,none:2,active:3,disabled:4,type:5,ariaLabel:6,tooltipsDirection:7,onClick:9})}}function xo(e,t,i){const s=e.slice();return s[5]=t[i],s[7]=i,s}const ad=e=>({icon:e&4}),Po=e=>({icon:e[5]}),ld=e=>({}),Io=e=>({});function No(e){let t,i;return t=new sd({props:{icon:e[0],title:e[1]}}),{c(){se(t.$$.fragment)},m(s,r){te(t,s,r),i=!0},p(s,r){const n={};r&1&&(n.icon=s[0]),r&2&&(n.title=s[1]),t.$set(n)},i(s){i||(W(t.$$.fragment,s),i=!0)},o(s){q(t.$$.fragment,s),i=!1},d(s){ie(t,s)}}}function cd(e){let t,i,s=(e[0]||e[1])&&No(e);return{c(){s&&s.c(),t=pt()},m(r,n){s&&s.m(r,n),J(r,t,n),i=!0},p(r,n){r[0]||r[1]?s?(s.p(r,n),n&3&&W(s,1)):(s=No(r),s.c(),W(s,1),s.m(t.parentNode,t)):s&&(Ge(),q(s,1,1,()=>{s=null}),Je())},i(r){i||(W(s),i=!0)},o(r){q(s),i=!1},d(r){r&&G(t),s&&s.d(r)}}}function hd(e){let t,i,s;const r=[e[5]];let n={};for(let l=0;l<r.length;l+=1)n=bi(n,r[l]);return t=new od({props:n}),{c(){se(t.$$.fragment),i=ue()},m(l,o){te(t,l,o),J(l,i,o),s=!0},p(l,o){const a=o&4?ji(r,[_s(l[5])]):{};t.$set(a)},i(l){s||(W(t.$$.fragment,l),s=!0)},o(l){q(t.$$.fragment,l),s=!1},d(l){l&&G(i),ie(t,l)}}}function Vo(e,t){let i,s,r;const n=t[4].icon,l=it(n,t,t[3],Po),o=l||hd(t);return{key:e,first:null,c(){i=ne("span"),s=ue(),o&&o.c(),V(i,"class","fn__space"),F(i,"fn__flex-1",t[7]===0),this.first=i},m(a,h){J(a,i,h),J(a,s,h),o&&o.m(a,h),r=!0},p(a,h){t=a,(!r||h&4)&&F(i,"fn__flex-1",t[7]===0),l?l.p&&(!r||h&12)&&rt(l,n,t,t[3],r?st(n,t[3],h,ad):nt(t[3]),Po):o&&o.p&&(!r||h&4)&&o.p(t,r?h:-1)},i(a){r||(W(o,a),r=!0)},o(a){q(o,a),r=!1},d(a){a&&(G(i),G(s)),o&&o.d(a)}}}function ud(e){let t,i,s=[],r=new Map,n;const l=e[4].logo,o=it(l,e,e[3],Io),a=o||cd(e);let h=kt(e[2]);const d=u=>u[7];for(let u=0;u<h.length;u+=1){let g=xo(e,h,u),b=d(g);r.set(b,s[u]=Vo(b,g))}return{c(){t=ne("div"),a&&a.c(),i=ue();for(let u=0;u<s.length;u+=1)s[u].c();V(t,"class","block__icons")},m(u,g){J(u,t,g),a&&a.m(t,null),he(t,i);for(let b=0;b<s.length;b+=1)s[b]&&s[b].m(t,null);n=!0},p(u,[g]){o?o.p&&(!n||g&8)&&rt(o,l,u,u[3],n?st(l,u[3],g,ld):nt(u[3]),Io):a&&a.p&&(!n||g&3)&&a.p(u,n?g:-1),g&12&&(h=kt(u[2]),Ge(),s=Vi(s,g,d,1,u,h,r,t,ds,Vo,null,xo),Je())},i(u){if(!n){W(a,u);for(let g=0;g<h.length;g+=1)W(s[g]);n=!0}},o(u){q(a,u);for(let g=0;g<s.length;g+=1)q(s[g]);n=!1},d(u){u&&G(t),a&&a.d(u);for(let g=0;g<s.length;g+=1)s[g].d()}}}function fd(e,t,i){let{$$slots:s={},$$scope:r}=t,{logo:n=""}=t,{title:l=""}=t,{icons:o=[]}=t;return e.$$set=a=>{"logo"in a&&i(0,n=a.logo),"title"in a&&i(1,l=a.title),"icons"in a&&i(2,o=a.icons),"$$scope"in a&&i(3,r=a.$$scope)},[n,l,o,r,s]}class ul extends je{constructor(t){super(),Ve(this,t,fd,ud,Pe,{logo:0,title:1,icons:2})}}var ge=(e=>(e.Root="navigation-root",e.File="navigation-file",e.Folder="navigation-folder",e))(ge||{});function dd(e){let t,i;return t=new Rt({props:{icon:"#iconHelp",id:e[1],className:e[2],style:e[3]}}),{c(){se(t.$$.fragment)},m(s,r){te(t,s,r),i=!0},p(s,r){const n={};r&2&&(n.id=s[1]),r&4&&(n.className=s[2]),r&8&&(n.style=s[3]),t.$set(n)},i(s){i||(W(t.$$.fragment,s),i=!0)},o(s){q(t.$$.fragment,s),i=!1},d(s){ie(t,s)}}}function _d(e){let t;return{c(){t=ft(e[0])},m(i,s){J(i,t,s)},p(i,s){s&1&&Pt(t,i[0])},i:Re,o:Re,d(i){i&&G(t)}}}function pd(e){let t,i;return{c(){t=new Ni(!1),i=pt(),t.a=i},m(s,r){t.m(e[0],s,r),J(s,i,r)},p(s,r){r&1&&t.p(s[0])},i:Re,o:Re,d(s){s&&(G(i),t.d())}}}function gd(e){let t,i;return{c(){t=ne("img"),V(t,"alt","icon"),V(t,"style",e[3]),oo(t.src,i=e[0])||V(t,"src",i),V(t,"data-id",e[1]),V(t,"class",e[2]),F(t,"popover__block",xi.id.test(e[1])),F(t,"b3-list-item__icon",!0)},m(s,r){J(s,t,r)},p(s,r){r&8&&V(t,"style",s[3]),r&1&&!oo(t.src,i=s[0])&&V(t,"src",i),r&2&&V(t,"data-id",s[1]),r&4&&V(t,"class",s[2]),r&6&&F(t,"popover__block",xi.id.test(s[1])),r&4&&F(t,"b3-list-item__icon",!0)},i:Re,o:Re,d(s){s&&G(t)}}}function md(e){let t,i;return t=new Rt({props:{icon:e[0],id:e[1],className:e[2],style:e[3]}}),{c(){se(t.$$.fragment)},m(s,r){te(t,s,r),i=!0},p(s,r){const n={};r&1&&(n.icon=s[0]),r&2&&(n.id=s[1]),r&4&&(n.className=s[2]),r&8&&(n.style=s[3]),t.$set(n)},i(s){i||(W(t.$$.fragment,s),i=!0)},o(s){q(t.$$.fragment,s),i=!1},d(s){ie(t,s)}}}function vd(e){let t,i,s,r,n,l,o;const a=[md,gd,pd,_d,dd],h=[];function d(u,g){return g&1&&(t=null),g&1&&(i=null),g&1&&(s=null),t==null&&(t=!!u[0].startsWith("#")),t?0:(i==null&&(i=!!(u[0].startsWith("/")||u[0].startsWith("http")||u[0].startsWith("data")||u[0].startsWith("blob"))),i?1:(s==null&&(s=!!(u[0].startsWith("<")&&u[0].endsWith(">"))),s?2:u[0]?3:4))}return r=d(e,-1),n=h[r]=a[r](e),{c(){n.c(),l=pt()},m(u,g){h[r].m(u,g),J(u,l,g),o=!0},p(u,[g]){let b=r;r=d(u,g),r===b?h[r].p(u,g):(Ge(),q(h[b],1,1,()=>{h[b]=null}),Je(),n=h[r],n?n.p(u,g):(n=h[r]=a[r](u),n.c()),W(n,1),n.m(l.parentNode,l))},i(u){o||(W(n),o=!0)},o(u){q(n),o=!1},d(u){u&&G(l),h[r].d(u)}}}function bd(e,t,i){let{icon:s}=t,{id:r=""}=t,{className:n=""}=t,{style:l=""}=t;return e.$$set=o=>{"icon"in o&&i(0,s=o.icon),"id"in o&&i(1,r=o.id),"className"in o&&i(2,n=o.className),"style"in o&&i(3,l=o.style)},[s,r,n,l]}class vn extends je{constructor(t){super(),Ve(this,t,bd,vd,Pe,{icon:0,id:1,className:2,style:3})}}function yd(e){let t,i;return{c(){t=Gt("svg"),i=Gt("use"),mi(i,"xlink:href",e[1]),V(t,"style",e[3]),V(t,"class",e[2]),F(t,"b3-list-item__arrow--open",e[0])},m(s,r){J(s,t,r),he(t,i)},p(s,[r]){r&2&&mi(i,"xlink:href",s[1]),r&8&&V(t,"style",s[3]),r&4&&V(t,"class",s[2]),r&5&&F(t,"b3-list-item__arrow--open",s[0])},i:Re,o:Re,d(s){s&&G(t)}}}function Cd(e,t,i){let{open:s=!1}=t,{icon:r="#iconRight"}=t,{className:n="b3-list-item__arrow"}=t,{style:l=void 0}=t;return e.$$set=o=>{"open"in o&&i(0,s=o.open),"icon"in o&&i(1,r=o.icon),"className"in o&&i(2,n=o.className),"style"in o&&i(3,l=o.style)},[s,r,n,l]}class Sd extends je{constructor(t){super(),Ve(this,t,Cd,yd,Pe,{open:0,icon:1,className:2,style:3})}}function jo(e,t,i){const s=e.slice();return s[59]=t[i],s[61]=i,s}function wd(e){let t,i;return t=new Rt({props:{icon:"#iconHelp",id:e[21]}}),{c(){se(t.$$.fragment)},m(s,r){te(t,s,r),i=!0},p(s,r){const n={};r[0]&2097152&&(n.id=s[21]),t.$set(n)},i(s){i||(W(t.$$.fragment,s),i=!0)},o(s){q(t.$$.fragment,s),i=!1},d(s){ie(t,s)}}}function kd(e){let t,i;return t=new Rt({props:{icon:"#iconFilesRoot",id:e[21]}}),{c(){se(t.$$.fragment)},m(s,r){te(t,s,r),i=!0},p(s,r){const n={};r[0]&2097152&&(n.id=s[21]),t.$set(n)},i(s){i||(W(t.$$.fragment,s),i=!0)},o(s){q(t.$$.fragment,s),i=!1},d(s){ie(t,s)}}}function Ld(e){let t,i;return t=new Rt({props:{icon:"#iconFolder",id:e[21]}}),{c(){se(t.$$.fragment)},m(s,r){te(t,s,r),i=!0},p(s,r){const n={};r[0]&2097152&&(n.id=s[21]),t.$set(n)},i(s){i||(W(t.$$.fragment,s),i=!0)},o(s){q(t.$$.fragment,s),i=!1},d(s){ie(t,s)}}}function Ed(e){let t,i;return t=new Rt({props:{icon:"#iconFile",id:e[21]}}),{c(){se(t.$$.fragment)},m(s,r){te(t,s,r),i=!0},p(s,r){const n={};r[0]&2097152&&(n.id=s[21]),t.$set(n)},i(s){i||(W(t.$$.fragment,s),i=!0)},o(s){q(t.$$.fragment,s),i=!1},d(s){ie(t,s)}}}function Dd(e){let t,i;return t=new vn({props:{icon:e[19],id:e[21]}}),{c(){se(t.$$.fragment)},m(s,r){te(t,s,r),i=!0},p(s,r){const n={};r[0]&524288&&(n.icon=s[19]),r[0]&2097152&&(n.id=s[21]),t.$set(n)},i(s){i||(W(t.$$.fragment,s),i=!0)},o(s){q(t.$$.fragment,s),i=!1},d(s){ie(t,s)}}}function Fo(e){let t,i,s;return i=new vn({props:{icon:e[26]}}),{c(){t=ne("span"),se(i.$$.fragment),V(t,"data-type","symlink"),V(t,"aria-label",e[27]),V(t,"class","symblink b3-list-item__action"),F(t,"b3-tooltips",!!e[27]),F(t,"b3-tooltips__sw",!!e[27]&&e[0]===ge.Root),F(t,"b3-tooltips__nw",!!e[27]&&e[0]!==ge.Root)},m(r,n){J(r,t,n),te(i,t,null),s=!0},p(r,n){const l={};n[0]&67108864&&(l.icon=r[26]),i.$set(l),(!s||n[0]&134217728)&&V(t,"aria-label",r[27]),(!s||n[0]&134217728)&&F(t,"b3-tooltips",!!r[27]),(!s||n[0]&134217729)&&F(t,"b3-tooltips__sw",!!r[27]&&r[0]===ge.Root),(!s||n[0]&134217729)&&F(t,"b3-tooltips__nw",!!r[27]&&r[0]!==ge.Root)},i(r){s||(W(i.$$.fragment,r),s=!0)},o(r){q(i.$$.fragment,r),s=!1},d(r){r&&G(t),ie(i)}}}function Uo(e){let t,i;return{c(){t=ne("span"),i=ft(e[28]),V(t,"aria-label",e[29]),V(t,"class","counter"),F(t,"b3-tooltips",!!e[29]),F(t,"b3-tooltips__sw",!!e[29]&&e[0]===ge.Root),F(t,"b3-tooltips__nw",!!e[29]&&e[0]!==ge.Root)},m(s,r){J(s,t,r),he(t,i)},p(s,r){r[0]&268435456&&Pt(i,s[28]),r[0]&536870912&&V(t,"aria-label",s[29]),r[0]&536870912&&F(t,"b3-tooltips",!!s[29]),r[0]&536870913&&F(t,"b3-tooltips__sw",!!s[29]&&s[0]===ge.Root),r[0]&536870913&&F(t,"b3-tooltips__nw",!!s[29]&&s[0]!==ge.Root)},d(s){s&&G(t)}}}function Wo(e){let t,i=[],s=new Map,r=`calc(12px + ${e[4]} * ${e[3]})`,n,l=kt(e[16]);const o=a=>a[59].path;for(let a=0;a<l.length;a+=1){let h=jo(e,l,a),d=o(h);s.set(d,i[a]=Yo(d,h))}return{c(){t=ne("ul");for(let a=0;a<i.length;a+=1)i[a].c();V(t,"class","node-list svelte-1oapgz1"),F(t,"dragging",e[9]),F(t,"dragover",e[13]),F(t,"fn__none",e[7]),bt(t,"--monaco-editor-explorer-indent-left",r)},m(a,h){J(a,t,h);for(let d=0;d<i.length;d+=1)i[d]&&i[d].m(t,null);e[54](t),n=!0},p(a,h){h[0]&65544&&(l=kt(a[16]),Ge(),i=Vi(i,h,o,1,a,l,s,t,ds,Yo,null,jo),Je()),(!n||h[0]&512)&&F(t,"dragging",a[9]),(!n||h[0]&8192)&&F(t,"dragover",a[13]),(!n||h[0]&128)&&F(t,"fn__none",a[7]),h[0]&24&&r!==(r=`calc(12px + ${a[4]} * ${a[3]})`)&&bt(t,"--monaco-editor-explorer-indent-left",r)},i(a){if(!n){for(let h=0;h<l.length;h+=1)W(i[h]);n=!0}},o(a){for(let h=0;h<i.length;h+=1)q(i[h]);n=!1},d(a){a&&G(t);for(let h=0;h<i.length;h+=1)i[h].d();e[54](null)}}}function Yo(e,t){let i,s,r;const n=[{depth:t[3]+1},t[59]];let l={};for(let o=0;o<n.length;o+=1)l=bi(l,n[o]);return s=new fl({props:l}),s.$on("open",t[44]),s.$on("fold",t[45]),s.$on("menu",t[46]),s.$on("unfold",t[47]),s.$on("dragstart",t[48]),s.$on("dragend",t[49]),s.$on("dragenter",t[50]),s.$on("dragover",t[51]),s.$on("dragleave",t[52]),s.$on("drop",t[53]),{key:e,first:null,c(){i=pt(),se(s.$$.fragment),this.first=i},m(o,a){J(o,i,a),te(s,o,a),r=!0},p(o,a){t=o;const h=a[0]&65544?ji(n,[a[0]&8&&{depth:t[3]+1},a[0]&65536&&_s(t[59])]):{};s.$set(h)},i(o){r||(W(s.$$.fragment,o),r=!0)},o(o){q(s.$$.fragment,o),r=!1},d(o){o&&G(i),ie(s,o)}}}function Md(e){let t,i,s,r=`calc(4px + ${e[4]} * ${e[3]})`,n,l,o,a,h,d,u,g,b,y,m,c,f=!Number.isNaN(e[28]),_,p,v,S,L;s=new Sd({props:{open:!e[7],icon:e[17]}});const k=[Dd,Ed,Ld,kd,wd],C=[];function w(T,x){return T[19]?0:T[0]===ge.File?1:T[0]===ge.Folder?2:T[0]===ge.Root?3:4}o=w(e),a=C[o]=k[o](e),y=new vn({props:{icon:e[24]}});let E=e[8]&&Fo(e),R=f&&Uo(e),O=e[16]&&Wo(e);return{c(){t=ne("li"),i=ne("span"),se(s.$$.fragment),n=ue(),l=ne("span"),a.c(),h=ue(),d=ne("span"),u=ft(e[22]),g=ue(),b=ne("span"),se(y.$$.fragment),m=ue(),E&&E.c(),c=ue(),R&&R.c(),_=ue(),O&&O.c(),p=pt(),V(i,"role","button"),V(i,"aria-label",e[18]),V(i,"class","toggle b3-list-item__toggle b3-list-item__toggle--hl"),F(i,"b3-tooltips",!!e[18]),F(i,"b3-tooltips__se",!!e[18]&&e[0]===ge.Root),F(i,"b3-tooltips__ne",!!e[18]&&e[0]!==ge.Root),F(i,"fn__hidden",e[0]===ge.File),bt(i,"padding-left",r),V(l,"aria-label",e[20]),V(l,"class","icon b3-list-item__icon"),F(l,"b3-tooltips",!!e[20]),F(l,"b3-tooltips__se",!!e[20]&&e[0]===ge.Root),F(l,"b3-tooltips__ne",!!e[20]&&e[0]!==ge.Root),V(d,"aria-label",e[23]),V(d,"class","text b3-list-item__text"),F(d,"ariaLabel",!!e[23]),F(d,"b3-tooltips__se",!!e[23]&&e[0]===ge.Root),F(d,"b3-tooltips__ne",!!e[23]&&e[0]!==ge.Root),V(b,"role","button"),V(b,"data-type","more"),V(b,"aria-label",e[25]),V(b,"class","menu b3-list-item__action"),F(b,"b3-tooltips",!!e[25]),F(b,"b3-tooltips__sw",!!e[25]&&e[0]===ge.Root),F(b,"b3-tooltips__nw",!!e[25]&&e[0]!==ge.Root),V(t,"draggable",e[10]),V(t,"title",e[15]),V(t,"data-type",e[0]),V(t,"data-name",e[1]),V(t,"data-path",e[2]),V(t,"data-depth",e[3]),V(t,"data-directory",e[5]),V(t,"class","node b3-list-item svelte-1oapgz1"),F(t,"dragging",e[9]),F(t,"dragover",e[13]),F(t,"dragover__top",e[12]),F(t,"dragover__bottom",e[14]),F(t,"b3-list-item--focus",e[6]),F(t,"b3-list-item--hide-action",e[11])},m(T,x){J(T,t,x),he(t,i),te(s,i,null),he(t,n),he(t,l),C[o].m(l,null),he(t,h),he(t,d),he(d,u),he(t,g),he(t,b),te(y,b,null),he(t,m),E&&E.m(t,null),he(t,c),R&&R.m(t,null),e[43](t),J(T,_,x),O&&O.m(T,x),J(T,p,x),v=!0,S||(L=[ve(i,"click",Ht(si(e[33]))),ve(b,"click",Ht(si(e[34]))),ve(t,"dragstart",Ht(e[35])),ve(t,"dragend",Ht(e[36])),ve(t,"dragenter",Ht(si(e[37]))),ve(t,"dragover",Ht(si(e[38]))),ve(t,"dragleave",Ht(si(e[39]))),ve(t,"drop",Ht(si(e[40]))),ve(t,"click",Ht(si(e[32]))),ve(t,"contextmenu",Ht(si(e[34])))],S=!0)},p(T,x){const j={};x[0]&128&&(j.open=!T[7]),x[0]&131072&&(j.icon=T[17]),s.$set(j),(!v||x[0]&262144)&&V(i,"aria-label",T[18]),(!v||x[0]&262144)&&F(i,"b3-tooltips",!!T[18]),(!v||x[0]&262145)&&F(i,"b3-tooltips__se",!!T[18]&&T[0]===ge.Root),(!v||x[0]&262145)&&F(i,"b3-tooltips__ne",!!T[18]&&T[0]!==ge.Root),(!v||x[0]&1)&&F(i,"fn__hidden",T[0]===ge.File),x[0]&24&&r!==(r=`calc(4px + ${T[4]} * ${T[3]})`)&&bt(i,"padding-left",r);let Y=o;o=w(T),o===Y?C[o].p(T,x):(Ge(),q(C[Y],1,1,()=>{C[Y]=null}),Je(),a=C[o],a?a.p(T,x):(a=C[o]=k[o](T),a.c()),W(a,1),a.m(l,null)),(!v||x[0]&1048576)&&V(l,"aria-label",T[20]),(!v||x[0]&1048576)&&F(l,"b3-tooltips",!!T[20]),(!v||x[0]&1048577)&&F(l,"b3-tooltips__se",!!T[20]&&T[0]===ge.Root),(!v||x[0]&1048577)&&F(l,"b3-tooltips__ne",!!T[20]&&T[0]!==ge.Root),(!v||x[0]&4194304)&&Pt(u,T[22]),(!v||x[0]&8388608)&&V(d,"aria-label",T[23]),(!v||x[0]&8388608)&&F(d,"ariaLabel",!!T[23]),(!v||x[0]&8388609)&&F(d,"b3-tooltips__se",!!T[23]&&T[0]===ge.Root),(!v||x[0]&8388609)&&F(d,"b3-tooltips__ne",!!T[23]&&T[0]!==ge.Root);const Z={};x[0]&16777216&&(Z.icon=T[24]),y.$set(Z),(!v||x[0]&33554432)&&V(b,"aria-label",T[25]),(!v||x[0]&33554432)&&F(b,"b3-tooltips",!!T[25]),(!v||x[0]&33554433)&&F(b,"b3-tooltips__sw",!!T[25]&&T[0]===ge.Root),(!v||x[0]&33554433)&&F(b,"b3-tooltips__nw",!!T[25]&&T[0]!==ge.Root),T[8]?E?(E.p(T,x),x[0]&256&&W(E,1)):(E=Fo(T),E.c(),W(E,1),E.m(t,c)):E&&(Ge(),q(E,1,1,()=>{E=null}),Je()),x[0]&268435456&&(f=!Number.isNaN(T[28])),f?R?R.p(T,x):(R=Uo(T),R.c(),R.m(t,null)):R&&(R.d(1),R=null),(!v||x[0]&1024)&&V(t,"draggable",T[10]),(!v||x[0]&32768)&&V(t,"title",T[15]),(!v||x[0]&1)&&V(t,"data-type",T[0]),(!v||x[0]&2)&&V(t,"data-name",T[1]),(!v||x[0]&4)&&V(t,"data-path",T[2]),(!v||x[0]&8)&&V(t,"data-depth",T[3]),(!v||x[0]&32)&&V(t,"data-directory",T[5]),(!v||x[0]&512)&&F(t,"dragging",T[9]),(!v||x[0]&8192)&&F(t,"dragover",T[13]),(!v||x[0]&4096)&&F(t,"dragover__top",T[12]),(!v||x[0]&16384)&&F(t,"dragover__bottom",T[14]),(!v||x[0]&64)&&F(t,"b3-list-item--focus",T[6]),(!v||x[0]&2048)&&F(t,"b3-list-item--hide-action",T[11]),T[16]?O?(O.p(T,x),x[0]&65536&&W(O,1)):(O=Wo(T),O.c(),W(O,1),O.m(p.parentNode,p)):O&&(Ge(),q(O,1,1,()=>{O=null}),Je())},i(T){v||(W(s.$$.fragment,T),W(a),W(y.$$.fragment,T),W(E),W(O),v=!0)},o(T){q(s.$$.fragment,T),q(a),q(y.$$.fragment,T),q(E),q(O),v=!1},d(T){T&&(G(t),G(_),G(p)),ie(s),C[o].d(),ie(y),E&&E.d(),R&&R.d(),e[43](null),O&&O.d(T),S=!1,qe(L)}}}function Td(e,t,i){let{type:s}=t,{name:r=""}=t,{path:n}=t,{root:l=""}=t,{depth:o=0}=t,{indent:a="1em"}=t,{relative:h=""}=t,{directory:d}=t,{focus:u=!1}=t,{folded:g=!0}=t,{symlink:b=!1}=t,{dragging:y=!1}=t,{draggable:m=!1}=t,{hideActions:c=!0}=t,{dragoverTop:f=!1}=t,{dragover:_=!1}=t,{dragoverBottom:p=!1}=t,{title:v=""}=t,{children:S=void 0}=t,{toggleIcon:L="#iconRight"}=t,{toggleAriaLabel:k=""}=t,{icon:C=""}=t,{iconAriaLabel:w=""}=t,{iconPopoverID:E=""}=t,{text:R=""}=t,{textAriaLabel:O=""}=t,{menuIcon:T="#iconMore"}=t,{menuAriaLabel:x=""}=t,{symlinkIcon:j="#iconLink"}=t,{symlinkAriaLabel:Y=""}=t,{count:Z=NaN}=t,{countAriaLabel:D=""}=t,B,A;const H=ci(),I={type:ye(s),name:ye(r),path:ye(n),root:ye(l),depth:ye(o),indent:ye(a),relative:ye(h),directory:ye(d),focus:ye(u),folded:ye(g),symlink:ye(b),dragging:ye(y),draggable:ye(m),hideActions:ye(c),dragoverTop:ye(f),dragover:ye(_),dragoverBottom:ye(p),title:ye(v),children:ye(S),toggleIcon:ye(L),toggleAriaLabel:ye(k),icon:ye(C),iconAriaLabel:ye(w),iconPopoverID:ye(E),text:ye(R),textAriaLabel:ye(O),menuIcon:ye(T),menuAriaLabel:ye(x),symlinkIcon:ye(j),symlinkAriaLabel:ye(Y),count:ye(Z),countAriaLabel:ye(D)},ee=[I.type.subscribe(P=>i(0,s=P)),I.name.subscribe(P=>i(1,r=P)),I.path.subscribe(P=>i(2,n=P)),I.root.subscribe(P=>i(41,l=P)),I.indent.subscribe(P=>i(4,a=P)),I.depth.subscribe(P=>i(3,o=P)),I.relative.subscribe(P=>i(42,h=P)),I.directory.subscribe(P=>i(5,d=P)),I.focus.subscribe(P=>i(6,u=P)),I.folded.subscribe(P=>i(7,g=P)),I.symlink.subscribe(P=>i(8,b=P)),I.dragging.subscribe(P=>i(9,y=P)),I.draggable.subscribe(P=>i(10,m=P)),I.hideActions.subscribe(P=>i(11,c=P)),I.dragoverTop.subscribe(P=>i(12,f=P)),I.dragover.subscribe(P=>i(13,_=P)),I.dragoverBottom.subscribe(P=>i(14,p=P)),I.title.subscribe(P=>i(15,v=P)),I.children.subscribe(P=>i(16,S=P)),I.toggleIcon.subscribe(P=>i(17,L=P)),I.toggleAriaLabel.subscribe(P=>i(18,k=P)),I.icon.subscribe(P=>i(19,C=P)),I.iconAriaLabel.subscribe(P=>i(20,w=P)),I.iconPopoverID.subscribe(P=>i(21,E=P)),I.text.subscribe(P=>i(22,R=P)),I.textAriaLabel.subscribe(P=>i(23,O=P)),I.menuIcon.subscribe(P=>i(24,T=P)),I.menuAriaLabel.subscribe(P=>i(25,x=P)),I.symlinkIcon.subscribe(P=>i(26,j=P)),I.symlinkAriaLabel.subscribe(P=>i(27,Y=P)),I.count.subscribe(P=>i(28,Z=P)),I.countAriaLabel.subscribe(P=>i(29,D=P))],le=w1("tree");le==null||le.appendNode(I),mn(()=>{le==null||le.removeNode(I),ee.forEach(P=>P())});function ae(P){switch(s){case ge.File:H("open",{e:P,li:B,ul:A,props:I,dispatcher:H});break;case ge.Root:case ge.Folder:default:be(P);break}}function be(P){g?H("unfold",{e:P,li:B,ul:A,props:I,dispatcher:H}):H("fold",{e:P,li:B,ul:A,props:I,dispatcher:H})}function M(P){H("menu",{e:P,li:B,ul:A,props:I,dispatcher:H})}function N(P){H("dragstart",{e:P,li:B,ul:A,props:I,dispatcher:H})}function K(P){H("dragend",{e:P,li:B,ul:A,props:I,dispatcher:H})}function z(P){H("dragenter",{e:P,li:B,ul:A,props:I,dispatcher:H})}function _e(P){H("dragover",{e:P,li:B,ul:A,props:I,dispatcher:H})}function Q(P){H("dragleave",{e:P,li:B,ul:A,props:I,dispatcher:H})}function we(P){H("drop",{e:P,li:B,ul:A,props:I,dispatcher:H})}function He(P){It[P?"unshift":"push"](()=>{B=P,i(30,B)})}function Ue(P){Ee.call(this,e,P)}function gt(P){Ee.call(this,e,P)}function Ce(P){Ee.call(this,e,P)}function hi(P){Ee.call(this,e,P)}function Yi(P){Ee.call(this,e,P)}function zi(P){Ee.call(this,e,P)}function qi(P){Ee.call(this,e,P)}function Ci(P){Ee.call(this,e,P)}function dt(P){Ee.call(this,e,P)}function ui(P){Ee.call(this,e,P)}function Ct(P){It[P?"unshift":"push"](()=>{A=P,i(31,A)})}return e.$$set=P=>{"type"in P&&i(0,s=P.type),"name"in P&&i(1,r=P.name),"path"in P&&i(2,n=P.path),"root"in P&&i(41,l=P.root),"depth"in P&&i(3,o=P.depth),"indent"in P&&i(4,a=P.indent),"relative"in P&&i(42,h=P.relative),"directory"in P&&i(5,d=P.directory),"focus"in P&&i(6,u=P.focus),"folded"in P&&i(7,g=P.folded),"symlink"in P&&i(8,b=P.symlink),"dragging"in P&&i(9,y=P.dragging),"draggable"in P&&i(10,m=P.draggable),"hideActions"in P&&i(11,c=P.hideActions),"dragoverTop"in P&&i(12,f=P.dragoverTop),"dragover"in P&&i(13,_=P.dragover),"dragoverBottom"in P&&i(14,p=P.dragoverBottom),"title"in P&&i(15,v=P.title),"children"in P&&i(16,S=P.children),"toggleIcon"in P&&i(17,L=P.toggleIcon),"toggleAriaLabel"in P&&i(18,k=P.toggleAriaLabel),"icon"in P&&i(19,C=P.icon),"iconAriaLabel"in P&&i(20,w=P.iconAriaLabel),"iconPopoverID"in P&&i(21,E=P.iconPopoverID),"text"in P&&i(22,R=P.text),"textAriaLabel"in P&&i(23,O=P.textAriaLabel),"menuIcon"in P&&i(24,T=P.menuIcon),"menuAriaLabel"in P&&i(25,x=P.menuAriaLabel),"symlinkIcon"in P&&i(26,j=P.symlinkIcon),"symlinkAriaLabel"in P&&i(27,Y=P.symlinkAriaLabel),"count"in P&&i(28,Z=P.count),"countAriaLabel"in P&&i(29,D=P.countAriaLabel)},e.$$.update=()=>{e.$$.dirty[0]&1&&I.type.set(s),e.$$.dirty[0]&2&&I.name.set(r),e.$$.dirty[0]&4&&I.path.set(n),e.$$.dirty[1]&1024&&I.root.set(l),e.$$.dirty[0]&8&&I.depth.set(o),e.$$.dirty[0]&16&&I.indent.set(a),e.$$.dirty[1]&2048&&I.relative.set(h),e.$$.dirty[0]&32&&I.directory.set(d),e.$$.dirty[0]&64&&I.focus.set(u),e.$$.dirty[0]&128&&I.folded.set(g),e.$$.dirty[0]&256&&I.symlink.set(b),e.$$.dirty[0]&512&&I.dragging.set(y),e.$$.dirty[0]&1024&&I.draggable.set(m),e.$$.dirty[0]&2048&&I.hideActions.set(c),e.$$.dirty[0]&4096&&I.dragoverTop.set(f),e.$$.dirty[0]&8192&&I.dragover.set(_),e.$$.dirty[0]&16384&&I.dragoverBottom.set(p),e.$$.dirty[0]&32768&&I.title.set(v),e.$$.dirty[0]&65536&&I.children.set(S),e.$$.dirty[0]&131072&&I.toggleIcon.set(L),e.$$.dirty[0]&262144&&I.toggleAriaLabel.set(k),e.$$.dirty[0]&524288&&I.icon.set(C),e.$$.dirty[0]&1048576&&I.iconAriaLabel.set(w),e.$$.dirty[0]&2097152&&I.iconPopoverID.set(E),e.$$.dirty[0]&4194304&&I.text.set(R),e.$$.dirty[0]&8388608&&I.textAriaLabel.set(O),e.$$.dirty[0]&16777216&&I.menuIcon.set(T),e.$$.dirty[0]&33554432&&I.menuAriaLabel.set(x),e.$$.dirty[0]&67108864&&I.symlinkIcon.set(j),e.$$.dirty[0]&134217728&&I.symlinkAriaLabel.set(Y),e.$$.dirty[0]&268435456&&I.count.set(Z),e.$$.dirty[0]&536870912&&I.countAriaLabel.set(D)},[s,r,n,o,a,d,u,g,b,y,m,c,f,_,p,v,S,L,k,C,w,E,R,O,T,x,j,Y,Z,D,B,A,ae,be,M,N,K,z,_e,Q,we,l,h,He,Ue,gt,Ce,hi,Yi,zi,qi,Ci,dt,ui,Ct]}let fl=class extends je{constructor(t){super(),Ve(this,t,Td,Md,Pe,{type:0,name:1,path:2,root:41,depth:3,indent:4,relative:42,directory:5,focus:6,folded:7,symlink:8,dragging:9,draggable:10,hideActions:11,dragoverTop:12,dragover:13,dragoverBottom:14,title:15,children:16,toggleIcon:17,toggleAriaLabel:18,icon:19,iconAriaLabel:20,iconPopoverID:21,text:22,textAriaLabel:23,menuIcon:24,menuAriaLabel:25,symlinkIcon:26,symlinkAriaLabel:27,count:28,countAriaLabel:29},null,[-1,-1])}};function Ad(e){let t,i,s,r;const n=[e[0]];let l={};for(let o=0;o<n.length;o+=1)l=bi(l,n[o]);return i=new fl({props:l}),i.$on("open",e[1]),i.$on("fold",e[2]),i.$on("menu",e[3]),i.$on("unfold",e[4]),i.$on("dragstart",e[5]),i.$on("dragend",e[6]),i.$on("dragenter",e[7]),i.$on("dragover",e[8]),i.$on("dragleave",e[9]),i.$on("drop",e[10]),{c(){t=ne("ul"),se(i.$$.fragment),V(t,"data-url",s=e[0].path),V(t,"class","b3-list b3-list--background")},m(o,a){J(o,t,a),te(i,t,null),r=!0},p(o,[a]){const h=a&1?ji(n,[_s(o[0])]):{};i.$set(h),(!r||a&1&&s!==(s=o[0].path))&&V(t,"data-url",s)},i(o){r||(W(i.$$.fragment,o),r=!0)},o(o){q(i.$$.fragment,o),r=!1},d(o){o&&G(t),ie(i)}}}function Rd(e,t,i){let{root:s}=t;function r(y){Ee.call(this,e,y)}function n(y){Ee.call(this,e,y)}function l(y){Ee.call(this,e,y)}function o(y){Ee.call(this,e,y)}function a(y){Ee.call(this,e,y)}function h(y){Ee.call(this,e,y)}function d(y){Ee.call(this,e,y)}function u(y){Ee.call(this,e,y)}function g(y){Ee.call(this,e,y)}function b(y){Ee.call(this,e,y)}return e.$$set=y=>{"root"in y&&i(0,s=y.root)},[s,r,n,l,o,a,h,d,u,g,b]}class Od extends je{constructor(t){super(),Ve(this,t,Rd,Ad,Pe,{root:0})}}function zo(e,t,i){const s=e.slice();return s[11]=t[i],s[13]=i,s}function qo(e,t){let i,s,r;return s=new Od({props:{root:t[11]}}),s.$on("open",t[1]),s.$on("menu",t[2]),s.$on("fold",t[3]),s.$on("unfold",t[4]),s.$on("dragstart",t[5]),s.$on("dragend",t[6]),s.$on("dragenter",t[7]),s.$on("dragover",t[8]),s.$on("dragleave",t[9]),s.$on("drop",t[10]),{key:e,first:null,c(){i=pt(),se(s.$$.fragment),this.first=i},m(n,l){J(n,i,l),te(s,n,l),r=!0},p(n,l){t=n;const o={};l&1&&(o.root=t[11]),s.$set(o)},i(n){r||(W(s.$$.fragment,n),r=!0)},o(n){q(s.$$.fragment,n),r=!1},d(n){n&&G(i),ie(s,n)}}}function Bd(e){let t,i=[],s=new Map,r,n=kt(e[0]);const l=o=>o[11].path;for(let o=0;o<n.length;o+=1){let a=zo(e,n,o),h=l(a);s.set(h,i[o]=qo(h,a))}return{c(){t=ne("div");for(let o=0;o<i.length;o+=1)i[o].c();V(t,"class","fn__flex-1 file-tree")},m(o,a){J(o,t,a);for(let h=0;h<i.length;h+=1)i[h]&&i[h].m(t,null);r=!0},p(o,[a]){a&1&&(n=kt(o[0]),Ge(),i=Vi(i,a,l,1,o,n,s,t,ds,qo,null,zo),Je())},i(o){if(!r){for(let a=0;a<n.length;a+=1)W(i[a]);r=!0}},o(o){for(let a=0;a<i.length;a+=1)q(i[a]);r=!1},d(o){o&&G(t);for(let a=0;a<i.length;a+=1)i[a].d()}}}function Hd(e,t,i){let{roots:s=[]}=t;function r(y){Ee.call(this,e,y)}function n(y){Ee.call(this,e,y)}function l(y){Ee.call(this,e,y)}function o(y){Ee.call(this,e,y)}function a(y){Ee.call(this,e,y)}function h(y){Ee.call(this,e,y)}function d(y){Ee.call(this,e,y)}function u(y){Ee.call(this,e,y)}function g(y){Ee.call(this,e,y)}function b(y){Ee.call(this,e,y)}return e.$$set=y=>{"roots"in y&&i(0,s=y.roots)},[s,r,n,l,o,a,h,d,u,g,b]}class xd extends je{constructor(t){super(),Ve(this,t,Hd,Bd,Pe,{roots:0})}}function Pd(e){return e=e.slice(e.findIndex(t=>t.type!=="separator"),e.findLastIndex(t=>t.type!=="separator")+1),e.length===0||(e=e.filter((t,i,s)=>{var r;return t.type!=="separator"?!0:((r=s[i-1])==null?void 0:r.type)!=="separator"})),e}function Id(e){return String.fromCodePoint(parseInt(e,16))}//! moment.js
//! version : 2.29.4
//! authors : Tim Wood, Iskren Chernev, Moment.js contributors
//! license : MIT
//! momentjs.com
var dl;function re(){return dl.apply(null,arguments)}function Nd(e){dl=e}function Tt(e){return e instanceof Array||Object.prototype.toString.call(e)==="[object Array]"}function gi(e){return e!=null&&Object.prototype.toString.call(e)==="[object Object]"}function De(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function bn(e){if(Object.getOwnPropertyNames)return Object.getOwnPropertyNames(e).length===0;var t;for(t in e)if(De(e,t))return!1;return!0}function _t(e){return e===void 0}function Jt(e){return typeof e=="number"||Object.prototype.toString.call(e)==="[object Number]"}function ps(e){return e instanceof Date||Object.prototype.toString.call(e)==="[object Date]"}function _l(e,t){var i=[],s,r=e.length;for(s=0;s<r;++s)i.push(t(e[s],s));return i}function ni(e,t){for(var i in t)De(t,i)&&(e[i]=t[i]);return De(t,"toString")&&(e.toString=t.toString),De(t,"valueOf")&&(e.valueOf=t.valueOf),e}function jt(e,t,i,s){return Nl(e,t,i,s,!0).utc()}function Vd(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidEra:null,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],era:null,meridiem:null,rfc2822:!1,weekdayMismatch:!1}}function me(e){return e._pf==null&&(e._pf=Vd()),e._pf}var Qr;Array.prototype.some?Qr=Array.prototype.some:Qr=function(e){var t=Object(this),i=t.length>>>0,s;for(s=0;s<i;s++)if(s in t&&e.call(this,t[s],s,t))return!0;return!1};function yn(e){if(e._isValid==null){var t=me(e),i=Qr.call(t.parsedDateParts,function(r){return r!=null}),s=!isNaN(e._d.getTime())&&t.overflow<0&&!t.empty&&!t.invalidEra&&!t.invalidMonth&&!t.invalidWeekday&&!t.weekdayMismatch&&!t.nullInput&&!t.invalidFormat&&!t.userInvalidated&&(!t.meridiem||t.meridiem&&i);if(e._strict&&(s=s&&t.charsLeftOver===0&&t.unusedTokens.length===0&&t.bigHour===void 0),Object.isFrozen==null||!Object.isFrozen(e))e._isValid=s;else return s}return e._isValid}function sr(e){var t=jt(NaN);return e!=null?ni(me(t),e):me(t).userInvalidated=!0,t}var Zo=re.momentProperties=[],Mr=!1;function Cn(e,t){var i,s,r,n=Zo.length;if(_t(t._isAMomentObject)||(e._isAMomentObject=t._isAMomentObject),_t(t._i)||(e._i=t._i),_t(t._f)||(e._f=t._f),_t(t._l)||(e._l=t._l),_t(t._strict)||(e._strict=t._strict),_t(t._tzm)||(e._tzm=t._tzm),_t(t._isUTC)||(e._isUTC=t._isUTC),_t(t._offset)||(e._offset=t._offset),_t(t._pf)||(e._pf=me(t)),_t(t._locale)||(e._locale=t._locale),n>0)for(i=0;i<n;i++)s=Zo[i],r=t[s],_t(r)||(e[s]=r);return e}function gs(e){Cn(this,e),this._d=new Date(e._d!=null?e._d.getTime():NaN),this.isValid()||(this._d=new Date(NaN)),Mr===!1&&(Mr=!0,re.updateOffset(this),Mr=!1)}function At(e){return e instanceof gs||e!=null&&e._isAMomentObject!=null}function pl(e){re.suppressDeprecationWarnings===!1&&typeof console<"u"&&console.warn&&console.warn("Deprecation warning: "+e)}function Lt(e,t){var i=!0;return ni(function(){if(re.deprecationHandler!=null&&re.deprecationHandler(null,e),i){var s=[],r,n,l,o=arguments.length;for(n=0;n<o;n++){if(r="",typeof arguments[n]=="object"){r+=`
[`+n+"] ";for(l in arguments[0])De(arguments[0],l)&&(r+=l+": "+arguments[0][l]+", ");r=r.slice(0,-2)}else r=arguments[n];s.push(r)}pl(e+`
Arguments: `+Array.prototype.slice.call(s).join("")+`
`+new Error().stack),i=!1}return t.apply(this,arguments)},t)}var Ko={};function gl(e,t){re.deprecationHandler!=null&&re.deprecationHandler(e,t),Ko[e]||(pl(t),Ko[e]=!0)}re.suppressDeprecationWarnings=!1;re.deprecationHandler=null;function Ft(e){return typeof Function<"u"&&e instanceof Function||Object.prototype.toString.call(e)==="[object Function]"}function jd(e){var t,i;for(i in e)De(e,i)&&(t=e[i],Ft(t)?this[i]=t:this["_"+i]=t);this._config=e,this._dayOfMonthOrdinalParseLenient=new RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+"|"+/\d{1,2}/.source)}function en(e,t){var i=ni({},e),s;for(s in t)De(t,s)&&(gi(e[s])&&gi(t[s])?(i[s]={},ni(i[s],e[s]),ni(i[s],t[s])):t[s]!=null?i[s]=t[s]:delete i[s]);for(s in e)De(e,s)&&!De(t,s)&&gi(e[s])&&(i[s]=ni({},i[s]));return i}function Sn(e){e!=null&&this.set(e)}var tn;Object.keys?tn=Object.keys:tn=function(e){var t,i=[];for(t in e)De(e,t)&&i.push(t);return i};var Fd={sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"};function Ud(e,t,i){var s=this._calendar[e]||this._calendar.sameElse;return Ft(s)?s.call(t,i):s}function Nt(e,t,i){var s=""+Math.abs(e),r=t-s.length,n=e>=0;return(n?i?"+":"":"-")+Math.pow(10,Math.max(0,r)).toString().substr(1)+s}var wn=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|N{1,5}|YYYYYY|YYYYY|YYYY|YY|y{2,4}|yo?|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,Cs=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,Tr={},Ai={};function fe(e,t,i,s){var r=s;typeof s=="string"&&(r=function(){return this[s]()}),e&&(Ai[e]=r),t&&(Ai[t[0]]=function(){return Nt(r.apply(this,arguments),t[1],t[2])}),i&&(Ai[i]=function(){return this.localeData().ordinal(r.apply(this,arguments),e)})}function Wd(e){return e.match(/\[[\s\S]/)?e.replace(/^\[|\]$/g,""):e.replace(/\\/g,"")}function Yd(e){var t=e.match(wn),i,s;for(i=0,s=t.length;i<s;i++)Ai[t[i]]?t[i]=Ai[t[i]]:t[i]=Wd(t[i]);return function(r){var n="",l;for(l=0;l<s;l++)n+=Ft(t[l])?t[l].call(r,e):t[l];return n}}function xs(e,t){return e.isValid()?(t=ml(t,e.localeData()),Tr[t]=Tr[t]||Yd(t),Tr[t](e)):e.localeData().invalidDate()}function ml(e,t){var i=5;function s(r){return t.longDateFormat(r)||r}for(Cs.lastIndex=0;i>=0&&Cs.test(e);)e=e.replace(Cs,s),Cs.lastIndex=0,i-=1;return e}var zd={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"};function qd(e){var t=this._longDateFormat[e],i=this._longDateFormat[e.toUpperCase()];return t||!i?t:(this._longDateFormat[e]=i.match(wn).map(function(s){return s==="MMMM"||s==="MM"||s==="DD"||s==="dddd"?s.slice(1):s}).join(""),this._longDateFormat[e])}var Zd="Invalid date";function Kd(){return this._invalidDate}var $d="%d",Gd=/\d{1,2}/;function Jd(e){return this._ordinal.replace("%d",e)}var Xd={future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",w:"a week",ww:"%d weeks",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};function Qd(e,t,i,s){var r=this._relativeTime[i];return Ft(r)?r(e,t,i,s):r.replace(/%d/i,e)}function e0(e,t){var i=this._relativeTime[e>0?"future":"past"];return Ft(i)?i(t):i.replace(/%s/i,t)}var is={};function lt(e,t){var i=e.toLowerCase();is[i]=is[i+"s"]=is[t]=e}function Et(e){return typeof e=="string"?is[e]||is[e.toLowerCase()]:void 0}function kn(e){var t={},i,s;for(s in e)De(e,s)&&(i=Et(s),i&&(t[i]=e[s]));return t}var vl={};function ct(e,t){vl[e]=t}function t0(e){var t=[],i;for(i in e)De(e,i)&&t.push({unit:i,priority:vl[i]});return t.sort(function(s,r){return s.priority-r.priority}),t}function rr(e){return e%4===0&&e%100!==0||e%400===0}function St(e){return e<0?Math.ceil(e)||0:Math.floor(e)}function Se(e){var t=+e,i=0;return t!==0&&isFinite(t)&&(i=St(t)),i}function Fi(e,t){return function(i){return i!=null?(bl(this,e,i),re.updateOffset(this,t),this):js(this,e)}}function js(e,t){return e.isValid()?e._d["get"+(e._isUTC?"UTC":"")+t]():NaN}function bl(e,t,i){e.isValid()&&!isNaN(i)&&(t==="FullYear"&&rr(e.year())&&e.month()===1&&e.date()===29?(i=Se(i),e._d["set"+(e._isUTC?"UTC":"")+t](i,e.month(),hr(i,e.month()))):e._d["set"+(e._isUTC?"UTC":"")+t](i))}function i0(e){return e=Et(e),Ft(this[e])?this[e]():this}function s0(e,t){if(typeof e=="object"){e=kn(e);var i=t0(e),s,r=i.length;for(s=0;s<r;s++)this[i[s].unit](e[i[s].unit])}else if(e=Et(e),Ft(this[e]))return this[e](t);return this}var yl=/\d/,yt=/\d\d/,Cl=/\d{3}/,Ln=/\d{4}/,nr=/[+-]?\d{6}/,Be=/\d\d?/,Sl=/\d\d\d\d?/,wl=/\d\d\d\d\d\d?/,or=/\d{1,3}/,En=/\d{1,4}/,ar=/[+-]?\d{1,6}/,Ui=/\d+/,lr=/[+-]?\d+/,r0=/Z|[+-]\d\d:?\d\d/gi,cr=/Z|[+-]\d\d(?::?\d\d)?/gi,n0=/[+-]?\d+(\.\d{1,3})?/,ms=/[0-9]{0,256}['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFF07\uFF10-\uFFEF]{1,256}|[\u0600-\u06FF\/]{1,256}(\s*?[\u0600-\u06FF]{1,256}){1,2}/i,Fs;Fs={};function oe(e,t,i){Fs[e]=Ft(t)?t:function(s,r){return s&&i?i:t}}function o0(e,t){return De(Fs,e)?Fs[e](t._strict,t._locale):new RegExp(a0(e))}function a0(e){return mt(e.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(t,i,s,r,n){return i||s||r||n}))}function mt(e){return e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}var sn={};function Ae(e,t){var i,s=t,r;for(typeof e=="string"&&(e=[e]),Jt(t)&&(s=function(n,l){l[t]=Se(n)}),r=e.length,i=0;i<r;i++)sn[e[i]]=s}function vs(e,t){Ae(e,function(i,s,r,n){r._w=r._w||{},t(i,r._w,r,n)})}function l0(e,t,i){t!=null&&De(sn,e)&&sn[e](t,i._a,i,e)}var ot=0,qt=1,xt=2,Ze=3,Mt=4,Zt=5,pi=6,c0=7,h0=8;function u0(e,t){return(e%t+t)%t}var We;Array.prototype.indexOf?We=Array.prototype.indexOf:We=function(e){var t;for(t=0;t<this.length;++t)if(this[t]===e)return t;return-1};function hr(e,t){if(isNaN(e)||isNaN(t))return NaN;var i=u0(t,12);return e+=(t-i)/12,i===1?rr(e)?29:28:31-i%7%2}fe("M",["MM",2],"Mo",function(){return this.month()+1});fe("MMM",0,0,function(e){return this.localeData().monthsShort(this,e)});fe("MMMM",0,0,function(e){return this.localeData().months(this,e)});lt("month","M");ct("month",8);oe("M",Be);oe("MM",Be,yt);oe("MMM",function(e,t){return t.monthsShortRegex(e)});oe("MMMM",function(e,t){return t.monthsRegex(e)});Ae(["M","MM"],function(e,t){t[qt]=Se(e)-1});Ae(["MMM","MMMM"],function(e,t,i,s){var r=i._locale.monthsParse(e,s,i._strict);r!=null?t[qt]=r:me(i).invalidMonth=e});var f0="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),kl="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),Ll=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/,d0=ms,_0=ms;function p0(e,t){return e?Tt(this._months)?this._months[e.month()]:this._months[(this._months.isFormat||Ll).test(t)?"format":"standalone"][e.month()]:Tt(this._months)?this._months:this._months.standalone}function g0(e,t){return e?Tt(this._monthsShort)?this._monthsShort[e.month()]:this._monthsShort[Ll.test(t)?"format":"standalone"][e.month()]:Tt(this._monthsShort)?this._monthsShort:this._monthsShort.standalone}function m0(e,t,i){var s,r,n,l=e.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],s=0;s<12;++s)n=jt([2e3,s]),this._shortMonthsParse[s]=this.monthsShort(n,"").toLocaleLowerCase(),this._longMonthsParse[s]=this.months(n,"").toLocaleLowerCase();return i?t==="MMM"?(r=We.call(this._shortMonthsParse,l),r!==-1?r:null):(r=We.call(this._longMonthsParse,l),r!==-1?r:null):t==="MMM"?(r=We.call(this._shortMonthsParse,l),r!==-1?r:(r=We.call(this._longMonthsParse,l),r!==-1?r:null)):(r=We.call(this._longMonthsParse,l),r!==-1?r:(r=We.call(this._shortMonthsParse,l),r!==-1?r:null))}function v0(e,t,i){var s,r,n;if(this._monthsParseExact)return m0.call(this,e,t,i);for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),s=0;s<12;s++){if(r=jt([2e3,s]),i&&!this._longMonthsParse[s]&&(this._longMonthsParse[s]=new RegExp("^"+this.months(r,"").replace(".","")+"$","i"),this._shortMonthsParse[s]=new RegExp("^"+this.monthsShort(r,"").replace(".","")+"$","i")),!i&&!this._monthsParse[s]&&(n="^"+this.months(r,"")+"|^"+this.monthsShort(r,""),this._monthsParse[s]=new RegExp(n.replace(".",""),"i")),i&&t==="MMMM"&&this._longMonthsParse[s].test(e))return s;if(i&&t==="MMM"&&this._shortMonthsParse[s].test(e))return s;if(!i&&this._monthsParse[s].test(e))return s}}function El(e,t){var i;if(!e.isValid())return e;if(typeof t=="string"){if(/^\d+$/.test(t))t=Se(t);else if(t=e.localeData().monthsParse(t),!Jt(t))return e}return i=Math.min(e.date(),hr(e.year(),t)),e._d["set"+(e._isUTC?"UTC":"")+"Month"](t,i),e}function Dl(e){return e!=null?(El(this,e),re.updateOffset(this,!0),this):js(this,"Month")}function b0(){return hr(this.year(),this.month())}function y0(e){return this._monthsParseExact?(De(this,"_monthsRegex")||Ml.call(this),e?this._monthsShortStrictRegex:this._monthsShortRegex):(De(this,"_monthsShortRegex")||(this._monthsShortRegex=d0),this._monthsShortStrictRegex&&e?this._monthsShortStrictRegex:this._monthsShortRegex)}function C0(e){return this._monthsParseExact?(De(this,"_monthsRegex")||Ml.call(this),e?this._monthsStrictRegex:this._monthsRegex):(De(this,"_monthsRegex")||(this._monthsRegex=_0),this._monthsStrictRegex&&e?this._monthsStrictRegex:this._monthsRegex)}function Ml(){function e(l,o){return o.length-l.length}var t=[],i=[],s=[],r,n;for(r=0;r<12;r++)n=jt([2e3,r]),t.push(this.monthsShort(n,"")),i.push(this.months(n,"")),s.push(this.months(n,"")),s.push(this.monthsShort(n,""));for(t.sort(e),i.sort(e),s.sort(e),r=0;r<12;r++)t[r]=mt(t[r]),i[r]=mt(i[r]);for(r=0;r<24;r++)s[r]=mt(s[r]);this._monthsRegex=new RegExp("^("+s.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp("^("+i.join("|")+")","i"),this._monthsShortStrictRegex=new RegExp("^("+t.join("|")+")","i")}fe("Y",0,0,function(){var e=this.year();return e<=9999?Nt(e,4):"+"+e});fe(0,["YY",2],0,function(){return this.year()%100});fe(0,["YYYY",4],0,"year");fe(0,["YYYYY",5],0,"year");fe(0,["YYYYYY",6,!0],0,"year");lt("year","y");ct("year",1);oe("Y",lr);oe("YY",Be,yt);oe("YYYY",En,Ln);oe("YYYYY",ar,nr);oe("YYYYYY",ar,nr);Ae(["YYYYY","YYYYYY"],ot);Ae("YYYY",function(e,t){t[ot]=e.length===2?re.parseTwoDigitYear(e):Se(e)});Ae("YY",function(e,t){t[ot]=re.parseTwoDigitYear(e)});Ae("Y",function(e,t){t[ot]=parseInt(e,10)});function ss(e){return rr(e)?366:365}re.parseTwoDigitYear=function(e){return Se(e)+(Se(e)>68?1900:2e3)};var Tl=Fi("FullYear",!0);function S0(){return rr(this.year())}function w0(e,t,i,s,r,n,l){var o;return e<100&&e>=0?(o=new Date(e+400,t,i,s,r,n,l),isFinite(o.getFullYear())&&o.setFullYear(e)):o=new Date(e,t,i,s,r,n,l),o}function as(e){var t,i;return e<100&&e>=0?(i=Array.prototype.slice.call(arguments),i[0]=e+400,t=new Date(Date.UTC.apply(null,i)),isFinite(t.getUTCFullYear())&&t.setUTCFullYear(e)):t=new Date(Date.UTC.apply(null,arguments)),t}function Us(e,t,i){var s=7+t-i,r=(7+as(e,0,s).getUTCDay()-t)%7;return-r+s-1}function Al(e,t,i,s,r){var n=(7+i-s)%7,l=Us(e,s,r),o=1+7*(t-1)+n+l,a,h;return o<=0?(a=e-1,h=ss(a)+o):o>ss(e)?(a=e+1,h=o-ss(e)):(a=e,h=o),{year:a,dayOfYear:h}}function ls(e,t,i){var s=Us(e.year(),t,i),r=Math.floor((e.dayOfYear()-s-1)/7)+1,n,l;return r<1?(l=e.year()-1,n=r+$t(l,t,i)):r>$t(e.year(),t,i)?(n=r-$t(e.year(),t,i),l=e.year()+1):(l=e.year(),n=r),{week:n,year:l}}function $t(e,t,i){var s=Us(e,t,i),r=Us(e+1,t,i);return(ss(e)-s+r)/7}fe("w",["ww",2],"wo","week");fe("W",["WW",2],"Wo","isoWeek");lt("week","w");lt("isoWeek","W");ct("week",5);ct("isoWeek",5);oe("w",Be);oe("ww",Be,yt);oe("W",Be);oe("WW",Be,yt);vs(["w","ww","W","WW"],function(e,t,i,s){t[s.substr(0,1)]=Se(e)});function k0(e){return ls(e,this._week.dow,this._week.doy).week}var L0={dow:0,doy:6};function E0(){return this._week.dow}function D0(){return this._week.doy}function M0(e){var t=this.localeData().week(this);return e==null?t:this.add((e-t)*7,"d")}function T0(e){var t=ls(this,1,4).week;return e==null?t:this.add((e-t)*7,"d")}fe("d",0,"do","day");fe("dd",0,0,function(e){return this.localeData().weekdaysMin(this,e)});fe("ddd",0,0,function(e){return this.localeData().weekdaysShort(this,e)});fe("dddd",0,0,function(e){return this.localeData().weekdays(this,e)});fe("e",0,0,"weekday");fe("E",0,0,"isoWeekday");lt("day","d");lt("weekday","e");lt("isoWeekday","E");ct("day",11);ct("weekday",11);ct("isoWeekday",11);oe("d",Be);oe("e",Be);oe("E",Be);oe("dd",function(e,t){return t.weekdaysMinRegex(e)});oe("ddd",function(e,t){return t.weekdaysShortRegex(e)});oe("dddd",function(e,t){return t.weekdaysRegex(e)});vs(["dd","ddd","dddd"],function(e,t,i,s){var r=i._locale.weekdaysParse(e,s,i._strict);r!=null?t.d=r:me(i).invalidWeekday=e});vs(["d","e","E"],function(e,t,i,s){t[s]=Se(e)});function A0(e,t){return typeof e!="string"?e:isNaN(e)?(e=t.weekdaysParse(e),typeof e=="number"?e:null):parseInt(e,10)}function R0(e,t){return typeof e=="string"?t.weekdaysParse(e)%7||7:isNaN(e)?null:e}function Dn(e,t){return e.slice(t,7).concat(e.slice(0,t))}var O0="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),Rl="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),B0="Su_Mo_Tu_We_Th_Fr_Sa".split("_"),H0=ms,x0=ms,P0=ms;function I0(e,t){var i=Tt(this._weekdays)?this._weekdays:this._weekdays[e&&e!==!0&&this._weekdays.isFormat.test(t)?"format":"standalone"];return e===!0?Dn(i,this._week.dow):e?i[e.day()]:i}function N0(e){return e===!0?Dn(this._weekdaysShort,this._week.dow):e?this._weekdaysShort[e.day()]:this._weekdaysShort}function V0(e){return e===!0?Dn(this._weekdaysMin,this._week.dow):e?this._weekdaysMin[e.day()]:this._weekdaysMin}function j0(e,t,i){var s,r,n,l=e.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],s=0;s<7;++s)n=jt([2e3,1]).day(s),this._minWeekdaysParse[s]=this.weekdaysMin(n,"").toLocaleLowerCase(),this._shortWeekdaysParse[s]=this.weekdaysShort(n,"").toLocaleLowerCase(),this._weekdaysParse[s]=this.weekdays(n,"").toLocaleLowerCase();return i?t==="dddd"?(r=We.call(this._weekdaysParse,l),r!==-1?r:null):t==="ddd"?(r=We.call(this._shortWeekdaysParse,l),r!==-1?r:null):(r=We.call(this._minWeekdaysParse,l),r!==-1?r:null):t==="dddd"?(r=We.call(this._weekdaysParse,l),r!==-1||(r=We.call(this._shortWeekdaysParse,l),r!==-1)?r:(r=We.call(this._minWeekdaysParse,l),r!==-1?r:null)):t==="ddd"?(r=We.call(this._shortWeekdaysParse,l),r!==-1||(r=We.call(this._weekdaysParse,l),r!==-1)?r:(r=We.call(this._minWeekdaysParse,l),r!==-1?r:null)):(r=We.call(this._minWeekdaysParse,l),r!==-1||(r=We.call(this._weekdaysParse,l),r!==-1)?r:(r=We.call(this._shortWeekdaysParse,l),r!==-1?r:null))}function F0(e,t,i){var s,r,n;if(this._weekdaysParseExact)return j0.call(this,e,t,i);for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),s=0;s<7;s++){if(r=jt([2e3,1]).day(s),i&&!this._fullWeekdaysParse[s]&&(this._fullWeekdaysParse[s]=new RegExp("^"+this.weekdays(r,"").replace(".","\\.?")+"$","i"),this._shortWeekdaysParse[s]=new RegExp("^"+this.weekdaysShort(r,"").replace(".","\\.?")+"$","i"),this._minWeekdaysParse[s]=new RegExp("^"+this.weekdaysMin(r,"").replace(".","\\.?")+"$","i")),this._weekdaysParse[s]||(n="^"+this.weekdays(r,"")+"|^"+this.weekdaysShort(r,"")+"|^"+this.weekdaysMin(r,""),this._weekdaysParse[s]=new RegExp(n.replace(".",""),"i")),i&&t==="dddd"&&this._fullWeekdaysParse[s].test(e))return s;if(i&&t==="ddd"&&this._shortWeekdaysParse[s].test(e))return s;if(i&&t==="dd"&&this._minWeekdaysParse[s].test(e))return s;if(!i&&this._weekdaysParse[s].test(e))return s}}function U0(e){if(!this.isValid())return e!=null?this:NaN;var t=this._isUTC?this._d.getUTCDay():this._d.getDay();return e!=null?(e=A0(e,this.localeData()),this.add(e-t,"d")):t}function W0(e){if(!this.isValid())return e!=null?this:NaN;var t=(this.day()+7-this.localeData()._week.dow)%7;return e==null?t:this.add(e-t,"d")}function Y0(e){if(!this.isValid())return e!=null?this:NaN;if(e!=null){var t=R0(e,this.localeData());return this.day(this.day()%7?t:t-7)}else return this.day()||7}function z0(e){return this._weekdaysParseExact?(De(this,"_weekdaysRegex")||Mn.call(this),e?this._weekdaysStrictRegex:this._weekdaysRegex):(De(this,"_weekdaysRegex")||(this._weekdaysRegex=H0),this._weekdaysStrictRegex&&e?this._weekdaysStrictRegex:this._weekdaysRegex)}function q0(e){return this._weekdaysParseExact?(De(this,"_weekdaysRegex")||Mn.call(this),e?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):(De(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=x0),this._weekdaysShortStrictRegex&&e?this._weekdaysShortStrictRegex:this._weekdaysShortRegex)}function Z0(e){return this._weekdaysParseExact?(De(this,"_weekdaysRegex")||Mn.call(this),e?this._weekdaysMinStrictRegex:this._weekdaysMinRegex):(De(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=P0),this._weekdaysMinStrictRegex&&e?this._weekdaysMinStrictRegex:this._weekdaysMinRegex)}function Mn(){function e(d,u){return u.length-d.length}var t=[],i=[],s=[],r=[],n,l,o,a,h;for(n=0;n<7;n++)l=jt([2e3,1]).day(n),o=mt(this.weekdaysMin(l,"")),a=mt(this.weekdaysShort(l,"")),h=mt(this.weekdays(l,"")),t.push(o),i.push(a),s.push(h),r.push(o),r.push(a),r.push(h);t.sort(e),i.sort(e),s.sort(e),r.sort(e),this._weekdaysRegex=new RegExp("^("+r.join("|")+")","i"),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=new RegExp("^("+s.join("|")+")","i"),this._weekdaysShortStrictRegex=new RegExp("^("+i.join("|")+")","i"),this._weekdaysMinStrictRegex=new RegExp("^("+t.join("|")+")","i")}function Tn(){return this.hours()%12||12}function K0(){return this.hours()||24}fe("H",["HH",2],0,"hour");fe("h",["hh",2],0,Tn);fe("k",["kk",2],0,K0);fe("hmm",0,0,function(){return""+Tn.apply(this)+Nt(this.minutes(),2)});fe("hmmss",0,0,function(){return""+Tn.apply(this)+Nt(this.minutes(),2)+Nt(this.seconds(),2)});fe("Hmm",0,0,function(){return""+this.hours()+Nt(this.minutes(),2)});fe("Hmmss",0,0,function(){return""+this.hours()+Nt(this.minutes(),2)+Nt(this.seconds(),2)});function Ol(e,t){fe(e,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),t)})}Ol("a",!0);Ol("A",!1);lt("hour","h");ct("hour",13);function Bl(e,t){return t._meridiemParse}oe("a",Bl);oe("A",Bl);oe("H",Be);oe("h",Be);oe("k",Be);oe("HH",Be,yt);oe("hh",Be,yt);oe("kk",Be,yt);oe("hmm",Sl);oe("hmmss",wl);oe("Hmm",Sl);oe("Hmmss",wl);Ae(["H","HH"],Ze);Ae(["k","kk"],function(e,t,i){var s=Se(e);t[Ze]=s===24?0:s});Ae(["a","A"],function(e,t,i){i._isPm=i._locale.isPM(e),i._meridiem=e});Ae(["h","hh"],function(e,t,i){t[Ze]=Se(e),me(i).bigHour=!0});Ae("hmm",function(e,t,i){var s=e.length-2;t[Ze]=Se(e.substr(0,s)),t[Mt]=Se(e.substr(s)),me(i).bigHour=!0});Ae("hmmss",function(e,t,i){var s=e.length-4,r=e.length-2;t[Ze]=Se(e.substr(0,s)),t[Mt]=Se(e.substr(s,2)),t[Zt]=Se(e.substr(r)),me(i).bigHour=!0});Ae("Hmm",function(e,t,i){var s=e.length-2;t[Ze]=Se(e.substr(0,s)),t[Mt]=Se(e.substr(s))});Ae("Hmmss",function(e,t,i){var s=e.length-4,r=e.length-2;t[Ze]=Se(e.substr(0,s)),t[Mt]=Se(e.substr(s,2)),t[Zt]=Se(e.substr(r))});function $0(e){return(e+"").toLowerCase().charAt(0)==="p"}var G0=/[ap]\.?m?\.?/i,J0=Fi("Hours",!0);function X0(e,t,i){return e>11?i?"pm":"PM":i?"am":"AM"}var Hl={calendar:Fd,longDateFormat:zd,invalidDate:Zd,ordinal:$d,dayOfMonthOrdinalParse:Gd,relativeTime:Xd,months:f0,monthsShort:kl,week:L0,weekdays:O0,weekdaysMin:B0,weekdaysShort:Rl,meridiemParse:G0},xe={},$i={},cs;function Q0(e,t){var i,s=Math.min(e.length,t.length);for(i=0;i<s;i+=1)if(e[i]!==t[i])return i;return s}function $o(e){return e&&e.toLowerCase().replace("_","-")}function e_(e){for(var t=0,i,s,r,n;t<e.length;){for(n=$o(e[t]).split("-"),i=n.length,s=$o(e[t+1]),s=s?s.split("-"):null;i>0;){if(r=ur(n.slice(0,i).join("-")),r)return r;if(s&&s.length>=i&&Q0(n,s)>=i-1)break;i--}t++}return cs}function t_(e){return e.match("^[^/\\\\]*$")!=null}function ur(e){var t=null,i;if(xe[e]===void 0&&typeof module<"u"&&module&&module.exports&&t_(e))try{t=cs._abbr,i=require,i("./locale/"+e),li(t)}catch{xe[e]=null}return xe[e]}function li(e,t){var i;return e&&(_t(t)?i=Xt(e):i=An(e,t),i?cs=i:typeof console<"u"&&console.warn&&console.warn("Locale "+e+" not found. Did you forget to load it?")),cs._abbr}function An(e,t){if(t!==null){var i,s=Hl;if(t.abbr=e,xe[e]!=null)gl("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),s=xe[e]._config;else if(t.parentLocale!=null)if(xe[t.parentLocale]!=null)s=xe[t.parentLocale]._config;else if(i=ur(t.parentLocale),i!=null)s=i._config;else return $i[t.parentLocale]||($i[t.parentLocale]=[]),$i[t.parentLocale].push({name:e,config:t}),null;return xe[e]=new Sn(en(s,t)),$i[e]&&$i[e].forEach(function(r){An(r.name,r.config)}),li(e),xe[e]}else return delete xe[e],null}function i_(e,t){if(t!=null){var i,s,r=Hl;xe[e]!=null&&xe[e].parentLocale!=null?xe[e].set(en(xe[e]._config,t)):(s=ur(e),s!=null&&(r=s._config),t=en(r,t),s==null&&(t.abbr=e),i=new Sn(t),i.parentLocale=xe[e],xe[e]=i),li(e)}else xe[e]!=null&&(xe[e].parentLocale!=null?(xe[e]=xe[e].parentLocale,e===li()&&li(e)):xe[e]!=null&&delete xe[e]);return xe[e]}function Xt(e){var t;if(e&&e._locale&&e._locale._abbr&&(e=e._locale._abbr),!e)return cs;if(!Tt(e)){if(t=ur(e),t)return t;e=[e]}return e_(e)}function s_(){return tn(xe)}function Rn(e){var t,i=e._a;return i&&me(e).overflow===-2&&(t=i[qt]<0||i[qt]>11?qt:i[xt]<1||i[xt]>hr(i[ot],i[qt])?xt:i[Ze]<0||i[Ze]>24||i[Ze]===24&&(i[Mt]!==0||i[Zt]!==0||i[pi]!==0)?Ze:i[Mt]<0||i[Mt]>59?Mt:i[Zt]<0||i[Zt]>59?Zt:i[pi]<0||i[pi]>999?pi:-1,me(e)._overflowDayOfYear&&(t<ot||t>xt)&&(t=xt),me(e)._overflowWeeks&&t===-1&&(t=c0),me(e)._overflowWeekday&&t===-1&&(t=h0),me(e).overflow=t),e}var r_=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,n_=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d|))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,o_=/Z|[+-]\d\d(?::?\d\d)?/,Ss=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/],["YYYYMM",/\d{6}/,!1],["YYYY",/\d{4}/,!1]],Ar=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],a_=/^\/?Date\((-?\d+)/i,l_=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\d{4}))$/,c_={UT:0,GMT:0,EDT:-4*60,EST:-5*60,CDT:-5*60,CST:-6*60,MDT:-6*60,MST:-7*60,PDT:-7*60,PST:-8*60};function xl(e){var t,i,s=e._i,r=r_.exec(s)||n_.exec(s),n,l,o,a,h=Ss.length,d=Ar.length;if(r){for(me(e).iso=!0,t=0,i=h;t<i;t++)if(Ss[t][1].exec(r[1])){l=Ss[t][0],n=Ss[t][2]!==!1;break}if(l==null){e._isValid=!1;return}if(r[3]){for(t=0,i=d;t<i;t++)if(Ar[t][1].exec(r[3])){o=(r[2]||" ")+Ar[t][0];break}if(o==null){e._isValid=!1;return}}if(!n&&o!=null){e._isValid=!1;return}if(r[4])if(o_.exec(r[4]))a="Z";else{e._isValid=!1;return}e._f=l+(o||"")+(a||""),Bn(e)}else e._isValid=!1}function h_(e,t,i,s,r,n){var l=[u_(e),kl.indexOf(t),parseInt(i,10),parseInt(s,10),parseInt(r,10)];return n&&l.push(parseInt(n,10)),l}function u_(e){var t=parseInt(e,10);return t<=49?2e3+t:t<=999?1900+t:t}function f_(e){return e.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").replace(/^\s\s*/,"").replace(/\s\s*$/,"")}function d_(e,t,i){if(e){var s=Rl.indexOf(e),r=new Date(t[0],t[1],t[2]).getDay();if(s!==r)return me(i).weekdayMismatch=!0,i._isValid=!1,!1}return!0}function __(e,t,i){if(e)return c_[e];if(t)return 0;var s=parseInt(i,10),r=s%100,n=(s-r)/100;return n*60+r}function Pl(e){var t=l_.exec(f_(e._i)),i;if(t){if(i=h_(t[4],t[3],t[2],t[5],t[6],t[7]),!d_(t[1],i,e))return;e._a=i,e._tzm=__(t[8],t[9],t[10]),e._d=as.apply(null,e._a),e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm),me(e).rfc2822=!0}else e._isValid=!1}function p_(e){var t=a_.exec(e._i);if(t!==null){e._d=new Date(+t[1]);return}if(xl(e),e._isValid===!1)delete e._isValid;else return;if(Pl(e),e._isValid===!1)delete e._isValid;else return;e._strict?e._isValid=!1:re.createFromInputFallback(e)}re.createFromInputFallback=Lt("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are discouraged. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",function(e){e._d=new Date(e._i+(e._useUTC?" UTC":""))});function Di(e,t,i){return e??t??i}function g_(e){var t=new Date(re.now());return e._useUTC?[t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate()]:[t.getFullYear(),t.getMonth(),t.getDate()]}function On(e){var t,i,s=[],r,n,l;if(!e._d){for(r=g_(e),e._w&&e._a[xt]==null&&e._a[qt]==null&&m_(e),e._dayOfYear!=null&&(l=Di(e._a[ot],r[ot]),(e._dayOfYear>ss(l)||e._dayOfYear===0)&&(me(e)._overflowDayOfYear=!0),i=as(l,0,e._dayOfYear),e._a[qt]=i.getUTCMonth(),e._a[xt]=i.getUTCDate()),t=0;t<3&&e._a[t]==null;++t)e._a[t]=s[t]=r[t];for(;t<7;t++)e._a[t]=s[t]=e._a[t]==null?t===2?1:0:e._a[t];e._a[Ze]===24&&e._a[Mt]===0&&e._a[Zt]===0&&e._a[pi]===0&&(e._nextDay=!0,e._a[Ze]=0),e._d=(e._useUTC?as:w0).apply(null,s),n=e._useUTC?e._d.getUTCDay():e._d.getDay(),e._tzm!=null&&e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm),e._nextDay&&(e._a[Ze]=24),e._w&&typeof e._w.d<"u"&&e._w.d!==n&&(me(e).weekdayMismatch=!0)}}function m_(e){var t,i,s,r,n,l,o,a,h;t=e._w,t.GG!=null||t.W!=null||t.E!=null?(n=1,l=4,i=Di(t.GG,e._a[ot],ls(Oe(),1,4).year),s=Di(t.W,1),r=Di(t.E,1),(r<1||r>7)&&(a=!0)):(n=e._locale._week.dow,l=e._locale._week.doy,h=ls(Oe(),n,l),i=Di(t.gg,e._a[ot],h.year),s=Di(t.w,h.week),t.d!=null?(r=t.d,(r<0||r>6)&&(a=!0)):t.e!=null?(r=t.e+n,(t.e<0||t.e>6)&&(a=!0)):r=n),s<1||s>$t(i,n,l)?me(e)._overflowWeeks=!0:a!=null?me(e)._overflowWeekday=!0:(o=Al(i,s,r,n,l),e._a[ot]=o.year,e._dayOfYear=o.dayOfYear)}re.ISO_8601=function(){};re.RFC_2822=function(){};function Bn(e){if(e._f===re.ISO_8601){xl(e);return}if(e._f===re.RFC_2822){Pl(e);return}e._a=[],me(e).empty=!0;var t=""+e._i,i,s,r,n,l,o=t.length,a=0,h,d;for(r=ml(e._f,e._locale).match(wn)||[],d=r.length,i=0;i<d;i++)n=r[i],s=(t.match(o0(n,e))||[])[0],s&&(l=t.substr(0,t.indexOf(s)),l.length>0&&me(e).unusedInput.push(l),t=t.slice(t.indexOf(s)+s.length),a+=s.length),Ai[n]?(s?me(e).empty=!1:me(e).unusedTokens.push(n),l0(n,s,e)):e._strict&&!s&&me(e).unusedTokens.push(n);me(e).charsLeftOver=o-a,t.length>0&&me(e).unusedInput.push(t),e._a[Ze]<=12&&me(e).bigHour===!0&&e._a[Ze]>0&&(me(e).bigHour=void 0),me(e).parsedDateParts=e._a.slice(0),me(e).meridiem=e._meridiem,e._a[Ze]=v_(e._locale,e._a[Ze],e._meridiem),h=me(e).era,h!==null&&(e._a[ot]=e._locale.erasConvertYear(h,e._a[ot])),On(e),Rn(e)}function v_(e,t,i){var s;return i==null?t:e.meridiemHour!=null?e.meridiemHour(t,i):(e.isPM!=null&&(s=e.isPM(i),s&&t<12&&(t+=12),!s&&t===12&&(t=0)),t)}function b_(e){var t,i,s,r,n,l,o=!1,a=e._f.length;if(a===0){me(e).invalidFormat=!0,e._d=new Date(NaN);return}for(r=0;r<a;r++)n=0,l=!1,t=Cn({},e),e._useUTC!=null&&(t._useUTC=e._useUTC),t._f=e._f[r],Bn(t),yn(t)&&(l=!0),n+=me(t).charsLeftOver,n+=me(t).unusedTokens.length*10,me(t).score=n,o?n<s&&(s=n,i=t):(s==null||n<s||l)&&(s=n,i=t,l&&(o=!0));ni(e,i||t)}function y_(e){if(!e._d){var t=kn(e._i),i=t.day===void 0?t.date:t.day;e._a=_l([t.year,t.month,i,t.hour,t.minute,t.second,t.millisecond],function(s){return s&&parseInt(s,10)}),On(e)}}function C_(e){var t=new gs(Rn(Il(e)));return t._nextDay&&(t.add(1,"d"),t._nextDay=void 0),t}function Il(e){var t=e._i,i=e._f;return e._locale=e._locale||Xt(e._l),t===null||i===void 0&&t===""?sr({nullInput:!0}):(typeof t=="string"&&(e._i=t=e._locale.preparse(t)),At(t)?new gs(Rn(t)):(ps(t)?e._d=t:Tt(i)?b_(e):i?Bn(e):S_(e),yn(e)||(e._d=null),e))}function S_(e){var t=e._i;_t(t)?e._d=new Date(re.now()):ps(t)?e._d=new Date(t.valueOf()):typeof t=="string"?p_(e):Tt(t)?(e._a=_l(t.slice(0),function(i){return parseInt(i,10)}),On(e)):gi(t)?y_(e):Jt(t)?e._d=new Date(t):re.createFromInputFallback(e)}function Nl(e,t,i,s,r){var n={};return(t===!0||t===!1)&&(s=t,t=void 0),(i===!0||i===!1)&&(s=i,i=void 0),(gi(e)&&bn(e)||Tt(e)&&e.length===0)&&(e=void 0),n._isAMomentObject=!0,n._useUTC=n._isUTC=r,n._l=i,n._i=e,n._f=t,n._strict=s,C_(n)}function Oe(e,t,i,s){return Nl(e,t,i,s,!1)}var w_=Lt("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var e=Oe.apply(null,arguments);return this.isValid()&&e.isValid()?e<this?this:e:sr()}),k_=Lt("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var e=Oe.apply(null,arguments);return this.isValid()&&e.isValid()?e>this?this:e:sr()});function Vl(e,t){var i,s;if(t.length===1&&Tt(t[0])&&(t=t[0]),!t.length)return Oe();for(i=t[0],s=1;s<t.length;++s)(!t[s].isValid()||t[s][e](i))&&(i=t[s]);return i}function L_(){var e=[].slice.call(arguments,0);return Vl("isBefore",e)}function E_(){var e=[].slice.call(arguments,0);return Vl("isAfter",e)}var D_=function(){return Date.now?Date.now():+new Date},Gi=["year","quarter","month","week","day","hour","minute","second","millisecond"];function M_(e){var t,i=!1,s,r=Gi.length;for(t in e)if(De(e,t)&&!(We.call(Gi,t)!==-1&&(e[t]==null||!isNaN(e[t]))))return!1;for(s=0;s<r;++s)if(e[Gi[s]]){if(i)return!1;parseFloat(e[Gi[s]])!==Se(e[Gi[s]])&&(i=!0)}return!0}function T_(){return this._isValid}function A_(){return Ot(NaN)}function fr(e){var t=kn(e),i=t.year||0,s=t.quarter||0,r=t.month||0,n=t.week||t.isoWeek||0,l=t.day||0,o=t.hour||0,a=t.minute||0,h=t.second||0,d=t.millisecond||0;this._isValid=M_(t),this._milliseconds=+d+h*1e3+a*6e4+o*1e3*60*60,this._days=+l+n*7,this._months=+r+s*3+i*12,this._data={},this._locale=Xt(),this._bubble()}function Ps(e){return e instanceof fr}function rn(e){return e<0?Math.round(-1*e)*-1:Math.round(e)}function R_(e,t,i){var s=Math.min(e.length,t.length),r=Math.abs(e.length-t.length),n=0,l;for(l=0;l<s;l++)(i&&e[l]!==t[l]||!i&&Se(e[l])!==Se(t[l]))&&n++;return n+r}function jl(e,t){fe(e,0,0,function(){var i=this.utcOffset(),s="+";return i<0&&(i=-i,s="-"),s+Nt(~~(i/60),2)+t+Nt(~~i%60,2)})}jl("Z",":");jl("ZZ","");oe("Z",cr);oe("ZZ",cr);Ae(["Z","ZZ"],function(e,t,i){i._useUTC=!0,i._tzm=Hn(cr,e)});var O_=/([\+\-]|\d\d)/gi;function Hn(e,t){var i=(t||"").match(e),s,r,n;return i===null?null:(s=i[i.length-1]||[],r=(s+"").match(O_)||["-",0,0],n=+(r[1]*60)+Se(r[2]),n===0?0:r[0]==="+"?n:-n)}function xn(e,t){var i,s;return t._isUTC?(i=t.clone(),s=(At(e)||ps(e)?e.valueOf():Oe(e).valueOf())-i.valueOf(),i._d.setTime(i._d.valueOf()+s),re.updateOffset(i,!1),i):Oe(e).local()}function nn(e){return-Math.round(e._d.getTimezoneOffset())}re.updateOffset=function(){};function B_(e,t,i){var s=this._offset||0,r;if(!this.isValid())return e!=null?this:NaN;if(e!=null){if(typeof e=="string"){if(e=Hn(cr,e),e===null)return this}else Math.abs(e)<16&&!i&&(e=e*60);return!this._isUTC&&t&&(r=nn(this)),this._offset=e,this._isUTC=!0,r!=null&&this.add(r,"m"),s!==e&&(!t||this._changeInProgress?Wl(this,Ot(e-s,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,re.updateOffset(this,!0),this._changeInProgress=null)),this}else return this._isUTC?s:nn(this)}function H_(e,t){return e!=null?(typeof e!="string"&&(e=-e),this.utcOffset(e,t),this):-this.utcOffset()}function x_(e){return this.utcOffset(0,e)}function P_(e){return this._isUTC&&(this.utcOffset(0,e),this._isUTC=!1,e&&this.subtract(nn(this),"m")),this}function I_(){if(this._tzm!=null)this.utcOffset(this._tzm,!1,!0);else if(typeof this._i=="string"){var e=Hn(r0,this._i);e!=null?this.utcOffset(e):this.utcOffset(0,!0)}return this}function N_(e){return this.isValid()?(e=e?Oe(e).utcOffset():0,(this.utcOffset()-e)%60===0):!1}function V_(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()}function j_(){if(!_t(this._isDSTShifted))return this._isDSTShifted;var e={},t;return Cn(e,this),e=Il(e),e._a?(t=e._isUTC?jt(e._a):Oe(e._a),this._isDSTShifted=this.isValid()&&R_(e._a,t.toArray())>0):this._isDSTShifted=!1,this._isDSTShifted}function F_(){return this.isValid()?!this._isUTC:!1}function U_(){return this.isValid()?this._isUTC:!1}function Fl(){return this.isValid()?this._isUTC&&this._offset===0:!1}var W_=/^(-|\+)?(?:(\d*)[. ])?(\d+):(\d+)(?::(\d+)(\.\d*)?)?$/,Y_=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;function Ot(e,t){var i=e,s=null,r,n,l;return Ps(e)?i={ms:e._milliseconds,d:e._days,M:e._months}:Jt(e)||!isNaN(+e)?(i={},t?i[t]=+e:i.milliseconds=+e):(s=W_.exec(e))?(r=s[1]==="-"?-1:1,i={y:0,d:Se(s[xt])*r,h:Se(s[Ze])*r,m:Se(s[Mt])*r,s:Se(s[Zt])*r,ms:Se(rn(s[pi]*1e3))*r}):(s=Y_.exec(e))?(r=s[1]==="-"?-1:1,i={y:di(s[2],r),M:di(s[3],r),w:di(s[4],r),d:di(s[5],r),h:di(s[6],r),m:di(s[7],r),s:di(s[8],r)}):i==null?i={}:typeof i=="object"&&("from"in i||"to"in i)&&(l=z_(Oe(i.from),Oe(i.to)),i={},i.ms=l.milliseconds,i.M=l.months),n=new fr(i),Ps(e)&&De(e,"_locale")&&(n._locale=e._locale),Ps(e)&&De(e,"_isValid")&&(n._isValid=e._isValid),n}Ot.fn=fr.prototype;Ot.invalid=A_;function di(e,t){var i=e&&parseFloat(e.replace(",","."));return(isNaN(i)?0:i)*t}function Go(e,t){var i={};return i.months=t.month()-e.month()+(t.year()-e.year())*12,e.clone().add(i.months,"M").isAfter(t)&&--i.months,i.milliseconds=+t-+e.clone().add(i.months,"M"),i}function z_(e,t){var i;return e.isValid()&&t.isValid()?(t=xn(t,e),e.isBefore(t)?i=Go(e,t):(i=Go(t,e),i.milliseconds=-i.milliseconds,i.months=-i.months),i):{milliseconds:0,months:0}}function Ul(e,t){return function(i,s){var r,n;return s!==null&&!isNaN(+s)&&(gl(t,"moment()."+t+"(period, number) is deprecated. Please use moment()."+t+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."),n=i,i=s,s=n),r=Ot(i,s),Wl(this,r,e),this}}function Wl(e,t,i,s){var r=t._milliseconds,n=rn(t._days),l=rn(t._months);e.isValid()&&(s=s??!0,l&&El(e,js(e,"Month")+l*i),n&&bl(e,"Date",js(e,"Date")+n*i),r&&e._d.setTime(e._d.valueOf()+r*i),s&&re.updateOffset(e,n||l))}var q_=Ul(1,"add"),Z_=Ul(-1,"subtract");function Yl(e){return typeof e=="string"||e instanceof String}function K_(e){return At(e)||ps(e)||Yl(e)||Jt(e)||G_(e)||$_(e)||e===null||e===void 0}function $_(e){var t=gi(e)&&!bn(e),i=!1,s=["years","year","y","months","month","M","days","day","d","dates","date","D","hours","hour","h","minutes","minute","m","seconds","second","s","milliseconds","millisecond","ms"],r,n,l=s.length;for(r=0;r<l;r+=1)n=s[r],i=i||De(e,n);return t&&i}function G_(e){var t=Tt(e),i=!1;return t&&(i=e.filter(function(s){return!Jt(s)&&Yl(e)}).length===0),t&&i}function J_(e){var t=gi(e)&&!bn(e),i=!1,s=["sameDay","nextDay","lastDay","nextWeek","lastWeek","sameElse"],r,n;for(r=0;r<s.length;r+=1)n=s[r],i=i||De(e,n);return t&&i}function X_(e,t){var i=e.diff(t,"days",!0);return i<-6?"sameElse":i<-1?"lastWeek":i<0?"lastDay":i<1?"sameDay":i<2?"nextDay":i<7?"nextWeek":"sameElse"}function Q_(e,t){arguments.length===1&&(arguments[0]?K_(arguments[0])?(e=arguments[0],t=void 0):J_(arguments[0])&&(t=arguments[0],e=void 0):(e=void 0,t=void 0));var i=e||Oe(),s=xn(i,this).startOf("day"),r=re.calendarFormat(this,s)||"sameElse",n=t&&(Ft(t[r])?t[r].call(this,i):t[r]);return this.format(n||this.localeData().calendar(r,this,Oe(i)))}function e2(){return new gs(this)}function t2(e,t){var i=At(e)?e:Oe(e);return this.isValid()&&i.isValid()?(t=Et(t)||"millisecond",t==="millisecond"?this.valueOf()>i.valueOf():i.valueOf()<this.clone().startOf(t).valueOf()):!1}function i2(e,t){var i=At(e)?e:Oe(e);return this.isValid()&&i.isValid()?(t=Et(t)||"millisecond",t==="millisecond"?this.valueOf()<i.valueOf():this.clone().endOf(t).valueOf()<i.valueOf()):!1}function s2(e,t,i,s){var r=At(e)?e:Oe(e),n=At(t)?t:Oe(t);return this.isValid()&&r.isValid()&&n.isValid()?(s=s||"()",(s[0]==="("?this.isAfter(r,i):!this.isBefore(r,i))&&(s[1]===")"?this.isBefore(n,i):!this.isAfter(n,i))):!1}function r2(e,t){var i=At(e)?e:Oe(e),s;return this.isValid()&&i.isValid()?(t=Et(t)||"millisecond",t==="millisecond"?this.valueOf()===i.valueOf():(s=i.valueOf(),this.clone().startOf(t).valueOf()<=s&&s<=this.clone().endOf(t).valueOf())):!1}function n2(e,t){return this.isSame(e,t)||this.isAfter(e,t)}function o2(e,t){return this.isSame(e,t)||this.isBefore(e,t)}function a2(e,t,i){var s,r,n;if(!this.isValid())return NaN;if(s=xn(e,this),!s.isValid())return NaN;switch(r=(s.utcOffset()-this.utcOffset())*6e4,t=Et(t),t){case"year":n=Is(this,s)/12;break;case"month":n=Is(this,s);break;case"quarter":n=Is(this,s)/3;break;case"second":n=(this-s)/1e3;break;case"minute":n=(this-s)/6e4;break;case"hour":n=(this-s)/36e5;break;case"day":n=(this-s-r)/864e5;break;case"week":n=(this-s-r)/6048e5;break;default:n=this-s}return i?n:St(n)}function Is(e,t){if(e.date()<t.date())return-Is(t,e);var i=(t.year()-e.year())*12+(t.month()-e.month()),s=e.clone().add(i,"months"),r,n;return t-s<0?(r=e.clone().add(i-1,"months"),n=(t-s)/(s-r)):(r=e.clone().add(i+1,"months"),n=(t-s)/(r-s)),-(i+n)||0}re.defaultFormat="YYYY-MM-DDTHH:mm:ssZ";re.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";function l2(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")}function c2(e){if(!this.isValid())return null;var t=e!==!0,i=t?this.clone().utc():this;return i.year()<0||i.year()>9999?xs(i,t?"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYYYY-MM-DD[T]HH:mm:ss.SSSZ"):Ft(Date.prototype.toISOString)?t?this.toDate().toISOString():new Date(this.valueOf()+this.utcOffset()*60*1e3).toISOString().replace("Z",xs(i,"Z")):xs(i,t?"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYY-MM-DD[T]HH:mm:ss.SSSZ")}function h2(){if(!this.isValid())return"moment.invalid(/* "+this._i+" */)";var e="moment",t="",i,s,r,n;return this.isLocal()||(e=this.utcOffset()===0?"moment.utc":"moment.parseZone",t="Z"),i="["+e+'("]',s=0<=this.year()&&this.year()<=9999?"YYYY":"YYYYYY",r="-MM-DD[T]HH:mm:ss.SSS",n=t+'[")]',this.format(i+s+r+n)}function u2(e){e||(e=this.isUtc()?re.defaultFormatUtc:re.defaultFormat);var t=xs(this,e);return this.localeData().postformat(t)}function f2(e,t){return this.isValid()&&(At(e)&&e.isValid()||Oe(e).isValid())?Ot({to:this,from:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()}function d2(e){return this.from(Oe(),e)}function _2(e,t){return this.isValid()&&(At(e)&&e.isValid()||Oe(e).isValid())?Ot({from:this,to:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()}function p2(e){return this.to(Oe(),e)}function zl(e){var t;return e===void 0?this._locale._abbr:(t=Xt(e),t!=null&&(this._locale=t),this)}var ql=Lt("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(e){return e===void 0?this.localeData():this.locale(e)});function Zl(){return this._locale}var Ws=1e3,Ri=60*Ws,Ys=60*Ri,Kl=(365*400+97)*24*Ys;function Oi(e,t){return(e%t+t)%t}function $l(e,t,i){return e<100&&e>=0?new Date(e+400,t,i)-Kl:new Date(e,t,i).valueOf()}function Gl(e,t,i){return e<100&&e>=0?Date.UTC(e+400,t,i)-Kl:Date.UTC(e,t,i)}function g2(e){var t,i;if(e=Et(e),e===void 0||e==="millisecond"||!this.isValid())return this;switch(i=this._isUTC?Gl:$l,e){case"year":t=i(this.year(),0,1);break;case"quarter":t=i(this.year(),this.month()-this.month()%3,1);break;case"month":t=i(this.year(),this.month(),1);break;case"week":t=i(this.year(),this.month(),this.date()-this.weekday());break;case"isoWeek":t=i(this.year(),this.month(),this.date()-(this.isoWeekday()-1));break;case"day":case"date":t=i(this.year(),this.month(),this.date());break;case"hour":t=this._d.valueOf(),t-=Oi(t+(this._isUTC?0:this.utcOffset()*Ri),Ys);break;case"minute":t=this._d.valueOf(),t-=Oi(t,Ri);break;case"second":t=this._d.valueOf(),t-=Oi(t,Ws);break}return this._d.setTime(t),re.updateOffset(this,!0),this}function m2(e){var t,i;if(e=Et(e),e===void 0||e==="millisecond"||!this.isValid())return this;switch(i=this._isUTC?Gl:$l,e){case"year":t=i(this.year()+1,0,1)-1;break;case"quarter":t=i(this.year(),this.month()-this.month()%3+3,1)-1;break;case"month":t=i(this.year(),this.month()+1,1)-1;break;case"week":t=i(this.year(),this.month(),this.date()-this.weekday()+7)-1;break;case"isoWeek":t=i(this.year(),this.month(),this.date()-(this.isoWeekday()-1)+7)-1;break;case"day":case"date":t=i(this.year(),this.month(),this.date()+1)-1;break;case"hour":t=this._d.valueOf(),t+=Ys-Oi(t+(this._isUTC?0:this.utcOffset()*Ri),Ys)-1;break;case"minute":t=this._d.valueOf(),t+=Ri-Oi(t,Ri)-1;break;case"second":t=this._d.valueOf(),t+=Ws-Oi(t,Ws)-1;break}return this._d.setTime(t),re.updateOffset(this,!0),this}function v2(){return this._d.valueOf()-(this._offset||0)*6e4}function b2(){return Math.floor(this.valueOf()/1e3)}function y2(){return new Date(this.valueOf())}function C2(){var e=this;return[e.year(),e.month(),e.date(),e.hour(),e.minute(),e.second(),e.millisecond()]}function S2(){var e=this;return{years:e.year(),months:e.month(),date:e.date(),hours:e.hours(),minutes:e.minutes(),seconds:e.seconds(),milliseconds:e.milliseconds()}}function w2(){return this.isValid()?this.toISOString():null}function k2(){return yn(this)}function L2(){return ni({},me(this))}function E2(){return me(this).overflow}function D2(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}}fe("N",0,0,"eraAbbr");fe("NN",0,0,"eraAbbr");fe("NNN",0,0,"eraAbbr");fe("NNNN",0,0,"eraName");fe("NNNNN",0,0,"eraNarrow");fe("y",["y",1],"yo","eraYear");fe("y",["yy",2],0,"eraYear");fe("y",["yyy",3],0,"eraYear");fe("y",["yyyy",4],0,"eraYear");oe("N",Pn);oe("NN",Pn);oe("NNN",Pn);oe("NNNN",N2);oe("NNNNN",V2);Ae(["N","NN","NNN","NNNN","NNNNN"],function(e,t,i,s){var r=i._locale.erasParse(e,s,i._strict);r?me(i).era=r:me(i).invalidEra=e});oe("y",Ui);oe("yy",Ui);oe("yyy",Ui);oe("yyyy",Ui);oe("yo",j2);Ae(["y","yy","yyy","yyyy"],ot);Ae(["yo"],function(e,t,i,s){var r;i._locale._eraYearOrdinalRegex&&(r=e.match(i._locale._eraYearOrdinalRegex)),i._locale.eraYearOrdinalParse?t[ot]=i._locale.eraYearOrdinalParse(e,r):t[ot]=parseInt(e,10)});function M2(e,t){var i,s,r,n=this._eras||Xt("en")._eras;for(i=0,s=n.length;i<s;++i){switch(typeof n[i].since){case"string":r=re(n[i].since).startOf("day"),n[i].since=r.valueOf();break}switch(typeof n[i].until){case"undefined":n[i].until=1/0;break;case"string":r=re(n[i].until).startOf("day").valueOf(),n[i].until=r.valueOf();break}}return n}function T2(e,t,i){var s,r,n=this.eras(),l,o,a;for(e=e.toUpperCase(),s=0,r=n.length;s<r;++s)if(l=n[s].name.toUpperCase(),o=n[s].abbr.toUpperCase(),a=n[s].narrow.toUpperCase(),i)switch(t){case"N":case"NN":case"NNN":if(o===e)return n[s];break;case"NNNN":if(l===e)return n[s];break;case"NNNNN":if(a===e)return n[s];break}else if([l,o,a].indexOf(e)>=0)return n[s]}function A2(e,t){var i=e.since<=e.until?1:-1;return t===void 0?re(e.since).year():re(e.since).year()+(t-e.offset)*i}function R2(){var e,t,i,s=this.localeData().eras();for(e=0,t=s.length;e<t;++e)if(i=this.clone().startOf("day").valueOf(),s[e].since<=i&&i<=s[e].until||s[e].until<=i&&i<=s[e].since)return s[e].name;return""}function O2(){var e,t,i,s=this.localeData().eras();for(e=0,t=s.length;e<t;++e)if(i=this.clone().startOf("day").valueOf(),s[e].since<=i&&i<=s[e].until||s[e].until<=i&&i<=s[e].since)return s[e].narrow;return""}function B2(){var e,t,i,s=this.localeData().eras();for(e=0,t=s.length;e<t;++e)if(i=this.clone().startOf("day").valueOf(),s[e].since<=i&&i<=s[e].until||s[e].until<=i&&i<=s[e].since)return s[e].abbr;return""}function H2(){var e,t,i,s,r=this.localeData().eras();for(e=0,t=r.length;e<t;++e)if(i=r[e].since<=r[e].until?1:-1,s=this.clone().startOf("day").valueOf(),r[e].since<=s&&s<=r[e].until||r[e].until<=s&&s<=r[e].since)return(this.year()-re(r[e].since).year())*i+r[e].offset;return this.year()}function x2(e){return De(this,"_erasNameRegex")||In.call(this),e?this._erasNameRegex:this._erasRegex}function P2(e){return De(this,"_erasAbbrRegex")||In.call(this),e?this._erasAbbrRegex:this._erasRegex}function I2(e){return De(this,"_erasNarrowRegex")||In.call(this),e?this._erasNarrowRegex:this._erasRegex}function Pn(e,t){return t.erasAbbrRegex(e)}function N2(e,t){return t.erasNameRegex(e)}function V2(e,t){return t.erasNarrowRegex(e)}function j2(e,t){return t._eraYearOrdinalRegex||Ui}function In(){var e=[],t=[],i=[],s=[],r,n,l=this.eras();for(r=0,n=l.length;r<n;++r)t.push(mt(l[r].name)),e.push(mt(l[r].abbr)),i.push(mt(l[r].narrow)),s.push(mt(l[r].name)),s.push(mt(l[r].abbr)),s.push(mt(l[r].narrow));this._erasRegex=new RegExp("^("+s.join("|")+")","i"),this._erasNameRegex=new RegExp("^("+t.join("|")+")","i"),this._erasAbbrRegex=new RegExp("^("+e.join("|")+")","i"),this._erasNarrowRegex=new RegExp("^("+i.join("|")+")","i")}fe(0,["gg",2],0,function(){return this.weekYear()%100});fe(0,["GG",2],0,function(){return this.isoWeekYear()%100});function dr(e,t){fe(0,[e,e.length],0,t)}dr("gggg","weekYear");dr("ggggg","weekYear");dr("GGGG","isoWeekYear");dr("GGGGG","isoWeekYear");lt("weekYear","gg");lt("isoWeekYear","GG");ct("weekYear",1);ct("isoWeekYear",1);oe("G",lr);oe("g",lr);oe("GG",Be,yt);oe("gg",Be,yt);oe("GGGG",En,Ln);oe("gggg",En,Ln);oe("GGGGG",ar,nr);oe("ggggg",ar,nr);vs(["gggg","ggggg","GGGG","GGGGG"],function(e,t,i,s){t[s.substr(0,2)]=Se(e)});vs(["gg","GG"],function(e,t,i,s){t[s]=re.parseTwoDigitYear(e)});function F2(e){return Jl.call(this,e,this.week(),this.weekday(),this.localeData()._week.dow,this.localeData()._week.doy)}function U2(e){return Jl.call(this,e,this.isoWeek(),this.isoWeekday(),1,4)}function W2(){return $t(this.year(),1,4)}function Y2(){return $t(this.isoWeekYear(),1,4)}function z2(){var e=this.localeData()._week;return $t(this.year(),e.dow,e.doy)}function q2(){var e=this.localeData()._week;return $t(this.weekYear(),e.dow,e.doy)}function Jl(e,t,i,s,r){var n;return e==null?ls(this,s,r).year:(n=$t(e,s,r),t>n&&(t=n),Z2.call(this,e,t,i,s,r))}function Z2(e,t,i,s,r){var n=Al(e,t,i,s,r),l=as(n.year,0,n.dayOfYear);return this.year(l.getUTCFullYear()),this.month(l.getUTCMonth()),this.date(l.getUTCDate()),this}fe("Q",0,"Qo","quarter");lt("quarter","Q");ct("quarter",7);oe("Q",yl);Ae("Q",function(e,t){t[qt]=(Se(e)-1)*3});function K2(e){return e==null?Math.ceil((this.month()+1)/3):this.month((e-1)*3+this.month()%3)}fe("D",["DD",2],"Do","date");lt("date","D");ct("date",9);oe("D",Be);oe("DD",Be,yt);oe("Do",function(e,t){return e?t._dayOfMonthOrdinalParse||t._ordinalParse:t._dayOfMonthOrdinalParseLenient});Ae(["D","DD"],xt);Ae("Do",function(e,t){t[xt]=Se(e.match(Be)[0])});var Xl=Fi("Date",!0);fe("DDD",["DDDD",3],"DDDo","dayOfYear");lt("dayOfYear","DDD");ct("dayOfYear",4);oe("DDD",or);oe("DDDD",Cl);Ae(["DDD","DDDD"],function(e,t,i){i._dayOfYear=Se(e)});function $2(e){var t=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return e==null?t:this.add(e-t,"d")}fe("m",["mm",2],0,"minute");lt("minute","m");ct("minute",14);oe("m",Be);oe("mm",Be,yt);Ae(["m","mm"],Mt);var G2=Fi("Minutes",!1);fe("s",["ss",2],0,"second");lt("second","s");ct("second",15);oe("s",Be);oe("ss",Be,yt);Ae(["s","ss"],Zt);var J2=Fi("Seconds",!1);fe("S",0,0,function(){return~~(this.millisecond()/100)});fe(0,["SS",2],0,function(){return~~(this.millisecond()/10)});fe(0,["SSS",3],0,"millisecond");fe(0,["SSSS",4],0,function(){return this.millisecond()*10});fe(0,["SSSSS",5],0,function(){return this.millisecond()*100});fe(0,["SSSSSS",6],0,function(){return this.millisecond()*1e3});fe(0,["SSSSSSS",7],0,function(){return this.millisecond()*1e4});fe(0,["SSSSSSSS",8],0,function(){return this.millisecond()*1e5});fe(0,["SSSSSSSSS",9],0,function(){return this.millisecond()*1e6});lt("millisecond","ms");ct("millisecond",16);oe("S",or,yl);oe("SS",or,yt);oe("SSS",or,Cl);var oi,Ql;for(oi="SSSS";oi.length<=9;oi+="S")oe(oi,Ui);function X2(e,t){t[pi]=Se(("0."+e)*1e3)}for(oi="S";oi.length<=9;oi+="S")Ae(oi,X2);Ql=Fi("Milliseconds",!1);fe("z",0,0,"zoneAbbr");fe("zz",0,0,"zoneName");function Q2(){return this._isUTC?"UTC":""}function ep(){return this._isUTC?"Coordinated Universal Time":""}var X=gs.prototype;X.add=q_;X.calendar=Q_;X.clone=e2;X.diff=a2;X.endOf=m2;X.format=u2;X.from=f2;X.fromNow=d2;X.to=_2;X.toNow=p2;X.get=i0;X.invalidAt=E2;X.isAfter=t2;X.isBefore=i2;X.isBetween=s2;X.isSame=r2;X.isSameOrAfter=n2;X.isSameOrBefore=o2;X.isValid=k2;X.lang=ql;X.locale=zl;X.localeData=Zl;X.max=k_;X.min=w_;X.parsingFlags=L2;X.set=s0;X.startOf=g2;X.subtract=Z_;X.toArray=C2;X.toObject=S2;X.toDate=y2;X.toISOString=c2;X.inspect=h2;typeof Symbol<"u"&&Symbol.for!=null&&(X[Symbol.for("nodejs.util.inspect.custom")]=function(){return"Moment<"+this.format()+">"});X.toJSON=w2;X.toString=l2;X.unix=b2;X.valueOf=v2;X.creationData=D2;X.eraName=R2;X.eraNarrow=O2;X.eraAbbr=B2;X.eraYear=H2;X.year=Tl;X.isLeapYear=S0;X.weekYear=F2;X.isoWeekYear=U2;X.quarter=X.quarters=K2;X.month=Dl;X.daysInMonth=b0;X.week=X.weeks=M0;X.isoWeek=X.isoWeeks=T0;X.weeksInYear=z2;X.weeksInWeekYear=q2;X.isoWeeksInYear=W2;X.isoWeeksInISOWeekYear=Y2;X.date=Xl;X.day=X.days=U0;X.weekday=W0;X.isoWeekday=Y0;X.dayOfYear=$2;X.hour=X.hours=J0;X.minute=X.minutes=G2;X.second=X.seconds=J2;X.millisecond=X.milliseconds=Ql;X.utcOffset=B_;X.utc=x_;X.local=P_;X.parseZone=I_;X.hasAlignedHourOffset=N_;X.isDST=V_;X.isLocal=F_;X.isUtcOffset=U_;X.isUtc=Fl;X.isUTC=Fl;X.zoneAbbr=Q2;X.zoneName=ep;X.dates=Lt("dates accessor is deprecated. Use date instead.",Xl);X.months=Lt("months accessor is deprecated. Use month instead",Dl);X.years=Lt("years accessor is deprecated. Use year instead",Tl);X.zone=Lt("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",H_);X.isDSTShifted=Lt("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",j_);function tp(e){return Oe(e*1e3)}function ip(){return Oe.apply(null,arguments).parseZone()}function ec(e){return e}var Me=Sn.prototype;Me.calendar=Ud;Me.longDateFormat=qd;Me.invalidDate=Kd;Me.ordinal=Jd;Me.preparse=ec;Me.postformat=ec;Me.relativeTime=Qd;Me.pastFuture=e0;Me.set=jd;Me.eras=M2;Me.erasParse=T2;Me.erasConvertYear=A2;Me.erasAbbrRegex=P2;Me.erasNameRegex=x2;Me.erasNarrowRegex=I2;Me.months=p0;Me.monthsShort=g0;Me.monthsParse=v0;Me.monthsRegex=C0;Me.monthsShortRegex=y0;Me.week=k0;Me.firstDayOfYear=D0;Me.firstDayOfWeek=E0;Me.weekdays=I0;Me.weekdaysMin=V0;Me.weekdaysShort=N0;Me.weekdaysParse=F0;Me.weekdaysRegex=z0;Me.weekdaysShortRegex=q0;Me.weekdaysMinRegex=Z0;Me.isPM=$0;Me.meridiem=X0;function zs(e,t,i,s){var r=Xt(),n=jt().set(s,t);return r[i](n,e)}function tc(e,t,i){if(Jt(e)&&(t=e,e=void 0),e=e||"",t!=null)return zs(e,t,i,"month");var s,r=[];for(s=0;s<12;s++)r[s]=zs(e,s,i,"month");return r}function Nn(e,t,i,s){typeof e=="boolean"?(Jt(t)&&(i=t,t=void 0),t=t||""):(t=e,i=t,e=!1,Jt(t)&&(i=t,t=void 0),t=t||"");var r=Xt(),n=e?r._week.dow:0,l,o=[];if(i!=null)return zs(t,(i+n)%7,s,"day");for(l=0;l<7;l++)o[l]=zs(t,(l+n)%7,s,"day");return o}function sp(e,t){return tc(e,t,"months")}function rp(e,t){return tc(e,t,"monthsShort")}function np(e,t,i){return Nn(e,t,i,"weekdays")}function op(e,t,i){return Nn(e,t,i,"weekdaysShort")}function ap(e,t,i){return Nn(e,t,i,"weekdaysMin")}li("en",{eras:[{since:"0001-01-01",until:1/0,offset:1,name:"Anno Domini",narrow:"AD",abbr:"AD"},{since:"0000-12-31",until:-1/0,offset:1,name:"Before Christ",narrow:"BC",abbr:"BC"}],dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(e){var t=e%10,i=Se(e%100/10)===1?"th":t===1?"st":t===2?"nd":t===3?"rd":"th";return e+i}});re.lang=Lt("moment.lang is deprecated. Use moment.locale instead.",li);re.langData=Lt("moment.langData is deprecated. Use moment.localeData instead.",Xt);var Ut=Math.abs;function lp(){var e=this._data;return this._milliseconds=Ut(this._milliseconds),this._days=Ut(this._days),this._months=Ut(this._months),e.milliseconds=Ut(e.milliseconds),e.seconds=Ut(e.seconds),e.minutes=Ut(e.minutes),e.hours=Ut(e.hours),e.months=Ut(e.months),e.years=Ut(e.years),this}function ic(e,t,i,s){var r=Ot(t,i);return e._milliseconds+=s*r._milliseconds,e._days+=s*r._days,e._months+=s*r._months,e._bubble()}function cp(e,t){return ic(this,e,t,1)}function hp(e,t){return ic(this,e,t,-1)}function Jo(e){return e<0?Math.floor(e):Math.ceil(e)}function up(){var e=this._milliseconds,t=this._days,i=this._months,s=this._data,r,n,l,o,a;return e>=0&&t>=0&&i>=0||e<=0&&t<=0&&i<=0||(e+=Jo(on(i)+t)*864e5,t=0,i=0),s.milliseconds=e%1e3,r=St(e/1e3),s.seconds=r%60,n=St(r/60),s.minutes=n%60,l=St(n/60),s.hours=l%24,t+=St(l/24),a=St(sc(t)),i+=a,t-=Jo(on(a)),o=St(i/12),i%=12,s.days=t,s.months=i,s.years=o,this}function sc(e){return e*4800/146097}function on(e){return e*146097/4800}function fp(e){if(!this.isValid())return NaN;var t,i,s=this._milliseconds;if(e=Et(e),e==="month"||e==="quarter"||e==="year")switch(t=this._days+s/864e5,i=this._months+sc(t),e){case"month":return i;case"quarter":return i/3;case"year":return i/12}else switch(t=this._days+Math.round(on(this._months)),e){case"week":return t/7+s/6048e5;case"day":return t+s/864e5;case"hour":return t*24+s/36e5;case"minute":return t*1440+s/6e4;case"second":return t*86400+s/1e3;case"millisecond":return Math.floor(t*864e5)+s;default:throw new Error("Unknown unit "+e)}}function dp(){return this.isValid()?this._milliseconds+this._days*864e5+this._months%12*2592e6+Se(this._months/12)*31536e6:NaN}function Qt(e){return function(){return this.as(e)}}var _p=Qt("ms"),pp=Qt("s"),gp=Qt("m"),mp=Qt("h"),vp=Qt("d"),bp=Qt("w"),yp=Qt("M"),Cp=Qt("Q"),Sp=Qt("y");function wp(){return Ot(this)}function kp(e){return e=Et(e),this.isValid()?this[e+"s"]():NaN}function yi(e){return function(){return this.isValid()?this._data[e]:NaN}}var Lp=yi("milliseconds"),Ep=yi("seconds"),Dp=yi("minutes"),Mp=yi("hours"),Tp=yi("days"),Ap=yi("months"),Rp=yi("years");function Op(){return St(this.days()/7)}var Wt=Math.round,Mi={ss:44,s:45,m:45,h:22,d:26,w:null,M:11};function Bp(e,t,i,s,r){return r.relativeTime(t||1,!!i,e,s)}function Hp(e,t,i,s){var r=Ot(e).abs(),n=Wt(r.as("s")),l=Wt(r.as("m")),o=Wt(r.as("h")),a=Wt(r.as("d")),h=Wt(r.as("M")),d=Wt(r.as("w")),u=Wt(r.as("y")),g=n<=i.ss&&["s",n]||n<i.s&&["ss",n]||l<=1&&["m"]||l<i.m&&["mm",l]||o<=1&&["h"]||o<i.h&&["hh",o]||a<=1&&["d"]||a<i.d&&["dd",a];return i.w!=null&&(g=g||d<=1&&["w"]||d<i.w&&["ww",d]),g=g||h<=1&&["M"]||h<i.M&&["MM",h]||u<=1&&["y"]||["yy",u],g[2]=t,g[3]=+e>0,g[4]=s,Bp.apply(null,g)}function xp(e){return e===void 0?Wt:typeof e=="function"?(Wt=e,!0):!1}function Pp(e,t){return Mi[e]===void 0?!1:t===void 0?Mi[e]:(Mi[e]=t,e==="s"&&(Mi.ss=t-1),!0)}function Ip(e,t){if(!this.isValid())return this.localeData().invalidDate();var i=!1,s=Mi,r,n;return typeof e=="object"&&(t=e,e=!1),typeof e=="boolean"&&(i=e),typeof t=="object"&&(s=Object.assign({},Mi,t),t.s!=null&&t.ss==null&&(s.ss=t.s-1)),r=this.localeData(),n=Hp(this,!i,s,r),i&&(n=r.pastFuture(+this,n)),r.postformat(n)}var Rr=Math.abs;function ki(e){return(e>0)-(e<0)||+e}function _r(){if(!this.isValid())return this.localeData().invalidDate();var e=Rr(this._milliseconds)/1e3,t=Rr(this._days),i=Rr(this._months),s,r,n,l,o=this.asSeconds(),a,h,d,u;return o?(s=St(e/60),r=St(s/60),e%=60,s%=60,n=St(i/12),i%=12,l=e?e.toFixed(3).replace(/\.?0+$/,""):"",a=o<0?"-":"",h=ki(this._months)!==ki(o)?"-":"",d=ki(this._days)!==ki(o)?"-":"",u=ki(this._milliseconds)!==ki(o)?"-":"",a+"P"+(n?h+n+"Y":"")+(i?h+i+"M":"")+(t?d+t+"D":"")+(r||s||e?"T":"")+(r?u+r+"H":"")+(s?u+s+"M":"")+(e?u+l+"S":"")):"P0D"}var ke=fr.prototype;ke.isValid=T_;ke.abs=lp;ke.add=cp;ke.subtract=hp;ke.as=fp;ke.asMilliseconds=_p;ke.asSeconds=pp;ke.asMinutes=gp;ke.asHours=mp;ke.asDays=vp;ke.asWeeks=bp;ke.asMonths=yp;ke.asQuarters=Cp;ke.asYears=Sp;ke.valueOf=dp;ke._bubble=up;ke.clone=wp;ke.get=kp;ke.milliseconds=Lp;ke.seconds=Ep;ke.minutes=Dp;ke.hours=Mp;ke.days=Tp;ke.weeks=Op;ke.months=Ap;ke.years=Rp;ke.humanize=Ip;ke.toISOString=_r;ke.toString=_r;ke.toJSON=_r;ke.locale=zl;ke.localeData=Zl;ke.toIsoString=Lt("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",_r);ke.lang=ql;fe("X",0,0,"unix");fe("x",0,0,"valueOf");oe("x",lr);oe("X",n0);Ae("X",function(e,t,i){i._d=new Date(parseFloat(e)*1e3)});Ae("x",function(e,t,i){i._d=new Date(Se(e))});//! moment.js
re.version="2.29.4";Nd(Oe);re.fn=X;re.min=L_;re.max=E_;re.now=D_;re.utc=jt;re.unix=tp;re.months=sp;re.isDate=ps;re.locale=li;re.invalid=sr;re.duration=Ot;re.isMoment=At;re.weekdays=np;re.parseZone=ip;re.localeData=Xt;re.isDuration=Ps;re.monthsShort=rp;re.weekdaysMin=ap;re.defineLocale=An;re.updateLocale=i_;re.locales=s_;re.weekdaysShort=op;re.normalizeUnits=Et;re.relativeTimeRounding=xp;re.relativeTimeThreshold=Pp;re.calendarFormat=X_;re.prototype=X;re.HTML5_FMT={DATETIME_LOCAL:"YYYY-MM-DDTHH:mm",DATETIME_LOCAL_SECONDS:"YYYY-MM-DDTHH:mm:ss",DATETIME_LOCAL_MS:"YYYY-MM-DDTHH:mm:ss.SSS",DATE:"YYYY-MM-DD",TIME:"HH:mm",TIME_SECONDS:"HH:mm:ss",TIME_MS:"HH:mm:ss.SSS",WEEK:"GGGG-[W]WW",MONTH:"YYYY-MM"};function Np(e){let t,i,s,r;const n=[e[1]];let l={};for(let o=0;o<n.length;o+=1)l=bi(l,n[o]);return t=new ul({props:l}),s=new xd({props:{roots:e[0]}}),s.$on("open",e[2]),s.$on("menu",e[3]),s.$on("fold",jp),s.$on("unfold",Fp),{c(){se(t.$$.fragment),i=ue(),se(s.$$.fragment)},m(o,a){te(t,o,a),J(o,i,a),te(s,o,a),r=!0},p(o,[a]){const h=a&2?ji(n,[_s(o[1])]):{};t.$set(h);const d={};a&1&&(d.roots=o[0]),s.$set(d)},i(o){r||(W(t.$$.fragment,o),W(s.$$.fragment,o),r=!0)},o(o){q(t.$$.fragment,o),q(s.$$.fragment,o),r=!1},d(o){o&&G(i),ie(t,o),ie(s,o)}}}const ws="/",ri="/respurces",Vp="#icon-jupyter-client-simple",ks="/kernelspecs",Xo="#icon-jupyter-client-kernelspec",Ji="/kernels",Qo="#icon-jupyter-client-kernel",Xi="/sessions",ea="#icon-jupyter-client-session",Or="YYYY-MM-DD hh:mm:ss";function jp(e){e.detail.props.folded.set(!0)}async function Fp(e){e.detail.props.folded.set(!1)}function Up(e,t,i){let{plugin:s}=t,{kernelspecs:r={default:"",kernelspecs:{}}}=t,{kernels:n=[]}=t,{sessions:l=[]}=t,{currentSpec:o=""}=t,{currentKernel:a=""}=t,{currentSession:h=""}=t,{currentDocument:d=""}=t;async function u(k,C,w){const E=[];for(const[R,O]of Object.entries(k.kernelspecs)){if(!O)continue;const T=`${ri}/${O.name}`,x={type:ge.Folder,name:O.name,path:T,directory:ri,focus:O.name===o,folded:!1,icon:s.kernelName2logoObjectURL.has(O.name)?s.kernelName2logoObjectURL.get(O.name):await s.loadKernelSpecIcon(O),iconAriaLabel:O.language,text:O.name,textAriaLabel:O.display_name};x.children=await(async()=>{var Z;const j=[],Y=await((Z=s.bridge)==null?void 0:Z.call("jupyter.kernels.running"));for(const D of Y??[]){if(D.name!==O.name)continue;const B=`${T}/${D.id}`,A=re(D.last_activity),H={type:ge.Folder,name:D.id,path:B,directory:T,focus:D.id===a,folded:!1,icon:`#icon-jupyter-client-kernel-${D.execution_state}`,iconAriaLabel:D.execution_state,text:D.name,textAriaLabel:`${A.format(Or)}<br/>${A.fromNow()}`,title:D.id};H.children=await(async()=>{var le,ae;const I=[],ee=await((le=s.bridge)==null?void 0:le.call("jupyter.sessions.running"));for(const be of ee??[]){if(((ae=be.kernel)==null?void 0:ae.id)!==D.id)continue;const M=`${B}/${be.id}`,N={type:ge.Folder,name:be.id,path:M,directory:B,focus:be.id===h,folded:!1,icon:`#icon-jupyter-client-session-${be.type}`,iconAriaLabel:be.type,text:be.name,textAriaLabel:be.path,title:be.id};N.children=await(async()=>{const K=[],z=s.session2docs.get(be.id);if(z&&z.size>0)for(const _e of z.values()){if(!s.doc2info.has(_e)){const gt=await s.client.getDocInfo({id:_e});s.doc2info.set(_e,gt.data)}const Q=s.doc2info.get(_e),we=`${M}/${Q.id}`,He=re(Q.ial.updated,"YYYYMMDDhhmmss"),Ue={type:ge.File,name:Q.id,path:we,directory:M,focus:Q.id===d,icon:/^[1-9a-f]+$/.test(Q.icon)?Id(Q.icon):Q.icon?`/emojis/${Q.icon}`:"📄",text:Q.name,textAriaLabel:`${He.format(Or)}<br/>${A.fromNow()}`,title:Q.name};K.push(Ue)}return K})(),N.count=N.children.length,I.push(N)}return I})(),H.count=H.children.length,j.push(H)}return j})(),x.count=x.children.length,E.push(x)}return E}async function g(k){const C=[];for(const[w,E]of Object.entries(k.kernelspecs)){if(!E)continue;const R={type:ge.File,name:w,path:`${ks}/${w}`,directory:ks,focus:w===o,icon:Xo,text:w,textAriaLabel:E.display_name},O=s.kernelName2logoObjectURL.get(w);O?R.icon=O:R.icon=await s.loadKernelSpecIcon(E),R.iconAriaLabel=E.language,C.push(R)}return C}function b(k){const C=[];for(const w of k){const E=re(w.last_activity);C.push({type:ge.File,name:w.id,path:`${Ji}/${w.id}`,directory:Ji,focus:w.id===a,icon:`#icon-jupyter-client-kernel-${w.execution_state}`,iconAriaLabel:w.execution_state,text:w.name,textAriaLabel:`${E.format(Or)}<br/>${E.fromNow()}`,symlinkIcon:s.kernelName2logoObjectURL.get(w.name)??Qo,symlinkAriaLabel:s.kernelName2language.get(w.name),symlink:!0,count:w.connections,title:w.id})}return C}function y(k){var w,E,R,O,T;const C=[];for(const x of k)C.push({type:ge.File,name:x.id,path:`${Xi}/${x.id}`,directory:Xi,focus:x.id===h,icon:`#icon-jupyter-client-session-${x.type}`,iconAriaLabel:x.type,text:x.name,textAriaLabel:`${(w=x.kernel)==null?void 0:w.name}<br/>${x.path}`,symlink:!0,symlinkIcon:s.kernelName2logoObjectURL.get(((E=x.kernel)==null?void 0:E.name)??"")??ea,symlinkAriaLabel:s.kernelName2language.get(((R=x.kernel)==null?void 0:R.name)??""),count:((O=s.session2docs.get(x.id))==null?void 0:O.size)??0,countAriaLabel:(T=x.kernel)==null?void 0:T.execution_state,title:x.id});return C}function m(k,C,w,E){var R;(R=v[0].children)==null||R.forEach((O,T)=>{var x;(x=O.children)==null||x.forEach((j,Y)=>{var Z;(Z=j.children)==null||Z.forEach((D,B)=>{var A;(A=D.children)==null||A.forEach((H,I)=>{i(0,v[0].children[T].children[Y].children[B].children[I].focus=H.name===E,v)}),i(0,v[0].children[T].children[Y].children[B].focus=D.name===w,v)}),i(0,v[0].children[T].children[Y].focus=j.name===C,v)}),i(0,v[0].children[T].focus=O.name===k,v)})}function c(k){var C;(C=v[1].children)==null||C.forEach((w,E)=>{i(0,v[1].children[E].focus=w.name===k,v)})}function f(k){var C;(C=v[2].children)==null||C.forEach((w,E)=>{i(0,v[2].children[E].focus=w.name===k,v)})}function _(k){var C;(C=v[3].children)==null||C.forEach((w,E)=>{i(0,v[3].children[E].focus=w.name===k,v)})}const p={logo:"#icon-jupyter-client",title:s.i18n.dock.title,icons:[{icon:"#iconRefresh",type:"refresh",ariaLabel:s.i18n.dock.refresh.ariaLabel,tooltipsDirection:vi.sw,onClick:async(k,C,w)=>{await s.jupyterForceRefresh()}},{icon:"#iconMin",type:"min",ariaLabel:`${globalThis.siyuan.languages.min} ${s.siyuan.adaptHotkey("⌘W")}`,tooltipsDirection:vi.sw}]};let v=[{type:ge.Root,name:"respurces",path:ri,directory:ws,depth:0,folded:!1,icon:Vp,text:s.i18n.dock.resources.text},{type:ge.Root,name:"kernelspec",path:ks,directory:ws,depth:0,folded:!1,icon:Xo,text:s.i18n.dock.kernelspecs.text},{type:ge.Root,name:"kernels",path:Ji,directory:ws,depth:0,folded:!1,icon:Qo,text:s.i18n.dock.kernels.text},{type:ge.Root,name:"sessions",path:Xi,directory:ws,depth:0,folded:!1,icon:ea,text:s.i18n.dock.sessions.text}];mn(()=>{for(const k of s.kernelName2logoObjectURL.values())URL.revokeObjectURL(k);s.kernelName2logoObjectURL.clear()});function S(k){const C=k.detail.props,w=fi(C.name),E=fi(C.path),R=fi(C.depth);E.startsWith(ri)&&R===4&&s.siyuan.openTab({app:s.app,doc:{id:w,action:["cb-get-focus","cb-get-hl"]},keepCursor:!1,removeCurrentTab:!1})}async function L(k){const C=k.detail.props,w=fi(C.name),E=fi(C.path),R=fi(C.depth),O=fi(C.directory),T=[];if((E===ks||E.startsWith(ri)&&R===0)&&T.push({icon:"iconRefresh",label:s.i18n.dock.refresh.label,click:async()=>{var x;await((x=s.bridge)==null?void 0:x.call("jupyter.kernelspecs.refreshSpecs"))}}),E===Ji&&(T.push({icon:"iconRefresh",label:s.i18n.dock.refresh.label,click:async()=>{var x;await((x=s.bridge)==null?void 0:x.call("jupyter.kernels.refreshRunning"))}}),T.push({type:"separator"}),T.push({icon:"iconClose",label:s.i18n.dock.menu.shutdownAllKernels.label,click:async()=>{var x,j;await((x=s.bridge)==null?void 0:x.call("jupyter.kernels.shutdownAll")),await((j=s.bridge)==null?void 0:j.call("jupyter.sessions.refreshRunning"))}})),(O===Ji||E.startsWith(ri)&&R===2)&&T.push({icon:"iconClose",label:s.i18n.dock.menu.shutdownKernel.label,click:async()=>{var x,j;await((x=s.bridge)==null?void 0:x.call("jupyter.kernels.shutdown",w)),await((j=s.bridge)==null?void 0:j.call("jupyter.sessions.refreshRunning"))}}),E===Xi&&(T.push({icon:"iconRefresh",label:s.i18n.dock.refresh.label,click:async()=>{var x;await((x=s.bridge)==null?void 0:x.call("jupyter.sessions.refreshRunning"))}}),T.push({type:"separator"}),T.push({icon:"iconClose",label:s.i18n.dock.menu.shutdownAllSessions.label,click:async()=>{var x,j;await((x=s.bridge)==null?void 0:x.call("jupyter.sessions.shutdownAll")),await((j=s.bridge)==null?void 0:j.call("jupyter.kernels.refreshRunning"))}})),(O===Xi||E.startsWith(ri)&&R===3)&&T.push({icon:"iconClose",label:s.i18n.dock.menu.shutdownSession.label,click:async()=>{var x,j;await((x=s.bridge)==null?void 0:x.call("jupyter.sessions.shutdown",w)),await((j=s.bridge)==null?void 0:j.call("jupyter.kernels.refreshRunning"))}}),E.startsWith(ri)&&R===4){const j=(await s.client.getBlockAttrs({id:w})).data;T.push({icon:"iconOpenWindow",label:s.i18n.menu.open.label,submenu:s.buildOpenDocumentMenuItems(w)}),T.push({type:"separator"}),T.push(...s.buildJupyterDocumentMenuItems(w,j,s.doc2session.get(w),{isDocumentBlock:!0,isMultiBlock:!1,id:w}))}if(Pd(T),T.length>0){const x=new s.siyuan.Menu;T.forEach(Y=>x.addItem(Y));const j=k.detail.e;x.open({x:j.clientX,y:j.clientY,isLeft:!1})}}return e.$$set=k=>{"plugin"in k&&i(4,s=k.plugin),"kernelspecs"in k&&i(5,r=k.kernelspecs),"kernels"in k&&i(6,n=k.kernels),"sessions"in k&&i(7,l=k.sessions),"currentSpec"in k&&i(8,o=k.currentSpec),"currentKernel"in k&&i(9,a=k.currentKernel),"currentSession"in k&&i(10,h=k.currentSession),"currentDocument"in k&&i(11,d=k.currentDocument)},e.$$.update=()=>{e.$$.dirty&224&&(i(0,v[0].count=Object.keys(r.kernelspecs).length,v),u(r).then(k=>{i(0,v[0].children=k,v)})),e.$$.dirty&224&&(i(0,v[1].count=Object.keys(r.kernelspecs).length,v),g(r).then(async k=>{i(0,v[1].children=k,v),i(0,v[2].children=b(n),v),i(0,v[3].children=y(l),v)})),e.$$.dirty&64&&(i(0,v[2].count=n.length,v),i(0,v[2].children=b(n),v)),e.$$.dirty&128&&(i(0,v[3].count=l.length,v),i(0,v[3].children=y(l),v)),e.$$.dirty&3840&&(c(o),f(a),_(h),m(o,a,h,d))},[v,p,S,L,s,r,n,l,o,a,h,d]}class Wp extends je{constructor(t){super(),Ve(this,t,Up,Np,Pe,{plugin:4,kernelspecs:5,kernels:6,sessions:7,currentSpec:8,currentKernel:9,currentSession:10,currentDocument:11})}}function Yp(e){let t,i,s,r;const n=[e[2]];let l={};for(let o=0;o<n.length;o+=1)l=bi(l,n[o]);return t=new ul({props:l}),{c(){se(t.$$.fragment),i=ue(),s=ne("jupyter-xterm-output"),Os(s,"data-stream",e[0]),Os(s,"class","xtrem fn__flex-1 svelte-1gokk8m")},m(o,a){te(t,o,a),J(o,i,a),J(o,s,a),e[4](s),r=!0},p(o,[a]){const h=a&4?ji(n,[_s(o[2])]):{};t.$set(h),(!r||a&1)&&Os(s,"data-stream",o[0])},i(o){r||(W(t.$$.fragment,o),r=!0)},o(o){q(t.$$.fragment,o),r=!1},d(o){o&&(G(i),G(s)),ie(t,o),e[4](null)}}}function zp(e,t,i){let{plugin:s}=t,{stream:r=""}=t,n;const l={logo:"#icon-jupyter-client-inspect",title:s.i18n.inspectDock.title,icons:[{icon:"#iconMin",type:"min",ariaLabel:`${globalThis.siyuan.languages.min} ${s.siyuan.adaptHotkey("⌘W")}`,tooltipsDirection:vi.sw}]};function o(a){It[a?"unshift":"push"](()=>{n=a,i(1,n)})}return e.$$set=a=>{"plugin"in a&&i(3,s=a.plugin),"stream"in a&&i(0,r=a.stream)},[r,n,l,s,o]}class qp extends je{constructor(t){super(),Ve(this,t,zp,Yp,Pe,{plugin:3,stream:0})}}function Zp(e){let t,i,s,r,n,l,o,a,h,d,u,g,b;const y=e[8].default,m=it(y,e,e[7],null);return{c(){t=ne("div"),m&&m.c(),i=ue(),s=ne("div"),r=ne("button"),n=ft(e[1]),l=ue(),o=ne("div"),a=ue(),h=ne("button"),d=ft(e[2]),V(t,"class","b3-dialog__content"),bt(t,"user-select",e[0]?"auto":"none"),V(r,"class","b3-button b3-button--cancel"),V(o,"class","fn__space"),V(h,"class","b3-button b3-button--text"),V(s,"class","b3-dialog__action")},m(c,f){J(c,t,f),m&&m.m(t,null),J(c,i,f),J(c,s,f),he(s,r),he(r,n),e[9](r),he(s,l),he(s,o),he(s,a),he(s,h),he(h,d),e[10](h),u=!0,g||(b=[ve(r,"click",e[5]),ve(h,"click",e[6])],g=!0)},p(c,[f]){m&&m.p&&(!u||f&128)&&rt(m,y,c,c[7],u?st(y,c[7],f,null):nt(c[7]),null),f&1&&bt(t,"user-select",c[0]?"auto":"none"),(!u||f&2)&&Pt(n,c[1]),(!u||f&4)&&Pt(d,c[2])},i(c){u||(W(m,c),u=!0)},o(c){q(m,c),u=!1},d(c){c&&(G(t),G(i),G(s)),m&&m.d(c),e[9](null),e[10](null),g=!1,qe(b)}}}function Kp(e,t,i){var m,c,f,_;let{$$slots:s={},$$scope:r}=t,{selectable:n=!0}=t,{cancelButtonText:l=((c=(m=globalThis.siyuan)==null?void 0:m.languages)==null?void 0:c.cancel)??"Cancel"}=t,{confirmButtonText:o=((_=(f=globalThis.siyuan)==null?void 0:f.languages)==null?void 0:_.confirm)??"Confirm"}=t,a,h;const d=ci();function u(p){d("cancel",{event:p})}function g(p){d("confirm",{event:p})}function b(p){It[p?"unshift":"push"](()=>{a=p,i(3,a)})}function y(p){It[p?"unshift":"push"](()=>{h=p,i(4,h)})}return e.$$set=p=>{"selectable"in p&&i(0,n=p.selectable),"cancelButtonText"in p&&i(1,l=p.cancelButtonText),"confirmButtonText"in p&&i(2,o=p.confirmButtonText),"$$scope"in p&&i(7,r=p.$$scope)},[n,l,o,a,h,u,g,r,s,b,y]}class rc extends je{constructor(t){super(),Ve(this,t,Kp,Zp,Pe,{selectable:0,cancelButtonText:1,confirmButtonText:2})}}let Ls;const $p=new Uint8Array(16);function nc(){if(!Ls&&(Ls=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!Ls))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Ls($p)}const Gp=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function pr(e){return typeof e=="string"&&Gp.test(e)}const Ke=[];for(let e=0;e<256;++e)Ke.push((e+256).toString(16).slice(1));function gr(e,t=0){return Ke[e[t+0]]+Ke[e[t+1]]+Ke[e[t+2]]+Ke[e[t+3]]+"-"+Ke[e[t+4]]+Ke[e[t+5]]+"-"+Ke[e[t+6]]+Ke[e[t+7]]+"-"+Ke[e[t+8]]+Ke[e[t+9]]+"-"+Ke[e[t+10]]+Ke[e[t+11]]+Ke[e[t+12]]+Ke[e[t+13]]+Ke[e[t+14]]+Ke[e[t+15]]}function Jp(e,t=0){const i=gr(e,t);if(!pr(i))throw TypeError("Stringified UUID is invalid");return i}let ta,Br,Hr=0,xr=0;function Xp(e,t,i){let s=t&&i||0;const r=t||new Array(16);e=e||{};let n=e.node||ta,l=e.clockseq!==void 0?e.clockseq:Br;if(n==null||l==null){const g=e.random||(e.rng||nc)();n==null&&(n=ta=[g[0]|1,g[1],g[2],g[3],g[4],g[5]]),l==null&&(l=Br=(g[6]<<8|g[7])&16383)}let o=e.msecs!==void 0?e.msecs:Date.now(),a=e.nsecs!==void 0?e.nsecs:xr+1;const h=o-Hr+(a-xr)/1e4;if(h<0&&e.clockseq===void 0&&(l=l+1&16383),(h<0||o>Hr)&&e.nsecs===void 0&&(a=0),a>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");Hr=o,xr=a,Br=l,o+=122192928e5;const d=((o&268435455)*1e4+a)%4294967296;r[s++]=d>>>24&255,r[s++]=d>>>16&255,r[s++]=d>>>8&255,r[s++]=d&255;const u=o/4294967296*1e4&268435455;r[s++]=u>>>8&255,r[s++]=u&255,r[s++]=u>>>24&15|16,r[s++]=u>>>16&255,r[s++]=l>>>8|128,r[s++]=l&255;for(let g=0;g<6;++g)r[s+g]=n[g];return t||gr(r)}function oc(e){if(!pr(e))throw TypeError("Invalid UUID");let t;const i=new Uint8Array(16);return i[0]=(t=parseInt(e.slice(0,8),16))>>>24,i[1]=t>>>16&255,i[2]=t>>>8&255,i[3]=t&255,i[4]=(t=parseInt(e.slice(9,13),16))>>>8,i[5]=t&255,i[6]=(t=parseInt(e.slice(14,18),16))>>>8,i[7]=t&255,i[8]=(t=parseInt(e.slice(19,23),16))>>>8,i[9]=t&255,i[10]=(t=parseInt(e.slice(24,36),16))/1099511627776&255,i[11]=t/4294967296&255,i[12]=t>>>24&255,i[13]=t>>>16&255,i[14]=t>>>8&255,i[15]=t&255,i}function Qp(e){e=unescape(encodeURIComponent(e));const t=[];for(let i=0;i<e.length;++i)t.push(e.charCodeAt(i));return t}const e3="6ba7b810-9dad-11d1-80b4-00c04fd430c8",t3="6ba7b811-9dad-11d1-80b4-00c04fd430c8";function ac(e,t,i){function s(r,n,l,o){var a;if(typeof r=="string"&&(r=Qp(r)),typeof n=="string"&&(n=oc(n)),((a=n)===null||a===void 0?void 0:a.length)!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let h=new Uint8Array(16+r.length);if(h.set(n),h.set(r,n.length),h=i(h),h[6]=h[6]&15|t,h[8]=h[8]&63|128,l){o=o||0;for(let d=0;d<16;++d)l[o+d]=h[d];return l}return gr(h)}try{s.name=e}catch{}return s.DNS=e3,s.URL=t3,s}function i3(e){if(typeof e=="string"){const t=unescape(encodeURIComponent(e));e=new Uint8Array(t.length);for(let i=0;i<t.length;++i)e[i]=t.charCodeAt(i)}return s3(r3(n3(e),e.length*8))}function s3(e){const t=[],i=e.length*32,s="0123456789abcdef";for(let r=0;r<i;r+=8){const n=e[r>>5]>>>r%32&255,l=parseInt(s.charAt(n>>>4&15)+s.charAt(n&15),16);t.push(l)}return t}function lc(e){return(e+64>>>9<<4)+14+1}function r3(e,t){e[t>>5]|=128<<t%32,e[lc(t)-1]=t;let i=1732584193,s=-271733879,r=-1732584194,n=271733878;for(let l=0;l<e.length;l+=16){const o=i,a=s,h=r,d=n;i=Xe(i,s,r,n,e[l],7,-680876936),n=Xe(n,i,s,r,e[l+1],12,-389564586),r=Xe(r,n,i,s,e[l+2],17,606105819),s=Xe(s,r,n,i,e[l+3],22,-1044525330),i=Xe(i,s,r,n,e[l+4],7,-176418897),n=Xe(n,i,s,r,e[l+5],12,1200080426),r=Xe(r,n,i,s,e[l+6],17,-1473231341),s=Xe(s,r,n,i,e[l+7],22,-45705983),i=Xe(i,s,r,n,e[l+8],7,1770035416),n=Xe(n,i,s,r,e[l+9],12,-1958414417),r=Xe(r,n,i,s,e[l+10],17,-42063),s=Xe(s,r,n,i,e[l+11],22,-1990404162),i=Xe(i,s,r,n,e[l+12],7,1804603682),n=Xe(n,i,s,r,e[l+13],12,-40341101),r=Xe(r,n,i,s,e[l+14],17,-1502002290),s=Xe(s,r,n,i,e[l+15],22,1236535329),i=Qe(i,s,r,n,e[l+1],5,-165796510),n=Qe(n,i,s,r,e[l+6],9,-1069501632),r=Qe(r,n,i,s,e[l+11],14,643717713),s=Qe(s,r,n,i,e[l],20,-373897302),i=Qe(i,s,r,n,e[l+5],5,-701558691),n=Qe(n,i,s,r,e[l+10],9,38016083),r=Qe(r,n,i,s,e[l+15],14,-660478335),s=Qe(s,r,n,i,e[l+4],20,-405537848),i=Qe(i,s,r,n,e[l+9],5,568446438),n=Qe(n,i,s,r,e[l+14],9,-1019803690),r=Qe(r,n,i,s,e[l+3],14,-187363961),s=Qe(s,r,n,i,e[l+8],20,1163531501),i=Qe(i,s,r,n,e[l+13],5,-1444681467),n=Qe(n,i,s,r,e[l+2],9,-51403784),r=Qe(r,n,i,s,e[l+7],14,1735328473),s=Qe(s,r,n,i,e[l+12],20,-1926607734),i=et(i,s,r,n,e[l+5],4,-378558),n=et(n,i,s,r,e[l+8],11,-2022574463),r=et(r,n,i,s,e[l+11],16,1839030562),s=et(s,r,n,i,e[l+14],23,-35309556),i=et(i,s,r,n,e[l+1],4,-1530992060),n=et(n,i,s,r,e[l+4],11,1272893353),r=et(r,n,i,s,e[l+7],16,-155497632),s=et(s,r,n,i,e[l+10],23,-1094730640),i=et(i,s,r,n,e[l+13],4,681279174),n=et(n,i,s,r,e[l],11,-358537222),r=et(r,n,i,s,e[l+3],16,-722521979),s=et(s,r,n,i,e[l+6],23,76029189),i=et(i,s,r,n,e[l+9],4,-640364487),n=et(n,i,s,r,e[l+12],11,-421815835),r=et(r,n,i,s,e[l+15],16,530742520),s=et(s,r,n,i,e[l+2],23,-995338651),i=tt(i,s,r,n,e[l],6,-198630844),n=tt(n,i,s,r,e[l+7],10,1126891415),r=tt(r,n,i,s,e[l+14],15,-1416354905),s=tt(s,r,n,i,e[l+5],21,-57434055),i=tt(i,s,r,n,e[l+12],6,1700485571),n=tt(n,i,s,r,e[l+3],10,-1894986606),r=tt(r,n,i,s,e[l+10],15,-1051523),s=tt(s,r,n,i,e[l+1],21,-2054922799),i=tt(i,s,r,n,e[l+8],6,1873313359),n=tt(n,i,s,r,e[l+15],10,-30611744),r=tt(r,n,i,s,e[l+6],15,-1560198380),s=tt(s,r,n,i,e[l+13],21,1309151649),i=tt(i,s,r,n,e[l+4],6,-145523070),n=tt(n,i,s,r,e[l+11],10,-1120210379),r=tt(r,n,i,s,e[l+2],15,718787259),s=tt(s,r,n,i,e[l+9],21,-343485551),i=ai(i,o),s=ai(s,a),r=ai(r,h),n=ai(n,d)}return[i,s,r,n]}function n3(e){if(e.length===0)return[];const t=e.length*8,i=new Uint32Array(lc(t));for(let s=0;s<t;s+=8)i[s>>5]|=(e[s/8]&255)<<s%32;return i}function ai(e,t){const i=(e&65535)+(t&65535);return(e>>16)+(t>>16)+(i>>16)<<16|i&65535}function o3(e,t){return e<<t|e>>>32-t}function mr(e,t,i,s,r,n){return ai(o3(ai(ai(t,e),ai(s,n)),r),i)}function Xe(e,t,i,s,r,n,l){return mr(t&i|~t&s,e,t,r,n,l)}function Qe(e,t,i,s,r,n,l){return mr(t&s|i&~s,e,t,r,n,l)}function et(e,t,i,s,r,n,l){return mr(t^i^s,e,t,r,n,l)}function tt(e,t,i,s,r,n,l){return mr(i^(t|~s),e,t,r,n,l)}const a3=ac("v3",48,i3),l3=a3,c3=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),ia={randomUUID:c3};function h3(e,t,i){if(ia.randomUUID&&!t&&!e)return ia.randomUUID();e=e||{};const s=e.random||(e.rng||nc)();if(s[6]=s[6]&15|64,s[8]=s[8]&63|128,t){i=i||0;for(let r=0;r<16;++r)t[i+r]=s[r];return t}return gr(s)}function u3(e,t,i,s){switch(e){case 0:return t&i^~t&s;case 1:return t^i^s;case 2:return t&i^t&s^i&s;case 3:return t^i^s}}function Pr(e,t){return e<<t|e>>>32-t}function f3(e){const t=[1518500249,1859775393,2400959708,3395469782],i=[1732584193,4023233417,2562383102,271733878,3285377520];if(typeof e=="string"){const l=unescape(encodeURIComponent(e));e=[];for(let o=0;o<l.length;++o)e.push(l.charCodeAt(o))}else Array.isArray(e)||(e=Array.prototype.slice.call(e));e.push(128);const s=e.length/4+2,r=Math.ceil(s/16),n=new Array(r);for(let l=0;l<r;++l){const o=new Uint32Array(16);for(let a=0;a<16;++a)o[a]=e[l*64+a*4]<<24|e[l*64+a*4+1]<<16|e[l*64+a*4+2]<<8|e[l*64+a*4+3];n[l]=o}n[r-1][14]=(e.length-1)*8/Math.pow(2,32),n[r-1][14]=Math.floor(n[r-1][14]),n[r-1][15]=(e.length-1)*8&4294967295;for(let l=0;l<r;++l){const o=new Uint32Array(80);for(let b=0;b<16;++b)o[b]=n[l][b];for(let b=16;b<80;++b)o[b]=Pr(o[b-3]^o[b-8]^o[b-14]^o[b-16],1);let a=i[0],h=i[1],d=i[2],u=i[3],g=i[4];for(let b=0;b<80;++b){const y=Math.floor(b/20),m=Pr(a,5)+u3(y,h,d,u)+g+t[y]+o[b]>>>0;g=u,u=d,d=Pr(h,30)>>>0,h=a,a=m}i[0]=i[0]+a>>>0,i[1]=i[1]+h>>>0,i[2]=i[2]+d>>>0,i[3]=i[3]+u>>>0,i[4]=i[4]+g>>>0}return[i[0]>>24&255,i[0]>>16&255,i[0]>>8&255,i[0]&255,i[1]>>24&255,i[1]>>16&255,i[1]>>8&255,i[1]&255,i[2]>>24&255,i[2]>>16&255,i[2]>>8&255,i[2]&255,i[3]>>24&255,i[3]>>16&255,i[3]>>8&255,i[3]&255,i[4]>>24&255,i[4]>>16&255,i[4]>>8&255,i[4]&255]}const d3=ac("v5",80,f3),_3=d3,p3="00000000-0000-0000-0000-000000000000";function g3(e){if(!pr(e))throw TypeError("Invalid UUID");return parseInt(e.slice(14,15),16)}const an=Object.freeze(Object.defineProperty({__proto__:null,NIL:p3,parse:oc,stringify:Jp,v1:Xp,v3:l3,v4:h3,v5:_3,validate:pr,version:g3},Symbol.toStringTag,{value:"Module"}));function m3(e){let t,i;return t=new Fe({props:{slot:"input",type:Te.select,settingKey:"session.id",settingValue:e[1].id,options:e[6]}}),t.$on("changed",e[13]),{c(){se(t.$$.fragment)},m(s,r){te(t,s,r),i=!0},p(s,r){const n={};r&2&&(n.settingValue=s[1].id),t.$set(n)},i(s){i||(W(t.$$.fragment,s),i=!0)},o(s){q(t.$$.fragment,s),i=!1},d(s){ie(t,s)}}}function v3(e){let t,i;return t=new Fe({props:{slot:"input",block:!0,type:Te.text,settingKey:"session.name",settingValue:e[1].name,disabled:e[3]?!1:!e[4]}}),t.$on("changed",e[14]),{c(){se(t.$$.fragment)},m(s,r){te(t,s,r),i=!0},p(s,r){const n={};r&2&&(n.settingValue=s[1].name),r&24&&(n.disabled=s[3]?!1:!s[4]),t.$set(n)},i(s){i||(W(t.$$.fragment,s),i=!0)},o(s){q(t.$$.fragment,s),i=!1},d(s){ie(t,s)}}}function b3(e){let t,i;return t=new Fe({props:{slot:"input",block:!0,type:Te.text,settingKey:"session.path",settingValue:e[1].path,disabled:e[3]?!1:!e[4]}}),t.$on("changed",e[15]),{c(){se(t.$$.fragment)},m(s,r){te(t,s,r),i=!0},p(s,r){const n={};r&2&&(n.settingValue=s[1].path),r&24&&(n.disabled=s[3]?!1:!s[4]),t.$set(n)},i(s){i||(W(t.$$.fragment,s),i=!0)},o(s){q(t.$$.fragment,s),i=!1},d(s){ie(t,s)}}}function y3(e){let t,i;return t=new Fe({props:{slot:"input",type:Te.select,settingKey:"session.type",settingValue:e[1].type,options:[{key:"console",text:"console"},{key:"notebook",text:"notebook"}],disabled:e[3]?!1:!e[4]}}),t.$on("changed",e[16]),{c(){se(t.$$.fragment)},m(s,r){te(t,s,r),i=!0},p(s,r){const n={};r&2&&(n.settingValue=s[1].type),r&24&&(n.disabled=s[3]?!1:!s[4]),t.$set(n)},i(s){i||(W(t.$$.fragment,s),i=!0)},o(s){q(t.$$.fragment,s),i=!1},d(s){ie(t,s)}}}function C3(e){var s,r;let t,i;return t=new Fe({props:{slot:"input",block:!0,type:Te.select,settingKey:"session.kernel",settingValue:e[1].kernel?((s=e[0].kernels.find(e[17]))==null?void 0:s.id)??((r=e[1].kernel)==null?void 0:r.name)??e[0].kernelspecs.default:"",options:e[3]?e[8]:e[7],disabled:e[3]?!1:!e[4]}}),t.$on("changed",e[18]),{c(){se(t.$$.fragment)},m(n,l){te(t,n,l),i=!0},p(n,l){var a,h;const o={};l&3&&(o.settingValue=n[1].kernel?((a=n[0].kernels.find(n[17]))==null?void 0:a.id)??((h=n[1].kernel)==null?void 0:h.name)??n[0].kernelspecs.default:""),l&8&&(o.options=n[3]?n[8]:n[7]),l&24&&(o.disabled=n[3]?!1:!n[4]),t.$set(o)},i(n){i||(W(t.$$.fragment,n),i=!0)},o(n){q(t.$$.fragment,n),i=!1},d(n){ie(t,n)}}}function S3(e){let t,i,s,r,n,l,o,a,h,d;return t=new Ne({props:{title:e[5].settings.sessionSettings.connect.title,text:e[5].settings.sessionSettings.connect.description,$$slots:{input:[m3]},$$scope:{ctx:e}}}),s=new Ne({props:{title:e[5].settings.sessionSettings.name.title,text:e[5].settings.sessionSettings.name.description,block:!0,$$slots:{input:[v3]},$$scope:{ctx:e}}}),n=new Ne({props:{title:e[5].settings.sessionSettings.path.title,text:e[5].settings.sessionSettings.path.description,block:!0,$$slots:{input:[b3]},$$scope:{ctx:e}}}),o=new Ne({props:{title:e[5].settings.sessionSettings.type.title,text:e[5].settings.sessionSettings.type.description,$$slots:{input:[y3]},$$scope:{ctx:e}}}),h=new Ne({props:{title:e[5].settings.sessionSettings.kernel.title,text:e[5].settings.sessionSettings.kernel.description,block:!0,$$slots:{input:[C3]},$$scope:{ctx:e}}}),{c(){se(t.$$.fragment),i=ue(),se(s.$$.fragment),r=ue(),se(n.$$.fragment),l=ue(),se(o.$$.fragment),a=ue(),se(h.$$.fragment)},m(u,g){te(t,u,g),J(u,i,g),te(s,u,g),J(u,r,g),te(n,u,g),J(u,l,g),te(o,u,g),J(u,a,g),te(h,u,g),d=!0},p(u,g){const b={};g&4194311&&(b.$$scope={dirty:g,ctx:u}),t.$set(b);const y={};g&4194334&&(y.$$scope={dirty:g,ctx:u}),s.$set(y);const m={};g&4194334&&(m.$$scope={dirty:g,ctx:u}),n.$set(m);const c={};g&4194334&&(c.$$scope={dirty:g,ctx:u}),o.$set(c);const f={};g&4194335&&(f.$$scope={dirty:g,ctx:u}),h.$set(f)},i(u){d||(W(t.$$.fragment,u),W(s.$$.fragment,u),W(n.$$.fragment,u),W(o.$$.fragment,u),W(h.$$.fragment,u),d=!0)},o(u){q(t.$$.fragment,u),q(s.$$.fragment,u),q(n.$$.fragment,u),q(o.$$.fragment,u),q(h.$$.fragment,u),d=!1},d(u){u&&(G(i),G(r),G(l),G(a)),ie(t,u),ie(s,u),ie(n,u),ie(o,u),ie(h,u)}}}function w3(e){let t,i;return t=new Hs({props:{$$slots:{default:[S3]},$$scope:{ctx:e}}}),{c(){se(t.$$.fragment)},m(s,r){te(t,s,r),i=!0},p(s,r){const n={};r&4194335&&(n.$$scope={dirty:r,ctx:s}),t.$set(n)},i(s){i||(W(t.$$.fragment,s),i=!0)},o(s){q(t.$$.fragment,s),i=!1},d(s){ie(t,s)}}}function k3(e){let t,i;return t=new rc({props:{confirmButtonText:e[3]?e[5].settings.sessionSettings.confirm.new:e[4]?e[5].settings.sessionSettings.confirm.update:e[5].settings.sessionSettings.confirm.connect,$$slots:{default:[w3]},$$scope:{ctx:e}}}),t.$on("cancel",e[9]),t.$on("confirm",e[10]),{c(){se(t.$$.fragment)},m(s,r){te(t,s,r),i=!0},p(s,[r]){const n={};r&24&&(n.confirmButtonText=s[3]?s[5].settings.sessionSettings.confirm.new:s[4]?s[5].settings.sessionSettings.confirm.update:s[5].settings.sessionSettings.confirm.connect),r&4194335&&(n.$$scope={dirty:r,ctx:s}),t.$set(n)},i(s){i||(W(t.$$.fragment,s),i=!0)},o(s){q(t.$$.fragment,s),i=!1},d(s){ie(t,s)}}}function L3(e,t,i){let{docID:s}=t,{docIAL:r}=t,{plugin:n}=t;const l=n.i18n,o=ci();let a=n.ial2session(r,!0),h=a,d=!0,u=!1,g=!1;b(h);function b(w){const E=n.isSessionRunning(w.id);i(3,d=!E),u=E,i(4,g=n.doc2session.has(s))}const y=n.sessions.map(w=>({key:w.id,text:w.name}));u?(a=n.ial2session({},!0),y.unshift({key:a.id,text:l.settings.sessionSettings.connect.options.new.text}),h=n.sessions.find(w=>w.id===h.id)??h):y.unshift({key:h.id,text:l.settings.sessionSettings.connect.options.new.text});const m=[],c=[];m.push({key:"",text:`⏹ ${l.settings.sessionSettings.kernel.options.no.text}`}),m.push(...Array.from(Object.values(n.kernelspecs.kernelspecs)).filter(w=>w!==void 0).map(w=>({key:w.name,text:`▶ ${l.settings.sessionSettings.kernel.options.new.text} [${w.language}] ${w.name}: ${w.display_name}`}))),c.push(...m),m.push(...n.sessions.filter(w=>w.kernel).map(w=>{const E=n.kernelspecs.kernelspecs[w.kernel.name];return{key:w.kernel.id,text:`♻ ${l.settings.sessionSettings.kernel.options.use.text} [${E==null?void 0:E.language}] ${E==null?void 0:E.name}: ${w.name}`}}));async function f(w){o("cancel",{id:s,event:w.detail.event,session:h})}async function _(w){var R,O,T,x,j,Y,Z,D;try{var E=h;if(d)h.kernel&&(E=await((R=n.bridge)==null?void 0:R.call("jupyter.sessions.startNew",s,{name:h.name,type:h.type,path:h.path,kernel:{name:h.kernel.name}},{username:n.username,clientId:n.clientId})));else if(!g)h.kernel&&(E=await((O=n.bridge)==null?void 0:O.call("jupyter.sessions.connectTo",s,{model:h,username:n.username,clientId:n.newClientId})));else{const B=n.doc2session.get(s);B&&(h.name!==B.name&&(E=await((T=n.bridge)==null?void 0:T.call("jupyter.session.connection.setName",h.id,h.name))),h.path!==B.path&&(E=await((x=n.bridge)==null?void 0:x.call("jupyter.session.connection.setPath",h.id,h.path))),h.type!==B.type&&(E=await((j=n.bridge)==null?void 0:j.call("jupyter.session.connection.setType",h.id,h.type))),h.kernel?!B.kernel||h.kernel.name!==B.kernel.name?E=await((Y=n.bridge)==null?void 0:Y.call("jupyter.session.connection.changeKernel",h.id,{name:h.kernel.name})):(!B.kernel||h.kernel.id!==B.kernel.id)&&(E=await((Z=n.bridge)==null?void 0:Z.call("jupyter.session.connection.changeKernel",h.id,{id:h.kernel.id}))):E=await((D=n.bridge)==null?void 0:D.call("jupyter.session.connection.changeKernel",h.id,{})))}if(E)i(1,h=E),n.relateDoc2Session(s,E);else{n.siyuan.showMessage(l.messages.uninitialized.text,void 0,"error");return}await n.client.setBlockAttrs({id:s,attrs:n.session2ial(h,!0)})}catch(B){n.logger.warn(B),n.siyuan.showMessage(String(B),void 0,"error");return}o("confirm",{id:s,event:w.detail.event,session:h})}const p=async w=>{const E=w.detail.value;if(E===y[0].key)i(1,h=a);else{const R=n.sessions.find(O=>O.id===E);R&&i(1,h=R)}},v=async w=>{const E=w.detail.value;i(1,h.name=E,h),d&&i(2,a.name=E,a)},S=async w=>{const E=w.detail.value;i(1,h.path=E,h),d&&i(2,a.path=E,a)},L=async w=>{const E=w.detail.value;i(1,h.type=E,h),d&&i(2,a.type=E,a)},k=w=>{var E;return w.id===((E=h.kernel)==null?void 0:E.id)},C=async w=>{const E=w.detail.value;if(E==="")i(1,h.kernel=null,h),d&&i(2,a.kernel=null,a);else if(n.kernels.some(R=>R.id===E))h.kernel&&i(1,h.kernel.id=E,h),d&&a.kernel&&i(2,a.kernel.id=E,a);else{const R=an.v4();h.kernel&&(i(1,h.kernel.id=R,h),i(1,h.kernel.name=E,h)),d&&a.kernel&&(i(2,a.kernel.id=R,a),i(2,a.kernel.name=E,a))}};return e.$$set=w=>{"docID"in w&&i(11,s=w.docID),"docIAL"in w&&i(12,r=w.docIAL),"plugin"in w&&i(0,n=w.plugin)},e.$$.update=()=>{e.$$.dirty&2&&b(h)},[n,h,a,d,g,l,y,m,c,f,_,s,r,p,v,S,L,k,C]}class E3 extends je{constructor(t){super(),Ve(this,t,L3,k3,Pe,{docID:11,docIAL:12,plugin:0})}}function Vn(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var cc={exports:{}};(function(e,t){(function(i,s){e.exports=s()})(self,()=>(()=>{var i={4567:function(l,o,a){var h=this&&this.__decorate||function(p,v,S,L){var k,C=arguments.length,w=C<3?v:L===null?L=Object.getOwnPropertyDescriptor(v,S):L;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")w=Reflect.decorate(p,v,S,L);else for(var E=p.length-1;E>=0;E--)(k=p[E])&&(w=(C<3?k(w):C>3?k(v,S,w):k(v,S))||w);return C>3&&w&&Object.defineProperty(v,S,w),w},d=this&&this.__param||function(p,v){return function(S,L){v(S,L,p)}};Object.defineProperty(o,"__esModule",{value:!0}),o.AccessibilityManager=void 0;const u=a(9042),g=a(6114),b=a(9924),y=a(844),m=a(5596),c=a(4725),f=a(3656);let _=o.AccessibilityManager=class extends y.Disposable{constructor(p,v){super(),this._terminal=p,this._renderService=v,this._liveRegionLineCount=0,this._charsToConsume=[],this._charsToAnnounce="",this._accessibilityContainer=document.createElement("div"),this._accessibilityContainer.classList.add("xterm-accessibility"),this._rowContainer=document.createElement("div"),this._rowContainer.setAttribute("role","list"),this._rowContainer.classList.add("xterm-accessibility-tree"),this._rowElements=[];for(let S=0;S<this._terminal.rows;S++)this._rowElements[S]=this._createAccessibilityTreeNode(),this._rowContainer.appendChild(this._rowElements[S]);if(this._topBoundaryFocusListener=S=>this._handleBoundaryFocus(S,0),this._bottomBoundaryFocusListener=S=>this._handleBoundaryFocus(S,1),this._rowElements[0].addEventListener("focus",this._topBoundaryFocusListener),this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._refreshRowsDimensions(),this._accessibilityContainer.appendChild(this._rowContainer),this._liveRegion=document.createElement("div"),this._liveRegion.classList.add("live-region"),this._liveRegion.setAttribute("aria-live","assertive"),this._accessibilityContainer.appendChild(this._liveRegion),this._liveRegionDebouncer=this.register(new b.TimeBasedDebouncer(this._renderRows.bind(this))),!this._terminal.element)throw new Error("Cannot enable accessibility before Terminal.open");this._terminal.element.insertAdjacentElement("afterbegin",this._accessibilityContainer),this.register(this._terminal.onResize(S=>this._handleResize(S.rows))),this.register(this._terminal.onRender(S=>this._refreshRows(S.start,S.end))),this.register(this._terminal.onScroll(()=>this._refreshRows())),this.register(this._terminal.onA11yChar(S=>this._handleChar(S))),this.register(this._terminal.onLineFeed(()=>this._handleChar(`
`))),this.register(this._terminal.onA11yTab(S=>this._handleTab(S))),this.register(this._terminal.onKey(S=>this._handleKey(S.key))),this.register(this._terminal.onBlur(()=>this._clearLiveRegion())),this.register(this._renderService.onDimensionsChange(()=>this._refreshRowsDimensions())),this._screenDprMonitor=new m.ScreenDprMonitor(window),this.register(this._screenDprMonitor),this._screenDprMonitor.setListener(()=>this._refreshRowsDimensions()),this.register((0,f.addDisposableDomListener)(window,"resize",()=>this._refreshRowsDimensions())),this._refreshRows(),this.register((0,y.toDisposable)(()=>{this._accessibilityContainer.remove(),this._rowElements.length=0}))}_handleTab(p){for(let v=0;v<p;v++)this._handleChar(" ")}_handleChar(p){this._liveRegionLineCount<21&&(this._charsToConsume.length>0?this._charsToConsume.shift()!==p&&(this._charsToAnnounce+=p):this._charsToAnnounce+=p,p===`
`&&(this._liveRegionLineCount++,this._liveRegionLineCount===21&&(this._liveRegion.textContent+=u.tooMuchOutput)),g.isMac&&this._liveRegion.textContent&&this._liveRegion.textContent.length>0&&!this._liveRegion.parentNode&&setTimeout(()=>{this._accessibilityContainer.appendChild(this._liveRegion)},0))}_clearLiveRegion(){this._liveRegion.textContent="",this._liveRegionLineCount=0,g.isMac&&this._liveRegion.remove()}_handleKey(p){this._clearLiveRegion(),/\p{Control}/u.test(p)||this._charsToConsume.push(p)}_refreshRows(p,v){this._liveRegionDebouncer.refresh(p,v,this._terminal.rows)}_renderRows(p,v){const S=this._terminal.buffer,L=S.lines.length.toString();for(let k=p;k<=v;k++){const C=S.translateBufferLineToString(S.ydisp+k,!0),w=(S.ydisp+k+1).toString(),E=this._rowElements[k];E&&(C.length===0?E.innerText=" ":E.textContent=C,E.setAttribute("aria-posinset",w),E.setAttribute("aria-setsize",L))}this._announceCharacters()}_announceCharacters(){this._charsToAnnounce.length!==0&&(this._liveRegion.textContent+=this._charsToAnnounce,this._charsToAnnounce="")}_handleBoundaryFocus(p,v){const S=p.target,L=this._rowElements[v===0?1:this._rowElements.length-2];if(S.getAttribute("aria-posinset")===(v===0?"1":`${this._terminal.buffer.lines.length}`)||p.relatedTarget!==L)return;let k,C;if(v===0?(k=S,C=this._rowElements.pop(),this._rowContainer.removeChild(C)):(k=this._rowElements.shift(),C=S,this._rowContainer.removeChild(k)),k.removeEventListener("focus",this._topBoundaryFocusListener),C.removeEventListener("focus",this._bottomBoundaryFocusListener),v===0){const w=this._createAccessibilityTreeNode();this._rowElements.unshift(w),this._rowContainer.insertAdjacentElement("afterbegin",w)}else{const w=this._createAccessibilityTreeNode();this._rowElements.push(w),this._rowContainer.appendChild(w)}this._rowElements[0].addEventListener("focus",this._topBoundaryFocusListener),this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._terminal.scrollLines(v===0?-1:1),this._rowElements[v===0?1:this._rowElements.length-2].focus(),p.preventDefault(),p.stopImmediatePropagation()}_handleResize(p){this._rowElements[this._rowElements.length-1].removeEventListener("focus",this._bottomBoundaryFocusListener);for(let v=this._rowContainer.children.length;v<this._terminal.rows;v++)this._rowElements[v]=this._createAccessibilityTreeNode(),this._rowContainer.appendChild(this._rowElements[v]);for(;this._rowElements.length>p;)this._rowContainer.removeChild(this._rowElements.pop());this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._refreshRowsDimensions()}_createAccessibilityTreeNode(){const p=document.createElement("div");return p.setAttribute("role","listitem"),p.tabIndex=-1,this._refreshRowDimensions(p),p}_refreshRowsDimensions(){if(this._renderService.dimensions.css.cell.height){this._accessibilityContainer.style.width=`${this._renderService.dimensions.css.canvas.width}px`,this._rowElements.length!==this._terminal.rows&&this._handleResize(this._terminal.rows);for(let p=0;p<this._terminal.rows;p++)this._refreshRowDimensions(this._rowElements[p])}}_refreshRowDimensions(p){p.style.height=`${this._renderService.dimensions.css.cell.height}px`}};o.AccessibilityManager=_=h([d(1,c.IRenderService)],_)},3614:(l,o)=>{function a(g){return g.replace(/\r?\n/g,"\r")}function h(g,b){return b?"\x1B[200~"+g+"\x1B[201~":g}function d(g,b,y,m){g=h(g=a(g),y.decPrivateModes.bracketedPasteMode&&m.rawOptions.ignoreBracketedPasteMode!==!0),y.triggerDataEvent(g,!0),b.value=""}function u(g,b,y){const m=y.getBoundingClientRect(),c=g.clientX-m.left-10,f=g.clientY-m.top-10;b.style.width="20px",b.style.height="20px",b.style.left=`${c}px`,b.style.top=`${f}px`,b.style.zIndex="1000",b.focus()}Object.defineProperty(o,"__esModule",{value:!0}),o.rightClickHandler=o.moveTextAreaUnderMouseCursor=o.paste=o.handlePasteEvent=o.copyHandler=o.bracketTextForPaste=o.prepareTextForTerminal=void 0,o.prepareTextForTerminal=a,o.bracketTextForPaste=h,o.copyHandler=function(g,b){g.clipboardData&&g.clipboardData.setData("text/plain",b.selectionText),g.preventDefault()},o.handlePasteEvent=function(g,b,y,m){g.stopPropagation(),g.clipboardData&&d(g.clipboardData.getData("text/plain"),b,y,m)},o.paste=d,o.moveTextAreaUnderMouseCursor=u,o.rightClickHandler=function(g,b,y,m,c){u(g,b,y),c&&m.rightClickSelect(g),b.value=m.selectionText,b.select()}},7239:(l,o,a)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.ColorContrastCache=void 0;const h=a(1505);o.ColorContrastCache=class{constructor(){this._color=new h.TwoKeyMap,this._css=new h.TwoKeyMap}setCss(d,u,g){this._css.set(d,u,g)}getCss(d,u){return this._css.get(d,u)}setColor(d,u,g){this._color.set(d,u,g)}getColor(d,u){return this._color.get(d,u)}clear(){this._color.clear(),this._css.clear()}}},3656:(l,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.addDisposableDomListener=void 0,o.addDisposableDomListener=function(a,h,d,u){a.addEventListener(h,d,u);let g=!1;return{dispose:()=>{g||(g=!0,a.removeEventListener(h,d,u))}}}},6465:function(l,o,a){var h=this&&this.__decorate||function(c,f,_,p){var v,S=arguments.length,L=S<3?f:p===null?p=Object.getOwnPropertyDescriptor(f,_):p;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")L=Reflect.decorate(c,f,_,p);else for(var k=c.length-1;k>=0;k--)(v=c[k])&&(L=(S<3?v(L):S>3?v(f,_,L):v(f,_))||L);return S>3&&L&&Object.defineProperty(f,_,L),L},d=this&&this.__param||function(c,f){return function(_,p){f(_,p,c)}};Object.defineProperty(o,"__esModule",{value:!0}),o.Linkifier2=void 0;const u=a(3656),g=a(8460),b=a(844),y=a(2585);let m=o.Linkifier2=class extends b.Disposable{get currentLink(){return this._currentLink}constructor(c){super(),this._bufferService=c,this._linkProviders=[],this._linkCacheDisposables=[],this._isMouseOut=!0,this._wasResized=!1,this._activeLine=-1,this._onShowLinkUnderline=this.register(new g.EventEmitter),this.onShowLinkUnderline=this._onShowLinkUnderline.event,this._onHideLinkUnderline=this.register(new g.EventEmitter),this.onHideLinkUnderline=this._onHideLinkUnderline.event,this.register((0,b.getDisposeArrayDisposable)(this._linkCacheDisposables)),this.register((0,b.toDisposable)(()=>{this._lastMouseEvent=void 0})),this.register(this._bufferService.onResize(()=>{this._clearCurrentLink(),this._wasResized=!0}))}registerLinkProvider(c){return this._linkProviders.push(c),{dispose:()=>{const f=this._linkProviders.indexOf(c);f!==-1&&this._linkProviders.splice(f,1)}}}attachToDom(c,f,_){this._element=c,this._mouseService=f,this._renderService=_,this.register((0,u.addDisposableDomListener)(this._element,"mouseleave",()=>{this._isMouseOut=!0,this._clearCurrentLink()})),this.register((0,u.addDisposableDomListener)(this._element,"mousemove",this._handleMouseMove.bind(this))),this.register((0,u.addDisposableDomListener)(this._element,"mousedown",this._handleMouseDown.bind(this))),this.register((0,u.addDisposableDomListener)(this._element,"mouseup",this._handleMouseUp.bind(this)))}_handleMouseMove(c){if(this._lastMouseEvent=c,!this._element||!this._mouseService)return;const f=this._positionFromMouseEvent(c,this._element,this._mouseService);if(!f)return;this._isMouseOut=!1;const _=c.composedPath();for(let p=0;p<_.length;p++){const v=_[p];if(v.classList.contains("xterm"))break;if(v.classList.contains("xterm-hover"))return}this._lastBufferCell&&f.x===this._lastBufferCell.x&&f.y===this._lastBufferCell.y||(this._handleHover(f),this._lastBufferCell=f)}_handleHover(c){if(this._activeLine!==c.y||this._wasResized)return this._clearCurrentLink(),this._askForLink(c,!1),void(this._wasResized=!1);this._currentLink&&this._linkAtPosition(this._currentLink.link,c)||(this._clearCurrentLink(),this._askForLink(c,!0))}_askForLink(c,f){var _,p;this._activeProviderReplies&&f||((_=this._activeProviderReplies)===null||_===void 0||_.forEach(S=>{S==null||S.forEach(L=>{L.link.dispose&&L.link.dispose()})}),this._activeProviderReplies=new Map,this._activeLine=c.y);let v=!1;for(const[S,L]of this._linkProviders.entries())f?!((p=this._activeProviderReplies)===null||p===void 0)&&p.get(S)&&(v=this._checkLinkProviderResult(S,c,v)):L.provideLinks(c.y,k=>{var C,w;if(this._isMouseOut)return;const E=k==null?void 0:k.map(R=>({link:R}));(C=this._activeProviderReplies)===null||C===void 0||C.set(S,E),v=this._checkLinkProviderResult(S,c,v),((w=this._activeProviderReplies)===null||w===void 0?void 0:w.size)===this._linkProviders.length&&this._removeIntersectingLinks(c.y,this._activeProviderReplies)})}_removeIntersectingLinks(c,f){const _=new Set;for(let p=0;p<f.size;p++){const v=f.get(p);if(v)for(let S=0;S<v.length;S++){const L=v[S],k=L.link.range.start.y<c?0:L.link.range.start.x,C=L.link.range.end.y>c?this._bufferService.cols:L.link.range.end.x;for(let w=k;w<=C;w++){if(_.has(w)){v.splice(S--,1);break}_.add(w)}}}}_checkLinkProviderResult(c,f,_){var p;if(!this._activeProviderReplies)return _;const v=this._activeProviderReplies.get(c);let S=!1;for(let L=0;L<c;L++)this._activeProviderReplies.has(L)&&!this._activeProviderReplies.get(L)||(S=!0);if(!S&&v){const L=v.find(k=>this._linkAtPosition(k.link,f));L&&(_=!0,this._handleNewLink(L))}if(this._activeProviderReplies.size===this._linkProviders.length&&!_)for(let L=0;L<this._activeProviderReplies.size;L++){const k=(p=this._activeProviderReplies.get(L))===null||p===void 0?void 0:p.find(C=>this._linkAtPosition(C.link,f));if(k){_=!0,this._handleNewLink(k);break}}return _}_handleMouseDown(){this._mouseDownLink=this._currentLink}_handleMouseUp(c){if(!this._element||!this._mouseService||!this._currentLink)return;const f=this._positionFromMouseEvent(c,this._element,this._mouseService);f&&this._mouseDownLink===this._currentLink&&this._linkAtPosition(this._currentLink.link,f)&&this._currentLink.link.activate(c,this._currentLink.link.text)}_clearCurrentLink(c,f){this._element&&this._currentLink&&this._lastMouseEvent&&(!c||!f||this._currentLink.link.range.start.y>=c&&this._currentLink.link.range.end.y<=f)&&(this._linkLeave(this._element,this._currentLink.link,this._lastMouseEvent),this._currentLink=void 0,(0,b.disposeArray)(this._linkCacheDisposables))}_handleNewLink(c){if(!this._element||!this._lastMouseEvent||!this._mouseService)return;const f=this._positionFromMouseEvent(this._lastMouseEvent,this._element,this._mouseService);f&&this._linkAtPosition(c.link,f)&&(this._currentLink=c,this._currentLink.state={decorations:{underline:c.link.decorations===void 0||c.link.decorations.underline,pointerCursor:c.link.decorations===void 0||c.link.decorations.pointerCursor},isHovered:!0},this._linkHover(this._element,c.link,this._lastMouseEvent),c.link.decorations={},Object.defineProperties(c.link.decorations,{pointerCursor:{get:()=>{var _,p;return(p=(_=this._currentLink)===null||_===void 0?void 0:_.state)===null||p===void 0?void 0:p.decorations.pointerCursor},set:_=>{var p,v;!((p=this._currentLink)===null||p===void 0)&&p.state&&this._currentLink.state.decorations.pointerCursor!==_&&(this._currentLink.state.decorations.pointerCursor=_,this._currentLink.state.isHovered&&((v=this._element)===null||v===void 0||v.classList.toggle("xterm-cursor-pointer",_)))}},underline:{get:()=>{var _,p;return(p=(_=this._currentLink)===null||_===void 0?void 0:_.state)===null||p===void 0?void 0:p.decorations.underline},set:_=>{var p,v,S;!((p=this._currentLink)===null||p===void 0)&&p.state&&((S=(v=this._currentLink)===null||v===void 0?void 0:v.state)===null||S===void 0?void 0:S.decorations.underline)!==_&&(this._currentLink.state.decorations.underline=_,this._currentLink.state.isHovered&&this._fireUnderlineEvent(c.link,_))}}}),this._renderService&&this._linkCacheDisposables.push(this._renderService.onRenderedViewportChange(_=>{if(!this._currentLink)return;const p=_.start===0?0:_.start+1+this._bufferService.buffer.ydisp,v=this._bufferService.buffer.ydisp+1+_.end;if(this._currentLink.link.range.start.y>=p&&this._currentLink.link.range.end.y<=v&&(this._clearCurrentLink(p,v),this._lastMouseEvent&&this._element)){const S=this._positionFromMouseEvent(this._lastMouseEvent,this._element,this._mouseService);S&&this._askForLink(S,!1)}})))}_linkHover(c,f,_){var p;!((p=this._currentLink)===null||p===void 0)&&p.state&&(this._currentLink.state.isHovered=!0,this._currentLink.state.decorations.underline&&this._fireUnderlineEvent(f,!0),this._currentLink.state.decorations.pointerCursor&&c.classList.add("xterm-cursor-pointer")),f.hover&&f.hover(_,f.text)}_fireUnderlineEvent(c,f){const _=c.range,p=this._bufferService.buffer.ydisp,v=this._createLinkUnderlineEvent(_.start.x-1,_.start.y-p-1,_.end.x,_.end.y-p-1,void 0);(f?this._onShowLinkUnderline:this._onHideLinkUnderline).fire(v)}_linkLeave(c,f,_){var p;!((p=this._currentLink)===null||p===void 0)&&p.state&&(this._currentLink.state.isHovered=!1,this._currentLink.state.decorations.underline&&this._fireUnderlineEvent(f,!1),this._currentLink.state.decorations.pointerCursor&&c.classList.remove("xterm-cursor-pointer")),f.leave&&f.leave(_,f.text)}_linkAtPosition(c,f){const _=c.range.start.y*this._bufferService.cols+c.range.start.x,p=c.range.end.y*this._bufferService.cols+c.range.end.x,v=f.y*this._bufferService.cols+f.x;return _<=v&&v<=p}_positionFromMouseEvent(c,f,_){const p=_.getCoords(c,f,this._bufferService.cols,this._bufferService.rows);if(p)return{x:p[0],y:p[1]+this._bufferService.buffer.ydisp}}_createLinkUnderlineEvent(c,f,_,p,v){return{x1:c,y1:f,x2:_,y2:p,cols:this._bufferService.cols,fg:v}}};o.Linkifier2=m=h([d(0,y.IBufferService)],m)},9042:(l,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.tooMuchOutput=o.promptLabel=void 0,o.promptLabel="Terminal input",o.tooMuchOutput="Too much output to announce, navigate to rows manually to read"},3730:function(l,o,a){var h=this&&this.__decorate||function(m,c,f,_){var p,v=arguments.length,S=v<3?c:_===null?_=Object.getOwnPropertyDescriptor(c,f):_;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")S=Reflect.decorate(m,c,f,_);else for(var L=m.length-1;L>=0;L--)(p=m[L])&&(S=(v<3?p(S):v>3?p(c,f,S):p(c,f))||S);return v>3&&S&&Object.defineProperty(c,f,S),S},d=this&&this.__param||function(m,c){return function(f,_){c(f,_,m)}};Object.defineProperty(o,"__esModule",{value:!0}),o.OscLinkProvider=void 0;const u=a(511),g=a(2585);let b=o.OscLinkProvider=class{constructor(m,c,f){this._bufferService=m,this._optionsService=c,this._oscLinkService=f}provideLinks(m,c){var f;const _=this._bufferService.buffer.lines.get(m-1);if(!_)return void c(void 0);const p=[],v=this._optionsService.rawOptions.linkHandler,S=new u.CellData,L=_.getTrimmedLength();let k=-1,C=-1,w=!1;for(let E=0;E<L;E++)if(C!==-1||_.hasContent(E)){if(_.loadCell(E,S),S.hasExtendedAttrs()&&S.extended.urlId){if(C===-1){C=E,k=S.extended.urlId;continue}w=S.extended.urlId!==k}else C!==-1&&(w=!0);if(w||C!==-1&&E===L-1){const R=(f=this._oscLinkService.getLinkData(k))===null||f===void 0?void 0:f.uri;if(R){const O={start:{x:C+1,y:m},end:{x:E+(w||E!==L-1?0:1),y:m}};let T=!1;if(!(v!=null&&v.allowNonHttpProtocols))try{const x=new URL(R);["http:","https:"].includes(x.protocol)||(T=!0)}catch{T=!0}T||p.push({text:R,range:O,activate:(x,j)=>v?v.activate(x,j,O):y(0,j),hover:(x,j)=>{var Y;return(Y=v==null?void 0:v.hover)===null||Y===void 0?void 0:Y.call(v,x,j,O)},leave:(x,j)=>{var Y;return(Y=v==null?void 0:v.leave)===null||Y===void 0?void 0:Y.call(v,x,j,O)}})}w=!1,S.hasExtendedAttrs()&&S.extended.urlId?(C=E,k=S.extended.urlId):(C=-1,k=-1)}}c(p)}};function y(m,c){if(confirm(`Do you want to navigate to ${c}?

WARNING: This link could potentially be dangerous`)){const f=window.open();if(f){try{f.opener=null}catch{}f.location.href=c}else console.warn("Opening link blocked as opener could not be cleared")}}o.OscLinkProvider=b=h([d(0,g.IBufferService),d(1,g.IOptionsService),d(2,g.IOscLinkService)],b)},6193:(l,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.RenderDebouncer=void 0,o.RenderDebouncer=class{constructor(a,h){this._parentWindow=a,this._renderCallback=h,this._refreshCallbacks=[]}dispose(){this._animationFrame&&(this._parentWindow.cancelAnimationFrame(this._animationFrame),this._animationFrame=void 0)}addRefreshCallback(a){return this._refreshCallbacks.push(a),this._animationFrame||(this._animationFrame=this._parentWindow.requestAnimationFrame(()=>this._innerRefresh())),this._animationFrame}refresh(a,h,d){this._rowCount=d,a=a!==void 0?a:0,h=h!==void 0?h:this._rowCount-1,this._rowStart=this._rowStart!==void 0?Math.min(this._rowStart,a):a,this._rowEnd=this._rowEnd!==void 0?Math.max(this._rowEnd,h):h,this._animationFrame||(this._animationFrame=this._parentWindow.requestAnimationFrame(()=>this._innerRefresh()))}_innerRefresh(){if(this._animationFrame=void 0,this._rowStart===void 0||this._rowEnd===void 0||this._rowCount===void 0)return void this._runRefreshCallbacks();const a=Math.max(this._rowStart,0),h=Math.min(this._rowEnd,this._rowCount-1);this._rowStart=void 0,this._rowEnd=void 0,this._renderCallback(a,h),this._runRefreshCallbacks()}_runRefreshCallbacks(){for(const a of this._refreshCallbacks)a(0);this._refreshCallbacks=[]}}},5596:(l,o,a)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.ScreenDprMonitor=void 0;const h=a(844);class d extends h.Disposable{constructor(g){super(),this._parentWindow=g,this._currentDevicePixelRatio=this._parentWindow.devicePixelRatio,this.register((0,h.toDisposable)(()=>{this.clearListener()}))}setListener(g){this._listener&&this.clearListener(),this._listener=g,this._outerListener=()=>{this._listener&&(this._listener(this._parentWindow.devicePixelRatio,this._currentDevicePixelRatio),this._updateDpr())},this._updateDpr()}_updateDpr(){var g;this._outerListener&&((g=this._resolutionMediaMatchList)===null||g===void 0||g.removeListener(this._outerListener),this._currentDevicePixelRatio=this._parentWindow.devicePixelRatio,this._resolutionMediaMatchList=this._parentWindow.matchMedia(`screen and (resolution: ${this._parentWindow.devicePixelRatio}dppx)`),this._resolutionMediaMatchList.addListener(this._outerListener))}clearListener(){this._resolutionMediaMatchList&&this._listener&&this._outerListener&&(this._resolutionMediaMatchList.removeListener(this._outerListener),this._resolutionMediaMatchList=void 0,this._listener=void 0,this._outerListener=void 0)}}o.ScreenDprMonitor=d},3236:(l,o,a)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.Terminal=void 0;const h=a(3614),d=a(3656),u=a(6465),g=a(9042),b=a(3730),y=a(1680),m=a(3107),c=a(5744),f=a(2950),_=a(1296),p=a(428),v=a(4269),S=a(5114),L=a(8934),k=a(3230),C=a(9312),w=a(4725),E=a(6731),R=a(8055),O=a(8969),T=a(8460),x=a(844),j=a(6114),Y=a(8437),Z=a(2584),D=a(7399),B=a(5941),A=a(9074),H=a(2585),I=a(5435),ee=a(4567),le=typeof window<"u"?window.document:null;class ae extends O.CoreTerminal{get onFocus(){return this._onFocus.event}get onBlur(){return this._onBlur.event}get onA11yChar(){return this._onA11yCharEmitter.event}get onA11yTab(){return this._onA11yTabEmitter.event}get onWillOpen(){return this._onWillOpen.event}constructor(M={}){super(M),this.browser=j,this._keyDownHandled=!1,this._keyDownSeen=!1,this._keyPressHandled=!1,this._unprocessedDeadKey=!1,this._accessibilityManager=this.register(new x.MutableDisposable),this._onCursorMove=this.register(new T.EventEmitter),this.onCursorMove=this._onCursorMove.event,this._onKey=this.register(new T.EventEmitter),this.onKey=this._onKey.event,this._onRender=this.register(new T.EventEmitter),this.onRender=this._onRender.event,this._onSelectionChange=this.register(new T.EventEmitter),this.onSelectionChange=this._onSelectionChange.event,this._onTitleChange=this.register(new T.EventEmitter),this.onTitleChange=this._onTitleChange.event,this._onBell=this.register(new T.EventEmitter),this.onBell=this._onBell.event,this._onFocus=this.register(new T.EventEmitter),this._onBlur=this.register(new T.EventEmitter),this._onA11yCharEmitter=this.register(new T.EventEmitter),this._onA11yTabEmitter=this.register(new T.EventEmitter),this._onWillOpen=this.register(new T.EventEmitter),this._setup(),this.linkifier2=this.register(this._instantiationService.createInstance(u.Linkifier2)),this.linkifier2.registerLinkProvider(this._instantiationService.createInstance(b.OscLinkProvider)),this._decorationService=this._instantiationService.createInstance(A.DecorationService),this._instantiationService.setService(H.IDecorationService,this._decorationService),this.register(this._inputHandler.onRequestBell(()=>this._onBell.fire())),this.register(this._inputHandler.onRequestRefreshRows((N,K)=>this.refresh(N,K))),this.register(this._inputHandler.onRequestSendFocus(()=>this._reportFocus())),this.register(this._inputHandler.onRequestReset(()=>this.reset())),this.register(this._inputHandler.onRequestWindowsOptionsReport(N=>this._reportWindowsOptions(N))),this.register(this._inputHandler.onColor(N=>this._handleColorEvent(N))),this.register((0,T.forwardEvent)(this._inputHandler.onCursorMove,this._onCursorMove)),this.register((0,T.forwardEvent)(this._inputHandler.onTitleChange,this._onTitleChange)),this.register((0,T.forwardEvent)(this._inputHandler.onA11yChar,this._onA11yCharEmitter)),this.register((0,T.forwardEvent)(this._inputHandler.onA11yTab,this._onA11yTabEmitter)),this.register(this._bufferService.onResize(N=>this._afterResize(N.cols,N.rows))),this.register((0,x.toDisposable)(()=>{var N,K;this._customKeyEventHandler=void 0,(K=(N=this.element)===null||N===void 0?void 0:N.parentNode)===null||K===void 0||K.removeChild(this.element)}))}_handleColorEvent(M){if(this._themeService)for(const N of M){let K,z="";switch(N.index){case 256:K="foreground",z="10";break;case 257:K="background",z="11";break;case 258:K="cursor",z="12";break;default:K="ansi",z="4;"+N.index}switch(N.type){case 0:const _e=R.color.toColorRGB(K==="ansi"?this._themeService.colors.ansi[N.index]:this._themeService.colors[K]);this.coreService.triggerDataEvent(`${Z.C0.ESC}]${z};${(0,B.toRgbString)(_e)}${Z.C1_ESCAPED.ST}`);break;case 1:if(K==="ansi")this._themeService.modifyColors(Q=>Q.ansi[N.index]=R.rgba.toColor(...N.color));else{const Q=K;this._themeService.modifyColors(we=>we[Q]=R.rgba.toColor(...N.color))}break;case 2:this._themeService.restoreColor(N.index)}}}_setup(){super._setup(),this._customKeyEventHandler=void 0}get buffer(){return this.buffers.active}focus(){this.textarea&&this.textarea.focus({preventScroll:!0})}_handleScreenReaderModeOptionChange(M){M?!this._accessibilityManager.value&&this._renderService&&(this._accessibilityManager.value=this._instantiationService.createInstance(ee.AccessibilityManager,this)):this._accessibilityManager.clear()}_handleTextAreaFocus(M){this.coreService.decPrivateModes.sendFocus&&this.coreService.triggerDataEvent(Z.C0.ESC+"[I"),this.updateCursorStyle(M),this.element.classList.add("focus"),this._showCursor(),this._onFocus.fire()}blur(){var M;return(M=this.textarea)===null||M===void 0?void 0:M.blur()}_handleTextAreaBlur(){this.textarea.value="",this.refresh(this.buffer.y,this.buffer.y),this.coreService.decPrivateModes.sendFocus&&this.coreService.triggerDataEvent(Z.C0.ESC+"[O"),this.element.classList.remove("focus"),this._onBlur.fire()}_syncTextArea(){if(!this.textarea||!this.buffer.isCursorInViewport||this._compositionHelper.isComposing||!this._renderService)return;const M=this.buffer.ybase+this.buffer.y,N=this.buffer.lines.get(M);if(!N)return;const K=Math.min(this.buffer.x,this.cols-1),z=this._renderService.dimensions.css.cell.height,_e=N.getWidth(K),Q=this._renderService.dimensions.css.cell.width*_e,we=this.buffer.y*this._renderService.dimensions.css.cell.height,He=K*this._renderService.dimensions.css.cell.width;this.textarea.style.left=He+"px",this.textarea.style.top=we+"px",this.textarea.style.width=Q+"px",this.textarea.style.height=z+"px",this.textarea.style.lineHeight=z+"px",this.textarea.style.zIndex="-5"}_initGlobal(){this._bindKeys(),this.register((0,d.addDisposableDomListener)(this.element,"copy",N=>{this.hasSelection()&&(0,h.copyHandler)(N,this._selectionService)}));const M=N=>(0,h.handlePasteEvent)(N,this.textarea,this.coreService,this.optionsService);this.register((0,d.addDisposableDomListener)(this.textarea,"paste",M)),this.register((0,d.addDisposableDomListener)(this.element,"paste",M)),j.isFirefox?this.register((0,d.addDisposableDomListener)(this.element,"mousedown",N=>{N.button===2&&(0,h.rightClickHandler)(N,this.textarea,this.screenElement,this._selectionService,this.options.rightClickSelectsWord)})):this.register((0,d.addDisposableDomListener)(this.element,"contextmenu",N=>{(0,h.rightClickHandler)(N,this.textarea,this.screenElement,this._selectionService,this.options.rightClickSelectsWord)})),j.isLinux&&this.register((0,d.addDisposableDomListener)(this.element,"auxclick",N=>{N.button===1&&(0,h.moveTextAreaUnderMouseCursor)(N,this.textarea,this.screenElement)}))}_bindKeys(){this.register((0,d.addDisposableDomListener)(this.textarea,"keyup",M=>this._keyUp(M),!0)),this.register((0,d.addDisposableDomListener)(this.textarea,"keydown",M=>this._keyDown(M),!0)),this.register((0,d.addDisposableDomListener)(this.textarea,"keypress",M=>this._keyPress(M),!0)),this.register((0,d.addDisposableDomListener)(this.textarea,"compositionstart",()=>this._compositionHelper.compositionstart())),this.register((0,d.addDisposableDomListener)(this.textarea,"compositionupdate",M=>this._compositionHelper.compositionupdate(M))),this.register((0,d.addDisposableDomListener)(this.textarea,"compositionend",()=>this._compositionHelper.compositionend())),this.register((0,d.addDisposableDomListener)(this.textarea,"input",M=>this._inputEvent(M),!0)),this.register(this.onRender(()=>this._compositionHelper.updateCompositionElements()))}open(M){var N;if(!M)throw new Error("Terminal requires a parent element.");M.isConnected||this._logService.debug("Terminal.open was called on an element that was not attached to the DOM"),this._document=M.ownerDocument,this.element=this._document.createElement("div"),this.element.dir="ltr",this.element.classList.add("terminal"),this.element.classList.add("xterm"),M.appendChild(this.element);const K=le.createDocumentFragment();this._viewportElement=le.createElement("div"),this._viewportElement.classList.add("xterm-viewport"),K.appendChild(this._viewportElement),this._viewportScrollArea=le.createElement("div"),this._viewportScrollArea.classList.add("xterm-scroll-area"),this._viewportElement.appendChild(this._viewportScrollArea),this.screenElement=le.createElement("div"),this.screenElement.classList.add("xterm-screen"),this._helperContainer=le.createElement("div"),this._helperContainer.classList.add("xterm-helpers"),this.screenElement.appendChild(this._helperContainer),K.appendChild(this.screenElement),this.textarea=le.createElement("textarea"),this.textarea.classList.add("xterm-helper-textarea"),this.textarea.setAttribute("aria-label",g.promptLabel),j.isChromeOS||this.textarea.setAttribute("aria-multiline","false"),this.textarea.setAttribute("autocorrect","off"),this.textarea.setAttribute("autocapitalize","off"),this.textarea.setAttribute("spellcheck","false"),this.textarea.tabIndex=0,this._coreBrowserService=this._instantiationService.createInstance(S.CoreBrowserService,this.textarea,(N=this._document.defaultView)!==null&&N!==void 0?N:window),this._instantiationService.setService(w.ICoreBrowserService,this._coreBrowserService),this.register((0,d.addDisposableDomListener)(this.textarea,"focus",z=>this._handleTextAreaFocus(z))),this.register((0,d.addDisposableDomListener)(this.textarea,"blur",()=>this._handleTextAreaBlur())),this._helperContainer.appendChild(this.textarea),this._charSizeService=this._instantiationService.createInstance(p.CharSizeService,this._document,this._helperContainer),this._instantiationService.setService(w.ICharSizeService,this._charSizeService),this._themeService=this._instantiationService.createInstance(E.ThemeService),this._instantiationService.setService(w.IThemeService,this._themeService),this._characterJoinerService=this._instantiationService.createInstance(v.CharacterJoinerService),this._instantiationService.setService(w.ICharacterJoinerService,this._characterJoinerService),this._renderService=this.register(this._instantiationService.createInstance(k.RenderService,this.rows,this.screenElement)),this._instantiationService.setService(w.IRenderService,this._renderService),this.register(this._renderService.onRenderedViewportChange(z=>this._onRender.fire(z))),this.onResize(z=>this._renderService.resize(z.cols,z.rows)),this._compositionView=le.createElement("div"),this._compositionView.classList.add("composition-view"),this._compositionHelper=this._instantiationService.createInstance(f.CompositionHelper,this.textarea,this._compositionView),this._helperContainer.appendChild(this._compositionView),this.element.appendChild(K);try{this._onWillOpen.fire(this.element)}catch{}this._renderService.hasRenderer()||this._renderService.setRenderer(this._createRenderer()),this._mouseService=this._instantiationService.createInstance(L.MouseService),this._instantiationService.setService(w.IMouseService,this._mouseService),this.viewport=this._instantiationService.createInstance(y.Viewport,this._viewportElement,this._viewportScrollArea),this.viewport.onRequestScrollLines(z=>this.scrollLines(z.amount,z.suppressScrollEvent,1)),this.register(this._inputHandler.onRequestSyncScrollBar(()=>this.viewport.syncScrollArea())),this.register(this.viewport),this.register(this.onCursorMove(()=>{this._renderService.handleCursorMove(),this._syncTextArea()})),this.register(this.onResize(()=>this._renderService.handleResize(this.cols,this.rows))),this.register(this.onBlur(()=>this._renderService.handleBlur())),this.register(this.onFocus(()=>this._renderService.handleFocus())),this.register(this._renderService.onDimensionsChange(()=>this.viewport.syncScrollArea())),this._selectionService=this.register(this._instantiationService.createInstance(C.SelectionService,this.element,this.screenElement,this.linkifier2)),this._instantiationService.setService(w.ISelectionService,this._selectionService),this.register(this._selectionService.onRequestScrollLines(z=>this.scrollLines(z.amount,z.suppressScrollEvent))),this.register(this._selectionService.onSelectionChange(()=>this._onSelectionChange.fire())),this.register(this._selectionService.onRequestRedraw(z=>this._renderService.handleSelectionChanged(z.start,z.end,z.columnSelectMode))),this.register(this._selectionService.onLinuxMouseSelection(z=>{this.textarea.value=z,this.textarea.focus(),this.textarea.select()})),this.register(this._onScroll.event(z=>{this.viewport.syncScrollArea(),this._selectionService.refresh()})),this.register((0,d.addDisposableDomListener)(this._viewportElement,"scroll",()=>this._selectionService.refresh())),this.linkifier2.attachToDom(this.screenElement,this._mouseService,this._renderService),this.register(this._instantiationService.createInstance(m.BufferDecorationRenderer,this.screenElement)),this.register((0,d.addDisposableDomListener)(this.element,"mousedown",z=>this._selectionService.handleMouseDown(z))),this.coreMouseService.areMouseEventsActive?(this._selectionService.disable(),this.element.classList.add("enable-mouse-events")):this._selectionService.enable(),this.options.screenReaderMode&&(this._accessibilityManager.value=this._instantiationService.createInstance(ee.AccessibilityManager,this)),this.register(this.optionsService.onSpecificOptionChange("screenReaderMode",z=>this._handleScreenReaderModeOptionChange(z))),this.options.overviewRulerWidth&&(this._overviewRulerRenderer=this.register(this._instantiationService.createInstance(c.OverviewRulerRenderer,this._viewportElement,this.screenElement))),this.optionsService.onSpecificOptionChange("overviewRulerWidth",z=>{!this._overviewRulerRenderer&&z&&this._viewportElement&&this.screenElement&&(this._overviewRulerRenderer=this.register(this._instantiationService.createInstance(c.OverviewRulerRenderer,this._viewportElement,this.screenElement)))}),this._charSizeService.measure(),this.refresh(0,this.rows-1),this._initGlobal(),this.bindMouse()}_createRenderer(){return this._instantiationService.createInstance(_.DomRenderer,this.element,this.screenElement,this._viewportElement,this.linkifier2)}bindMouse(){const M=this,N=this.element;function K(Q){const we=M._mouseService.getMouseReportCoords(Q,M.screenElement);if(!we)return!1;let He,Ue;switch(Q.overrideType||Q.type){case"mousemove":Ue=32,Q.buttons===void 0?(He=3,Q.button!==void 0&&(He=Q.button<3?Q.button:3)):He=1&Q.buttons?0:4&Q.buttons?1:2&Q.buttons?2:3;break;case"mouseup":Ue=0,He=Q.button<3?Q.button:3;break;case"mousedown":Ue=1,He=Q.button<3?Q.button:3;break;case"wheel":if(M.viewport.getLinesScrolled(Q)===0)return!1;Ue=Q.deltaY<0?0:1,He=4;break;default:return!1}return!(Ue===void 0||He===void 0||He>4)&&M.coreMouseService.triggerMouseEvent({col:we.col,row:we.row,x:we.x,y:we.y,button:He,action:Ue,ctrl:Q.ctrlKey,alt:Q.altKey,shift:Q.shiftKey})}const z={mouseup:null,wheel:null,mousedrag:null,mousemove:null},_e={mouseup:Q=>(K(Q),Q.buttons||(this._document.removeEventListener("mouseup",z.mouseup),z.mousedrag&&this._document.removeEventListener("mousemove",z.mousedrag)),this.cancel(Q)),wheel:Q=>(K(Q),this.cancel(Q,!0)),mousedrag:Q=>{Q.buttons&&K(Q)},mousemove:Q=>{Q.buttons||K(Q)}};this.register(this.coreMouseService.onProtocolChange(Q=>{Q?(this.optionsService.rawOptions.logLevel==="debug"&&this._logService.debug("Binding to mouse events:",this.coreMouseService.explainEvents(Q)),this.element.classList.add("enable-mouse-events"),this._selectionService.disable()):(this._logService.debug("Unbinding from mouse events."),this.element.classList.remove("enable-mouse-events"),this._selectionService.enable()),8&Q?z.mousemove||(N.addEventListener("mousemove",_e.mousemove),z.mousemove=_e.mousemove):(N.removeEventListener("mousemove",z.mousemove),z.mousemove=null),16&Q?z.wheel||(N.addEventListener("wheel",_e.wheel,{passive:!1}),z.wheel=_e.wheel):(N.removeEventListener("wheel",z.wheel),z.wheel=null),2&Q?z.mouseup||(N.addEventListener("mouseup",_e.mouseup),z.mouseup=_e.mouseup):(this._document.removeEventListener("mouseup",z.mouseup),N.removeEventListener("mouseup",z.mouseup),z.mouseup=null),4&Q?z.mousedrag||(z.mousedrag=_e.mousedrag):(this._document.removeEventListener("mousemove",z.mousedrag),z.mousedrag=null)})),this.coreMouseService.activeProtocol=this.coreMouseService.activeProtocol,this.register((0,d.addDisposableDomListener)(N,"mousedown",Q=>{if(Q.preventDefault(),this.focus(),this.coreMouseService.areMouseEventsActive&&!this._selectionService.shouldForceSelection(Q))return K(Q),z.mouseup&&this._document.addEventListener("mouseup",z.mouseup),z.mousedrag&&this._document.addEventListener("mousemove",z.mousedrag),this.cancel(Q)})),this.register((0,d.addDisposableDomListener)(N,"wheel",Q=>{if(!z.wheel){if(!this.buffer.hasScrollback){const we=this.viewport.getLinesScrolled(Q);if(we===0)return;const He=Z.C0.ESC+(this.coreService.decPrivateModes.applicationCursorKeys?"O":"[")+(Q.deltaY<0?"A":"B");let Ue="";for(let gt=0;gt<Math.abs(we);gt++)Ue+=He;return this.coreService.triggerDataEvent(Ue,!0),this.cancel(Q,!0)}return this.viewport.handleWheel(Q)?this.cancel(Q):void 0}},{passive:!1})),this.register((0,d.addDisposableDomListener)(N,"touchstart",Q=>{if(!this.coreMouseService.areMouseEventsActive)return this.viewport.handleTouchStart(Q),this.cancel(Q)},{passive:!0})),this.register((0,d.addDisposableDomListener)(N,"touchmove",Q=>{if(!this.coreMouseService.areMouseEventsActive)return this.viewport.handleTouchMove(Q)?void 0:this.cancel(Q)},{passive:!1}))}refresh(M,N){var K;(K=this._renderService)===null||K===void 0||K.refreshRows(M,N)}updateCursorStyle(M){var N;!((N=this._selectionService)===null||N===void 0)&&N.shouldColumnSelect(M)?this.element.classList.add("column-select"):this.element.classList.remove("column-select")}_showCursor(){this.coreService.isCursorInitialized||(this.coreService.isCursorInitialized=!0,this.refresh(this.buffer.y,this.buffer.y))}scrollLines(M,N,K=0){var z;K===1?(super.scrollLines(M,N,K),this.refresh(0,this.rows-1)):(z=this.viewport)===null||z===void 0||z.scrollLines(M)}paste(M){(0,h.paste)(M,this.textarea,this.coreService,this.optionsService)}attachCustomKeyEventHandler(M){this._customKeyEventHandler=M}registerLinkProvider(M){return this.linkifier2.registerLinkProvider(M)}registerCharacterJoiner(M){if(!this._characterJoinerService)throw new Error("Terminal must be opened first");const N=this._characterJoinerService.register(M);return this.refresh(0,this.rows-1),N}deregisterCharacterJoiner(M){if(!this._characterJoinerService)throw new Error("Terminal must be opened first");this._characterJoinerService.deregister(M)&&this.refresh(0,this.rows-1)}get markers(){return this.buffer.markers}registerMarker(M){return this.buffer.addMarker(this.buffer.ybase+this.buffer.y+M)}registerDecoration(M){return this._decorationService.registerDecoration(M)}hasSelection(){return!!this._selectionService&&this._selectionService.hasSelection}select(M,N,K){this._selectionService.setSelection(M,N,K)}getSelection(){return this._selectionService?this._selectionService.selectionText:""}getSelectionPosition(){if(this._selectionService&&this._selectionService.hasSelection)return{start:{x:this._selectionService.selectionStart[0],y:this._selectionService.selectionStart[1]},end:{x:this._selectionService.selectionEnd[0],y:this._selectionService.selectionEnd[1]}}}clearSelection(){var M;(M=this._selectionService)===null||M===void 0||M.clearSelection()}selectAll(){var M;(M=this._selectionService)===null||M===void 0||M.selectAll()}selectLines(M,N){var K;(K=this._selectionService)===null||K===void 0||K.selectLines(M,N)}_keyDown(M){if(this._keyDownHandled=!1,this._keyDownSeen=!0,this._customKeyEventHandler&&this._customKeyEventHandler(M)===!1)return!1;const N=this.browser.isMac&&this.options.macOptionIsMeta&&M.altKey;if(!N&&!this._compositionHelper.keydown(M))return this.options.scrollOnUserInput&&this.buffer.ybase!==this.buffer.ydisp&&this.scrollToBottom(),!1;N||M.key!=="Dead"&&M.key!=="AltGraph"||(this._unprocessedDeadKey=!0);const K=(0,D.evaluateKeyboardEvent)(M,this.coreService.decPrivateModes.applicationCursorKeys,this.browser.isMac,this.options.macOptionIsMeta);if(this.updateCursorStyle(M),K.type===3||K.type===2){const z=this.rows-1;return this.scrollLines(K.type===2?-z:z),this.cancel(M,!0)}return K.type===1&&this.selectAll(),!!this._isThirdLevelShift(this.browser,M)||(K.cancel&&this.cancel(M,!0),!K.key||!!(M.key&&!M.ctrlKey&&!M.altKey&&!M.metaKey&&M.key.length===1&&M.key.charCodeAt(0)>=65&&M.key.charCodeAt(0)<=90)||(this._unprocessedDeadKey?(this._unprocessedDeadKey=!1,!0):(K.key!==Z.C0.ETX&&K.key!==Z.C0.CR||(this.textarea.value=""),this._onKey.fire({key:K.key,domEvent:M}),this._showCursor(),this.coreService.triggerDataEvent(K.key,!0),!this.optionsService.rawOptions.screenReaderMode||M.altKey||M.ctrlKey?this.cancel(M,!0):void(this._keyDownHandled=!0))))}_isThirdLevelShift(M,N){const K=M.isMac&&!this.options.macOptionIsMeta&&N.altKey&&!N.ctrlKey&&!N.metaKey||M.isWindows&&N.altKey&&N.ctrlKey&&!N.metaKey||M.isWindows&&N.getModifierState("AltGraph");return N.type==="keypress"?K:K&&(!N.keyCode||N.keyCode>47)}_keyUp(M){this._keyDownSeen=!1,this._customKeyEventHandler&&this._customKeyEventHandler(M)===!1||(function(N){return N.keyCode===16||N.keyCode===17||N.keyCode===18}(M)||this.focus(),this.updateCursorStyle(M),this._keyPressHandled=!1)}_keyPress(M){let N;if(this._keyPressHandled=!1,this._keyDownHandled||this._customKeyEventHandler&&this._customKeyEventHandler(M)===!1)return!1;if(this.cancel(M),M.charCode)N=M.charCode;else if(M.which===null||M.which===void 0)N=M.keyCode;else{if(M.which===0||M.charCode===0)return!1;N=M.which}return!(!N||(M.altKey||M.ctrlKey||M.metaKey)&&!this._isThirdLevelShift(this.browser,M)||(N=String.fromCharCode(N),this._onKey.fire({key:N,domEvent:M}),this._showCursor(),this.coreService.triggerDataEvent(N,!0),this._keyPressHandled=!0,this._unprocessedDeadKey=!1,0))}_inputEvent(M){if(M.data&&M.inputType==="insertText"&&(!M.composed||!this._keyDownSeen)&&!this.optionsService.rawOptions.screenReaderMode){if(this._keyPressHandled)return!1;this._unprocessedDeadKey=!1;const N=M.data;return this.coreService.triggerDataEvent(N,!0),this.cancel(M),!0}return!1}resize(M,N){M!==this.cols||N!==this.rows?super.resize(M,N):this._charSizeService&&!this._charSizeService.hasValidSize&&this._charSizeService.measure()}_afterResize(M,N){var K,z;(K=this._charSizeService)===null||K===void 0||K.measure(),(z=this.viewport)===null||z===void 0||z.syncScrollArea(!0)}clear(){var M;if(this.buffer.ybase!==0||this.buffer.y!==0){this.buffer.clearAllMarkers(),this.buffer.lines.set(0,this.buffer.lines.get(this.buffer.ybase+this.buffer.y)),this.buffer.lines.length=1,this.buffer.ydisp=0,this.buffer.ybase=0,this.buffer.y=0;for(let N=1;N<this.rows;N++)this.buffer.lines.push(this.buffer.getBlankLine(Y.DEFAULT_ATTR_DATA));this._onScroll.fire({position:this.buffer.ydisp,source:0}),(M=this.viewport)===null||M===void 0||M.reset(),this.refresh(0,this.rows-1)}}reset(){var M,N;this.options.rows=this.rows,this.options.cols=this.cols;const K=this._customKeyEventHandler;this._setup(),super.reset(),(M=this._selectionService)===null||M===void 0||M.reset(),this._decorationService.reset(),(N=this.viewport)===null||N===void 0||N.reset(),this._customKeyEventHandler=K,this.refresh(0,this.rows-1)}clearTextureAtlas(){var M;(M=this._renderService)===null||M===void 0||M.clearTextureAtlas()}_reportFocus(){var M;!((M=this.element)===null||M===void 0)&&M.classList.contains("focus")?this.coreService.triggerDataEvent(Z.C0.ESC+"[I"):this.coreService.triggerDataEvent(Z.C0.ESC+"[O")}_reportWindowsOptions(M){if(this._renderService)switch(M){case I.WindowsOptionsReportType.GET_WIN_SIZE_PIXELS:const N=this._renderService.dimensions.css.canvas.width.toFixed(0),K=this._renderService.dimensions.css.canvas.height.toFixed(0);this.coreService.triggerDataEvent(`${Z.C0.ESC}[4;${K};${N}t`);break;case I.WindowsOptionsReportType.GET_CELL_SIZE_PIXELS:const z=this._renderService.dimensions.css.cell.width.toFixed(0),_e=this._renderService.dimensions.css.cell.height.toFixed(0);this.coreService.triggerDataEvent(`${Z.C0.ESC}[6;${_e};${z}t`)}}cancel(M,N){if(this.options.cancelEvents||N)return M.preventDefault(),M.stopPropagation(),!1}}o.Terminal=ae},9924:(l,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.TimeBasedDebouncer=void 0,o.TimeBasedDebouncer=class{constructor(a,h=1e3){this._renderCallback=a,this._debounceThresholdMS=h,this._lastRefreshMs=0,this._additionalRefreshRequested=!1}dispose(){this._refreshTimeoutID&&clearTimeout(this._refreshTimeoutID)}refresh(a,h,d){this._rowCount=d,a=a!==void 0?a:0,h=h!==void 0?h:this._rowCount-1,this._rowStart=this._rowStart!==void 0?Math.min(this._rowStart,a):a,this._rowEnd=this._rowEnd!==void 0?Math.max(this._rowEnd,h):h;const u=Date.now();if(u-this._lastRefreshMs>=this._debounceThresholdMS)this._lastRefreshMs=u,this._innerRefresh();else if(!this._additionalRefreshRequested){const g=u-this._lastRefreshMs,b=this._debounceThresholdMS-g;this._additionalRefreshRequested=!0,this._refreshTimeoutID=window.setTimeout(()=>{this._lastRefreshMs=Date.now(),this._innerRefresh(),this._additionalRefreshRequested=!1,this._refreshTimeoutID=void 0},b)}}_innerRefresh(){if(this._rowStart===void 0||this._rowEnd===void 0||this._rowCount===void 0)return;const a=Math.max(this._rowStart,0),h=Math.min(this._rowEnd,this._rowCount-1);this._rowStart=void 0,this._rowEnd=void 0,this._renderCallback(a,h)}}},1680:function(l,o,a){var h=this&&this.__decorate||function(f,_,p,v){var S,L=arguments.length,k=L<3?_:v===null?v=Object.getOwnPropertyDescriptor(_,p):v;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")k=Reflect.decorate(f,_,p,v);else for(var C=f.length-1;C>=0;C--)(S=f[C])&&(k=(L<3?S(k):L>3?S(_,p,k):S(_,p))||k);return L>3&&k&&Object.defineProperty(_,p,k),k},d=this&&this.__param||function(f,_){return function(p,v){_(p,v,f)}};Object.defineProperty(o,"__esModule",{value:!0}),o.Viewport=void 0;const u=a(3656),g=a(4725),b=a(8460),y=a(844),m=a(2585);let c=o.Viewport=class extends y.Disposable{constructor(f,_,p,v,S,L,k,C){super(),this._viewportElement=f,this._scrollArea=_,this._bufferService=p,this._optionsService=v,this._charSizeService=S,this._renderService=L,this._coreBrowserService=k,this.scrollBarWidth=0,this._currentRowHeight=0,this._currentDeviceCellHeight=0,this._lastRecordedBufferLength=0,this._lastRecordedViewportHeight=0,this._lastRecordedBufferHeight=0,this._lastTouchY=0,this._lastScrollTop=0,this._wheelPartialScroll=0,this._refreshAnimationFrame=null,this._ignoreNextScrollEvent=!1,this._smoothScrollState={startTime:0,origin:-1,target:-1},this._onRequestScrollLines=this.register(new b.EventEmitter),this.onRequestScrollLines=this._onRequestScrollLines.event,this.scrollBarWidth=this._viewportElement.offsetWidth-this._scrollArea.offsetWidth||15,this.register((0,u.addDisposableDomListener)(this._viewportElement,"scroll",this._handleScroll.bind(this))),this._activeBuffer=this._bufferService.buffer,this.register(this._bufferService.buffers.onBufferActivate(w=>this._activeBuffer=w.activeBuffer)),this._renderDimensions=this._renderService.dimensions,this.register(this._renderService.onDimensionsChange(w=>this._renderDimensions=w)),this._handleThemeChange(C.colors),this.register(C.onChangeColors(w=>this._handleThemeChange(w))),this.register(this._optionsService.onSpecificOptionChange("scrollback",()=>this.syncScrollArea())),setTimeout(()=>this.syncScrollArea())}_handleThemeChange(f){this._viewportElement.style.backgroundColor=f.background.css}reset(){this._currentRowHeight=0,this._currentDeviceCellHeight=0,this._lastRecordedBufferLength=0,this._lastRecordedViewportHeight=0,this._lastRecordedBufferHeight=0,this._lastTouchY=0,this._lastScrollTop=0,this._coreBrowserService.window.requestAnimationFrame(()=>this.syncScrollArea())}_refresh(f){if(f)return this._innerRefresh(),void(this._refreshAnimationFrame!==null&&this._coreBrowserService.window.cancelAnimationFrame(this._refreshAnimationFrame));this._refreshAnimationFrame===null&&(this._refreshAnimationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>this._innerRefresh()))}_innerRefresh(){if(this._charSizeService.height>0){this._currentRowHeight=this._renderService.dimensions.device.cell.height/this._coreBrowserService.dpr,this._currentDeviceCellHeight=this._renderService.dimensions.device.cell.height,this._lastRecordedViewportHeight=this._viewportElement.offsetHeight;const _=Math.round(this._currentRowHeight*this._lastRecordedBufferLength)+(this._lastRecordedViewportHeight-this._renderService.dimensions.css.canvas.height);this._lastRecordedBufferHeight!==_&&(this._lastRecordedBufferHeight=_,this._scrollArea.style.height=this._lastRecordedBufferHeight+"px")}const f=this._bufferService.buffer.ydisp*this._currentRowHeight;this._viewportElement.scrollTop!==f&&(this._ignoreNextScrollEvent=!0,this._viewportElement.scrollTop=f),this._refreshAnimationFrame=null}syncScrollArea(f=!1){if(this._lastRecordedBufferLength!==this._bufferService.buffer.lines.length)return this._lastRecordedBufferLength=this._bufferService.buffer.lines.length,void this._refresh(f);this._lastRecordedViewportHeight===this._renderService.dimensions.css.canvas.height&&this._lastScrollTop===this._activeBuffer.ydisp*this._currentRowHeight&&this._renderDimensions.device.cell.height===this._currentDeviceCellHeight||this._refresh(f)}_handleScroll(f){if(this._lastScrollTop=this._viewportElement.scrollTop,!this._viewportElement.offsetParent)return;if(this._ignoreNextScrollEvent)return this._ignoreNextScrollEvent=!1,void this._onRequestScrollLines.fire({amount:0,suppressScrollEvent:!0});const _=Math.round(this._lastScrollTop/this._currentRowHeight)-this._bufferService.buffer.ydisp;this._onRequestScrollLines.fire({amount:_,suppressScrollEvent:!0})}_smoothScroll(){if(this._isDisposed||this._smoothScrollState.origin===-1||this._smoothScrollState.target===-1)return;const f=this._smoothScrollPercent();this._viewportElement.scrollTop=this._smoothScrollState.origin+Math.round(f*(this._smoothScrollState.target-this._smoothScrollState.origin)),f<1?this._coreBrowserService.window.requestAnimationFrame(()=>this._smoothScroll()):this._clearSmoothScrollState()}_smoothScrollPercent(){return this._optionsService.rawOptions.smoothScrollDuration&&this._smoothScrollState.startTime?Math.max(Math.min((Date.now()-this._smoothScrollState.startTime)/this._optionsService.rawOptions.smoothScrollDuration,1),0):1}_clearSmoothScrollState(){this._smoothScrollState.startTime=0,this._smoothScrollState.origin=-1,this._smoothScrollState.target=-1}_bubbleScroll(f,_){const p=this._viewportElement.scrollTop+this._lastRecordedViewportHeight;return!(_<0&&this._viewportElement.scrollTop!==0||_>0&&p<this._lastRecordedBufferHeight)||(f.cancelable&&f.preventDefault(),!1)}handleWheel(f){const _=this._getPixelsScrolled(f);return _!==0&&(this._optionsService.rawOptions.smoothScrollDuration?(this._smoothScrollState.startTime=Date.now(),this._smoothScrollPercent()<1?(this._smoothScrollState.origin=this._viewportElement.scrollTop,this._smoothScrollState.target===-1?this._smoothScrollState.target=this._viewportElement.scrollTop+_:this._smoothScrollState.target+=_,this._smoothScrollState.target=Math.max(Math.min(this._smoothScrollState.target,this._viewportElement.scrollHeight),0),this._smoothScroll()):this._clearSmoothScrollState()):this._viewportElement.scrollTop+=_,this._bubbleScroll(f,_))}scrollLines(f){if(f!==0)if(this._optionsService.rawOptions.smoothScrollDuration){const _=f*this._currentRowHeight;this._smoothScrollState.startTime=Date.now(),this._smoothScrollPercent()<1?(this._smoothScrollState.origin=this._viewportElement.scrollTop,this._smoothScrollState.target=this._smoothScrollState.origin+_,this._smoothScrollState.target=Math.max(Math.min(this._smoothScrollState.target,this._viewportElement.scrollHeight),0),this._smoothScroll()):this._clearSmoothScrollState()}else this._onRequestScrollLines.fire({amount:f,suppressScrollEvent:!1})}_getPixelsScrolled(f){if(f.deltaY===0||f.shiftKey)return 0;let _=this._applyScrollModifier(f.deltaY,f);return f.deltaMode===WheelEvent.DOM_DELTA_LINE?_*=this._currentRowHeight:f.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(_*=this._currentRowHeight*this._bufferService.rows),_}getBufferElements(f,_){var p;let v,S="";const L=[],k=_??this._bufferService.buffer.lines.length,C=this._bufferService.buffer.lines;for(let w=f;w<k;w++){const E=C.get(w);if(!E)continue;const R=(p=C.get(w+1))===null||p===void 0?void 0:p.isWrapped;if(S+=E.translateToString(!R),!R||w===C.length-1){const O=document.createElement("div");O.textContent=S,L.push(O),S.length>0&&(v=O),S=""}}return{bufferElements:L,cursorElement:v}}getLinesScrolled(f){if(f.deltaY===0||f.shiftKey)return 0;let _=this._applyScrollModifier(f.deltaY,f);return f.deltaMode===WheelEvent.DOM_DELTA_PIXEL?(_/=this._currentRowHeight+0,this._wheelPartialScroll+=_,_=Math.floor(Math.abs(this._wheelPartialScroll))*(this._wheelPartialScroll>0?1:-1),this._wheelPartialScroll%=1):f.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(_*=this._bufferService.rows),_}_applyScrollModifier(f,_){const p=this._optionsService.rawOptions.fastScrollModifier;return p==="alt"&&_.altKey||p==="ctrl"&&_.ctrlKey||p==="shift"&&_.shiftKey?f*this._optionsService.rawOptions.fastScrollSensitivity*this._optionsService.rawOptions.scrollSensitivity:f*this._optionsService.rawOptions.scrollSensitivity}handleTouchStart(f){this._lastTouchY=f.touches[0].pageY}handleTouchMove(f){const _=this._lastTouchY-f.touches[0].pageY;return this._lastTouchY=f.touches[0].pageY,_!==0&&(this._viewportElement.scrollTop+=_,this._bubbleScroll(f,_))}};o.Viewport=c=h([d(2,m.IBufferService),d(3,m.IOptionsService),d(4,g.ICharSizeService),d(5,g.IRenderService),d(6,g.ICoreBrowserService),d(7,g.IThemeService)],c)},3107:function(l,o,a){var h=this&&this.__decorate||function(c,f,_,p){var v,S=arguments.length,L=S<3?f:p===null?p=Object.getOwnPropertyDescriptor(f,_):p;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")L=Reflect.decorate(c,f,_,p);else for(var k=c.length-1;k>=0;k--)(v=c[k])&&(L=(S<3?v(L):S>3?v(f,_,L):v(f,_))||L);return S>3&&L&&Object.defineProperty(f,_,L),L},d=this&&this.__param||function(c,f){return function(_,p){f(_,p,c)}};Object.defineProperty(o,"__esModule",{value:!0}),o.BufferDecorationRenderer=void 0;const u=a(3656),g=a(4725),b=a(844),y=a(2585);let m=o.BufferDecorationRenderer=class extends b.Disposable{constructor(c,f,_,p){super(),this._screenElement=c,this._bufferService=f,this._decorationService=_,this._renderService=p,this._decorationElements=new Map,this._altBufferIsActive=!1,this._dimensionsChanged=!1,this._container=document.createElement("div"),this._container.classList.add("xterm-decoration-container"),this._screenElement.appendChild(this._container),this.register(this._renderService.onRenderedViewportChange(()=>this._doRefreshDecorations())),this.register(this._renderService.onDimensionsChange(()=>{this._dimensionsChanged=!0,this._queueRefresh()})),this.register((0,u.addDisposableDomListener)(window,"resize",()=>this._queueRefresh())),this.register(this._bufferService.buffers.onBufferActivate(()=>{this._altBufferIsActive=this._bufferService.buffer===this._bufferService.buffers.alt})),this.register(this._decorationService.onDecorationRegistered(()=>this._queueRefresh())),this.register(this._decorationService.onDecorationRemoved(v=>this._removeDecoration(v))),this.register((0,b.toDisposable)(()=>{this._container.remove(),this._decorationElements.clear()}))}_queueRefresh(){this._animationFrame===void 0&&(this._animationFrame=this._renderService.addRefreshCallback(()=>{this._doRefreshDecorations(),this._animationFrame=void 0}))}_doRefreshDecorations(){for(const c of this._decorationService.decorations)this._renderDecoration(c);this._dimensionsChanged=!1}_renderDecoration(c){this._refreshStyle(c),this._dimensionsChanged&&this._refreshXPosition(c)}_createElement(c){var f,_;const p=document.createElement("div");p.classList.add("xterm-decoration"),p.classList.toggle("xterm-decoration-top-layer",((f=c==null?void 0:c.options)===null||f===void 0?void 0:f.layer)==="top"),p.style.width=`${Math.round((c.options.width||1)*this._renderService.dimensions.css.cell.width)}px`,p.style.height=(c.options.height||1)*this._renderService.dimensions.css.cell.height+"px",p.style.top=(c.marker.line-this._bufferService.buffers.active.ydisp)*this._renderService.dimensions.css.cell.height+"px",p.style.lineHeight=`${this._renderService.dimensions.css.cell.height}px`;const v=(_=c.options.x)!==null&&_!==void 0?_:0;return v&&v>this._bufferService.cols&&(p.style.display="none"),this._refreshXPosition(c,p),p}_refreshStyle(c){const f=c.marker.line-this._bufferService.buffers.active.ydisp;if(f<0||f>=this._bufferService.rows)c.element&&(c.element.style.display="none",c.onRenderEmitter.fire(c.element));else{let _=this._decorationElements.get(c);_||(_=this._createElement(c),c.element=_,this._decorationElements.set(c,_),this._container.appendChild(_),c.onDispose(()=>{this._decorationElements.delete(c),_.remove()})),_.style.top=f*this._renderService.dimensions.css.cell.height+"px",_.style.display=this._altBufferIsActive?"none":"block",c.onRenderEmitter.fire(_)}}_refreshXPosition(c,f=c.element){var _;if(!f)return;const p=(_=c.options.x)!==null&&_!==void 0?_:0;(c.options.anchor||"left")==="right"?f.style.right=p?p*this._renderService.dimensions.css.cell.width+"px":"":f.style.left=p?p*this._renderService.dimensions.css.cell.width+"px":""}_removeDecoration(c){var f;(f=this._decorationElements.get(c))===null||f===void 0||f.remove(),this._decorationElements.delete(c),c.dispose()}};o.BufferDecorationRenderer=m=h([d(1,y.IBufferService),d(2,y.IDecorationService),d(3,g.IRenderService)],m)},5871:(l,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.ColorZoneStore=void 0,o.ColorZoneStore=class{constructor(){this._zones=[],this._zonePool=[],this._zonePoolIndex=0,this._linePadding={full:0,left:0,center:0,right:0}}get zones(){return this._zonePool.length=Math.min(this._zonePool.length,this._zones.length),this._zones}clear(){this._zones.length=0,this._zonePoolIndex=0}addDecoration(a){if(a.options.overviewRulerOptions){for(const h of this._zones)if(h.color===a.options.overviewRulerOptions.color&&h.position===a.options.overviewRulerOptions.position){if(this._lineIntersectsZone(h,a.marker.line))return;if(this._lineAdjacentToZone(h,a.marker.line,a.options.overviewRulerOptions.position))return void this._addLineToZone(h,a.marker.line)}if(this._zonePoolIndex<this._zonePool.length)return this._zonePool[this._zonePoolIndex].color=a.options.overviewRulerOptions.color,this._zonePool[this._zonePoolIndex].position=a.options.overviewRulerOptions.position,this._zonePool[this._zonePoolIndex].startBufferLine=a.marker.line,this._zonePool[this._zonePoolIndex].endBufferLine=a.marker.line,void this._zones.push(this._zonePool[this._zonePoolIndex++]);this._zones.push({color:a.options.overviewRulerOptions.color,position:a.options.overviewRulerOptions.position,startBufferLine:a.marker.line,endBufferLine:a.marker.line}),this._zonePool.push(this._zones[this._zones.length-1]),this._zonePoolIndex++}}setPadding(a){this._linePadding=a}_lineIntersectsZone(a,h){return h>=a.startBufferLine&&h<=a.endBufferLine}_lineAdjacentToZone(a,h,d){return h>=a.startBufferLine-this._linePadding[d||"full"]&&h<=a.endBufferLine+this._linePadding[d||"full"]}_addLineToZone(a,h){a.startBufferLine=Math.min(a.startBufferLine,h),a.endBufferLine=Math.max(a.endBufferLine,h)}}},5744:function(l,o,a){var h=this&&this.__decorate||function(v,S,L,k){var C,w=arguments.length,E=w<3?S:k===null?k=Object.getOwnPropertyDescriptor(S,L):k;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")E=Reflect.decorate(v,S,L,k);else for(var R=v.length-1;R>=0;R--)(C=v[R])&&(E=(w<3?C(E):w>3?C(S,L,E):C(S,L))||E);return w>3&&E&&Object.defineProperty(S,L,E),E},d=this&&this.__param||function(v,S){return function(L,k){S(L,k,v)}};Object.defineProperty(o,"__esModule",{value:!0}),o.OverviewRulerRenderer=void 0;const u=a(5871),g=a(3656),b=a(4725),y=a(844),m=a(2585),c={full:0,left:0,center:0,right:0},f={full:0,left:0,center:0,right:0},_={full:0,left:0,center:0,right:0};let p=o.OverviewRulerRenderer=class extends y.Disposable{get _width(){return this._optionsService.options.overviewRulerWidth||0}constructor(v,S,L,k,C,w,E){var R;super(),this._viewportElement=v,this._screenElement=S,this._bufferService=L,this._decorationService=k,this._renderService=C,this._optionsService=w,this._coreBrowseService=E,this._colorZoneStore=new u.ColorZoneStore,this._shouldUpdateDimensions=!0,this._shouldUpdateAnchor=!0,this._lastKnownBufferLength=0,this._canvas=document.createElement("canvas"),this._canvas.classList.add("xterm-decoration-overview-ruler"),this._refreshCanvasDimensions(),(R=this._viewportElement.parentElement)===null||R===void 0||R.insertBefore(this._canvas,this._viewportElement);const O=this._canvas.getContext("2d");if(!O)throw new Error("Ctx cannot be null");this._ctx=O,this._registerDecorationListeners(),this._registerBufferChangeListeners(),this._registerDimensionChangeListeners(),this.register((0,y.toDisposable)(()=>{var T;(T=this._canvas)===null||T===void 0||T.remove()}))}_registerDecorationListeners(){this.register(this._decorationService.onDecorationRegistered(()=>this._queueRefresh(void 0,!0))),this.register(this._decorationService.onDecorationRemoved(()=>this._queueRefresh(void 0,!0)))}_registerBufferChangeListeners(){this.register(this._renderService.onRenderedViewportChange(()=>this._queueRefresh())),this.register(this._bufferService.buffers.onBufferActivate(()=>{this._canvas.style.display=this._bufferService.buffer===this._bufferService.buffers.alt?"none":"block"})),this.register(this._bufferService.onScroll(()=>{this._lastKnownBufferLength!==this._bufferService.buffers.normal.lines.length&&(this._refreshDrawHeightConstants(),this._refreshColorZonePadding())}))}_registerDimensionChangeListeners(){this.register(this._renderService.onRender(()=>{this._containerHeight&&this._containerHeight===this._screenElement.clientHeight||(this._queueRefresh(!0),this._containerHeight=this._screenElement.clientHeight)})),this.register(this._optionsService.onSpecificOptionChange("overviewRulerWidth",()=>this._queueRefresh(!0))),this.register((0,g.addDisposableDomListener)(this._coreBrowseService.window,"resize",()=>this._queueRefresh(!0))),this._queueRefresh(!0)}_refreshDrawConstants(){const v=Math.floor(this._canvas.width/3),S=Math.ceil(this._canvas.width/3);f.full=this._canvas.width,f.left=v,f.center=S,f.right=v,this._refreshDrawHeightConstants(),_.full=0,_.left=0,_.center=f.left,_.right=f.left+f.center}_refreshDrawHeightConstants(){c.full=Math.round(2*this._coreBrowseService.dpr);const v=this._canvas.height/this._bufferService.buffer.lines.length,S=Math.round(Math.max(Math.min(v,12),6)*this._coreBrowseService.dpr);c.left=S,c.center=S,c.right=S}_refreshColorZonePadding(){this._colorZoneStore.setPadding({full:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*c.full),left:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*c.left),center:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*c.center),right:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*c.right)}),this._lastKnownBufferLength=this._bufferService.buffers.normal.lines.length}_refreshCanvasDimensions(){this._canvas.style.width=`${this._width}px`,this._canvas.width=Math.round(this._width*this._coreBrowseService.dpr),this._canvas.style.height=`${this._screenElement.clientHeight}px`,this._canvas.height=Math.round(this._screenElement.clientHeight*this._coreBrowseService.dpr),this._refreshDrawConstants(),this._refreshColorZonePadding()}_refreshDecorations(){this._shouldUpdateDimensions&&this._refreshCanvasDimensions(),this._ctx.clearRect(0,0,this._canvas.width,this._canvas.height),this._colorZoneStore.clear();for(const S of this._decorationService.decorations)this._colorZoneStore.addDecoration(S);this._ctx.lineWidth=1;const v=this._colorZoneStore.zones;for(const S of v)S.position!=="full"&&this._renderColorZone(S);for(const S of v)S.position==="full"&&this._renderColorZone(S);this._shouldUpdateDimensions=!1,this._shouldUpdateAnchor=!1}_renderColorZone(v){this._ctx.fillStyle=v.color,this._ctx.fillRect(_[v.position||"full"],Math.round((this._canvas.height-1)*(v.startBufferLine/this._bufferService.buffers.active.lines.length)-c[v.position||"full"]/2),f[v.position||"full"],Math.round((this._canvas.height-1)*((v.endBufferLine-v.startBufferLine)/this._bufferService.buffers.active.lines.length)+c[v.position||"full"]))}_queueRefresh(v,S){this._shouldUpdateDimensions=v||this._shouldUpdateDimensions,this._shouldUpdateAnchor=S||this._shouldUpdateAnchor,this._animationFrame===void 0&&(this._animationFrame=this._coreBrowseService.window.requestAnimationFrame(()=>{this._refreshDecorations(),this._animationFrame=void 0}))}};o.OverviewRulerRenderer=p=h([d(2,m.IBufferService),d(3,m.IDecorationService),d(4,b.IRenderService),d(5,m.IOptionsService),d(6,b.ICoreBrowserService)],p)},2950:function(l,o,a){var h=this&&this.__decorate||function(m,c,f,_){var p,v=arguments.length,S=v<3?c:_===null?_=Object.getOwnPropertyDescriptor(c,f):_;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")S=Reflect.decorate(m,c,f,_);else for(var L=m.length-1;L>=0;L--)(p=m[L])&&(S=(v<3?p(S):v>3?p(c,f,S):p(c,f))||S);return v>3&&S&&Object.defineProperty(c,f,S),S},d=this&&this.__param||function(m,c){return function(f,_){c(f,_,m)}};Object.defineProperty(o,"__esModule",{value:!0}),o.CompositionHelper=void 0;const u=a(4725),g=a(2585),b=a(2584);let y=o.CompositionHelper=class{get isComposing(){return this._isComposing}constructor(m,c,f,_,p,v){this._textarea=m,this._compositionView=c,this._bufferService=f,this._optionsService=_,this._coreService=p,this._renderService=v,this._isComposing=!1,this._isSendingComposition=!1,this._compositionPosition={start:0,end:0},this._dataAlreadySent=""}compositionstart(){this._isComposing=!0,this._compositionPosition.start=this._textarea.value.length,this._compositionView.textContent="",this._dataAlreadySent="",this._compositionView.classList.add("active")}compositionupdate(m){this._compositionView.textContent=m.data,this.updateCompositionElements(),setTimeout(()=>{this._compositionPosition.end=this._textarea.value.length},0)}compositionend(){this._finalizeComposition(!0)}keydown(m){if(this._isComposing||this._isSendingComposition){if(m.keyCode===229||m.keyCode===16||m.keyCode===17||m.keyCode===18)return!1;this._finalizeComposition(!1)}return m.keyCode!==229||(this._handleAnyTextareaChanges(),!1)}_finalizeComposition(m){if(this._compositionView.classList.remove("active"),this._isComposing=!1,m){const c={start:this._compositionPosition.start,end:this._compositionPosition.end};this._isSendingComposition=!0,setTimeout(()=>{if(this._isSendingComposition){let f;this._isSendingComposition=!1,c.start+=this._dataAlreadySent.length,f=this._isComposing?this._textarea.value.substring(c.start,c.end):this._textarea.value.substring(c.start),f.length>0&&this._coreService.triggerDataEvent(f,!0)}},0)}else{this._isSendingComposition=!1;const c=this._textarea.value.substring(this._compositionPosition.start,this._compositionPosition.end);this._coreService.triggerDataEvent(c,!0)}}_handleAnyTextareaChanges(){const m=this._textarea.value;setTimeout(()=>{if(!this._isComposing){const c=this._textarea.value,f=c.replace(m,"");this._dataAlreadySent=f,c.length>m.length?this._coreService.triggerDataEvent(f,!0):c.length<m.length?this._coreService.triggerDataEvent(`${b.C0.DEL}`,!0):c.length===m.length&&c!==m&&this._coreService.triggerDataEvent(c,!0)}},0)}updateCompositionElements(m){if(this._isComposing){if(this._bufferService.buffer.isCursorInViewport){const c=Math.min(this._bufferService.buffer.x,this._bufferService.cols-1),f=this._renderService.dimensions.css.cell.height,_=this._bufferService.buffer.y*this._renderService.dimensions.css.cell.height,p=c*this._renderService.dimensions.css.cell.width;this._compositionView.style.left=p+"px",this._compositionView.style.top=_+"px",this._compositionView.style.height=f+"px",this._compositionView.style.lineHeight=f+"px",this._compositionView.style.fontFamily=this._optionsService.rawOptions.fontFamily,this._compositionView.style.fontSize=this._optionsService.rawOptions.fontSize+"px";const v=this._compositionView.getBoundingClientRect();this._textarea.style.left=p+"px",this._textarea.style.top=_+"px",this._textarea.style.width=Math.max(v.width,1)+"px",this._textarea.style.height=Math.max(v.height,1)+"px",this._textarea.style.lineHeight=v.height+"px"}m||setTimeout(()=>this.updateCompositionElements(!0),0)}}};o.CompositionHelper=y=h([d(2,g.IBufferService),d(3,g.IOptionsService),d(4,g.ICoreService),d(5,u.IRenderService)],y)},9806:(l,o)=>{function a(h,d,u){const g=u.getBoundingClientRect(),b=h.getComputedStyle(u),y=parseInt(b.getPropertyValue("padding-left")),m=parseInt(b.getPropertyValue("padding-top"));return[d.clientX-g.left-y,d.clientY-g.top-m]}Object.defineProperty(o,"__esModule",{value:!0}),o.getCoords=o.getCoordsRelativeToElement=void 0,o.getCoordsRelativeToElement=a,o.getCoords=function(h,d,u,g,b,y,m,c,f){if(!y)return;const _=a(h,d,u);return _?(_[0]=Math.ceil((_[0]+(f?m/2:0))/m),_[1]=Math.ceil(_[1]/c),_[0]=Math.min(Math.max(_[0],1),g+(f?1:0)),_[1]=Math.min(Math.max(_[1],1),b),_):void 0}},9504:(l,o,a)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.moveToCellSequence=void 0;const h=a(2584);function d(c,f,_,p){const v=c-u(c,_),S=f-u(f,_),L=Math.abs(v-S)-function(k,C,w){let E=0;const R=k-u(k,w),O=C-u(C,w);for(let T=0;T<Math.abs(R-O);T++){const x=g(k,C)==="A"?-1:1,j=w.buffer.lines.get(R+x*T);j!=null&&j.isWrapped&&E++}return E}(c,f,_);return m(L,y(g(c,f),p))}function u(c,f){let _=0,p=f.buffer.lines.get(c),v=p==null?void 0:p.isWrapped;for(;v&&c>=0&&c<f.rows;)_++,p=f.buffer.lines.get(--c),v=p==null?void 0:p.isWrapped;return _}function g(c,f){return c>f?"A":"B"}function b(c,f,_,p,v,S){let L=c,k=f,C="";for(;L!==_||k!==p;)L+=v?1:-1,v&&L>S.cols-1?(C+=S.buffer.translateBufferLineToString(k,!1,c,L),L=0,c=0,k++):!v&&L<0&&(C+=S.buffer.translateBufferLineToString(k,!1,0,c+1),L=S.cols-1,c=L,k--);return C+S.buffer.translateBufferLineToString(k,!1,c,L)}function y(c,f){const _=f?"O":"[";return h.C0.ESC+_+c}function m(c,f){c=Math.floor(c);let _="";for(let p=0;p<c;p++)_+=f;return _}o.moveToCellSequence=function(c,f,_,p){const v=_.buffer.x,S=_.buffer.y;if(!_.buffer.hasScrollback)return function(C,w,E,R,O,T){return d(w,R,O,T).length===0?"":m(b(C,w,C,w-u(w,O),!1,O).length,y("D",T))}(v,S,0,f,_,p)+d(S,f,_,p)+function(C,w,E,R,O,T){let x;x=d(w,R,O,T).length>0?R-u(R,O):w;const j=R,Y=function(Z,D,B,A,H,I){let ee;return ee=d(B,A,H,I).length>0?A-u(A,H):D,Z<B&&ee<=A||Z>=B&&ee<A?"C":"D"}(C,w,E,R,O,T);return m(b(C,x,E,j,Y==="C",O).length,y(Y,T))}(v,S,c,f,_,p);let L;if(S===f)return L=v>c?"D":"C",m(Math.abs(v-c),y(L,p));L=S>f?"D":"C";const k=Math.abs(S-f);return m(function(C,w){return w.cols-C}(S>f?c:v,_)+(k-1)*_.cols+1+((S>f?v:c)-1),y(L,p))}},1296:function(l,o,a){var h=this&&this.__decorate||function(O,T,x,j){var Y,Z=arguments.length,D=Z<3?T:j===null?j=Object.getOwnPropertyDescriptor(T,x):j;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")D=Reflect.decorate(O,T,x,j);else for(var B=O.length-1;B>=0;B--)(Y=O[B])&&(D=(Z<3?Y(D):Z>3?Y(T,x,D):Y(T,x))||D);return Z>3&&D&&Object.defineProperty(T,x,D),D},d=this&&this.__param||function(O,T){return function(x,j){T(x,j,O)}};Object.defineProperty(o,"__esModule",{value:!0}),o.DomRenderer=void 0;const u=a(3787),g=a(2550),b=a(2223),y=a(6171),m=a(4725),c=a(8055),f=a(8460),_=a(844),p=a(2585),v="xterm-dom-renderer-owner-",S="xterm-rows",L="xterm-fg-",k="xterm-bg-",C="xterm-focus",w="xterm-selection";let E=1,R=o.DomRenderer=class extends _.Disposable{constructor(O,T,x,j,Y,Z,D,B,A,H){super(),this._element=O,this._screenElement=T,this._viewportElement=x,this._linkifier2=j,this._charSizeService=Z,this._optionsService=D,this._bufferService=B,this._coreBrowserService=A,this._themeService=H,this._terminalClass=E++,this._rowElements=[],this.onRequestRedraw=this.register(new f.EventEmitter).event,this._rowContainer=document.createElement("div"),this._rowContainer.classList.add(S),this._rowContainer.style.lineHeight="normal",this._rowContainer.setAttribute("aria-hidden","true"),this._refreshRowElements(this._bufferService.cols,this._bufferService.rows),this._selectionContainer=document.createElement("div"),this._selectionContainer.classList.add(w),this._selectionContainer.setAttribute("aria-hidden","true"),this.dimensions=(0,y.createRenderDimensions)(),this._updateDimensions(),this.register(this._optionsService.onOptionChange(()=>this._handleOptionsChanged())),this.register(this._themeService.onChangeColors(I=>this._injectCss(I))),this._injectCss(this._themeService.colors),this._rowFactory=Y.createInstance(u.DomRendererRowFactory,document),this._element.classList.add(v+this._terminalClass),this._screenElement.appendChild(this._rowContainer),this._screenElement.appendChild(this._selectionContainer),this.register(this._linkifier2.onShowLinkUnderline(I=>this._handleLinkHover(I))),this.register(this._linkifier2.onHideLinkUnderline(I=>this._handleLinkLeave(I))),this.register((0,_.toDisposable)(()=>{this._element.classList.remove(v+this._terminalClass),this._rowContainer.remove(),this._selectionContainer.remove(),this._widthCache.dispose(),this._themeStyleElement.remove(),this._dimensionsStyleElement.remove()})),this._widthCache=new g.WidthCache(document),this._widthCache.setFont(this._optionsService.rawOptions.fontFamily,this._optionsService.rawOptions.fontSize,this._optionsService.rawOptions.fontWeight,this._optionsService.rawOptions.fontWeightBold),this._setDefaultSpacing()}_updateDimensions(){const O=this._coreBrowserService.dpr;this.dimensions.device.char.width=this._charSizeService.width*O,this.dimensions.device.char.height=Math.ceil(this._charSizeService.height*O),this.dimensions.device.cell.width=this.dimensions.device.char.width+Math.round(this._optionsService.rawOptions.letterSpacing),this.dimensions.device.cell.height=Math.floor(this.dimensions.device.char.height*this._optionsService.rawOptions.lineHeight),this.dimensions.device.char.left=0,this.dimensions.device.char.top=0,this.dimensions.device.canvas.width=this.dimensions.device.cell.width*this._bufferService.cols,this.dimensions.device.canvas.height=this.dimensions.device.cell.height*this._bufferService.rows,this.dimensions.css.canvas.width=Math.round(this.dimensions.device.canvas.width/O),this.dimensions.css.canvas.height=Math.round(this.dimensions.device.canvas.height/O),this.dimensions.css.cell.width=this.dimensions.css.canvas.width/this._bufferService.cols,this.dimensions.css.cell.height=this.dimensions.css.canvas.height/this._bufferService.rows;for(const x of this._rowElements)x.style.width=`${this.dimensions.css.canvas.width}px`,x.style.height=`${this.dimensions.css.cell.height}px`,x.style.lineHeight=`${this.dimensions.css.cell.height}px`,x.style.overflow="hidden";this._dimensionsStyleElement||(this._dimensionsStyleElement=document.createElement("style"),this._screenElement.appendChild(this._dimensionsStyleElement));const T=`${this._terminalSelector} .${S} span { display: inline-block; height: 100%; vertical-align: top;}`;this._dimensionsStyleElement.textContent=T,this._selectionContainer.style.height=this._viewportElement.style.height,this._screenElement.style.width=`${this.dimensions.css.canvas.width}px`,this._screenElement.style.height=`${this.dimensions.css.canvas.height}px`}_injectCss(O){this._themeStyleElement||(this._themeStyleElement=document.createElement("style"),this._screenElement.appendChild(this._themeStyleElement));let T=`${this._terminalSelector} .${S} { color: ${O.foreground.css}; font-family: ${this._optionsService.rawOptions.fontFamily}; font-size: ${this._optionsService.rawOptions.fontSize}px; font-kerning: none; white-space: pre}`;T+=`${this._terminalSelector} .${S} .xterm-dim { color: ${c.color.multiplyOpacity(O.foreground,.5).css};}`,T+=`${this._terminalSelector} span:not(.xterm-bold) { font-weight: ${this._optionsService.rawOptions.fontWeight};}${this._terminalSelector} span.xterm-bold { font-weight: ${this._optionsService.rawOptions.fontWeightBold};}${this._terminalSelector} span.xterm-italic { font-style: italic;}`,T+="@keyframes blink_box_shadow_"+this._terminalClass+" { 50% {  border-bottom-style: hidden; }}",T+="@keyframes blink_block_"+this._terminalClass+` { 0% {  background-color: ${O.cursor.css};  color: ${O.cursorAccent.css}; } 50% {  background-color: inherit;  color: ${O.cursor.css}; }}`,T+=`${this._terminalSelector} .${S}.${C} .xterm-cursor.xterm-cursor-blink:not(.xterm-cursor-block) { animation: blink_box_shadow_`+this._terminalClass+` 1s step-end infinite;}${this._terminalSelector} .${S}.${C} .xterm-cursor.xterm-cursor-blink.xterm-cursor-block { animation: blink_block_`+this._terminalClass+` 1s step-end infinite;}${this._terminalSelector} .${S} .xterm-cursor.xterm-cursor-block { background-color: ${O.cursor.css}; color: ${O.cursorAccent.css};}${this._terminalSelector} .${S} .xterm-cursor.xterm-cursor-outline { outline: 1px solid ${O.cursor.css}; outline-offset: -1px;}${this._terminalSelector} .${S} .xterm-cursor.xterm-cursor-bar { box-shadow: ${this._optionsService.rawOptions.cursorWidth}px 0 0 ${O.cursor.css} inset;}${this._terminalSelector} .${S} .xterm-cursor.xterm-cursor-underline { border-bottom: 1px ${O.cursor.css}; border-bottom-style: solid; height: calc(100% - 1px);}`,T+=`${this._terminalSelector} .${w} { position: absolute; top: 0; left: 0; z-index: 1; pointer-events: none;}${this._terminalSelector}.focus .${w} div { position: absolute; background-color: ${O.selectionBackgroundOpaque.css};}${this._terminalSelector} .${w} div { position: absolute; background-color: ${O.selectionInactiveBackgroundOpaque.css};}`;for(const[x,j]of O.ansi.entries())T+=`${this._terminalSelector} .${L}${x} { color: ${j.css}; }${this._terminalSelector} .${L}${x}.xterm-dim { color: ${c.color.multiplyOpacity(j,.5).css}; }${this._terminalSelector} .${k}${x} { background-color: ${j.css}; }`;T+=`${this._terminalSelector} .${L}${b.INVERTED_DEFAULT_COLOR} { color: ${c.color.opaque(O.background).css}; }${this._terminalSelector} .${L}${b.INVERTED_DEFAULT_COLOR}.xterm-dim { color: ${c.color.multiplyOpacity(c.color.opaque(O.background),.5).css}; }${this._terminalSelector} .${k}${b.INVERTED_DEFAULT_COLOR} { background-color: ${O.foreground.css}; }`,this._themeStyleElement.textContent=T}_setDefaultSpacing(){const O=this.dimensions.css.cell.width-this._widthCache.get("W",!1,!1);this._rowContainer.style.letterSpacing=`${O}px`,this._rowFactory.defaultSpacing=O}handleDevicePixelRatioChange(){this._updateDimensions(),this._widthCache.clear(),this._setDefaultSpacing()}_refreshRowElements(O,T){for(let x=this._rowElements.length;x<=T;x++){const j=document.createElement("div");this._rowContainer.appendChild(j),this._rowElements.push(j)}for(;this._rowElements.length>T;)this._rowContainer.removeChild(this._rowElements.pop())}handleResize(O,T){this._refreshRowElements(O,T),this._updateDimensions()}handleCharSizeChanged(){this._updateDimensions(),this._widthCache.clear(),this._setDefaultSpacing()}handleBlur(){this._rowContainer.classList.remove(C)}handleFocus(){this._rowContainer.classList.add(C),this.renderRows(this._bufferService.buffer.y,this._bufferService.buffer.y)}handleSelectionChanged(O,T,x){if(this._selectionContainer.replaceChildren(),this._rowFactory.handleSelectionChanged(O,T,x),this.renderRows(0,this._bufferService.rows-1),!O||!T)return;const j=O[1]-this._bufferService.buffer.ydisp,Y=T[1]-this._bufferService.buffer.ydisp,Z=Math.max(j,0),D=Math.min(Y,this._bufferService.rows-1);if(Z>=this._bufferService.rows||D<0)return;const B=document.createDocumentFragment();if(x){const A=O[0]>T[0];B.appendChild(this._createSelectionElement(Z,A?T[0]:O[0],A?O[0]:T[0],D-Z+1))}else{const A=j===Z?O[0]:0,H=Z===Y?T[0]:this._bufferService.cols;B.appendChild(this._createSelectionElement(Z,A,H));const I=D-Z-1;if(B.appendChild(this._createSelectionElement(Z+1,0,this._bufferService.cols,I)),Z!==D){const ee=Y===D?T[0]:this._bufferService.cols;B.appendChild(this._createSelectionElement(D,0,ee))}}this._selectionContainer.appendChild(B)}_createSelectionElement(O,T,x,j=1){const Y=document.createElement("div");return Y.style.height=j*this.dimensions.css.cell.height+"px",Y.style.top=O*this.dimensions.css.cell.height+"px",Y.style.left=T*this.dimensions.css.cell.width+"px",Y.style.width=this.dimensions.css.cell.width*(x-T)+"px",Y}handleCursorMove(){}_handleOptionsChanged(){this._updateDimensions(),this._injectCss(this._themeService.colors),this._widthCache.setFont(this._optionsService.rawOptions.fontFamily,this._optionsService.rawOptions.fontSize,this._optionsService.rawOptions.fontWeight,this._optionsService.rawOptions.fontWeightBold),this._setDefaultSpacing()}clear(){for(const O of this._rowElements)O.replaceChildren()}renderRows(O,T){const x=this._bufferService.buffer,j=x.ybase+x.y,Y=Math.min(x.x,this._bufferService.cols-1),Z=this._optionsService.rawOptions.cursorBlink,D=this._optionsService.rawOptions.cursorStyle,B=this._optionsService.rawOptions.cursorInactiveStyle;for(let A=O;A<=T;A++){const H=A+x.ydisp,I=this._rowElements[A],ee=x.lines.get(H);if(!I||!ee)break;I.replaceChildren(...this._rowFactory.createRow(ee,H,H===j,D,B,Y,Z,this.dimensions.css.cell.width,this._widthCache,-1,-1))}}get _terminalSelector(){return`.${v}${this._terminalClass}`}_handleLinkHover(O){this._setCellUnderline(O.x1,O.x2,O.y1,O.y2,O.cols,!0)}_handleLinkLeave(O){this._setCellUnderline(O.x1,O.x2,O.y1,O.y2,O.cols,!1)}_setCellUnderline(O,T,x,j,Y,Z){x<0&&(O=0),j<0&&(T=0);const D=this._bufferService.rows-1;x=Math.max(Math.min(x,D),0),j=Math.max(Math.min(j,D),0),Y=Math.min(Y,this._bufferService.cols);const B=this._bufferService.buffer,A=B.ybase+B.y,H=Math.min(B.x,Y-1),I=this._optionsService.rawOptions.cursorBlink,ee=this._optionsService.rawOptions.cursorStyle,le=this._optionsService.rawOptions.cursorInactiveStyle;for(let ae=x;ae<=j;++ae){const be=ae+B.ydisp,M=this._rowElements[ae],N=B.lines.get(be);if(!M||!N)break;M.replaceChildren(...this._rowFactory.createRow(N,be,be===A,ee,le,H,I,this.dimensions.css.cell.width,this._widthCache,Z?ae===x?O:0:-1,Z?(ae===j?T:Y)-1:-1))}}};o.DomRenderer=R=h([d(4,p.IInstantiationService),d(5,m.ICharSizeService),d(6,p.IOptionsService),d(7,p.IBufferService),d(8,m.ICoreBrowserService),d(9,m.IThemeService)],R)},3787:function(l,o,a){var h=this&&this.__decorate||function(L,k,C,w){var E,R=arguments.length,O=R<3?k:w===null?w=Object.getOwnPropertyDescriptor(k,C):w;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")O=Reflect.decorate(L,k,C,w);else for(var T=L.length-1;T>=0;T--)(E=L[T])&&(O=(R<3?E(O):R>3?E(k,C,O):E(k,C))||O);return R>3&&O&&Object.defineProperty(k,C,O),O},d=this&&this.__param||function(L,k){return function(C,w){k(C,w,L)}};Object.defineProperty(o,"__esModule",{value:!0}),o.DomRendererRowFactory=void 0;const u=a(2223),g=a(643),b=a(511),y=a(2585),m=a(8055),c=a(4725),f=a(4269),_=a(6171),p=a(3734);let v=o.DomRendererRowFactory=class{constructor(L,k,C,w,E,R,O){this._document=L,this._characterJoinerService=k,this._optionsService=C,this._coreBrowserService=w,this._coreService=E,this._decorationService=R,this._themeService=O,this._workCell=new b.CellData,this._columnSelectMode=!1,this.defaultSpacing=0}handleSelectionChanged(L,k,C){this._selectionStart=L,this._selectionEnd=k,this._columnSelectMode=C}createRow(L,k,C,w,E,R,O,T,x,j,Y){const Z=[],D=this._characterJoinerService.getJoinedCharacters(k),B=this._themeService.colors;let A,H=L.getNoBgTrimmedLength();C&&H<R+1&&(H=R+1);let I=0,ee="",le=0,ae=0,be=0,M=!1,N=0,K=!1,z=0;const _e=[],Q=j!==-1&&Y!==-1;for(let we=0;we<H;we++){L.loadCell(we,this._workCell);let He=this._workCell.getWidth();if(He===0)continue;let Ue=!1,gt=we,Ce=this._workCell;if(D.length>0&&we===D[0][0]){Ue=!0;const Ie=D.shift();Ce=new f.JoinedCellData(this._workCell,L.translateToString(!0,Ie[0],Ie[1]),Ie[1]-Ie[0]),gt=Ie[1]-1,He=Ce.getWidth()}const hi=this._isCellInSelection(we,k),Yi=C&&we===R,zi=Q&&we>=j&&we<=Y;let qi=!1;this._decorationService.forEachDecorationAtCell(we,k,void 0,Ie=>{qi=!0});let Ci=Ce.getChars()||g.WHITESPACE_CELL_CHAR;if(Ci===" "&&(Ce.isUnderline()||Ce.isOverline())&&(Ci=" "),z=He*T-x.get(Ci,Ce.isBold(),Ce.isItalic()),A){if(I&&(hi&&K||!hi&&!K&&Ce.bg===le)&&(hi&&K&&B.selectionForeground||Ce.fg===ae)&&Ce.extended.ext===be&&zi===M&&z===N&&!Yi&&!Ue&&!qi){ee+=Ci,I++;continue}I&&(A.textContent=ee),A=this._document.createElement("span"),I=0,ee=""}else A=this._document.createElement("span");if(le=Ce.bg,ae=Ce.fg,be=Ce.extended.ext,M=zi,N=z,K=hi,Ue&&R>=we&&R<=gt&&(R=we),!this._coreService.isCursorHidden&&Yi){if(_e.push("xterm-cursor"),this._coreBrowserService.isFocused)O&&_e.push("xterm-cursor-blink"),_e.push(w==="bar"?"xterm-cursor-bar":w==="underline"?"xterm-cursor-underline":"xterm-cursor-block");else if(E)switch(E){case"outline":_e.push("xterm-cursor-outline");break;case"block":_e.push("xterm-cursor-block");break;case"bar":_e.push("xterm-cursor-bar");break;case"underline":_e.push("xterm-cursor-underline")}}if(Ce.isBold()&&_e.push("xterm-bold"),Ce.isItalic()&&_e.push("xterm-italic"),Ce.isDim()&&_e.push("xterm-dim"),ee=Ce.isInvisible()?g.WHITESPACE_CELL_CHAR:Ce.getChars()||g.WHITESPACE_CELL_CHAR,Ce.isUnderline()&&(_e.push(`xterm-underline-${Ce.extended.underlineStyle}`),ee===" "&&(ee=" "),!Ce.isUnderlineColorDefault()))if(Ce.isUnderlineColorRGB())A.style.textDecorationColor=`rgb(${p.AttributeData.toColorRGB(Ce.getUnderlineColor()).join(",")})`;else{let Ie=Ce.getUnderlineColor();this._optionsService.rawOptions.drawBoldTextInBrightColors&&Ce.isBold()&&Ie<8&&(Ie+=8),A.style.textDecorationColor=B.ansi[Ie].css}Ce.isOverline()&&(_e.push("xterm-overline"),ee===" "&&(ee=" ")),Ce.isStrikethrough()&&_e.push("xterm-strikethrough"),zi&&(A.style.textDecoration="underline");let dt=Ce.getFgColor(),ui=Ce.getFgColorMode(),Ct=Ce.getBgColor(),P=Ce.getBgColorMode();const vr=!!Ce.isInverse();if(vr){const Ie=dt;dt=Ct,Ct=Ie;const kc=ui;ui=P,P=kc}let ei,br,ti,Zi=!1;switch(this._decorationService.forEachDecorationAtCell(we,k,void 0,Ie=>{Ie.options.layer!=="top"&&Zi||(Ie.backgroundColorRGB&&(P=50331648,Ct=Ie.backgroundColorRGB.rgba>>8&16777215,ei=Ie.backgroundColorRGB),Ie.foregroundColorRGB&&(ui=50331648,dt=Ie.foregroundColorRGB.rgba>>8&16777215,br=Ie.foregroundColorRGB),Zi=Ie.options.layer==="top")}),!Zi&&hi&&(ei=this._coreBrowserService.isFocused?B.selectionBackgroundOpaque:B.selectionInactiveBackgroundOpaque,Ct=ei.rgba>>8&16777215,P=50331648,Zi=!0,B.selectionForeground&&(ui=50331648,dt=B.selectionForeground.rgba>>8&16777215,br=B.selectionForeground)),Zi&&_e.push("xterm-decoration-top"),P){case 16777216:case 33554432:ti=B.ansi[Ct],_e.push(`xterm-bg-${Ct}`);break;case 50331648:ti=m.rgba.toColor(Ct>>16,Ct>>8&255,255&Ct),this._addStyle(A,`background-color:#${S((Ct>>>0).toString(16),"0",6)}`);break;default:vr?(ti=B.foreground,_e.push(`xterm-bg-${u.INVERTED_DEFAULT_COLOR}`)):ti=B.background}switch(ei||Ce.isDim()&&(ei=m.color.multiplyOpacity(ti,.5)),ui){case 16777216:case 33554432:Ce.isBold()&&dt<8&&this._optionsService.rawOptions.drawBoldTextInBrightColors&&(dt+=8),this._applyMinimumContrast(A,ti,B.ansi[dt],Ce,ei,void 0)||_e.push(`xterm-fg-${dt}`);break;case 50331648:const Ie=m.rgba.toColor(dt>>16&255,dt>>8&255,255&dt);this._applyMinimumContrast(A,ti,Ie,Ce,ei,br)||this._addStyle(A,`color:#${S(dt.toString(16),"0",6)}`);break;default:this._applyMinimumContrast(A,ti,B.foreground,Ce,ei,void 0)||vr&&_e.push(`xterm-fg-${u.INVERTED_DEFAULT_COLOR}`)}_e.length&&(A.className=_e.join(" "),_e.length=0),Yi||Ue||qi?A.textContent=ee:I++,z!==this.defaultSpacing&&(A.style.letterSpacing=`${z}px`),Z.push(A),we=gt}return A&&I&&(A.textContent=ee),Z}_applyMinimumContrast(L,k,C,w,E,R){if(this._optionsService.rawOptions.minimumContrastRatio===1||(0,_.excludeFromContrastRatioDemands)(w.getCode()))return!1;const O=this._getContrastCache(w);let T;if(E||R||(T=O.getColor(k.rgba,C.rgba)),T===void 0){const x=this._optionsService.rawOptions.minimumContrastRatio/(w.isDim()?2:1);T=m.color.ensureContrastRatio(E||k,R||C,x),O.setColor((E||k).rgba,(R||C).rgba,T??null)}return!!T&&(this._addStyle(L,`color:${T.css}`),!0)}_getContrastCache(L){return L.isDim()?this._themeService.colors.halfContrastCache:this._themeService.colors.contrastCache}_addStyle(L,k){L.setAttribute("style",`${L.getAttribute("style")||""}${k};`)}_isCellInSelection(L,k){const C=this._selectionStart,w=this._selectionEnd;return!(!C||!w)&&(this._columnSelectMode?C[0]<=w[0]?L>=C[0]&&k>=C[1]&&L<w[0]&&k<=w[1]:L<C[0]&&k>=C[1]&&L>=w[0]&&k<=w[1]:k>C[1]&&k<w[1]||C[1]===w[1]&&k===C[1]&&L>=C[0]&&L<w[0]||C[1]<w[1]&&k===w[1]&&L<w[0]||C[1]<w[1]&&k===C[1]&&L>=C[0])}};function S(L,k,C){for(;L.length<C;)L=k+L;return L}o.DomRendererRowFactory=v=h([d(1,c.ICharacterJoinerService),d(2,y.IOptionsService),d(3,c.ICoreBrowserService),d(4,y.ICoreService),d(5,y.IDecorationService),d(6,c.IThemeService)],v)},2550:(l,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.WidthCache=void 0,o.WidthCache=class{constructor(a){this._flat=new Float32Array(256),this._font="",this._fontSize=0,this._weight="normal",this._weightBold="bold",this._measureElements=[],this._container=a.createElement("div"),this._container.style.position="absolute",this._container.style.top="-50000px",this._container.style.width="50000px",this._container.style.whiteSpace="pre",this._container.style.fontKerning="none";const h=a.createElement("span"),d=a.createElement("span");d.style.fontWeight="bold";const u=a.createElement("span");u.style.fontStyle="italic";const g=a.createElement("span");g.style.fontWeight="bold",g.style.fontStyle="italic",this._measureElements=[h,d,u,g],this._container.appendChild(h),this._container.appendChild(d),this._container.appendChild(u),this._container.appendChild(g),a.body.appendChild(this._container),this.clear()}dispose(){this._container.remove(),this._measureElements.length=0,this._holey=void 0}clear(){this._flat.fill(-9999),this._holey=new Map}setFont(a,h,d,u){a===this._font&&h===this._fontSize&&d===this._weight&&u===this._weightBold||(this._font=a,this._fontSize=h,this._weight=d,this._weightBold=u,this._container.style.fontFamily=this._font,this._container.style.fontSize=`${this._fontSize}px`,this._measureElements[0].style.fontWeight=`${d}`,this._measureElements[1].style.fontWeight=`${u}`,this._measureElements[2].style.fontWeight=`${d}`,this._measureElements[3].style.fontWeight=`${u}`,this.clear())}get(a,h,d){let u=0;if(!h&&!d&&a.length===1&&(u=a.charCodeAt(0))<256)return this._flat[u]!==-9999?this._flat[u]:this._flat[u]=this._measure(a,0);let g=a;h&&(g+="B"),d&&(g+="I");let b=this._holey.get(g);if(b===void 0){let y=0;h&&(y|=1),d&&(y|=2),b=this._measure(a,y),this._holey.set(g,b)}return b}_measure(a,h){const d=this._measureElements[h];return d.textContent=a.repeat(32),d.offsetWidth/32}}},2223:(l,o,a)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.TEXT_BASELINE=o.DIM_OPACITY=o.INVERTED_DEFAULT_COLOR=void 0;const h=a(6114);o.INVERTED_DEFAULT_COLOR=257,o.DIM_OPACITY=.5,o.TEXT_BASELINE=h.isFirefox||h.isLegacyEdge?"bottom":"ideographic"},6171:(l,o)=>{function a(h){return 57508<=h&&h<=57558}Object.defineProperty(o,"__esModule",{value:!0}),o.createRenderDimensions=o.excludeFromContrastRatioDemands=o.isRestrictedPowerlineGlyph=o.isPowerlineGlyph=o.throwIfFalsy=void 0,o.throwIfFalsy=function(h){if(!h)throw new Error("value must not be falsy");return h},o.isPowerlineGlyph=a,o.isRestrictedPowerlineGlyph=function(h){return 57520<=h&&h<=57527},o.excludeFromContrastRatioDemands=function(h){return a(h)||function(d){return 9472<=d&&d<=9631}(h)},o.createRenderDimensions=function(){return{css:{canvas:{width:0,height:0},cell:{width:0,height:0}},device:{canvas:{width:0,height:0},cell:{width:0,height:0},char:{width:0,height:0,left:0,top:0}}}}},456:(l,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.SelectionModel=void 0,o.SelectionModel=class{constructor(a){this._bufferService=a,this.isSelectAllActive=!1,this.selectionStartLength=0}clearSelection(){this.selectionStart=void 0,this.selectionEnd=void 0,this.isSelectAllActive=!1,this.selectionStartLength=0}get finalSelectionStart(){return this.isSelectAllActive?[0,0]:this.selectionEnd&&this.selectionStart&&this.areSelectionValuesReversed()?this.selectionEnd:this.selectionStart}get finalSelectionEnd(){if(this.isSelectAllActive)return[this._bufferService.cols,this._bufferService.buffer.ybase+this._bufferService.rows-1];if(this.selectionStart){if(!this.selectionEnd||this.areSelectionValuesReversed()){const a=this.selectionStart[0]+this.selectionStartLength;return a>this._bufferService.cols?a%this._bufferService.cols==0?[this._bufferService.cols,this.selectionStart[1]+Math.floor(a/this._bufferService.cols)-1]:[a%this._bufferService.cols,this.selectionStart[1]+Math.floor(a/this._bufferService.cols)]:[a,this.selectionStart[1]]}if(this.selectionStartLength&&this.selectionEnd[1]===this.selectionStart[1]){const a=this.selectionStart[0]+this.selectionStartLength;return a>this._bufferService.cols?[a%this._bufferService.cols,this.selectionStart[1]+Math.floor(a/this._bufferService.cols)]:[Math.max(a,this.selectionEnd[0]),this.selectionEnd[1]]}return this.selectionEnd}}areSelectionValuesReversed(){const a=this.selectionStart,h=this.selectionEnd;return!(!a||!h)&&(a[1]>h[1]||a[1]===h[1]&&a[0]>h[0])}handleTrim(a){return this.selectionStart&&(this.selectionStart[1]-=a),this.selectionEnd&&(this.selectionEnd[1]-=a),this.selectionEnd&&this.selectionEnd[1]<0?(this.clearSelection(),!0):(this.selectionStart&&this.selectionStart[1]<0&&(this.selectionStart[1]=0),!1)}}},428:function(l,o,a){var h=this&&this.__decorate||function(c,f,_,p){var v,S=arguments.length,L=S<3?f:p===null?p=Object.getOwnPropertyDescriptor(f,_):p;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")L=Reflect.decorate(c,f,_,p);else for(var k=c.length-1;k>=0;k--)(v=c[k])&&(L=(S<3?v(L):S>3?v(f,_,L):v(f,_))||L);return S>3&&L&&Object.defineProperty(f,_,L),L},d=this&&this.__param||function(c,f){return function(_,p){f(_,p,c)}};Object.defineProperty(o,"__esModule",{value:!0}),o.CharSizeService=void 0;const u=a(2585),g=a(8460),b=a(844);let y=o.CharSizeService=class extends b.Disposable{get hasValidSize(){return this.width>0&&this.height>0}constructor(c,f,_){super(),this._optionsService=_,this.width=0,this.height=0,this._onCharSizeChange=this.register(new g.EventEmitter),this.onCharSizeChange=this._onCharSizeChange.event,this._measureStrategy=new m(c,f,this._optionsService),this.register(this._optionsService.onMultipleOptionChange(["fontFamily","fontSize"],()=>this.measure()))}measure(){const c=this._measureStrategy.measure();c.width===this.width&&c.height===this.height||(this.width=c.width,this.height=c.height,this._onCharSizeChange.fire())}};o.CharSizeService=y=h([d(2,u.IOptionsService)],y);class m{constructor(f,_,p){this._document=f,this._parentElement=_,this._optionsService=p,this._result={width:0,height:0},this._measureElement=this._document.createElement("span"),this._measureElement.classList.add("xterm-char-measure-element"),this._measureElement.textContent="W".repeat(32),this._measureElement.setAttribute("aria-hidden","true"),this._measureElement.style.whiteSpace="pre",this._measureElement.style.fontKerning="none",this._parentElement.appendChild(this._measureElement)}measure(){this._measureElement.style.fontFamily=this._optionsService.rawOptions.fontFamily,this._measureElement.style.fontSize=`${this._optionsService.rawOptions.fontSize}px`;const f={height:Number(this._measureElement.offsetHeight),width:Number(this._measureElement.offsetWidth)};return f.width!==0&&f.height!==0&&(this._result.width=f.width/32,this._result.height=Math.ceil(f.height)),this._result}}},4269:function(l,o,a){var h=this&&this.__decorate||function(f,_,p,v){var S,L=arguments.length,k=L<3?_:v===null?v=Object.getOwnPropertyDescriptor(_,p):v;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")k=Reflect.decorate(f,_,p,v);else for(var C=f.length-1;C>=0;C--)(S=f[C])&&(k=(L<3?S(k):L>3?S(_,p,k):S(_,p))||k);return L>3&&k&&Object.defineProperty(_,p,k),k},d=this&&this.__param||function(f,_){return function(p,v){_(p,v,f)}};Object.defineProperty(o,"__esModule",{value:!0}),o.CharacterJoinerService=o.JoinedCellData=void 0;const u=a(3734),g=a(643),b=a(511),y=a(2585);class m extends u.AttributeData{constructor(_,p,v){super(),this.content=0,this.combinedData="",this.fg=_.fg,this.bg=_.bg,this.combinedData=p,this._width=v}isCombined(){return 2097152}getWidth(){return this._width}getChars(){return this.combinedData}getCode(){return 2097151}setFromCharData(_){throw new Error("not implemented")}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}}o.JoinedCellData=m;let c=o.CharacterJoinerService=class hc{constructor(_){this._bufferService=_,this._characterJoiners=[],this._nextCharacterJoinerId=0,this._workCell=new b.CellData}register(_){const p={id:this._nextCharacterJoinerId++,handler:_};return this._characterJoiners.push(p),p.id}deregister(_){for(let p=0;p<this._characterJoiners.length;p++)if(this._characterJoiners[p].id===_)return this._characterJoiners.splice(p,1),!0;return!1}getJoinedCharacters(_){if(this._characterJoiners.length===0)return[];const p=this._bufferService.buffer.lines.get(_);if(!p||p.length===0)return[];const v=[],S=p.translateToString(!0);let L=0,k=0,C=0,w=p.getFg(0),E=p.getBg(0);for(let R=0;R<p.getTrimmedLength();R++)if(p.loadCell(R,this._workCell),this._workCell.getWidth()!==0){if(this._workCell.fg!==w||this._workCell.bg!==E){if(R-L>1){const O=this._getJoinedRanges(S,C,k,p,L);for(let T=0;T<O.length;T++)v.push(O[T])}L=R,C=k,w=this._workCell.fg,E=this._workCell.bg}k+=this._workCell.getChars().length||g.WHITESPACE_CELL_CHAR.length}if(this._bufferService.cols-L>1){const R=this._getJoinedRanges(S,C,k,p,L);for(let O=0;O<R.length;O++)v.push(R[O])}return v}_getJoinedRanges(_,p,v,S,L){const k=_.substring(p,v);let C=[];try{C=this._characterJoiners[0].handler(k)}catch(w){console.error(w)}for(let w=1;w<this._characterJoiners.length;w++)try{const E=this._characterJoiners[w].handler(k);for(let R=0;R<E.length;R++)hc._mergeRanges(C,E[R])}catch(E){console.error(E)}return this._stringRangesToCellRanges(C,S,L),C}_stringRangesToCellRanges(_,p,v){let S=0,L=!1,k=0,C=_[S];if(C){for(let w=v;w<this._bufferService.cols;w++){const E=p.getWidth(w),R=p.getString(w).length||g.WHITESPACE_CELL_CHAR.length;if(E!==0){if(!L&&C[0]<=k&&(C[0]=w,L=!0),C[1]<=k){if(C[1]=w,C=_[++S],!C)break;C[0]<=k?(C[0]=w,L=!0):L=!1}k+=R}}C&&(C[1]=this._bufferService.cols)}}static _mergeRanges(_,p){let v=!1;for(let S=0;S<_.length;S++){const L=_[S];if(v){if(p[1]<=L[0])return _[S-1][1]=p[1],_;if(p[1]<=L[1])return _[S-1][1]=Math.max(p[1],L[1]),_.splice(S,1),_;_.splice(S,1),S--}else{if(p[1]<=L[0])return _.splice(S,0,p),_;if(p[1]<=L[1])return L[0]=Math.min(p[0],L[0]),_;p[0]<L[1]&&(L[0]=Math.min(p[0],L[0]),v=!0)}}return v?_[_.length-1][1]=p[1]:_.push(p),_}};o.CharacterJoinerService=c=h([d(0,y.IBufferService)],c)},5114:(l,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.CoreBrowserService=void 0,o.CoreBrowserService=class{constructor(a,h){this._textarea=a,this.window=h,this._isFocused=!1,this._cachedIsFocused=void 0,this._textarea.addEventListener("focus",()=>this._isFocused=!0),this._textarea.addEventListener("blur",()=>this._isFocused=!1)}get dpr(){return this.window.devicePixelRatio}get isFocused(){return this._cachedIsFocused===void 0&&(this._cachedIsFocused=this._isFocused&&this._textarea.ownerDocument.hasFocus(),queueMicrotask(()=>this._cachedIsFocused=void 0)),this._cachedIsFocused}}},8934:function(l,o,a){var h=this&&this.__decorate||function(y,m,c,f){var _,p=arguments.length,v=p<3?m:f===null?f=Object.getOwnPropertyDescriptor(m,c):f;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")v=Reflect.decorate(y,m,c,f);else for(var S=y.length-1;S>=0;S--)(_=y[S])&&(v=(p<3?_(v):p>3?_(m,c,v):_(m,c))||v);return p>3&&v&&Object.defineProperty(m,c,v),v},d=this&&this.__param||function(y,m){return function(c,f){m(c,f,y)}};Object.defineProperty(o,"__esModule",{value:!0}),o.MouseService=void 0;const u=a(4725),g=a(9806);let b=o.MouseService=class{constructor(y,m){this._renderService=y,this._charSizeService=m}getCoords(y,m,c,f,_){return(0,g.getCoords)(window,y,m,c,f,this._charSizeService.hasValidSize,this._renderService.dimensions.css.cell.width,this._renderService.dimensions.css.cell.height,_)}getMouseReportCoords(y,m){const c=(0,g.getCoordsRelativeToElement)(window,y,m);if(this._charSizeService.hasValidSize)return c[0]=Math.min(Math.max(c[0],0),this._renderService.dimensions.css.canvas.width-1),c[1]=Math.min(Math.max(c[1],0),this._renderService.dimensions.css.canvas.height-1),{col:Math.floor(c[0]/this._renderService.dimensions.css.cell.width),row:Math.floor(c[1]/this._renderService.dimensions.css.cell.height),x:Math.floor(c[0]),y:Math.floor(c[1])}}};o.MouseService=b=h([d(0,u.IRenderService),d(1,u.ICharSizeService)],b)},3230:function(l,o,a){var h=this&&this.__decorate||function(v,S,L,k){var C,w=arguments.length,E=w<3?S:k===null?k=Object.getOwnPropertyDescriptor(S,L):k;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")E=Reflect.decorate(v,S,L,k);else for(var R=v.length-1;R>=0;R--)(C=v[R])&&(E=(w<3?C(E):w>3?C(S,L,E):C(S,L))||E);return w>3&&E&&Object.defineProperty(S,L,E),E},d=this&&this.__param||function(v,S){return function(L,k){S(L,k,v)}};Object.defineProperty(o,"__esModule",{value:!0}),o.RenderService=void 0;const u=a(3656),g=a(6193),b=a(5596),y=a(4725),m=a(8460),c=a(844),f=a(7226),_=a(2585);let p=o.RenderService=class extends c.Disposable{get dimensions(){return this._renderer.value.dimensions}constructor(v,S,L,k,C,w,E,R){if(super(),this._rowCount=v,this._charSizeService=k,this._renderer=this.register(new c.MutableDisposable),this._pausedResizeTask=new f.DebouncedIdleTask,this._isPaused=!1,this._needsFullRefresh=!1,this._isNextRenderRedrawOnly=!0,this._needsSelectionRefresh=!1,this._canvasWidth=0,this._canvasHeight=0,this._selectionState={start:void 0,end:void 0,columnSelectMode:!1},this._onDimensionsChange=this.register(new m.EventEmitter),this.onDimensionsChange=this._onDimensionsChange.event,this._onRenderedViewportChange=this.register(new m.EventEmitter),this.onRenderedViewportChange=this._onRenderedViewportChange.event,this._onRender=this.register(new m.EventEmitter),this.onRender=this._onRender.event,this._onRefreshRequest=this.register(new m.EventEmitter),this.onRefreshRequest=this._onRefreshRequest.event,this._renderDebouncer=new g.RenderDebouncer(E.window,(O,T)=>this._renderRows(O,T)),this.register(this._renderDebouncer),this._screenDprMonitor=new b.ScreenDprMonitor(E.window),this._screenDprMonitor.setListener(()=>this.handleDevicePixelRatioChange()),this.register(this._screenDprMonitor),this.register(w.onResize(()=>this._fullRefresh())),this.register(w.buffers.onBufferActivate(()=>{var O;return(O=this._renderer.value)===null||O===void 0?void 0:O.clear()})),this.register(L.onOptionChange(()=>this._handleOptionsChanged())),this.register(this._charSizeService.onCharSizeChange(()=>this.handleCharSizeChanged())),this.register(C.onDecorationRegistered(()=>this._fullRefresh())),this.register(C.onDecorationRemoved(()=>this._fullRefresh())),this.register(L.onMultipleOptionChange(["customGlyphs","drawBoldTextInBrightColors","letterSpacing","lineHeight","fontFamily","fontSize","fontWeight","fontWeightBold","minimumContrastRatio"],()=>{this.clear(),this.handleResize(w.cols,w.rows),this._fullRefresh()})),this.register(L.onMultipleOptionChange(["cursorBlink","cursorStyle"],()=>this.refreshRows(w.buffer.y,w.buffer.y,!0))),this.register((0,u.addDisposableDomListener)(E.window,"resize",()=>this.handleDevicePixelRatioChange())),this.register(R.onChangeColors(()=>this._fullRefresh())),"IntersectionObserver"in E.window){const O=new E.window.IntersectionObserver(T=>this._handleIntersectionChange(T[T.length-1]),{threshold:0});O.observe(S),this.register({dispose:()=>O.disconnect()})}}_handleIntersectionChange(v){this._isPaused=v.isIntersecting===void 0?v.intersectionRatio===0:!v.isIntersecting,this._isPaused||this._charSizeService.hasValidSize||this._charSizeService.measure(),!this._isPaused&&this._needsFullRefresh&&(this._pausedResizeTask.flush(),this.refreshRows(0,this._rowCount-1),this._needsFullRefresh=!1)}refreshRows(v,S,L=!1){this._isPaused?this._needsFullRefresh=!0:(L||(this._isNextRenderRedrawOnly=!1),this._renderDebouncer.refresh(v,S,this._rowCount))}_renderRows(v,S){this._renderer.value&&(v=Math.min(v,this._rowCount-1),S=Math.min(S,this._rowCount-1),this._renderer.value.renderRows(v,S),this._needsSelectionRefresh&&(this._renderer.value.handleSelectionChanged(this._selectionState.start,this._selectionState.end,this._selectionState.columnSelectMode),this._needsSelectionRefresh=!1),this._isNextRenderRedrawOnly||this._onRenderedViewportChange.fire({start:v,end:S}),this._onRender.fire({start:v,end:S}),this._isNextRenderRedrawOnly=!0)}resize(v,S){this._rowCount=S,this._fireOnCanvasResize()}_handleOptionsChanged(){this._renderer.value&&(this.refreshRows(0,this._rowCount-1),this._fireOnCanvasResize())}_fireOnCanvasResize(){this._renderer.value&&(this._renderer.value.dimensions.css.canvas.width===this._canvasWidth&&this._renderer.value.dimensions.css.canvas.height===this._canvasHeight||this._onDimensionsChange.fire(this._renderer.value.dimensions))}hasRenderer(){return!!this._renderer.value}setRenderer(v){this._renderer.value=v,this._renderer.value.onRequestRedraw(S=>this.refreshRows(S.start,S.end,!0)),this._needsSelectionRefresh=!0,this._fullRefresh()}addRefreshCallback(v){return this._renderDebouncer.addRefreshCallback(v)}_fullRefresh(){this._isPaused?this._needsFullRefresh=!0:this.refreshRows(0,this._rowCount-1)}clearTextureAtlas(){var v,S;this._renderer.value&&((S=(v=this._renderer.value).clearTextureAtlas)===null||S===void 0||S.call(v),this._fullRefresh())}handleDevicePixelRatioChange(){this._charSizeService.measure(),this._renderer.value&&(this._renderer.value.handleDevicePixelRatioChange(),this.refreshRows(0,this._rowCount-1))}handleResize(v,S){this._renderer.value&&(this._isPaused?this._pausedResizeTask.set(()=>this._renderer.value.handleResize(v,S)):this._renderer.value.handleResize(v,S),this._fullRefresh())}handleCharSizeChanged(){var v;(v=this._renderer.value)===null||v===void 0||v.handleCharSizeChanged()}handleBlur(){var v;(v=this._renderer.value)===null||v===void 0||v.handleBlur()}handleFocus(){var v;(v=this._renderer.value)===null||v===void 0||v.handleFocus()}handleSelectionChanged(v,S,L){var k;this._selectionState.start=v,this._selectionState.end=S,this._selectionState.columnSelectMode=L,(k=this._renderer.value)===null||k===void 0||k.handleSelectionChanged(v,S,L)}handleCursorMove(){var v;(v=this._renderer.value)===null||v===void 0||v.handleCursorMove()}clear(){var v;(v=this._renderer.value)===null||v===void 0||v.clear()}};o.RenderService=p=h([d(2,_.IOptionsService),d(3,y.ICharSizeService),d(4,_.IDecorationService),d(5,_.IBufferService),d(6,y.ICoreBrowserService),d(7,y.IThemeService)],p)},9312:function(l,o,a){var h=this&&this.__decorate||function(C,w,E,R){var O,T=arguments.length,x=T<3?w:R===null?R=Object.getOwnPropertyDescriptor(w,E):R;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")x=Reflect.decorate(C,w,E,R);else for(var j=C.length-1;j>=0;j--)(O=C[j])&&(x=(T<3?O(x):T>3?O(w,E,x):O(w,E))||x);return T>3&&x&&Object.defineProperty(w,E,x),x},d=this&&this.__param||function(C,w){return function(E,R){w(E,R,C)}};Object.defineProperty(o,"__esModule",{value:!0}),o.SelectionService=void 0;const u=a(9806),g=a(9504),b=a(456),y=a(4725),m=a(8460),c=a(844),f=a(6114),_=a(4841),p=a(511),v=a(2585),S=String.fromCharCode(160),L=new RegExp(S,"g");let k=o.SelectionService=class extends c.Disposable{constructor(C,w,E,R,O,T,x,j,Y){super(),this._element=C,this._screenElement=w,this._linkifier=E,this._bufferService=R,this._coreService=O,this._mouseService=T,this._optionsService=x,this._renderService=j,this._coreBrowserService=Y,this._dragScrollAmount=0,this._enabled=!0,this._workCell=new p.CellData,this._mouseDownTimeStamp=0,this._oldHasSelection=!1,this._oldSelectionStart=void 0,this._oldSelectionEnd=void 0,this._onLinuxMouseSelection=this.register(new m.EventEmitter),this.onLinuxMouseSelection=this._onLinuxMouseSelection.event,this._onRedrawRequest=this.register(new m.EventEmitter),this.onRequestRedraw=this._onRedrawRequest.event,this._onSelectionChange=this.register(new m.EventEmitter),this.onSelectionChange=this._onSelectionChange.event,this._onRequestScrollLines=this.register(new m.EventEmitter),this.onRequestScrollLines=this._onRequestScrollLines.event,this._mouseMoveListener=Z=>this._handleMouseMove(Z),this._mouseUpListener=Z=>this._handleMouseUp(Z),this._coreService.onUserInput(()=>{this.hasSelection&&this.clearSelection()}),this._trimListener=this._bufferService.buffer.lines.onTrim(Z=>this._handleTrim(Z)),this.register(this._bufferService.buffers.onBufferActivate(Z=>this._handleBufferActivate(Z))),this.enable(),this._model=new b.SelectionModel(this._bufferService),this._activeSelectionMode=0,this.register((0,c.toDisposable)(()=>{this._removeMouseDownListeners()}))}reset(){this.clearSelection()}disable(){this.clearSelection(),this._enabled=!1}enable(){this._enabled=!0}get selectionStart(){return this._model.finalSelectionStart}get selectionEnd(){return this._model.finalSelectionEnd}get hasSelection(){const C=this._model.finalSelectionStart,w=this._model.finalSelectionEnd;return!(!C||!w||C[0]===w[0]&&C[1]===w[1])}get selectionText(){const C=this._model.finalSelectionStart,w=this._model.finalSelectionEnd;if(!C||!w)return"";const E=this._bufferService.buffer,R=[];if(this._activeSelectionMode===3){if(C[0]===w[0])return"";const O=C[0]<w[0]?C[0]:w[0],T=C[0]<w[0]?w[0]:C[0];for(let x=C[1];x<=w[1];x++){const j=E.translateBufferLineToString(x,!0,O,T);R.push(j)}}else{const O=C[1]===w[1]?w[0]:void 0;R.push(E.translateBufferLineToString(C[1],!0,C[0],O));for(let T=C[1]+1;T<=w[1]-1;T++){const x=E.lines.get(T),j=E.translateBufferLineToString(T,!0);x!=null&&x.isWrapped?R[R.length-1]+=j:R.push(j)}if(C[1]!==w[1]){const T=E.lines.get(w[1]),x=E.translateBufferLineToString(w[1],!0,0,w[0]);T&&T.isWrapped?R[R.length-1]+=x:R.push(x)}}return R.map(O=>O.replace(L," ")).join(f.isWindows?`\r
`:`
`)}clearSelection(){this._model.clearSelection(),this._removeMouseDownListeners(),this.refresh(),this._onSelectionChange.fire()}refresh(C){this._refreshAnimationFrame||(this._refreshAnimationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>this._refresh())),f.isLinux&&C&&this.selectionText.length&&this._onLinuxMouseSelection.fire(this.selectionText)}_refresh(){this._refreshAnimationFrame=void 0,this._onRedrawRequest.fire({start:this._model.finalSelectionStart,end:this._model.finalSelectionEnd,columnSelectMode:this._activeSelectionMode===3})}_isClickInSelection(C){const w=this._getMouseBufferCoords(C),E=this._model.finalSelectionStart,R=this._model.finalSelectionEnd;return!!(E&&R&&w)&&this._areCoordsInSelection(w,E,R)}isCellInSelection(C,w){const E=this._model.finalSelectionStart,R=this._model.finalSelectionEnd;return!(!E||!R)&&this._areCoordsInSelection([C,w],E,R)}_areCoordsInSelection(C,w,E){return C[1]>w[1]&&C[1]<E[1]||w[1]===E[1]&&C[1]===w[1]&&C[0]>=w[0]&&C[0]<E[0]||w[1]<E[1]&&C[1]===E[1]&&C[0]<E[0]||w[1]<E[1]&&C[1]===w[1]&&C[0]>=w[0]}_selectWordAtCursor(C,w){var E,R;const O=(R=(E=this._linkifier.currentLink)===null||E===void 0?void 0:E.link)===null||R===void 0?void 0:R.range;if(O)return this._model.selectionStart=[O.start.x-1,O.start.y-1],this._model.selectionStartLength=(0,_.getRangeLength)(O,this._bufferService.cols),this._model.selectionEnd=void 0,!0;const T=this._getMouseBufferCoords(C);return!!T&&(this._selectWordAt(T,w),this._model.selectionEnd=void 0,!0)}selectAll(){this._model.isSelectAllActive=!0,this.refresh(),this._onSelectionChange.fire()}selectLines(C,w){this._model.clearSelection(),C=Math.max(C,0),w=Math.min(w,this._bufferService.buffer.lines.length-1),this._model.selectionStart=[0,C],this._model.selectionEnd=[this._bufferService.cols,w],this.refresh(),this._onSelectionChange.fire()}_handleTrim(C){this._model.handleTrim(C)&&this.refresh()}_getMouseBufferCoords(C){const w=this._mouseService.getCoords(C,this._screenElement,this._bufferService.cols,this._bufferService.rows,!0);if(w)return w[0]--,w[1]--,w[1]+=this._bufferService.buffer.ydisp,w}_getMouseEventScrollAmount(C){let w=(0,u.getCoordsRelativeToElement)(this._coreBrowserService.window,C,this._screenElement)[1];const E=this._renderService.dimensions.css.canvas.height;return w>=0&&w<=E?0:(w>E&&(w-=E),w=Math.min(Math.max(w,-50),50),w/=50,w/Math.abs(w)+Math.round(14*w))}shouldForceSelection(C){return f.isMac?C.altKey&&this._optionsService.rawOptions.macOptionClickForcesSelection:C.shiftKey}handleMouseDown(C){if(this._mouseDownTimeStamp=C.timeStamp,(C.button!==2||!this.hasSelection)&&C.button===0){if(!this._enabled){if(!this.shouldForceSelection(C))return;C.stopPropagation()}C.preventDefault(),this._dragScrollAmount=0,this._enabled&&C.shiftKey?this._handleIncrementalClick(C):C.detail===1?this._handleSingleClick(C):C.detail===2?this._handleDoubleClick(C):C.detail===3&&this._handleTripleClick(C),this._addMouseDownListeners(),this.refresh(!0)}}_addMouseDownListeners(){this._screenElement.ownerDocument&&(this._screenElement.ownerDocument.addEventListener("mousemove",this._mouseMoveListener),this._screenElement.ownerDocument.addEventListener("mouseup",this._mouseUpListener)),this._dragScrollIntervalTimer=this._coreBrowserService.window.setInterval(()=>this._dragScroll(),50)}_removeMouseDownListeners(){this._screenElement.ownerDocument&&(this._screenElement.ownerDocument.removeEventListener("mousemove",this._mouseMoveListener),this._screenElement.ownerDocument.removeEventListener("mouseup",this._mouseUpListener)),this._coreBrowserService.window.clearInterval(this._dragScrollIntervalTimer),this._dragScrollIntervalTimer=void 0}_handleIncrementalClick(C){this._model.selectionStart&&(this._model.selectionEnd=this._getMouseBufferCoords(C))}_handleSingleClick(C){if(this._model.selectionStartLength=0,this._model.isSelectAllActive=!1,this._activeSelectionMode=this.shouldColumnSelect(C)?3:0,this._model.selectionStart=this._getMouseBufferCoords(C),!this._model.selectionStart)return;this._model.selectionEnd=void 0;const w=this._bufferService.buffer.lines.get(this._model.selectionStart[1]);w&&w.length!==this._model.selectionStart[0]&&w.hasWidth(this._model.selectionStart[0])===0&&this._model.selectionStart[0]++}_handleDoubleClick(C){this._selectWordAtCursor(C,!0)&&(this._activeSelectionMode=1)}_handleTripleClick(C){const w=this._getMouseBufferCoords(C);w&&(this._activeSelectionMode=2,this._selectLineAt(w[1]))}shouldColumnSelect(C){return C.altKey&&!(f.isMac&&this._optionsService.rawOptions.macOptionClickForcesSelection)}_handleMouseMove(C){if(C.stopImmediatePropagation(),!this._model.selectionStart)return;const w=this._model.selectionEnd?[this._model.selectionEnd[0],this._model.selectionEnd[1]]:null;if(this._model.selectionEnd=this._getMouseBufferCoords(C),!this._model.selectionEnd)return void this.refresh(!0);this._activeSelectionMode===2?this._model.selectionEnd[1]<this._model.selectionStart[1]?this._model.selectionEnd[0]=0:this._model.selectionEnd[0]=this._bufferService.cols:this._activeSelectionMode===1&&this._selectToWordAt(this._model.selectionEnd),this._dragScrollAmount=this._getMouseEventScrollAmount(C),this._activeSelectionMode!==3&&(this._dragScrollAmount>0?this._model.selectionEnd[0]=this._bufferService.cols:this._dragScrollAmount<0&&(this._model.selectionEnd[0]=0));const E=this._bufferService.buffer;if(this._model.selectionEnd[1]<E.lines.length){const R=E.lines.get(this._model.selectionEnd[1]);R&&R.hasWidth(this._model.selectionEnd[0])===0&&this._model.selectionEnd[0]++}w&&w[0]===this._model.selectionEnd[0]&&w[1]===this._model.selectionEnd[1]||this.refresh(!0)}_dragScroll(){if(this._model.selectionEnd&&this._model.selectionStart&&this._dragScrollAmount){this._onRequestScrollLines.fire({amount:this._dragScrollAmount,suppressScrollEvent:!1});const C=this._bufferService.buffer;this._dragScrollAmount>0?(this._activeSelectionMode!==3&&(this._model.selectionEnd[0]=this._bufferService.cols),this._model.selectionEnd[1]=Math.min(C.ydisp+this._bufferService.rows,C.lines.length-1)):(this._activeSelectionMode!==3&&(this._model.selectionEnd[0]=0),this._model.selectionEnd[1]=C.ydisp),this.refresh()}}_handleMouseUp(C){const w=C.timeStamp-this._mouseDownTimeStamp;if(this._removeMouseDownListeners(),this.selectionText.length<=1&&w<500&&C.altKey&&this._optionsService.rawOptions.altClickMovesCursor){if(this._bufferService.buffer.ybase===this._bufferService.buffer.ydisp){const E=this._mouseService.getCoords(C,this._element,this._bufferService.cols,this._bufferService.rows,!1);if(E&&E[0]!==void 0&&E[1]!==void 0){const R=(0,g.moveToCellSequence)(E[0]-1,E[1]-1,this._bufferService,this._coreService.decPrivateModes.applicationCursorKeys);this._coreService.triggerDataEvent(R,!0)}}}else this._fireEventIfSelectionChanged()}_fireEventIfSelectionChanged(){const C=this._model.finalSelectionStart,w=this._model.finalSelectionEnd,E=!(!C||!w||C[0]===w[0]&&C[1]===w[1]);E?C&&w&&(this._oldSelectionStart&&this._oldSelectionEnd&&C[0]===this._oldSelectionStart[0]&&C[1]===this._oldSelectionStart[1]&&w[0]===this._oldSelectionEnd[0]&&w[1]===this._oldSelectionEnd[1]||this._fireOnSelectionChange(C,w,E)):this._oldHasSelection&&this._fireOnSelectionChange(C,w,E)}_fireOnSelectionChange(C,w,E){this._oldSelectionStart=C,this._oldSelectionEnd=w,this._oldHasSelection=E,this._onSelectionChange.fire()}_handleBufferActivate(C){this.clearSelection(),this._trimListener.dispose(),this._trimListener=C.activeBuffer.lines.onTrim(w=>this._handleTrim(w))}_convertViewportColToCharacterIndex(C,w){let E=w;for(let R=0;w>=R;R++){const O=C.loadCell(R,this._workCell).getChars().length;this._workCell.getWidth()===0?E--:O>1&&w!==R&&(E+=O-1)}return E}setSelection(C,w,E){this._model.clearSelection(),this._removeMouseDownListeners(),this._model.selectionStart=[C,w],this._model.selectionStartLength=E,this.refresh(),this._fireEventIfSelectionChanged()}rightClickSelect(C){this._isClickInSelection(C)||(this._selectWordAtCursor(C,!1)&&this.refresh(!0),this._fireEventIfSelectionChanged())}_getWordAt(C,w,E=!0,R=!0){if(C[0]>=this._bufferService.cols)return;const O=this._bufferService.buffer,T=O.lines.get(C[1]);if(!T)return;const x=O.translateBufferLineToString(C[1],!1);let j=this._convertViewportColToCharacterIndex(T,C[0]),Y=j;const Z=C[0]-j;let D=0,B=0,A=0,H=0;if(x.charAt(j)===" "){for(;j>0&&x.charAt(j-1)===" ";)j--;for(;Y<x.length&&x.charAt(Y+1)===" ";)Y++}else{let le=C[0],ae=C[0];T.getWidth(le)===0&&(D++,le--),T.getWidth(ae)===2&&(B++,ae++);const be=T.getString(ae).length;for(be>1&&(H+=be-1,Y+=be-1);le>0&&j>0&&!this._isCharWordSeparator(T.loadCell(le-1,this._workCell));){T.loadCell(le-1,this._workCell);const M=this._workCell.getChars().length;this._workCell.getWidth()===0?(D++,le--):M>1&&(A+=M-1,j-=M-1),j--,le--}for(;ae<T.length&&Y+1<x.length&&!this._isCharWordSeparator(T.loadCell(ae+1,this._workCell));){T.loadCell(ae+1,this._workCell);const M=this._workCell.getChars().length;this._workCell.getWidth()===2?(B++,ae++):M>1&&(H+=M-1,Y+=M-1),Y++,ae++}}Y++;let I=j+Z-D+A,ee=Math.min(this._bufferService.cols,Y-j+D+B-A-H);if(w||x.slice(j,Y).trim()!==""){if(E&&I===0&&T.getCodePoint(0)!==32){const le=O.lines.get(C[1]-1);if(le&&T.isWrapped&&le.getCodePoint(this._bufferService.cols-1)!==32){const ae=this._getWordAt([this._bufferService.cols-1,C[1]-1],!1,!0,!1);if(ae){const be=this._bufferService.cols-ae.start;I-=be,ee+=be}}}if(R&&I+ee===this._bufferService.cols&&T.getCodePoint(this._bufferService.cols-1)!==32){const le=O.lines.get(C[1]+1);if(le!=null&&le.isWrapped&&le.getCodePoint(0)!==32){const ae=this._getWordAt([0,C[1]+1],!1,!1,!0);ae&&(ee+=ae.length)}}return{start:I,length:ee}}}_selectWordAt(C,w){const E=this._getWordAt(C,w);if(E){for(;E.start<0;)E.start+=this._bufferService.cols,C[1]--;this._model.selectionStart=[E.start,C[1]],this._model.selectionStartLength=E.length}}_selectToWordAt(C){const w=this._getWordAt(C,!0);if(w){let E=C[1];for(;w.start<0;)w.start+=this._bufferService.cols,E--;if(!this._model.areSelectionValuesReversed())for(;w.start+w.length>this._bufferService.cols;)w.length-=this._bufferService.cols,E++;this._model.selectionEnd=[this._model.areSelectionValuesReversed()?w.start:w.start+w.length,E]}}_isCharWordSeparator(C){return C.getWidth()!==0&&this._optionsService.rawOptions.wordSeparator.indexOf(C.getChars())>=0}_selectLineAt(C){const w=this._bufferService.buffer.getWrappedRangeForLine(C),E={start:{x:0,y:w.first},end:{x:this._bufferService.cols-1,y:w.last}};this._model.selectionStart=[0,w.first],this._model.selectionEnd=void 0,this._model.selectionStartLength=(0,_.getRangeLength)(E,this._bufferService.cols)}};o.SelectionService=k=h([d(3,v.IBufferService),d(4,v.ICoreService),d(5,y.IMouseService),d(6,v.IOptionsService),d(7,y.IRenderService),d(8,y.ICoreBrowserService)],k)},4725:(l,o,a)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.IThemeService=o.ICharacterJoinerService=o.ISelectionService=o.IRenderService=o.IMouseService=o.ICoreBrowserService=o.ICharSizeService=void 0;const h=a(8343);o.ICharSizeService=(0,h.createDecorator)("CharSizeService"),o.ICoreBrowserService=(0,h.createDecorator)("CoreBrowserService"),o.IMouseService=(0,h.createDecorator)("MouseService"),o.IRenderService=(0,h.createDecorator)("RenderService"),o.ISelectionService=(0,h.createDecorator)("SelectionService"),o.ICharacterJoinerService=(0,h.createDecorator)("CharacterJoinerService"),o.IThemeService=(0,h.createDecorator)("ThemeService")},6731:function(l,o,a){var h=this&&this.__decorate||function(k,C,w,E){var R,O=arguments.length,T=O<3?C:E===null?E=Object.getOwnPropertyDescriptor(C,w):E;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")T=Reflect.decorate(k,C,w,E);else for(var x=k.length-1;x>=0;x--)(R=k[x])&&(T=(O<3?R(T):O>3?R(C,w,T):R(C,w))||T);return O>3&&T&&Object.defineProperty(C,w,T),T},d=this&&this.__param||function(k,C){return function(w,E){C(w,E,k)}};Object.defineProperty(o,"__esModule",{value:!0}),o.ThemeService=o.DEFAULT_ANSI_COLORS=void 0;const u=a(7239),g=a(8055),b=a(8460),y=a(844),m=a(2585),c=g.css.toColor("#ffffff"),f=g.css.toColor("#000000"),_=g.css.toColor("#ffffff"),p=g.css.toColor("#000000"),v={css:"rgba(255, 255, 255, 0.3)",rgba:4294967117};o.DEFAULT_ANSI_COLORS=Object.freeze((()=>{const k=[g.css.toColor("#2e3436"),g.css.toColor("#cc0000"),g.css.toColor("#4e9a06"),g.css.toColor("#c4a000"),g.css.toColor("#3465a4"),g.css.toColor("#75507b"),g.css.toColor("#06989a"),g.css.toColor("#d3d7cf"),g.css.toColor("#555753"),g.css.toColor("#ef2929"),g.css.toColor("#8ae234"),g.css.toColor("#fce94f"),g.css.toColor("#729fcf"),g.css.toColor("#ad7fa8"),g.css.toColor("#34e2e2"),g.css.toColor("#eeeeec")],C=[0,95,135,175,215,255];for(let w=0;w<216;w++){const E=C[w/36%6|0],R=C[w/6%6|0],O=C[w%6];k.push({css:g.channels.toCss(E,R,O),rgba:g.channels.toRgba(E,R,O)})}for(let w=0;w<24;w++){const E=8+10*w;k.push({css:g.channels.toCss(E,E,E),rgba:g.channels.toRgba(E,E,E)})}return k})());let S=o.ThemeService=class extends y.Disposable{get colors(){return this._colors}constructor(k){super(),this._optionsService=k,this._contrastCache=new u.ColorContrastCache,this._halfContrastCache=new u.ColorContrastCache,this._onChangeColors=this.register(new b.EventEmitter),this.onChangeColors=this._onChangeColors.event,this._colors={foreground:c,background:f,cursor:_,cursorAccent:p,selectionForeground:void 0,selectionBackgroundTransparent:v,selectionBackgroundOpaque:g.color.blend(f,v),selectionInactiveBackgroundTransparent:v,selectionInactiveBackgroundOpaque:g.color.blend(f,v),ansi:o.DEFAULT_ANSI_COLORS.slice(),contrastCache:this._contrastCache,halfContrastCache:this._halfContrastCache},this._updateRestoreColors(),this._setTheme(this._optionsService.rawOptions.theme),this.register(this._optionsService.onSpecificOptionChange("minimumContrastRatio",()=>this._contrastCache.clear())),this.register(this._optionsService.onSpecificOptionChange("theme",()=>this._setTheme(this._optionsService.rawOptions.theme)))}_setTheme(k={}){const C=this._colors;if(C.foreground=L(k.foreground,c),C.background=L(k.background,f),C.cursor=L(k.cursor,_),C.cursorAccent=L(k.cursorAccent,p),C.selectionBackgroundTransparent=L(k.selectionBackground,v),C.selectionBackgroundOpaque=g.color.blend(C.background,C.selectionBackgroundTransparent),C.selectionInactiveBackgroundTransparent=L(k.selectionInactiveBackground,C.selectionBackgroundTransparent),C.selectionInactiveBackgroundOpaque=g.color.blend(C.background,C.selectionInactiveBackgroundTransparent),C.selectionForeground=k.selectionForeground?L(k.selectionForeground,g.NULL_COLOR):void 0,C.selectionForeground===g.NULL_COLOR&&(C.selectionForeground=void 0),g.color.isOpaque(C.selectionBackgroundTransparent)&&(C.selectionBackgroundTransparent=g.color.opacity(C.selectionBackgroundTransparent,.3)),g.color.isOpaque(C.selectionInactiveBackgroundTransparent)&&(C.selectionInactiveBackgroundTransparent=g.color.opacity(C.selectionInactiveBackgroundTransparent,.3)),C.ansi=o.DEFAULT_ANSI_COLORS.slice(),C.ansi[0]=L(k.black,o.DEFAULT_ANSI_COLORS[0]),C.ansi[1]=L(k.red,o.DEFAULT_ANSI_COLORS[1]),C.ansi[2]=L(k.green,o.DEFAULT_ANSI_COLORS[2]),C.ansi[3]=L(k.yellow,o.DEFAULT_ANSI_COLORS[3]),C.ansi[4]=L(k.blue,o.DEFAULT_ANSI_COLORS[4]),C.ansi[5]=L(k.magenta,o.DEFAULT_ANSI_COLORS[5]),C.ansi[6]=L(k.cyan,o.DEFAULT_ANSI_COLORS[6]),C.ansi[7]=L(k.white,o.DEFAULT_ANSI_COLORS[7]),C.ansi[8]=L(k.brightBlack,o.DEFAULT_ANSI_COLORS[8]),C.ansi[9]=L(k.brightRed,o.DEFAULT_ANSI_COLORS[9]),C.ansi[10]=L(k.brightGreen,o.DEFAULT_ANSI_COLORS[10]),C.ansi[11]=L(k.brightYellow,o.DEFAULT_ANSI_COLORS[11]),C.ansi[12]=L(k.brightBlue,o.DEFAULT_ANSI_COLORS[12]),C.ansi[13]=L(k.brightMagenta,o.DEFAULT_ANSI_COLORS[13]),C.ansi[14]=L(k.brightCyan,o.DEFAULT_ANSI_COLORS[14]),C.ansi[15]=L(k.brightWhite,o.DEFAULT_ANSI_COLORS[15]),k.extendedAnsi){const w=Math.min(C.ansi.length-16,k.extendedAnsi.length);for(let E=0;E<w;E++)C.ansi[E+16]=L(k.extendedAnsi[E],o.DEFAULT_ANSI_COLORS[E+16])}this._contrastCache.clear(),this._halfContrastCache.clear(),this._updateRestoreColors(),this._onChangeColors.fire(this.colors)}restoreColor(k){this._restoreColor(k),this._onChangeColors.fire(this.colors)}_restoreColor(k){if(k!==void 0)switch(k){case 256:this._colors.foreground=this._restoreColors.foreground;break;case 257:this._colors.background=this._restoreColors.background;break;case 258:this._colors.cursor=this._restoreColors.cursor;break;default:this._colors.ansi[k]=this._restoreColors.ansi[k]}else for(let C=0;C<this._restoreColors.ansi.length;++C)this._colors.ansi[C]=this._restoreColors.ansi[C]}modifyColors(k){k(this._colors),this._onChangeColors.fire(this.colors)}_updateRestoreColors(){this._restoreColors={foreground:this._colors.foreground,background:this._colors.background,cursor:this._colors.cursor,ansi:this._colors.ansi.slice()}}};function L(k,C){if(k!==void 0)try{return g.css.toColor(k)}catch{}return C}o.ThemeService=S=h([d(0,m.IOptionsService)],S)},6349:(l,o,a)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.CircularList=void 0;const h=a(8460),d=a(844);class u extends d.Disposable{constructor(b){super(),this._maxLength=b,this.onDeleteEmitter=this.register(new h.EventEmitter),this.onDelete=this.onDeleteEmitter.event,this.onInsertEmitter=this.register(new h.EventEmitter),this.onInsert=this.onInsertEmitter.event,this.onTrimEmitter=this.register(new h.EventEmitter),this.onTrim=this.onTrimEmitter.event,this._array=new Array(this._maxLength),this._startIndex=0,this._length=0}get maxLength(){return this._maxLength}set maxLength(b){if(this._maxLength===b)return;const y=new Array(b);for(let m=0;m<Math.min(b,this.length);m++)y[m]=this._array[this._getCyclicIndex(m)];this._array=y,this._maxLength=b,this._startIndex=0}get length(){return this._length}set length(b){if(b>this._length)for(let y=this._length;y<b;y++)this._array[y]=void 0;this._length=b}get(b){return this._array[this._getCyclicIndex(b)]}set(b,y){this._array[this._getCyclicIndex(b)]=y}push(b){this._array[this._getCyclicIndex(this._length)]=b,this._length===this._maxLength?(this._startIndex=++this._startIndex%this._maxLength,this.onTrimEmitter.fire(1)):this._length++}recycle(){if(this._length!==this._maxLength)throw new Error("Can only recycle when the buffer is full");return this._startIndex=++this._startIndex%this._maxLength,this.onTrimEmitter.fire(1),this._array[this._getCyclicIndex(this._length-1)]}get isFull(){return this._length===this._maxLength}pop(){return this._array[this._getCyclicIndex(this._length---1)]}splice(b,y,...m){if(y){for(let c=b;c<this._length-y;c++)this._array[this._getCyclicIndex(c)]=this._array[this._getCyclicIndex(c+y)];this._length-=y,this.onDeleteEmitter.fire({index:b,amount:y})}for(let c=this._length-1;c>=b;c--)this._array[this._getCyclicIndex(c+m.length)]=this._array[this._getCyclicIndex(c)];for(let c=0;c<m.length;c++)this._array[this._getCyclicIndex(b+c)]=m[c];if(m.length&&this.onInsertEmitter.fire({index:b,amount:m.length}),this._length+m.length>this._maxLength){const c=this._length+m.length-this._maxLength;this._startIndex+=c,this._length=this._maxLength,this.onTrimEmitter.fire(c)}else this._length+=m.length}trimStart(b){b>this._length&&(b=this._length),this._startIndex+=b,this._length-=b,this.onTrimEmitter.fire(b)}shiftElements(b,y,m){if(!(y<=0)){if(b<0||b>=this._length)throw new Error("start argument out of range");if(b+m<0)throw new Error("Cannot shift elements in list beyond index 0");if(m>0){for(let f=y-1;f>=0;f--)this.set(b+f+m,this.get(b+f));const c=b+y+m-this._length;if(c>0)for(this._length+=c;this._length>this._maxLength;)this._length--,this._startIndex++,this.onTrimEmitter.fire(1)}else for(let c=0;c<y;c++)this.set(b+c+m,this.get(b+c))}}_getCyclicIndex(b){return(this._startIndex+b)%this._maxLength}}o.CircularList=u},1439:(l,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.clone=void 0,o.clone=function a(h,d=5){if(typeof h!="object")return h;const u=Array.isArray(h)?[]:{};for(const g in h)u[g]=d<=1?h[g]:h[g]&&a(h[g],d-1);return u}},8055:(l,o,a)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.contrastRatio=o.toPaddedHex=o.rgba=o.rgb=o.css=o.color=o.channels=o.NULL_COLOR=void 0;const h=a(6114);let d=0,u=0,g=0,b=0;var y,m,c,f,_;function p(S){const L=S.toString(16);return L.length<2?"0"+L:L}function v(S,L){return S<L?(L+.05)/(S+.05):(S+.05)/(L+.05)}o.NULL_COLOR={css:"#00000000",rgba:0},function(S){S.toCss=function(L,k,C,w){return w!==void 0?`#${p(L)}${p(k)}${p(C)}${p(w)}`:`#${p(L)}${p(k)}${p(C)}`},S.toRgba=function(L,k,C,w=255){return(L<<24|k<<16|C<<8|w)>>>0}}(y||(o.channels=y={})),function(S){function L(k,C){return b=Math.round(255*C),[d,u,g]=_.toChannels(k.rgba),{css:y.toCss(d,u,g,b),rgba:y.toRgba(d,u,g,b)}}S.blend=function(k,C){if(b=(255&C.rgba)/255,b===1)return{css:C.css,rgba:C.rgba};const w=C.rgba>>24&255,E=C.rgba>>16&255,R=C.rgba>>8&255,O=k.rgba>>24&255,T=k.rgba>>16&255,x=k.rgba>>8&255;return d=O+Math.round((w-O)*b),u=T+Math.round((E-T)*b),g=x+Math.round((R-x)*b),{css:y.toCss(d,u,g),rgba:y.toRgba(d,u,g)}},S.isOpaque=function(k){return(255&k.rgba)==255},S.ensureContrastRatio=function(k,C,w){const E=_.ensureContrastRatio(k.rgba,C.rgba,w);if(E)return _.toColor(E>>24&255,E>>16&255,E>>8&255)},S.opaque=function(k){const C=(255|k.rgba)>>>0;return[d,u,g]=_.toChannels(C),{css:y.toCss(d,u,g),rgba:C}},S.opacity=L,S.multiplyOpacity=function(k,C){return b=255&k.rgba,L(k,b*C/255)},S.toColorRGB=function(k){return[k.rgba>>24&255,k.rgba>>16&255,k.rgba>>8&255]}}(m||(o.color=m={})),function(S){let L,k;if(!h.isNode){const C=document.createElement("canvas");C.width=1,C.height=1;const w=C.getContext("2d",{willReadFrequently:!0});w&&(L=w,L.globalCompositeOperation="copy",k=L.createLinearGradient(0,0,1,1))}S.toColor=function(C){if(C.match(/#[\da-f]{3,8}/i))switch(C.length){case 4:return d=parseInt(C.slice(1,2).repeat(2),16),u=parseInt(C.slice(2,3).repeat(2),16),g=parseInt(C.slice(3,4).repeat(2),16),_.toColor(d,u,g);case 5:return d=parseInt(C.slice(1,2).repeat(2),16),u=parseInt(C.slice(2,3).repeat(2),16),g=parseInt(C.slice(3,4).repeat(2),16),b=parseInt(C.slice(4,5).repeat(2),16),_.toColor(d,u,g,b);case 7:return{css:C,rgba:(parseInt(C.slice(1),16)<<8|255)>>>0};case 9:return{css:C,rgba:parseInt(C.slice(1),16)>>>0}}const w=C.match(/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(,\s*(0|1|\d?\.(\d+))\s*)?\)/);if(w)return d=parseInt(w[1]),u=parseInt(w[2]),g=parseInt(w[3]),b=Math.round(255*(w[5]===void 0?1:parseFloat(w[5]))),_.toColor(d,u,g,b);if(!L||!k)throw new Error("css.toColor: Unsupported css format");if(L.fillStyle=k,L.fillStyle=C,typeof L.fillStyle!="string")throw new Error("css.toColor: Unsupported css format");if(L.fillRect(0,0,1,1),[d,u,g,b]=L.getImageData(0,0,1,1).data,b!==255)throw new Error("css.toColor: Unsupported css format");return{rgba:y.toRgba(d,u,g,b),css:C}}}(c||(o.css=c={})),function(S){function L(k,C,w){const E=k/255,R=C/255,O=w/255;return .2126*(E<=.03928?E/12.92:Math.pow((E+.055)/1.055,2.4))+.7152*(R<=.03928?R/12.92:Math.pow((R+.055)/1.055,2.4))+.0722*(O<=.03928?O/12.92:Math.pow((O+.055)/1.055,2.4))}S.relativeLuminance=function(k){return L(k>>16&255,k>>8&255,255&k)},S.relativeLuminance2=L}(f||(o.rgb=f={})),function(S){function L(C,w,E){const R=C>>24&255,O=C>>16&255,T=C>>8&255;let x=w>>24&255,j=w>>16&255,Y=w>>8&255,Z=v(f.relativeLuminance2(x,j,Y),f.relativeLuminance2(R,O,T));for(;Z<E&&(x>0||j>0||Y>0);)x-=Math.max(0,Math.ceil(.1*x)),j-=Math.max(0,Math.ceil(.1*j)),Y-=Math.max(0,Math.ceil(.1*Y)),Z=v(f.relativeLuminance2(x,j,Y),f.relativeLuminance2(R,O,T));return(x<<24|j<<16|Y<<8|255)>>>0}function k(C,w,E){const R=C>>24&255,O=C>>16&255,T=C>>8&255;let x=w>>24&255,j=w>>16&255,Y=w>>8&255,Z=v(f.relativeLuminance2(x,j,Y),f.relativeLuminance2(R,O,T));for(;Z<E&&(x<255||j<255||Y<255);)x=Math.min(255,x+Math.ceil(.1*(255-x))),j=Math.min(255,j+Math.ceil(.1*(255-j))),Y=Math.min(255,Y+Math.ceil(.1*(255-Y))),Z=v(f.relativeLuminance2(x,j,Y),f.relativeLuminance2(R,O,T));return(x<<24|j<<16|Y<<8|255)>>>0}S.ensureContrastRatio=function(C,w,E){const R=f.relativeLuminance(C>>8),O=f.relativeLuminance(w>>8);if(v(R,O)<E){if(O<R){const j=L(C,w,E),Y=v(R,f.relativeLuminance(j>>8));if(Y<E){const Z=k(C,w,E);return Y>v(R,f.relativeLuminance(Z>>8))?j:Z}return j}const T=k(C,w,E),x=v(R,f.relativeLuminance(T>>8));if(x<E){const j=L(C,w,E);return x>v(R,f.relativeLuminance(j>>8))?T:j}return T}},S.reduceLuminance=L,S.increaseLuminance=k,S.toChannels=function(C){return[C>>24&255,C>>16&255,C>>8&255,255&C]},S.toColor=function(C,w,E,R){return{css:y.toCss(C,w,E,R),rgba:y.toRgba(C,w,E,R)}}}(_||(o.rgba=_={})),o.toPaddedHex=p,o.contrastRatio=v},8969:(l,o,a)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.CoreTerminal=void 0;const h=a(844),d=a(2585),u=a(4348),g=a(7866),b=a(744),y=a(7302),m=a(6975),c=a(8460),f=a(1753),_=a(1480),p=a(7994),v=a(9282),S=a(5435),L=a(5981),k=a(2660);let C=!1;class w extends h.Disposable{get onScroll(){return this._onScrollApi||(this._onScrollApi=this.register(new c.EventEmitter),this._onScroll.event(R=>{var O;(O=this._onScrollApi)===null||O===void 0||O.fire(R.position)})),this._onScrollApi.event}get cols(){return this._bufferService.cols}get rows(){return this._bufferService.rows}get buffers(){return this._bufferService.buffers}get options(){return this.optionsService.options}set options(R){for(const O in R)this.optionsService.options[O]=R[O]}constructor(R){super(),this._windowsWrappingHeuristics=this.register(new h.MutableDisposable),this._onBinary=this.register(new c.EventEmitter),this.onBinary=this._onBinary.event,this._onData=this.register(new c.EventEmitter),this.onData=this._onData.event,this._onLineFeed=this.register(new c.EventEmitter),this.onLineFeed=this._onLineFeed.event,this._onResize=this.register(new c.EventEmitter),this.onResize=this._onResize.event,this._onWriteParsed=this.register(new c.EventEmitter),this.onWriteParsed=this._onWriteParsed.event,this._onScroll=this.register(new c.EventEmitter),this._instantiationService=new u.InstantiationService,this.optionsService=this.register(new y.OptionsService(R)),this._instantiationService.setService(d.IOptionsService,this.optionsService),this._bufferService=this.register(this._instantiationService.createInstance(b.BufferService)),this._instantiationService.setService(d.IBufferService,this._bufferService),this._logService=this.register(this._instantiationService.createInstance(g.LogService)),this._instantiationService.setService(d.ILogService,this._logService),this.coreService=this.register(this._instantiationService.createInstance(m.CoreService)),this._instantiationService.setService(d.ICoreService,this.coreService),this.coreMouseService=this.register(this._instantiationService.createInstance(f.CoreMouseService)),this._instantiationService.setService(d.ICoreMouseService,this.coreMouseService),this.unicodeService=this.register(this._instantiationService.createInstance(_.UnicodeService)),this._instantiationService.setService(d.IUnicodeService,this.unicodeService),this._charsetService=this._instantiationService.createInstance(p.CharsetService),this._instantiationService.setService(d.ICharsetService,this._charsetService),this._oscLinkService=this._instantiationService.createInstance(k.OscLinkService),this._instantiationService.setService(d.IOscLinkService,this._oscLinkService),this._inputHandler=this.register(new S.InputHandler(this._bufferService,this._charsetService,this.coreService,this._logService,this.optionsService,this._oscLinkService,this.coreMouseService,this.unicodeService)),this.register((0,c.forwardEvent)(this._inputHandler.onLineFeed,this._onLineFeed)),this.register(this._inputHandler),this.register((0,c.forwardEvent)(this._bufferService.onResize,this._onResize)),this.register((0,c.forwardEvent)(this.coreService.onData,this._onData)),this.register((0,c.forwardEvent)(this.coreService.onBinary,this._onBinary)),this.register(this.coreService.onRequestScrollToBottom(()=>this.scrollToBottom())),this.register(this.coreService.onUserInput(()=>this._writeBuffer.handleUserInput())),this.register(this.optionsService.onMultipleOptionChange(["windowsMode","windowsPty"],()=>this._handleWindowsPtyOptionChange())),this.register(this._bufferService.onScroll(O=>{this._onScroll.fire({position:this._bufferService.buffer.ydisp,source:0}),this._inputHandler.markRangeDirty(this._bufferService.buffer.scrollTop,this._bufferService.buffer.scrollBottom)})),this.register(this._inputHandler.onScroll(O=>{this._onScroll.fire({position:this._bufferService.buffer.ydisp,source:0}),this._inputHandler.markRangeDirty(this._bufferService.buffer.scrollTop,this._bufferService.buffer.scrollBottom)})),this._writeBuffer=this.register(new L.WriteBuffer((O,T)=>this._inputHandler.parse(O,T))),this.register((0,c.forwardEvent)(this._writeBuffer.onWriteParsed,this._onWriteParsed))}write(R,O){this._writeBuffer.write(R,O)}writeSync(R,O){this._logService.logLevel<=d.LogLevelEnum.WARN&&!C&&(this._logService.warn("writeSync is unreliable and will be removed soon."),C=!0),this._writeBuffer.writeSync(R,O)}resize(R,O){isNaN(R)||isNaN(O)||(R=Math.max(R,b.MINIMUM_COLS),O=Math.max(O,b.MINIMUM_ROWS),this._bufferService.resize(R,O))}scroll(R,O=!1){this._bufferService.scroll(R,O)}scrollLines(R,O,T){this._bufferService.scrollLines(R,O,T)}scrollPages(R){this.scrollLines(R*(this.rows-1))}scrollToTop(){this.scrollLines(-this._bufferService.buffer.ydisp)}scrollToBottom(){this.scrollLines(this._bufferService.buffer.ybase-this._bufferService.buffer.ydisp)}scrollToLine(R){const O=R-this._bufferService.buffer.ydisp;O!==0&&this.scrollLines(O)}registerEscHandler(R,O){return this._inputHandler.registerEscHandler(R,O)}registerDcsHandler(R,O){return this._inputHandler.registerDcsHandler(R,O)}registerCsiHandler(R,O){return this._inputHandler.registerCsiHandler(R,O)}registerOscHandler(R,O){return this._inputHandler.registerOscHandler(R,O)}_setup(){this._handleWindowsPtyOptionChange()}reset(){this._inputHandler.reset(),this._bufferService.reset(),this._charsetService.reset(),this.coreService.reset(),this.coreMouseService.reset()}_handleWindowsPtyOptionChange(){let R=!1;const O=this.optionsService.rawOptions.windowsPty;O&&O.buildNumber!==void 0&&O.buildNumber!==void 0?R=O.backend==="conpty"&&O.buildNumber<21376:this.optionsService.rawOptions.windowsMode&&(R=!0),R?this._enableWindowsWrappingHeuristics():this._windowsWrappingHeuristics.clear()}_enableWindowsWrappingHeuristics(){if(!this._windowsWrappingHeuristics.value){const R=[];R.push(this.onLineFeed(v.updateWindowsModeWrappedState.bind(null,this._bufferService))),R.push(this.registerCsiHandler({final:"H"},()=>((0,v.updateWindowsModeWrappedState)(this._bufferService),!1))),this._windowsWrappingHeuristics.value=(0,h.toDisposable)(()=>{for(const O of R)O.dispose()})}}}o.CoreTerminal=w},8460:(l,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.forwardEvent=o.EventEmitter=void 0,o.EventEmitter=class{constructor(){this._listeners=[],this._disposed=!1}get event(){return this._event||(this._event=a=>(this._listeners.push(a),{dispose:()=>{if(!this._disposed){for(let h=0;h<this._listeners.length;h++)if(this._listeners[h]===a)return void this._listeners.splice(h,1)}}})),this._event}fire(a,h){const d=[];for(let u=0;u<this._listeners.length;u++)d.push(this._listeners[u]);for(let u=0;u<d.length;u++)d[u].call(void 0,a,h)}dispose(){this.clearListeners(),this._disposed=!0}clearListeners(){this._listeners&&(this._listeners.length=0)}},o.forwardEvent=function(a,h){return a(d=>h.fire(d))}},5435:function(l,o,a){var h=this&&this.__decorate||function(Z,D,B,A){var H,I=arguments.length,ee=I<3?D:A===null?A=Object.getOwnPropertyDescriptor(D,B):A;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")ee=Reflect.decorate(Z,D,B,A);else for(var le=Z.length-1;le>=0;le--)(H=Z[le])&&(ee=(I<3?H(ee):I>3?H(D,B,ee):H(D,B))||ee);return I>3&&ee&&Object.defineProperty(D,B,ee),ee},d=this&&this.__param||function(Z,D){return function(B,A){D(B,A,Z)}};Object.defineProperty(o,"__esModule",{value:!0}),o.InputHandler=o.WindowsOptionsReportType=void 0;const u=a(2584),g=a(7116),b=a(2015),y=a(844),m=a(482),c=a(8437),f=a(8460),_=a(643),p=a(511),v=a(3734),S=a(2585),L=a(6242),k=a(6351),C=a(5941),w={"(":0,")":1,"*":2,"+":3,"-":1,".":2},E=131072;function R(Z,D){if(Z>24)return D.setWinLines||!1;switch(Z){case 1:return!!D.restoreWin;case 2:return!!D.minimizeWin;case 3:return!!D.setWinPosition;case 4:return!!D.setWinSizePixels;case 5:return!!D.raiseWin;case 6:return!!D.lowerWin;case 7:return!!D.refreshWin;case 8:return!!D.setWinSizeChars;case 9:return!!D.maximizeWin;case 10:return!!D.fullscreenWin;case 11:return!!D.getWinState;case 13:return!!D.getWinPosition;case 14:return!!D.getWinSizePixels;case 15:return!!D.getScreenSizePixels;case 16:return!!D.getCellSizePixels;case 18:return!!D.getWinSizeChars;case 19:return!!D.getScreenSizeChars;case 20:return!!D.getIconTitle;case 21:return!!D.getWinTitle;case 22:return!!D.pushTitle;case 23:return!!D.popTitle;case 24:return!!D.setWinLines}return!1}var O;(function(Z){Z[Z.GET_WIN_SIZE_PIXELS=0]="GET_WIN_SIZE_PIXELS",Z[Z.GET_CELL_SIZE_PIXELS=1]="GET_CELL_SIZE_PIXELS"})(O||(o.WindowsOptionsReportType=O={}));let T=0;class x extends y.Disposable{getAttrData(){return this._curAttrData}constructor(D,B,A,H,I,ee,le,ae,be=new b.EscapeSequenceParser){super(),this._bufferService=D,this._charsetService=B,this._coreService=A,this._logService=H,this._optionsService=I,this._oscLinkService=ee,this._coreMouseService=le,this._unicodeService=ae,this._parser=be,this._parseBuffer=new Uint32Array(4096),this._stringDecoder=new m.StringToUtf32,this._utf8Decoder=new m.Utf8ToUtf32,this._workCell=new p.CellData,this._windowTitle="",this._iconName="",this._windowTitleStack=[],this._iconNameStack=[],this._curAttrData=c.DEFAULT_ATTR_DATA.clone(),this._eraseAttrDataInternal=c.DEFAULT_ATTR_DATA.clone(),this._onRequestBell=this.register(new f.EventEmitter),this.onRequestBell=this._onRequestBell.event,this._onRequestRefreshRows=this.register(new f.EventEmitter),this.onRequestRefreshRows=this._onRequestRefreshRows.event,this._onRequestReset=this.register(new f.EventEmitter),this.onRequestReset=this._onRequestReset.event,this._onRequestSendFocus=this.register(new f.EventEmitter),this.onRequestSendFocus=this._onRequestSendFocus.event,this._onRequestSyncScrollBar=this.register(new f.EventEmitter),this.onRequestSyncScrollBar=this._onRequestSyncScrollBar.event,this._onRequestWindowsOptionsReport=this.register(new f.EventEmitter),this.onRequestWindowsOptionsReport=this._onRequestWindowsOptionsReport.event,this._onA11yChar=this.register(new f.EventEmitter),this.onA11yChar=this._onA11yChar.event,this._onA11yTab=this.register(new f.EventEmitter),this.onA11yTab=this._onA11yTab.event,this._onCursorMove=this.register(new f.EventEmitter),this.onCursorMove=this._onCursorMove.event,this._onLineFeed=this.register(new f.EventEmitter),this.onLineFeed=this._onLineFeed.event,this._onScroll=this.register(new f.EventEmitter),this.onScroll=this._onScroll.event,this._onTitleChange=this.register(new f.EventEmitter),this.onTitleChange=this._onTitleChange.event,this._onColor=this.register(new f.EventEmitter),this.onColor=this._onColor.event,this._parseStack={paused:!1,cursorStartX:0,cursorStartY:0,decodedLength:0,position:0},this._specialColors=[256,257,258],this.register(this._parser),this._dirtyRowTracker=new j(this._bufferService),this._activeBuffer=this._bufferService.buffer,this.register(this._bufferService.buffers.onBufferActivate(M=>this._activeBuffer=M.activeBuffer)),this._parser.setCsiHandlerFallback((M,N)=>{this._logService.debug("Unknown CSI code: ",{identifier:this._parser.identToString(M),params:N.toArray()})}),this._parser.setEscHandlerFallback(M=>{this._logService.debug("Unknown ESC code: ",{identifier:this._parser.identToString(M)})}),this._parser.setExecuteHandlerFallback(M=>{this._logService.debug("Unknown EXECUTE code: ",{code:M})}),this._parser.setOscHandlerFallback((M,N,K)=>{this._logService.debug("Unknown OSC code: ",{identifier:M,action:N,data:K})}),this._parser.setDcsHandlerFallback((M,N,K)=>{N==="HOOK"&&(K=K.toArray()),this._logService.debug("Unknown DCS code: ",{identifier:this._parser.identToString(M),action:N,payload:K})}),this._parser.setPrintHandler((M,N,K)=>this.print(M,N,K)),this._parser.registerCsiHandler({final:"@"},M=>this.insertChars(M)),this._parser.registerCsiHandler({intermediates:" ",final:"@"},M=>this.scrollLeft(M)),this._parser.registerCsiHandler({final:"A"},M=>this.cursorUp(M)),this._parser.registerCsiHandler({intermediates:" ",final:"A"},M=>this.scrollRight(M)),this._parser.registerCsiHandler({final:"B"},M=>this.cursorDown(M)),this._parser.registerCsiHandler({final:"C"},M=>this.cursorForward(M)),this._parser.registerCsiHandler({final:"D"},M=>this.cursorBackward(M)),this._parser.registerCsiHandler({final:"E"},M=>this.cursorNextLine(M)),this._parser.registerCsiHandler({final:"F"},M=>this.cursorPrecedingLine(M)),this._parser.registerCsiHandler({final:"G"},M=>this.cursorCharAbsolute(M)),this._parser.registerCsiHandler({final:"H"},M=>this.cursorPosition(M)),this._parser.registerCsiHandler({final:"I"},M=>this.cursorForwardTab(M)),this._parser.registerCsiHandler({final:"J"},M=>this.eraseInDisplay(M,!1)),this._parser.registerCsiHandler({prefix:"?",final:"J"},M=>this.eraseInDisplay(M,!0)),this._parser.registerCsiHandler({final:"K"},M=>this.eraseInLine(M,!1)),this._parser.registerCsiHandler({prefix:"?",final:"K"},M=>this.eraseInLine(M,!0)),this._parser.registerCsiHandler({final:"L"},M=>this.insertLines(M)),this._parser.registerCsiHandler({final:"M"},M=>this.deleteLines(M)),this._parser.registerCsiHandler({final:"P"},M=>this.deleteChars(M)),this._parser.registerCsiHandler({final:"S"},M=>this.scrollUp(M)),this._parser.registerCsiHandler({final:"T"},M=>this.scrollDown(M)),this._parser.registerCsiHandler({final:"X"},M=>this.eraseChars(M)),this._parser.registerCsiHandler({final:"Z"},M=>this.cursorBackwardTab(M)),this._parser.registerCsiHandler({final:"`"},M=>this.charPosAbsolute(M)),this._parser.registerCsiHandler({final:"a"},M=>this.hPositionRelative(M)),this._parser.registerCsiHandler({final:"b"},M=>this.repeatPrecedingCharacter(M)),this._parser.registerCsiHandler({final:"c"},M=>this.sendDeviceAttributesPrimary(M)),this._parser.registerCsiHandler({prefix:">",final:"c"},M=>this.sendDeviceAttributesSecondary(M)),this._parser.registerCsiHandler({final:"d"},M=>this.linePosAbsolute(M)),this._parser.registerCsiHandler({final:"e"},M=>this.vPositionRelative(M)),this._parser.registerCsiHandler({final:"f"},M=>this.hVPosition(M)),this._parser.registerCsiHandler({final:"g"},M=>this.tabClear(M)),this._parser.registerCsiHandler({final:"h"},M=>this.setMode(M)),this._parser.registerCsiHandler({prefix:"?",final:"h"},M=>this.setModePrivate(M)),this._parser.registerCsiHandler({final:"l"},M=>this.resetMode(M)),this._parser.registerCsiHandler({prefix:"?",final:"l"},M=>this.resetModePrivate(M)),this._parser.registerCsiHandler({final:"m"},M=>this.charAttributes(M)),this._parser.registerCsiHandler({final:"n"},M=>this.deviceStatus(M)),this._parser.registerCsiHandler({prefix:"?",final:"n"},M=>this.deviceStatusPrivate(M)),this._parser.registerCsiHandler({intermediates:"!",final:"p"},M=>this.softReset(M)),this._parser.registerCsiHandler({intermediates:" ",final:"q"},M=>this.setCursorStyle(M)),this._parser.registerCsiHandler({final:"r"},M=>this.setScrollRegion(M)),this._parser.registerCsiHandler({final:"s"},M=>this.saveCursor(M)),this._parser.registerCsiHandler({final:"t"},M=>this.windowOptions(M)),this._parser.registerCsiHandler({final:"u"},M=>this.restoreCursor(M)),this._parser.registerCsiHandler({intermediates:"'",final:"}"},M=>this.insertColumns(M)),this._parser.registerCsiHandler({intermediates:"'",final:"~"},M=>this.deleteColumns(M)),this._parser.registerCsiHandler({intermediates:'"',final:"q"},M=>this.selectProtected(M)),this._parser.registerCsiHandler({intermediates:"$",final:"p"},M=>this.requestMode(M,!0)),this._parser.registerCsiHandler({prefix:"?",intermediates:"$",final:"p"},M=>this.requestMode(M,!1)),this._parser.setExecuteHandler(u.C0.BEL,()=>this.bell()),this._parser.setExecuteHandler(u.C0.LF,()=>this.lineFeed()),this._parser.setExecuteHandler(u.C0.VT,()=>this.lineFeed()),this._parser.setExecuteHandler(u.C0.FF,()=>this.lineFeed()),this._parser.setExecuteHandler(u.C0.CR,()=>this.carriageReturn()),this._parser.setExecuteHandler(u.C0.BS,()=>this.backspace()),this._parser.setExecuteHandler(u.C0.HT,()=>this.tab()),this._parser.setExecuteHandler(u.C0.SO,()=>this.shiftOut()),this._parser.setExecuteHandler(u.C0.SI,()=>this.shiftIn()),this._parser.setExecuteHandler(u.C1.IND,()=>this.index()),this._parser.setExecuteHandler(u.C1.NEL,()=>this.nextLine()),this._parser.setExecuteHandler(u.C1.HTS,()=>this.tabSet()),this._parser.registerOscHandler(0,new L.OscHandler(M=>(this.setTitle(M),this.setIconName(M),!0))),this._parser.registerOscHandler(1,new L.OscHandler(M=>this.setIconName(M))),this._parser.registerOscHandler(2,new L.OscHandler(M=>this.setTitle(M))),this._parser.registerOscHandler(4,new L.OscHandler(M=>this.setOrReportIndexedColor(M))),this._parser.registerOscHandler(8,new L.OscHandler(M=>this.setHyperlink(M))),this._parser.registerOscHandler(10,new L.OscHandler(M=>this.setOrReportFgColor(M))),this._parser.registerOscHandler(11,new L.OscHandler(M=>this.setOrReportBgColor(M))),this._parser.registerOscHandler(12,new L.OscHandler(M=>this.setOrReportCursorColor(M))),this._parser.registerOscHandler(104,new L.OscHandler(M=>this.restoreIndexedColor(M))),this._parser.registerOscHandler(110,new L.OscHandler(M=>this.restoreFgColor(M))),this._parser.registerOscHandler(111,new L.OscHandler(M=>this.restoreBgColor(M))),this._parser.registerOscHandler(112,new L.OscHandler(M=>this.restoreCursorColor(M))),this._parser.registerEscHandler({final:"7"},()=>this.saveCursor()),this._parser.registerEscHandler({final:"8"},()=>this.restoreCursor()),this._parser.registerEscHandler({final:"D"},()=>this.index()),this._parser.registerEscHandler({final:"E"},()=>this.nextLine()),this._parser.registerEscHandler({final:"H"},()=>this.tabSet()),this._parser.registerEscHandler({final:"M"},()=>this.reverseIndex()),this._parser.registerEscHandler({final:"="},()=>this.keypadApplicationMode()),this._parser.registerEscHandler({final:">"},()=>this.keypadNumericMode()),this._parser.registerEscHandler({final:"c"},()=>this.fullReset()),this._parser.registerEscHandler({final:"n"},()=>this.setgLevel(2)),this._parser.registerEscHandler({final:"o"},()=>this.setgLevel(3)),this._parser.registerEscHandler({final:"|"},()=>this.setgLevel(3)),this._parser.registerEscHandler({final:"}"},()=>this.setgLevel(2)),this._parser.registerEscHandler({final:"~"},()=>this.setgLevel(1)),this._parser.registerEscHandler({intermediates:"%",final:"@"},()=>this.selectDefaultCharset()),this._parser.registerEscHandler({intermediates:"%",final:"G"},()=>this.selectDefaultCharset());for(const M in g.CHARSETS)this._parser.registerEscHandler({intermediates:"(",final:M},()=>this.selectCharset("("+M)),this._parser.registerEscHandler({intermediates:")",final:M},()=>this.selectCharset(")"+M)),this._parser.registerEscHandler({intermediates:"*",final:M},()=>this.selectCharset("*"+M)),this._parser.registerEscHandler({intermediates:"+",final:M},()=>this.selectCharset("+"+M)),this._parser.registerEscHandler({intermediates:"-",final:M},()=>this.selectCharset("-"+M)),this._parser.registerEscHandler({intermediates:".",final:M},()=>this.selectCharset("."+M)),this._parser.registerEscHandler({intermediates:"/",final:M},()=>this.selectCharset("/"+M));this._parser.registerEscHandler({intermediates:"#",final:"8"},()=>this.screenAlignmentPattern()),this._parser.setErrorHandler(M=>(this._logService.error("Parsing error: ",M),M)),this._parser.registerDcsHandler({intermediates:"$",final:"q"},new k.DcsHandler((M,N)=>this.requestStatusString(M,N)))}_preserveStack(D,B,A,H){this._parseStack.paused=!0,this._parseStack.cursorStartX=D,this._parseStack.cursorStartY=B,this._parseStack.decodedLength=A,this._parseStack.position=H}_logSlowResolvingAsync(D){this._logService.logLevel<=S.LogLevelEnum.WARN&&Promise.race([D,new Promise((B,A)=>setTimeout(()=>A("#SLOW_TIMEOUT"),5e3))]).catch(B=>{if(B!=="#SLOW_TIMEOUT")throw B;console.warn("async parser handler taking longer than 5000 ms")})}_getCurrentLinkId(){return this._curAttrData.extended.urlId}parse(D,B){let A,H=this._activeBuffer.x,I=this._activeBuffer.y,ee=0;const le=this._parseStack.paused;if(le){if(A=this._parser.parse(this._parseBuffer,this._parseStack.decodedLength,B))return this._logSlowResolvingAsync(A),A;H=this._parseStack.cursorStartX,I=this._parseStack.cursorStartY,this._parseStack.paused=!1,D.length>E&&(ee=this._parseStack.position+E)}if(this._logService.logLevel<=S.LogLevelEnum.DEBUG&&this._logService.debug("parsing data"+(typeof D=="string"?` "${D}"`:` "${Array.prototype.map.call(D,ae=>String.fromCharCode(ae)).join("")}"`),typeof D=="string"?D.split("").map(ae=>ae.charCodeAt(0)):D),this._parseBuffer.length<D.length&&this._parseBuffer.length<E&&(this._parseBuffer=new Uint32Array(Math.min(D.length,E))),le||this._dirtyRowTracker.clearRange(),D.length>E)for(let ae=ee;ae<D.length;ae+=E){const be=ae+E<D.length?ae+E:D.length,M=typeof D=="string"?this._stringDecoder.decode(D.substring(ae,be),this._parseBuffer):this._utf8Decoder.decode(D.subarray(ae,be),this._parseBuffer);if(A=this._parser.parse(this._parseBuffer,M))return this._preserveStack(H,I,M,ae),this._logSlowResolvingAsync(A),A}else if(!le){const ae=typeof D=="string"?this._stringDecoder.decode(D,this._parseBuffer):this._utf8Decoder.decode(D,this._parseBuffer);if(A=this._parser.parse(this._parseBuffer,ae))return this._preserveStack(H,I,ae,0),this._logSlowResolvingAsync(A),A}this._activeBuffer.x===H&&this._activeBuffer.y===I||this._onCursorMove.fire(),this._onRequestRefreshRows.fire(this._dirtyRowTracker.start,this._dirtyRowTracker.end)}print(D,B,A){let H,I;const ee=this._charsetService.charset,le=this._optionsService.rawOptions.screenReaderMode,ae=this._bufferService.cols,be=this._coreService.decPrivateModes.wraparound,M=this._coreService.modes.insertMode,N=this._curAttrData;let K=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._activeBuffer.x&&A-B>0&&K.getWidth(this._activeBuffer.x-1)===2&&K.setCellFromCodePoint(this._activeBuffer.x-1,0,1,N.fg,N.bg,N.extended);for(let z=B;z<A;++z){if(H=D[z],I=this._unicodeService.wcwidth(H),H<127&&ee){const _e=ee[String.fromCharCode(H)];_e&&(H=_e.charCodeAt(0))}if(le&&this._onA11yChar.fire((0,m.stringFromCodePoint)(H)),this._getCurrentLinkId()&&this._oscLinkService.addLineToLink(this._getCurrentLinkId(),this._activeBuffer.ybase+this._activeBuffer.y),I||!this._activeBuffer.x){if(this._activeBuffer.x+I-1>=ae){if(be){for(;this._activeBuffer.x<ae;)K.setCellFromCodePoint(this._activeBuffer.x++,0,1,N.fg,N.bg,N.extended);this._activeBuffer.x=0,this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData(),!0)):(this._activeBuffer.y>=this._bufferService.rows&&(this._activeBuffer.y=this._bufferService.rows-1),this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!0),K=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y)}else if(this._activeBuffer.x=ae-1,I===2)continue}if(M&&(K.insertCells(this._activeBuffer.x,I,this._activeBuffer.getNullCell(N),N),K.getWidth(ae-1)===2&&K.setCellFromCodePoint(ae-1,_.NULL_CELL_CODE,_.NULL_CELL_WIDTH,N.fg,N.bg,N.extended)),K.setCellFromCodePoint(this._activeBuffer.x++,H,I,N.fg,N.bg,N.extended),I>0)for(;--I;)K.setCellFromCodePoint(this._activeBuffer.x++,0,0,N.fg,N.bg,N.extended)}else K.getWidth(this._activeBuffer.x-1)?K.addCodepointToCell(this._activeBuffer.x-1,H):K.addCodepointToCell(this._activeBuffer.x-2,H)}A-B>0&&(K.loadCell(this._activeBuffer.x-1,this._workCell),this._workCell.getWidth()===2||this._workCell.getCode()>65535?this._parser.precedingCodepoint=0:this._workCell.isCombined()?this._parser.precedingCodepoint=this._workCell.getChars().charCodeAt(0):this._parser.precedingCodepoint=this._workCell.content),this._activeBuffer.x<ae&&A-B>0&&K.getWidth(this._activeBuffer.x)===0&&!K.hasContent(this._activeBuffer.x)&&K.setCellFromCodePoint(this._activeBuffer.x,0,1,N.fg,N.bg,N.extended),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}registerCsiHandler(D,B){return D.final!=="t"||D.prefix||D.intermediates?this._parser.registerCsiHandler(D,B):this._parser.registerCsiHandler(D,A=>!R(A.params[0],this._optionsService.rawOptions.windowOptions)||B(A))}registerDcsHandler(D,B){return this._parser.registerDcsHandler(D,new k.DcsHandler(B))}registerEscHandler(D,B){return this._parser.registerEscHandler(D,B)}registerOscHandler(D,B){return this._parser.registerOscHandler(D,new L.OscHandler(B))}bell(){return this._onRequestBell.fire(),!0}lineFeed(){return this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._optionsService.rawOptions.convertEol&&(this._activeBuffer.x=0),this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData())):this._activeBuffer.y>=this._bufferService.rows?this._activeBuffer.y=this._bufferService.rows-1:this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!1,this._activeBuffer.x>=this._bufferService.cols&&this._activeBuffer.x--,this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._onLineFeed.fire(),!0}carriageReturn(){return this._activeBuffer.x=0,!0}backspace(){var D;if(!this._coreService.decPrivateModes.reverseWraparound)return this._restrictCursor(),this._activeBuffer.x>0&&this._activeBuffer.x--,!0;if(this._restrictCursor(this._bufferService.cols),this._activeBuffer.x>0)this._activeBuffer.x--;else if(this._activeBuffer.x===0&&this._activeBuffer.y>this._activeBuffer.scrollTop&&this._activeBuffer.y<=this._activeBuffer.scrollBottom&&(!((D=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y))===null||D===void 0)&&D.isWrapped)){this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!1,this._activeBuffer.y--,this._activeBuffer.x=this._bufferService.cols-1;const B=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);B.hasWidth(this._activeBuffer.x)&&!B.hasContent(this._activeBuffer.x)&&this._activeBuffer.x--}return this._restrictCursor(),!0}tab(){if(this._activeBuffer.x>=this._bufferService.cols)return!0;const D=this._activeBuffer.x;return this._activeBuffer.x=this._activeBuffer.nextStop(),this._optionsService.rawOptions.screenReaderMode&&this._onA11yTab.fire(this._activeBuffer.x-D),!0}shiftOut(){return this._charsetService.setgLevel(1),!0}shiftIn(){return this._charsetService.setgLevel(0),!0}_restrictCursor(D=this._bufferService.cols-1){this._activeBuffer.x=Math.min(D,Math.max(0,this._activeBuffer.x)),this._activeBuffer.y=this._coreService.decPrivateModes.origin?Math.min(this._activeBuffer.scrollBottom,Math.max(this._activeBuffer.scrollTop,this._activeBuffer.y)):Math.min(this._bufferService.rows-1,Math.max(0,this._activeBuffer.y)),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}_setCursor(D,B){this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._coreService.decPrivateModes.origin?(this._activeBuffer.x=D,this._activeBuffer.y=this._activeBuffer.scrollTop+B):(this._activeBuffer.x=D,this._activeBuffer.y=B),this._restrictCursor(),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}_moveCursor(D,B){this._restrictCursor(),this._setCursor(this._activeBuffer.x+D,this._activeBuffer.y+B)}cursorUp(D){const B=this._activeBuffer.y-this._activeBuffer.scrollTop;return B>=0?this._moveCursor(0,-Math.min(B,D.params[0]||1)):this._moveCursor(0,-(D.params[0]||1)),!0}cursorDown(D){const B=this._activeBuffer.scrollBottom-this._activeBuffer.y;return B>=0?this._moveCursor(0,Math.min(B,D.params[0]||1)):this._moveCursor(0,D.params[0]||1),!0}cursorForward(D){return this._moveCursor(D.params[0]||1,0),!0}cursorBackward(D){return this._moveCursor(-(D.params[0]||1),0),!0}cursorNextLine(D){return this.cursorDown(D),this._activeBuffer.x=0,!0}cursorPrecedingLine(D){return this.cursorUp(D),this._activeBuffer.x=0,!0}cursorCharAbsolute(D){return this._setCursor((D.params[0]||1)-1,this._activeBuffer.y),!0}cursorPosition(D){return this._setCursor(D.length>=2?(D.params[1]||1)-1:0,(D.params[0]||1)-1),!0}charPosAbsolute(D){return this._setCursor((D.params[0]||1)-1,this._activeBuffer.y),!0}hPositionRelative(D){return this._moveCursor(D.params[0]||1,0),!0}linePosAbsolute(D){return this._setCursor(this._activeBuffer.x,(D.params[0]||1)-1),!0}vPositionRelative(D){return this._moveCursor(0,D.params[0]||1),!0}hVPosition(D){return this.cursorPosition(D),!0}tabClear(D){const B=D.params[0];return B===0?delete this._activeBuffer.tabs[this._activeBuffer.x]:B===3&&(this._activeBuffer.tabs={}),!0}cursorForwardTab(D){if(this._activeBuffer.x>=this._bufferService.cols)return!0;let B=D.params[0]||1;for(;B--;)this._activeBuffer.x=this._activeBuffer.nextStop();return!0}cursorBackwardTab(D){if(this._activeBuffer.x>=this._bufferService.cols)return!0;let B=D.params[0]||1;for(;B--;)this._activeBuffer.x=this._activeBuffer.prevStop();return!0}selectProtected(D){const B=D.params[0];return B===1&&(this._curAttrData.bg|=536870912),B!==2&&B!==0||(this._curAttrData.bg&=-536870913),!0}_eraseInBufferLine(D,B,A,H=!1,I=!1){const ee=this._activeBuffer.lines.get(this._activeBuffer.ybase+D);ee.replaceCells(B,A,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData(),I),H&&(ee.isWrapped=!1)}_resetBufferLine(D,B=!1){const A=this._activeBuffer.lines.get(this._activeBuffer.ybase+D);A&&(A.fill(this._activeBuffer.getNullCell(this._eraseAttrData()),B),this._bufferService.buffer.clearMarkers(this._activeBuffer.ybase+D),A.isWrapped=!1)}eraseInDisplay(D,B=!1){let A;switch(this._restrictCursor(this._bufferService.cols),D.params[0]){case 0:for(A=this._activeBuffer.y,this._dirtyRowTracker.markDirty(A),this._eraseInBufferLine(A++,this._activeBuffer.x,this._bufferService.cols,this._activeBuffer.x===0,B);A<this._bufferService.rows;A++)this._resetBufferLine(A,B);this._dirtyRowTracker.markDirty(A);break;case 1:for(A=this._activeBuffer.y,this._dirtyRowTracker.markDirty(A),this._eraseInBufferLine(A,0,this._activeBuffer.x+1,!0,B),this._activeBuffer.x+1>=this._bufferService.cols&&(this._activeBuffer.lines.get(A+1).isWrapped=!1);A--;)this._resetBufferLine(A,B);this._dirtyRowTracker.markDirty(0);break;case 2:for(A=this._bufferService.rows,this._dirtyRowTracker.markDirty(A-1);A--;)this._resetBufferLine(A,B);this._dirtyRowTracker.markDirty(0);break;case 3:const H=this._activeBuffer.lines.length-this._bufferService.rows;H>0&&(this._activeBuffer.lines.trimStart(H),this._activeBuffer.ybase=Math.max(this._activeBuffer.ybase-H,0),this._activeBuffer.ydisp=Math.max(this._activeBuffer.ydisp-H,0),this._onScroll.fire(0))}return!0}eraseInLine(D,B=!1){switch(this._restrictCursor(this._bufferService.cols),D.params[0]){case 0:this._eraseInBufferLine(this._activeBuffer.y,this._activeBuffer.x,this._bufferService.cols,this._activeBuffer.x===0,B);break;case 1:this._eraseInBufferLine(this._activeBuffer.y,0,this._activeBuffer.x+1,!1,B);break;case 2:this._eraseInBufferLine(this._activeBuffer.y,0,this._bufferService.cols,!0,B)}return this._dirtyRowTracker.markDirty(this._activeBuffer.y),!0}insertLines(D){this._restrictCursor();let B=D.params[0]||1;if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const A=this._activeBuffer.ybase+this._activeBuffer.y,H=this._bufferService.rows-1-this._activeBuffer.scrollBottom,I=this._bufferService.rows-1+this._activeBuffer.ybase-H+1;for(;B--;)this._activeBuffer.lines.splice(I-1,1),this._activeBuffer.lines.splice(A,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.y,this._activeBuffer.scrollBottom),this._activeBuffer.x=0,!0}deleteLines(D){this._restrictCursor();let B=D.params[0]||1;if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const A=this._activeBuffer.ybase+this._activeBuffer.y;let H;for(H=this._bufferService.rows-1-this._activeBuffer.scrollBottom,H=this._bufferService.rows-1+this._activeBuffer.ybase-H;B--;)this._activeBuffer.lines.splice(A,1),this._activeBuffer.lines.splice(H,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.y,this._activeBuffer.scrollBottom),this._activeBuffer.x=0,!0}insertChars(D){this._restrictCursor();const B=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return B&&(B.insertCells(this._activeBuffer.x,D.params[0]||1,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}deleteChars(D){this._restrictCursor();const B=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return B&&(B.deleteCells(this._activeBuffer.x,D.params[0]||1,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}scrollUp(D){let B=D.params[0]||1;for(;B--;)this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollTop,1),this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollBottom,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollDown(D){let B=D.params[0]||1;for(;B--;)this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollBottom,1),this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollTop,0,this._activeBuffer.getBlankLine(c.DEFAULT_ATTR_DATA));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollLeft(D){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const B=D.params[0]||1;for(let A=this._activeBuffer.scrollTop;A<=this._activeBuffer.scrollBottom;++A){const H=this._activeBuffer.lines.get(this._activeBuffer.ybase+A);H.deleteCells(0,B,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),H.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollRight(D){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const B=D.params[0]||1;for(let A=this._activeBuffer.scrollTop;A<=this._activeBuffer.scrollBottom;++A){const H=this._activeBuffer.lines.get(this._activeBuffer.ybase+A);H.insertCells(0,B,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),H.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}insertColumns(D){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const B=D.params[0]||1;for(let A=this._activeBuffer.scrollTop;A<=this._activeBuffer.scrollBottom;++A){const H=this._activeBuffer.lines.get(this._activeBuffer.ybase+A);H.insertCells(this._activeBuffer.x,B,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),H.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}deleteColumns(D){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const B=D.params[0]||1;for(let A=this._activeBuffer.scrollTop;A<=this._activeBuffer.scrollBottom;++A){const H=this._activeBuffer.lines.get(this._activeBuffer.ybase+A);H.deleteCells(this._activeBuffer.x,B,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),H.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}eraseChars(D){this._restrictCursor();const B=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return B&&(B.replaceCells(this._activeBuffer.x,this._activeBuffer.x+(D.params[0]||1),this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}repeatPrecedingCharacter(D){if(!this._parser.precedingCodepoint)return!0;const B=D.params[0]||1,A=new Uint32Array(B);for(let H=0;H<B;++H)A[H]=this._parser.precedingCodepoint;return this.print(A,0,A.length),!0}sendDeviceAttributesPrimary(D){return D.params[0]>0||(this._is("xterm")||this._is("rxvt-unicode")||this._is("screen")?this._coreService.triggerDataEvent(u.C0.ESC+"[?1;2c"):this._is("linux")&&this._coreService.triggerDataEvent(u.C0.ESC+"[?6c")),!0}sendDeviceAttributesSecondary(D){return D.params[0]>0||(this._is("xterm")?this._coreService.triggerDataEvent(u.C0.ESC+"[>0;276;0c"):this._is("rxvt-unicode")?this._coreService.triggerDataEvent(u.C0.ESC+"[>85;95;0c"):this._is("linux")?this._coreService.triggerDataEvent(D.params[0]+"c"):this._is("screen")&&this._coreService.triggerDataEvent(u.C0.ESC+"[>83;40003;0c")),!0}_is(D){return(this._optionsService.rawOptions.termName+"").indexOf(D)===0}setMode(D){for(let B=0;B<D.length;B++)switch(D.params[B]){case 4:this._coreService.modes.insertMode=!0;break;case 20:this._optionsService.options.convertEol=!0}return!0}setModePrivate(D){for(let B=0;B<D.length;B++)switch(D.params[B]){case 1:this._coreService.decPrivateModes.applicationCursorKeys=!0;break;case 2:this._charsetService.setgCharset(0,g.DEFAULT_CHARSET),this._charsetService.setgCharset(1,g.DEFAULT_CHARSET),this._charsetService.setgCharset(2,g.DEFAULT_CHARSET),this._charsetService.setgCharset(3,g.DEFAULT_CHARSET);break;case 3:this._optionsService.rawOptions.windowOptions.setWinLines&&(this._bufferService.resize(132,this._bufferService.rows),this._onRequestReset.fire());break;case 6:this._coreService.decPrivateModes.origin=!0,this._setCursor(0,0);break;case 7:this._coreService.decPrivateModes.wraparound=!0;break;case 12:this._optionsService.options.cursorBlink=!0;break;case 45:this._coreService.decPrivateModes.reverseWraparound=!0;break;case 66:this._logService.debug("Serial port requested application keypad."),this._coreService.decPrivateModes.applicationKeypad=!0,this._onRequestSyncScrollBar.fire();break;case 9:this._coreMouseService.activeProtocol="X10";break;case 1e3:this._coreMouseService.activeProtocol="VT200";break;case 1002:this._coreMouseService.activeProtocol="DRAG";break;case 1003:this._coreMouseService.activeProtocol="ANY";break;case 1004:this._coreService.decPrivateModes.sendFocus=!0,this._onRequestSendFocus.fire();break;case 1005:this._logService.debug("DECSET 1005 not supported (see #2507)");break;case 1006:this._coreMouseService.activeEncoding="SGR";break;case 1015:this._logService.debug("DECSET 1015 not supported (see #2507)");break;case 1016:this._coreMouseService.activeEncoding="SGR_PIXELS";break;case 25:this._coreService.isCursorHidden=!1;break;case 1048:this.saveCursor();break;case 1049:this.saveCursor();case 47:case 1047:this._bufferService.buffers.activateAltBuffer(this._eraseAttrData()),this._coreService.isCursorInitialized=!0,this._onRequestRefreshRows.fire(0,this._bufferService.rows-1),this._onRequestSyncScrollBar.fire();break;case 2004:this._coreService.decPrivateModes.bracketedPasteMode=!0}return!0}resetMode(D){for(let B=0;B<D.length;B++)switch(D.params[B]){case 4:this._coreService.modes.insertMode=!1;break;case 20:this._optionsService.options.convertEol=!1}return!0}resetModePrivate(D){for(let B=0;B<D.length;B++)switch(D.params[B]){case 1:this._coreService.decPrivateModes.applicationCursorKeys=!1;break;case 3:this._optionsService.rawOptions.windowOptions.setWinLines&&(this._bufferService.resize(80,this._bufferService.rows),this._onRequestReset.fire());break;case 6:this._coreService.decPrivateModes.origin=!1,this._setCursor(0,0);break;case 7:this._coreService.decPrivateModes.wraparound=!1;break;case 12:this._optionsService.options.cursorBlink=!1;break;case 45:this._coreService.decPrivateModes.reverseWraparound=!1;break;case 66:this._logService.debug("Switching back to normal keypad."),this._coreService.decPrivateModes.applicationKeypad=!1,this._onRequestSyncScrollBar.fire();break;case 9:case 1e3:case 1002:case 1003:this._coreMouseService.activeProtocol="NONE";break;case 1004:this._coreService.decPrivateModes.sendFocus=!1;break;case 1005:this._logService.debug("DECRST 1005 not supported (see #2507)");break;case 1006:case 1016:this._coreMouseService.activeEncoding="DEFAULT";break;case 1015:this._logService.debug("DECRST 1015 not supported (see #2507)");break;case 25:this._coreService.isCursorHidden=!0;break;case 1048:this.restoreCursor();break;case 1049:case 47:case 1047:this._bufferService.buffers.activateNormalBuffer(),D.params[B]===1049&&this.restoreCursor(),this._coreService.isCursorInitialized=!0,this._onRequestRefreshRows.fire(0,this._bufferService.rows-1),this._onRequestSyncScrollBar.fire();break;case 2004:this._coreService.decPrivateModes.bracketedPasteMode=!1}return!0}requestMode(D,B){const A=this._coreService.decPrivateModes,{activeProtocol:H,activeEncoding:I}=this._coreMouseService,ee=this._coreService,{buffers:le,cols:ae}=this._bufferService,{active:be,alt:M}=le,N=this._optionsService.rawOptions,K=we=>we?1:2,z=D.params[0];return _e=z,Q=B?z===2?4:z===4?K(ee.modes.insertMode):z===12?3:z===20?K(N.convertEol):0:z===1?K(A.applicationCursorKeys):z===3?N.windowOptions.setWinLines?ae===80?2:ae===132?1:0:0:z===6?K(A.origin):z===7?K(A.wraparound):z===8?3:z===9?K(H==="X10"):z===12?K(N.cursorBlink):z===25?K(!ee.isCursorHidden):z===45?K(A.reverseWraparound):z===66?K(A.applicationKeypad):z===67?4:z===1e3?K(H==="VT200"):z===1002?K(H==="DRAG"):z===1003?K(H==="ANY"):z===1004?K(A.sendFocus):z===1005?4:z===1006?K(I==="SGR"):z===1015?4:z===1016?K(I==="SGR_PIXELS"):z===1048?1:z===47||z===1047||z===1049?K(be===M):z===2004?K(A.bracketedPasteMode):0,ee.triggerDataEvent(`${u.C0.ESC}[${B?"":"?"}${_e};${Q}$y`),!0;var _e,Q}_updateAttrColor(D,B,A,H,I){return B===2?(D|=50331648,D&=-16777216,D|=v.AttributeData.fromColorRGB([A,H,I])):B===5&&(D&=-50331904,D|=33554432|255&A),D}_extractColor(D,B,A){const H=[0,0,-1,0,0,0];let I=0,ee=0;do{if(H[ee+I]=D.params[B+ee],D.hasSubParams(B+ee)){const le=D.getSubParams(B+ee);let ae=0;do H[1]===5&&(I=1),H[ee+ae+1+I]=le[ae];while(++ae<le.length&&ae+ee+1+I<H.length);break}if(H[1]===5&&ee+I>=2||H[1]===2&&ee+I>=5)break;H[1]&&(I=1)}while(++ee+B<D.length&&ee+I<H.length);for(let le=2;le<H.length;++le)H[le]===-1&&(H[le]=0);switch(H[0]){case 38:A.fg=this._updateAttrColor(A.fg,H[1],H[3],H[4],H[5]);break;case 48:A.bg=this._updateAttrColor(A.bg,H[1],H[3],H[4],H[5]);break;case 58:A.extended=A.extended.clone(),A.extended.underlineColor=this._updateAttrColor(A.extended.underlineColor,H[1],H[3],H[4],H[5])}return ee}_processUnderline(D,B){B.extended=B.extended.clone(),(!~D||D>5)&&(D=1),B.extended.underlineStyle=D,B.fg|=268435456,D===0&&(B.fg&=-268435457),B.updateExtended()}_processSGR0(D){D.fg=c.DEFAULT_ATTR_DATA.fg,D.bg=c.DEFAULT_ATTR_DATA.bg,D.extended=D.extended.clone(),D.extended.underlineStyle=0,D.extended.underlineColor&=-67108864,D.updateExtended()}charAttributes(D){if(D.length===1&&D.params[0]===0)return this._processSGR0(this._curAttrData),!0;const B=D.length;let A;const H=this._curAttrData;for(let I=0;I<B;I++)A=D.params[I],A>=30&&A<=37?(H.fg&=-50331904,H.fg|=16777216|A-30):A>=40&&A<=47?(H.bg&=-50331904,H.bg|=16777216|A-40):A>=90&&A<=97?(H.fg&=-50331904,H.fg|=16777224|A-90):A>=100&&A<=107?(H.bg&=-50331904,H.bg|=16777224|A-100):A===0?this._processSGR0(H):A===1?H.fg|=134217728:A===3?H.bg|=67108864:A===4?(H.fg|=268435456,this._processUnderline(D.hasSubParams(I)?D.getSubParams(I)[0]:1,H)):A===5?H.fg|=536870912:A===7?H.fg|=67108864:A===8?H.fg|=1073741824:A===9?H.fg|=2147483648:A===2?H.bg|=134217728:A===21?this._processUnderline(2,H):A===22?(H.fg&=-134217729,H.bg&=-134217729):A===23?H.bg&=-67108865:A===24?(H.fg&=-268435457,this._processUnderline(0,H)):A===25?H.fg&=-536870913:A===27?H.fg&=-67108865:A===28?H.fg&=-1073741825:A===29?H.fg&=2147483647:A===39?(H.fg&=-67108864,H.fg|=16777215&c.DEFAULT_ATTR_DATA.fg):A===49?(H.bg&=-67108864,H.bg|=16777215&c.DEFAULT_ATTR_DATA.bg):A===38||A===48||A===58?I+=this._extractColor(D,I,H):A===53?H.bg|=1073741824:A===55?H.bg&=-1073741825:A===59?(H.extended=H.extended.clone(),H.extended.underlineColor=-1,H.updateExtended()):A===100?(H.fg&=-67108864,H.fg|=16777215&c.DEFAULT_ATTR_DATA.fg,H.bg&=-67108864,H.bg|=16777215&c.DEFAULT_ATTR_DATA.bg):this._logService.debug("Unknown SGR attribute: %d.",A);return!0}deviceStatus(D){switch(D.params[0]){case 5:this._coreService.triggerDataEvent(`${u.C0.ESC}[0n`);break;case 6:const B=this._activeBuffer.y+1,A=this._activeBuffer.x+1;this._coreService.triggerDataEvent(`${u.C0.ESC}[${B};${A}R`)}return!0}deviceStatusPrivate(D){if(D.params[0]===6){const B=this._activeBuffer.y+1,A=this._activeBuffer.x+1;this._coreService.triggerDataEvent(`${u.C0.ESC}[?${B};${A}R`)}return!0}softReset(D){return this._coreService.isCursorHidden=!1,this._onRequestSyncScrollBar.fire(),this._activeBuffer.scrollTop=0,this._activeBuffer.scrollBottom=this._bufferService.rows-1,this._curAttrData=c.DEFAULT_ATTR_DATA.clone(),this._coreService.reset(),this._charsetService.reset(),this._activeBuffer.savedX=0,this._activeBuffer.savedY=this._activeBuffer.ybase,this._activeBuffer.savedCurAttrData.fg=this._curAttrData.fg,this._activeBuffer.savedCurAttrData.bg=this._curAttrData.bg,this._activeBuffer.savedCharset=this._charsetService.charset,this._coreService.decPrivateModes.origin=!1,!0}setCursorStyle(D){const B=D.params[0]||1;switch(B){case 1:case 2:this._optionsService.options.cursorStyle="block";break;case 3:case 4:this._optionsService.options.cursorStyle="underline";break;case 5:case 6:this._optionsService.options.cursorStyle="bar"}const A=B%2==1;return this._optionsService.options.cursorBlink=A,!0}setScrollRegion(D){const B=D.params[0]||1;let A;return(D.length<2||(A=D.params[1])>this._bufferService.rows||A===0)&&(A=this._bufferService.rows),A>B&&(this._activeBuffer.scrollTop=B-1,this._activeBuffer.scrollBottom=A-1,this._setCursor(0,0)),!0}windowOptions(D){if(!R(D.params[0],this._optionsService.rawOptions.windowOptions))return!0;const B=D.length>1?D.params[1]:0;switch(D.params[0]){case 14:B!==2&&this._onRequestWindowsOptionsReport.fire(O.GET_WIN_SIZE_PIXELS);break;case 16:this._onRequestWindowsOptionsReport.fire(O.GET_CELL_SIZE_PIXELS);break;case 18:this._bufferService&&this._coreService.triggerDataEvent(`${u.C0.ESC}[8;${this._bufferService.rows};${this._bufferService.cols}t`);break;case 22:B!==0&&B!==2||(this._windowTitleStack.push(this._windowTitle),this._windowTitleStack.length>10&&this._windowTitleStack.shift()),B!==0&&B!==1||(this._iconNameStack.push(this._iconName),this._iconNameStack.length>10&&this._iconNameStack.shift());break;case 23:B!==0&&B!==2||this._windowTitleStack.length&&this.setTitle(this._windowTitleStack.pop()),B!==0&&B!==1||this._iconNameStack.length&&this.setIconName(this._iconNameStack.pop())}return!0}saveCursor(D){return this._activeBuffer.savedX=this._activeBuffer.x,this._activeBuffer.savedY=this._activeBuffer.ybase+this._activeBuffer.y,this._activeBuffer.savedCurAttrData.fg=this._curAttrData.fg,this._activeBuffer.savedCurAttrData.bg=this._curAttrData.bg,this._activeBuffer.savedCharset=this._charsetService.charset,!0}restoreCursor(D){return this._activeBuffer.x=this._activeBuffer.savedX||0,this._activeBuffer.y=Math.max(this._activeBuffer.savedY-this._activeBuffer.ybase,0),this._curAttrData.fg=this._activeBuffer.savedCurAttrData.fg,this._curAttrData.bg=this._activeBuffer.savedCurAttrData.bg,this._charsetService.charset=this._savedCharset,this._activeBuffer.savedCharset&&(this._charsetService.charset=this._activeBuffer.savedCharset),this._restrictCursor(),!0}setTitle(D){return this._windowTitle=D,this._onTitleChange.fire(D),!0}setIconName(D){return this._iconName=D,!0}setOrReportIndexedColor(D){const B=[],A=D.split(";");for(;A.length>1;){const H=A.shift(),I=A.shift();if(/^\d+$/.exec(H)){const ee=parseInt(H);if(Y(ee))if(I==="?")B.push({type:0,index:ee});else{const le=(0,C.parseColor)(I);le&&B.push({type:1,index:ee,color:le})}}}return B.length&&this._onColor.fire(B),!0}setHyperlink(D){const B=D.split(";");return!(B.length<2)&&(B[1]?this._createHyperlink(B[0],B[1]):!B[0]&&this._finishHyperlink())}_createHyperlink(D,B){this._getCurrentLinkId()&&this._finishHyperlink();const A=D.split(":");let H;const I=A.findIndex(ee=>ee.startsWith("id="));return I!==-1&&(H=A[I].slice(3)||void 0),this._curAttrData.extended=this._curAttrData.extended.clone(),this._curAttrData.extended.urlId=this._oscLinkService.registerLink({id:H,uri:B}),this._curAttrData.updateExtended(),!0}_finishHyperlink(){return this._curAttrData.extended=this._curAttrData.extended.clone(),this._curAttrData.extended.urlId=0,this._curAttrData.updateExtended(),!0}_setOrReportSpecialColor(D,B){const A=D.split(";");for(let H=0;H<A.length&&!(B>=this._specialColors.length);++H,++B)if(A[H]==="?")this._onColor.fire([{type:0,index:this._specialColors[B]}]);else{const I=(0,C.parseColor)(A[H]);I&&this._onColor.fire([{type:1,index:this._specialColors[B],color:I}])}return!0}setOrReportFgColor(D){return this._setOrReportSpecialColor(D,0)}setOrReportBgColor(D){return this._setOrReportSpecialColor(D,1)}setOrReportCursorColor(D){return this._setOrReportSpecialColor(D,2)}restoreIndexedColor(D){if(!D)return this._onColor.fire([{type:2}]),!0;const B=[],A=D.split(";");for(let H=0;H<A.length;++H)if(/^\d+$/.exec(A[H])){const I=parseInt(A[H]);Y(I)&&B.push({type:2,index:I})}return B.length&&this._onColor.fire(B),!0}restoreFgColor(D){return this._onColor.fire([{type:2,index:256}]),!0}restoreBgColor(D){return this._onColor.fire([{type:2,index:257}]),!0}restoreCursorColor(D){return this._onColor.fire([{type:2,index:258}]),!0}nextLine(){return this._activeBuffer.x=0,this.index(),!0}keypadApplicationMode(){return this._logService.debug("Serial port requested application keypad."),this._coreService.decPrivateModes.applicationKeypad=!0,this._onRequestSyncScrollBar.fire(),!0}keypadNumericMode(){return this._logService.debug("Switching back to normal keypad."),this._coreService.decPrivateModes.applicationKeypad=!1,this._onRequestSyncScrollBar.fire(),!0}selectDefaultCharset(){return this._charsetService.setgLevel(0),this._charsetService.setgCharset(0,g.DEFAULT_CHARSET),!0}selectCharset(D){return D.length!==2?(this.selectDefaultCharset(),!0):(D[0]==="/"||this._charsetService.setgCharset(w[D[0]],g.CHARSETS[D[1]]||g.DEFAULT_CHARSET),!0)}index(){return this._restrictCursor(),this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData())):this._activeBuffer.y>=this._bufferService.rows&&(this._activeBuffer.y=this._bufferService.rows-1),this._restrictCursor(),!0}tabSet(){return this._activeBuffer.tabs[this._activeBuffer.x]=!0,!0}reverseIndex(){if(this._restrictCursor(),this._activeBuffer.y===this._activeBuffer.scrollTop){const D=this._activeBuffer.scrollBottom-this._activeBuffer.scrollTop;this._activeBuffer.lines.shiftElements(this._activeBuffer.ybase+this._activeBuffer.y,D,1),this._activeBuffer.lines.set(this._activeBuffer.ybase+this._activeBuffer.y,this._activeBuffer.getBlankLine(this._eraseAttrData())),this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom)}else this._activeBuffer.y--,this._restrictCursor();return!0}fullReset(){return this._parser.reset(),this._onRequestReset.fire(),!0}reset(){this._curAttrData=c.DEFAULT_ATTR_DATA.clone(),this._eraseAttrDataInternal=c.DEFAULT_ATTR_DATA.clone()}_eraseAttrData(){return this._eraseAttrDataInternal.bg&=-67108864,this._eraseAttrDataInternal.bg|=67108863&this._curAttrData.bg,this._eraseAttrDataInternal}setgLevel(D){return this._charsetService.setgLevel(D),!0}screenAlignmentPattern(){const D=new p.CellData;D.content=4194304|"E".charCodeAt(0),D.fg=this._curAttrData.fg,D.bg=this._curAttrData.bg,this._setCursor(0,0);for(let B=0;B<this._bufferService.rows;++B){const A=this._activeBuffer.ybase+this._activeBuffer.y+B,H=this._activeBuffer.lines.get(A);H&&(H.fill(D),H.isWrapped=!1)}return this._dirtyRowTracker.markAllDirty(),this._setCursor(0,0),!0}requestStatusString(D,B){const A=this._bufferService.buffer,H=this._optionsService.rawOptions;return(I=>(this._coreService.triggerDataEvent(`${u.C0.ESC}${I}${u.C0.ESC}\\`),!0))(D==='"q'?`P1$r${this._curAttrData.isProtected()?1:0}"q`:D==='"p'?'P1$r61;1"p':D==="r"?`P1$r${A.scrollTop+1};${A.scrollBottom+1}r`:D==="m"?"P1$r0m":D===" q"?`P1$r${{block:2,underline:4,bar:6}[H.cursorStyle]-(H.cursorBlink?1:0)} q`:"P0$r")}markRangeDirty(D,B){this._dirtyRowTracker.markRangeDirty(D,B)}}o.InputHandler=x;let j=class{constructor(Z){this._bufferService=Z,this.clearRange()}clearRange(){this.start=this._bufferService.buffer.y,this.end=this._bufferService.buffer.y}markDirty(Z){Z<this.start?this.start=Z:Z>this.end&&(this.end=Z)}markRangeDirty(Z,D){Z>D&&(T=Z,Z=D,D=T),Z<this.start&&(this.start=Z),D>this.end&&(this.end=D)}markAllDirty(){this.markRangeDirty(0,this._bufferService.rows-1)}};function Y(Z){return 0<=Z&&Z<256}j=h([d(0,S.IBufferService)],j)},844:(l,o)=>{function a(h){for(const d of h)d.dispose();h.length=0}Object.defineProperty(o,"__esModule",{value:!0}),o.getDisposeArrayDisposable=o.disposeArray=o.toDisposable=o.MutableDisposable=o.Disposable=void 0,o.Disposable=class{constructor(){this._disposables=[],this._isDisposed=!1}dispose(){this._isDisposed=!0;for(const h of this._disposables)h.dispose();this._disposables.length=0}register(h){return this._disposables.push(h),h}unregister(h){const d=this._disposables.indexOf(h);d!==-1&&this._disposables.splice(d,1)}},o.MutableDisposable=class{constructor(){this._isDisposed=!1}get value(){return this._isDisposed?void 0:this._value}set value(h){var d;this._isDisposed||h===this._value||((d=this._value)===null||d===void 0||d.dispose(),this._value=h)}clear(){this.value=void 0}dispose(){var h;this._isDisposed=!0,(h=this._value)===null||h===void 0||h.dispose(),this._value=void 0}},o.toDisposable=function(h){return{dispose:h}},o.disposeArray=a,o.getDisposeArrayDisposable=function(h){return{dispose:()=>a(h)}}},1505:(l,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.FourKeyMap=o.TwoKeyMap=void 0;class a{constructor(){this._data={}}set(d,u,g){this._data[d]||(this._data[d]={}),this._data[d][u]=g}get(d,u){return this._data[d]?this._data[d][u]:void 0}clear(){this._data={}}}o.TwoKeyMap=a,o.FourKeyMap=class{constructor(){this._data=new a}set(h,d,u,g,b){this._data.get(h,d)||this._data.set(h,d,new a),this._data.get(h,d).set(u,g,b)}get(h,d,u,g){var b;return(b=this._data.get(h,d))===null||b===void 0?void 0:b.get(u,g)}clear(){this._data.clear()}}},6114:(l,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.isChromeOS=o.isLinux=o.isWindows=o.isIphone=o.isIpad=o.isMac=o.getSafariVersion=o.isSafari=o.isLegacyEdge=o.isFirefox=o.isNode=void 0,o.isNode=typeof navigator>"u";const a=o.isNode?"node":navigator.userAgent,h=o.isNode?"node":navigator.platform;o.isFirefox=a.includes("Firefox"),o.isLegacyEdge=a.includes("Edge"),o.isSafari=/^((?!chrome|android).)*safari/i.test(a),o.getSafariVersion=function(){if(!o.isSafari)return 0;const d=a.match(/Version\/(\d+)/);return d===null||d.length<2?0:parseInt(d[1])},o.isMac=["Macintosh","MacIntel","MacPPC","Mac68K"].includes(h),o.isIpad=h==="iPad",o.isIphone=h==="iPhone",o.isWindows=["Windows","Win16","Win32","WinCE"].includes(h),o.isLinux=h.indexOf("Linux")>=0,o.isChromeOS=/\bCrOS\b/.test(a)},6106:(l,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.SortedList=void 0;let a=0;o.SortedList=class{constructor(h){this._getKey=h,this._array=[]}clear(){this._array.length=0}insert(h){this._array.length!==0?(a=this._search(this._getKey(h)),this._array.splice(a,0,h)):this._array.push(h)}delete(h){if(this._array.length===0)return!1;const d=this._getKey(h);if(d===void 0||(a=this._search(d),a===-1)||this._getKey(this._array[a])!==d)return!1;do if(this._array[a]===h)return this._array.splice(a,1),!0;while(++a<this._array.length&&this._getKey(this._array[a])===d);return!1}*getKeyIterator(h){if(this._array.length!==0&&(a=this._search(h),!(a<0||a>=this._array.length)&&this._getKey(this._array[a])===h))do yield this._array[a];while(++a<this._array.length&&this._getKey(this._array[a])===h)}forEachByKey(h,d){if(this._array.length!==0&&(a=this._search(h),!(a<0||a>=this._array.length)&&this._getKey(this._array[a])===h))do d(this._array[a]);while(++a<this._array.length&&this._getKey(this._array[a])===h)}values(){return[...this._array].values()}_search(h){let d=0,u=this._array.length-1;for(;u>=d;){let g=d+u>>1;const b=this._getKey(this._array[g]);if(b>h)u=g-1;else{if(!(b<h)){for(;g>0&&this._getKey(this._array[g-1])===h;)g--;return g}d=g+1}}return d}}},7226:(l,o,a)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.DebouncedIdleTask=o.IdleTaskQueue=o.PriorityTaskQueue=void 0;const h=a(6114);class d{constructor(){this._tasks=[],this._i=0}enqueue(b){this._tasks.push(b),this._start()}flush(){for(;this._i<this._tasks.length;)this._tasks[this._i]()||this._i++;this.clear()}clear(){this._idleCallback&&(this._cancelCallback(this._idleCallback),this._idleCallback=void 0),this._i=0,this._tasks.length=0}_start(){this._idleCallback||(this._idleCallback=this._requestCallback(this._process.bind(this)))}_process(b){this._idleCallback=void 0;let y=0,m=0,c=b.timeRemaining(),f=0;for(;this._i<this._tasks.length;){if(y=Date.now(),this._tasks[this._i]()||this._i++,y=Math.max(1,Date.now()-y),m=Math.max(y,m),f=b.timeRemaining(),1.5*m>f)return c-y<-20&&console.warn(`task queue exceeded allotted deadline by ${Math.abs(Math.round(c-y))}ms`),void this._start();c=f}this.clear()}}class u extends d{_requestCallback(b){return setTimeout(()=>b(this._createDeadline(16)))}_cancelCallback(b){clearTimeout(b)}_createDeadline(b){const y=Date.now()+b;return{timeRemaining:()=>Math.max(0,y-Date.now())}}}o.PriorityTaskQueue=u,o.IdleTaskQueue=!h.isNode&&"requestIdleCallback"in window?class extends d{_requestCallback(g){return requestIdleCallback(g)}_cancelCallback(g){cancelIdleCallback(g)}}:u,o.DebouncedIdleTask=class{constructor(){this._queue=new o.IdleTaskQueue}set(g){this._queue.clear(),this._queue.enqueue(g)}flush(){this._queue.flush()}}},9282:(l,o,a)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.updateWindowsModeWrappedState=void 0;const h=a(643);o.updateWindowsModeWrappedState=function(d){const u=d.buffer.lines.get(d.buffer.ybase+d.buffer.y-1),g=u==null?void 0:u.get(d.cols-1),b=d.buffer.lines.get(d.buffer.ybase+d.buffer.y);b&&g&&(b.isWrapped=g[h.CHAR_DATA_CODE_INDEX]!==h.NULL_CELL_CODE&&g[h.CHAR_DATA_CODE_INDEX]!==h.WHITESPACE_CELL_CODE)}},3734:(l,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.ExtendedAttrs=o.AttributeData=void 0;class a{constructor(){this.fg=0,this.bg=0,this.extended=new h}static toColorRGB(u){return[u>>>16&255,u>>>8&255,255&u]}static fromColorRGB(u){return(255&u[0])<<16|(255&u[1])<<8|255&u[2]}clone(){const u=new a;return u.fg=this.fg,u.bg=this.bg,u.extended=this.extended.clone(),u}isInverse(){return 67108864&this.fg}isBold(){return 134217728&this.fg}isUnderline(){return this.hasExtendedAttrs()&&this.extended.underlineStyle!==0?1:268435456&this.fg}isBlink(){return 536870912&this.fg}isInvisible(){return 1073741824&this.fg}isItalic(){return 67108864&this.bg}isDim(){return 134217728&this.bg}isStrikethrough(){return 2147483648&this.fg}isProtected(){return 536870912&this.bg}isOverline(){return 1073741824&this.bg}getFgColorMode(){return 50331648&this.fg}getBgColorMode(){return 50331648&this.bg}isFgRGB(){return(50331648&this.fg)==50331648}isBgRGB(){return(50331648&this.bg)==50331648}isFgPalette(){return(50331648&this.fg)==16777216||(50331648&this.fg)==33554432}isBgPalette(){return(50331648&this.bg)==16777216||(50331648&this.bg)==33554432}isFgDefault(){return(50331648&this.fg)==0}isBgDefault(){return(50331648&this.bg)==0}isAttributeDefault(){return this.fg===0&&this.bg===0}getFgColor(){switch(50331648&this.fg){case 16777216:case 33554432:return 255&this.fg;case 50331648:return 16777215&this.fg;default:return-1}}getBgColor(){switch(50331648&this.bg){case 16777216:case 33554432:return 255&this.bg;case 50331648:return 16777215&this.bg;default:return-1}}hasExtendedAttrs(){return 268435456&this.bg}updateExtended(){this.extended.isEmpty()?this.bg&=-268435457:this.bg|=268435456}getUnderlineColor(){if(268435456&this.bg&&~this.extended.underlineColor)switch(50331648&this.extended.underlineColor){case 16777216:case 33554432:return 255&this.extended.underlineColor;case 50331648:return 16777215&this.extended.underlineColor;default:return this.getFgColor()}return this.getFgColor()}getUnderlineColorMode(){return 268435456&this.bg&&~this.extended.underlineColor?50331648&this.extended.underlineColor:this.getFgColorMode()}isUnderlineColorRGB(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==50331648:this.isFgRGB()}isUnderlineColorPalette(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==16777216||(50331648&this.extended.underlineColor)==33554432:this.isFgPalette()}isUnderlineColorDefault(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==0:this.isFgDefault()}getUnderlineStyle(){return 268435456&this.fg?268435456&this.bg?this.extended.underlineStyle:1:0}}o.AttributeData=a;class h{get ext(){return this._urlId?-469762049&this._ext|this.underlineStyle<<26:this._ext}set ext(u){this._ext=u}get underlineStyle(){return this._urlId?5:(469762048&this._ext)>>26}set underlineStyle(u){this._ext&=-469762049,this._ext|=u<<26&469762048}get underlineColor(){return 67108863&this._ext}set underlineColor(u){this._ext&=-67108864,this._ext|=67108863&u}get urlId(){return this._urlId}set urlId(u){this._urlId=u}constructor(u=0,g=0){this._ext=0,this._urlId=0,this._ext=u,this._urlId=g}clone(){return new h(this._ext,this._urlId)}isEmpty(){return this.underlineStyle===0&&this._urlId===0}}o.ExtendedAttrs=h},9092:(l,o,a)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.Buffer=o.MAX_BUFFER_SIZE=void 0;const h=a(6349),d=a(7226),u=a(3734),g=a(8437),b=a(4634),y=a(511),m=a(643),c=a(4863),f=a(7116);o.MAX_BUFFER_SIZE=4294967295,o.Buffer=class{constructor(_,p,v){this._hasScrollback=_,this._optionsService=p,this._bufferService=v,this.ydisp=0,this.ybase=0,this.y=0,this.x=0,this.tabs={},this.savedY=0,this.savedX=0,this.savedCurAttrData=g.DEFAULT_ATTR_DATA.clone(),this.savedCharset=f.DEFAULT_CHARSET,this.markers=[],this._nullCell=y.CellData.fromCharData([0,m.NULL_CELL_CHAR,m.NULL_CELL_WIDTH,m.NULL_CELL_CODE]),this._whitespaceCell=y.CellData.fromCharData([0,m.WHITESPACE_CELL_CHAR,m.WHITESPACE_CELL_WIDTH,m.WHITESPACE_CELL_CODE]),this._isClearing=!1,this._memoryCleanupQueue=new d.IdleTaskQueue,this._memoryCleanupPosition=0,this._cols=this._bufferService.cols,this._rows=this._bufferService.rows,this.lines=new h.CircularList(this._getCorrectBufferLength(this._rows)),this.scrollTop=0,this.scrollBottom=this._rows-1,this.setupTabStops()}getNullCell(_){return _?(this._nullCell.fg=_.fg,this._nullCell.bg=_.bg,this._nullCell.extended=_.extended):(this._nullCell.fg=0,this._nullCell.bg=0,this._nullCell.extended=new u.ExtendedAttrs),this._nullCell}getWhitespaceCell(_){return _?(this._whitespaceCell.fg=_.fg,this._whitespaceCell.bg=_.bg,this._whitespaceCell.extended=_.extended):(this._whitespaceCell.fg=0,this._whitespaceCell.bg=0,this._whitespaceCell.extended=new u.ExtendedAttrs),this._whitespaceCell}getBlankLine(_,p){return new g.BufferLine(this._bufferService.cols,this.getNullCell(_),p)}get hasScrollback(){return this._hasScrollback&&this.lines.maxLength>this._rows}get isCursorInViewport(){const _=this.ybase+this.y-this.ydisp;return _>=0&&_<this._rows}_getCorrectBufferLength(_){if(!this._hasScrollback)return _;const p=_+this._optionsService.rawOptions.scrollback;return p>o.MAX_BUFFER_SIZE?o.MAX_BUFFER_SIZE:p}fillViewportRows(_){if(this.lines.length===0){_===void 0&&(_=g.DEFAULT_ATTR_DATA);let p=this._rows;for(;p--;)this.lines.push(this.getBlankLine(_))}}clear(){this.ydisp=0,this.ybase=0,this.y=0,this.x=0,this.lines=new h.CircularList(this._getCorrectBufferLength(this._rows)),this.scrollTop=0,this.scrollBottom=this._rows-1,this.setupTabStops()}resize(_,p){const v=this.getNullCell(g.DEFAULT_ATTR_DATA);let S=0;const L=this._getCorrectBufferLength(p);if(L>this.lines.maxLength&&(this.lines.maxLength=L),this.lines.length>0){if(this._cols<_)for(let C=0;C<this.lines.length;C++)S+=+this.lines.get(C).resize(_,v);let k=0;if(this._rows<p)for(let C=this._rows;C<p;C++)this.lines.length<p+this.ybase&&(this._optionsService.rawOptions.windowsMode||this._optionsService.rawOptions.windowsPty.backend!==void 0||this._optionsService.rawOptions.windowsPty.buildNumber!==void 0?this.lines.push(new g.BufferLine(_,v)):this.ybase>0&&this.lines.length<=this.ybase+this.y+k+1?(this.ybase--,k++,this.ydisp>0&&this.ydisp--):this.lines.push(new g.BufferLine(_,v)));else for(let C=this._rows;C>p;C--)this.lines.length>p+this.ybase&&(this.lines.length>this.ybase+this.y+1?this.lines.pop():(this.ybase++,this.ydisp++));if(L<this.lines.maxLength){const C=this.lines.length-L;C>0&&(this.lines.trimStart(C),this.ybase=Math.max(this.ybase-C,0),this.ydisp=Math.max(this.ydisp-C,0),this.savedY=Math.max(this.savedY-C,0)),this.lines.maxLength=L}this.x=Math.min(this.x,_-1),this.y=Math.min(this.y,p-1),k&&(this.y+=k),this.savedX=Math.min(this.savedX,_-1),this.scrollTop=0}if(this.scrollBottom=p-1,this._isReflowEnabled&&(this._reflow(_,p),this._cols>_))for(let k=0;k<this.lines.length;k++)S+=+this.lines.get(k).resize(_,v);this._cols=_,this._rows=p,this._memoryCleanupQueue.clear(),S>.1*this.lines.length&&(this._memoryCleanupPosition=0,this._memoryCleanupQueue.enqueue(()=>this._batchedMemoryCleanup()))}_batchedMemoryCleanup(){let _=!0;this._memoryCleanupPosition>=this.lines.length&&(this._memoryCleanupPosition=0,_=!1);let p=0;for(;this._memoryCleanupPosition<this.lines.length;)if(p+=this.lines.get(this._memoryCleanupPosition++).cleanupMemory(),p>100)return!0;return _}get _isReflowEnabled(){const _=this._optionsService.rawOptions.windowsPty;return _&&_.buildNumber?this._hasScrollback&&_.backend==="conpty"&&_.buildNumber>=21376:this._hasScrollback&&!this._optionsService.rawOptions.windowsMode}_reflow(_,p){this._cols!==_&&(_>this._cols?this._reflowLarger(_,p):this._reflowSmaller(_,p))}_reflowLarger(_,p){const v=(0,b.reflowLargerGetLinesToRemove)(this.lines,this._cols,_,this.ybase+this.y,this.getNullCell(g.DEFAULT_ATTR_DATA));if(v.length>0){const S=(0,b.reflowLargerCreateNewLayout)(this.lines,v);(0,b.reflowLargerApplyNewLayout)(this.lines,S.layout),this._reflowLargerAdjustViewport(_,p,S.countRemoved)}}_reflowLargerAdjustViewport(_,p,v){const S=this.getNullCell(g.DEFAULT_ATTR_DATA);let L=v;for(;L-- >0;)this.ybase===0?(this.y>0&&this.y--,this.lines.length<p&&this.lines.push(new g.BufferLine(_,S))):(this.ydisp===this.ybase&&this.ydisp--,this.ybase--);this.savedY=Math.max(this.savedY-v,0)}_reflowSmaller(_,p){const v=this.getNullCell(g.DEFAULT_ATTR_DATA),S=[];let L=0;for(let k=this.lines.length-1;k>=0;k--){let C=this.lines.get(k);if(!C||!C.isWrapped&&C.getTrimmedLength()<=_)continue;const w=[C];for(;C.isWrapped&&k>0;)C=this.lines.get(--k),w.unshift(C);const E=this.ybase+this.y;if(E>=k&&E<k+w.length)continue;const R=w[w.length-1].getTrimmedLength(),O=(0,b.reflowSmallerGetNewLineLengths)(w,this._cols,_),T=O.length-w.length;let x;x=this.ybase===0&&this.y!==this.lines.length-1?Math.max(0,this.y-this.lines.maxLength+T):Math.max(0,this.lines.length-this.lines.maxLength+T);const j=[];for(let H=0;H<T;H++){const I=this.getBlankLine(g.DEFAULT_ATTR_DATA,!0);j.push(I)}j.length>0&&(S.push({start:k+w.length+L,newLines:j}),L+=j.length),w.push(...j);let Y=O.length-1,Z=O[Y];Z===0&&(Y--,Z=O[Y]);let D=w.length-T-1,B=R;for(;D>=0;){const H=Math.min(B,Z);if(w[Y]===void 0)break;if(w[Y].copyCellsFrom(w[D],B-H,Z-H,H,!0),Z-=H,Z===0&&(Y--,Z=O[Y]),B-=H,B===0){D--;const I=Math.max(D,0);B=(0,b.getWrappedLineTrimmedLength)(w,I,this._cols)}}for(let H=0;H<w.length;H++)O[H]<_&&w[H].setCell(O[H],v);let A=T-x;for(;A-- >0;)this.ybase===0?this.y<p-1?(this.y++,this.lines.pop()):(this.ybase++,this.ydisp++):this.ybase<Math.min(this.lines.maxLength,this.lines.length+L)-p&&(this.ybase===this.ydisp&&this.ydisp++,this.ybase++);this.savedY=Math.min(this.savedY+T,this.ybase+p-1)}if(S.length>0){const k=[],C=[];for(let Y=0;Y<this.lines.length;Y++)C.push(this.lines.get(Y));const w=this.lines.length;let E=w-1,R=0,O=S[R];this.lines.length=Math.min(this.lines.maxLength,this.lines.length+L);let T=0;for(let Y=Math.min(this.lines.maxLength-1,w+L-1);Y>=0;Y--)if(O&&O.start>E+T){for(let Z=O.newLines.length-1;Z>=0;Z--)this.lines.set(Y--,O.newLines[Z]);Y++,k.push({index:E+1,amount:O.newLines.length}),T+=O.newLines.length,O=S[++R]}else this.lines.set(Y,C[E--]);let x=0;for(let Y=k.length-1;Y>=0;Y--)k[Y].index+=x,this.lines.onInsertEmitter.fire(k[Y]),x+=k[Y].amount;const j=Math.max(0,w+L-this.lines.maxLength);j>0&&this.lines.onTrimEmitter.fire(j)}}translateBufferLineToString(_,p,v=0,S){const L=this.lines.get(_);return L?L.translateToString(p,v,S):""}getWrappedRangeForLine(_){let p=_,v=_;for(;p>0&&this.lines.get(p).isWrapped;)p--;for(;v+1<this.lines.length&&this.lines.get(v+1).isWrapped;)v++;return{first:p,last:v}}setupTabStops(_){for(_!=null?this.tabs[_]||(_=this.prevStop(_)):(this.tabs={},_=0);_<this._cols;_+=this._optionsService.rawOptions.tabStopWidth)this.tabs[_]=!0}prevStop(_){for(_==null&&(_=this.x);!this.tabs[--_]&&_>0;);return _>=this._cols?this._cols-1:_<0?0:_}nextStop(_){for(_==null&&(_=this.x);!this.tabs[++_]&&_<this._cols;);return _>=this._cols?this._cols-1:_<0?0:_}clearMarkers(_){this._isClearing=!0;for(let p=0;p<this.markers.length;p++)this.markers[p].line===_&&(this.markers[p].dispose(),this.markers.splice(p--,1));this._isClearing=!1}clearAllMarkers(){this._isClearing=!0;for(let _=0;_<this.markers.length;_++)this.markers[_].dispose(),this.markers.splice(_--,1);this._isClearing=!1}addMarker(_){const p=new c.Marker(_);return this.markers.push(p),p.register(this.lines.onTrim(v=>{p.line-=v,p.line<0&&p.dispose()})),p.register(this.lines.onInsert(v=>{p.line>=v.index&&(p.line+=v.amount)})),p.register(this.lines.onDelete(v=>{p.line>=v.index&&p.line<v.index+v.amount&&p.dispose(),p.line>v.index&&(p.line-=v.amount)})),p.register(p.onDispose(()=>this._removeMarker(p))),p}_removeMarker(_){this._isClearing||this.markers.splice(this.markers.indexOf(_),1)}}},8437:(l,o,a)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.BufferLine=o.DEFAULT_ATTR_DATA=void 0;const h=a(3734),d=a(511),u=a(643),g=a(482);o.DEFAULT_ATTR_DATA=Object.freeze(new h.AttributeData);let b=0;class y{constructor(c,f,_=!1){this.isWrapped=_,this._combined={},this._extendedAttrs={},this._data=new Uint32Array(3*c);const p=f||d.CellData.fromCharData([0,u.NULL_CELL_CHAR,u.NULL_CELL_WIDTH,u.NULL_CELL_CODE]);for(let v=0;v<c;++v)this.setCell(v,p);this.length=c}get(c){const f=this._data[3*c+0],_=2097151&f;return[this._data[3*c+1],2097152&f?this._combined[c]:_?(0,g.stringFromCodePoint)(_):"",f>>22,2097152&f?this._combined[c].charCodeAt(this._combined[c].length-1):_]}set(c,f){this._data[3*c+1]=f[u.CHAR_DATA_ATTR_INDEX],f[u.CHAR_DATA_CHAR_INDEX].length>1?(this._combined[c]=f[1],this._data[3*c+0]=2097152|c|f[u.CHAR_DATA_WIDTH_INDEX]<<22):this._data[3*c+0]=f[u.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|f[u.CHAR_DATA_WIDTH_INDEX]<<22}getWidth(c){return this._data[3*c+0]>>22}hasWidth(c){return 12582912&this._data[3*c+0]}getFg(c){return this._data[3*c+1]}getBg(c){return this._data[3*c+2]}hasContent(c){return 4194303&this._data[3*c+0]}getCodePoint(c){const f=this._data[3*c+0];return 2097152&f?this._combined[c].charCodeAt(this._combined[c].length-1):2097151&f}isCombined(c){return 2097152&this._data[3*c+0]}getString(c){const f=this._data[3*c+0];return 2097152&f?this._combined[c]:2097151&f?(0,g.stringFromCodePoint)(2097151&f):""}isProtected(c){return 536870912&this._data[3*c+2]}loadCell(c,f){return b=3*c,f.content=this._data[b+0],f.fg=this._data[b+1],f.bg=this._data[b+2],2097152&f.content&&(f.combinedData=this._combined[c]),268435456&f.bg&&(f.extended=this._extendedAttrs[c]),f}setCell(c,f){2097152&f.content&&(this._combined[c]=f.combinedData),268435456&f.bg&&(this._extendedAttrs[c]=f.extended),this._data[3*c+0]=f.content,this._data[3*c+1]=f.fg,this._data[3*c+2]=f.bg}setCellFromCodePoint(c,f,_,p,v,S){268435456&v&&(this._extendedAttrs[c]=S),this._data[3*c+0]=f|_<<22,this._data[3*c+1]=p,this._data[3*c+2]=v}addCodepointToCell(c,f){let _=this._data[3*c+0];2097152&_?this._combined[c]+=(0,g.stringFromCodePoint)(f):(2097151&_?(this._combined[c]=(0,g.stringFromCodePoint)(2097151&_)+(0,g.stringFromCodePoint)(f),_&=-2097152,_|=2097152):_=f|4194304,this._data[3*c+0]=_)}insertCells(c,f,_,p){if((c%=this.length)&&this.getWidth(c-1)===2&&this.setCellFromCodePoint(c-1,0,1,(p==null?void 0:p.fg)||0,(p==null?void 0:p.bg)||0,(p==null?void 0:p.extended)||new h.ExtendedAttrs),f<this.length-c){const v=new d.CellData;for(let S=this.length-c-f-1;S>=0;--S)this.setCell(c+f+S,this.loadCell(c+S,v));for(let S=0;S<f;++S)this.setCell(c+S,_)}else for(let v=c;v<this.length;++v)this.setCell(v,_);this.getWidth(this.length-1)===2&&this.setCellFromCodePoint(this.length-1,0,1,(p==null?void 0:p.fg)||0,(p==null?void 0:p.bg)||0,(p==null?void 0:p.extended)||new h.ExtendedAttrs)}deleteCells(c,f,_,p){if(c%=this.length,f<this.length-c){const v=new d.CellData;for(let S=0;S<this.length-c-f;++S)this.setCell(c+S,this.loadCell(c+f+S,v));for(let S=this.length-f;S<this.length;++S)this.setCell(S,_)}else for(let v=c;v<this.length;++v)this.setCell(v,_);c&&this.getWidth(c-1)===2&&this.setCellFromCodePoint(c-1,0,1,(p==null?void 0:p.fg)||0,(p==null?void 0:p.bg)||0,(p==null?void 0:p.extended)||new h.ExtendedAttrs),this.getWidth(c)!==0||this.hasContent(c)||this.setCellFromCodePoint(c,0,1,(p==null?void 0:p.fg)||0,(p==null?void 0:p.bg)||0,(p==null?void 0:p.extended)||new h.ExtendedAttrs)}replaceCells(c,f,_,p,v=!1){if(v)for(c&&this.getWidth(c-1)===2&&!this.isProtected(c-1)&&this.setCellFromCodePoint(c-1,0,1,(p==null?void 0:p.fg)||0,(p==null?void 0:p.bg)||0,(p==null?void 0:p.extended)||new h.ExtendedAttrs),f<this.length&&this.getWidth(f-1)===2&&!this.isProtected(f)&&this.setCellFromCodePoint(f,0,1,(p==null?void 0:p.fg)||0,(p==null?void 0:p.bg)||0,(p==null?void 0:p.extended)||new h.ExtendedAttrs);c<f&&c<this.length;)this.isProtected(c)||this.setCell(c,_),c++;else for(c&&this.getWidth(c-1)===2&&this.setCellFromCodePoint(c-1,0,1,(p==null?void 0:p.fg)||0,(p==null?void 0:p.bg)||0,(p==null?void 0:p.extended)||new h.ExtendedAttrs),f<this.length&&this.getWidth(f-1)===2&&this.setCellFromCodePoint(f,0,1,(p==null?void 0:p.fg)||0,(p==null?void 0:p.bg)||0,(p==null?void 0:p.extended)||new h.ExtendedAttrs);c<f&&c<this.length;)this.setCell(c++,_)}resize(c,f){if(c===this.length)return 4*this._data.length*2<this._data.buffer.byteLength;const _=3*c;if(c>this.length){if(this._data.buffer.byteLength>=4*_)this._data=new Uint32Array(this._data.buffer,0,_);else{const p=new Uint32Array(_);p.set(this._data),this._data=p}for(let p=this.length;p<c;++p)this.setCell(p,f)}else{this._data=this._data.subarray(0,_);const p=Object.keys(this._combined);for(let S=0;S<p.length;S++){const L=parseInt(p[S],10);L>=c&&delete this._combined[L]}const v=Object.keys(this._extendedAttrs);for(let S=0;S<v.length;S++){const L=parseInt(v[S],10);L>=c&&delete this._extendedAttrs[L]}}return this.length=c,4*_*2<this._data.buffer.byteLength}cleanupMemory(){if(4*this._data.length*2<this._data.buffer.byteLength){const c=new Uint32Array(this._data.length);return c.set(this._data),this._data=c,1}return 0}fill(c,f=!1){if(f)for(let _=0;_<this.length;++_)this.isProtected(_)||this.setCell(_,c);else{this._combined={},this._extendedAttrs={};for(let _=0;_<this.length;++_)this.setCell(_,c)}}copyFrom(c){this.length!==c.length?this._data=new Uint32Array(c._data):this._data.set(c._data),this.length=c.length,this._combined={};for(const f in c._combined)this._combined[f]=c._combined[f];this._extendedAttrs={};for(const f in c._extendedAttrs)this._extendedAttrs[f]=c._extendedAttrs[f];this.isWrapped=c.isWrapped}clone(){const c=new y(0);c._data=new Uint32Array(this._data),c.length=this.length;for(const f in this._combined)c._combined[f]=this._combined[f];for(const f in this._extendedAttrs)c._extendedAttrs[f]=this._extendedAttrs[f];return c.isWrapped=this.isWrapped,c}getTrimmedLength(){for(let c=this.length-1;c>=0;--c)if(4194303&this._data[3*c+0])return c+(this._data[3*c+0]>>22);return 0}getNoBgTrimmedLength(){for(let c=this.length-1;c>=0;--c)if(4194303&this._data[3*c+0]||50331648&this._data[3*c+2])return c+(this._data[3*c+0]>>22);return 0}copyCellsFrom(c,f,_,p,v){const S=c._data;if(v)for(let k=p-1;k>=0;k--){for(let C=0;C<3;C++)this._data[3*(_+k)+C]=S[3*(f+k)+C];268435456&S[3*(f+k)+2]&&(this._extendedAttrs[_+k]=c._extendedAttrs[f+k])}else for(let k=0;k<p;k++){for(let C=0;C<3;C++)this._data[3*(_+k)+C]=S[3*(f+k)+C];268435456&S[3*(f+k)+2]&&(this._extendedAttrs[_+k]=c._extendedAttrs[f+k])}const L=Object.keys(c._combined);for(let k=0;k<L.length;k++){const C=parseInt(L[k],10);C>=f&&(this._combined[C-f+_]=c._combined[C])}}translateToString(c=!1,f=0,_=this.length){c&&(_=Math.min(_,this.getTrimmedLength()));let p="";for(;f<_;){const v=this._data[3*f+0],S=2097151&v;p+=2097152&v?this._combined[f]:S?(0,g.stringFromCodePoint)(S):u.WHITESPACE_CELL_CHAR,f+=v>>22||1}return p}}o.BufferLine=y},4841:(l,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.getRangeLength=void 0,o.getRangeLength=function(a,h){if(a.start.y>a.end.y)throw new Error(`Buffer range end (${a.end.x}, ${a.end.y}) cannot be before start (${a.start.x}, ${a.start.y})`);return h*(a.end.y-a.start.y)+(a.end.x-a.start.x+1)}},4634:(l,o)=>{function a(h,d,u){if(d===h.length-1)return h[d].getTrimmedLength();const g=!h[d].hasContent(u-1)&&h[d].getWidth(u-1)===1,b=h[d+1].getWidth(0)===2;return g&&b?u-1:u}Object.defineProperty(o,"__esModule",{value:!0}),o.getWrappedLineTrimmedLength=o.reflowSmallerGetNewLineLengths=o.reflowLargerApplyNewLayout=o.reflowLargerCreateNewLayout=o.reflowLargerGetLinesToRemove=void 0,o.reflowLargerGetLinesToRemove=function(h,d,u,g,b){const y=[];for(let m=0;m<h.length-1;m++){let c=m,f=h.get(++c);if(!f.isWrapped)continue;const _=[h.get(m)];for(;c<h.length&&f.isWrapped;)_.push(f),f=h.get(++c);if(g>=m&&g<c){m+=_.length-1;continue}let p=0,v=a(_,p,d),S=1,L=0;for(;S<_.length;){const C=a(_,S,d),w=C-L,E=u-v,R=Math.min(w,E);_[p].copyCellsFrom(_[S],L,v,R,!1),v+=R,v===u&&(p++,v=0),L+=R,L===C&&(S++,L=0),v===0&&p!==0&&_[p-1].getWidth(u-1)===2&&(_[p].copyCellsFrom(_[p-1],u-1,v++,1,!1),_[p-1].setCell(u-1,b))}_[p].replaceCells(v,u,b);let k=0;for(let C=_.length-1;C>0&&(C>p||_[C].getTrimmedLength()===0);C--)k++;k>0&&(y.push(m+_.length-k),y.push(k)),m+=_.length-1}return y},o.reflowLargerCreateNewLayout=function(h,d){const u=[];let g=0,b=d[g],y=0;for(let m=0;m<h.length;m++)if(b===m){const c=d[++g];h.onDeleteEmitter.fire({index:m-y,amount:c}),m+=c-1,y+=c,b=d[++g]}else u.push(m);return{layout:u,countRemoved:y}},o.reflowLargerApplyNewLayout=function(h,d){const u=[];for(let g=0;g<d.length;g++)u.push(h.get(d[g]));for(let g=0;g<u.length;g++)h.set(g,u[g]);h.length=d.length},o.reflowSmallerGetNewLineLengths=function(h,d,u){const g=[],b=h.map((f,_)=>a(h,_,d)).reduce((f,_)=>f+_);let y=0,m=0,c=0;for(;c<b;){if(b-c<u){g.push(b-c);break}y+=u;const f=a(h,m,d);y>f&&(y-=f,m++);const _=h[m].getWidth(y-1)===2;_&&y--;const p=_?u-1:u;g.push(p),c+=p}return g},o.getWrappedLineTrimmedLength=a},5295:(l,o,a)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.BufferSet=void 0;const h=a(8460),d=a(844),u=a(9092);class g extends d.Disposable{constructor(y,m){super(),this._optionsService=y,this._bufferService=m,this._onBufferActivate=this.register(new h.EventEmitter),this.onBufferActivate=this._onBufferActivate.event,this.reset(),this.register(this._optionsService.onSpecificOptionChange("scrollback",()=>this.resize(this._bufferService.cols,this._bufferService.rows))),this.register(this._optionsService.onSpecificOptionChange("tabStopWidth",()=>this.setupTabStops()))}reset(){this._normal=new u.Buffer(!0,this._optionsService,this._bufferService),this._normal.fillViewportRows(),this._alt=new u.Buffer(!1,this._optionsService,this._bufferService),this._activeBuffer=this._normal,this._onBufferActivate.fire({activeBuffer:this._normal,inactiveBuffer:this._alt}),this.setupTabStops()}get alt(){return this._alt}get active(){return this._activeBuffer}get normal(){return this._normal}activateNormalBuffer(){this._activeBuffer!==this._normal&&(this._normal.x=this._alt.x,this._normal.y=this._alt.y,this._alt.clearAllMarkers(),this._alt.clear(),this._activeBuffer=this._normal,this._onBufferActivate.fire({activeBuffer:this._normal,inactiveBuffer:this._alt}))}activateAltBuffer(y){this._activeBuffer!==this._alt&&(this._alt.fillViewportRows(y),this._alt.x=this._normal.x,this._alt.y=this._normal.y,this._activeBuffer=this._alt,this._onBufferActivate.fire({activeBuffer:this._alt,inactiveBuffer:this._normal}))}resize(y,m){this._normal.resize(y,m),this._alt.resize(y,m),this.setupTabStops(y)}setupTabStops(y){this._normal.setupTabStops(y),this._alt.setupTabStops(y)}}o.BufferSet=g},511:(l,o,a)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.CellData=void 0;const h=a(482),d=a(643),u=a(3734);class g extends u.AttributeData{constructor(){super(...arguments),this.content=0,this.fg=0,this.bg=0,this.extended=new u.ExtendedAttrs,this.combinedData=""}static fromCharData(y){const m=new g;return m.setFromCharData(y),m}isCombined(){return 2097152&this.content}getWidth(){return this.content>>22}getChars(){return 2097152&this.content?this.combinedData:2097151&this.content?(0,h.stringFromCodePoint)(2097151&this.content):""}getCode(){return this.isCombined()?this.combinedData.charCodeAt(this.combinedData.length-1):2097151&this.content}setFromCharData(y){this.fg=y[d.CHAR_DATA_ATTR_INDEX],this.bg=0;let m=!1;if(y[d.CHAR_DATA_CHAR_INDEX].length>2)m=!0;else if(y[d.CHAR_DATA_CHAR_INDEX].length===2){const c=y[d.CHAR_DATA_CHAR_INDEX].charCodeAt(0);if(55296<=c&&c<=56319){const f=y[d.CHAR_DATA_CHAR_INDEX].charCodeAt(1);56320<=f&&f<=57343?this.content=1024*(c-55296)+f-56320+65536|y[d.CHAR_DATA_WIDTH_INDEX]<<22:m=!0}else m=!0}else this.content=y[d.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|y[d.CHAR_DATA_WIDTH_INDEX]<<22;m&&(this.combinedData=y[d.CHAR_DATA_CHAR_INDEX],this.content=2097152|y[d.CHAR_DATA_WIDTH_INDEX]<<22)}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}}o.CellData=g},643:(l,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.WHITESPACE_CELL_CODE=o.WHITESPACE_CELL_WIDTH=o.WHITESPACE_CELL_CHAR=o.NULL_CELL_CODE=o.NULL_CELL_WIDTH=o.NULL_CELL_CHAR=o.CHAR_DATA_CODE_INDEX=o.CHAR_DATA_WIDTH_INDEX=o.CHAR_DATA_CHAR_INDEX=o.CHAR_DATA_ATTR_INDEX=o.DEFAULT_EXT=o.DEFAULT_ATTR=o.DEFAULT_COLOR=void 0,o.DEFAULT_COLOR=0,o.DEFAULT_ATTR=256|o.DEFAULT_COLOR<<9,o.DEFAULT_EXT=0,o.CHAR_DATA_ATTR_INDEX=0,o.CHAR_DATA_CHAR_INDEX=1,o.CHAR_DATA_WIDTH_INDEX=2,o.CHAR_DATA_CODE_INDEX=3,o.NULL_CELL_CHAR="",o.NULL_CELL_WIDTH=1,o.NULL_CELL_CODE=0,o.WHITESPACE_CELL_CHAR=" ",o.WHITESPACE_CELL_WIDTH=1,o.WHITESPACE_CELL_CODE=32},4863:(l,o,a)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.Marker=void 0;const h=a(8460),d=a(844);class u{get id(){return this._id}constructor(b){this.line=b,this.isDisposed=!1,this._disposables=[],this._id=u._nextId++,this._onDispose=this.register(new h.EventEmitter),this.onDispose=this._onDispose.event}dispose(){this.isDisposed||(this.isDisposed=!0,this.line=-1,this._onDispose.fire(),(0,d.disposeArray)(this._disposables),this._disposables.length=0)}register(b){return this._disposables.push(b),b}}o.Marker=u,u._nextId=1},7116:(l,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.DEFAULT_CHARSET=o.CHARSETS=void 0,o.CHARSETS={},o.DEFAULT_CHARSET=o.CHARSETS.B,o.CHARSETS[0]={"`":"◆",a:"▒",b:"␉",c:"␌",d:"␍",e:"␊",f:"°",g:"±",h:"␤",i:"␋",j:"┘",k:"┐",l:"┌",m:"└",n:"┼",o:"⎺",p:"⎻",q:"─",r:"⎼",s:"⎽",t:"├",u:"┤",v:"┴",w:"┬",x:"│",y:"≤",z:"≥","{":"π","|":"≠","}":"£","~":"·"},o.CHARSETS.A={"#":"£"},o.CHARSETS.B=void 0,o.CHARSETS[4]={"#":"£","@":"¾","[":"ij","\\":"½","]":"|","{":"¨","|":"f","}":"¼","~":"´"},o.CHARSETS.C=o.CHARSETS[5]={"[":"Ä","\\":"Ö","]":"Å","^":"Ü","`":"é","{":"ä","|":"ö","}":"å","~":"ü"},o.CHARSETS.R={"#":"£","@":"à","[":"°","\\":"ç","]":"§","{":"é","|":"ù","}":"è","~":"¨"},o.CHARSETS.Q={"@":"à","[":"â","\\":"ç","]":"ê","^":"î","`":"ô","{":"é","|":"ù","}":"è","~":"û"},o.CHARSETS.K={"@":"§","[":"Ä","\\":"Ö","]":"Ü","{":"ä","|":"ö","}":"ü","~":"ß"},o.CHARSETS.Y={"#":"£","@":"§","[":"°","\\":"ç","]":"é","`":"ù","{":"à","|":"ò","}":"è","~":"ì"},o.CHARSETS.E=o.CHARSETS[6]={"@":"Ä","[":"Æ","\\":"Ø","]":"Å","^":"Ü","`":"ä","{":"æ","|":"ø","}":"å","~":"ü"},o.CHARSETS.Z={"#":"£","@":"§","[":"¡","\\":"Ñ","]":"¿","{":"°","|":"ñ","}":"ç"},o.CHARSETS.H=o.CHARSETS[7]={"@":"É","[":"Ä","\\":"Ö","]":"Å","^":"Ü","`":"é","{":"ä","|":"ö","}":"å","~":"ü"},o.CHARSETS["="]={"#":"ù","@":"à","[":"é","\\":"ç","]":"ê","^":"î",_:"è","`":"ô","{":"ä","|":"ö","}":"ü","~":"û"}},2584:(l,o)=>{var a,h,d;Object.defineProperty(o,"__esModule",{value:!0}),o.C1_ESCAPED=o.C1=o.C0=void 0,function(u){u.NUL="\0",u.SOH="",u.STX="",u.ETX="",u.EOT="",u.ENQ="",u.ACK="",u.BEL="\x07",u.BS="\b",u.HT="	",u.LF=`
`,u.VT="\v",u.FF="\f",u.CR="\r",u.SO="",u.SI="",u.DLE="",u.DC1="",u.DC2="",u.DC3="",u.DC4="",u.NAK="",u.SYN="",u.ETB="",u.CAN="",u.EM="",u.SUB="",u.ESC="\x1B",u.FS="",u.GS="",u.RS="",u.US="",u.SP=" ",u.DEL=""}(a||(o.C0=a={})),function(u){u.PAD="",u.HOP="",u.BPH="",u.NBH="",u.IND="",u.NEL="",u.SSA="",u.ESA="",u.HTS="",u.HTJ="",u.VTS="",u.PLD="",u.PLU="",u.RI="",u.SS2="",u.SS3="",u.DCS="",u.PU1="",u.PU2="",u.STS="",u.CCH="",u.MW="",u.SPA="",u.EPA="",u.SOS="",u.SGCI="",u.SCI="",u.CSI="",u.ST="",u.OSC="",u.PM="",u.APC=""}(h||(o.C1=h={})),function(u){u.ST=`${a.ESC}\\`}(d||(o.C1_ESCAPED=d={}))},7399:(l,o,a)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.evaluateKeyboardEvent=void 0;const h=a(2584),d={48:["0",")"],49:["1","!"],50:["2","@"],51:["3","#"],52:["4","$"],53:["5","%"],54:["6","^"],55:["7","&"],56:["8","*"],57:["9","("],186:[";",":"],187:["=","+"],188:[",","<"],189:["-","_"],190:[".",">"],191:["/","?"],192:["`","~"],219:["[","{"],220:["\\","|"],221:["]","}"],222:["'",'"']};o.evaluateKeyboardEvent=function(u,g,b,y){const m={type:0,cancel:!1,key:void 0},c=(u.shiftKey?1:0)|(u.altKey?2:0)|(u.ctrlKey?4:0)|(u.metaKey?8:0);switch(u.keyCode){case 0:u.key==="UIKeyInputUpArrow"?m.key=g?h.C0.ESC+"OA":h.C0.ESC+"[A":u.key==="UIKeyInputLeftArrow"?m.key=g?h.C0.ESC+"OD":h.C0.ESC+"[D":u.key==="UIKeyInputRightArrow"?m.key=g?h.C0.ESC+"OC":h.C0.ESC+"[C":u.key==="UIKeyInputDownArrow"&&(m.key=g?h.C0.ESC+"OB":h.C0.ESC+"[B");break;case 8:if(u.altKey){m.key=h.C0.ESC+h.C0.DEL;break}m.key=h.C0.DEL;break;case 9:if(u.shiftKey){m.key=h.C0.ESC+"[Z";break}m.key=h.C0.HT,m.cancel=!0;break;case 13:m.key=u.altKey?h.C0.ESC+h.C0.CR:h.C0.CR,m.cancel=!0;break;case 27:m.key=h.C0.ESC,u.altKey&&(m.key=h.C0.ESC+h.C0.ESC),m.cancel=!0;break;case 37:if(u.metaKey)break;c?(m.key=h.C0.ESC+"[1;"+(c+1)+"D",m.key===h.C0.ESC+"[1;3D"&&(m.key=h.C0.ESC+(b?"b":"[1;5D"))):m.key=g?h.C0.ESC+"OD":h.C0.ESC+"[D";break;case 39:if(u.metaKey)break;c?(m.key=h.C0.ESC+"[1;"+(c+1)+"C",m.key===h.C0.ESC+"[1;3C"&&(m.key=h.C0.ESC+(b?"f":"[1;5C"))):m.key=g?h.C0.ESC+"OC":h.C0.ESC+"[C";break;case 38:if(u.metaKey)break;c?(m.key=h.C0.ESC+"[1;"+(c+1)+"A",b||m.key!==h.C0.ESC+"[1;3A"||(m.key=h.C0.ESC+"[1;5A")):m.key=g?h.C0.ESC+"OA":h.C0.ESC+"[A";break;case 40:if(u.metaKey)break;c?(m.key=h.C0.ESC+"[1;"+(c+1)+"B",b||m.key!==h.C0.ESC+"[1;3B"||(m.key=h.C0.ESC+"[1;5B")):m.key=g?h.C0.ESC+"OB":h.C0.ESC+"[B";break;case 45:u.shiftKey||u.ctrlKey||(m.key=h.C0.ESC+"[2~");break;case 46:m.key=c?h.C0.ESC+"[3;"+(c+1)+"~":h.C0.ESC+"[3~";break;case 36:m.key=c?h.C0.ESC+"[1;"+(c+1)+"H":g?h.C0.ESC+"OH":h.C0.ESC+"[H";break;case 35:m.key=c?h.C0.ESC+"[1;"+(c+1)+"F":g?h.C0.ESC+"OF":h.C0.ESC+"[F";break;case 33:u.shiftKey?m.type=2:u.ctrlKey?m.key=h.C0.ESC+"[5;"+(c+1)+"~":m.key=h.C0.ESC+"[5~";break;case 34:u.shiftKey?m.type=3:u.ctrlKey?m.key=h.C0.ESC+"[6;"+(c+1)+"~":m.key=h.C0.ESC+"[6~";break;case 112:m.key=c?h.C0.ESC+"[1;"+(c+1)+"P":h.C0.ESC+"OP";break;case 113:m.key=c?h.C0.ESC+"[1;"+(c+1)+"Q":h.C0.ESC+"OQ";break;case 114:m.key=c?h.C0.ESC+"[1;"+(c+1)+"R":h.C0.ESC+"OR";break;case 115:m.key=c?h.C0.ESC+"[1;"+(c+1)+"S":h.C0.ESC+"OS";break;case 116:m.key=c?h.C0.ESC+"[15;"+(c+1)+"~":h.C0.ESC+"[15~";break;case 117:m.key=c?h.C0.ESC+"[17;"+(c+1)+"~":h.C0.ESC+"[17~";break;case 118:m.key=c?h.C0.ESC+"[18;"+(c+1)+"~":h.C0.ESC+"[18~";break;case 119:m.key=c?h.C0.ESC+"[19;"+(c+1)+"~":h.C0.ESC+"[19~";break;case 120:m.key=c?h.C0.ESC+"[20;"+(c+1)+"~":h.C0.ESC+"[20~";break;case 121:m.key=c?h.C0.ESC+"[21;"+(c+1)+"~":h.C0.ESC+"[21~";break;case 122:m.key=c?h.C0.ESC+"[23;"+(c+1)+"~":h.C0.ESC+"[23~";break;case 123:m.key=c?h.C0.ESC+"[24;"+(c+1)+"~":h.C0.ESC+"[24~";break;default:if(!u.ctrlKey||u.shiftKey||u.altKey||u.metaKey)if(b&&!y||!u.altKey||u.metaKey)!b||u.altKey||u.ctrlKey||u.shiftKey||!u.metaKey?u.key&&!u.ctrlKey&&!u.altKey&&!u.metaKey&&u.keyCode>=48&&u.key.length===1?m.key=u.key:u.key&&u.ctrlKey&&(u.key==="_"&&(m.key=h.C0.US),u.key==="@"&&(m.key=h.C0.NUL)):u.keyCode===65&&(m.type=1);else{const f=d[u.keyCode],_=f==null?void 0:f[u.shiftKey?1:0];if(_)m.key=h.C0.ESC+_;else if(u.keyCode>=65&&u.keyCode<=90){const p=u.ctrlKey?u.keyCode-64:u.keyCode+32;let v=String.fromCharCode(p);u.shiftKey&&(v=v.toUpperCase()),m.key=h.C0.ESC+v}else if(u.keyCode===32)m.key=h.C0.ESC+(u.ctrlKey?h.C0.NUL:" ");else if(u.key==="Dead"&&u.code.startsWith("Key")){let p=u.code.slice(3,4);u.shiftKey||(p=p.toLowerCase()),m.key=h.C0.ESC+p,m.cancel=!0}}else u.keyCode>=65&&u.keyCode<=90?m.key=String.fromCharCode(u.keyCode-64):u.keyCode===32?m.key=h.C0.NUL:u.keyCode>=51&&u.keyCode<=55?m.key=String.fromCharCode(u.keyCode-51+27):u.keyCode===56?m.key=h.C0.DEL:u.keyCode===219?m.key=h.C0.ESC:u.keyCode===220?m.key=h.C0.FS:u.keyCode===221&&(m.key=h.C0.GS)}return m}},482:(l,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.Utf8ToUtf32=o.StringToUtf32=o.utf32ToString=o.stringFromCodePoint=void 0,o.stringFromCodePoint=function(a){return a>65535?(a-=65536,String.fromCharCode(55296+(a>>10))+String.fromCharCode(a%1024+56320)):String.fromCharCode(a)},o.utf32ToString=function(a,h=0,d=a.length){let u="";for(let g=h;g<d;++g){let b=a[g];b>65535?(b-=65536,u+=String.fromCharCode(55296+(b>>10))+String.fromCharCode(b%1024+56320)):u+=String.fromCharCode(b)}return u},o.StringToUtf32=class{constructor(){this._interim=0}clear(){this._interim=0}decode(a,h){const d=a.length;if(!d)return 0;let u=0,g=0;if(this._interim){const b=a.charCodeAt(g++);56320<=b&&b<=57343?h[u++]=1024*(this._interim-55296)+b-56320+65536:(h[u++]=this._interim,h[u++]=b),this._interim=0}for(let b=g;b<d;++b){const y=a.charCodeAt(b);if(55296<=y&&y<=56319){if(++b>=d)return this._interim=y,u;const m=a.charCodeAt(b);56320<=m&&m<=57343?h[u++]=1024*(y-55296)+m-56320+65536:(h[u++]=y,h[u++]=m)}else y!==65279&&(h[u++]=y)}return u}},o.Utf8ToUtf32=class{constructor(){this.interim=new Uint8Array(3)}clear(){this.interim.fill(0)}decode(a,h){const d=a.length;if(!d)return 0;let u,g,b,y,m=0,c=0,f=0;if(this.interim[0]){let v=!1,S=this.interim[0];S&=(224&S)==192?31:(240&S)==224?15:7;let L,k=0;for(;(L=63&this.interim[++k])&&k<4;)S<<=6,S|=L;const C=(224&this.interim[0])==192?2:(240&this.interim[0])==224?3:4,w=C-k;for(;f<w;){if(f>=d)return 0;if(L=a[f++],(192&L)!=128){f--,v=!0;break}this.interim[k++]=L,S<<=6,S|=63&L}v||(C===2?S<128?f--:h[m++]=S:C===3?S<2048||S>=55296&&S<=57343||S===65279||(h[m++]=S):S<65536||S>1114111||(h[m++]=S)),this.interim.fill(0)}const _=d-4;let p=f;for(;p<d;){for(;!(!(p<_)||128&(u=a[p])||128&(g=a[p+1])||128&(b=a[p+2])||128&(y=a[p+3]));)h[m++]=u,h[m++]=g,h[m++]=b,h[m++]=y,p+=4;if(u=a[p++],u<128)h[m++]=u;else if((224&u)==192){if(p>=d)return this.interim[0]=u,m;if(g=a[p++],(192&g)!=128){p--;continue}if(c=(31&u)<<6|63&g,c<128){p--;continue}h[m++]=c}else if((240&u)==224){if(p>=d)return this.interim[0]=u,m;if(g=a[p++],(192&g)!=128){p--;continue}if(p>=d)return this.interim[0]=u,this.interim[1]=g,m;if(b=a[p++],(192&b)!=128){p--;continue}if(c=(15&u)<<12|(63&g)<<6|63&b,c<2048||c>=55296&&c<=57343||c===65279)continue;h[m++]=c}else if((248&u)==240){if(p>=d)return this.interim[0]=u,m;if(g=a[p++],(192&g)!=128){p--;continue}if(p>=d)return this.interim[0]=u,this.interim[1]=g,m;if(b=a[p++],(192&b)!=128){p--;continue}if(p>=d)return this.interim[0]=u,this.interim[1]=g,this.interim[2]=b,m;if(y=a[p++],(192&y)!=128){p--;continue}if(c=(7&u)<<18|(63&g)<<12|(63&b)<<6|63&y,c<65536||c>1114111)continue;h[m++]=c}}return m}}},225:(l,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.UnicodeV6=void 0;const a=[[768,879],[1155,1158],[1160,1161],[1425,1469],[1471,1471],[1473,1474],[1476,1477],[1479,1479],[1536,1539],[1552,1557],[1611,1630],[1648,1648],[1750,1764],[1767,1768],[1770,1773],[1807,1807],[1809,1809],[1840,1866],[1958,1968],[2027,2035],[2305,2306],[2364,2364],[2369,2376],[2381,2381],[2385,2388],[2402,2403],[2433,2433],[2492,2492],[2497,2500],[2509,2509],[2530,2531],[2561,2562],[2620,2620],[2625,2626],[2631,2632],[2635,2637],[2672,2673],[2689,2690],[2748,2748],[2753,2757],[2759,2760],[2765,2765],[2786,2787],[2817,2817],[2876,2876],[2879,2879],[2881,2883],[2893,2893],[2902,2902],[2946,2946],[3008,3008],[3021,3021],[3134,3136],[3142,3144],[3146,3149],[3157,3158],[3260,3260],[3263,3263],[3270,3270],[3276,3277],[3298,3299],[3393,3395],[3405,3405],[3530,3530],[3538,3540],[3542,3542],[3633,3633],[3636,3642],[3655,3662],[3761,3761],[3764,3769],[3771,3772],[3784,3789],[3864,3865],[3893,3893],[3895,3895],[3897,3897],[3953,3966],[3968,3972],[3974,3975],[3984,3991],[3993,4028],[4038,4038],[4141,4144],[4146,4146],[4150,4151],[4153,4153],[4184,4185],[4448,4607],[4959,4959],[5906,5908],[5938,5940],[5970,5971],[6002,6003],[6068,6069],[6071,6077],[6086,6086],[6089,6099],[6109,6109],[6155,6157],[6313,6313],[6432,6434],[6439,6440],[6450,6450],[6457,6459],[6679,6680],[6912,6915],[6964,6964],[6966,6970],[6972,6972],[6978,6978],[7019,7027],[7616,7626],[7678,7679],[8203,8207],[8234,8238],[8288,8291],[8298,8303],[8400,8431],[12330,12335],[12441,12442],[43014,43014],[43019,43019],[43045,43046],[64286,64286],[65024,65039],[65056,65059],[65279,65279],[65529,65531]],h=[[68097,68099],[68101,68102],[68108,68111],[68152,68154],[68159,68159],[119143,119145],[119155,119170],[119173,119179],[119210,119213],[119362,119364],[917505,917505],[917536,917631],[917760,917999]];let d;o.UnicodeV6=class{constructor(){if(this.version="6",!d){d=new Uint8Array(65536),d.fill(1),d[0]=0,d.fill(0,1,32),d.fill(0,127,160),d.fill(2,4352,4448),d[9001]=2,d[9002]=2,d.fill(2,11904,42192),d[12351]=1,d.fill(2,44032,55204),d.fill(2,63744,64256),d.fill(2,65040,65050),d.fill(2,65072,65136),d.fill(2,65280,65377),d.fill(2,65504,65511);for(let u=0;u<a.length;++u)d.fill(0,a[u][0],a[u][1]+1)}}wcwidth(u){return u<32?0:u<127?1:u<65536?d[u]:function(g,b){let y,m=0,c=b.length-1;if(g<b[0][0]||g>b[c][1])return!1;for(;c>=m;)if(y=m+c>>1,g>b[y][1])m=y+1;else{if(!(g<b[y][0]))return!0;c=y-1}return!1}(u,h)?0:u>=131072&&u<=196605||u>=196608&&u<=262141?2:1}}},5981:(l,o,a)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.WriteBuffer=void 0;const h=a(8460),d=a(844);class u extends d.Disposable{constructor(b){super(),this._action=b,this._writeBuffer=[],this._callbacks=[],this._pendingData=0,this._bufferOffset=0,this._isSyncWriting=!1,this._syncCalls=0,this._didUserInput=!1,this._onWriteParsed=this.register(new h.EventEmitter),this.onWriteParsed=this._onWriteParsed.event}handleUserInput(){this._didUserInput=!0}writeSync(b,y){if(y!==void 0&&this._syncCalls>y)return void(this._syncCalls=0);if(this._pendingData+=b.length,this._writeBuffer.push(b),this._callbacks.push(void 0),this._syncCalls++,this._isSyncWriting)return;let m;for(this._isSyncWriting=!0;m=this._writeBuffer.shift();){this._action(m);const c=this._callbacks.shift();c&&c()}this._pendingData=0,this._bufferOffset=2147483647,this._isSyncWriting=!1,this._syncCalls=0}write(b,y){if(this._pendingData>5e7)throw new Error("write data discarded, use flow control to avoid losing data");if(!this._writeBuffer.length){if(this._bufferOffset=0,this._didUserInput)return this._didUserInput=!1,this._pendingData+=b.length,this._writeBuffer.push(b),this._callbacks.push(y),void this._innerWrite();setTimeout(()=>this._innerWrite())}this._pendingData+=b.length,this._writeBuffer.push(b),this._callbacks.push(y)}_innerWrite(b=0,y=!0){const m=b||Date.now();for(;this._writeBuffer.length>this._bufferOffset;){const c=this._writeBuffer[this._bufferOffset],f=this._action(c,y);if(f){const p=v=>Date.now()-m>=12?setTimeout(()=>this._innerWrite(0,v)):this._innerWrite(m,v);return void f.catch(v=>(queueMicrotask(()=>{throw v}),Promise.resolve(!1))).then(p)}const _=this._callbacks[this._bufferOffset];if(_&&_(),this._bufferOffset++,this._pendingData-=c.length,Date.now()-m>=12)break}this._writeBuffer.length>this._bufferOffset?(this._bufferOffset>50&&(this._writeBuffer=this._writeBuffer.slice(this._bufferOffset),this._callbacks=this._callbacks.slice(this._bufferOffset),this._bufferOffset=0),setTimeout(()=>this._innerWrite())):(this._writeBuffer.length=0,this._callbacks.length=0,this._pendingData=0,this._bufferOffset=0),this._onWriteParsed.fire()}}o.WriteBuffer=u},5941:(l,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.toRgbString=o.parseColor=void 0;const a=/^([\da-f])\/([\da-f])\/([\da-f])$|^([\da-f]{2})\/([\da-f]{2})\/([\da-f]{2})$|^([\da-f]{3})\/([\da-f]{3})\/([\da-f]{3})$|^([\da-f]{4})\/([\da-f]{4})\/([\da-f]{4})$/,h=/^[\da-f]+$/;function d(u,g){const b=u.toString(16),y=b.length<2?"0"+b:b;switch(g){case 4:return b[0];case 8:return y;case 12:return(y+y).slice(0,3);default:return y+y}}o.parseColor=function(u){if(!u)return;let g=u.toLowerCase();if(g.indexOf("rgb:")===0){g=g.slice(4);const b=a.exec(g);if(b){const y=b[1]?15:b[4]?255:b[7]?4095:65535;return[Math.round(parseInt(b[1]||b[4]||b[7]||b[10],16)/y*255),Math.round(parseInt(b[2]||b[5]||b[8]||b[11],16)/y*255),Math.round(parseInt(b[3]||b[6]||b[9]||b[12],16)/y*255)]}}else if(g.indexOf("#")===0&&(g=g.slice(1),h.exec(g)&&[3,6,9,12].includes(g.length))){const b=g.length/3,y=[0,0,0];for(let m=0;m<3;++m){const c=parseInt(g.slice(b*m,b*m+b),16);y[m]=b===1?c<<4:b===2?c:b===3?c>>4:c>>8}return y}},o.toRgbString=function(u,g=16){const[b,y,m]=u;return`rgb:${d(b,g)}/${d(y,g)}/${d(m,g)}`}},5770:(l,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.PAYLOAD_LIMIT=void 0,o.PAYLOAD_LIMIT=1e7},6351:(l,o,a)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.DcsHandler=o.DcsParser=void 0;const h=a(482),d=a(8742),u=a(5770),g=[];o.DcsParser=class{constructor(){this._handlers=Object.create(null),this._active=g,this._ident=0,this._handlerFb=()=>{},this._stack={paused:!1,loopPosition:0,fallThrough:!1}}dispose(){this._handlers=Object.create(null),this._handlerFb=()=>{},this._active=g}registerHandler(y,m){this._handlers[y]===void 0&&(this._handlers[y]=[]);const c=this._handlers[y];return c.push(m),{dispose:()=>{const f=c.indexOf(m);f!==-1&&c.splice(f,1)}}}clearHandler(y){this._handlers[y]&&delete this._handlers[y]}setHandlerFallback(y){this._handlerFb=y}reset(){if(this._active.length)for(let y=this._stack.paused?this._stack.loopPosition-1:this._active.length-1;y>=0;--y)this._active[y].unhook(!1);this._stack.paused=!1,this._active=g,this._ident=0}hook(y,m){if(this.reset(),this._ident=y,this._active=this._handlers[y]||g,this._active.length)for(let c=this._active.length-1;c>=0;c--)this._active[c].hook(m);else this._handlerFb(this._ident,"HOOK",m)}put(y,m,c){if(this._active.length)for(let f=this._active.length-1;f>=0;f--)this._active[f].put(y,m,c);else this._handlerFb(this._ident,"PUT",(0,h.utf32ToString)(y,m,c))}unhook(y,m=!0){if(this._active.length){let c=!1,f=this._active.length-1,_=!1;if(this._stack.paused&&(f=this._stack.loopPosition-1,c=m,_=this._stack.fallThrough,this._stack.paused=!1),!_&&c===!1){for(;f>=0&&(c=this._active[f].unhook(y),c!==!0);f--)if(c instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=f,this._stack.fallThrough=!1,c;f--}for(;f>=0;f--)if(c=this._active[f].unhook(!1),c instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=f,this._stack.fallThrough=!0,c}else this._handlerFb(this._ident,"UNHOOK",y);this._active=g,this._ident=0}};const b=new d.Params;b.addParam(0),o.DcsHandler=class{constructor(y){this._handler=y,this._data="",this._params=b,this._hitLimit=!1}hook(y){this._params=y.length>1||y.params[0]?y.clone():b,this._data="",this._hitLimit=!1}put(y,m,c){this._hitLimit||(this._data+=(0,h.utf32ToString)(y,m,c),this._data.length>u.PAYLOAD_LIMIT&&(this._data="",this._hitLimit=!0))}unhook(y){let m=!1;if(this._hitLimit)m=!1;else if(y&&(m=this._handler(this._data,this._params),m instanceof Promise))return m.then(c=>(this._params=b,this._data="",this._hitLimit=!1,c));return this._params=b,this._data="",this._hitLimit=!1,m}}},2015:(l,o,a)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.EscapeSequenceParser=o.VT500_TRANSITION_TABLE=o.TransitionTable=void 0;const h=a(844),d=a(8742),u=a(6242),g=a(6351);class b{constructor(f){this.table=new Uint8Array(f)}setDefault(f,_){this.table.fill(f<<4|_)}add(f,_,p,v){this.table[_<<8|f]=p<<4|v}addMany(f,_,p,v){for(let S=0;S<f.length;S++)this.table[_<<8|f[S]]=p<<4|v}}o.TransitionTable=b;const y=160;o.VT500_TRANSITION_TABLE=function(){const c=new b(4095),f=Array.apply(null,Array(256)).map((k,C)=>C),_=(k,C)=>f.slice(k,C),p=_(32,127),v=_(0,24);v.push(25),v.push.apply(v,_(28,32));const S=_(0,14);let L;for(L in c.setDefault(1,0),c.addMany(p,0,2,0),S)c.addMany([24,26,153,154],L,3,0),c.addMany(_(128,144),L,3,0),c.addMany(_(144,152),L,3,0),c.add(156,L,0,0),c.add(27,L,11,1),c.add(157,L,4,8),c.addMany([152,158,159],L,0,7),c.add(155,L,11,3),c.add(144,L,11,9);return c.addMany(v,0,3,0),c.addMany(v,1,3,1),c.add(127,1,0,1),c.addMany(v,8,0,8),c.addMany(v,3,3,3),c.add(127,3,0,3),c.addMany(v,4,3,4),c.add(127,4,0,4),c.addMany(v,6,3,6),c.addMany(v,5,3,5),c.add(127,5,0,5),c.addMany(v,2,3,2),c.add(127,2,0,2),c.add(93,1,4,8),c.addMany(p,8,5,8),c.add(127,8,5,8),c.addMany([156,27,24,26,7],8,6,0),c.addMany(_(28,32),8,0,8),c.addMany([88,94,95],1,0,7),c.addMany(p,7,0,7),c.addMany(v,7,0,7),c.add(156,7,0,0),c.add(127,7,0,7),c.add(91,1,11,3),c.addMany(_(64,127),3,7,0),c.addMany(_(48,60),3,8,4),c.addMany([60,61,62,63],3,9,4),c.addMany(_(48,60),4,8,4),c.addMany(_(64,127),4,7,0),c.addMany([60,61,62,63],4,0,6),c.addMany(_(32,64),6,0,6),c.add(127,6,0,6),c.addMany(_(64,127),6,0,0),c.addMany(_(32,48),3,9,5),c.addMany(_(32,48),5,9,5),c.addMany(_(48,64),5,0,6),c.addMany(_(64,127),5,7,0),c.addMany(_(32,48),4,9,5),c.addMany(_(32,48),1,9,2),c.addMany(_(32,48),2,9,2),c.addMany(_(48,127),2,10,0),c.addMany(_(48,80),1,10,0),c.addMany(_(81,88),1,10,0),c.addMany([89,90,92],1,10,0),c.addMany(_(96,127),1,10,0),c.add(80,1,11,9),c.addMany(v,9,0,9),c.add(127,9,0,9),c.addMany(_(28,32),9,0,9),c.addMany(_(32,48),9,9,12),c.addMany(_(48,60),9,8,10),c.addMany([60,61,62,63],9,9,10),c.addMany(v,11,0,11),c.addMany(_(32,128),11,0,11),c.addMany(_(28,32),11,0,11),c.addMany(v,10,0,10),c.add(127,10,0,10),c.addMany(_(28,32),10,0,10),c.addMany(_(48,60),10,8,10),c.addMany([60,61,62,63],10,0,11),c.addMany(_(32,48),10,9,12),c.addMany(v,12,0,12),c.add(127,12,0,12),c.addMany(_(28,32),12,0,12),c.addMany(_(32,48),12,9,12),c.addMany(_(48,64),12,0,11),c.addMany(_(64,127),12,12,13),c.addMany(_(64,127),10,12,13),c.addMany(_(64,127),9,12,13),c.addMany(v,13,13,13),c.addMany(p,13,13,13),c.add(127,13,0,13),c.addMany([27,156,24,26],13,14,0),c.add(y,0,2,0),c.add(y,8,5,8),c.add(y,6,0,6),c.add(y,11,0,11),c.add(y,13,13,13),c}();class m extends h.Disposable{constructor(f=o.VT500_TRANSITION_TABLE){super(),this._transitions=f,this._parseStack={state:0,handlers:[],handlerPos:0,transition:0,chunkPos:0},this.initialState=0,this.currentState=this.initialState,this._params=new d.Params,this._params.addParam(0),this._collect=0,this.precedingCodepoint=0,this._printHandlerFb=(_,p,v)=>{},this._executeHandlerFb=_=>{},this._csiHandlerFb=(_,p)=>{},this._escHandlerFb=_=>{},this._errorHandlerFb=_=>_,this._printHandler=this._printHandlerFb,this._executeHandlers=Object.create(null),this._csiHandlers=Object.create(null),this._escHandlers=Object.create(null),this.register((0,h.toDisposable)(()=>{this._csiHandlers=Object.create(null),this._executeHandlers=Object.create(null),this._escHandlers=Object.create(null)})),this._oscParser=this.register(new u.OscParser),this._dcsParser=this.register(new g.DcsParser),this._errorHandler=this._errorHandlerFb,this.registerEscHandler({final:"\\"},()=>!0)}_identifier(f,_=[64,126]){let p=0;if(f.prefix){if(f.prefix.length>1)throw new Error("only one byte as prefix supported");if(p=f.prefix.charCodeAt(0),p&&60>p||p>63)throw new Error("prefix must be in range 0x3c .. 0x3f")}if(f.intermediates){if(f.intermediates.length>2)throw new Error("only two bytes as intermediates are supported");for(let S=0;S<f.intermediates.length;++S){const L=f.intermediates.charCodeAt(S);if(32>L||L>47)throw new Error("intermediate must be in range 0x20 .. 0x2f");p<<=8,p|=L}}if(f.final.length!==1)throw new Error("final must be a single byte");const v=f.final.charCodeAt(0);if(_[0]>v||v>_[1])throw new Error(`final must be in range ${_[0]} .. ${_[1]}`);return p<<=8,p|=v,p}identToString(f){const _=[];for(;f;)_.push(String.fromCharCode(255&f)),f>>=8;return _.reverse().join("")}setPrintHandler(f){this._printHandler=f}clearPrintHandler(){this._printHandler=this._printHandlerFb}registerEscHandler(f,_){const p=this._identifier(f,[48,126]);this._escHandlers[p]===void 0&&(this._escHandlers[p]=[]);const v=this._escHandlers[p];return v.push(_),{dispose:()=>{const S=v.indexOf(_);S!==-1&&v.splice(S,1)}}}clearEscHandler(f){this._escHandlers[this._identifier(f,[48,126])]&&delete this._escHandlers[this._identifier(f,[48,126])]}setEscHandlerFallback(f){this._escHandlerFb=f}setExecuteHandler(f,_){this._executeHandlers[f.charCodeAt(0)]=_}clearExecuteHandler(f){this._executeHandlers[f.charCodeAt(0)]&&delete this._executeHandlers[f.charCodeAt(0)]}setExecuteHandlerFallback(f){this._executeHandlerFb=f}registerCsiHandler(f,_){const p=this._identifier(f);this._csiHandlers[p]===void 0&&(this._csiHandlers[p]=[]);const v=this._csiHandlers[p];return v.push(_),{dispose:()=>{const S=v.indexOf(_);S!==-1&&v.splice(S,1)}}}clearCsiHandler(f){this._csiHandlers[this._identifier(f)]&&delete this._csiHandlers[this._identifier(f)]}setCsiHandlerFallback(f){this._csiHandlerFb=f}registerDcsHandler(f,_){return this._dcsParser.registerHandler(this._identifier(f),_)}clearDcsHandler(f){this._dcsParser.clearHandler(this._identifier(f))}setDcsHandlerFallback(f){this._dcsParser.setHandlerFallback(f)}registerOscHandler(f,_){return this._oscParser.registerHandler(f,_)}clearOscHandler(f){this._oscParser.clearHandler(f)}setOscHandlerFallback(f){this._oscParser.setHandlerFallback(f)}setErrorHandler(f){this._errorHandler=f}clearErrorHandler(){this._errorHandler=this._errorHandlerFb}reset(){this.currentState=this.initialState,this._oscParser.reset(),this._dcsParser.reset(),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingCodepoint=0,this._parseStack.state!==0&&(this._parseStack.state=2,this._parseStack.handlers=[])}_preserveStack(f,_,p,v,S){this._parseStack.state=f,this._parseStack.handlers=_,this._parseStack.handlerPos=p,this._parseStack.transition=v,this._parseStack.chunkPos=S}parse(f,_,p){let v,S=0,L=0,k=0;if(this._parseStack.state)if(this._parseStack.state===2)this._parseStack.state=0,k=this._parseStack.chunkPos+1;else{if(p===void 0||this._parseStack.state===1)throw this._parseStack.state=1,new Error("improper continuation due to previous async handler, giving up parsing");const C=this._parseStack.handlers;let w=this._parseStack.handlerPos-1;switch(this._parseStack.state){case 3:if(p===!1&&w>-1){for(;w>=0&&(v=C[w](this._params),v!==!0);w--)if(v instanceof Promise)return this._parseStack.handlerPos=w,v}this._parseStack.handlers=[];break;case 4:if(p===!1&&w>-1){for(;w>=0&&(v=C[w](),v!==!0);w--)if(v instanceof Promise)return this._parseStack.handlerPos=w,v}this._parseStack.handlers=[];break;case 6:if(S=f[this._parseStack.chunkPos],v=this._dcsParser.unhook(S!==24&&S!==26,p),v)return v;S===27&&(this._parseStack.transition|=1),this._params.reset(),this._params.addParam(0),this._collect=0;break;case 5:if(S=f[this._parseStack.chunkPos],v=this._oscParser.end(S!==24&&S!==26,p),v)return v;S===27&&(this._parseStack.transition|=1),this._params.reset(),this._params.addParam(0),this._collect=0}this._parseStack.state=0,k=this._parseStack.chunkPos+1,this.precedingCodepoint=0,this.currentState=15&this._parseStack.transition}for(let C=k;C<_;++C){switch(S=f[C],L=this._transitions.table[this.currentState<<8|(S<160?S:y)],L>>4){case 2:for(let T=C+1;;++T){if(T>=_||(S=f[T])<32||S>126&&S<y){this._printHandler(f,C,T),C=T-1;break}if(++T>=_||(S=f[T])<32||S>126&&S<y){this._printHandler(f,C,T),C=T-1;break}if(++T>=_||(S=f[T])<32||S>126&&S<y){this._printHandler(f,C,T),C=T-1;break}if(++T>=_||(S=f[T])<32||S>126&&S<y){this._printHandler(f,C,T),C=T-1;break}}break;case 3:this._executeHandlers[S]?this._executeHandlers[S]():this._executeHandlerFb(S),this.precedingCodepoint=0;break;case 0:break;case 1:if(this._errorHandler({position:C,code:S,currentState:this.currentState,collect:this._collect,params:this._params,abort:!1}).abort)return;break;case 7:const w=this._csiHandlers[this._collect<<8|S];let E=w?w.length-1:-1;for(;E>=0&&(v=w[E](this._params),v!==!0);E--)if(v instanceof Promise)return this._preserveStack(3,w,E,L,C),v;E<0&&this._csiHandlerFb(this._collect<<8|S,this._params),this.precedingCodepoint=0;break;case 8:do switch(S){case 59:this._params.addParam(0);break;case 58:this._params.addSubParam(-1);break;default:this._params.addDigit(S-48)}while(++C<_&&(S=f[C])>47&&S<60);C--;break;case 9:this._collect<<=8,this._collect|=S;break;case 10:const R=this._escHandlers[this._collect<<8|S];let O=R?R.length-1:-1;for(;O>=0&&(v=R[O](),v!==!0);O--)if(v instanceof Promise)return this._preserveStack(4,R,O,L,C),v;O<0&&this._escHandlerFb(this._collect<<8|S),this.precedingCodepoint=0;break;case 11:this._params.reset(),this._params.addParam(0),this._collect=0;break;case 12:this._dcsParser.hook(this._collect<<8|S,this._params);break;case 13:for(let T=C+1;;++T)if(T>=_||(S=f[T])===24||S===26||S===27||S>127&&S<y){this._dcsParser.put(f,C,T),C=T-1;break}break;case 14:if(v=this._dcsParser.unhook(S!==24&&S!==26),v)return this._preserveStack(6,[],0,L,C),v;S===27&&(L|=1),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingCodepoint=0;break;case 4:this._oscParser.start();break;case 5:for(let T=C+1;;T++)if(T>=_||(S=f[T])<32||S>127&&S<y){this._oscParser.put(f,C,T),C=T-1;break}break;case 6:if(v=this._oscParser.end(S!==24&&S!==26),v)return this._preserveStack(5,[],0,L,C),v;S===27&&(L|=1),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingCodepoint=0}this.currentState=15&L}}}o.EscapeSequenceParser=m},6242:(l,o,a)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.OscHandler=o.OscParser=void 0;const h=a(5770),d=a(482),u=[];o.OscParser=class{constructor(){this._state=0,this._active=u,this._id=-1,this._handlers=Object.create(null),this._handlerFb=()=>{},this._stack={paused:!1,loopPosition:0,fallThrough:!1}}registerHandler(g,b){this._handlers[g]===void 0&&(this._handlers[g]=[]);const y=this._handlers[g];return y.push(b),{dispose:()=>{const m=y.indexOf(b);m!==-1&&y.splice(m,1)}}}clearHandler(g){this._handlers[g]&&delete this._handlers[g]}setHandlerFallback(g){this._handlerFb=g}dispose(){this._handlers=Object.create(null),this._handlerFb=()=>{},this._active=u}reset(){if(this._state===2)for(let g=this._stack.paused?this._stack.loopPosition-1:this._active.length-1;g>=0;--g)this._active[g].end(!1);this._stack.paused=!1,this._active=u,this._id=-1,this._state=0}_start(){if(this._active=this._handlers[this._id]||u,this._active.length)for(let g=this._active.length-1;g>=0;g--)this._active[g].start();else this._handlerFb(this._id,"START")}_put(g,b,y){if(this._active.length)for(let m=this._active.length-1;m>=0;m--)this._active[m].put(g,b,y);else this._handlerFb(this._id,"PUT",(0,d.utf32ToString)(g,b,y))}start(){this.reset(),this._state=1}put(g,b,y){if(this._state!==3){if(this._state===1)for(;b<y;){const m=g[b++];if(m===59){this._state=2,this._start();break}if(m<48||57<m)return void(this._state=3);this._id===-1&&(this._id=0),this._id=10*this._id+m-48}this._state===2&&y-b>0&&this._put(g,b,y)}}end(g,b=!0){if(this._state!==0){if(this._state!==3)if(this._state===1&&this._start(),this._active.length){let y=!1,m=this._active.length-1,c=!1;if(this._stack.paused&&(m=this._stack.loopPosition-1,y=b,c=this._stack.fallThrough,this._stack.paused=!1),!c&&y===!1){for(;m>=0&&(y=this._active[m].end(g),y!==!0);m--)if(y instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=m,this._stack.fallThrough=!1,y;m--}for(;m>=0;m--)if(y=this._active[m].end(!1),y instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=m,this._stack.fallThrough=!0,y}else this._handlerFb(this._id,"END",g);this._active=u,this._id=-1,this._state=0}}},o.OscHandler=class{constructor(g){this._handler=g,this._data="",this._hitLimit=!1}start(){this._data="",this._hitLimit=!1}put(g,b,y){this._hitLimit||(this._data+=(0,d.utf32ToString)(g,b,y),this._data.length>h.PAYLOAD_LIMIT&&(this._data="",this._hitLimit=!0))}end(g){let b=!1;if(this._hitLimit)b=!1;else if(g&&(b=this._handler(this._data),b instanceof Promise))return b.then(y=>(this._data="",this._hitLimit=!1,y));return this._data="",this._hitLimit=!1,b}}},8742:(l,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.Params=void 0;const a=2147483647;class h{static fromArray(u){const g=new h;if(!u.length)return g;for(let b=Array.isArray(u[0])?1:0;b<u.length;++b){const y=u[b];if(Array.isArray(y))for(let m=0;m<y.length;++m)g.addSubParam(y[m]);else g.addParam(y)}return g}constructor(u=32,g=32){if(this.maxLength=u,this.maxSubParamsLength=g,g>256)throw new Error("maxSubParamsLength must not be greater than 256");this.params=new Int32Array(u),this.length=0,this._subParams=new Int32Array(g),this._subParamsLength=0,this._subParamsIdx=new Uint16Array(u),this._rejectDigits=!1,this._rejectSubDigits=!1,this._digitIsSub=!1}clone(){const u=new h(this.maxLength,this.maxSubParamsLength);return u.params.set(this.params),u.length=this.length,u._subParams.set(this._subParams),u._subParamsLength=this._subParamsLength,u._subParamsIdx.set(this._subParamsIdx),u._rejectDigits=this._rejectDigits,u._rejectSubDigits=this._rejectSubDigits,u._digitIsSub=this._digitIsSub,u}toArray(){const u=[];for(let g=0;g<this.length;++g){u.push(this.params[g]);const b=this._subParamsIdx[g]>>8,y=255&this._subParamsIdx[g];y-b>0&&u.push(Array.prototype.slice.call(this._subParams,b,y))}return u}reset(){this.length=0,this._subParamsLength=0,this._rejectDigits=!1,this._rejectSubDigits=!1,this._digitIsSub=!1}addParam(u){if(this._digitIsSub=!1,this.length>=this.maxLength)this._rejectDigits=!0;else{if(u<-1)throw new Error("values lesser than -1 are not allowed");this._subParamsIdx[this.length]=this._subParamsLength<<8|this._subParamsLength,this.params[this.length++]=u>a?a:u}}addSubParam(u){if(this._digitIsSub=!0,this.length)if(this._rejectDigits||this._subParamsLength>=this.maxSubParamsLength)this._rejectSubDigits=!0;else{if(u<-1)throw new Error("values lesser than -1 are not allowed");this._subParams[this._subParamsLength++]=u>a?a:u,this._subParamsIdx[this.length-1]++}}hasSubParams(u){return(255&this._subParamsIdx[u])-(this._subParamsIdx[u]>>8)>0}getSubParams(u){const g=this._subParamsIdx[u]>>8,b=255&this._subParamsIdx[u];return b-g>0?this._subParams.subarray(g,b):null}getSubParamsAll(){const u={};for(let g=0;g<this.length;++g){const b=this._subParamsIdx[g]>>8,y=255&this._subParamsIdx[g];y-b>0&&(u[g]=this._subParams.slice(b,y))}return u}addDigit(u){let g;if(this._rejectDigits||!(g=this._digitIsSub?this._subParamsLength:this.length)||this._digitIsSub&&this._rejectSubDigits)return;const b=this._digitIsSub?this._subParams:this.params,y=b[g-1];b[g-1]=~y?Math.min(10*y+u,a):u}}o.Params=h},5741:(l,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.AddonManager=void 0,o.AddonManager=class{constructor(){this._addons=[]}dispose(){for(let a=this._addons.length-1;a>=0;a--)this._addons[a].instance.dispose()}loadAddon(a,h){const d={instance:h,dispose:h.dispose,isDisposed:!1};this._addons.push(d),h.dispose=()=>this._wrappedAddonDispose(d),h.activate(a)}_wrappedAddonDispose(a){if(a.isDisposed)return;let h=-1;for(let d=0;d<this._addons.length;d++)if(this._addons[d]===a){h=d;break}if(h===-1)throw new Error("Could not dispose an addon that has not been loaded");a.isDisposed=!0,a.dispose.apply(a.instance),this._addons.splice(h,1)}}},8771:(l,o,a)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.BufferApiView=void 0;const h=a(3785),d=a(511);o.BufferApiView=class{constructor(u,g){this._buffer=u,this.type=g}init(u){return this._buffer=u,this}get cursorY(){return this._buffer.y}get cursorX(){return this._buffer.x}get viewportY(){return this._buffer.ydisp}get baseY(){return this._buffer.ybase}get length(){return this._buffer.lines.length}getLine(u){const g=this._buffer.lines.get(u);if(g)return new h.BufferLineApiView(g)}getNullCell(){return new d.CellData}}},3785:(l,o,a)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.BufferLineApiView=void 0;const h=a(511);o.BufferLineApiView=class{constructor(d){this._line=d}get isWrapped(){return this._line.isWrapped}get length(){return this._line.length}getCell(d,u){if(!(d<0||d>=this._line.length))return u?(this._line.loadCell(d,u),u):this._line.loadCell(d,new h.CellData)}translateToString(d,u,g){return this._line.translateToString(d,u,g)}}},8285:(l,o,a)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.BufferNamespaceApi=void 0;const h=a(8771),d=a(8460),u=a(844);class g extends u.Disposable{constructor(y){super(),this._core=y,this._onBufferChange=this.register(new d.EventEmitter),this.onBufferChange=this._onBufferChange.event,this._normal=new h.BufferApiView(this._core.buffers.normal,"normal"),this._alternate=new h.BufferApiView(this._core.buffers.alt,"alternate"),this._core.buffers.onBufferActivate(()=>this._onBufferChange.fire(this.active))}get active(){if(this._core.buffers.active===this._core.buffers.normal)return this.normal;if(this._core.buffers.active===this._core.buffers.alt)return this.alternate;throw new Error("Active buffer is neither normal nor alternate")}get normal(){return this._normal.init(this._core.buffers.normal)}get alternate(){return this._alternate.init(this._core.buffers.alt)}}o.BufferNamespaceApi=g},7975:(l,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.ParserApi=void 0,o.ParserApi=class{constructor(a){this._core=a}registerCsiHandler(a,h){return this._core.registerCsiHandler(a,d=>h(d.toArray()))}addCsiHandler(a,h){return this.registerCsiHandler(a,h)}registerDcsHandler(a,h){return this._core.registerDcsHandler(a,(d,u)=>h(d,u.toArray()))}addDcsHandler(a,h){return this.registerDcsHandler(a,h)}registerEscHandler(a,h){return this._core.registerEscHandler(a,h)}addEscHandler(a,h){return this.registerEscHandler(a,h)}registerOscHandler(a,h){return this._core.registerOscHandler(a,h)}addOscHandler(a,h){return this.registerOscHandler(a,h)}}},7090:(l,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.UnicodeApi=void 0,o.UnicodeApi=class{constructor(a){this._core=a}register(a){this._core.unicodeService.register(a)}get versions(){return this._core.unicodeService.versions}get activeVersion(){return this._core.unicodeService.activeVersion}set activeVersion(a){this._core.unicodeService.activeVersion=a}}},744:function(l,o,a){var h=this&&this.__decorate||function(c,f,_,p){var v,S=arguments.length,L=S<3?f:p===null?p=Object.getOwnPropertyDescriptor(f,_):p;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")L=Reflect.decorate(c,f,_,p);else for(var k=c.length-1;k>=0;k--)(v=c[k])&&(L=(S<3?v(L):S>3?v(f,_,L):v(f,_))||L);return S>3&&L&&Object.defineProperty(f,_,L),L},d=this&&this.__param||function(c,f){return function(_,p){f(_,p,c)}};Object.defineProperty(o,"__esModule",{value:!0}),o.BufferService=o.MINIMUM_ROWS=o.MINIMUM_COLS=void 0;const u=a(8460),g=a(844),b=a(5295),y=a(2585);o.MINIMUM_COLS=2,o.MINIMUM_ROWS=1;let m=o.BufferService=class extends g.Disposable{get buffer(){return this.buffers.active}constructor(c){super(),this.isUserScrolling=!1,this._onResize=this.register(new u.EventEmitter),this.onResize=this._onResize.event,this._onScroll=this.register(new u.EventEmitter),this.onScroll=this._onScroll.event,this.cols=Math.max(c.rawOptions.cols||0,o.MINIMUM_COLS),this.rows=Math.max(c.rawOptions.rows||0,o.MINIMUM_ROWS),this.buffers=this.register(new b.BufferSet(c,this))}resize(c,f){this.cols=c,this.rows=f,this.buffers.resize(c,f),this._onResize.fire({cols:c,rows:f})}reset(){this.buffers.reset(),this.isUserScrolling=!1}scroll(c,f=!1){const _=this.buffer;let p;p=this._cachedBlankLine,p&&p.length===this.cols&&p.getFg(0)===c.fg&&p.getBg(0)===c.bg||(p=_.getBlankLine(c,f),this._cachedBlankLine=p),p.isWrapped=f;const v=_.ybase+_.scrollTop,S=_.ybase+_.scrollBottom;if(_.scrollTop===0){const L=_.lines.isFull;S===_.lines.length-1?L?_.lines.recycle().copyFrom(p):_.lines.push(p.clone()):_.lines.splice(S+1,0,p.clone()),L?this.isUserScrolling&&(_.ydisp=Math.max(_.ydisp-1,0)):(_.ybase++,this.isUserScrolling||_.ydisp++)}else{const L=S-v+1;_.lines.shiftElements(v+1,L-1,-1),_.lines.set(S,p.clone())}this.isUserScrolling||(_.ydisp=_.ybase),this._onScroll.fire(_.ydisp)}scrollLines(c,f,_){const p=this.buffer;if(c<0){if(p.ydisp===0)return;this.isUserScrolling=!0}else c+p.ydisp>=p.ybase&&(this.isUserScrolling=!1);const v=p.ydisp;p.ydisp=Math.max(Math.min(p.ydisp+c,p.ybase),0),v!==p.ydisp&&(f||this._onScroll.fire(p.ydisp))}};o.BufferService=m=h([d(0,y.IOptionsService)],m)},7994:(l,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.CharsetService=void 0,o.CharsetService=class{constructor(){this.glevel=0,this._charsets=[]}reset(){this.charset=void 0,this._charsets=[],this.glevel=0}setgLevel(a){this.glevel=a,this.charset=this._charsets[a]}setgCharset(a,h){this._charsets[a]=h,this.glevel===a&&(this.charset=h)}}},1753:function(l,o,a){var h=this&&this.__decorate||function(p,v,S,L){var k,C=arguments.length,w=C<3?v:L===null?L=Object.getOwnPropertyDescriptor(v,S):L;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")w=Reflect.decorate(p,v,S,L);else for(var E=p.length-1;E>=0;E--)(k=p[E])&&(w=(C<3?k(w):C>3?k(v,S,w):k(v,S))||w);return C>3&&w&&Object.defineProperty(v,S,w),w},d=this&&this.__param||function(p,v){return function(S,L){v(S,L,p)}};Object.defineProperty(o,"__esModule",{value:!0}),o.CoreMouseService=void 0;const u=a(2585),g=a(8460),b=a(844),y={NONE:{events:0,restrict:()=>!1},X10:{events:1,restrict:p=>p.button!==4&&p.action===1&&(p.ctrl=!1,p.alt=!1,p.shift=!1,!0)},VT200:{events:19,restrict:p=>p.action!==32},DRAG:{events:23,restrict:p=>p.action!==32||p.button!==3},ANY:{events:31,restrict:p=>!0}};function m(p,v){let S=(p.ctrl?16:0)|(p.shift?4:0)|(p.alt?8:0);return p.button===4?(S|=64,S|=p.action):(S|=3&p.button,4&p.button&&(S|=64),8&p.button&&(S|=128),p.action===32?S|=32:p.action!==0||v||(S|=3)),S}const c=String.fromCharCode,f={DEFAULT:p=>{const v=[m(p,!1)+32,p.col+32,p.row+32];return v[0]>255||v[1]>255||v[2]>255?"":`\x1B[M${c(v[0])}${c(v[1])}${c(v[2])}`},SGR:p=>{const v=p.action===0&&p.button!==4?"m":"M";return`\x1B[<${m(p,!0)};${p.col};${p.row}${v}`},SGR_PIXELS:p=>{const v=p.action===0&&p.button!==4?"m":"M";return`\x1B[<${m(p,!0)};${p.x};${p.y}${v}`}};let _=o.CoreMouseService=class extends b.Disposable{constructor(p,v){super(),this._bufferService=p,this._coreService=v,this._protocols={},this._encodings={},this._activeProtocol="",this._activeEncoding="",this._lastEvent=null,this._onProtocolChange=this.register(new g.EventEmitter),this.onProtocolChange=this._onProtocolChange.event;for(const S of Object.keys(y))this.addProtocol(S,y[S]);for(const S of Object.keys(f))this.addEncoding(S,f[S]);this.reset()}addProtocol(p,v){this._protocols[p]=v}addEncoding(p,v){this._encodings[p]=v}get activeProtocol(){return this._activeProtocol}get areMouseEventsActive(){return this._protocols[this._activeProtocol].events!==0}set activeProtocol(p){if(!this._protocols[p])throw new Error(`unknown protocol "${p}"`);this._activeProtocol=p,this._onProtocolChange.fire(this._protocols[p].events)}get activeEncoding(){return this._activeEncoding}set activeEncoding(p){if(!this._encodings[p])throw new Error(`unknown encoding "${p}"`);this._activeEncoding=p}reset(){this.activeProtocol="NONE",this.activeEncoding="DEFAULT",this._lastEvent=null}triggerMouseEvent(p){if(p.col<0||p.col>=this._bufferService.cols||p.row<0||p.row>=this._bufferService.rows||p.button===4&&p.action===32||p.button===3&&p.action!==32||p.button!==4&&(p.action===2||p.action===3)||(p.col++,p.row++,p.action===32&&this._lastEvent&&this._equalEvents(this._lastEvent,p,this._activeEncoding==="SGR_PIXELS"))||!this._protocols[this._activeProtocol].restrict(p))return!1;const v=this._encodings[this._activeEncoding](p);return v&&(this._activeEncoding==="DEFAULT"?this._coreService.triggerBinaryEvent(v):this._coreService.triggerDataEvent(v,!0)),this._lastEvent=p,!0}explainEvents(p){return{down:!!(1&p),up:!!(2&p),drag:!!(4&p),move:!!(8&p),wheel:!!(16&p)}}_equalEvents(p,v,S){if(S){if(p.x!==v.x||p.y!==v.y)return!1}else if(p.col!==v.col||p.row!==v.row)return!1;return p.button===v.button&&p.action===v.action&&p.ctrl===v.ctrl&&p.alt===v.alt&&p.shift===v.shift}};o.CoreMouseService=_=h([d(0,u.IBufferService),d(1,u.ICoreService)],_)},6975:function(l,o,a){var h=this&&this.__decorate||function(_,p,v,S){var L,k=arguments.length,C=k<3?p:S===null?S=Object.getOwnPropertyDescriptor(p,v):S;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")C=Reflect.decorate(_,p,v,S);else for(var w=_.length-1;w>=0;w--)(L=_[w])&&(C=(k<3?L(C):k>3?L(p,v,C):L(p,v))||C);return k>3&&C&&Object.defineProperty(p,v,C),C},d=this&&this.__param||function(_,p){return function(v,S){p(v,S,_)}};Object.defineProperty(o,"__esModule",{value:!0}),o.CoreService=void 0;const u=a(1439),g=a(8460),b=a(844),y=a(2585),m=Object.freeze({insertMode:!1}),c=Object.freeze({applicationCursorKeys:!1,applicationKeypad:!1,bracketedPasteMode:!1,origin:!1,reverseWraparound:!1,sendFocus:!1,wraparound:!0});let f=o.CoreService=class extends b.Disposable{constructor(_,p,v){super(),this._bufferService=_,this._logService=p,this._optionsService=v,this.isCursorInitialized=!1,this.isCursorHidden=!1,this._onData=this.register(new g.EventEmitter),this.onData=this._onData.event,this._onUserInput=this.register(new g.EventEmitter),this.onUserInput=this._onUserInput.event,this._onBinary=this.register(new g.EventEmitter),this.onBinary=this._onBinary.event,this._onRequestScrollToBottom=this.register(new g.EventEmitter),this.onRequestScrollToBottom=this._onRequestScrollToBottom.event,this.modes=(0,u.clone)(m),this.decPrivateModes=(0,u.clone)(c)}reset(){this.modes=(0,u.clone)(m),this.decPrivateModes=(0,u.clone)(c)}triggerDataEvent(_,p=!1){if(this._optionsService.rawOptions.disableStdin)return;const v=this._bufferService.buffer;p&&this._optionsService.rawOptions.scrollOnUserInput&&v.ybase!==v.ydisp&&this._onRequestScrollToBottom.fire(),p&&this._onUserInput.fire(),this._logService.debug(`sending data "${_}"`,()=>_.split("").map(S=>S.charCodeAt(0))),this._onData.fire(_)}triggerBinaryEvent(_){this._optionsService.rawOptions.disableStdin||(this._logService.debug(`sending binary "${_}"`,()=>_.split("").map(p=>p.charCodeAt(0))),this._onBinary.fire(_))}};o.CoreService=f=h([d(0,y.IBufferService),d(1,y.ILogService),d(2,y.IOptionsService)],f)},9074:(l,o,a)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.DecorationService=void 0;const h=a(8055),d=a(8460),u=a(844),g=a(6106);let b=0,y=0;class m extends u.Disposable{get decorations(){return this._decorations.values()}constructor(){super(),this._decorations=new g.SortedList(_=>_==null?void 0:_.marker.line),this._onDecorationRegistered=this.register(new d.EventEmitter),this.onDecorationRegistered=this._onDecorationRegistered.event,this._onDecorationRemoved=this.register(new d.EventEmitter),this.onDecorationRemoved=this._onDecorationRemoved.event,this.register((0,u.toDisposable)(()=>this.reset()))}registerDecoration(_){if(_.marker.isDisposed)return;const p=new c(_);if(p){const v=p.marker.onDispose(()=>p.dispose());p.onDispose(()=>{p&&(this._decorations.delete(p)&&this._onDecorationRemoved.fire(p),v.dispose())}),this._decorations.insert(p),this._onDecorationRegistered.fire(p)}return p}reset(){for(const _ of this._decorations.values())_.dispose();this._decorations.clear()}*getDecorationsAtCell(_,p,v){var S,L,k;let C=0,w=0;for(const E of this._decorations.getKeyIterator(p))C=(S=E.options.x)!==null&&S!==void 0?S:0,w=C+((L=E.options.width)!==null&&L!==void 0?L:1),_>=C&&_<w&&(!v||((k=E.options.layer)!==null&&k!==void 0?k:"bottom")===v)&&(yield E)}forEachDecorationAtCell(_,p,v,S){this._decorations.forEachByKey(p,L=>{var k,C,w;b=(k=L.options.x)!==null&&k!==void 0?k:0,y=b+((C=L.options.width)!==null&&C!==void 0?C:1),_>=b&&_<y&&(!v||((w=L.options.layer)!==null&&w!==void 0?w:"bottom")===v)&&S(L)})}}o.DecorationService=m;class c extends u.Disposable{get isDisposed(){return this._isDisposed}get backgroundColorRGB(){return this._cachedBg===null&&(this.options.backgroundColor?this._cachedBg=h.css.toColor(this.options.backgroundColor):this._cachedBg=void 0),this._cachedBg}get foregroundColorRGB(){return this._cachedFg===null&&(this.options.foregroundColor?this._cachedFg=h.css.toColor(this.options.foregroundColor):this._cachedFg=void 0),this._cachedFg}constructor(_){super(),this.options=_,this.onRenderEmitter=this.register(new d.EventEmitter),this.onRender=this.onRenderEmitter.event,this._onDispose=this.register(new d.EventEmitter),this.onDispose=this._onDispose.event,this._cachedBg=null,this._cachedFg=null,this.marker=_.marker,this.options.overviewRulerOptions&&!this.options.overviewRulerOptions.position&&(this.options.overviewRulerOptions.position="full")}dispose(){this._onDispose.fire(),super.dispose()}}},4348:(l,o,a)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.InstantiationService=o.ServiceCollection=void 0;const h=a(2585),d=a(8343);class u{constructor(...b){this._entries=new Map;for(const[y,m]of b)this.set(y,m)}set(b,y){const m=this._entries.get(b);return this._entries.set(b,y),m}forEach(b){for(const[y,m]of this._entries.entries())b(y,m)}has(b){return this._entries.has(b)}get(b){return this._entries.get(b)}}o.ServiceCollection=u,o.InstantiationService=class{constructor(){this._services=new u,this._services.set(h.IInstantiationService,this)}setService(g,b){this._services.set(g,b)}getService(g){return this._services.get(g)}createInstance(g,...b){const y=(0,d.getServiceDependencies)(g).sort((f,_)=>f.index-_.index),m=[];for(const f of y){const _=this._services.get(f.id);if(!_)throw new Error(`[createInstance] ${g.name} depends on UNKNOWN service ${f.id}.`);m.push(_)}const c=y.length>0?y[0].index:b.length;if(b.length!==c)throw new Error(`[createInstance] First service dependency of ${g.name} at position ${c+1} conflicts with ${b.length} static arguments`);return new g(...b,...m)}}},7866:function(l,o,a){var h=this&&this.__decorate||function(c,f,_,p){var v,S=arguments.length,L=S<3?f:p===null?p=Object.getOwnPropertyDescriptor(f,_):p;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")L=Reflect.decorate(c,f,_,p);else for(var k=c.length-1;k>=0;k--)(v=c[k])&&(L=(S<3?v(L):S>3?v(f,_,L):v(f,_))||L);return S>3&&L&&Object.defineProperty(f,_,L),L},d=this&&this.__param||function(c,f){return function(_,p){f(_,p,c)}};Object.defineProperty(o,"__esModule",{value:!0}),o.traceCall=o.setTraceLogger=o.LogService=void 0;const u=a(844),g=a(2585),b={trace:g.LogLevelEnum.TRACE,debug:g.LogLevelEnum.DEBUG,info:g.LogLevelEnum.INFO,warn:g.LogLevelEnum.WARN,error:g.LogLevelEnum.ERROR,off:g.LogLevelEnum.OFF};let y,m=o.LogService=class extends u.Disposable{get logLevel(){return this._logLevel}constructor(c){super(),this._optionsService=c,this._logLevel=g.LogLevelEnum.OFF,this._updateLogLevel(),this.register(this._optionsService.onSpecificOptionChange("logLevel",()=>this._updateLogLevel())),y=this}_updateLogLevel(){this._logLevel=b[this._optionsService.rawOptions.logLevel]}_evalLazyOptionalParams(c){for(let f=0;f<c.length;f++)typeof c[f]=="function"&&(c[f]=c[f]())}_log(c,f,_){this._evalLazyOptionalParams(_),c.call(console,(this._optionsService.options.logger?"":"xterm.js: ")+f,..._)}trace(c,...f){var _,p;this._logLevel<=g.LogLevelEnum.TRACE&&this._log((p=(_=this._optionsService.options.logger)===null||_===void 0?void 0:_.trace.bind(this._optionsService.options.logger))!==null&&p!==void 0?p:console.log,c,f)}debug(c,...f){var _,p;this._logLevel<=g.LogLevelEnum.DEBUG&&this._log((p=(_=this._optionsService.options.logger)===null||_===void 0?void 0:_.debug.bind(this._optionsService.options.logger))!==null&&p!==void 0?p:console.log,c,f)}info(c,...f){var _,p;this._logLevel<=g.LogLevelEnum.INFO&&this._log((p=(_=this._optionsService.options.logger)===null||_===void 0?void 0:_.info.bind(this._optionsService.options.logger))!==null&&p!==void 0?p:console.info,c,f)}warn(c,...f){var _,p;this._logLevel<=g.LogLevelEnum.WARN&&this._log((p=(_=this._optionsService.options.logger)===null||_===void 0?void 0:_.warn.bind(this._optionsService.options.logger))!==null&&p!==void 0?p:console.warn,c,f)}error(c,...f){var _,p;this._logLevel<=g.LogLevelEnum.ERROR&&this._log((p=(_=this._optionsService.options.logger)===null||_===void 0?void 0:_.error.bind(this._optionsService.options.logger))!==null&&p!==void 0?p:console.error,c,f)}};o.LogService=m=h([d(0,g.IOptionsService)],m),o.setTraceLogger=function(c){y=c},o.traceCall=function(c,f,_){if(typeof _.value!="function")throw new Error("not supported");const p=_.value;_.value=function(...v){if(y.logLevel!==g.LogLevelEnum.TRACE)return p.apply(this,v);y.trace(`GlyphRenderer#${p.name}(${v.map(L=>JSON.stringify(L)).join(", ")})`);const S=p.apply(this,v);return y.trace(`GlyphRenderer#${p.name} return`,S),S}}},7302:(l,o,a)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.OptionsService=o.DEFAULT_OPTIONS=void 0;const h=a(8460),d=a(844),u=a(6114);o.DEFAULT_OPTIONS={cols:80,rows:24,cursorBlink:!1,cursorStyle:"block",cursorWidth:1,cursorInactiveStyle:"outline",customGlyphs:!0,drawBoldTextInBrightColors:!0,fastScrollModifier:"alt",fastScrollSensitivity:5,fontFamily:"courier-new, courier, monospace",fontSize:15,fontWeight:"normal",fontWeightBold:"bold",ignoreBracketedPasteMode:!1,lineHeight:1,letterSpacing:0,linkHandler:null,logLevel:"info",logger:null,scrollback:1e3,scrollOnUserInput:!0,scrollSensitivity:1,screenReaderMode:!1,smoothScrollDuration:0,macOptionIsMeta:!1,macOptionClickForcesSelection:!1,minimumContrastRatio:1,disableStdin:!1,allowProposedApi:!1,allowTransparency:!1,tabStopWidth:8,theme:{},rightClickSelectsWord:u.isMac,windowOptions:{},windowsMode:!1,windowsPty:{},wordSeparator:" ()[]{}',\"`",altClickMovesCursor:!0,convertEol:!1,termName:"xterm",cancelEvents:!1,overviewRulerWidth:0};const g=["normal","bold","100","200","300","400","500","600","700","800","900"];class b extends d.Disposable{constructor(m){super(),this._onOptionChange=this.register(new h.EventEmitter),this.onOptionChange=this._onOptionChange.event;const c=Object.assign({},o.DEFAULT_OPTIONS);for(const f in m)if(f in c)try{const _=m[f];c[f]=this._sanitizeAndValidateOption(f,_)}catch(_){console.error(_)}this.rawOptions=c,this.options=Object.assign({},c),this._setupOptions()}onSpecificOptionChange(m,c){return this.onOptionChange(f=>{f===m&&c(this.rawOptions[m])})}onMultipleOptionChange(m,c){return this.onOptionChange(f=>{m.indexOf(f)!==-1&&c()})}_setupOptions(){const m=f=>{if(!(f in o.DEFAULT_OPTIONS))throw new Error(`No option with key "${f}"`);return this.rawOptions[f]},c=(f,_)=>{if(!(f in o.DEFAULT_OPTIONS))throw new Error(`No option with key "${f}"`);_=this._sanitizeAndValidateOption(f,_),this.rawOptions[f]!==_&&(this.rawOptions[f]=_,this._onOptionChange.fire(f))};for(const f in this.rawOptions){const _={get:m.bind(this,f),set:c.bind(this,f)};Object.defineProperty(this.options,f,_)}}_sanitizeAndValidateOption(m,c){switch(m){case"cursorStyle":if(c||(c=o.DEFAULT_OPTIONS[m]),!function(f){return f==="block"||f==="underline"||f==="bar"}(c))throw new Error(`"${c}" is not a valid value for ${m}`);break;case"wordSeparator":c||(c=o.DEFAULT_OPTIONS[m]);break;case"fontWeight":case"fontWeightBold":if(typeof c=="number"&&1<=c&&c<=1e3)break;c=g.includes(c)?c:o.DEFAULT_OPTIONS[m];break;case"cursorWidth":c=Math.floor(c);case"lineHeight":case"tabStopWidth":if(c<1)throw new Error(`${m} cannot be less than 1, value: ${c}`);break;case"minimumContrastRatio":c=Math.max(1,Math.min(21,Math.round(10*c)/10));break;case"scrollback":if((c=Math.min(c,4294967295))<0)throw new Error(`${m} cannot be less than 0, value: ${c}`);break;case"fastScrollSensitivity":case"scrollSensitivity":if(c<=0)throw new Error(`${m} cannot be less than or equal to 0, value: ${c}`);break;case"rows":case"cols":if(!c&&c!==0)throw new Error(`${m} must be numeric, value: ${c}`);break;case"windowsPty":c=c??{}}return c}}o.OptionsService=b},2660:function(l,o,a){var h=this&&this.__decorate||function(b,y,m,c){var f,_=arguments.length,p=_<3?y:c===null?c=Object.getOwnPropertyDescriptor(y,m):c;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")p=Reflect.decorate(b,y,m,c);else for(var v=b.length-1;v>=0;v--)(f=b[v])&&(p=(_<3?f(p):_>3?f(y,m,p):f(y,m))||p);return _>3&&p&&Object.defineProperty(y,m,p),p},d=this&&this.__param||function(b,y){return function(m,c){y(m,c,b)}};Object.defineProperty(o,"__esModule",{value:!0}),o.OscLinkService=void 0;const u=a(2585);let g=o.OscLinkService=class{constructor(b){this._bufferService=b,this._nextId=1,this._entriesWithId=new Map,this._dataByLinkId=new Map}registerLink(b){const y=this._bufferService.buffer;if(b.id===void 0){const v=y.addMarker(y.ybase+y.y),S={data:b,id:this._nextId++,lines:[v]};return v.onDispose(()=>this._removeMarkerFromLink(S,v)),this._dataByLinkId.set(S.id,S),S.id}const m=b,c=this._getEntryIdKey(m),f=this._entriesWithId.get(c);if(f)return this.addLineToLink(f.id,y.ybase+y.y),f.id;const _=y.addMarker(y.ybase+y.y),p={id:this._nextId++,key:this._getEntryIdKey(m),data:m,lines:[_]};return _.onDispose(()=>this._removeMarkerFromLink(p,_)),this._entriesWithId.set(p.key,p),this._dataByLinkId.set(p.id,p),p.id}addLineToLink(b,y){const m=this._dataByLinkId.get(b);if(m&&m.lines.every(c=>c.line!==y)){const c=this._bufferService.buffer.addMarker(y);m.lines.push(c),c.onDispose(()=>this._removeMarkerFromLink(m,c))}}getLinkData(b){var y;return(y=this._dataByLinkId.get(b))===null||y===void 0?void 0:y.data}_getEntryIdKey(b){return`${b.id};;${b.uri}`}_removeMarkerFromLink(b,y){const m=b.lines.indexOf(y);m!==-1&&(b.lines.splice(m,1),b.lines.length===0&&(b.data.id!==void 0&&this._entriesWithId.delete(b.key),this._dataByLinkId.delete(b.id)))}};o.OscLinkService=g=h([d(0,u.IBufferService)],g)},8343:(l,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.createDecorator=o.getServiceDependencies=o.serviceRegistry=void 0;const a="di$target",h="di$dependencies";o.serviceRegistry=new Map,o.getServiceDependencies=function(d){return d[h]||[]},o.createDecorator=function(d){if(o.serviceRegistry.has(d))return o.serviceRegistry.get(d);const u=function(g,b,y){if(arguments.length!==3)throw new Error("@IServiceName-decorator can only be used to decorate a parameter");(function(m,c,f){c[a]===c?c[h].push({id:m,index:f}):(c[h]=[{id:m,index:f}],c[a]=c)})(u,g,y)};return u.toString=()=>d,o.serviceRegistry.set(d,u),u}},2585:(l,o,a)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.IDecorationService=o.IUnicodeService=o.IOscLinkService=o.IOptionsService=o.ILogService=o.LogLevelEnum=o.IInstantiationService=o.ICharsetService=o.ICoreService=o.ICoreMouseService=o.IBufferService=void 0;const h=a(8343);var d;o.IBufferService=(0,h.createDecorator)("BufferService"),o.ICoreMouseService=(0,h.createDecorator)("CoreMouseService"),o.ICoreService=(0,h.createDecorator)("CoreService"),o.ICharsetService=(0,h.createDecorator)("CharsetService"),o.IInstantiationService=(0,h.createDecorator)("InstantiationService"),function(u){u[u.TRACE=0]="TRACE",u[u.DEBUG=1]="DEBUG",u[u.INFO=2]="INFO",u[u.WARN=3]="WARN",u[u.ERROR=4]="ERROR",u[u.OFF=5]="OFF"}(d||(o.LogLevelEnum=d={})),o.ILogService=(0,h.createDecorator)("LogService"),o.IOptionsService=(0,h.createDecorator)("OptionsService"),o.IOscLinkService=(0,h.createDecorator)("OscLinkService"),o.IUnicodeService=(0,h.createDecorator)("UnicodeService"),o.IDecorationService=(0,h.createDecorator)("DecorationService")},1480:(l,o,a)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.UnicodeService=void 0;const h=a(8460),d=a(225);o.UnicodeService=class{constructor(){this._providers=Object.create(null),this._active="",this._onChange=new h.EventEmitter,this.onChange=this._onChange.event;const u=new d.UnicodeV6;this.register(u),this._active=u.version,this._activeProvider=u}dispose(){this._onChange.dispose()}get versions(){return Object.keys(this._providers)}get activeVersion(){return this._active}set activeVersion(u){if(!this._providers[u])throw new Error(`unknown Unicode version "${u}"`);this._active=u,this._activeProvider=this._providers[u],this._onChange.fire(u)}register(u){this._providers[u.version]=u}wcwidth(u){return this._activeProvider.wcwidth(u)}getStringCellWidth(u){let g=0;const b=u.length;for(let y=0;y<b;++y){let m=u.charCodeAt(y);if(55296<=m&&m<=56319){if(++y>=b)return g+this.wcwidth(m);const c=u.charCodeAt(y);56320<=c&&c<=57343?m=1024*(m-55296)+c-56320+65536:g+=this.wcwidth(c)}g+=this.wcwidth(m)}return g}}}},s={};function r(l){var o=s[l];if(o!==void 0)return o.exports;var a=s[l]={exports:{}};return i[l].call(a.exports,a,a.exports,r),a.exports}var n={};return(()=>{var l=n;Object.defineProperty(l,"__esModule",{value:!0}),l.Terminal=void 0;const o=r(9042),a=r(3236),h=r(844),d=r(5741),u=r(8285),g=r(7975),b=r(7090),y=["cols","rows"];class m extends h.Disposable{constructor(f){super(),this._core=this.register(new a.Terminal(f)),this._addonManager=this.register(new d.AddonManager),this._publicOptions=Object.assign({},this._core.options);const _=v=>this._core.options[v],p=(v,S)=>{this._checkReadonlyOptions(v),this._core.options[v]=S};for(const v in this._core.options){const S={get:_.bind(this,v),set:p.bind(this,v)};Object.defineProperty(this._publicOptions,v,S)}}_checkReadonlyOptions(f){if(y.includes(f))throw new Error(`Option "${f}" can only be set in the constructor`)}_checkProposedApi(){if(!this._core.optionsService.rawOptions.allowProposedApi)throw new Error("You must set the allowProposedApi option to true to use proposed API")}get onBell(){return this._core.onBell}get onBinary(){return this._core.onBinary}get onCursorMove(){return this._core.onCursorMove}get onData(){return this._core.onData}get onKey(){return this._core.onKey}get onLineFeed(){return this._core.onLineFeed}get onRender(){return this._core.onRender}get onResize(){return this._core.onResize}get onScroll(){return this._core.onScroll}get onSelectionChange(){return this._core.onSelectionChange}get onTitleChange(){return this._core.onTitleChange}get onWriteParsed(){return this._core.onWriteParsed}get element(){return this._core.element}get parser(){return this._parser||(this._parser=new g.ParserApi(this._core)),this._parser}get unicode(){return this._checkProposedApi(),new b.UnicodeApi(this._core)}get textarea(){return this._core.textarea}get rows(){return this._core.rows}get cols(){return this._core.cols}get buffer(){return this._buffer||(this._buffer=this.register(new u.BufferNamespaceApi(this._core))),this._buffer}get markers(){return this._checkProposedApi(),this._core.markers}get modes(){const f=this._core.coreService.decPrivateModes;let _="none";switch(this._core.coreMouseService.activeProtocol){case"X10":_="x10";break;case"VT200":_="vt200";break;case"DRAG":_="drag";break;case"ANY":_="any"}return{applicationCursorKeysMode:f.applicationCursorKeys,applicationKeypadMode:f.applicationKeypad,bracketedPasteMode:f.bracketedPasteMode,insertMode:this._core.coreService.modes.insertMode,mouseTrackingMode:_,originMode:f.origin,reverseWraparoundMode:f.reverseWraparound,sendFocusMode:f.sendFocus,wraparoundMode:f.wraparound}}get options(){return this._publicOptions}set options(f){for(const _ in f)this._publicOptions[_]=f[_]}blur(){this._core.blur()}focus(){this._core.focus()}resize(f,_){this._verifyIntegers(f,_),this._core.resize(f,_)}open(f){this._core.open(f)}attachCustomKeyEventHandler(f){this._core.attachCustomKeyEventHandler(f)}registerLinkProvider(f){return this._core.registerLinkProvider(f)}registerCharacterJoiner(f){return this._checkProposedApi(),this._core.registerCharacterJoiner(f)}deregisterCharacterJoiner(f){this._checkProposedApi(),this._core.deregisterCharacterJoiner(f)}registerMarker(f=0){return this._verifyIntegers(f),this._core.registerMarker(f)}registerDecoration(f){var _,p,v;return this._checkProposedApi(),this._verifyPositiveIntegers((_=f.x)!==null&&_!==void 0?_:0,(p=f.width)!==null&&p!==void 0?p:0,(v=f.height)!==null&&v!==void 0?v:0),this._core.registerDecoration(f)}hasSelection(){return this._core.hasSelection()}select(f,_,p){this._verifyIntegers(f,_,p),this._core.select(f,_,p)}getSelection(){return this._core.getSelection()}getSelectionPosition(){return this._core.getSelectionPosition()}clearSelection(){this._core.clearSelection()}selectAll(){this._core.selectAll()}selectLines(f,_){this._verifyIntegers(f,_),this._core.selectLines(f,_)}dispose(){super.dispose()}scrollLines(f){this._verifyIntegers(f),this._core.scrollLines(f)}scrollPages(f){this._verifyIntegers(f),this._core.scrollPages(f)}scrollToTop(){this._core.scrollToTop()}scrollToBottom(){this._core.scrollToBottom()}scrollToLine(f){this._verifyIntegers(f),this._core.scrollToLine(f)}clear(){this._core.clear()}write(f,_){this._core.write(f,_)}writeln(f,_){this._core.write(f),this._core.write(`\r
`,_)}paste(f){this._core.paste(f)}refresh(f,_){this._verifyIntegers(f,_),this._core.refresh(f,_)}reset(){this._core.reset()}clearTextureAtlas(){this._core.clearTextureAtlas()}loadAddon(f){this._addonManager.loadAddon(this,f)}static get strings(){return o}_verifyIntegers(...f){for(const _ of f)if(_===1/0||isNaN(_)||_%1!=0)throw new Error("This API only accepts integers")}_verifyPositiveIntegers(...f){for(const _ of f)if(_&&(_===1/0||isNaN(_)||_%1!=0||_<0))throw new Error("This API only accepts positive integers")}}l.Terminal=m})(),n})())})(cc);var D3=cc.exports,uc={exports:{}};(function(e,t){(function(i,s){e.exports=s()})(self,function(){return(()=>{var i={};return(()=>{var s=i;Object.defineProperty(s,"__esModule",{value:!0}),s.FitAddon=void 0,s.FitAddon=class{constructor(){}activate(r){this._terminal=r}dispose(){}fit(){const r=this.proposeDimensions();if(!r||!this._terminal||isNaN(r.cols)||isNaN(r.rows))return;const n=this._terminal._core;this._terminal.rows===r.rows&&this._terminal.cols===r.cols||(n._renderService.clear(),this._terminal.resize(r.cols,r.rows))}proposeDimensions(){if(!this._terminal||!this._terminal.element||!this._terminal.element.parentElement)return;const r=this._terminal._core,n=r._renderService.dimensions;if(n.css.cell.width===0||n.css.cell.height===0)return;const l=this._terminal.options.scrollback===0?0:r.viewport.scrollBarWidth,o=window.getComputedStyle(this._terminal.element.parentElement),a=parseInt(o.getPropertyValue("height")),h=Math.max(0,parseInt(o.getPropertyValue("width"))),d=window.getComputedStyle(this._terminal.element),u=a-(parseInt(d.getPropertyValue("padding-top"))+parseInt(d.getPropertyValue("padding-bottom"))),g=h-(parseInt(d.getPropertyValue("padding-right"))+parseInt(d.getPropertyValue("padding-left")))-l;return{cols:Math.max(2,Math.floor(g/n.css.cell.width)),rows:Math.max(1,Math.floor(u/n.css.cell.height))}}}})(),i})()})})(uc);var M3=uc.exports;function T3(){var i,s,r,n,l,o;switch((r=(s=(i=globalThis==null?void 0:globalThis.document)==null?void 0:i.documentElement)==null?void 0:s.dataset)==null?void 0:r.themeMode){case"dark":return!0;case"light":return!1}switch((o=(l=(n=globalThis==null?void 0:globalThis.siyuan)==null?void 0:n.config)==null?void 0:l.appearance)==null?void 0:o.mode){case 1:return!0;case 0:return!1}return window.matchMedia("(prefers-color-scheme: dark)").matches}function fc(){return!T3()}function dc(e,t=100){let i;return function(...s){clearTimeout(i),i=setTimeout(()=>{e.apply(this,s)},t)}}const A3=typeof atob=="function",R3=typeof btoa=="function",Wi=typeof Buffer=="function",sa=typeof TextDecoder=="function"?new TextDecoder:void 0,ra=typeof TextEncoder=="function"?new TextEncoder:void 0,O3="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",Qi=Array.prototype.slice.call(O3),Es=(e=>{let t={};return e.forEach((i,s)=>t[i]=s),t})(Qi),B3=/^(?:[A-Za-z\d+\/]{4})*?(?:[A-Za-z\d+\/]{2}(?:==)?|[A-Za-z\d+\/]{3}=?)?$/,$e=String.fromCharCode.bind(String),na=typeof Uint8Array.from=="function"?Uint8Array.from.bind(Uint8Array):e=>new Uint8Array(Array.prototype.slice.call(e,0)),H3=e=>e.replace(/=/g,"").replace(/[+\/]/g,t=>t=="+"?"-":"_"),_c=e=>e.replace(/[^A-Za-z0-9\+\/]/g,""),x3=e=>{let t,i,s,r,n="";const l=e.length%3;for(let o=0;o<e.length;){if((i=e.charCodeAt(o++))>255||(s=e.charCodeAt(o++))>255||(r=e.charCodeAt(o++))>255)throw new TypeError("invalid character found");t=i<<16|s<<8|r,n+=Qi[t>>18&63]+Qi[t>>12&63]+Qi[t>>6&63]+Qi[t&63]}return l?n.slice(0,l-3)+"===".substring(l):n},pc=R3?e=>btoa(e):Wi?e=>Buffer.from(e,"binary").toString("base64"):x3,P3=Wi?e=>Buffer.from(e).toString("base64"):e=>{let i=[];for(let s=0,r=e.length;s<r;s+=4096)i.push($e.apply(null,e.subarray(s,s+4096)));return pc(i.join(""))},I3=e=>{if(e.length<2){var t=e.charCodeAt(0);return t<128?e:t<2048?$e(192|t>>>6)+$e(128|t&63):$e(224|t>>>12&15)+$e(128|t>>>6&63)+$e(128|t&63)}else{var t=65536+(e.charCodeAt(0)-55296)*1024+(e.charCodeAt(1)-56320);return $e(240|t>>>18&7)+$e(128|t>>>12&63)+$e(128|t>>>6&63)+$e(128|t&63)}},N3=/[\uD800-\uDBFF][\uDC00-\uDFFFF]|[^\x00-\x7F]/g,V3=e=>e.replace(N3,I3),oa=Wi?e=>Buffer.from(e,"utf8").toString("base64"):ra?e=>P3(ra.encode(e)):e=>pc(V3(e)),j3=(e,t=!1)=>t?H3(oa(e)):oa(e),F3=/[\xC0-\xDF][\x80-\xBF]|[\xE0-\xEF][\x80-\xBF]{2}|[\xF0-\xF7][\x80-\xBF]{3}/g,U3=e=>{switch(e.length){case 4:var t=(7&e.charCodeAt(0))<<18|(63&e.charCodeAt(1))<<12|(63&e.charCodeAt(2))<<6|63&e.charCodeAt(3),i=t-65536;return $e((i>>>10)+55296)+$e((i&1023)+56320);case 3:return $e((15&e.charCodeAt(0))<<12|(63&e.charCodeAt(1))<<6|63&e.charCodeAt(2));default:return $e((31&e.charCodeAt(0))<<6|63&e.charCodeAt(1))}},W3=e=>e.replace(F3,U3),Y3=e=>{if(e=e.replace(/\s+/g,""),!B3.test(e))throw new TypeError("malformed base64.");e+="==".slice(2-(e.length&3));let t,i="",s,r;for(let n=0;n<e.length;)t=Es[e.charAt(n++)]<<18|Es[e.charAt(n++)]<<12|(s=Es[e.charAt(n++)])<<6|(r=Es[e.charAt(n++)]),i+=s===64?$e(t>>16&255):r===64?$e(t>>16&255,t>>8&255):$e(t>>16&255,t>>8&255,t&255);return i},gc=A3?e=>atob(_c(e)):Wi?e=>Buffer.from(e,"base64").toString("binary"):Y3,mc=Wi?e=>na(Buffer.from(e,"base64")):e=>na(gc(e).split("").map(t=>t.charCodeAt(0))),z3=e=>mc(vc(e)),q3=Wi?e=>Buffer.from(e,"base64").toString("utf8"):sa?e=>sa.decode(mc(e)):e=>W3(gc(e)),vc=e=>_c(e.replace(/[-_]/g,t=>t=="-"?"+":"/")),Ir=e=>q3(vc(e));var Z3=function(){var e=document.getSelection();if(!e.rangeCount)return function(){};for(var t=document.activeElement,i=[],s=0;s<e.rangeCount;s++)i.push(e.getRangeAt(s));switch(t.tagName.toUpperCase()){case"INPUT":case"TEXTAREA":t.blur();break;default:t=null;break}return e.removeAllRanges(),function(){e.type==="Caret"&&e.removeAllRanges(),e.rangeCount||i.forEach(function(r){e.addRange(r)}),t&&t.focus()}},K3=Z3,aa={"text/plain":"Text","text/html":"Url",default:"Text"},$3="Copy to clipboard: #{key}, Enter";function G3(e){var t=(/mac os x/i.test(navigator.userAgent)?"⌘":"Ctrl")+"+C";return e.replace(/#{\s*key\s*}/g,t)}function J3(e,t){var i,s,r,n,l,o,a=!1;t||(t={}),i=t.debug||!1;try{r=K3(),n=document.createRange(),l=document.getSelection(),o=document.createElement("span"),o.textContent=e,o.ariaHidden="true",o.style.all="unset",o.style.position="fixed",o.style.top=0,o.style.clip="rect(0, 0, 0, 0)",o.style.whiteSpace="pre",o.style.webkitUserSelect="text",o.style.MozUserSelect="text",o.style.msUserSelect="text",o.style.userSelect="text",o.addEventListener("copy",function(d){if(d.stopPropagation(),t.format)if(d.preventDefault(),typeof d.clipboardData>"u"){i&&console.warn("unable to use e.clipboardData"),i&&console.warn("trying IE specific stuff"),window.clipboardData.clearData();var u=aa[t.format]||aa.default;window.clipboardData.setData(u,e)}else d.clipboardData.clearData(),d.clipboardData.setData(t.format,e);t.onCopy&&(d.preventDefault(),t.onCopy(d.clipboardData))}),document.body.appendChild(o),n.selectNodeContents(o),l.addRange(n);var h=document.execCommand("copy");if(!h)throw new Error("copy command was unsuccessful");a=!0}catch(d){i&&console.error("unable to copy using execCommand: ",d),i&&console.warn("trying IE specific stuff");try{window.clipboardData.setData(t.format||"text",e),t.onCopy&&t.onCopy(window.clipboardData),a=!0}catch(u){i&&console.error("unable to copy using clipboardData: ",u),i&&console.error("falling back to prompt"),s=G3("message"in t?t.message:$3),window.prompt(s,e)}}finally{l&&(typeof l.removeRange=="function"?l.removeRange(n):l.removeAllRanges()),o&&document.body.removeChild(o),r()}return a}var X3=J3;const Q3=Vn(X3);function eg(e){if(navigator.clipboard&&window.isSecureContext)return navigator.clipboard.writeText(e);Q3(e)}function tg(e,t){switch(!0){case t instanceof Set:return t.has(e);case t instanceof Function:return t(e);default:return e===t}}function qs(e,t){return tg(e.key,t.key)&&e.type===t.type&&e.altKey===t.altKey&&e.ctrlKey===t.ctrlKey&&e.metaKey===t.metaKey&&e.shiftKey===t.shiftKey}function ig(e){return class extends sg{constructor(){super(e)}}}var vt;let sg=(vt=class extends HTMLElement{constructor(i){super();ce(this,"save");ce(this,"blockId");ce(this,"linkHref");ce(this,"shadowRoot");ce(this,"link");ce(this,"content");ce(this,"preview");ce(this,"data","");ce(this,"_terminal");ce(this,"fitAddon");ce(this,"resizeObserver");ce(this,"customAddon",{activate:i=>{i.attachCustomKeyEventHandler(s=>{if(qs(s,{type:"keydown",key:"c",ctrlKey:!0,metaKey:!1,altKey:!1,shiftKey:!1})||qs(s,{type:"keydown",key:"c",ctrlKey:!1,metaKey:!0,altKey:!1,shiftKey:!1})){const r=i.getSelection();return eg(r),!1}return!0})},dispose(){},fit:()=>{var i;(i=this._terminal)==null||i.resize(this._terminal.cols,this._terminal.buffer.active.baseY+this._terminal.buffer.active.cursorY+1)}});ce(this,"fit",()=>{var i,s;try{this._terminal&&this._terminal.options.fontSize!==this.fontSize&&(this._terminal.options.fontSize=this.fontSize),(i=this.fitAddon)==null||i.fit(),(s=this.customAddon)==null||s.fit()}catch(r){this.plugin.logger.warn(r)}});this.plugin=i,this.save=this.dataset.save,this.blockId=this.dataset.blockId,this.linkHref=`plugins/${this.plugin.name}/index.css?v=${Sa.version}`,this.shadowRoot=this.attachShadow({mode:"open"})}static get observedAttributes(){return["data-stream"]}get fontSize(){var i,s,r;return parseFloat(globalThis.getComputedStyle(this).getPropertyValue("font-size"))||((r=(s=(i=globalThis.siyuan)==null?void 0:i.config)==null?void 0:s.editor)==null?void 0:r.fontSize)}get terminal(){return this._terminal}connectedCallback(){if(this.plugin.xtermElements.add(this),this.link=this.querySelector(`link#${vt.ELEMENT_ID_STYLE}`),this.content=this.querySelector(`pre#${vt.ELEMENT_ID_CONTENT}`),this.preview=this.querySelector(`div#${vt.ELEMENT_ID_PREVIEW}`),this.link||(this.link=document.createElement("link"),this.link.id=vt.ELEMENT_ID_STYLE,this.link.rel="stylesheet",this.link.href=this.linkHref,this.shadowRoot.appendChild(this.link)),this.dataset.stream!==void 0?this.data=Ir(this.dataset.stream):this.content&&(this.shadowRoot.appendChild(this.content),this.content.style.display="none",this.data=Ir(this.content.dataset.stream??"")),this.preview)this.shadowRoot.appendChild(this.preview);else{this.preview=document.createElement("div"),this.preview.id=vt.ELEMENT_ID_PREVIEW,this.sizeObserver(this.preview),this.shadowRoot.appendChild(this.preview);const i=fc()?rg:ng;this._terminal=new D3.Terminal({rows:0,theme:i,fontSize:this.fontSize,...this.plugin.config.xterm.options}),this.fitAddon=new M3.FitAddon,this._terminal.loadAddon(this.fitAddon),this._terminal.loadAddon(this.customAddon),this._terminal.open(this.preview),this._terminal.write(this.data,this.fit)}}async write(i){return new Promise(s=>{var r;(r=this._terminal)==null||r.write(i,s)})}async writeln(i){return new Promise(s=>{var r;(r=this._terminal)==null||r.writeln(i,s)})}sizeObserver(i){this.resizeObserver??(this.resizeObserver=new ResizeObserver(dc(this.fit,125))),this.resizeObserver.observe(i,{box:"content-box"})}disconnectedCallback(){var i,s;this.plugin.xtermElements.delete(this),(i=this.resizeObserver)==null||i.disconnect(),(s=this._terminal)==null||s.dispose()}adoptedCallback(){}async attributeChangedCallback(i,s,r){switch(i){case"data-stream":this._terminal&&(this.data=Ir(r),await this.write(`
`),this._terminal.clear(),this._terminal.write(this.data,this.fit));break}}},ce(vt,"TAG_NAME","jupyter-xterm-output"),ce(vt,"ELEMENT_ID_STYLE","style"),ce(vt,"ELEMENT_ID_CONTENT","content"),ce(vt,"ELEMENT_ID_PREVIEW","preview"),vt);const bc={background:"#0000",extendedAnsi:["#000000","#00005f","#000087","#0000af","#0000d7","#0000ff","#005f00","#005f5f","#005f87","#005faf","#005fd7","#005fff","#008700","#00875f","#008787","#0087af","#0087d7","#0087ff","#00af00","#00af5f","#00af87","#00afaf","#00afd7","#00afff","#00d700","#00d75f","#00d787","#00d7af","#00d7d7","#00d7ff","#00ff00","#00ff5f","#00ff87","#00ffaf","#00ffd7","#00ffff","#5f0000","#5f005f","#5f0087","#5f00af","#5f00d7","#5f00ff","#5f5f00","#5f5f5f","#5f5f87","#5f5faf","#5f5fd7","#5f5fff","#5f8700","#5f875f","#5f8787","#5f87af","#5f87d7","#5f87ff","#5faf00","#5faf5f","#5faf87","#5fafaf","#5fafd7","#5fafff","#5fd700","#5fd75f","#5fd787","#5fd7af","#5fd7d7","#5fd7ff","#5fff00","#5fff5f","#5fff87","#5fffaf","#5fffd7","#5fffff","#870000","#87005f","#870087","#8700af","#8700d7","#8700ff","#875f00","#875f5f","#875f87","#875faf","#875fd7","#875fff","#878700","#87875f","#878787","#8787af","#8787d7","#8787ff","#87af00","#87af5f","#87af87","#87afaf","#87afd7","#87afff","#87d700","#87d75f","#87d787","#87d7af","#87d7d7","#87d7ff","#87ff00","#87ff5f","#87ff87","#87ffaf","#87ffd7","#87ffff","#af0000","#af005f","#af0087","#af00af","#af00d7","#af00ff","#af5f00","#af5f5f","#af5f87","#af5faf","#af5fd7","#af5fff","#af8700","#af875f","#af8787","#af87af","#af87d7","#af87ff","#afaf00","#afaf5f","#afaf87","#afafaf","#afafd7","#afafff","#afd700","#afd75f","#afd787","#afd7af","#afd7d7","#afd7ff","#afff00","#afff5f","#afff87","#afffaf","#afffd7","#afffff","#d70000","#d7005f","#d70087","#d700af","#d700d7","#d700ff","#d75f00","#d75f5f","#d75f87","#d75faf","#d75fd7","#d75fff","#d78700","#d7875f","#d78787","#d787af","#d787d7","#d787ff","#d7af00","#d7af5f","#d7af87","#d7afaf","#d7afd7","#d7afff","#d7d700","#d7d75f","#d7d787","#d7d7af","#d7d7d7","#d7d7ff","#d7ff00","#d7ff5f","#d7ff87","#d7ffaf","#d7ffd7","#d7ffff","#ff0000","#ff005f","#ff0087","#ff00af","#ff00d7","#ff00ff","#ff5f00","#ff5f5f","#ff5f87","#ff5faf","#ff5fd7","#ff5fff","#ff8700","#ff875f","#ff8787","#ff87af","#ff87d7","#ff87ff","#ffaf00","#ffaf5f","#ffaf87","#ffafaf","#ffafd7","#ffafff","#ffd700","#ffd75f","#ffd787","#ffd7af","#ffd7d7","#ffd7ff","#ffff00","#ffff5f","#ffff87","#ffffaf","#ffffd7","#ffffff","#080808","#121212","#1c1c1c","#262626","#303030","#3a3a3a","#444444","#4e4e4e","#585858","#626262","#6c6c6c","#767676","#808080","#8a8a8a","#949494","#9e9e9e","#a8a8a8","#b2b2b2","#bcbcbc","#c6c6c6","#d0d0d0","#dadada","#e4e4e4","#eeeeee"]},rg={foreground:"#3e424d",selectionBackground:"#fffe",selectionInactiveBackground:"#fffe",black:"#282c36",red:"#b22b31",green:"#007427",yellow:"#b27d12",blue:"#0065ca",magenta:"#a03196",cyan:"#258f8f",white:"#a1a6b2",brightBlack:"#3e424d",brightRed:"#e75c58",brightGreen:"#00a250",brightYellow:"#ddb62b",brightBlue:"#208ffb",brightMagenta:"#d160c4",brightCyan:"#60c6c8",brightWhite:"#c5c1b4",...bc},ng={foreground:"#a1a6b2",selectionBackground:"#fff3",selectionInactiveBackground:"#fff3",black:"#3e424d",red:"#e75c58",green:"#00a250",yellow:"#ddb62b",blue:"#208ffb",magenta:"#d160c4",cyan:"#60c6c8",white:"#c5c1b4",brightBlack:"#282c36",brightRed:"#b22b31",brightGreen:"#007427",brightYellow:"#b27d12",brightBlue:"#0065ca",brightMagenta:"#a03196",brightCyan:"#258f8f",brightWhite:"#a1a6b2",...bc},og=e=>({}),la=e=>({}),ag=e=>({}),ca=e=>({}),lg=e=>({}),ha=e=>({});function cg(e){let t;return{c(){t=ne("div"),V(t,"class","ft__breakword")},m(i,s){J(i,t,s),t.innerHTML=e[1]},p(i,s){s&2&&(t.innerHTML=i[1])},d(i){i&&G(t)}}}function hg(e){let t,i,s;return{c(){t=ne("input"),t.autofocus=e[5],V(t,"placeholder",e[2]),V(t,"class","b3-text-field fn__block")},m(r,n){J(r,t,n),at(t,e[0]),e[5]&&t.focus(),i||(s=[ve(t,"input",e[13]),ve(t,"input",e[11]),ve(t,"change",e[10])],i=!0)},p(r,n){n&32&&(t.autofocus=r[5]),n&4&&V(t,"placeholder",r[2]),n&1&&t.value!==r[0]&&at(t,r[0])},d(r){r&&G(t),i=!1,qe(s)}}}function ug(e){let t,i;return{c(){t=new Ni(!1),i=pt(),t.a=i},m(s,r){t.m(e[3],s,r),J(s,i,r)},p(s,r){r&8&&t.p(s[3])},d(s){s&&(G(i),t.d())}}}function fg(e){let t,i,s,r,n;const l=e[12].text,o=it(l,e,e[14],ha),a=o||cg(e),h=e[12].input,d=it(h,e,e[14],ca),u=d||hg(e),g=e[12].tips,b=it(g,e,e[14],la),y=b||ug(e);return{c(){a&&a.c(),t=ue(),i=ne("br"),s=ue(),u&&u.c(),r=ue(),y&&y.c()},m(m,c){a&&a.m(m,c),J(m,t,c),J(m,i,c),J(m,s,c),u&&u.m(m,c),J(m,r,c),y&&y.m(m,c),n=!0},p(m,c){o?o.p&&(!n||c&16384)&&rt(o,l,m,m[14],n?st(l,m[14],c,lg):nt(m[14]),ha):a&&a.p&&(!n||c&2)&&a.p(m,n?c:-1),d?d.p&&(!n||c&16384)&&rt(d,h,m,m[14],n?st(h,m[14],c,ag):nt(m[14]),ca):u&&u.p&&(!n||c&37)&&u.p(m,n?c:-1),b?b.p&&(!n||c&16384)&&rt(b,g,m,m[14],n?st(g,m[14],c,og):nt(m[14]),la):y&&y.p&&(!n||c&8)&&y.p(m,n?c:-1)},i(m){n||(W(a,m),W(u,m),W(y,m),n=!0)},o(m){q(a,m),q(u,m),q(y,m),n=!1},d(m){m&&(G(t),G(i),G(s),G(r)),a&&a.d(m),u&&u.d(m),y&&y.d(m)}}}function dg(e){let t,i;return t=new rc({props:{selectable:e[4],cancelButtonText:e[6],confirmButtonText:e[7],$$slots:{default:[fg]},$$scope:{ctx:e}}}),t.$on("cancel",e[8]),t.$on("confirm",e[9]),{c(){se(t.$$.fragment)},m(s,r){te(t,s,r),i=!0},p(s,[r]){const n={};r&16&&(n.selectable=s[4]),r&64&&(n.cancelButtonText=s[6]),r&128&&(n.confirmButtonText=s[7]),r&16431&&(n.$$scope={dirty:r,ctx:s}),t.$set(n)},i(s){i||(W(t.$$.fragment,s),i=!0)},o(s){q(t.$$.fragment,s),i=!1},d(s){ie(t,s)}}}function _g(e,t,i){var p,v,S,L;let{$$slots:s={},$$scope:r}=t,{text:n=""}=t,{value:l=""}=t,{placeholder:o=""}=t,{tips:a=""}=t,{selectable:h=!0}=t,{autofocus:d=!0}=t,{cancelButtonText:u=((v=(p=globalThis.siyuan)==null?void 0:p.languages)==null?void 0:v.cancel)??"Cancel"}=t,{confirmButtonText:g=((L=(S=globalThis.siyuan)==null?void 0:S.languages)==null?void 0:L.confirm)??"Confirm"}=t;const b=ci();function y(k){b("cancel",{value:l,event:k.detail.event})}function m(k){b("confirm",{value:l,event:k.detail.event})}function c(k){b("change",{value:l,event:k})}function f(k){b("input",{value:l,event:k})}function _(){l=this.value,i(0,l)}return e.$$set=k=>{"text"in k&&i(1,n=k.text),"value"in k&&i(0,l=k.value),"placeholder"in k&&i(2,o=k.placeholder),"tips"in k&&i(3,a=k.tips),"selectable"in k&&i(4,h=k.selectable),"autofocus"in k&&i(5,d=k.autofocus),"cancelButtonText"in k&&i(6,u=k.cancelButtonText),"confirmButtonText"in k&&i(7,g=k.confirmButtonText),"$$scope"in k&&i(14,r=k.$$scope)},[l,n,o,a,h,d,u,g,y,m,c,f,s,_,r]}class pg extends je{constructor(t){super(),Ve(this,t,_g,dg,Pe,{text:1,value:0,placeholder:2,tips:3,selectable:4,autofocus:5,cancelButtonText:6,confirmButtonText:7})}}async function gg(e,t){return new Promise((i,s)=>{const r=t.confirm,n=t.cancel;t.confirm=async(l,...o)=>{const a=await(r==null?void 0:r.call(t,l,...o))??!0;return a&&i(l),a},t.cancel=async(l,...o)=>{const a=await(n==null?void 0:n.call(t,l,...o))??!0;return a&&s(l),a},mg(e,t)})}function mg(e,t){const i=`dialog-prompt-${Date.now()}`,s=new e({title:t.title,content:`<div id="${i}" class="fn__flex-column" />`,width:t.width||void 0,height:t.height||void 0,destroyCallback:()=>r==null?void 0:r.$destroy()}),r=new pg({target:s.element.querySelector(`#${i}`),props:{text:t.text,value:t.value,placeholder:t.placeholder,tips:t.tips,selectable:t.selectable,autofocus:t.autofocus}});return r.$on("input",async n=>{if(t.input){const l=await t.input(n.detail.value,s,r);r.$set({tips:l})}}),r.$on("change",async n=>{if(t.change){const l=await t.change(n.detail.value,s,r);r.$set({tips:l})}}),r.$on("confirm",async n=>{(t.confirm?await t.confirm(n.detail.value,s,r):!0)&&s.destroy()}),r.$on("cancel",async n=>{(t.cancel?await t.cancel(n.detail.value,s,r):!0)&&s.destroy()}),{id:i,dialog:s,component:r}}vg();yg();const Nr=bg();function vg(){switch(ut.getFrontend()){case"desktop":case"desktop-window":case"browser-desktop":return!0;case"mobile":case"browser-mobile":return!1;default:return!1}}function bg(){switch(ut.getFrontend()){case"mobile":case"browser-mobile":return!0;case"desktop":case"desktop-window":case"browser-desktop":return!1;default:return!1}}function yg(){switch(ut.getFrontend()){case"browser-desktop":case"browser-mobile":return!0;case"desktop":case"desktop-window":case"mobile":return!1;default:return!1}}function Cg(e){const{protyle:t,data:i,blockElements:s}=e;if(i){const r={element:t.wysiwyg.element,id:i.id,type:ol.NodeType.NodeDocument};return{...r,isDocumentBlock:!0,isMultiBlock:!1,blocks:[r],protyle:t,data:i}}else if(s&&s.length>0){const r=[];return s.forEach(n=>{r.push({element:n,id:n.dataset.nodeId,type:n.dataset.type,subtype:n.dataset.subtype})}),{...r[0],isDocumentBlock:!1,isMultiBlock:r.length>1,blocks:r,protyle:t}}return null}function Bi(e){return!!(e&&e instanceof HTMLElement&&e.dataset.type&&e.dataset.nodeId&&xi.id.test(e.dataset.nodeId))}function Sg(e){return!!(e&&e instanceof HTMLElement&&e.classList.contains("protyle-title")&&e.dataset.nodeId&&xi.id.test(e.dataset.nodeId))}const wg=Sg;function kg(e){return!!(e&&e instanceof HTMLElement&&e.classList.contains("protyle-wysiwyg"))}const Lg=kg;function Eg(){return Array.from(document.querySelectorAll(".protyle-wysiwyg div.protyle-wysiwyg--select[data-node-id]"))}function Zs(){const e=document.getSelection();for(var t=e==null?void 0:e.focusNode;t&&(!(t instanceof HTMLElement)||!Bi(t));)t=t.parentElement;return t}function Dg(){const e=Zs();return e==null?void 0:e.dataset.nodeId}function Mg(){const e=Eg();if(e.length>0)return e;{const t=Zs();return t?[t]:[]}}function Tg(e=(t=>(t=globalThis.document.getSelection())==null?void 0:t.focusNode)()){for(;e&&(!(e instanceof HTMLElement)||!e.classList.contains("hljs"));)e=e.parentElement;return e}function ua(){const e=globalThis.document.getSelection();if((e==null?void 0:e.rangeCount)===1){const t=e.getRangeAt(0),i=Tg(t.commonAncestorContainer);if(i){const s=i.textContent??"",r=globalThis.document.createRange(),n=globalThis.document.createRange(),l=globalThis.document.createRange(),o=globalThis.document.createRange(),{anchorNode:a,anchorOffset:h,focusNode:d,focusOffset:u}=e;if(a&&d&&i.firstChild&&i.lastChild){const g=a===d?h<=u:!!(a.compareDocumentPosition(d)&Node.DOCUMENT_POSITION_FOLLOWING);r.setStartBefore(i.firstChild),n.setEndAfter(i.lastChild),l.setStartBefore(i.firstChild),o.setEndAfter(i.lastChild),g?(r.setEnd(a,h),n.setStart(d,u)):(r.setEnd(d,u),n.setStart(a,h)),l.setEnd(d,u),o.setStart(d,u);const b=l.toString(),y=b.split(`
`),m=y.at(-1),c=y.length,f=m.length,_=b.length;return{code:s,row:c,column:f,offset:_,container:i,selection:e,order:g,before:r,current:t,after:n,prefix:l,suffix:o}}}}}class Ag{constructor(t,i=!0){this.label=t,this.collapsed=i}stdout(t,i,...s){const r=`[\x1B[4m${this.label}\x1B[0m] - <\x1B[1m${t.name.toUpperCase()}\x1B[0m>`;if(this.collapsed?globalThis.console.groupCollapsed(r):globalThis.console.group(r),i)for(const n of s)Array.isArray(n)?t(...n):t(n);else t(...s);globalThis.console.trace(),globalThis.console.groupEnd()}dir(...t){this.stdout(globalThis.console.dir,!1,...t)}dirs(...t){this.stdout(globalThis.console.dir,!0,...t)}table(...t){this.stdout(globalThis.console.table,!1,...t)}tables(...t){this.stdout(globalThis.console.table,!0,...t)}debug(...t){this.stdout(globalThis.console.debug,!1,...t)}debugs(...t){this.stdout(globalThis.console.debug,!0,...t)}info(...t){this.stdout(globalThis.console.info,!1,...t)}infos(...t){this.stdout(globalThis.console.info,!0,...t)}log(...t){this.stdout(globalThis.console.log,!1,...t)}logs(...t){this.stdout(globalThis.console.log,!0,...t)}warn(...t){this.stdout(globalThis.console.warn,!1,...t)}warns(...t){this.stdout(globalThis.console.warn,!0,...t)}error(...t){this.stdout(globalThis.console.error,!1,...t)}errors(...t){this.stdout(globalThis.console.error,!0,...t)}}function Rg(e,t,i="span"){return`<${i} class="${t}">${e}</${i}>`}function ht(e){return Rg(e,"fn__code","code")}var Og=function(t){return Bg(t)&&!Hg(t)};function Bg(e){return!!e&&typeof e=="object"}function Hg(e){var t=Object.prototype.toString.call(e);return t==="[object RegExp]"||t==="[object Date]"||Ig(e)}var xg=typeof Symbol=="function"&&Symbol.for,Pg=xg?Symbol.for("react.element"):60103;function Ig(e){return e.$$typeof===Pg}function Ng(e){return Array.isArray(e)?[]:{}}function hs(e,t){return t.clone!==!1&&t.isMergeableObject(e)?Pi(Ng(e),e,t):e}function Vg(e,t,i){return e.concat(t).map(function(s){return hs(s,i)})}function jg(e,t){if(!t.customMerge)return Pi;var i=t.customMerge(e);return typeof i=="function"?i:Pi}function Fg(e){return Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(e).filter(function(t){return Object.propertyIsEnumerable.call(e,t)}):[]}function fa(e){return Object.keys(e).concat(Fg(e))}function yc(e,t){try{return t in e}catch{return!1}}function Ug(e,t){return yc(e,t)&&!(Object.hasOwnProperty.call(e,t)&&Object.propertyIsEnumerable.call(e,t))}function Wg(e,t,i){var s={};return i.isMergeableObject(e)&&fa(e).forEach(function(r){s[r]=hs(e[r],i)}),fa(t).forEach(function(r){Ug(e,r)||(yc(e,r)&&i.isMergeableObject(t[r])?s[r]=jg(r,i)(e[r],t[r],i):s[r]=hs(t[r],i))}),s}function Pi(e,t,i){i=i||{},i.arrayMerge=i.arrayMerge||Vg,i.isMergeableObject=i.isMergeableObject||Og,i.cloneUnlessOtherwiseSpecified=hs;var s=Array.isArray(t),r=Array.isArray(e),n=s===r;return n?s?i.arrayMerge(e,t,i):Wg(e,t,i):hs(t,i)}Pi.all=function(t,i){if(!Array.isArray(t))throw new Error("first argument should be an array");return t.reduce(function(s,r){return Pi(s,r,i)},{})};var Yg=Pi,zg=Yg;const qg=Vn(zg);function da(...e){return qg.all(e,{arrayMerge:(t,i,s)=>i})}class Zg{constructor(t,i,s,r){this.port=t,this.logger=i,this.handlers=s,this.uuid=r,this.map=new Map,this.counter=Math.random(),this.errerEventListener=async n=>{this.logger.warn(n)},this.messageEventListener=async n=>{const l=n.data;switch(l.type){case"call":{try{if(l.uuid&&l.uuid!==this.uuid)break;if(l.handler.name in this.handlers){const o=this.handlers[l.handler.name],a=await o.func.call(o.this,...l.handler.args),h={type:"return",id:l.id,handler:{name:l.handler.name,result:a}};this.port.postMessage(h)}}catch(o){const a={type:"error",id:l.id,error:o};this.port.postMessage(a)}break}case"error":{const o=this.map.get(l.id);o&&(this.map.delete(l.id),o.reject(l.error));break}case"return":{const o=this.map.get(l.id);o&&(this.map.delete(l.id),o.resolve(l.handler.result));break}}},this.port.addEventListener("error",this.errerEventListener),this.port.addEventListener("messageerror",this.errerEventListener),this.port.addEventListener("message",this.messageEventListener)}async call(t,...i){return new Promise((s,r)=>{const n=this.counter++;this.map.set(n,{resolve:s,reject:r});const l={type:"call",id:n,handler:{name:t,args:i}};this.port.postMessage(l)})}async singleCall(t,i,...s){return new Promise((r,n)=>{const l=this.counter++;this.map.set(l,{resolve:r,reject:n});const o={type:"call",id:l,uuid:i,handler:{name:t,args:s}};this.port.postMessage(o)})}}function*Cc(e=0){for(;;)yield e++}const Kg=Cc(Math.round(Math.random()*(36**8-1)));function $g(e,t){return`${e.getFullYear().toString().padStart(4,"0")}${(e.getMonth()+1).toString().padStart(2,"0")}${e.getDate().toString().padStart(2,"0")}${e.getHours().toString().padStart(2,"0")}${e.getMinutes().toString().padStart(2,"0")}${e.getSeconds().toString().padStart(2,"0")}-${t.toString(36).padStart(7,"0").slice(-7)}`}function Gg(e=new Date,t=Kg){return $g(e,t.next().value)}class Jg extends Zg{constructor(t,i,s={},r=Gg()){super(t,i,s,r)}async ping(t=1e3){const i=Date.now();return new Promise((s,r)=>{const n=setTimeout(()=>{r(new Error(`timeout: ${t}`))},t);this.port.addEventListener("message",l=>{l.data==="pong"&&(clearTimeout(n),s(Date.now()-i))}),this.port.postMessage("ping")})}terminate(){switch(!0){case"terminate"in this.port:this.port.terminate();break;case"close"in this.port:this.port.close();break}}}async function Xg(e){return new Promise(t=>{setTimeout(t,e)})}var Vr,_a;function pa(){if(_a)return Vr;_a=1,Vr=e;function e(t,i){return!t!=!i}return Vr}var jr,ga;function ma(){if(ga)return jr;ga=1;var e=/\b(Array|Date|Object|Math|JSON)\b/g;jr=function(n,l){var o=s(t(n));return l&&typeof l=="string"&&(l=r(l)),l?i(n,o,l):o};function t(n){return n.replace(/\.\w+|\w+ *\(|"[^"]*"|'[^']*'|\/([^/]+)\//g,"").replace(e,"").match(/[a-zA-Z_]\w*/g)||[]}function i(n,l,o){var a=/\.\w+|\w+ *\(|"[^"]*"|'[^']*'|\/([^/]+)\/|[a-zA-Z_]\w*/g;return n.replace(a,function(h){return h[h.length-1]=="("||~l.indexOf(h)?o(h):h})}function s(n){for(var l=[],o=0;o<n.length;o++)~l.indexOf(n[o])||l.push(n[o]);return l}function r(n){return function(l){return n+l}}return jr}var Ks,ln;try{Ks=pa()}catch{Ks=pa()}try{ln=ma()}catch{ln=ma()}var Qg=Ye;function Ye(e,t){if(!(this instanceof Ye))return new Ye(e,t);if(this.node=this.start=this.peeked=e,this.root=t,this.closingTag=!1,this._revisit=!0,this._selects=[],this._rejects=[],e&&this.higher(e))throw new Error("root must be a parent or ancestor to node")}Ye.prototype.reset=function(e){return this.node=e||this.start,this};Ye.prototype.revisit=function(e){return this._revisit=e??!0,this};Ye.prototype.opening=function(){return this.node.nodeType==1&&(this.closingTag=!1),this};Ye.prototype.atOpening=function(){return!this.closingTag};Ye.prototype.closing=function(){return this.node.nodeType==1&&(this.closingTag=!0),this};Ye.prototype.atClosing=function(){return this.closingTag};Ye.prototype.next=Sc("nextSibling","firstChild");Ye.prototype.previous=Ye.prototype.prev=Sc("previousSibling","lastChild");function Sc(e,t){var i=e=="nextSibling";return function(r,n,l){r=this.compile(r),n=n&&n>0?n:1;for(var o=this.node,a=this.closingTag,h=this._revisit;o;){if(Ks(i,a)&&o[t])o=o[t],a=!i;else if(o.nodeType==1&&!o[t]&&Ks(i,a)){if(a=i,!h)continue}else if(o[e])o=o[e],a=!i;else if(o=o.parentNode,a=i,!h)continue;if(!o||this.higher(o,this.root))break;if(r(o)&&this.selects(o,l)&&this.rejects(o,l)){if(--n)continue;return l||(this.node=o),this.closingTag=a,o}}return null}}Ye.prototype.select=function(e){return e=this.compile(e),this._selects.push(e),this};Ye.prototype.selects=function(e,t){var i=this._selects,s=i.length;if(!s)return!0;for(var r=0;r<s;r++)if(i[r].call(this,e,t))return!0;return!1};Ye.prototype.reject=function(e){return e=this.compile(e),this._rejects.push(e),this};Ye.prototype.rejects=function(e,t){var i=this._rejects,s=i.length;if(!s)return!0;for(var r=0;r<s;r++)if(i[r].call(this,e,t))return!1;return!0};Ye.prototype.higher=function(e){var t=this.root;if(!t)return!1;for(e=e.parentNode;e&&e!=t;)e=e.parentNode;return e!=t};Ye.prototype.compile=function(e){switch(typeof e){case"number":return function(t){return e==t.nodeType};case"string":return new Function("node","return "+ln(e,"node."));case"function":return e;default:return function(){return!0}}};Ye.prototype.peak=Ye.prototype.peek=function(e,t){return arguments.length==1&&(t=e,e=!0),t=t??1,t?t>0?this.next(e,t,!0):this.prev(e,Math.abs(t),!0):this.node};Ye.prototype.use=function(e){return e(this),this};var em=Qg,$s=window.getSelection(),tm=im;function im(e,t){if(arguments.length==1){if(!$s.rangeCount)return;var i={},l=$s.getRangeAt(0),s=l.cloneRange();return s.selectNodeContents(e),s.setEnd(l.endContainer,l.endOffset),i.end=s.toString().length,s.setStart(l.startContainer,l.startOffset),i.start=i.end-s.toString().length,i.atStart=s.startOffset===0,i}for(var r=t.end&&t.end!==t.start,n=0,l=document.createRange(),o=em(e).select(Node.TEXT_NODE).revisit(!1),a,h,d=t.start>e.textContent.length?e.textContent.length:t.start,u=t.end>e.textContent.length?e.textContent.length:t.end,g=t.atStart;a=o.next();){var b=n;n+=a.textContent.length;var y=g?n>d:n>=d;if(!h&&y&&(h=!0,l.setStart(a,d-b),!r)){l.collapse(!0),va(e,l);break}if(r&&n>=u){l.setEnd(a,u-b),va(e,l);break}}}function va(e,t){e.focus(),$s.removeAllRanges(),$s.addRange(t)}const ba=Vn(tm);function sm(e,t){e.deleteContents(),e.insertNode(document.createTextNode(t))}const pe={JUPYTER_WORKER_FILE_NAME:"jupyter",JUPYTER_WORKER_BROADCAST_CHANNEL_NAME:"jupyter-worker",JUPYTER_UNKNOWN_VALUE:"unknown",JUPYTER_LAST_RUN_TIME_FORMAT:"YYYY-MM-DD HH:mm:ss.SSS",JUPYTER_RUNTIME_FORMAT:"HH:mm:ss.SSS",JUPYTER_CODE_CELL_ACTION_RUN_CLASS_NAME:"protyle-action__jupyter-client-code-cell-run",JUPYTER_NOTEBOOK_BUTTON_MENU_CLASS_NAME:"protyle-breadcrumb__jupyter-client-notebook-menu",attrs:{kernel:{id:"custom-jupyter-kernel-id",name:"custom-jupyter-kernel-name",language:"custom-jupyter-kernel-language",display_name:"custom-jupyter-kernel-display-name",status:"custom-jupyter-kernel-status",connection_status:"custom-jupyter-kernel-connection-status"},session:{id:"custom-jupyter-session-id",type:"custom-jupyter-session-type",name:"custom-jupyter-session-name",path:"custom-jupyter-session-path"},code:{type:{key:"custom-jupyter-block-type",value:"code"},time:"custom-jupyter-time",output:"custom-jupyter-output-block-id",index:"custom-jupyter-index",execute_input:"custom-jupyter-time-execute-input",execute_reply:"custom-jupyter-time-execute-reply",busy:"custom-jupyter-time-busy",idle:"custom-jupyter-time-idle"},output:{type:{key:"custom-jupyter-block-type",value:"output"},code:"custom-jupyter-code-block-id",index:"custom-jupyter-index"},other:{prompt:"custom-prompt"}},styles:{success:"color: var(--b3-card-success-color); background-color: var(--b3-card-success-background);",info:"color: var(--b3-card-info-color); background-color: var(--b3-card-info-background);",warning:"color: var(--b3-card-warning-color); background-color: var(--b3-card-warning-background);",error:"color: var(--b3-card-error-color); background-color: var(--b3-card-error-background);"}},Fr={jupyter:{server:{enable:!1,settings:{baseUrl:"",appUrl:"",wsUrl:"",token:""}},execute:{goto:!0,content:{silent:!1,store_history:!0,user_expressions:{},allow_stdin:!0,stop_on_error:!0},input:{goto:!0},output:{parser:{xterm:!1,escaped:!0,cntrl:!0}}},inspect:{detail_level:1},complete:{},import:{parser:{xterm:!1,escaped:!0,cntrl:!0}},edit:{delay:125}},xterm:{options:{allowTransparency:!0,disableStdin:!0,convertEol:!0,logLevel:"off",fontFamily:""}}},rm=`<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
<path fill-rule="evenodd" clip-rule="evenodd" d="M10.57 1.14L13.85 4.44L14 4.8V14.5L13.5 15H2.5L2 14.5V1.5L2.5 1H10.22L10.57 1.14ZM10 5H13L10 2V5ZM3 2V14H13V6H9.5L9 5.5V2H3ZM11 7H5V8H11V7ZM5 9H11V10H5V9ZM11 11H5V12H11V11Z" fill="#424242"/>
</svg>
`,nm=`<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
<g clip-path="url(#clip0)">
<path d="M14.4998 3H7.70978L6.8598 2.15002L6.50983 2H1.50983L1.00983 2.5V6.5V13.5L1.50983 14H14.5098L15.0098 13.5V9V3.5L14.4998 3ZM13.9898 11.49V13H1.98981V11.49V7.48999V7H6.4798L6.82977 6.84998L7.68976 5.98999H13.9998V7.48999L13.9898 11.49ZM13.9898 5H7.48981L7.13983 5.15002L6.27985 6.01001H1.99982V3.01001H6.28986L7.13983 3.85999L7.49982 4.01001H13.9998L13.9898 5Z" fill="#424242"/>
</g>
<defs>
<clipPath id="clip0">
<path d="M-0.000183105 0H15.9998V16H-0.000183105V0Z" fill="white"/>
</clipPath>
</defs>
</svg>
`,om=`<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
<path fill-rule="evenodd" clip-rule="evenodd" d="M6 2.98361V2.97184V2H5.91083C5.59743 2 5.29407 2.06161 5.00128 2.18473C4.70818 2.30798 4.44942 2.48474 4.22578 2.71498C4.00311 2.94422 3.83792 3.19498 3.73282 3.46766L3.73233 3.46898C3.63382 3.7352 3.56814 4.01201 3.53533 4.29917L3.53519 4.30053C3.50678 4.5805 3.4987 4.86844 3.51084 5.16428C3.52272 5.45379 3.52866 5.74329 3.52866 6.03279C3.52866 6.23556 3.48974 6.42594 3.412 6.60507L3.4116 6.60601C3.33687 6.78296 3.23423 6.93866 3.10317 7.07359C2.97644 7.20405 2.82466 7.31055 2.64672 7.3925C2.4706 7.46954 2.28497 7.5082 2.08917 7.5082H2V7.6V8.4V8.4918H2.08917C2.28465 8.4918 2.47001 8.53238 2.64601 8.61334L2.64742 8.61396C2.82457 8.69157 2.97577 8.79762 3.10221 8.93161L3.10412 8.93352C3.23428 9.0637 3.33659 9.21871 3.41129 9.39942L3.41201 9.40108C3.48986 9.58047 3.52866 9.76883 3.52866 9.96721C3.52866 10.2567 3.52272 10.5462 3.51084 10.8357C3.4987 11.1316 3.50677 11.4215 3.53516 11.7055L3.53535 11.7072C3.56819 11.9903 3.63387 12.265 3.73232 12.531L3.73283 12.5323C3.83793 12.805 4.00311 13.0558 4.22578 13.285C4.44942 13.5153 4.70818 13.692 5.00128 13.8153C5.29407 13.9384 5.59743 14 5.91083 14H6V13.2V13.0164H5.91083C5.71095 13.0164 5.52346 12.9777 5.34763 12.9008C5.17396 12.8191 5.02194 12.7126 4.89086 12.5818C4.76386 12.4469 4.66104 12.2911 4.58223 12.1137C4.50838 11.9346 4.47134 11.744 4.47134 11.541C4.47134 11.3127 4.4753 11.0885 4.48321 10.8686C4.49125 10.6411 4.49127 10.4195 4.48324 10.2039C4.47914 9.98246 4.46084 9.76883 4.42823 9.56312C4.39513 9.35024 4.33921 9.14757 4.26039 8.95536C4.18091 8.76157 4.07258 8.57746 3.93616 8.40298C3.82345 8.25881 3.68538 8.12462 3.52283 8C3.68538 7.87538 3.82345 7.74119 3.93616 7.59702C4.07258 7.42254 4.18091 7.23843 4.26039 7.04464C4.33913 6.85263 4.39513 6.65175 4.42826 6.44285C4.46082 6.2333 4.47914 6.01973 4.48324 5.80219C4.49127 5.58262 4.49125 5.36105 4.48321 5.13749C4.4753 4.9134 4.47134 4.68725 4.47134 4.45902C4.47134 4.26019 4.50833 4.07152 4.58238 3.89205C4.66135 3.71034 4.76421 3.55475 4.89086 3.42437C5.02193 3.28942 5.17461 3.18275 5.34802 3.10513C5.5238 3.02427 5.71113 2.98361 5.91083 2.98361H6ZM10 13.0164V13.0282V14H10.0892C10.4026 14 10.7059 13.9384 10.9987 13.8153C11.2918 13.692 11.5506 13.5153 11.7742 13.285C11.9969 13.0558 12.1621 12.805 12.2672 12.5323L12.2677 12.531C12.3662 12.2648 12.4319 11.988 12.4647 11.7008L12.4648 11.6995C12.4932 11.4195 12.5013 11.1316 12.4892 10.8357C12.4773 10.5462 12.4713 10.2567 12.4713 9.96721C12.4713 9.76444 12.5103 9.57406 12.588 9.39493L12.5884 9.39399C12.6631 9.21704 12.7658 9.06134 12.8968 8.92642C13.0236 8.79595 13.1753 8.68945 13.3533 8.6075C13.5294 8.53046 13.715 8.4918 13.9108 8.4918H14V8.4V7.6V7.5082H13.9108C13.7153 7.5082 13.53 7.46762 13.354 7.38666L13.3526 7.38604C13.1754 7.30844 13.0242 7.20238 12.8978 7.06839L12.8959 7.06648C12.7657 6.9363 12.6634 6.78129 12.5887 6.60058L12.588 6.59892C12.5101 6.41953 12.4713 6.23117 12.4713 6.03279C12.4713 5.74329 12.4773 5.45379 12.4892 5.16428C12.5013 4.86842 12.4932 4.57848 12.4648 4.29454L12.4646 4.29285C12.4318 4.00971 12.3661 3.73502 12.2677 3.46897L12.2672 3.46766C12.1621 3.19499 11.9969 2.94422 11.7742 2.71498C11.5506 2.48474 11.2918 2.30798 10.9987 2.18473C10.7059 2.06161 10.4026 2 10.0892 2H10V2.8V2.98361H10.0892C10.2891 2.98361 10.4765 3.0223 10.6524 3.09917C10.826 3.18092 10.9781 3.28736 11.1091 3.41823C11.2361 3.55305 11.339 3.70889 11.4178 3.88628C11.4916 4.0654 11.5287 4.25596 11.5287 4.45902C11.5287 4.68727 11.5247 4.91145 11.5168 5.13142C11.5088 5.35894 11.5087 5.58049 11.5168 5.79605C11.5209 6.01754 11.5392 6.23117 11.5718 6.43688C11.6049 6.64976 11.6608 6.85243 11.7396 7.04464C11.8191 7.23843 11.9274 7.42254 12.0638 7.59702C12.1765 7.74119 12.3146 7.87538 12.4772 8C12.3146 8.12462 12.1765 8.25881 12.0638 8.40298C11.9274 8.57746 11.8191 8.76157 11.7396 8.95536C11.6609 9.14737 11.6049 9.34825 11.5717 9.55715C11.5392 9.7667 11.5209 9.98027 11.5168 10.1978C11.5087 10.4174 11.5087 10.6389 11.5168 10.8625C11.5247 11.0866 11.5287 11.3128 11.5287 11.541C11.5287 11.7398 11.4917 11.9285 11.4176 12.1079C11.3386 12.2897 11.2358 12.4452 11.1091 12.5756C10.9781 12.7106 10.8254 12.8173 10.652 12.8949C10.4762 12.9757 10.2889 13.0164 10.0892 13.0164H10Z" fill="#424242"/>
</svg>
`,am=`<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
<path fill-rule="evenodd" clip-rule="evenodd" d="M1.49915 2H14.4991L14.9991 2.5V12.5L14.4991 13H1.49915L0.999146 12.5V2.5L1.49915 2ZM1.99915 3V12H13.9991V3H1.99915ZM3.99915 5H11.9991V6H3.99915V5ZM9.99915 7H3.99915V8H9.99915V7ZM3.99915 9H7.99915V10H3.99915V9Z" fill="#424242"/>
</svg>
`,lm=`<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
<path fill-rule="evenodd" clip-rule="evenodd" d="M11.1052 4.5613L7.67505 7.98827L6.54072 6.86834L8.61098 4.78848H3.81131C3.17483 4.78848 2.56442 5.04132 2.11436 5.49138C1.6643 5.94144 1.41147 6.55184 1.41147 7.18832C1.41147 7.8248 1.6643 8.43521 2.11436 8.88527C2.56442 9.33532 3.17483 9.58816 3.81131 9.58816H4.70085V11.1881H3.8209C2.7921 11.142 1.8207 10.7009 1.10896 9.95661C0.397222 9.21231 0 8.22216 0 7.19232C0 6.16249 0.397222 5.17234 1.10896 4.42803C1.8207 3.68373 2.7921 3.24263 3.8209 3.19659H8.62058L6.54072 1.13112L7.67505 0L11.1052 3.43177V4.5613ZM16.6201 24H7.0207L6.22075 23.2V10.4121L7.0207 9.61215H16.6201L17.42 10.4121V23.2L16.6201 24ZM7.82064 22.4001H15.8201V11.212H7.82064V22.4001ZM13.4203 1.6015H23.0196L23.8196 2.40145V15.1878L23.0196 15.9877H19.0199V14.3878H22.2197V3.20139H14.2202V7.98828H12.6203V2.40145L13.4203 1.6015ZM14.2202 12.7879H9.42053V14.3878H14.2202V12.7879ZM9.42053 15.9877H14.2202V17.5876H9.42053V15.9877ZM14.2202 19.1875H9.42053V20.7874H14.2202V19.1875ZM15.8201 4.78848H20.6198V6.38838H15.8201V4.78848ZM20.6198 11.188H19.0199V12.7879H20.6198V11.188ZM17.2824 8.01228V7.98828H20.6198V9.58817H18.8583L17.2824 8.01228Z" fill="#424242"/>
</svg>
`,cm=`<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M11.34 9.70998H12.05L14.72 7.04005V6.32997L13.38 5.00001H12.68L10.86 6.81007H5.86V5.56007L7.71999 3.70997V3L5.71998 1H5.00001L1 5.00001V5.70997L3 7.70998H3.71003L4.84998 6.56007V12.35L5.34999 12.85H10V13.37L11.33 14.71H12.04L14.7101 12.0401V11.33L13.37 10H12.67L10.81 11.85H5.81001V7.84999H10V8.32997L11.34 9.70998ZM13.0301 6.06007L13.66 6.68995L11.66 8.68996L11.0301 8.06007L13.0301 6.06007ZM13.0301 11.0601L13.66 11.69L11.66 13.69L11.0301 13.0601L13.0301 11.0601ZM3.34998 6.65004L2.06 5.34999L5.34999 2.06006L6.65004 3.34998L3.34998 6.65004Z" fill="#EE9D28"/>
</svg>
`,hm=`<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
<path fill-rule="evenodd" clip-rule="evenodd" d="M8 1.00305C6.14348 1.00305 4.36299 1.74059 3.05023 3.05334C1.73748 4.3661 1 6.14654 1 8.00305V8.43311C1.09 9.94311 2.91 10.2231 4 9.13306C4.35648 8.81625 4.82054 8.64759 5.29724 8.66162C5.77395 8.67565 6.22729 8.87127 6.56451 9.2085C6.90174 9.54572 7.09736 9.99912 7.11139 10.4758C7.12542 10.9525 6.95682 11.4166 6.64001 11.7731C5.54001 12.9331 5.85 14.843 7.44 14.973H8.03998C9.89649 14.973 11.677 14.2356 12.9897 12.9229C14.3025 11.6101 15.04 9.82954 15.04 7.97302C15.04 6.11651 14.3025 4.33607 12.9897 3.02332C11.677 1.71056 9.89649 0.973022 8.03998 0.973022L8 1.00305ZM8 14.0031H7.47998C7.34751 13.9989 7.22047 13.9495 7.12 13.863C7.04052 13.7807 6.98815 13.6761 6.96997 13.5631C6.9381 13.3682 6.95328 13.1684 7.01416 12.9806C7.07504 12.7927 7.17989 12.6222 7.32001 12.483C7.84048 11.9474 8.13165 11.2299 8.13165 10.483C8.13165 9.73615 7.84048 9.0187 7.32001 8.48303C7.05348 8.21635 6.73699 8.00481 6.38867 7.86047C6.04036 7.71614 5.66702 7.64185 5.28998 7.64185C4.91294 7.64185 4.5396 7.71614 4.19128 7.86047C3.84297 8.00481 3.52654 8.21635 3.26001 8.48303C3.15068 8.61081 3.01089 8.709 2.85358 8.76843C2.69626 8.82786 2.52649 8.84657 2.35999 8.823C2.27593 8.80694 2.19903 8.76498 2.14001 8.703C2.07131 8.6224 2.03556 8.5189 2.03998 8.41309V8.04309C2.03998 6.8564 2.39192 5.69629 3.05121 4.70959C3.7105 3.7229 4.64754 2.95388 5.7439 2.49976C6.84025 2.04563 8.04669 1.92681 9.21057 2.15833C10.3745 2.38984 11.4435 2.9613 12.2827 3.80042C13.1218 4.63953 13.6932 5.70867 13.9247 6.87256C14.1562 8.03644 14.0374 9.24275 13.5833 10.3391C13.1291 11.4355 12.3601 12.3726 11.3734 13.0319C10.3867 13.6911 9.22667 14.0431 8.03998 14.0431L8 14.0031ZM9 3.99683C9 4.54911 8.55228 4.99683 8 4.99683C7.44771 4.99683 7 4.54911 7 3.99683C7 3.44454 7.44771 2.99683 8 2.99683C8.55228 2.99683 9 3.44454 9 3.99683ZM12 11.0037C12 11.5559 11.5523 12.0037 11 12.0037C10.4477 12.0037 10 11.5559 10 11.0037C10 10.4514 10.4477 10.0037 11 10.0037C11.5523 10.0037 12 10.4514 12 11.0037ZM5 6.00415C5.55229 6.00415 6 5.55644 6 5.00415C6 4.45187 5.55229 4.00415 5 4.00415C4.44772 4.00415 4 4.45187 4 5.00415C4 5.55644 4.44772 6.00415 5 6.00415ZM12 5.00415C12 5.55644 11.5523 6.00415 11 6.00415C10.4477 6.00415 10 5.55644 10 5.00415C10 4.45187 10.4477 4.00415 11 4.00415C11.5523 4.00415 12 4.45187 12 5.00415ZM13.0001 7.99939C13.0001 8.55167 12.5524 8.99939 12.0001 8.99939C11.4478 8.99939 11.0001 8.55167 11.0001 7.99939C11.0001 7.4471 11.4478 6.99939 12.0001 6.99939C12.5524 6.99939 13.0001 7.4471 13.0001 7.99939Z" fill="#424242"/>
</svg>
`,um=`<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
<path fill-rule="evenodd" clip-rule="evenodd" d="M4 6H12V7H4V6ZM12 9H4V10H12V9Z" fill="#424242"/>
<path fill-rule="evenodd" clip-rule="evenodd" d="M1 4L2 3H14L15 4V12L14 13H2L1 12V4ZM2 4V12H14V4H2Z" fill="#424242"/>
</svg>
`,fm=`<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
<path fill-rule="evenodd" clip-rule="evenodd" d="M7 3L8 2H14L15 3V8L14 9H10V8H14V3H8V6H7V3ZM9 9V8L8 7H7H2L1 8V13L2 14H8L9 13V9ZM8 8V9V13H2V8H7H8ZM9.41421 7L9 6.58579V6H13V7H9.41421ZM9 4H13V5H9V4ZM7 10H3V11H7V10Z" fill="#007ACC"/>
</svg>
`,dm=`<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
<path fill-rule="evenodd" clip-rule="evenodd" d="M14 2H8L7 3V6H8V3H14V8H10V9H14L15 8V3L14 2ZM9 6H13V7H9.41L9 6.59V6ZM7 7H2L1 8V13L2 14H8L9 13V8L8 7H7ZM8 13H2V8H8V9V13ZM3 9H7V10H3V9ZM3 11H7V12H3V11ZM9 4H13V5H9V4Z" fill="#EE9D28"/>
</svg>
`,_m=`<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
<path fill-rule="evenodd" clip-rule="evenodd" d="M7.41354 1.55996L8.31152 1H11.6056L12.424 2.57465L10.2356 6H12.0174L12.7363 7.69512L5.61943 15L4.01675 13.837L6.11943 10H4.89798L4 8.55996L7.41354 1.55996ZM7.78033 9L4.90054 14.3049L12.0174 7H8.31152L11.6056 2H8.31152L4.89798 9H7.78033Z" fill="#FF8E00"/>
</svg>
`,pm=`<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M14.45 4.5L9.44995 2H8.55005L1.55005 5.5L1 6.39001V10.89L1.55005 11.79L6.55005 14.29H7.44995L14.45 10.79L15 9.89001V5.39001L14.45 4.5ZM6.44995 13.14L1.94995 10.89V7.17004L6.44995 9.17004V13.14ZM6.94995 8.33997L2.29004 6.22998L8.94995 2.89001L13.62 5.22998L6.94995 8.33997ZM13.95 9.89001L7.44995 13.14V9.20996L13.95 6.20996V9.89001Z" fill="#007ACC"/>
</svg>
`,gm=`<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M11.4965 4C10.655 3.9989 9.84136 4.30189 9.20557 4.85315C8.56977 5.40442 8.15465 6.16684 8.0365 7H4.9364C4.8147 6.52867 4.52533 6.11794 4.12244 5.84473C3.71955 5.57152 3.23083 5.45466 2.74792 5.51599C2.26502 5.57733 1.82106 5.81261 1.49927 6.17786C1.17747 6.54311 1 7.01322 1 7.5C1 7.98679 1.17747 8.45689 1.49927 8.82215C1.82106 9.1874 2.26502 9.42267 2.74792 9.48401C3.23083 9.54535 3.71955 9.42848 4.12244 9.15528C4.52533 8.88207 4.8147 8.47133 4.9364 8H8.0365C8.13236 8.66418 8.41717 9.28683 8.85693 9.7937C9.2967 10.3006 9.87284 10.6703 10.5168 10.8589C11.1609 11.0475 11.8455 11.047 12.4893 10.8574C13.133 10.6679 13.7087 10.2973 14.1477 9.7898C14.5867 9.28227 14.8706 8.65919 14.9655 7.99488C15.0603 7.33056 14.9621 6.65298 14.6827 6.04285C14.4034 5.43272 13.9545 4.91578 13.3895 4.55359C12.8246 4.19141 12.1675 3.99922 11.4965 4ZM11.4965 10C11.002 10 10.5187 9.85332 10.1075 9.57862C9.69642 9.30391 9.37599 8.91348 9.18677 8.45667C8.99755 7.99985 8.94809 7.49728 9.04456 7.01233C9.14102 6.52738 9.37901 6.08181 9.72864 5.73218C10.0783 5.38255 10.5238 5.14456 11.0088 5.0481C11.4937 4.95164 11.9963 5.00109 12.4531 5.19031C12.9099 5.37953 13.3004 5.69996 13.5751 6.11109C13.8498 6.52221 13.9965 7.00555 13.9965 7.5C13.9965 8.16304 13.7331 8.79898 13.2643 9.26783C12.7954 9.73667 12.1595 10 11.4965 10Z" fill="#007ACC"/>
</svg>
`,mm=`<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M15 4H10V3H15V4ZM14 7H12V8H14V7ZM10 7H1V8H10V7ZM12 13H1V14H12V13ZM7 10H1V11H7V10ZM15 10H10V11H15V10ZM8 2V5H1V2H8ZM7 3H2V4H7V3Z" fill="#424242"/>
</svg>
`,Ur=`<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M13.51 4L8.51001 1H7.51001L2.51001 4L2.02002 4.85999V10.86L2.51001 11.71L7.51001 14.71H8.51001L13.51 11.71L14 10.86V4.85999L13.51 4ZM7.51001 13.5601L3.01001 10.86V5.69995L7.51001 8.15002V13.5601ZM3.27002 4.69995L8.01001 1.85999L12.75 4.69995L8.01001 7.29004L3.27002 4.69995ZM13.01 10.86L8.51001 13.5601V8.15002L13.01 5.69995V10.86Z" fill="#652D90"/>
</svg>
`,vm=`<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
<path fill-rule="evenodd" clip-rule="evenodd" d="M2.87289 1.10023C3.20768 1.23579 3.47545 1.498 3.61802 1.82988C3.69032 1.99959 3.72675 2.18242 3.72502 2.36688C3.72617 2.54999 3.68975 2.7314 3.61802 2.89988C3.51299 3.14567 3.33782 3.35503 3.11442 3.50177C2.89102 3.64851 2.6293 3.72612 2.36202 3.72488C2.17924 3.72592 1.99818 3.68951 1.83002 3.61788C1.58298 3.51406 1.37227 3.33932 1.22453 3.11575C1.0768 2.89219 0.998666 2.62984 1.00002 2.36188C0.99913 2.17921 1.03519 1.99825 1.10602 1.82988C1.24337 1.50314 1.50328 1.24323 1.83002 1.10588C2.16332 0.966692 2.53809 0.964661 2.87289 1.10023ZM2.57502 2.86488C2.7054 2.80913 2.80927 2.70526 2.86502 2.57488C2.8929 2.50838 2.90718 2.43698 2.90702 2.36488C2.90813 2.2654 2.88215 2.1675 2.83185 2.08167C2.78156 1.99584 2.70884 1.92531 2.62151 1.87767C2.53418 1.83002 2.43553 1.80705 2.33614 1.81121C2.23674 1.81537 2.14035 1.8465 2.05731 1.90128C1.97426 1.95606 1.9077 2.03241 1.86475 2.12215C1.8218 2.21188 1.80409 2.31161 1.81352 2.41065C1.82294 2.50968 1.85915 2.60428 1.91825 2.6843C1.97736 2.76433 2.05713 2.82675 2.14902 2.86488C2.28549 2.92089 2.43854 2.92089 2.57502 2.86488ZM6.42995 1.1095L1.10967 6.42977L1.79557 7.11567L7.11584 1.7954L6.42995 1.1095ZM11.5 8.99999H12.5V11.5H15V12.5H12.5V15H11.5V12.5H9V11.5H11.5V8.99999ZM5.76777 9.52509L6.47487 10.2322L4.70711 12L6.47487 13.7677L5.76777 14.4748L4 12.7071L2.23223 14.4748L1.52513 13.7677L3.29289 12L1.52513 10.2322L2.23223 9.52509L4 11.2929L5.76777 9.52509ZM7.11802 5.32988C7.01442 5.08268 6.83973 4.87183 6.61612 4.72406C6.3925 4.57629 6.13004 4.49826 5.86202 4.49988C5.67935 4.49899 5.49839 4.53505 5.33002 4.60588C5.00328 4.74323 4.74337 5.00314 4.60602 5.32988C4.53588 5.49478 4.49897 5.67191 4.49741 5.8511C4.49586 6.0303 4.52967 6.20804 4.59693 6.37414C4.66419 6.54024 4.76356 6.69143 4.88936 6.81906C5.01516 6.94669 5.1649 7.04823 5.33002 7.11788C5.49867 7.18848 5.67968 7.22484 5.86252 7.22484C6.04535 7.22484 6.22636 7.18848 6.39502 7.11788C6.64201 7.01388 6.8527 6.83913 7.00058 6.61563C7.14845 6.39213 7.22689 6.12987 7.22602 5.86188C7.22655 5.67905 7.1898 5.49803 7.11802 5.32988ZM6.36502 6.07488C6.33766 6.13937 6.29829 6.19808 6.24902 6.24788C6.19908 6.29724 6.14042 6.33691 6.07602 6.36488C6.00854 6.39297 5.93611 6.40725 5.86302 6.40688C5.78991 6.40744 5.71744 6.39315 5.65002 6.36488C5.58541 6.33729 5.52668 6.29757 5.47702 6.24788C5.42691 6.19856 5.38713 6.13975 5.36002 6.07488C5.30401 5.9384 5.30401 5.78536 5.36002 5.64888C5.41536 5.51846 5.51941 5.41477 5.65002 5.35988C5.71737 5.33126 5.78984 5.31663 5.86302 5.31688C5.93618 5.31685 6.0086 5.33147 6.07602 5.35988C6.14037 5.38749 6.19904 5.42682 6.24902 5.47588C6.29786 5.52603 6.33717 5.58465 6.36502 5.64888C6.3934 5.7163 6.40802 5.78872 6.40802 5.86188C6.40802 5.93503 6.3934 6.00745 6.36502 6.07488ZM14 3H10V4H14V3Z" fill="#424242"/>
</svg>
`,bm=`<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
<path fill-rule="evenodd" clip-rule="evenodd" d="M11 6H10V5.5C10 5.22386 9.77616 5 9.50001 5H8.47902V10.5C8.47902 10.7761 8.70288 11 8.97902 11H9.47902V12H6.47902V11H6.97902C7.25516 11 7.47902 10.7761 7.47902 10.5V5H6.50001C6.22387 5 6.00001 5.22386 6.00001 5.5V6H5.00001V4H11V6ZM13.9142 8.0481L12.4519 6.58581L13.159 5.87871L14.9749 7.69454V8.40165L13.2071 10.1694L12.5 9.46231L13.9142 8.0481ZM3.5481 9.4623L2.08581 8.00002L3.50002 6.58581L2.79291 5.8787L1.02515 7.64647V8.35357L2.841 10.1694L3.5481 9.4623Z" fill="#424242"/>
</svg>
`,ym=`<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M2.80723 14.9754C2.57119 14.9721 2.33826 14.9211 2.12247 14.8254C1.90667 14.7297 1.71248 14.5913 1.55158 14.4186C1.2385 14.1334 1.04433 13.7408 1.00775 13.3189C0.966225 12.8828 1.09269 12.4473 1.36133 12.1013C2.56779 10.8289 4.9473 8.4494 6.67811 6.75479C6.30983 5.75887 6.32704 4.66127 6.72637 3.67739C7.05474 2.85876 7.63869 2.16805 8.39129 1.70807C8.9817 1.31706 9.66031 1.07944 10.3657 1.01673C11.0711 0.954022 11.7809 1.06819 12.4311 1.34892L13.0482 1.6162L10.1824 4.56738L11.4371 5.82582L14.3809 2.94887L14.6482 3.56788C14.8735 4.08976 14.993 4.65119 14.9997 5.21961C15.0064 5.78802 14.9002 6.35211 14.6872 6.87915C14.476 7.40029 14.1623 7.87368 13.7647 8.27122C13.5394 8.49169 13.2904 8.68653 13.0222 8.85218C12.4673 9.22275 11.8324 9.45636 11.1697 9.5338C10.5069 9.61124 9.83521 9.5303 9.20982 9.29764C8.11194 10.4113 5.37142 13.1704 3.89119 14.5522C3.59426 14.8219 3.20832 14.9726 2.80723 14.9754ZM10.7448 1.92802C10.087 1.92637 9.44359 2.12018 8.89614 2.48485C8.68265 2.6152 8.48437 2.76897 8.30498 2.9433C7.82789 3.42423 7.50926 4.03953 7.39182 4.70669C7.27437 5.37385 7.36374 6.06098 7.64792 6.67591L7.78342 6.97288L7.55048 7.20025C5.81224 8.89672 3.28146 11.4201 2.06479 12.7045C1.95646 12.8658 1.91012 13.0608 1.93435 13.2535C1.95857 13.4463 2.05171 13.6238 2.19657 13.7532C2.28005 13.8462 2.38177 13.9211 2.49541 13.9731C2.59557 14.0184 2.70383 14.043 2.81373 14.0455C2.98064 14.0413 3.14044 13.977 3.26383 13.8646C4.83687 12.3964 7.87622 9.32641 8.76807 8.42435L8.9973 8.19326L9.29242 8.32783C9.80618 8.56732 10.3731 8.66985 10.9382 8.62545C11.5033 8.58106 12.0473 8.39125 12.5174 8.07447C12.7313 7.9426 12.9296 7.78694 13.1085 7.61045C13.4183 7.30153 13.6631 6.93374 13.8286 6.52874C13.994 6.12375 14.0767 5.68974 14.0719 5.25228C14.0719 5.03662 14.0505 4.82148 14.0078 4.61007L11.4306 7.12508L8.87944 4.57759L11.3944 1.98834C11.1804 1.94674 10.9628 1.92653 10.7448 1.92802Z" fill="#424242"/>
</svg>
`,Cm=`<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
<path fill-rule="evenodd" clip-rule="evenodd" d="M4 1L3 2V14L4 15H12L13 14V2L12 1H4ZM4 3V2H12V14H4V13H6V12H4V10H8V9H4V7H6V6H4V4H8V3H4Z" fill="#424242"/>
</svg>
`,Sm=`<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
<path fill-rule="evenodd" clip-rule="evenodd" d="M2.5 1L2 1.5V13H3V2H14V13H15V1.5L14.5 1H2.5ZM2 15V14H3V15H2ZM5 14.0001H4V15.0001H5V14.0001ZM6 14.0001H7V15.0001H6V14.0001ZM9 14.0001H8V15.0001H9V14.0001ZM10 14.0001H11V15.0001H10V14.0001ZM15 15.0001V14.0001H14V15.0001H15ZM12 14.0001H13V15.0001H12V14.0001Z" fill="#424242"/>
</svg>
`,wm=`<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
<path fill-rule="evenodd" clip-rule="evenodd" d="M2 2L1 3V12L2 13H14L15 12V3L14 2H2ZM2 12V3H14V12H2ZM5.3556 8.93017H6V7.22067C6 6.40689 5.68534 6 5.05603 6C4.92098 6 4.77083 6.02421 4.6056 6.07263C4.44181 6.12104 4.3125 6.17691 4.21767 6.24022V6.90503C4.45474 6.70205 4.70474 6.60056 4.96767 6.60056C5.22917 6.60056 5.35991 6.75698 5.35991 7.06983L4.76078 7.17318C4.25359 7.25885 4 7.57914 4 8.13408C4 8.39665 4.06106 8.60708 4.18319 8.76536C4.30675 8.92179 4.47557 9 4.68966 9C4.97989 9 5.19899 8.83985 5.34698 8.51955H5.3556V8.93017ZM5.35991 7.57542V7.76816C5.35991 7.9432 5.31968 8.08845 5.23922 8.20391C5.15876 8.3175 5.0546 8.3743 4.92672 8.3743C4.83477 8.3743 4.76149 8.34264 4.7069 8.27933C4.65374 8.21415 4.62716 8.13128 4.62716 8.03073C4.62716 7.80912 4.73779 7.6797 4.95905 7.64246L5.35991 7.57542ZM7.60094 8.62622H7.59343V8.93511H7V5H7.59343V6.67683H7.60094C7.74742 6.36708 7.95587 6.2122 8.22629 6.2122C8.47418 6.2122 8.6651 6.32987 8.79906 6.56522C8.93302 6.80056 9 7.12243 9 7.53082C9 7.97383 8.92175 8.32944 8.76526 8.59766C8.60876 8.86589 8.39969 9 8.13803 9C7.90141 9 7.72238 8.87541 7.60094 8.62622ZM7.58404 7.50487V7.77742C7.58404 7.94873 7.61972 8.09063 7.69108 8.20311C7.76244 8.3156 7.85383 8.37184 7.96526 8.37184C8.10047 8.37184 8.20501 8.30002 8.27887 8.15639C8.35399 8.01103 8.39155 7.80597 8.39155 7.54121C8.39155 7.32144 8.35712 7.15012 8.28826 7.02726C8.22066 6.90266 8.12363 6.84036 7.99718 6.84036C7.87825 6.84036 7.77934 6.9018 7.70047 7.02466C7.62285 7.14752 7.58404 7.30759 7.58404 7.50487ZM11.2616 9C11.5834 9 11.8295 8.94227 12 8.82682V8.11732C11.82 8.25512 11.636 8.32402 11.448 8.32402C11.2362 8.32402 11.0697 8.25233 10.9486 8.10894C10.8276 7.96369 10.767 7.76443 10.767 7.51117C10.767 7.25047 10.8299 7.04656 10.9558 6.89944C11.0832 6.75047 11.2553 6.67598 11.4719 6.67598C11.6663 6.67598 11.8423 6.74488 12 6.88268V6.13408C11.871 6.04469 11.6623 6 11.374 6C10.9566 6 10.6229 6.1406 10.3728 6.42179C10.1243 6.70112 10 7.0838 10 7.56983C10 7.99069 10.1163 8.33426 10.3489 8.60056C10.5814 8.86685 10.8857 9 11.2616 9Z" fill="#424242"/>
</svg>
`,km=`<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
<path fill-rule="evenodd" clip-rule="evenodd" d="M14 3H2V6H14V3ZM2 10H5V13H2V10ZM11 10H14V13H11V10Z" fill="#424242"/>
</svg>
`,ya=`<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
<path fill-rule="evenodd" clip-rule="evenodd" d="M2 5H4V4H1.5L1 4.5V12.5L1.5 13H4V12H2V5ZM14.5 4H12V5H14V12H12V13H14.5L15 12.5V4.5L14.5 4ZM11.76 6.56995L12 7V9.51001L11.7 9.95996L7.19995 11.96H6.73999L4.23999 10.46L4 10.03V7.53003L4.30005 7.06995L8.80005 5.06995H9.26001L11.76 6.56995ZM5 9.70996L6.5 10.61V9.28003L5 8.38V9.70996ZM5.57996 7.56006L7.03003 8.43005L10.42 6.93005L8.96997 6.06006L5.57996 7.56006ZM7.53003 10.73L11.03 9.17004V7.77002L7.53003 9.31995V10.73Z" fill="#007ACC"/>
</svg>
`,Lm=`<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
<path fill-rule="evenodd" clip-rule="evenodd" d="M10.57 1.14L13.85 4.44L14 4.8V14.5L13.5 15H2.5L2 14.5V1.5L2.5 1H10.22L10.57 1.14ZM10 5H13L10 2V5ZM3 2V14H13V6H9.5L9 5.5V2H3ZM11 7H5V8H11V7ZM5 9H11V10H5V9ZM11 11H5V12H11V11Z" fill="#C5C5C5"/>
</svg>
`,Em=`<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M14.5 3H7.70996L6.85999 2.15002L6.51001 2H1.51001L1.01001 2.5V6.5V13.5L1.51001 14H14.51L15.01 13.5V9V3.5L14.5 3ZM13.99 11.49V13H1.98999V11.49V7.48999V7H6.47998L6.82996 6.84998L7.68994 5.98999H14V7.48999L13.99 11.49ZM13.99 5H7.48999L7.14001 5.15002L6.28003 6.01001H2V3.01001H6.29004L7.14001 3.85999L7.5 4.01001H14L13.99 5Z" fill="#C5C5C5"/>
</svg>
`,Dm=`<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
<path fill-rule="evenodd" clip-rule="evenodd" d="M6 2.98361V2.97184V2H5.91083C5.59743 2 5.29407 2.06161 5.00128 2.18473C4.70818 2.30798 4.44942 2.48474 4.22578 2.71498C4.00311 2.94422 3.83792 3.19498 3.73282 3.46766L3.73233 3.46898C3.63382 3.7352 3.56814 4.01201 3.53533 4.29917L3.53519 4.30053C3.50678 4.5805 3.4987 4.86844 3.51084 5.16428C3.52272 5.45379 3.52866 5.74329 3.52866 6.03279C3.52866 6.23556 3.48974 6.42594 3.412 6.60507L3.4116 6.60601C3.33687 6.78296 3.23423 6.93866 3.10317 7.07359C2.97644 7.20405 2.82466 7.31055 2.64672 7.3925C2.4706 7.46954 2.28497 7.5082 2.08917 7.5082H2V7.6V8.4V8.4918H2.08917C2.28465 8.4918 2.47001 8.53238 2.64601 8.61334L2.64742 8.61396C2.82457 8.69157 2.97577 8.79762 3.10221 8.93161L3.10412 8.93352C3.23428 9.0637 3.33659 9.21871 3.41129 9.39942L3.41201 9.40108C3.48986 9.58047 3.52866 9.76883 3.52866 9.96721C3.52866 10.2567 3.52272 10.5462 3.51084 10.8357C3.4987 11.1316 3.50677 11.4215 3.53516 11.7055L3.53535 11.7072C3.56819 11.9903 3.63387 12.265 3.73232 12.531L3.73283 12.5323C3.83793 12.805 4.00311 13.0558 4.22578 13.285C4.44942 13.5153 4.70818 13.692 5.00128 13.8153C5.29407 13.9384 5.59743 14 5.91083 14H6V13.2V13.0164H5.91083C5.71095 13.0164 5.52346 12.9777 5.34763 12.9008C5.17396 12.8191 5.02194 12.7126 4.89086 12.5818C4.76386 12.4469 4.66104 12.2911 4.58223 12.1137C4.50838 11.9346 4.47134 11.744 4.47134 11.541C4.47134 11.3127 4.4753 11.0885 4.48321 10.8686C4.49125 10.6411 4.49127 10.4195 4.48324 10.2039C4.47914 9.98246 4.46084 9.76883 4.42823 9.56312C4.39513 9.35024 4.33921 9.14757 4.26039 8.95536C4.18091 8.76157 4.07258 8.57746 3.93616 8.40298C3.82345 8.25881 3.68538 8.12462 3.52283 8C3.68538 7.87538 3.82345 7.74119 3.93616 7.59702C4.07258 7.42254 4.18091 7.23843 4.26039 7.04464C4.33913 6.85263 4.39513 6.65175 4.42826 6.44285C4.46082 6.2333 4.47914 6.01973 4.48324 5.80219C4.49127 5.58262 4.49125 5.36105 4.48321 5.13749C4.4753 4.9134 4.47134 4.68725 4.47134 4.45902C4.47134 4.26019 4.50833 4.07152 4.58238 3.89205C4.66135 3.71034 4.76421 3.55475 4.89086 3.42437C5.02193 3.28942 5.17461 3.18275 5.34802 3.10513C5.5238 3.02427 5.71113 2.98361 5.91083 2.98361H6ZM10 13.0164V13.0282V14H10.0892C10.4026 14 10.7059 13.9384 10.9987 13.8153C11.2918 13.692 11.5506 13.5153 11.7742 13.285C11.9969 13.0558 12.1621 12.805 12.2672 12.5323L12.2677 12.531C12.3662 12.2648 12.4319 11.988 12.4647 11.7008L12.4648 11.6995C12.4932 11.4195 12.5013 11.1316 12.4892 10.8357C12.4773 10.5462 12.4713 10.2567 12.4713 9.96721C12.4713 9.76444 12.5103 9.57406 12.588 9.39493L12.5884 9.39399C12.6631 9.21704 12.7658 9.06134 12.8968 8.92642C13.0236 8.79595 13.1753 8.68945 13.3533 8.6075C13.5294 8.53046 13.715 8.4918 13.9108 8.4918H14V8.4V7.6V7.5082H13.9108C13.7153 7.5082 13.53 7.46762 13.354 7.38666L13.3526 7.38604C13.1754 7.30844 13.0242 7.20238 12.8978 7.06839L12.8959 7.06648C12.7657 6.9363 12.6634 6.78129 12.5887 6.60058L12.588 6.59892C12.5101 6.41953 12.4713 6.23117 12.4713 6.03279C12.4713 5.74329 12.4773 5.45379 12.4892 5.16428C12.5013 4.86842 12.4932 4.57848 12.4648 4.29454L12.4646 4.29285C12.4318 4.00971 12.3661 3.73502 12.2677 3.46897L12.2672 3.46766C12.1621 3.19499 11.9969 2.94422 11.7742 2.71498C11.5506 2.48474 11.2918 2.30798 10.9987 2.18473C10.7059 2.06161 10.4026 2 10.0892 2H10V2.8V2.98361H10.0892C10.2891 2.98361 10.4765 3.0223 10.6524 3.09917C10.826 3.18092 10.9781 3.28736 11.1091 3.41823C11.2361 3.55305 11.339 3.70889 11.4178 3.88628C11.4916 4.0654 11.5287 4.25596 11.5287 4.45902C11.5287 4.68727 11.5247 4.91145 11.5168 5.13142C11.5088 5.35894 11.5087 5.58049 11.5168 5.79605C11.5209 6.01754 11.5392 6.23117 11.5718 6.43688C11.6049 6.64976 11.6608 6.85243 11.7396 7.04464C11.8191 7.23843 11.9274 7.42254 12.0638 7.59702C12.1765 7.74119 12.3146 7.87538 12.4772 8C12.3146 8.12462 12.1765 8.25881 12.0638 8.40298C11.9274 8.57746 11.8191 8.76157 11.7396 8.95536C11.6609 9.14737 11.6049 9.34825 11.5717 9.55715C11.5392 9.7667 11.5209 9.98027 11.5168 10.1978C11.5087 10.4174 11.5087 10.6389 11.5168 10.8625C11.5247 11.0866 11.5287 11.3128 11.5287 11.541C11.5287 11.7398 11.4917 11.9285 11.4176 12.1079C11.3386 12.2897 11.2358 12.4452 11.1091 12.5756C10.9781 12.7106 10.8254 12.8173 10.652 12.8949C10.4762 12.9757 10.2889 13.0164 10.0892 13.0164H10Z" fill="#C5C5C5"/>
</svg>
`,Mm=`<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
<path fill-rule="evenodd" clip-rule="evenodd" d="M1.49915 2H14.4991L14.9991 2.5V12.5L14.4991 13H1.49915L0.999146 12.5V2.5L1.49915 2ZM1.99915 3V12H13.9991V3H1.99915ZM3.99915 5H11.9991V6H3.99915V5ZM9.99915 7H3.99915V8H9.99915V7ZM3.99915 9H7.99915V10H3.99915V9Z" fill="#C5C5C5"/>
</svg>
`,Tm=`<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
<path fill-rule="evenodd" clip-rule="evenodd" d="M11.1052 4.5613L7.67505 7.98827L6.54072 6.86834L8.61098 4.78848H3.81131C3.17483 4.78848 2.56442 5.04132 2.11436 5.49138C1.6643 5.94144 1.41147 6.55184 1.41147 7.18832C1.41147 7.8248 1.6643 8.43521 2.11436 8.88527C2.56442 9.33532 3.17483 9.58816 3.81131 9.58816H4.70085V11.1881H3.8209C2.7921 11.142 1.8207 10.7009 1.10896 9.95661C0.397222 9.21231 0 8.22216 0 7.19232C0 6.16249 0.397222 5.17234 1.10896 4.42803C1.8207 3.68373 2.7921 3.24263 3.8209 3.19659H8.62058L6.54072 1.13112L7.67505 0L11.1052 3.43177V4.5613ZM16.6201 24H7.0207L6.22075 23.2V10.4121L7.0207 9.61215H16.6201L17.42 10.4121V23.2L16.6201 24ZM7.82064 22.4001H15.8201V11.212H7.82064V22.4001ZM13.4203 1.6015H23.0196L23.8196 2.40145V15.1878L23.0196 15.9877H19.0199V14.3878H22.2197V3.20139H14.2202V7.98828H12.6203V2.40145L13.4203 1.6015ZM14.2202 12.7879H9.42053V14.3878H14.2202V12.7879ZM9.42053 15.9877H14.2202V17.5876H9.42053V15.9877ZM14.2202 19.1875H9.42053V20.7874H14.2202V19.1875ZM15.8201 4.78848H20.6198V6.38838H15.8201V4.78848ZM20.6198 11.188H19.0199V12.7879H20.6198V11.188ZM17.2824 8.01228V7.98828H20.6198V9.58817H18.8583L17.2824 8.01228Z" fill="#C5C5C5"/>
</svg>
`,Am=`<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M11.34 9.70998H12.05L14.72 7.04005V6.32997L13.38 5.00001H12.68L10.86 6.81007H5.86V5.56007L7.71999 3.70997V3L5.71998 1H5.00001L1 5.00001V5.70997L3 7.70998H3.71003L4.84998 6.56007V12.35L5.34999 12.85H10V13.37L11.33 14.71H12.04L14.7101 12.0401V11.33L13.37 10H12.67L10.81 11.85H5.81001V7.84999H10V8.32997L11.34 9.70998ZM13.0301 6.06007L13.66 6.68995L11.66 8.68996L11.0301 8.06007L13.0301 6.06007ZM13.0301 11.0601L13.66 11.69L11.66 13.69L11.0301 13.0601L13.0301 11.0601ZM3.34998 6.65004L2.06 5.34999L5.34999 2.06006L6.65004 3.34998L3.34998 6.65004Z" fill="#EE9D28"/>
</svg>
`,Rm=`<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
<path fill-rule="evenodd" clip-rule="evenodd" d="M8 1.00305C6.14348 1.00305 4.36299 1.74059 3.05023 3.05334C1.73748 4.3661 1 6.14654 1 8.00305V8.43311C1.09 9.94311 2.91 10.2231 4 9.13306C4.35648 8.81625 4.82054 8.64759 5.29724 8.66162C5.77395 8.67565 6.22729 8.87127 6.56451 9.2085C6.90174 9.54572 7.09736 9.99912 7.11139 10.4758C7.12542 10.9525 6.95682 11.4166 6.64001 11.7731C5.54001 12.9331 5.85 14.843 7.44 14.973H8.03998C9.89649 14.973 11.677 14.2356 12.9897 12.9229C14.3025 11.6101 15.04 9.82954 15.04 7.97302C15.04 6.11651 14.3025 4.33607 12.9897 3.02332C11.677 1.71056 9.89649 0.973022 8.03998 0.973022L8 1.00305ZM8 14.0031H7.47998C7.34751 13.9989 7.22047 13.9495 7.12 13.863C7.04052 13.7807 6.98815 13.6761 6.96997 13.5631C6.9381 13.3682 6.95328 13.1684 7.01416 12.9806C7.07504 12.7927 7.17989 12.6222 7.32001 12.483C7.84048 11.9474 8.13165 11.2299 8.13165 10.483C8.13165 9.73615 7.84048 9.0187 7.32001 8.48303C7.05348 8.21635 6.73699 8.00481 6.38867 7.86047C6.04036 7.71614 5.66702 7.64185 5.28998 7.64185C4.91294 7.64185 4.5396 7.71614 4.19128 7.86047C3.84297 8.00481 3.52654 8.21635 3.26001 8.48303C3.15068 8.61081 3.01089 8.709 2.85358 8.76843C2.69626 8.82786 2.52649 8.84657 2.35999 8.823C2.27593 8.80694 2.19903 8.76498 2.14001 8.703C2.07131 8.6224 2.03556 8.5189 2.03998 8.41309V8.04309C2.03998 6.8564 2.39192 5.69629 3.05121 4.70959C3.7105 3.7229 4.64754 2.95388 5.7439 2.49976C6.84025 2.04563 8.04669 1.92681 9.21057 2.15833C10.3745 2.38984 11.4435 2.9613 12.2827 3.80042C13.1218 4.63953 13.6932 5.70867 13.9247 6.87256C14.1562 8.03644 14.0374 9.24275 13.5833 10.3391C13.1291 11.4355 12.3601 12.3726 11.3734 13.0319C10.3867 13.6911 9.22667 14.0431 8.03998 14.0431L8 14.0031ZM9 3.99683C9 4.54911 8.55228 4.99683 8 4.99683C7.44771 4.99683 7 4.54911 7 3.99683C7 3.44454 7.44771 2.99683 8 2.99683C8.55228 2.99683 9 3.44454 9 3.99683ZM12 11.0037C12 11.5559 11.5523 12.0037 11 12.0037C10.4477 12.0037 10 11.5559 10 11.0037C10 10.4514 10.4477 10.0037 11 10.0037C11.5523 10.0037 12 10.4514 12 11.0037ZM5 6.00415C5.55229 6.00415 6 5.55644 6 5.00415C6 4.45187 5.55229 4.00415 5 4.00415C4.44772 4.00415 4 4.45187 4 5.00415C4 5.55644 4.44772 6.00415 5 6.00415ZM12 5.00415C12 5.55644 11.5523 6.00415 11 6.00415C10.4477 6.00415 10 5.55644 10 5.00415C10 4.45187 10.4477 4.00415 11 4.00415C11.5523 4.00415 12 4.45187 12 5.00415ZM13.0001 7.99939C13.0001 8.55167 12.5524 8.99939 12.0001 8.99939C11.4478 8.99939 11.0001 8.55167 11.0001 7.99939C11.0001 7.4471 11.4478 6.99939 12.0001 6.99939C12.5524 6.99939 13.0001 7.4471 13.0001 7.99939Z" fill="#C5C5C5"/>
</svg>
`,Om=`<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
<path fill-rule="evenodd" clip-rule="evenodd" d="M4 6H12V7H4V6ZM12 9H4V10H12V9Z" fill="#C5C5C5"/>
<path fill-rule="evenodd" clip-rule="evenodd" d="M1 4L2 3H14L15 4V12L14 13H2L1 12V4ZM2 4V12H14V4H2Z" fill="#C5C5C5"/>
</svg>
`,Bm=`<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
<path fill-rule="evenodd" clip-rule="evenodd" d="M7 3L8 2H14L15 3V8L14 9H10V8H14V3H8V6H7V3ZM9 9V8L8 7H7H2L1 8V13L2 14H8L9 13V9ZM8 8V9V13H2V8H7H8ZM9.41421 7L9 6.58579V6H13V7H9.41421ZM9 4H13V5H9V4ZM7 10H3V11H7V10Z" fill="#75BEFF"/>
</svg>
`,Hm=`<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
<path fill-rule="evenodd" clip-rule="evenodd" d="M14 2H8L7 3V6H8V3H14V8H10V9H14L15 8V3L14 2ZM9 6H13V7H9.41L9 6.59V6ZM7 7H2L1 8V13L2 14H8L9 13V8L8 7H7ZM8 13H2V8H8V9V13ZM3 9H7V10H3V9ZM3 11H7V12H3V11ZM9 4H13V5H9V4Z" fill="#EE9D28"/>
</svg>
`,xm=`<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
<path fill-rule="evenodd" clip-rule="evenodd" d="M7.41354 1.55996L8.31152 1H11.6056L12.424 2.57465L10.2356 6H12.0174L12.7363 7.69512L5.61943 15L4.01675 13.837L6.11943 10H4.89798L4 8.55996L7.41354 1.55996ZM7.78033 9L4.90054 14.3049L12.0174 7H8.31152L11.6056 2H8.31152L4.89798 9H7.78033Z" fill="#EE9D28"/>
</svg>
`,Pm=`<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M14.45 4.5L9.44995 2H8.55005L1.55005 5.5L1 6.39001V10.89L1.55005 11.79L6.55005 14.29H7.44995L14.45 10.79L15 9.89001V5.39001L14.45 4.5ZM6.44995 13.14L1.94995 10.89V7.17004L6.44995 9.17004V13.14ZM6.94995 8.33997L2.29004 6.22998L8.94995 2.89001L13.62 5.22998L6.94995 8.33997ZM13.95 9.89001L7.44995 13.14V9.20996L13.95 6.20996V9.89001Z" fill="#75BEFF"/>
</svg>
`,Im=`<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M11.4965 4C10.655 3.9989 9.84136 4.30189 9.20557 4.85315C8.56977 5.40442 8.15465 6.16684 8.0365 7H4.9364C4.8147 6.52867 4.52533 6.11794 4.12244 5.84473C3.71955 5.57152 3.23083 5.45466 2.74792 5.51599C2.26502 5.57733 1.82106 5.81261 1.49927 6.17786C1.17747 6.54311 1 7.01322 1 7.5C1 7.98679 1.17747 8.45689 1.49927 8.82215C1.82106 9.1874 2.26502 9.42267 2.74792 9.48401C3.23083 9.54535 3.71955 9.42848 4.12244 9.15528C4.52533 8.88207 4.8147 8.47133 4.9364 8H8.0365C8.13236 8.66418 8.41717 9.28683 8.85693 9.7937C9.2967 10.3006 9.87284 10.6703 10.5168 10.8589C11.1609 11.0475 11.8455 11.047 12.4893 10.8574C13.133 10.6679 13.7087 10.2973 14.1477 9.7898C14.5867 9.28227 14.8706 8.65919 14.9655 7.99488C15.0603 7.33056 14.9621 6.65298 14.6827 6.04285C14.4034 5.43272 13.9545 4.91578 13.3895 4.55359C12.8246 4.19141 12.1675 3.99922 11.4965 4ZM11.4965 10C11.002 10 10.5187 9.85332 10.1075 9.57862C9.69642 9.30391 9.37599 8.91348 9.18677 8.45667C8.99755 7.99985 8.94809 7.49728 9.04456 7.01233C9.14102 6.52738 9.37901 6.08181 9.72864 5.73218C10.0783 5.38255 10.5238 5.14456 11.0088 5.0481C11.4937 4.95164 11.9963 5.00109 12.4531 5.19031C12.9099 5.37953 13.3004 5.69996 13.5751 6.11109C13.8498 6.52221 13.9965 7.00555 13.9965 7.5C13.9965 8.16304 13.7331 8.79898 13.2643 9.26783C12.7954 9.73667 12.1595 10 11.4965 10Z" fill="#75BEFF"/>
</svg>
`,Nm=`<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M15 4H10V3H15V4ZM14 7H12V8H14V7ZM10 7H1V8H10V7ZM12 13H1V14H12V13ZM7 10H1V11H7V10ZM15 10H10V11H15V10ZM8 2V5H1V2H8ZM7 3H2V4H7V3Z" fill="#C5C5C5"/>
</svg>
`,Wr=`<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M13.51 4L8.51001 1H7.51001L2.51001 4L2.02002 4.85999V10.86L2.51001 11.71L7.51001 14.71H8.51001L13.51 11.71L14 10.86V4.85999L13.51 4ZM7.51001 13.5601L3.01001 10.86V5.69995L7.51001 8.15002V13.5601ZM3.27002 4.69995L8.01001 1.85999L12.75 4.69995L8.01001 7.29004L3.27002 4.69995ZM13.01 10.86L8.51001 13.5601V8.15002L13.01 5.69995V10.86Z" fill="#B180D7"/>
</svg>
`,Vm=`<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
<path fill-rule="evenodd" clip-rule="evenodd" d="M2.87289 1.10023C3.20768 1.23579 3.47545 1.498 3.61802 1.82988C3.69032 1.99959 3.72675 2.18242 3.72502 2.36688C3.72617 2.54999 3.68975 2.7314 3.61802 2.89988C3.51299 3.14567 3.33782 3.35503 3.11442 3.50177C2.89102 3.64851 2.6293 3.72612 2.36202 3.72488C2.17924 3.72592 1.99818 3.68951 1.83002 3.61788C1.58298 3.51406 1.37227 3.33932 1.22453 3.11575C1.0768 2.89219 0.998666 2.62984 1.00002 2.36188C0.99913 2.17921 1.03519 1.99825 1.10602 1.82988C1.24337 1.50314 1.50328 1.24323 1.83002 1.10588C2.16332 0.966692 2.53809 0.964661 2.87289 1.10023ZM2.57502 2.86488C2.7054 2.80913 2.80927 2.70526 2.86502 2.57488C2.8929 2.50838 2.90718 2.43698 2.90702 2.36488C2.90813 2.2654 2.88215 2.1675 2.83185 2.08167C2.78156 1.99584 2.70884 1.92531 2.62151 1.87767C2.53418 1.83002 2.43553 1.80705 2.33614 1.81121C2.23674 1.81537 2.14035 1.8465 2.05731 1.90128C1.97426 1.95606 1.9077 2.03241 1.86475 2.12215C1.8218 2.21188 1.80409 2.31161 1.81352 2.41065C1.82294 2.50968 1.85915 2.60428 1.91825 2.6843C1.97736 2.76433 2.05713 2.82675 2.14902 2.86488C2.28549 2.92089 2.43854 2.92089 2.57502 2.86488ZM6.42995 1.1095L1.10967 6.42977L1.79557 7.11567L7.11584 1.7954L6.42995 1.1095ZM11.5 8.99999H12.5V11.5H15V12.5H12.5V15H11.5V12.5H9V11.5H11.5V8.99999ZM5.76777 9.52509L6.47487 10.2322L4.70711 12L6.47487 13.7677L5.76777 14.4748L4 12.7071L2.23223 14.4748L1.52513 13.7677L3.29289 12L1.52513 10.2322L2.23223 9.52509L4 11.2929L5.76777 9.52509ZM7.11802 5.32988C7.01442 5.08268 6.83973 4.87183 6.61612 4.72406C6.3925 4.57629 6.13004 4.49826 5.86202 4.49988C5.67935 4.49899 5.49839 4.53505 5.33002 4.60588C5.00328 4.74323 4.74337 5.00314 4.60602 5.32988C4.53588 5.49478 4.49897 5.67191 4.49741 5.8511C4.49586 6.0303 4.52967 6.20804 4.59693 6.37414C4.66419 6.54024 4.76356 6.69143 4.88936 6.81906C5.01516 6.94669 5.1649 7.04823 5.33002 7.11788C5.49867 7.18848 5.67968 7.22484 5.86252 7.22484C6.04535 7.22484 6.22636 7.18848 6.39502 7.11788C6.64201 7.01388 6.8527 6.83913 7.00058 6.61563C7.14845 6.39213 7.22689 6.12987 7.22602 5.86188C7.22655 5.67905 7.1898 5.49803 7.11802 5.32988ZM6.36502 6.07488C6.33766 6.13937 6.29829 6.19808 6.24902 6.24788C6.19908 6.29724 6.14042 6.33691 6.07602 6.36488C6.00854 6.39297 5.93611 6.40725 5.86302 6.40688C5.78991 6.40744 5.71744 6.39315 5.65002 6.36488C5.58541 6.33729 5.52668 6.29757 5.47702 6.24788C5.42691 6.19856 5.38713 6.13975 5.36002 6.07488C5.30401 5.9384 5.30401 5.78536 5.36002 5.64888C5.41536 5.51846 5.51941 5.41477 5.65002 5.35988C5.71737 5.33126 5.78984 5.31663 5.86302 5.31688C5.93618 5.31685 6.0086 5.33147 6.07602 5.35988C6.14037 5.38749 6.19904 5.42682 6.24902 5.47588C6.29786 5.52603 6.33716 5.58465 6.36502 5.64888C6.3934 5.7163 6.40802 5.78872 6.40802 5.86188C6.40802 5.93503 6.3934 6.00745 6.36502 6.07488ZM14 3H10V4H14V3Z" fill="#C5C5C5"/>
</svg>
`,jm=`<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
<path fill-rule="evenodd" clip-rule="evenodd" d="M11 6H10V5.5C10 5.22386 9.77614 5 9.5 5H8.479V10.5C8.479 10.7761 8.70286 11 8.979 11H9.479V12H6.479V11H6.979C7.25515 11 7.479 10.7761 7.479 10.5V5H6.5C6.22386 5 6 5.22386 6 5.5V6H5V4H11V6ZM13.9142 8.0481L12.4519 6.58581L13.159 5.87871L14.9749 7.69454V8.40165L13.2071 10.1694L12.5 9.46231L13.9142 8.0481ZM3.54809 9.4623L2.08579 8.00002L3.5 6.58581L2.7929 5.8787L1.02513 7.64647V8.35357L2.84098 10.1694L3.54809 9.4623Z" fill="#C5C5C5"/>
</svg>
`,Fm=`<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M2.80723 14.9754C2.57119 14.9721 2.33826 14.9211 2.12247 14.8254C1.90667 14.7297 1.71248 14.5913 1.55158 14.4186C1.2385 14.1334 1.04433 13.7408 1.00775 13.3189C0.966225 12.8828 1.09269 12.4473 1.36133 12.1013C2.56779 10.8289 4.9473 8.4494 6.67811 6.75479C6.30983 5.75887 6.32704 4.66127 6.72637 3.67739C7.05474 2.85876 7.63869 2.16805 8.39129 1.70807C8.9817 1.31706 9.66031 1.07944 10.3657 1.01673C11.0711 0.954022 11.7809 1.06819 12.4311 1.34892L13.0482 1.6162L10.1824 4.56738L11.4371 5.82582L14.3809 2.94887L14.6482 3.56788C14.8735 4.08976 14.993 4.65119 14.9997 5.21961C15.0064 5.78802 14.9002 6.35211 14.6872 6.87915C14.476 7.40029 14.1623 7.87368 13.7647 8.27122C13.5394 8.49169 13.2904 8.68653 13.0222 8.85218C12.4673 9.22275 11.8324 9.45636 11.1697 9.5338C10.5069 9.61124 9.83521 9.5303 9.20982 9.29764C8.11194 10.4113 5.37142 13.1704 3.89119 14.5522C3.59426 14.8219 3.20832 14.9726 2.80723 14.9754ZM10.7448 1.92802C10.087 1.92637 9.44359 2.12018 8.89614 2.48485C8.68265 2.6152 8.48437 2.76897 8.30498 2.9433C7.82789 3.42423 7.50926 4.03953 7.39182 4.70669C7.27437 5.37385 7.36374 6.06098 7.64792 6.67591L7.78342 6.97288L7.55048 7.20025C5.81224 8.89672 3.28146 11.4201 2.06479 12.7045C1.95646 12.8658 1.91012 13.0608 1.93435 13.2535C1.95857 13.4463 2.05171 13.6238 2.19657 13.7532C2.28005 13.8462 2.38177 13.9211 2.49541 13.9731C2.59557 14.0184 2.70383 14.043 2.81373 14.0455C2.98064 14.0413 3.14044 13.977 3.26383 13.8646C4.83687 12.3964 7.87622 9.32641 8.76807 8.42435L8.9973 8.19326L9.29242 8.32783C9.80618 8.56732 10.3731 8.66985 10.9382 8.62545C11.5033 8.58106 12.0473 8.39125 12.5174 8.07447C12.7313 7.9426 12.9296 7.78694 13.1085 7.61045C13.4183 7.30153 13.6631 6.93374 13.8286 6.52874C13.994 6.12375 14.0767 5.68974 14.0719 5.25228C14.0719 5.03662 14.0505 4.82148 14.0078 4.61007L11.4306 7.12508L8.87944 4.57759L11.3944 1.98834C11.1804 1.94674 10.9628 1.92653 10.7448 1.92802Z" fill="#C5C5C5"/>
</svg>
`,Um=`<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
<path fill-rule="evenodd" clip-rule="evenodd" d="M4 1L3 2V14L4 15H12L13 14V2L12 1H4ZM4 3V2H12V14H4V13H6V12H4V10H8V9H4V7H6V6H4V4H8V3H4Z" fill="#C5C5C5"/>
</svg>
`,Wm=`<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
<path fill-rule="evenodd" clip-rule="evenodd" d="M2.5 1L2 1.5V13H3V2H14V13H15V1.5L14.5 1H2.5ZM2 15V14H3V15H2ZM5 14.0001H4V15.0001H5V14.0001ZM6 14.0001H7V15.0001H6V14.0001ZM9 14.0001H8V15.0001H9V14.0001ZM10 14.0001H11V15.0001H10V14.0001ZM15 15.0001V14.0001H14V15.0001H15ZM12 14.0001H13V15.0001H12V14.0001Z" fill="#C5C5C5"/>
</svg>
`,Ym=`<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
<path fill-rule="evenodd" clip-rule="evenodd" d="M2 2L1 3V12L2 13H14L15 12V3L14 2H2ZM2 12V3H14V12H2ZM5.3556 8.93017H6V7.22067C6 6.40689 5.68534 6 5.05603 6C4.92098 6 4.77083 6.02421 4.6056 6.07263C4.44181 6.12104 4.3125 6.17691 4.21767 6.24022V6.90503C4.45474 6.70205 4.70474 6.60056 4.96767 6.60056C5.22917 6.60056 5.35991 6.75698 5.35991 7.06983L4.76078 7.17318C4.25359 7.25885 4 7.57914 4 8.13408C4 8.39665 4.06106 8.60708 4.18319 8.76536C4.30675 8.92179 4.47557 9 4.68966 9C4.97989 9 5.19899 8.83985 5.34698 8.51955H5.3556V8.93017ZM5.35991 7.57542V7.76816C5.35991 7.9432 5.31968 8.08845 5.23922 8.20391C5.15876 8.3175 5.0546 8.3743 4.92672 8.3743C4.83477 8.3743 4.76149 8.34264 4.7069 8.27933C4.65374 8.21415 4.62716 8.13128 4.62716 8.03073C4.62716 7.80912 4.73779 7.6797 4.95905 7.64246L5.35991 7.57542ZM7.60094 8.62622H7.59343V8.93511H7V5H7.59343V6.67683H7.60094C7.74742 6.36708 7.95587 6.2122 8.22629 6.2122C8.47418 6.2122 8.6651 6.32987 8.79906 6.56522C8.93302 6.80056 9 7.12243 9 7.53082C9 7.97383 8.92175 8.32944 8.76526 8.59766C8.60876 8.86589 8.39969 9 8.13803 9C7.90141 9 7.72238 8.87541 7.60094 8.62622ZM7.58404 7.50487V7.77742C7.58404 7.94873 7.61972 8.09063 7.69108 8.20311C7.76244 8.3156 7.85383 8.37184 7.96526 8.37184C8.10047 8.37184 8.20501 8.30002 8.27887 8.15639C8.35399 8.01103 8.39155 7.80597 8.39155 7.54121C8.39155 7.32144 8.35712 7.15012 8.28826 7.02726C8.22066 6.90266 8.12363 6.84036 7.99718 6.84036C7.87825 6.84036 7.77934 6.9018 7.70047 7.02466C7.62285 7.14752 7.58404 7.30759 7.58404 7.50487ZM11.2616 9C11.5834 9 11.8295 8.94227 12 8.82682V8.11732C11.82 8.25512 11.636 8.32402 11.448 8.32402C11.2362 8.32402 11.0697 8.25233 10.9486 8.10894C10.8276 7.96369 10.767 7.76443 10.767 7.51117C10.767 7.25047 10.8299 7.04656 10.9558 6.89944C11.0832 6.75047 11.2553 6.67598 11.4719 6.67598C11.6663 6.67598 11.8423 6.74488 12 6.88268V6.13408C11.871 6.04469 11.6623 6 11.374 6C10.9566 6 10.6229 6.1406 10.3728 6.42179C10.1243 6.70112 10 7.0838 10 7.56983C10 7.99069 10.1163 8.33426 10.3489 8.60056C10.5814 8.86685 10.8857 9 11.2616 9Z" fill="#C5C5C5"/>
</svg>
`,zm=`<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
<path fill-rule="evenodd" clip-rule="evenodd" d="M2 2L1 3V6L2 7H14L15 6V3L14 2H2ZM2 3H3H13H14V4V5V6H13H3H2V5V4V3ZM1 10L2 9H5L6 10V13L5 14H2L1 13V10ZM3 10H2V11V12V13H3H4H5V12V11V10H4H3ZM10 10L11 9H14L15 10V13L14 14H11L10 13V10ZM12 10H11V11V12V13H12H13H14V12V11V10H13H12Z" fill="#C5C5C5"/>
</svg>
`,Ca=`<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
<path fill-rule="evenodd" clip-rule="evenodd" d="M2 5H4V4H1.5L1 4.5V12.5L1.5 13H4V12H2V5ZM14.5 4H12V5H14V12H12V13H14.5L15 12.5V4.5L14.5 4ZM11.76 6.56995L12 7V9.51001L11.7 9.95996L7.19995 11.96H6.73999L4.23999 10.46L4 10.03V7.53003L4.30005 7.06995L8.80005 5.06995H9.26001L11.76 6.56995ZM5 9.70996L6.5 10.61V9.28003L5 8.38V9.70996ZM5.57996 7.56006L7.03003 8.43005L10.42 6.93005L8.96997 6.06006L5.57996 7.56006ZM7.53003 10.73L11.03 9.17004V7.77002L7.53003 9.31995V10.73Z" fill="#75BEFF"/>
</svg>
`;function de(e){const t=document.createElement("span");return t.innerHTML=e,t.firstElementChild instanceof SVGElement&&t.firstElementChild.classList.toggle("b3-menu__icon",!0),t.innerHTML}const qm=new Map([["class",de(cm)],["color",de(hm)],["constant",de(um)],["constructor",de(Ur)],["enum",de(dm)],["enumMember",de(fm)],["event",de(_m)],["field",de(pm)],["file",de(rm)],["folder",de(nm)],["function",de(Ur)],["instance",de(ya)],["interface",de(gm)],["keyword",de(mm)],["method",de(Ur)],["module",de(om)],["operator",de(vm)],["property",de(ym)],["reference",de(lm)],["snippet",de(Sm)],["struct",de(km)],["text",de(wm)],["typeParameter",de(bm)],["unit",de(Cm)],["value",de(am)],["variable",de(ya)]]),Zm=new Map([["class",de(Am)],["color",de(Rm)],["constant",de(Om)],["constructor",de(Wr)],["enum",de(Hm)],["enumMember",de(Bm)],["event",de(xm)],["field",de(Pm)],["file",de(Lm)],["folder",de(Em)],["function",de(Wr)],["instance",de(Ca)],["interface",de(Im)],["keyword",de(Nm)],["method",de(Wr)],["module",de(Dm)],["operator",de(Vm)],["property",de(Fm)],["reference",de(Tm)],["snippet",de(Wm)],["struct",de(zm)],["text",de(Ym)],["typeParameter",de(jm)],["unit",de(Um)],["value",de(Mm)],["variable",de(Ca)]]),{replace:Km}="",$m=/[&<>'"]/g,Gm={"&":"&amp;","<":"&lt;",">":"&gt;","'":"&#39;",'"':"&quot;"},Jm=e=>Gm[e],wc=e=>Km.call(e,$m,Jm);function Xm(e){let t=[];for(const[i,s]of Object.entries(e))s&&t.push(`${i}="${wc(s).replaceAll(`
`,"_esc_newline_")}"`);return`{: ${t.join(" ")}}`}function rs(e,t){const i=document.createElement("div");return i.innerHTML=e,Array.from(i.querySelectorAll("div.code-block[data-node-id]")).filter(r=>t?r.getAttribute(pe.attrs.code.type.key)===pe.attrs.code.type.value:!0).map(r=>({id:r.dataset.nodeId,code:globalThis.Lute.BlockDOM2Content(r.outerHTML)}))}function Qm(){const e={cells:[],elements:Mg()};switch(e.elements.length){case 0:break;case 1:e.cells=rs(e.elements[0].outerHTML,!1);break;default:e.cells=rs(e.elements.reduce((t,i)=>(t.push(i.outerHTML),t),[]).join(""),!0);break}return e}function e6(e=(s=>(s=(i=>(i=globalThis.siyuan)==null?void 0:i.storage)())==null?void 0:s["local-codelang"])()??"",t=" "){return[`\`\`\`${e}`,"","```",Xm({[pe.attrs.code.type.key]:pe.attrs.code.type.value,[pe.attrs.code.index]:t})].join(`
`)}function Ds(e){return Bi(e)&&e instanceof HTMLElement&&e.getAttribute(pe.attrs.code.type.key)===pe.attrs.code.type.value&&e.dataset.type==="NodeCodeBlock"&&e.classList.contains("code-block")}function t6(e){return Bi(e)&&e instanceof HTMLElement&&e.getAttribute(pe.attrs.output.type.key)===pe.attrs.output.type.value&&e.dataset.type==="NodeSuperBlock"}const Yt=class Yt extends ut.Plugin{constructor(i){super(i);ce(this,"siyuan",ut);ce(this,"logger");ce(this,"client");ce(this,"SETTINGS_DIALOG_ID");ce(this,"config",Fr);ce(this,"worker");ce(this,"bridge");ce(this,"complating",!1);ce(this,"editEventHandler");ce(this,"protyles",new WeakMap);ce(this,"jupyterDock");ce(this,"jupyterInspectDock");ce(this,"doc2session",new Map);ce(this,"doc2info",new Map);ce(this,"session2docs",new Map);ce(this,"handlers");ce(this,"kernelspecs",{default:"",kernelspecs:{}});ce(this,"kernels",[]);ce(this,"sessions",[]);ce(this,"kernelName2logoObjectURL",new Map);ce(this,"kernelName2language",new Map);ce(this,"kernelName2displayName",new Map);ce(this,"xtermElements",new Set);ce(this,"counter",Cc());ce(this,"username",`siyuan-${ut.getBackend()}-${ut.getFrontend()}`);ce(this,"clientId",globalThis.Lute.NewNodeID());ce(this,"editEventListener",(i,s)=>{this.editEventHandler(s,qs(i,Yt.EDIT_KEYBOARD_EVENT_STATUS_INSPECT),qs(i,Yt.EDIT_KEYBOARD_EVENT_STATUS_COMPLATE))});ce(this,"blockMenuEventListener",i=>{const s=i.detail,r=Cg(s);if(r){const n=this.doc2session.get(r.protyle.block.rootID),l=[];r.isDocumentBlock?l.push(...this.buildJupyterDocumentMenuItems(r.id,r.data.ial,n,r)):l.push(...this.buildExecuteMenuItems(!1,n,r)),s.menu.addItem({submenu:l,icon:"icon-jupyter-client-simple",label:this.i18n.displayName,accelerator:this.name}),this.updateDockFocusItem(r.protyle.block.rootID)}});ce(this,"clickEditorContentEventListener",i=>{var l,o,a,h,d,u,g;const s=i.detail.protyle;(o=(l=s.background)==null?void 0:l.ial)!=null&&o[pe.attrs.kernel.language]&&(a=globalThis.siyuan)!=null&&a.storage&&(globalThis.siyuan.storage["local-codelang"]=s.background.ial[pe.attrs.kernel.language]);const r=this.doc2session.get(s.block.rootID);r?this.toggleEditEventListener(s,!0):this.toggleEditEventListener(s,!1);const n=Zs();if(n&&n.dataset.type===ol.NodeType.NodeCodeBlock&&n.classList.contains("code-block")){const b=n.querySelector(`.${pe.JUPYTER_CODE_CELL_ACTION_RUN_CLASS_NAME}`);if(r&&(Ds(n)||((h=n.querySelector(".protyle-action__language"))==null?void 0:h.innerText)===((u=(d=s.background)==null?void 0:d.ial)==null?void 0:u[pe.attrs.kernel.language]))){const y=ua();if(y&&this.requestInspect(r.id,y),!b){const m=n.querySelector(".protyle-icon--last");if(m){const c=globalThis.document.createElement("span");c.classList.add("b3-tooltips","b3-tooltips__nw","protyle-icon",pe.JUPYTER_CODE_CELL_ACTION_RUN_CLASS_NAME),c.ariaLabel=this.i18n.menu.run.label,c.innerHTML='<svg><use xlink:href="#iconPlay"></use></svg>',c.onclick=async f=>{const _=rs(n.outerHTML,!1);await this.requestExecuteCells(_,r,this.config.jupyter.execute.output.parser)},(g=m.parentElement)==null||g.insertBefore(c,m)}}}else b&&b.remove()}this.updateDockFocusItem(s.block.rootID)});ce(this,"loadedProtyleEventListener",async i=>{var r,n,l,o,a,h,d,u,g,b,y;const s=i.detail;if(this.doc2session.has(s.block.rootID))this.toggleEditEventListener(s,!0);else{const m={};(n=(r=s.background)==null?void 0:r.ial)!=null&&n[pe.attrs.kernel.connection_status]&&s.background.ial[pe.attrs.kernel.connection_status]!=="disconnected"&&(m[pe.attrs.kernel.connection_status]="disconnected"),(o=(l=s.background)==null?void 0:l.ial)!=null&&o[pe.attrs.kernel.status]&&s.background.ial[pe.attrs.kernel.status]!=="unknown"&&(m[pe.attrs.kernel.status]="unknown"),Object.keys(m).length>0&&await this.client.setBlockAttrs({id:s.block.rootID,attrs:m})}if((h=(a=s.title)==null?void 0:a.editElement)!=null&&h.innerText.endsWith(".ipynb")||(u=(d=s.background)==null?void 0:d.ial)!=null&&u[pe.attrs.kernel.name]){const m=(b=(g=s.breadcrumb)==null?void 0:g.element.parentElement)==null?void 0:b.querySelector(".protyle-breadcrumb__icon[data-type=exit-focus]");if(m){if((y=m.nextElementSibling)!=null&&y.classList.contains(pe.JUPYTER_NOTEBOOK_BUTTON_MENU_CLASS_NAME))return;{const c=globalThis.document.createElement("button");c.classList.add("block__icon","block__icon--show","fn__flex-center","b3-tooltips","b3-tooltips__sw",pe.JUPYTER_NOTEBOOK_BUTTON_MENU_CLASS_NAME),c.dataset.type="jupyter-client-notebook-menu",c.ariaLabel="Jupyter",c.innerHTML='<svg><use xlink:href="#icon-jupyter-client-session-notebook"></use></svg>',c.onclick=async f=>{var _;if(f.preventDefault(),f.stopPropagation(),s.block.rootID&&((_=s.background)!=null&&_.ial)){const p=s.block.rootID,v=this.buildJupyterDocumentMenuItems(p,s.background.ial,this.doc2session.get(p),{isDocumentBlock:!0,isMultiBlock:!1,id:p});if(v.length>0){const S=new this.siyuan.Menu;v.forEach(L=>S.addItem(L)),S.open({x:f.clientX,y:f.clientY,isLeft:!0})}}},m.parentElement.insertBefore(c,m.nextElementSibling)}}}});ce(this,"destroyProtyleEventListener",i=>{const s=i.detail.protyle;this.toggleEditEventListener(s,!1)});ce(this,"inputRequest",async(i,s,r="")=>{if(s===this.clientId){this.config.jupyter.execute.input.goto&&await this.gotoBlock(i);try{return await gg(this.siyuan.Dialog,{title:this.i18n.messages.inputRequest.title,text:r?ht(r):void 0,cancel:()=>!1})}catch{return}}});ce(this,"updateKernelSpecs",i=>{var s;Object.assign(this.kernelspecs,i);for(const[r,n]of Object.entries(i.kernelspecs))n&&(this.kernelName2language.set(r,n.language),this.kernelName2displayName.set(r,n.display_name));(s=this.jupyterDock.component)==null||s.$set({kernelspecs:i})});ce(this,"updateKernels",i=>{var s;this.kernels.length=0,this.kernels.push(...i),(s=this.jupyterDock.component)==null||s.$set({kernels:i})});ce(this,"updateSessions",i=>{var r;const s=new Set(i.map(n=>n.id));for(const n of this.session2docs.keys())if(!s.has(n)){const l=this.session2docs.get(n);l&&l.forEach(o=>this.doc2session.delete(o)),this.session2docs.delete(n)}this.sessions.length=0,this.sessions.push(...i),(r=this.jupyterDock.component)==null||r.$set({sessions:i})});this.logger=new Ag(this.name),this.client=new f1(void 0,"fetch"),this.SETTINGS_DIALOG_ID=`${this.name}-settings-dialog`,this.handlers={gotoBlock:{this:this,func:async(r,n)=>{n===this.clientId&&this.doc2session.has(r)&&await this.gotoBlock(r)}},inputRequest:{this:this,func:this.inputRequest},updateKernelSpecs:{this:this,func:this.updateKernelSpecs},updateKernels:{this:this,func:this.updateKernels},updateSessions:{this:this,func:this.updateSessions}};const s=ig(this);globalThis.customElements.get(s.TAG_NAME)??globalThis.customElements.define(s.TAG_NAME,s),this.updateEditEventHandler()}onload(){this.addIcons([Pc,Ic,Nc,Vc,jc,Fc,Uc,Wc,Yc,zc,qc,Zc,Kc,$c,Gc,Jc,Xc,Qc].join(""));const i=this;this.jupyterDock={dock:this.addDock({config:{position:"LeftTop",size:{width:256,height:0},icon:"icon-jupyter-client",title:this.i18n.dock.title,show:!0},data:{},type:"-dock",init(){this.element.classList.add("fn__flex-column");const s=new Wp({target:this.element,props:{plugin:i,...this.data,kernelspecs:i.kernelspecs,kernels:i.kernels,sessions:i.sessions}});i.jupyterDock.model=this,i.jupyterDock.component=s},destroy(){var s;(s=i.jupyterDock.component)==null||s.$destroy(),delete i.jupyterDock.component,delete i.jupyterDock.model}})},this.jupyterInspectDock={dock:this.addDock({config:{position:"BottomLeft",size:{width:256,height:0},icon:"icon-jupyter-client-inspect",title:this.i18n.inspectDock.title,show:!0},data:{stream:""},type:"-inspect-dock",init(){this.element.classList.add("fn__flex-column");const s=new qp({target:this.element,props:{plugin:i,...this.data}});i.jupyterInspectDock.model=this,i.jupyterInspectDock.component=s},destroy(){var s;(s=i.jupyterInspectDock.component)==null||s.$destroy(),delete i.jupyterInspectDock.component,delete i.jupyterInspectDock.model}})},this.addCommand({langKey:"run-selected-cells",langText:this.i18n.commands.runSelectedCells.text,hotkey:"⌘↩",customHotkey:"⌘↩",editorCallback:async()=>{const r=(await this.executeSelectedCellBlocks()).cells.at(-1);r&&await this.gotoBlock(r.id,!1)}}),this.addCommand({langKey:"run-selected-cells-and-goto-next",langText:this.i18n.commands.runSelectedCellsAndGotoNext.text,hotkey:"⇧↩",customHotkey:"⇧↩",editorCallback:async()=>{const s=await this.executeSelectedCellBlocks(),r=await this.getNextCodeCell(s);if(r)await this.gotoBlock(r.id,!1);else{if(s.cells.length==0)return;const n=await this.insertNewCodeCell(s);n&&await this.gotoBlock(n.id,!1)}}}),this.addCommand({langKey:"run-selected-cells-and-insert-below",langText:this.i18n.commands.runSelectedCellsAndInsertBelow.text,hotkey:"⌥↩",customHotkey:"⌥↩",editorCallback:async()=>{const s=await this.executeSelectedCellBlocks(),r=await this.insertNewCodeCell(s);r&&await this.gotoBlock(r.id,!1)}}),this.loadData(Yt.GLOBAL_CONFIG_NAME).then(s=>{this.config=da(Fr,s||{})}).catch(s=>this.logger.error(s)).finally(async()=>{var r;if(this.initBridge(),await this.isWorkerRunning())await this.jupyterForceRefresh();else{for(this.initWorker();await this.isWorkerRunning();)await Xg(1e3);await((r=this.bridge)==null?void 0:r.call("onload",this.i18n)),await this.updateWorkerConfig(!0)}this.eventBus.on("click-editortitleicon",this.blockMenuEventListener),this.eventBus.on("click-blockicon",this.blockMenuEventListener),this.eventBus.on("click-editorcontent",this.clickEditorContentEventListener),this.eventBus.on("loaded-protyle",this.loadedProtyleEventListener),this.eventBus.off("destroy-protyle",this.destroyProtyleEventListener)})}onLayoutReady(){}onunload(){var i,s;this.eventBus.off("click-editortitleicon",this.blockMenuEventListener),this.eventBus.off("click-blockicon",this.blockMenuEventListener),this.eventBus.off("click-editorcontent",this.clickEditorContentEventListener),this.eventBus.off("loaded-protyle",this.loadedProtyleEventListener),this.eventBus.off("destroy-protyle",this.destroyProtyleEventListener);for(const r of this.kernelName2logoObjectURL.values())URL.revokeObjectURL(r);this.doc2session.clear(),this.doc2info.clear(),this.session2docs.clear(),this.kernelName2logoObjectURL.clear(),this.kernelName2language.clear(),this.kernelName2displayName.clear(),this.worker?(i=this.bridge)==null||i.call("unload").then(()=>{var r,n;(r=this.bridge)==null||r.terminate(),this.bridge=void 0,(n=this.worker)==null||n.terminate(),this.worker=void 0}):((s=this.bridge)==null||s.terminate(),this.bridge=void 0)}openSetting(){const i=this,r=new ut.Dialog({title:`${this.i18n.displayName} <code class="fn__code">${this.name}</code>`,content:`<div id="${i.SETTINGS_DIALOG_ID}" class="fn__flex-column" />`,width:Nr?"92vw":"720px",height:Nr?void 0:"640px"}).element.querySelector(`#${i.SETTINGS_DIALOG_ID}`);r&&new ed({target:r,props:{config:this.config,plugin:this}})}get baseUrl(){var i;return((i=this.config)==null?void 0:i.jupyter.server.settings.baseUrl)||ir.baseUrl}get newClientId(){return globalThis.Lute.NewNodeID()}async resetConfig(i=!0){return this.updateConfig(da(Fr),i)}async updateConfig(i,s=!1){i&&i!==this.config&&(this.config=i),this.updateXtermElement(),this.updateEditEventHandler(),await this.updateWorkerConfig(s),await this.saveData(Yt.GLOBAL_CONFIG_NAME,this.config)}initBridge(){var i;(i=this.bridge)==null||i.terminate(),this.bridge=new Jg(new BroadcastChannel(pe.JUPYTER_WORKER_BROADCAST_CHANNEL_NAME),this.logger,this.handlers,this.clientId)}initWorker(){var i;(i=this.worker)==null||i.terminate(),this.worker=new Worker(`${globalThis.document.baseURI}plugins/${this.name}/workers/${pe.JUPYTER_WORKER_FILE_NAME}.js?v=${Sa.version}`,{type:"module",name:this.name,credentials:"same-origin"})}async isWorkerRunning(){try{return this.bridge||this.initBridge(),await this.bridge.ping(),!0}catch{return!1}}isSessionRunning(i){return this.sessions.some(s=>s.id===i)}isSessionConnected(i){return this.session2docs.has(i)}relateDoc2Session(i,s){const r=this.doc2session.get(i);if(r){const l=this.session2docs.get(r.id);l&&(l.delete(i),l.size===0&&this.session2docs.delete(r.id))}this.doc2session.set(i,s);const n=this.session2docs.get(s.id)??new Set;n.add(i),this.session2docs.set(s.id,n)}async updateWorkerConfig(i){var s,r;await((s=this.bridge)==null?void 0:s.call("updateConfig",this.config)),i&&await((r=this.bridge)==null?void 0:r.call("restart"))}updateXtermElement(i=this.config.xterm.options){for(const s of this.xtermElements)if(s.terminal)for(const[r,n]of Object.entries(i))s.terminal.options[r]!==n&&(s.terminal.options[r]=n)}updateEditEventHandler(i=this.config.jupyter.edit.delay){this.editEventHandler=dc(async(s,r,n)=>{if(r||n){const l=this.doc2session.get(s.block.rootID);if(l){const o=Zs();if(Ds(o)){const a=ua();if(a){const h=[];r&&h.push(this.requestInspect(l.id,a)),n&&h.push(this.requestComplete(l.id,a)),await Promise.allSettled(h)}}}}},i)}async jupyterFetch(i,s={}){const r=new URL(this.baseUrl);i.startsWith("/")?r.pathname=i:r.pathname=`${r.pathname}/${i}`;const n={Authorization:`token ${this.config.jupyter.server.settings.token}`};s.headers?Object.assign(n,s.headers):s.headers=n;const l=await this.client.forwardProxy({url:r.href,method:s.method,headers:[s.headers],responseEncoding:"base64"});if(200<=l.data.status&&l.data.status<300)return new Blob([z3(l.data.body)],{type:l.data.contentType});throw new Error(l.msg)}async jupyterForceRefresh(){var s,r,n;const i=await Promise.allSettled([(s=this.bridge)==null?void 0:s.call("jupyter.kernelspecs.specs"),(r=this.bridge)==null?void 0:r.call("jupyter.kernels.running"),(n=this.bridge)==null?void 0:n.call("jupyter.sessions.running")]);i[0].status==="fulfilled"&&i[0].value&&this.updateKernelSpecs(i[0].value),i[1].status==="fulfilled"&&i[1].value&&this.updateKernels(i[1].value),i[2].status==="fulfilled"&&i[2].value&&this.updateSessions(i[2].value)}async loadKernelSpecIcon(i,s="#icon-jupyter-client-kernelspec"){if(this.kernelName2logoObjectURL.has(i.name))return this.kernelName2logoObjectURL.get(i.name);const r=(()=>{switch(!0){case"logo-svg"in i.resources:return i.resources["logo-svg"];case"logo-32x32"in i.resources:return i.resources["logo-32x32"];case"logo-64x64"in i.resources:return i.resources["logo-64x64"];default:return Object.keys(i.resources).length>0?Object.values(i.resources)[0]:""}})();if(r)try{const n=await this.jupyterFetch(r,{method:"GET"});if(this.kernelName2logoObjectURL.has(i.name))return this.kernelName2logoObjectURL.get(i.name);{const l=URL.createObjectURL(n);return this.kernelName2logoObjectURL.set(i.name,l),l}}catch(n){this.logger.warn(n)}return this.kernelName2logoObjectURL.set(i.name,s),s}session2ial(i,s=!1){return{[pe.attrs.session.id]:i.id,[pe.attrs.session.name]:i.name,[pe.attrs.session.path]:i.path,[pe.attrs.session.type]:i.type,...this.kernel2ial(i.kernel,s)}}ial2session(i,s=!1){const r=this.counter.next().value,n=i[pe.attrs.session.id]??(s?an.v4():pe.JUPYTER_UNKNOWN_VALUE),l=i[pe.attrs.session.name]??(s?`siyuan-console-${r}`:pe.JUPYTER_UNKNOWN_VALUE),o=i[pe.attrs.session.path]??(s?`siyuan-console-${r}-${globalThis.Lute.NewNodeID()}`:pe.JUPYTER_UNKNOWN_VALUE),a=i[pe.attrs.session.type]??(s?"console":pe.JUPYTER_UNKNOWN_VALUE),h=this.ial2kernel(i,s);return{id:n,type:a,name:l,path:o,kernel:h}}kernel2ial(i,s=!1){const r=i&&this.kernelspecs.kernelspecs[i.name]||void 0;return{[pe.attrs.kernel.id]:(i==null?void 0:i.id)??(s?null:void 0),[pe.attrs.kernel.name]:(i==null?void 0:i.name)??(s?null:void 0),[pe.attrs.kernel.language]:(r==null?void 0:r.language)??(s?null:void 0),[pe.attrs.kernel.display_name]:(r==null?void 0:r.display_name)??(s?null:void 0)}}ial2kernel(i,s=!1){const r=i[pe.attrs.kernel.id]??(s?an.v4():pe.JUPYTER_UNKNOWN_VALUE),n=i[pe.attrs.kernel.name]??(s?this.kernelspecs.default:pe.JUPYTER_UNKNOWN_VALUE);return{id:r,name:n}}buildJupyterDocumentMenuItems(i,s,r,n){var u,g;const l=[],o=this.ial2session(s,!1),a=((u=r==null?void 0:r.kernel)==null?void 0:u.name)??o.kernel.name,h=this.kernelName2language.get(a)??s[pe.attrs.kernel.language]??pe.JUPYTER_UNKNOWN_VALUE,d=this.kernelName2displayName.get(a)??s[pe.attrs.kernel.display_name]??pe.JUPYTER_UNKNOWN_VALUE;return l.push({icon:"icon-jupyter-client-session",label:this.i18n.menu.session.label,accelerator:r?ht(r.name):void 0,submenu:[{icon:"iconSettings",label:this.i18n.menu.session.submenu.settings.label,click:()=>{const b=new ut.Dialog({title:`Jupyter ${this.i18n.settings.sessionSettings.title} <code class="fn__code">${this.name}</code>`,content:`<div id="${this.SETTINGS_DIALOG_ID}" class="fn__flex-column" />`,width:Nr?"92vw":"720px"}),y=b.element.querySelector(`#${this.SETTINGS_DIALOG_ID}`);if(y){const m=new E3({target:y,props:{docID:i,docIAL:s,plugin:this}});m.$on("cancel",c=>{b.destroy()}),m.$on("confirm",c=>{b.destroy(),this.updateDockFocusItem(i)})}}},{icon:"iconRefresh",label:this.i18n.menu.session.submenu.shutdown.label,disabled:!r,click:()=>{var b;r&&((b=this.bridge)==null||b.call("jupyter.sessions.shutdown",r.id))}},{type:"separator"},{type:"readonly",iconHTML:"",label:this.i18n.menu.session.submenu.info.label.replaceAll("${1}",ht((r==null?void 0:r.id)??o.id)).replaceAll("${2}",ht((r==null?void 0:r.name)??o.name)).replaceAll("${3}",ht((r==null?void 0:r.path)??o.path)).replaceAll("${4}",ht((r==null?void 0:r.type)??o.type)),disabled:!r}]}),l.push({icon:"icon-jupyter-client-kernel",label:this.i18n.menu.kernel.label,accelerator:r!=null&&r.kernel?ht(r.kernel.name):void 0,submenu:[{icon:"iconRefresh",label:this.i18n.menu.kernel.submenu.reconnect.label,disabled:!(r!=null&&r.kernel),click:async()=>{var b;r!=null&&r.kernel&&await((b=this.bridge)==null?void 0:b.call("jupyter.session.kernel.connection.reconnect",r.id))}},{icon:"iconPause",label:this.i18n.menu.kernel.submenu.interrupt.label,disabled:!(r!=null&&r.kernel),click:async()=>{var b;r!=null&&r.kernel&&await((b=this.bridge)==null?void 0:b.call("jupyter.session.kernel.connection.interrupt",r.id))}},{icon:"iconRefresh",label:this.i18n.menu.kernel.submenu.restart.label,disabled:!(r!=null&&r.kernel),click:async()=>{var b;r!=null&&r.kernel&&await((b=this.bridge)==null?void 0:b.call("jupyter.session.kernel.connection.restart",r.id))}},{icon:"iconClose",label:this.i18n.menu.kernel.submenu.shutdown.label,disabled:!(r!=null&&r.kernel),click:async()=>{var b;r!=null&&r.kernel&&await((b=this.bridge)==null?void 0:b.call("jupyter.session.kernel.connection.shutdown",r.id))}},{type:"separator"},{type:"readonly",iconHTML:"",label:this.i18n.menu.kernel.submenu.info.label.replaceAll("${1}",ht(((g=r==null?void 0:r.kernel)==null?void 0:g.id)??o.kernel.id)).replaceAll("${2}",ht(a)).replaceAll("${3}",ht(h)).replaceAll("${4}",ht(d)),disabled:!(r!=null&&r.kernel)}]}),l.push({type:"separator"}),l.push({icon:"iconPlay",label:this.i18n.menu.run.label,submenu:[{icon:"iconPlay",label:this.i18n.menu.run.submenu.all.label,disabled:!(r!=null&&r.kernel),submenu:this.buildExecuteMenuItems(!1,r,n)},{icon:"iconRefresh",label:this.i18n.menu.run.submenu.restart.label,accelerator:this.i18n.menu.run.submenu.restart.accelerator,disabled:!(r!=null&&r.kernel),submenu:this.buildExecuteMenuItems(!0,r,n)}]}),l.push({type:"separator"}),l.push({icon:"iconUpload",label:this.i18n.menu.import.label,accelerator:ht(this.i18n.menu.import.accelerator),submenu:[{element:globalThis.document.createElement("div"),bind:b=>{new _o({target:b,props:{file:!0,icon:"#iconEdit",label:this.i18n.menu.import.submenu.override.label,accept:".ipynb",multiple:!1,webkitdirectory:!1}}).$on("selected",async m=>{var _;const f=m.detail.files.item(0);f&&await((_=this.bridge)==null?void 0:_.call("importIpynb",i,f,"override"))})}},{element:globalThis.document.createElement("div"),bind:b=>{new _o({target:b,props:{file:!0,icon:"#iconAfter",label:this.i18n.menu.import.submenu.append.label,accept:".ipynb",multiple:!1,webkitdirectory:!1}}).$on("selected",async m=>{var _;const f=m.detail.files.item(0);f&&await((_=this.bridge)==null?void 0:_.call("importIpynb",i,f,"append"))})}}]}),l}buildExecuteMenuItems(i,s,r){const n=!(s!=null&&s.kernel),l=r.isDocumentBlock||r.isMultiBlock,o=async d=>{var b;i&&await((b=this.bridge)==null?void 0:b.call("jupyter.session.kernel.connection.restart",s.id));const u=await this.getBlockDOM(r),g=rs(u,l);await this.requestExecuteCells(g,s,d)},a=d=>[{icon:"iconTheme",label:this.i18n.menu.run.submenu.cntrl.enable.label,accelerator:this.i18n.menu.run.submenu.cntrl.enable.accelerator,disabled:n,click:async()=>{d.cntrl=!0,await o(d)}},{icon:"icon-jupyter-client-text",label:this.i18n.menu.run.submenu.cntrl.disable.label,accelerator:this.i18n.menu.run.submenu.cntrl.disable.accelerator,disabled:n,click:async()=>{d.cntrl=!1,await o(d)}}];return[{icon:"iconPlay",label:this.i18n.menu.run.submenu.custom.label,disabled:n,click:async()=>{const d=this.config.jupyter.execute.output.parser;await o(d)}},{icon:"iconCode",label:this.i18n.menu.run.submenu.terminal.label,accelerator:ht("Xterm"),disabled:n,click:async()=>{await o({xterm:!0,escaped:!1,cntrl:!1})}},{icon:"icon-jupyter-client-text",label:this.i18n.menu.run.submenu.escape.enable.label,accelerator:this.i18n.menu.run.submenu.escape.enable.accelerator,disabled:n,submenu:a({xterm:!1,escaped:!0,cntrl:!0})},{icon:"iconMarkdown",label:this.i18n.menu.run.submenu.escape.disable.label,accelerator:this.i18n.menu.run.submenu.escape.disable.accelerator,disabled:n,submenu:a({xterm:!1,escaped:!1,cntrl:!0})}]}buildOpenDocumentMenuItems(i){const s=[];return s.push({icon:"iconAdd",label:this.i18n.menu.openTab.label,click:()=>{ut.openTab({app:this.app,doc:{id:i,action:["cb-get-focus","cb-get-hl"]},keepCursor:!1,removeCurrentTab:!1})}}),s.push({icon:"iconMin",label:this.i18n.menu.openTabBackground.label,click:()=>{ut.openTab({app:this.app,doc:{id:i,action:["cb-get-focus","cb-get-hl"]},keepCursor:!0,removeCurrentTab:!1})}}),s.push({icon:"iconLayoutRight",label:this.i18n.menu.openTabRight.label,click:()=>{ut.openTab({app:this.app,doc:{id:i,action:["cb-get-focus","cb-get-hl"]},position:"right",keepCursor:!1,removeCurrentTab:!1})}}),s.push({icon:"iconLayoutBottom",label:this.i18n.menu.openTabBottom.label,click:()=>{ut.openTab({app:this.app,doc:{id:i,action:["cb-get-focus","cb-get-hl"]},position:"bottom",keepCursor:!1,removeCurrentTab:!1})}}),s}async requestInspect(i,s){var n,l;const r=await((n=this.bridge)==null?void 0:n.call("jupyter.session.kernel.connection.requestInspect",i,{code:s.code,cursor_pos:s.offset,detail_level:this.config.jupyter.inspect.detail_level}));if(r)switch(r.content.status){case"ok":if(r.content.found){const o=r.content.data["text/plain"];if(o!==void 0){const a=j3(Array.isArray(o)?o.join():o,!0);return(l=this.jupyterInspectDock.component)==null||l.$set({stream:a}),!0}else this.logger.warn(r)}break;case"abort":this.logger.info(r);case"error":this.logger.warn(r);break}return!1}async requestComplete(i,s){var l;const r={code:s.code,cursor_pos:s.offset},n=await((l=this.bridge)==null?void 0:l.call("jupyter.session.kernel.connection.requestComplete",i,r));if(n)switch(n.content.status){case"ok":{const o=n.content,a=[],h=fc()?qm:Zm,d=o.metadata._jupyter_types_experimental;if(Array.isArray(d)&&d.length>0?d.reduce((u,g)=>{u.type!==g.type&&a.push({type:"separator"});const b=()=>this.complete(s,g.start,g.end,g.text),y={label:g.text,accelerator:ht(g.type),click:b,submenu:g.signature?[{iconHTML:"",label:ht(wc(g.signature)),click:b}]:void 0},m=h.get(g.type);if(m)y.iconHTML=m;else switch(g.type){case"magic":y.icon="icon-jupyter-client-simple";break;case"path":switch(!0){case g.text.endsWith("/"):y.iconHTML=h.get("folder");break;default:y.iconHTML=h.get("file");break}break;default:y.icon=void 0;break}return a.push(y),g},d[0]):a.push(...o.matches.map(u=>({label:u,click:()=>this.complete(s,o.cursor_start,o.cursor_end,u)}))),a.length>0){const u=s.current,g=(()=>{var c;var m;return m=u.getBoundingClientRect(),m.x>0&&m.y>0?{x:m.right,y:m.bottom}:(m=u.commonAncestorContainer instanceof Element?u.commonAncestorContainer.getBoundingClientRect():void 0,m&&m.x>0&&m.y>0?{x:m.right,y:m.bottom}:(m=u.commonAncestorContainer.parentElement instanceof HTMLSpanElement?(c=u.commonAncestorContainer.parentElement)==null?void 0:c.getBoundingClientRect():void 0,m&&m.x>0&&m.y>0?{x:m.right,y:m.bottom}:(m=s.container.getBoundingClientRect(),{x:m.left,y:m.bottom})))})(),b=new ut.Menu(n.header.msg_id,()=>{this.complating=!1,b.menu.element.lastElementChild instanceof HTMLElement&&(b.menu.element.lastElementChild.style.maxHeight="")});if(a.forEach(m=>b.addItem(m)),this.complating=!0,b.open(g),b.menu.element.getBoundingClientRect().y!==g.y){const m=b.menu.element.lastElementChild;if(m instanceof HTMLElement){const c=globalThis.innerHeight-g.y-32;m.style.maxHeight=`${c}px`,b.element.style.top=`${g.y}px`}}}break}case"abort":this.logger.info(n);case"error":this.logger.warn(n);break}return!1}complete(i,s,r,n){var o;ba(i.container,{start:s,end:r});const l=(o=globalThis.getSelection())==null?void 0:o.getRangeAt(0);l&&l.toString()!==n&&sm(l,n),ba(i.container,{start:s+n.length})}async requestExecuteCell(i,s,r,n,l=this.config.jupyter.execute.goto){var o;await((o=this.bridge)==null?void 0:o.call("jupyter.session.kernel.connection.requestExecute",this.clientId,i,s,r,n,l))}async requestExecuteCells(i,s,r,n=this.config.jupyter.execute.goto){for(const l of i)await this.requestExecuteCell(l.code,l.id,s.id,r,n)}async executeSelectedCellBlocks(){const i=Qm();if(i.cells.length>0){const s=i.cells[0],r=await this.client.getBlockInfo({id:s.id}),n=this.doc2session.get(r.data.rootID);n?await this.requestExecuteCells(i.cells,n,this.config.jupyter.execute.output.parser,!1):this.siyuan.showMessage(this.i18n.messages.sessionNotConnected.text)}else this.siyuan.showMessage(this.i18n.messages.noValidBlockSelected.text);return i}async getNextCodeCell(i){const s=i.cells.at(-1);if(s){const n=(await this.client.getBlockInfo({id:s.id})).data,o=(await this.client.getDoc({id:n.rootID})).data.content,a=rs(o,!0),h=a.findIndex(d=>d.id===s.id);if(h>=0)return a.at(h+1)}}async insertNewCodeCell(i){var r,n;const s={data:e6(),dataType:"markdown"};switch(i.elements.length){case 0:{const l=Dg();if(l){s.previousID=l;break}else return}default:{const l=i.elements.at(-1);if(!Bi(l))return;if(Ds(l)){const o=l.nextElementSibling;switch(!0){case t6(o):s.previousID=o.dataset.nodeId;break;case Ds(o):case Bi(o):s.nextID=o.dataset.nodeId;break;default:{const a=l.parentElement;let h;switch(!0){case Lg(a):{const d=a==null?void 0:a.previousElementSibling;if(wg(d)){h=a.dataset.nodeId;break}else return}case Bi(a):h=a.dataset.nodeId;break;default:return}try{return(r=(await this.client.appendBlock({...s,parentID:h})).data[0])==null?void 0:r.doOperations[0]}catch{return}}}}else{s.previousID=l.dataset.nodeId;break}break}}try{return(n=(await this.client.insertBlock(s)).data[0])==null?void 0:n.doOperations[0]}catch{return}}async gotoBlock(i,s=!0,r){await ut.openTab({app:this.app,doc:{id:i,action:[s?"cb-get-hl":"cb-get-focus"]},keepCursor:!1,removeCurrentTab:!1,afterOpen:r})}async getBlockDOM(i){var s;if(i.isDocumentBlock)s=(await this.client.getDoc({id:i.id})).data.content;else{const r=[];for(const n of i.blocks)r.push(n.element.outerHTML);s=r.join("")}return s}updateDockFocusItem(i){var r,n,l;const s=this.doc2session.get(i);(l=this.jupyterDock.component)==null||l.$set({currentSpec:(r=s==null?void 0:s.kernel)==null?void 0:r.name,currentKernel:(n=s==null?void 0:s.kernel)==null?void 0:n.id,currentSession:s==null?void 0:s.id,currentDocument:i})}toggleEditEventListener(i,s){var r,n,l,o;if(s){if(!this.protyles.has(i)){const a=["keyup",h=>this.editEventListener(h,i),{capture:!0}];this.protyles.set(i,a),(n=(r=i.wysiwyg)==null?void 0:r.element)==null||n.addEventListener(...a)}}else{const a=this.protyles.get(i);a&&((o=(l=i.wysiwyg)==null?void 0:l.element)==null||o.removeEventListener(...a))}}};ce(Yt,"GLOBAL_CONFIG_NAME","global-config"),ce(Yt,"EDIT_KEYBOARD_EVENT_STATUS_INSPECT",{type:"keyup",altKey:!1,ctrlKey:!1,metaKey:!1,shiftKey:!1,key:i=>/^(\S|Tab|Delete|Backspace|ArrowUp|ArrowDown|ArrowLeft|ArrowRight|Home|End)$/.test(i)}),ce(Yt,"EDIT_KEYBOARD_EVENT_STATUS_COMPLATE",{type:"keyup",altKey:!1,ctrlKey:!1,metaKey:!1,shiftKey:!1,key:i=>/^(\S|Tab|Delete|Backspace)$/.test(i)});let cn=Yt;module.exports=cn;
