"use strict";var Vc=Object.defineProperty;var jc=(e,t,i)=>t in e?Vc(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i;var ne=(e,t,i)=>(jc(e,typeof t!="symbol"?t+"":t,i),i);const it=require("siyuan"),Fc="jupyter-client",Uc="Zuoqiu Yingyi",Wc="https://github.com/Zuoqiu-Yingyi/siyuan-plugin-jupyter-client",Yc="0.2.1",zc="2.10.13",qc=["代码","代碼","程式碼","执行代码","執行代碼","執行程式碼","code","execute","jupyter","notebook","lab","hub"],Zc=["all"],Kc=["all"],Gc={default:"Jupyter Client",zh_CN:"Jupyter 客户端",zh_CHT:"Jupyter 客戶端"},$c={default:"The plugin can connect to the Jupyter service, run the code block, output and save the run result.",zh_CN:"该插件可以连接 Jupyter 服务，运行代码块，输出并保存运行结果。",zh_CHT:"該插件可以連接 Jupyter 服務，運行代碼塊，輸出並保存運行結果。"},Jc={default:"README.md",zh_CN:"README_zh_CN.md",zh_CHT:"README_zh_CN.md"},Xc={openCollective:"",patreon:"",github:"",custom:["https://afdian.net/a/zuoqiu","https://ko-fi.com/zuoqiu"]},Pa={name:Fc,author:Uc,url:Wc,version:Yc,minAppVersion:zc,keywords:qc,backends:Zc,frontends:Kc,displayName:Gc,description:$c,readme:Jc,funding:Xc};const Qc=`<symbol
    id="icon-jupyter-client"
    viewBox="0 0 44 51"
    xmlns="http://www.w3.org/2000/svg"
    xmlns:xlink="http://www.w3.org/1999/xlink"
    xmlns:figma="http://www.figma.com/figma/ns"
>
    <title>Group.svg</title>
    <desc>Created using Figma 0.90</desc>
    <g transform="translate(-1640 -2453)" figma:type="canvas">
        <g style="mix-blend-mode:normal;" figma:type="group">
            <g style="mix-blend-mode:normal;" figma:type="group">
                <g style="mix-blend-mode:normal;" figma:type="group">
                    <g style="mix-blend-mode:normal;" figma:type="group">
                        <g style="mix-blend-mode:normal;" figma:type="group">
                            <g style="mix-blend-mode:normal;" figma:type="vector">
                                <use xlink:href="#jupyter-client-path0_fill" transform="translate(1640.54 2474.36)"
                                    fill="#4E4E4E" style="mix-blend-mode:normal;" />
                            </g>
                        </g>
                        <g style="mix-blend-mode:normal;" figma:type="group">
                            <g style="mix-blend-mode:normal;" figma:type="vector">
                                <use xlink:href="#jupyter-client-path1_fill" transform="translate(1645.68 2474.37)"
                                    fill="#4E4E4E" style="mix-blend-mode:normal;" />
                            </g>
                        </g>
                        <g style="mix-blend-mode:normal;" figma:type="group">
                            <g style="mix-blend-mode:normal;" figma:type="vector">
                                <use xlink:href="#jupyter-client-path2_fill" transform="translate(1653.39 2474.26)"
                                    fill="#4E4E4E" style="mix-blend-mode:normal;" />
                            </g>
                        </g>
                        <g style="mix-blend-mode:normal;" figma:type="group">
                            <g style="mix-blend-mode:normal;" figma:type="vector">
                                <use xlink:href="#jupyter-client-path3_fill" transform="translate(1660.43 2474.39)"
                                    fill="#4E4E4E" style="mix-blend-mode:normal;" />
                            </g>
                        </g>
                        <g style="mix-blend-mode:normal;" figma:type="group">
                            <g style="mix-blend-mode:normal;" figma:type="vector">
                                <use xlink:href="#jupyter-client-path4_fill" transform="translate(1667.55 2472.54)"
                                    fill="#4E4E4E" style="mix-blend-mode:normal;" />
                            </g>
                        </g>
                        <g style="mix-blend-mode:normal;" figma:type="group">
                            <g style="mix-blend-mode:normal;" figma:type="vector">
                                <use xlink:href="#jupyter-client-path5_fill" transform="translate(1672.47 2474.29)"
                                    fill="#4E4E4E" style="mix-blend-mode:normal;" />
                            </g>
                        </g>
                        <g style="mix-blend-mode:normal;" figma:type="group">
                            <g style="mix-blend-mode:normal;" figma:type="vector">
                                <use xlink:href="#jupyter-client-path6_fill" transform="translate(1679.98 2474.24)"
                                    fill="#4E4E4E" style="mix-blend-mode:normal;" />
                            </g>
                        </g>
                    </g>
                </g>
                <g style="mix-blend-mode:normal;" figma:type="group">
                    <g style="mix-blend-mode:normal;" figma:type="group">
                        <g style="mix-blend-mode:normal;" figma:type="vector">
                            <use xlink:href="#jupyter-client-path7_fill" transform="translate(1673.48 2453.69)"
                                fill="#767677" style="mix-blend-mode:normal;" />
                        </g>
                    </g>
                    <g style="mix-blend-mode:normal;" figma:type="group">
                        <g style="mix-blend-mode:normal;" figma:type="vector">
                            <use xlink:href="#jupyter-client-path8_fill" transform="translate(1643.21 2484.27)"
                                fill="#F37726" style="mix-blend-mode:normal;" />
                        </g>
                    </g>
                    <g style="mix-blend-mode:normal;" figma:type="group">
                        <g style="mix-blend-mode:normal;" figma:type="vector">
                            <use xlink:href="#jupyter-client-path9_fill" transform="translate(1643.21 2457.88)"
                                fill="#F37726" style="mix-blend-mode:normal;" />
                        </g>
                    </g>
                    <g style="mix-blend-mode:normal;" figma:type="group">
                        <g style="mix-blend-mode:normal;" figma:type="vector">
                            <use xlink:href="#jupyter-client-path10_fill" transform="translate(1643.28 2496.09)"
                                fill="#9E9E9E" style="mix-blend-mode:normal;" />
                        </g>
                    </g>
                    <g style="mix-blend-mode:normal;" figma:type="group">
                        <g style="mix-blend-mode:normal;" figma:type="vector">
                            <use xlink:href="#jupyter-client-path11_fill" transform="translate(1641.87 2458.43)"
                                fill="#616262" style="mix-blend-mode:normal;" />
                        </g>
                    </g>
                </g>
            </g>
        </g>
    </g>
    <defs>
        <path id="jupyter-client-path0_fill"
            d="M 1.74498 5.47533C 1.74498 7.03335 1.62034 7.54082 1.29983 7.91474C 0.943119 8.23595 0.480024 8.41358 0 8.41331L 0.124642 9.3036C 0.86884 9.31366 1.59095 9.05078 2.15452 8.56466C 2.45775 8.19487 2.6834 7.76781 2.818 7.30893C 2.95261 6.85005 2.99341 6.36876 2.93798 5.89377L 2.93798 0L 1.74498 0L 1.74498 5.43972L 1.74498 5.47533Z" />
        <path id="jupyter-client-path1_fill"
            d="M 5.50204 4.76309C 5.50204 5.43081 5.50204 6.02731 5.55545 6.54368L 4.496 6.54368L 4.42478 5.48423C 4.20318 5.85909 3.88627 6.16858 3.50628 6.38125C 3.12628 6.59392 2.69675 6.70219 2.26135 6.69503C 1.22861 6.69503 0 6.13415 0 3.84608L 0 0.0445149L 1.193 0.0445149L 1.193 3.6057C 1.193 4.84322 1.57583 5.67119 2.65309 5.67119C 2.87472 5.67358 3.09459 5.63168 3.29982 5.54796C 3.50505 5.46424 3.69149 5.34039 3.84822 5.18366C 4.00494 5.02694 4.1288 4.84049 4.21252 4.63527C 4.29623 4.43004 4.33813 4.21016 4.33575 3.98853L 4.33575 0L 5.52874 0L 5.52874 4.72748L 5.50204 4.76309Z" />
        <path id="jupyter-client-path2_fill"
            d="M 0.0534178 2.27264C 0.0534178 1.44466 0.0534178 0.768036 0 0.153731L 1.06836 0.153731L 1.12177 1.2666C 1.3598 0.864535 1.70247 0.534594 2.11325 0.311954C 2.52404 0.0893145 2.98754 -0.0176786 3.45435 0.00238095C 5.03908 0.00238095 6.23208 1.32892 6.23208 3.30538C 6.23208 5.63796 4.7987 6.79535 3.24958 6.79535C 2.85309 6.81304 2.45874 6.7281 2.10469 6.54874C 1.75064 6.36937 1.44888 6.10166 1.22861 5.77151L 1.22861 5.77151L 1.22861 9.33269L 0.0534178 9.33269L 0.0534178 2.29935L 0.0534178 2.27264ZM 1.22861 4.00872C 1.23184 4.17026 1.24972 4.33117 1.28203 4.48948C 1.38304 4.88479 1.61299 5.23513 1.93548 5.48506C 2.25798 5.735 2.65461 5.87026 3.06262 5.86944C 4.31794 5.86944 5.05689 4.8456 5.05689 3.3588C 5.05689 2.05897 4.36246 0.946096 3.10714 0.946096C 2.61036 0.986777 2.14548 1.20726 1.79965 1.5662C 1.45382 1.92514 1.25079 2.3979 1.22861 2.89585L 1.22861 4.00872Z" />
        <path id="jupyter-client-path3_fill"
            d="M 1.31764 0.0178059L 2.75102 3.85499C 2.90237 4.28233 3.06262 4.7987 3.16946 5.18153C 3.2941 4.7898 3.42764 4.29123 3.5879 3.82828L 4.88773 0.0178059L 6.14305 0.0178059L 4.36246 4.64735C 3.47216 6.87309 2.92908 8.02158 2.11 8.71601C 1.69745 9.09283 1.19448 9.35658 0.649917 9.48166L 0.356119 8.48453C 0.736886 8.35942 1.09038 8.16304 1.39777 7.90584C 1.8321 7.55188 2.17678 7.10044 2.4038 6.5882C 2.45239 6.49949 2.48551 6.40314 2.50173 6.3033C 2.49161 6.19586 2.46457 6.0907 2.42161 5.9917L 0 0L 1.29983 0L 1.31764 0.0178059Z" />
        <path id="jupyter-client-path4_fill"
            d="M 2.19013 0L 2.19013 1.86962L 3.8995 1.86962L 3.8995 2.75992L 2.19013 2.75992L 2.19013 6.26769C 2.19013 7.06896 2.42161 7.53191 3.08043 7.53191C 3.31442 7.53574 3.54789 7.5088 3.77486 7.45179L 3.82828 8.34208C 3.48794 8.45999 3.12881 8.51431 2.76882 8.50234C 2.53042 8.51726 2.29161 8.48043 2.06878 8.39437C 1.84595 8.30831 1.64438 8.17506 1.47789 8.00377C 1.11525 7.51873 0.949826 6.91431 1.01494 6.31221L 1.01494 2.75102L 0 2.75102L 0 1.86072L 1.03274 1.86072L 1.03274 0.275992L 2.19013 0Z" />
        <path id="jupyter-client-path5_fill"
            d="M 1.17716 3.57899C 1.153 3.88093 1.19468 4.18451 1.29933 4.46876C 1.40398 4.75301 1.5691 5.01114 1.78329 5.22532C 1.99747 5.43951 2.2556 5.60463 2.53985 5.70928C 2.8241 5.81393 3.12768 5.85561 3.42962 5.83145C 4.04033 5.84511 4.64706 5.72983 5.21021 5.49313L 5.41498 6.38343C 4.72393 6.66809 3.98085 6.80458 3.23375 6.78406C 2.79821 6.81388 2.36138 6.74914 1.95322 6.59427C 1.54505 6.43941 1.17522 6.19809 0.869071 5.88688C 0.562928 5.57566 0.327723 5.2019 0.179591 4.79125C 0.0314584 4.38059 -0.0260962 3.94276 0.0108748 3.50777C 0.0108748 1.54912 1.17716 0 3.0824 0C 5.21911 0 5.75329 1.86962 5.75329 3.06262C 5.76471 3.24644 5.76471 3.43079 5.75329 3.61461L 1.15046 3.61461L 1.17716 3.57899ZM 4.66713 2.6887C 4.70149 2.45067 4.68443 2.20805 4.61709 1.97718C 4.54976 1.74631 4.43372 1.53255 4.2768 1.35031C 4.11987 1.16808 3.92571 1.0216 3.70739 0.920744C 3.48907 0.81989 3.25166 0.767006 3.01118 0.765656C 2.52201 0.801064 2.06371 1.01788 1.72609 1.37362C 1.38847 1.72935 1.19588 2.19835 1.18607 2.6887L 4.66713 2.6887Z" />
        <path id="jupyter-client-path6_fill"
            d="M 0.0534178 2.19228C 0.0534178 1.42663 0.0534178 0.767806 0 0.162404L 1.06836 0.162404L 1.06836 1.43553L 1.12177 1.43553C 1.23391 1.04259 1.4656 0.694314 1.78468 0.439049C 2.10376 0.183783 2.4944 0.034196 2.90237 0.0110538C 3.01466 -0.00368459 3.12839 -0.00368459 3.24068 0.0110538L 3.24068 1.12393C 3.10462 1.10817 2.9672 1.10817 2.83114 1.12393C 2.427 1.13958 2.04237 1.30182 1.7491 1.58035C 1.45583 1.85887 1.27398 2.23462 1.23751 2.63743C 1.20422 2.8196 1.18635 3.00425 1.1841 3.18941L 1.1841 6.65267L 0.00890297 6.65267L 0.00890297 2.20118L 0.0534178 2.19228Z" />
        <path id="jupyter-client-path7_fill"
            d="M 6.03059 2.83565C 6.06715 3.43376 5.92485 4.02921 5.6218 4.54615C 5.31875 5.0631 4.86869 5.47813 4.32893 5.73839C 3.78917 5.99864 3.18416 6.09233 2.59097 6.00753C 1.99778 5.92272 1.44326 5.66326 0.998048 5.26219C 0.552837 4.86113 0.23709 4.33661 0.0910307 3.75546C -0.0550287 3.17431 -0.0247891 2.56283 0.177897 1.99893C 0.380583 1.43503 0.746541 0.944221 1.22915 0.589037C 1.71176 0.233853 2.28918 0.0303686 2.88784 0.00450543C 3.28035 -0.0170932 3.67326 0.0391144 4.04396 0.169896C 4.41467 0.300677 4.75587 0.503453 5.04794 0.766561C 5.34 1.02967 5.57718 1.34792 5.74582 1.70301C 5.91446 2.0581 6.01124 2.44303 6.03059 2.83565L 6.03059 2.83565Z" />
        <path id="jupyter-client-path8_fill"
            d="M 18.6962 7.12238C 10.6836 7.12238 3.64131 4.24672 0 0C 1.41284 3.82041 3.96215 7.1163 7.30479 9.44404C 10.6474 11.7718 14.623 13.0196 18.6962 13.0196C 22.7695 13.0196 26.745 11.7718 30.0877 9.44404C 33.4303 7.1163 35.9796 3.82041 37.3925 4.0486e-13C 33.7601 4.24672 26.7445 7.12238 18.6962 7.12238Z" />
        <path id="jupyter-client-path9_fill"
            d="M 18.6962 5.89725C 26.7089 5.89725 33.7512 8.77291 37.3925 13.0196C 35.9796 9.19922 33.4303 5.90333 30.0877 3.57559C 26.745 1.24785 22.7695 4.0486e-13 18.6962 0C 14.623 4.0486e-13 10.6474 1.24785 7.30479 3.57559C 3.96215 5.90333 1.41284 9.19922 0 13.0196C 3.64131 8.76401 10.648 5.89725 18.6962 5.89725Z" />
        <path id="jupyter-client-path10_fill"
            d="M 7.59576 3.56656C 7.64276 4.31992 7.46442 5.07022 7.08347 5.72186C 6.70251 6.3735 6.13619 6.89698 5.45666 7.22561C 4.77713 7.55424 4.01515 7.67314 3.26781 7.56716C 2.52046 7.46117 1.82158 7.13511 1.26021 6.63051C 0.698839 6.12591 0.300394 5.46561 0.115637 4.73375C -0.0691191 4.00188 -0.0318219 3.23159 0.222777 2.52099C 0.477376 1.8104 0.93775 1.19169 1.54524 0.743685C 2.15274 0.295678 2.87985 0.0386595 3.63394 0.00537589C 4.12793 -0.0210471 4.62229 0.0501173 5.08878 0.214803C 5.55526 0.37949 5.98473 0.63447 6.35264 0.965179C 6.72055 1.29589 7.01971 1.69584 7.233 2.1422C 7.4463 2.58855 7.56957 3.07256 7.59576 3.56656L 7.59576 3.56656Z" />
        <path id="jupyter-client-path11_fill"
            d="M 2.25061 4.37943C 1.81886 4.39135 1.39322 4.27535 1.02722 4.04602C 0.661224 3.81668 0.371206 3.48424 0.193641 3.09052C 0.0160762 2.69679 -0.0411078 2.25935 0.0292804 1.83321C 0.0996686 1.40707 0.294486 1.01125 0.589233 0.695542C 0.883981 0.37983 1.2655 0.158316 1.68581 0.0588577C 2.10611 -0.0406005 2.54644 -0.0135622 2.95143 0.136572C 3.35641 0.286707 3.70796 0.553234 3.96186 0.902636C 4.21577 1.25204 4.3607 1.66872 4.37842 2.10027C 4.39529 2.6838 4.18131 3.25044 3.78293 3.67715C 3.38455 4.10387 2.83392 4.35623 2.25061 4.37943Z" />
    </defs>
</symbol>
`,eh=`<symbol
    id="icon-jupyter-client-inspect"
    viewBox="0 0 24 24"
>
    <path
        d="M20 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm-5 14H4v-4h11v4zm0-5H4V9h11v4zm5 5h-4V9h4v9z"
    />
</symbol>
`,th=`<symbol
    id="icon-jupyter-client-text"
    viewBox="0 0 1024 1024"
>
    <path
        d="M853.333333 1024 170.666667 1024c-93.866667 0-170.666667-76.8-170.666667-170.666667L0 170.666667c0-93.866667 76.8-170.666667 170.666667-170.666667l682.666667 0c93.866667 0 170.666667 76.8 170.666667 170.666667l0 682.666667C1024 947.2 947.2 1024 853.333333 1024zM170.666667 85.333333C123.733333 85.333333 85.333333 123.733333 85.333333 170.666667l0 682.666667c0 46.933333 38.4 85.333333 85.333333 85.333333l682.666667 0c46.933333 0 85.333333-38.4 85.333333-85.333333L938.666667 170.666667c0-46.933333-38.4-85.333333-85.333333-85.333333L170.666667 85.333333zM725.333333 341.333333 298.666667 341.333333C273.066667 341.333333 256 324.266667 256 298.666667s17.066667-42.666667 42.666667-42.666667l426.666667 0c25.6 0 42.666667 17.066667 42.666667 42.666667S750.933333 341.333333 725.333333 341.333333zM298.666667 384C273.066667 384 256 366.933333 256 341.333333L256 298.666667c0-25.6 17.066667-42.666667 42.666667-42.666667s42.666667 17.066667 42.666667 42.666667l0 42.666667C341.333333 366.933333 324.266667 384 298.666667 384zM725.333333 384c-25.6 0-42.666667-17.066667-42.666667-42.666667L682.666667 298.666667c0-25.6 17.066667-42.666667 42.666667-42.666667s42.666667 17.066667 42.666667 42.666667l0 42.666667C768 366.933333 750.933333 384 725.333333 384zM512 768c-25.6 0-42.666667-17.066667-42.666667-42.666667L469.333333 298.666667c0-25.6 17.066667-42.666667 42.666667-42.666667s42.666667 17.066667 42.666667 42.666667l0 426.666667C554.666667 750.933333 537.6 768 512 768zM554.666667 768l-85.333333 0c-25.6 0-42.666667-17.066667-42.666667-42.666667s17.066667-42.666667 42.666667-42.666667l85.333333 0c25.6 0 42.666667 17.066667 42.666667 42.666667S580.266667 768 554.666667 768z"
    />
</symbol>
`,ih=`<symbol
    id="icon-jupyter-client-simple"
    viewBox="0 0 152 165"
    xmlns="http://www.w3.org/2000/svg"
    xmlns:xlink="http://www.w3.org/1999/xlink"
>
  <g class="jp-jupyter-icon-color" fill="#F37726">
    <path transform="translate(0.078947, 110.582927)" d="M75.9422842,29.5804561 C43.3023947,29.5804561 14.7967832,17.6534634 0,0 C5.51083211,15.8406829 15.7815389,29.5667732 29.3904947,39.2784171 C42.9997,48.9898537 59.2737,54.2067805 75.9605789,54.2067805 C92.6474579,54.2067805 108.921458,48.9898537 122.530663,39.2784171 C136.139453,29.5667732 146.410284,15.8406829 151.921158,0 C137.087868,17.6534634 108.582589,29.5804561 75.9422842,29.5804561 L75.9422842,29.5804561 Z" />
    <path transform="translate(0.037368, 0.704878)" d="M75.9784579,24.6264073 C108.618763,24.6264073 137.124458,36.5534415 151.921158,54.2067805 C146.410284,38.366222 136.139453,24.6401317 122.530663,14.9284878 C108.921458,5.2168439 92.6474579,0 75.9605789,0 C59.2737,0 42.9997,5.2168439 29.3904947,14.9284878 C15.7815389,24.6401317 5.51083211,38.366222 0,54.2067805 C14.8330816,36.5899293 43.3385684,24.6264073 75.9784579,24.6264073 L75.9784579,24.6264073 Z" />
  </g>
</symbol>
`,sh=`<symbol
    id="icon-jupyter-client-terminal"
    viewBox="0 0 24 24"
>
    <path
        d="M3 3H21C21.5523 3 22 3.44772 22 4V20C22 20.5523 21.5523 21 21 21H3C2.44772 21 2 20.5523 2 20V4C2 3.44772 2.44772 3 3 3ZM4 5V19H20V5H4ZM12 15H18V17H12V15ZM8.66685 12L5.83842 9.17157L7.25264 7.75736L11.4953 12L7.25264 16.2426L5.83842 14.8284L8.66685 12Z"
    />
</symbol>
`,rh=`<symbol
    id="icon-jupyter-client-kernelspec"
    viewBox="0 0 512 512"
>
    <g>
        <path
            d="M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8zm96 328c0 8.8-7.2 16-16 16H176c-8.8 0-16-7.2-16-16V176c0-8.8 7.2-16 16-16h160c8.8 0 16 7.2 16 16v160z"
        />
    </g>
</symbol>
`,nh=`<symbol
    id="icon-jupyter-client-kernel"
    viewBox="0 0 24 24"
>
    <path
        d="M15 9H9v6h6V9zm-2 4h-2v-2h2v2zm8-2V9h-2V7c0-1.1-.9-2-2-2h-2V3h-2v2h-2V3H9v2H7c-1.1 0-2 .9-2 2v2H3v2h2v2H3v2h2v2c0 1.1.9 2 2 2h2v2h2v-2h2v2h2v-2h2c1.1 0 2-.9 2-2v-2h2v-2h-2v-2h2zm-4 6H7V7h10v10z"
    />
</symbol>
`,oh=`<symbol
    id="icon-jupyter-client-kernel-unknown"
    viewBox="0 0 24 24"
    fill="none"
>
    <path
        stroke="currentColor"
        stroke-width="2"
        d="M2,3.99079514 C2,2.89130934 2.89821238,2 3.99079514,2 L20.0092049,2 C21.1086907,2 22,2.89821238 22,3.99079514 L22,20.0092049 C22,21.1086907 21.1017876,22 20.0092049,22 L3.99079514,22 C2.89130934,22 2,21.1017876 2,20.0092049 L2,3.99079514 Z M12,15 L12,14 C12,13 12,12.5 13,12 C14,11.5 15,11 15,9.5 C15,8.5 14,7 12,7 C10,7 9,8.26413718 9,10 M12,16 L12,18"
    />
</symbol>
`,ah=`<symbol
    id="icon-jupyter-client-kernel-starting"
    viewBox="0 0 1024 1024"
>
    <path
        d="M256 640c-35.413333 0-67.413333 14.506667-90.453333 37.546667C115.2 727.893333 85.333333 938.666667 85.333333 938.666667s210.773333-29.866667 261.12-80.213334A127.829333 127.829333 0 0 0 256 640z m30.293333 158.293333c-11.946667 11.946667-92.586667 32.426667-92.586666 32.426667s20.053333-80.213333 32.426666-92.586667c7.253333-8.106667 17.92-12.8 29.866667-12.8a42.794667 42.794667 0 0 1 30.293333 72.96z m456.96-215.893333c271.36-271.36 180.906667-482.56 180.906667-482.56S712.96 9.386667 441.6 280.746667l-106.24-21.333334a86.613333 86.613333 0 0 0-77.226667 23.466667L85.333333 456.106667l213.333334 91.306666L476.586667 725.333333l91.306666 213.333334 172.8-172.8c20.053333-20.053333 29.013333-49.066667 23.466667-77.226667l-20.906667-106.24zM316.16 462.08l-81.493333-34.986667 84.053333-84.053333 61.44 12.373333c-24.32 35.413333-46.08 72.533333-64 106.666667z m280.746667 327.253333l-34.986667-81.493333c34.133333-17.92 71.253333-39.68 106.24-64l12.373333 61.44-83.626666 84.053333zM682.666667 522.24c-56.32 56.32-144.213333 102.4-172.373334 116.48l-125.013333-125.013333c13.653333-27.733333 59.733333-115.626667 116.48-172.373334 199.68-199.68 351.146667-170.24 351.146667-170.24s29.44 151.466667-170.24 351.146667zM640 469.333333c46.933333 0 85.333333-38.4 85.333333-85.333333s-38.4-85.333333-85.333333-85.333333-85.333333 38.4-85.333333 85.333333 38.4 85.333333 85.333333 85.333333z"
    />
</symbol>
`,lh=`<symbol
    id="icon-jupyter-client-kernel-idle"
    viewBox="0 0 1024 1024"
>
    <path
        d="M926.3 337.9c-22.6-53.3-54.8-101.2-96-142.3-41.1-41.1-89-73.4-142.3-96-55.2-23.4-113.9-35.2-174.3-35.2S394.6 76.2 339.3 99.6c-53.3 22.6-101.2 54.8-142.3 96-41.1 41.1-73.4 89-96 142.3-23.4 55.2-35.2 113.9-35.2 174.3 0 60.4 11.8 119.1 35.2 174.3 22.6 53.3 54.8 101.2 96 142.3 41.1 41.1 89 73.4 142.3 96 55.2 23.4 113.9 35.2 174.3 35.2s119.1-11.8 174.3-35.2c53.3-22.6 101.2-54.8 142.3-96 41.1-41.1 73.4-89 96-142.3 23.4-55.2 35.2-113.9 35.2-174.3 0.1-60.4-11.8-119.1-35.1-174.3zM513.7 879.1c-202.3 0-366.9-164.6-366.9-366.9s164.6-366.9 366.9-366.9c202.3 0 366.9 164.6 366.9 366.9S716 879.1 513.7 879.1zM715.6 371.6c-15.7-15.7-41.4-15.7-57 0l-196 196-95.9-95.9c-15.7-15.7-41.4-15.7-57 0-15.7 15.7-15.7 41.4 0 57l124.5 124.5c15.7 15.7 41.4 15.7 57 0l224.5-224.5c15.6-15.7 15.6-41.4-0.1-57.1z"
    />
</symbol>
`,ch=`<symbol
    id="icon-jupyter-client-kernel-busy"
    viewBox="0 0 1024 1024"
>
    <path
        d="M492.8 214.4c19.2 0 38.4 16 38.4 38.4v243.2c0 41.6-32 73.6-73.6 73.6h-166.4c-19.2 0-38.4-16-38.4-38.4 0-19.2 16-38.4 38.4-38.4h166.4v-243.2c0-16 16-35.2 35.2-35.2zM873.6 291.2c35.2 67.2 54.4 140.8 51.2 211.2-22.4-6.4-48-3.2-73.6 0 0-60.8-12.8-121.6-44.8-176-96-182.4-323.2-249.6-505.6-153.6s-249.6 323.2-153.6 505.6c51.2 96 137.6 160 233.6 185.6l-38.4 64c-108.8-35.2-201.6-108.8-259.2-214.4-115.2-217.6-35.2-486.4 182.4-604.8s492.8-35.2 608 182.4zM755.2 150.4c60.8 48 105.6 105.6 134.4 172.8-22.4 6.4-48 16-67.2 28.8-22.4-54.4-60.8-105.6-112-144-163.2-128-396.8-99.2-524.8 64-128 163.2-99.2 396.8 64 524.8 83.2 67.2 188.8 89.6 288 73.6l-9.6 73.6c-112 12.8-227.2-16-323.2-92.8-195.2-153.6-227.2-432-76.8-627.2 153.6-192 435.2-227.2 627.2-73.6zM748.8 496c-128 0-233.6 105.6-233.6 233.6s105.6 233.6 233.6 233.6 233.6-105.6 233.6-233.6c3.2-128-102.4-233.6-233.6-233.6z m0 393.6c-89.6 0-160-70.4-160-160s70.4-160 160-160 160 70.4 160 160-70.4 160-160 160zM627.2 732.8v-3.2c0-16 12.8-32 32-32h172.8c16 0 32 12.8 32 32v3.2c0 16-12.8 32-32 32h-172.8c-16 0-32-16-32-32z"
    />
</symbol>
`,hh=`<symbol
    id="icon-jupyter-client-kernel-terminating"
    viewBox="0 0 1024 1024"
>
    <path
        d="M57.33 0h909.34q24 0 40.67 16.66Q1024 33.32 1024 57.32v909.34q0 24-16.66 40.67-16.67 16.66-40.67 16.66H57.33q-24 0-40.66-16.66Q0.01 990.66 0.01 966.66V57.32q0-24 16.66-40.66Q33.33 0 57.33 0z m56 113.33v797.34h797.34V113.33H113.33zM228 454.67h568v114.66H228V454.67z"
    />
</symbol>
`,uh=`<symbol
    id="icon-jupyter-client-kernel-restarting"
    viewBox="0 0 1024 1024"
>
    <path
        d="M707.584 389.312c-12.928-6.08-18.88-14.272-17.728-24.576s5.504-18.432 13.12-24.576c2.304-1.536 9.728-7.424 22.272-17.664 12.544-10.304 28.032-22.656 46.272-37.12-32-36.544-70.144-65.28-114.304-86.208-44.096-20.864-92.096-31.36-143.936-31.36-48 0-92.992 8.96-134.912 26.816-41.92 17.92-78.528 42.432-109.76 73.664-31.232 31.168-55.808 67.712-73.728 109.568s-26.88 86.784-26.88 134.72c0 47.168 8.96 91.712 26.88 133.568s42.496 78.4 73.728 109.568c31.232 31.232 67.84 55.744 109.76 73.6s86.848 26.816 134.912 26.816c39.616 0 77.184-6.272 112.576-18.816 35.456-12.544 67.84-30.272 97.152-53.056 29.312-22.848 54.464-49.664 75.456-80.512 20.928-30.848 36.416-64.512 46.272-101.056 5.312-17.472 15.232-31.936 29.696-43.392 14.464-11.392 31.616-17.152 51.456-17.152 23.616 0 43.648 8.384 60.032 25.152 16.384 16.704 24.576 36.544 24.576 59.328 0 10.624-1.92 20.928-5.696 30.848-16 53.248-39.616 102.336-70.848 147.264s-68.416 83.52-111.488 115.84c-43.072 32.32-90.88 57.664-143.488 75.904-52.544 18.368-107.776 27.52-165.696 27.52-70.848 0-137.536-13.312-200.064-39.936-62.464-26.624-116.8-63.168-162.88-109.568s-82.688-100.672-109.76-162.688c-27.072-62.016-40.576-128.448-40.576-199.232s13.504-137.344 40.576-199.808c27.072-62.4 63.616-116.608 109.76-162.688 46.08-46.016 100.416-82.56 162.88-109.568s129.152-40.512 200.064-40.512c78.528 0 151.296 16.192 218.368 48.512s124.224 76.288 171.456 131.84c17.536-12.928 32.192-24.192 44.032-33.664 11.84-9.536 19.264-15.424 22.272-17.728 4.608-3.776 9.536-6.656 14.848-8.576s10.304-1.92 14.848 0c4.544 1.92 8.576 5.888 12.032 11.968s5.888 15.232 7.424 27.392c0.768 6.848 1.536 18.432 2.304 34.816s1.536 35.392 2.304 57.088c0.768 21.696 1.152 44.16 1.152 67.328 0 23.232-0.384 45.12-1.152 65.664-0.768 25.856-6.848 44.544-18.304 55.936-6.144 6.144-15.296 9.6-27.456 10.368-12.224 0.768-25.152-0.384-38.848-3.456-20.608-4.544-43.264-9.472-68.032-14.848-24.768-5.312-48.384-10.816-70.848-16.576-22.464-5.696-42.304-11.072-59.456-16-17.152-4.864-28.032-8.512-32.64-10.752l0 0 0 0z"
    />
</symbol>
`,fh=`<symbol
    id="icon-jupyter-client-kernel-autorestarting"
    viewBox="0 0 1024 1024"
>
    <path
        d="M150.613333 640H61.44A461.653333 461.653333 0 0 1 42.666667 512 469.333333 469.333333 0 0 1 512 42.666667a463.786667 463.786667 0 0 1 298.666667 107.52V42.666667h85.333333v256h-256V213.333333h111.36A384 384 0 0 0 128 512a378.453333 378.453333 0 0 0 22.613333 128z m810.666667-256h-89.6A384 384 0 0 1 270.506667 810.666667H384v-85.333334H128v256h85.333333v-107.946666A469.333333 469.333333 0 0 0 981.333333 512a462.08 462.08 0 0 0-17.92-128h-2.133333z m-376.746667 208.213333h-150.613333L401.92 682.666667H330.666667l148.906666-384h61.44l149.333334 384H618.666667l-34.133334-90.453334z m-133.546666-53.333333h116.48L512 380.16l-61.013333 158.72z"
    />
</symbol>
`,dh=`<symbol
    id="icon-jupyter-client-kernel-dead"
    viewBox="0 0 1024 1024"
>
    <path
        d="M512 960c-60.416 0-119.296-11.776-174.592-35.328-53.248-22.528-101.376-54.784-142.336-95.744s-73.216-89.088-95.744-142.336c-23.552-55.296-35.328-114.176-35.328-174.592s11.776-119.296 35.328-174.592c22.528-53.248 54.784-101.376 95.744-142.336s89.088-73.216 142.336-95.744c55.296-23.552 114.176-35.328 174.592-35.328s119.296 11.776 174.592 35.328c53.248 22.528 101.376 54.784 142.336 95.744s73.216 89.088 95.744 142.336c23.552 55.296 35.328 114.176 35.328 174.592s-11.776 119.296-35.328 174.592c-22.528 53.248-54.784 101.376-95.744 142.336s-89.088 73.216-142.336 95.744c-55.296 23.552-114.176 35.328-174.592 35.328z m0-809.472c-96.256 0-187.392 37.376-255.488 105.984-68.096 68.096-105.984 158.72-105.984 255.488s37.376 187.392 105.984 255.488 158.72 105.984 255.488 105.984 187.392-37.376 255.488-105.984 105.984-158.72 105.984-255.488-37.376-187.392-105.984-255.488-159.232-105.984-255.488-105.984zM242.688 824.832c-11.264 0-22.016-4.096-30.72-12.8-16.896-16.896-16.896-44.544 0-61.44L729.6 232.96c16.896-16.896 44.544-16.896 61.44 0 16.896 16.896 16.896 44.544 0 61.44L273.408 812.032c-8.704 8.704-19.968 12.8-30.72 12.8z"
    />
</symbol>
`,_h=`<symbol
    id="icon-jupyter-client-session"
    viewBox="0 0 1024 1024"
>
    <path
        d="M213.33 532.33v-320h405.33V383H704V169.67c0-23.57-19.1-42.67-42.67-42.67H170.67c-11.32 0-22.17 4.5-30.17 12.5S128 158.35 128 169.67v448h170v-85.34h-84.67z m85.34 321V426.67c0-11.32 4.5-22.17 12.5-30.17s18.85-12.5 30.17-12.5h511.99c11.32 0 22.17 4.5 30.17 12.5s12.5 18.85 12.5 30.17V896H341.34c-11.32 0-22.17-4.5-30.17-12.5s-12.5-18.85-12.5-30.17z m512-384H384v341.33h426.67V469.33z m-384 213.33v-85.33H512v85.33h-85.33zM640 597.33v85.33h-85.33v-85.33H640z m42.67 85.33v-85.33H768v85.33h-85.33z"
    ></path>
</symbol>
`,ph=`<symbol
    id="icon-jupyter-client-session-console"
    viewBox="0 0 200 200"
>
    <g fill="#0288D1">
        <path
            d="M20 19.8h160v159.9H20z"
        />
    </g>
    <g fill="#fff">
        <path
            d="M105 127.3h40v12.8h-40zM51.1 77L74 99.9l-23.3 23.3 10.5 10.5 23.3-23.3L95 99.9 84.5 89.4 61.6 66.5z"
        />
    </g>
</symbol>
`,mh=`<symbol
    id="icon-jupyter-client-session-notebook"
    viewBox="0 0 22 22"
>
    <g fill="#EF6C00">
        <path
            d="M18.7 3.3v15.4H3.3V3.3h15.4m1.5-1.5H1.8v18.3h18.3l.1-18.3z"
        />
        <path
            d="M16.5 16.5l-5.4-4.3-5.6 4.3v-11h11z"
        />
    </g>
</symbol>
`;var gh=Object.defineProperty,vh=(e,t,i)=>t in e?gh(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i,qt=(e,t,i)=>(vh(e,typeof t!="symbol"?t+"":t,i),i);const bh=/"(?:_|\\u0{2}5[Ff]){2}(?:p|\\u0{2}70)(?:r|\\u0{2}72)(?:o|\\u0{2}6[Ff])(?:t|\\u0{2}74)(?:o|\\u0{2}6[Ff])(?:_|\\u0{2}5[Ff]){2}"\s*:/,yh=/"(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)"\s*:/,Ch=/^\s*["[{]|^\s*-?\d[\d.]{0,14}\s*$/;function Sh(e,t){if(e==="__proto__"||e==="constructor"&&t&&typeof t=="object"&&"prototype"in t){wh(e);return}return t}function wh(e){console.warn(`[destr] Dropping "${e}" key to prevent prototype pollution.`)}function kh(e,t={}){if(typeof e!="string")return e;const i=e.trim();if(e[0]==='"'&&e[e.length-1]==='"')return i.slice(1,-1);if(i.length<=9){const s=i.toLowerCase();if(s==="true")return!0;if(s==="false")return!1;if(s==="undefined")return;if(s==="null")return null;if(s==="nan")return Number.NaN;if(s==="infinity")return Number.POSITIVE_INFINITY;if(s==="-infinity")return Number.NEGATIVE_INFINITY}if(!Ch.test(e)){if(t.strict)throw new SyntaxError("[destr] Invalid JSON");return e}try{if(bh.test(e)||yh.test(e)){if(t.strict)throw new Error("[destr] Possible prototype pollution");return JSON.parse(e,Sh)}return JSON.parse(e)}catch(s){if(t.strict)throw s;return e}}const Lh=/#/g,Eh=/&/g,Mh=/=/g,un=/\+/g,Dh=/%5e/gi,Th=/%60/gi,Rh=/%7c/gi,Ah=/%20/gi;function Oh(e){return encodeURI(""+e).replace(Rh,"|")}function Yr(e){return Oh(typeof e=="string"?e:JSON.stringify(e)).replace(un,"%2B").replace(Ah,"+").replace(Lh,"%23").replace(Eh,"%26").replace(Th,"`").replace(Dh,"^")}function Cr(e){return Yr(e).replace(Mh,"%3D")}function xa(e=""){try{return decodeURIComponent(""+e)}catch{return""+e}}function Bh(e){return xa(e.replace(un," "))}function Hh(e){return xa(e.replace(un," "))}function Ph(e=""){const t={};e[0]==="?"&&(e=e.slice(1));for(const i of e.split("&")){const s=i.match(/([^=]+)=?(.*)/)||[];if(s.length<2)continue;const r=Bh(s[1]);if(r==="__proto__"||r==="constructor")continue;const n=Hh(s[2]||"");t[r]===void 0?t[r]=n:Array.isArray(t[r])?t[r].push(n):t[r]=[t[r],n]}return t}function xh(e,t){return(typeof t=="number"||typeof t=="boolean")&&(t=String(t)),t?Array.isArray(t)?t.map(i=>`${Cr(e)}=${Yr(i)}`).join("&"):`${Cr(e)}=${Yr(t)}`:Cr(e)}function Ih(e){return Object.keys(e).filter(t=>e[t]!==void 0).map(t=>xh(t,e[t])).filter(Boolean).join("&")}const Nh=/^[\s\w\0+.-]{2,}:([/\\]{1,2})/,Vh=/^[\s\w\0+.-]{2,}:([/\\]{2})?/,jh=/^([/\\]\s*){2,}[^/\\]/;function Ia(e,t={}){return typeof t=="boolean"&&(t={acceptRelative:t}),t.strict?Nh.test(e):Vh.test(e)||(t.acceptRelative?jh.test(e):!1)}const Fh=/\/$|\/\?/;function zr(e="",t=!1){return t?Fh.test(e):e.endsWith("/")}function Uh(e="",t=!1){if(!t)return(zr(e)?e.slice(0,-1):e)||"/";if(!zr(e,!0))return e||"/";const[i,...s]=e.split("?");return(i.slice(0,-1)||"/")+(s.length>0?`?${s.join("?")}`:"")}function Wh(e="",t=!1){if(!t)return e.endsWith("/")?e:e+"/";if(zr(e,!0))return e||"/";const[i,...s]=e.split("?");return i+"/"+(s.length>0?`?${s.join("?")}`:"")}function Yh(e,t){if(qh(t)||Ia(e))return e;const i=Uh(t);return e.startsWith(i)?e:Gh(i,e)}function zh(e,t){const i=Na(e),s={...Ph(i.search),...t};return i.search=Ih(s),$h(i)}function qh(e){return!e||e==="/"}function Zh(e){return e&&e!=="/"}const Kh=/^\.?\//;function Gh(e,...t){let i=e||"";for(const s of t.filter(r=>Zh(r)))if(i){const r=s.replace(Kh,"");i=Wh(i)+r}else i=s;return i}function Na(e="",t){const i=e.match(/^[\s\0]*(blob:|data:|javascript:|vbscript:)(.*)/);if(i){const[,u,m=""]=i;return{protocol:u,pathname:m,href:u+m,auth:"",host:"",search:"",hash:""}}if(!Ia(e,{acceptRelative:!0}))return t?Na(t+e):Un(e);const[,s="",r,n=""]=e.replace(/\\/g,"/").match(/^[\s\0]*([\w+.-]{2,}:)?\/\/([^/@]+@)?(.*)/)||[],[,l="",o=""]=n.match(/([^#/?]*)(.*)?/)||[],{pathname:a,search:c,hash:f}=Un(o.replace(/\/(?=[A-Za-z]:)/,""));return{protocol:s,auth:r?r.slice(0,Math.max(0,r.length-1)):"",host:l,pathname:a,search:c,hash:f}}function Un(e=""){const[t="",i="",s=""]=(e.match(/([^#?]*)(\?[^#]*)?(#.*)?/)||[]).splice(1);return{pathname:t,search:i,hash:s}}function $h(e){const t=e.pathname||"",i=e.search?(e.search.startsWith("?")?"":"?")+e.search:"",s=e.hash||"",r=e.auth?e.auth+"@":"",n=e.host||"";return(e.protocol?e.protocol+"//":"")+r+n+t+i+s}class Jh extends Error{constructor(t,i){super(t,i),this.name="FetchError",i!=null&&i.cause&&!this.cause&&(this.cause=i.cause)}}function Xh(e){var t,i,s,r,n;const l=((t=e.error)==null?void 0:t.message)||((i=e.error)==null?void 0:i.toString())||"",o=((s=e.request)==null?void 0:s.method)||((r=e.options)==null?void 0:r.method)||"GET",a=((n=e.request)==null?void 0:n.url)||String(e.request)||"/",c=`[${o}] ${JSON.stringify(a)}`,f=e.response?`${e.response.status} ${e.response.statusText}`:"<no response>",u=`${c}: ${f}${l?` ${l}`:""}`,m=new Jh(u,e.error?{cause:e.error}:void 0);for(const v of["request","options","response"])Object.defineProperty(m,v,{get(){return e[v]}});for(const[v,y]of[["data","_data"],["status","status"],["statusCode","status"],["statusText","statusText"],["statusMessage","statusText"]])Object.defineProperty(m,v,{get(){return e.response&&e.response[y]}});return m}const Qh=new Set(Object.freeze(["PATCH","POST","PUT","DELETE"]));function Wn(e="GET"){return Qh.has(e.toUpperCase())}function eu(e){if(e===void 0)return!1;const t=typeof e;return t==="string"||t==="number"||t==="boolean"||t===null?!0:t!=="object"?!1:Array.isArray(e)?!0:e.buffer?!1:e.constructor&&e.constructor.name==="Object"||typeof e.toJSON=="function"}const tu=new Set(["image/svg","application/xml","application/xhtml","application/html"]),iu=/^application\/(?:[\w!#$%&*.^`~-]*\+)?json(;.+)?$/i;function su(e=""){if(!e)return"json";const t=e.split(";").shift()||"";return iu.test(t)?"json":tu.has(t)||t.startsWith("text/")?"text":"blob"}function ru(e,t,i=globalThis.Headers){const s={...t,...e};if(t!=null&&t.params&&e!=null&&e.params&&(s.params={...t==null?void 0:t.params,...e==null?void 0:e.params}),t!=null&&t.query&&e!=null&&e.query&&(s.query={...t==null?void 0:t.query,...e==null?void 0:e.query}),t!=null&&t.headers&&e!=null&&e.headers){s.headers=new i((t==null?void 0:t.headers)||{});for(const[r,n]of new i((e==null?void 0:e.headers)||{}))s.headers.set(r,n)}return s}const nu=new Set([408,409,425,429,500,502,503,504]),ou=new Set([101,204,205,304]);function Va(e={}){const{fetch:t=globalThis.fetch,Headers:i=globalThis.Headers,AbortController:s=globalThis.AbortController}=e;async function r(o){const a=o.error&&o.error.name==="AbortError"&&!o.options.timeout||!1;if(o.options.retry!==!1&&!a){let f;typeof o.options.retry=="number"?f=o.options.retry:f=Wn(o.options.method)?0:1;const u=o.response&&o.response.status||500;if(f>0&&(Array.isArray(o.options.retryStatusCodes)?o.options.retryStatusCodes.includes(u):nu.has(u))){const m=o.options.retryDelay||0;return m>0&&await new Promise(v=>setTimeout(v,m)),n(o.request,{...o.options,retry:f-1,timeout:o.options.timeout})}}const c=Xh(o);throw Error.captureStackTrace&&Error.captureStackTrace(c,n),c}const n=async function(o,a={}){var c;const f={request:o,options:ru(a,e.defaults,i),response:void 0,error:void 0};if(f.options.method=(c=f.options.method)==null?void 0:c.toUpperCase(),f.options.onRequest&&await f.options.onRequest(f),typeof f.request=="string"&&(f.options.baseURL&&(f.request=Yh(f.request,f.options.baseURL)),(f.options.query||f.options.params)&&(f.request=zh(f.request,{...f.options.params,...f.options.query}))),f.options.body&&Wn(f.options.method)&&(eu(f.options.body)?(f.options.body=typeof f.options.body=="string"?f.options.body:JSON.stringify(f.options.body),f.options.headers=new i(f.options.headers||{}),f.options.headers.has("content-type")||f.options.headers.set("content-type","application/json"),f.options.headers.has("accept")||f.options.headers.set("accept","application/json")):("pipeTo"in f.options.body&&typeof f.options.body.pipeTo=="function"||typeof f.options.body.pipe=="function")&&("duplex"in f.options||(f.options.duplex="half"))),!f.options.signal&&f.options.timeout){const u=new s;setTimeout(()=>u.abort(),f.options.timeout),f.options.signal=u.signal}try{f.response=await t(f.request,f.options)}catch(u){return f.error=u,f.options.onRequestError&&await f.options.onRequestError(f),await r(f)}if(f.response.body&&!ou.has(f.response.status)&&f.options.method!=="HEAD"){const u=(f.options.parseResponse?"json":f.options.responseType)||su(f.response.headers.get("content-type")||"");switch(u){case"json":{const m=await f.response.text(),v=f.options.parseResponse||kh;f.response._data=v(m);break}case"stream":{f.response._data=f.response.body;break}default:f.response._data=await f.response[u]()}}return f.options.onResponse&&await f.options.onResponse(f),!f.options.ignoreResponseError&&f.response.status>=400&&f.response.status<600?(f.options.onResponseError&&await f.options.onResponseError(f),await r(f)):f.response},l=async function(o,a){return(await n(o,a))._data};return l.raw=n,l.native=(...o)=>t(...o),l.create=(o={})=>Va({...e,defaults:{...e.defaults,...o}}),l}const fn=function(){if(typeof globalThis<"u")return globalThis;if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")}(),au=fn.fetch||(()=>Promise.reject(new Error("[ofetch] global.fetch is not supported!"))),lu=fn.Headers,cu=fn.AbortController,hu=Va({fetch:au,Headers:lu,AbortController:cu});class uu extends Error{constructor(t){super(t.statusText),qt(this,"status"),this.response=t,this.status=t.status}}class Yn extends Error{constructor(t,i){super(t.msg),qt(this,"code"),this.body=t,this.response=i,this.code=t.code}}function xt(e){if(typeof e!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(e))}function zn(e,t){for(var i="",s=0,r=-1,n=0,l,o=0;o<=e.length;++o){if(o<e.length)l=e.charCodeAt(o);else{if(l===47)break;l=47}if(l===47){if(!(r===o-1||n===1))if(r!==o-1&&n===2){if(i.length<2||s!==2||i.charCodeAt(i.length-1)!==46||i.charCodeAt(i.length-2)!==46){if(i.length>2){var a=i.lastIndexOf("/");if(a!==i.length-1){a===-1?(i="",s=0):(i=i.slice(0,a),s=i.length-1-i.lastIndexOf("/")),r=o,n=0;continue}}else if(i.length===2||i.length===1){i="",s=0,r=o,n=0;continue}}t&&(i.length>0?i+="/..":i="..",s=2)}else i.length>0?i+="/"+e.slice(r+1,o):i=e.slice(r+1,o),s=o-r-1;r=o,n=0}else l===46&&n!==-1?++n:n=-1}return i}function fu(e,t){var i=t.dir||t.root,s=t.base||(t.name||"")+(t.ext||"");return i?i===t.root?i+s:i+e+s:s}var is={resolve:function(){for(var e="",t=!1,i,s=arguments.length-1;s>=-1&&!t;s--){var r;s>=0?r=arguments[s]:(i===void 0&&(i=process.cwd()),r=i),xt(r),r.length!==0&&(e=r+"/"+e,t=r.charCodeAt(0)===47)}return e=zn(e,!t),t?e.length>0?"/"+e:"/":e.length>0?e:"."},normalize:function(e){if(xt(e),e.length===0)return".";var t=e.charCodeAt(0)===47,i=e.charCodeAt(e.length-1)===47;return e=zn(e,!t),e.length===0&&!t&&(e="."),e.length>0&&i&&(e+="/"),t?"/"+e:e},isAbsolute:function(e){return xt(e),e.length>0&&e.charCodeAt(0)===47},join:function(){if(arguments.length===0)return".";for(var e,t=0;t<arguments.length;++t){var i=arguments[t];xt(i),i.length>0&&(e===void 0?e=i:e+="/"+i)}return e===void 0?".":is.normalize(e)},relative:function(e,t){if(xt(e),xt(t),e===t||(e=is.resolve(e),t=is.resolve(t),e===t))return"";for(var i=1;i<e.length&&e.charCodeAt(i)===47;++i);for(var s=e.length,r=s-i,n=1;n<t.length&&t.charCodeAt(n)===47;++n);for(var l=t.length,o=l-n,a=r<o?r:o,c=-1,f=0;f<=a;++f){if(f===a){if(o>a){if(t.charCodeAt(n+f)===47)return t.slice(n+f+1);if(f===0)return t.slice(n+f)}else r>a&&(e.charCodeAt(i+f)===47?c=f:f===0&&(c=0));break}var u=e.charCodeAt(i+f),m=t.charCodeAt(n+f);if(u!==m)break;u===47&&(c=f)}var v="";for(f=i+c+1;f<=s;++f)(f===s||e.charCodeAt(f)===47)&&(v.length===0?v+="..":v+="/..");return v.length>0?v+t.slice(n+c):(n+=c,t.charCodeAt(n)===47&&++n,t.slice(n))},_makeLong:function(e){return e},dirname:function(e){if(xt(e),e.length===0)return".";for(var t=e.charCodeAt(0),i=t===47,s=-1,r=!0,n=e.length-1;n>=1;--n)if(t=e.charCodeAt(n),t===47){if(!r){s=n;break}}else r=!1;return s===-1?i?"/":".":i&&s===1?"//":e.slice(0,s)},basename:function(e,t){if(t!==void 0&&typeof t!="string")throw new TypeError('"ext" argument must be a string');xt(e);var i=0,s=-1,r=!0,n;if(t!==void 0&&t.length>0&&t.length<=e.length){if(t.length===e.length&&t===e)return"";var l=t.length-1,o=-1;for(n=e.length-1;n>=0;--n){var a=e.charCodeAt(n);if(a===47){if(!r){i=n+1;break}}else o===-1&&(r=!1,o=n+1),l>=0&&(a===t.charCodeAt(l)?--l===-1&&(s=n):(l=-1,s=o))}return i===s?s=o:s===-1&&(s=e.length),e.slice(i,s)}else{for(n=e.length-1;n>=0;--n)if(e.charCodeAt(n)===47){if(!r){i=n+1;break}}else s===-1&&(r=!1,s=n+1);return s===-1?"":e.slice(i,s)}},extname:function(e){xt(e);for(var t=-1,i=0,s=-1,r=!0,n=0,l=e.length-1;l>=0;--l){var o=e.charCodeAt(l);if(o===47){if(!r){i=l+1;break}continue}s===-1&&(r=!1,s=l+1),o===46?t===-1?t=l:n!==1&&(n=1):t!==-1&&(n=-1)}return t===-1||s===-1||n===0||n===1&&t===s-1&&t===i+1?"":e.slice(t,s)},format:function(e){if(e===null||typeof e!="object")throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof e);return fu("/",e)},parse:function(e){xt(e);var t={root:"",dir:"",base:"",ext:"",name:""};if(e.length===0)return t;var i=e.charCodeAt(0),s=i===47,r;s?(t.root="/",r=1):r=0;for(var n=-1,l=0,o=-1,a=!0,c=e.length-1,f=0;c>=r;--c){if(i=e.charCodeAt(c),i===47){if(!a){l=c+1;break}continue}o===-1&&(a=!1,o=c+1),i===46?n===-1?n=c:f!==1&&(f=1):n!==-1&&(f=-1)}return n===-1||o===-1||f===0||f===1&&n===o-1&&n===l+1?o!==-1&&(l===0&&s?t.base=t.name=e.slice(1,o):t.base=t.name=e.slice(l,o)):(l===0&&s?(t.name=e.slice(1,n),t.base=e.slice(1,o)):(t.name=e.slice(l,n),t.base=e.slice(l,o)),t.ext=e.slice(n,o)),l>0?t.dir=e.slice(0,l-1):s&&(t.dir="/"),t},sep:"/",delimiter:":",win32:null,posix:null};is.posix=is;function ja(e,t){return function(){return e.apply(t,arguments)}}const{toString:du}=Object.prototype,{getPrototypeOf:dn}=Object,Js=(e=>t=>{const i=du.call(t);return e[i]||(e[i]=i.slice(8,-1).toLowerCase())})(Object.create(null)),Ft=e=>(e=e.toLowerCase(),t=>Js(t)===e),Xs=e=>t=>typeof t===e,{isArray:Fi}=Array,as=Xs("undefined");function _u(e){return e!==null&&!as(e)&&e.constructor!==null&&!as(e.constructor)&&Et(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const Fa=Ft("ArrayBuffer");function pu(e){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&Fa(e.buffer),t}const mu=Xs("string"),Et=Xs("function"),Ua=Xs("number"),Qs=e=>e!==null&&typeof e=="object",gu=e=>e===!0||e===!1,Ts=e=>{if(Js(e)!=="object")return!1;const t=dn(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},vu=Ft("Date"),bu=Ft("File"),yu=Ft("Blob"),Cu=Ft("FileList"),Su=e=>Qs(e)&&Et(e.pipe),wu=e=>{let t;return e&&(typeof FormData=="function"&&e instanceof FormData||Et(e.append)&&((t=Js(e))==="formdata"||t==="object"&&Et(e.toString)&&e.toString()==="[object FormData]"))},ku=Ft("URLSearchParams"),Lu=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function ds(e,t,{allOwnKeys:i=!1}={}){if(e===null||typeof e>"u")return;let s,r;if(typeof e!="object"&&(e=[e]),Fi(e))for(s=0,r=e.length;s<r;s++)t.call(null,e[s],s,e);else{const n=i?Object.getOwnPropertyNames(e):Object.keys(e),l=n.length;let o;for(s=0;s<l;s++)o=n[s],t.call(null,e[o],o,e)}}function Wa(e,t){t=t.toLowerCase();const i=Object.keys(e);let s=i.length,r;for(;s-- >0;)if(r=i[s],t===r.toLowerCase())return r;return null}const Ya=(()=>typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global)(),za=e=>!as(e)&&e!==Ya;function qr(){const{caseless:e}=za(this)&&this||{},t={},i=(s,r)=>{const n=e&&Wa(t,r)||r;Ts(t[n])&&Ts(s)?t[n]=qr(t[n],s):Ts(s)?t[n]=qr({},s):Fi(s)?t[n]=s.slice():t[n]=s};for(let s=0,r=arguments.length;s<r;s++)arguments[s]&&ds(arguments[s],i);return t}const Eu=(e,t,i,{allOwnKeys:s}={})=>(ds(t,(r,n)=>{i&&Et(r)?e[n]=ja(r,i):e[n]=r},{allOwnKeys:s}),e),Mu=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),Du=(e,t,i,s)=>{e.prototype=Object.create(t.prototype,s),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),i&&Object.assign(e.prototype,i)},Tu=(e,t,i,s)=>{let r,n,l;const o={};if(t=t||{},e==null)return t;do{for(r=Object.getOwnPropertyNames(e),n=r.length;n-- >0;)l=r[n],(!s||s(l,e,t))&&!o[l]&&(t[l]=e[l],o[l]=!0);e=i!==!1&&dn(e)}while(e&&(!i||i(e,t))&&e!==Object.prototype);return t},Ru=(e,t,i)=>{e=String(e),(i===void 0||i>e.length)&&(i=e.length),i-=t.length;const s=e.indexOf(t,i);return s!==-1&&s===i},Au=e=>{if(!e)return null;if(Fi(e))return e;let t=e.length;if(!Ua(t))return null;const i=new Array(t);for(;t-- >0;)i[t]=e[t];return i},Ou=(e=>t=>e&&t instanceof e)(typeof Uint8Array<"u"&&dn(Uint8Array)),Bu=(e,t)=>{const i=(e&&e[Symbol.iterator]).call(e);let s;for(;(s=i.next())&&!s.done;){const r=s.value;t.call(e,r[0],r[1])}},Hu=(e,t)=>{let i;const s=[];for(;(i=e.exec(t))!==null;)s.push(i);return s},Pu=Ft("HTMLFormElement"),xu=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(t,i,s){return i.toUpperCase()+s}),qn=(({hasOwnProperty:e})=>(t,i)=>e.call(t,i))(Object.prototype),Iu=Ft("RegExp"),qa=(e,t)=>{const i=Object.getOwnPropertyDescriptors(e),s={};ds(i,(r,n)=>{let l;(l=t(r,n,e))!==!1&&(s[n]=l||r)}),Object.defineProperties(e,s)},Nu=e=>{qa(e,(t,i)=>{if(Et(e)&&["arguments","caller","callee"].indexOf(i)!==-1)return!1;const s=e[i];if(Et(s)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+i+"'")})}})},Vu=(e,t)=>{const i={},s=r=>{r.forEach(n=>{i[n]=!0})};return Fi(e)?s(e):s(String(e).split(t)),i},ju=()=>{},Fu=(e,t)=>(e=+e,Number.isFinite(e)?e:t),Sr="abcdefghijklmnopqrstuvwxyz",Zn="0123456789",Za={DIGIT:Zn,ALPHA:Sr,ALPHA_DIGIT:Sr+Sr.toUpperCase()+Zn},Uu=(e=16,t=Za.ALPHA_DIGIT)=>{let i="";const{length:s}=t;for(;e--;)i+=t[Math.random()*s|0];return i};function Wu(e){return!!(e&&Et(e.append)&&e[Symbol.toStringTag]==="FormData"&&e[Symbol.iterator])}const Yu=e=>{const t=new Array(10),i=(s,r)=>{if(Qs(s)){if(t.indexOf(s)>=0)return;if(!("toJSON"in s)){t[r]=s;const n=Fi(s)?[]:{};return ds(s,(l,o)=>{const a=i(l,r+1);!as(a)&&(n[o]=a)}),t[r]=void 0,n}}return s};return i(e,0)},zu=Ft("AsyncFunction"),qu=e=>e&&(Qs(e)||Et(e))&&Et(e.then)&&Et(e.catch),G={isArray:Fi,isArrayBuffer:Fa,isBuffer:_u,isFormData:wu,isArrayBufferView:pu,isString:mu,isNumber:Ua,isBoolean:gu,isObject:Qs,isPlainObject:Ts,isUndefined:as,isDate:vu,isFile:bu,isBlob:yu,isRegExp:Iu,isFunction:Et,isStream:Su,isURLSearchParams:ku,isTypedArray:Ou,isFileList:Cu,forEach:ds,merge:qr,extend:Eu,trim:Lu,stripBOM:Mu,inherits:Du,toFlatObject:Tu,kindOf:Js,kindOfTest:Ft,endsWith:Ru,toArray:Au,forEachEntry:Bu,matchAll:Hu,isHTMLForm:Pu,hasOwnProperty:qn,hasOwnProp:qn,reduceDescriptors:qa,freezeMethods:Nu,toObjectSet:Vu,toCamelCase:xu,noop:ju,toFiniteNumber:Fu,findKey:Wa,global:Ya,isContextDefined:za,ALPHABET:Za,generateString:Uu,isSpecCompliantForm:Wu,toJSONObject:Yu,isAsyncFn:zu,isThenable:qu};function ke(e,t,i,s,r){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=e,this.name="AxiosError",t&&(this.code=t),i&&(this.config=i),s&&(this.request=s),r&&(this.response=r)}G.inherits(ke,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:G.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});const Ka=ke.prototype,Ga={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{Ga[e]={value:e}});Object.defineProperties(ke,Ga);Object.defineProperty(Ka,"isAxiosError",{value:!0});ke.from=(e,t,i,s,r,n)=>{const l=Object.create(Ka);return G.toFlatObject(e,l,function(o){return o!==Error.prototype},o=>o!=="isAxiosError"),ke.call(l,e.message,t,i,s,r),l.cause=e,l.name=e.name,n&&Object.assign(l,n),l};const Zu=null;function Zr(e){return G.isPlainObject(e)||G.isArray(e)}function $a(e){return G.endsWith(e,"[]")?e.slice(0,-2):e}function Kn(e,t,i){return e?e.concat(t).map(function(s,r){return s=$a(s),!i&&r?"["+s+"]":s}).join(i?".":""):t}function Ku(e){return G.isArray(e)&&!e.some(Zr)}const Gu=G.toFlatObject(G,{},null,function(e){return/^is[A-Z]/.test(e)});function er(e,t,i){if(!G.isObject(e))throw new TypeError("target must be an object");t=t||new FormData,i=G.toFlatObject(i,{metaTokens:!0,dots:!1,indexes:!1},!1,function(v,y){return!G.isUndefined(y[v])});const s=i.metaTokens,r=i.visitor||c,n=i.dots,l=i.indexes,o=(i.Blob||typeof Blob<"u"&&Blob)&&G.isSpecCompliantForm(t);if(!G.isFunction(r))throw new TypeError("visitor must be a function");function a(v){if(v===null)return"";if(G.isDate(v))return v.toISOString();if(!o&&G.isBlob(v))throw new ke("Blob is not supported. Use a Buffer instead.");return G.isArrayBuffer(v)||G.isTypedArray(v)?o&&typeof Blob=="function"?new Blob([v]):Buffer.from(v):v}function c(v,y,g){let h=v;if(v&&!g&&typeof v=="object"){if(G.endsWith(y,"{}"))y=s?y:y.slice(0,-2),v=JSON.stringify(v);else if(G.isArray(v)&&Ku(v)||(G.isFileList(v)||G.endsWith(y,"[]"))&&(h=G.toArray(v)))return y=$a(y),h.forEach(function(d,_){!(G.isUndefined(d)||d===null)&&t.append(l===!0?Kn([y],_,n):l===null?y:y+"[]",a(d))}),!1}return Zr(v)?!0:(t.append(Kn(g,y,n),a(v)),!1)}const f=[],u=Object.assign(Gu,{defaultVisitor:c,convertValue:a,isVisitable:Zr});function m(v,y){if(!G.isUndefined(v)){if(f.indexOf(v)!==-1)throw Error("Circular reference detected in "+y.join("."));f.push(v),G.forEach(v,function(g,h){(!(G.isUndefined(g)||g===null)&&r.call(t,g,G.isString(h)?h.trim():h,y,u))===!0&&m(g,y?y.concat(h):[h])}),f.pop()}}if(!G.isObject(e))throw new TypeError("data must be an object");return m(e),t}function Gn(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(i){return t[i]})}function _n(e,t){this._pairs=[],e&&er(e,this,t)}const Ja=_n.prototype;Ja.append=function(e,t){this._pairs.push([e,t])};Ja.toString=function(e){const t=e?function(i){return e.call(this,i,Gn)}:Gn;return this._pairs.map(function(i){return t(i[0])+"="+t(i[1])},"").join("&")};function $u(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function Xa(e,t,i){if(!t)return e;const s=i&&i.encode||$u,r=i&&i.serialize;let n;if(r?n=r(t,i):n=G.isURLSearchParams(t)?t.toString():new _n(t,i).toString(s),n){const l=e.indexOf("#");l!==-1&&(e=e.slice(0,l)),e+=(e.indexOf("?")===-1?"?":"&")+n}return e}class Ju{constructor(){this.handlers=[]}use(t,i,s){return this.handlers.push({fulfilled:t,rejected:i,synchronous:s?s.synchronous:!1,runWhen:s?s.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){G.forEach(this.handlers,function(i){i!==null&&t(i)})}}const $n=Ju,Qa={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Xu=typeof URLSearchParams<"u"?URLSearchParams:_n,Qu=typeof FormData<"u"?FormData:null,ef=typeof Blob<"u"?Blob:null,tf=(()=>{let e;return typeof navigator<"u"&&((e=navigator.product)==="ReactNative"||e==="NativeScript"||e==="NS")?!1:typeof window<"u"&&typeof document<"u"})(),sf=(()=>typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function")(),Vt={isBrowser:!0,classes:{URLSearchParams:Xu,FormData:Qu,Blob:ef},isStandardBrowserEnv:tf,isStandardBrowserWebWorkerEnv:sf,protocols:["http","https","file","blob","url","data"]};function rf(e,t){return er(e,new Vt.classes.URLSearchParams,Object.assign({visitor:function(i,s,r,n){return Vt.isNode&&G.isBuffer(i)?(this.append(s,i.toString("base64")),!1):n.defaultVisitor.apply(this,arguments)}},t))}function nf(e){return G.matchAll(/\w+|\[(\w*)]/g,e).map(t=>t[0]==="[]"?"":t[1]||t[0])}function of(e){const t={},i=Object.keys(e);let s;const r=i.length;let n;for(s=0;s<r;s++)n=i[s],t[n]=e[n];return t}function el(e){function t(i,s,r,n){let l=i[n++];const o=Number.isFinite(+l),a=n>=i.length;return l=!l&&G.isArray(r)?r.length:l,a?(G.hasOwnProp(r,l)?r[l]=[r[l],s]:r[l]=s,!o):((!r[l]||!G.isObject(r[l]))&&(r[l]=[]),t(i,s,r[l],n)&&G.isArray(r[l])&&(r[l]=of(r[l])),!o)}if(G.isFormData(e)&&G.isFunction(e.entries)){const i={};return G.forEachEntry(e,(s,r)=>{t(nf(s),r,i,0)}),i}return null}function af(e,t,i){if(G.isString(e))try{return(t||JSON.parse)(e),G.trim(e)}catch(s){if(s.name!=="SyntaxError")throw s}return(i||JSON.stringify)(e)}const pn={transitional:Qa,adapter:["xhr","http"],transformRequest:[function(e,t){const i=t.getContentType()||"",s=i.indexOf("application/json")>-1,r=G.isObject(e);if(r&&G.isHTMLForm(e)&&(e=new FormData(e)),G.isFormData(e))return s&&s?JSON.stringify(el(e)):e;if(G.isArrayBuffer(e)||G.isBuffer(e)||G.isStream(e)||G.isFile(e)||G.isBlob(e))return e;if(G.isArrayBufferView(e))return e.buffer;if(G.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let n;if(r){if(i.indexOf("application/x-www-form-urlencoded")>-1)return rf(e,this.formSerializer).toString();if((n=G.isFileList(e))||i.indexOf("multipart/form-data")>-1){const l=this.env&&this.env.FormData;return er(n?{"files[]":e}:e,l&&new l,this.formSerializer)}}return r||s?(t.setContentType("application/json",!1),af(e)):e}],transformResponse:[function(e){const t=this.transitional||pn.transitional,i=t&&t.forcedJSONParsing,s=this.responseType==="json";if(e&&G.isString(e)&&(i&&!this.responseType||s)){const r=!(t&&t.silentJSONParsing)&&s;try{return JSON.parse(e)}catch(n){if(r)throw n.name==="SyntaxError"?ke.from(n,ke.ERR_BAD_RESPONSE,this,null,this.response):n}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Vt.classes.FormData,Blob:Vt.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};G.forEach(["delete","get","head","post","put","patch"],e=>{pn.headers[e]={}});const mn=pn,lf=G.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),cf=e=>{const t={};let i,s,r;return e&&e.split(`
`).forEach(function(n){r=n.indexOf(":"),i=n.substring(0,r).trim().toLowerCase(),s=n.substring(r+1).trim(),!(!i||t[i]&&lf[i])&&(i==="set-cookie"?t[i]?t[i].push(s):t[i]=[s]:t[i]=t[i]?t[i]+", "+s:s)}),t},Jn=Symbol("internals");function $i(e){return e&&String(e).trim().toLowerCase()}function Rs(e){return e===!1||e==null?e:G.isArray(e)?e.map(Rs):String(e)}function hf(e){const t=Object.create(null),i=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let s;for(;s=i.exec(e);)t[s[1]]=s[2];return t}const uf=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function wr(e,t,i,s,r){if(G.isFunction(s))return s.call(this,t,i);if(r&&(t=i),!!G.isString(t)){if(G.isString(s))return t.indexOf(s)!==-1;if(G.isRegExp(s))return s.test(t)}}function ff(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,i,s)=>i.toUpperCase()+s)}function df(e,t){const i=G.toCamelCase(" "+t);["get","set","has"].forEach(s=>{Object.defineProperty(e,s+i,{value:function(r,n,l){return this[s].call(this,t,r,n,l)},configurable:!0})})}let tr=class{constructor(e){e&&this.set(e)}set(e,t,i){const s=this;function r(l,o,a){const c=$i(o);if(!c)throw new Error("header name must be a non-empty string");const f=G.findKey(s,c);(!f||s[f]===void 0||a===!0||a===void 0&&s[f]!==!1)&&(s[f||o]=Rs(l))}const n=(l,o)=>G.forEach(l,(a,c)=>r(a,c,o));return G.isPlainObject(e)||e instanceof this.constructor?n(e,t):G.isString(e)&&(e=e.trim())&&!uf(e)?n(cf(e),t):e!=null&&r(t,e,i),this}get(e,t){if(e=$i(e),e){const i=G.findKey(this,e);if(i){const s=this[i];if(!t)return s;if(t===!0)return hf(s);if(G.isFunction(t))return t.call(this,s,i);if(G.isRegExp(t))return t.exec(s);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,t){if(e=$i(e),e){const i=G.findKey(this,e);return!!(i&&this[i]!==void 0&&(!t||wr(this,this[i],i,t)))}return!1}delete(e,t){const i=this;let s=!1;function r(n){if(n=$i(n),n){const l=G.findKey(i,n);l&&(!t||wr(i,i[l],l,t))&&(delete i[l],s=!0)}}return G.isArray(e)?e.forEach(r):r(e),s}clear(e){const t=Object.keys(this);let i=t.length,s=!1;for(;i--;){const r=t[i];(!e||wr(this,this[r],r,e,!0))&&(delete this[r],s=!0)}return s}normalize(e){const t=this,i={};return G.forEach(this,(s,r)=>{const n=G.findKey(i,r);if(n){t[n]=Rs(s),delete t[r];return}const l=e?ff(r):String(r).trim();l!==r&&delete t[r],t[l]=Rs(s),i[l]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const t=Object.create(null);return G.forEach(this,(i,s)=>{i!=null&&i!==!1&&(t[s]=e&&G.isArray(i)?i.join(", "):i)}),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,t])=>e+": "+t).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...t){const i=new this(e);return t.forEach(s=>i.set(s)),i}static accessor(e){const t=(this[Jn]=this[Jn]={accessors:{}}).accessors,i=this.prototype;function s(r){const n=$i(r);t[n]||(df(i,r),t[n]=!0)}return G.isArray(e)?e.forEach(s):s(e),this}};tr.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);G.reduceDescriptors(tr.prototype,({value:e},t)=>{let i=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(s){this[i]=s}}});G.freezeMethods(tr);const Gt=tr;function kr(e,t){const i=this||mn,s=t||i,r=Gt.from(s.headers);let n=s.data;return G.forEach(e,function(l){n=l.call(i,n,r.normalize(),t?t.status:void 0)}),r.normalize(),n}function tl(e){return!!(e&&e.__CANCEL__)}function _s(e,t,i){ke.call(this,e??"canceled",ke.ERR_CANCELED,t,i),this.name="CanceledError"}G.inherits(_s,ke,{__CANCEL__:!0});function _f(e,t,i){const s=i.config.validateStatus;!i.status||!s||s(i.status)?e(i):t(new ke("Request failed with status code "+i.status,[ke.ERR_BAD_REQUEST,ke.ERR_BAD_RESPONSE][Math.floor(i.status/100)-4],i.config,i.request,i))}const pf=Vt.isStandardBrowserEnv?function(){return{write:function(e,t,i,s,r,n){const l=[];l.push(e+"="+encodeURIComponent(t)),G.isNumber(i)&&l.push("expires="+new Date(i).toGMTString()),G.isString(s)&&l.push("path="+s),G.isString(r)&&l.push("domain="+r),n===!0&&l.push("secure"),document.cookie=l.join("; ")},read:function(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}();function mf(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function gf(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}function il(e,t){return e&&!mf(t)?gf(e,t):t}const vf=Vt.isStandardBrowserEnv?function(){const e=/(msie|trident)/i.test(navigator.userAgent),t=document.createElement("a");let i;function s(r){let n=r;return e&&(t.setAttribute("href",n),n=t.href),t.setAttribute("href",n),{href:t.href,protocol:t.protocol?t.protocol.replace(/:$/,""):"",host:t.host,search:t.search?t.search.replace(/^\?/,""):"",hash:t.hash?t.hash.replace(/^#/,""):"",hostname:t.hostname,port:t.port,pathname:t.pathname.charAt(0)==="/"?t.pathname:"/"+t.pathname}}return i=s(window.location.href),function(r){const n=G.isString(r)?s(r):r;return n.protocol===i.protocol&&n.host===i.host}}():function(){return function(){return!0}}();function bf(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}function yf(e,t){e=e||10;const i=new Array(e),s=new Array(e);let r=0,n=0,l;return t=t!==void 0?t:1e3,function(o){const a=Date.now(),c=s[n];l||(l=a),i[r]=o,s[r]=a;let f=n,u=0;for(;f!==r;)u+=i[f++],f=f%e;if(r=(r+1)%e,r===n&&(n=(n+1)%e),a-l<t)return;const m=c&&a-c;return m?Math.round(u*1e3/m):void 0}}function Xn(e,t){let i=0;const s=yf(50,250);return r=>{const n=r.loaded,l=r.lengthComputable?r.total:void 0,o=n-i,a=s(o),c=n<=l;i=n;const f={loaded:n,total:l,progress:l?n/l:void 0,bytes:o,rate:a||void 0,estimated:a&&l&&c?(l-n)/a:void 0,event:r};f[t?"download":"upload"]=!0,e(f)}}const Cf=typeof XMLHttpRequest<"u",Sf=Cf&&function(e){return new Promise(function(t,i){let s=e.data;const r=Gt.from(e.headers).normalize(),n=e.responseType;let l;function o(){e.cancelToken&&e.cancelToken.unsubscribe(l),e.signal&&e.signal.removeEventListener("abort",l)}let a;G.isFormData(s)&&(Vt.isStandardBrowserEnv||Vt.isStandardBrowserWebWorkerEnv?r.setContentType(!1):r.getContentType(/^\s*multipart\/form-data/)?G.isString(a=r.getContentType())&&r.setContentType(a.replace(/^\s*(multipart\/form-data);+/,"$1")):r.setContentType("multipart/form-data"));let c=new XMLHttpRequest;if(e.auth){const v=e.auth.username||"",y=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";r.set("Authorization","Basic "+btoa(v+":"+y))}const f=il(e.baseURL,e.url);c.open(e.method.toUpperCase(),Xa(f,e.params,e.paramsSerializer),!0),c.timeout=e.timeout;function u(){if(!c)return;const v=Gt.from("getAllResponseHeaders"in c&&c.getAllResponseHeaders()),y={data:!n||n==="text"||n==="json"?c.responseText:c.response,status:c.status,statusText:c.statusText,headers:v,config:e,request:c};_f(function(g){t(g),o()},function(g){i(g),o()},y),c=null}if("onloadend"in c?c.onloadend=u:c.onreadystatechange=function(){!c||c.readyState!==4||c.status===0&&!(c.responseURL&&c.responseURL.indexOf("file:")===0)||setTimeout(u)},c.onabort=function(){c&&(i(new ke("Request aborted",ke.ECONNABORTED,e,c)),c=null)},c.onerror=function(){i(new ke("Network Error",ke.ERR_NETWORK,e,c)),c=null},c.ontimeout=function(){let v=e.timeout?"timeout of "+e.timeout+"ms exceeded":"timeout exceeded";const y=e.transitional||Qa;e.timeoutErrorMessage&&(v=e.timeoutErrorMessage),i(new ke(v,y.clarifyTimeoutError?ke.ETIMEDOUT:ke.ECONNABORTED,e,c)),c=null},Vt.isStandardBrowserEnv){const v=(e.withCredentials||vf(f))&&e.xsrfCookieName&&pf.read(e.xsrfCookieName);v&&r.set(e.xsrfHeaderName,v)}s===void 0&&r.setContentType(null),"setRequestHeader"in c&&G.forEach(r.toJSON(),function(v,y){c.setRequestHeader(y,v)}),G.isUndefined(e.withCredentials)||(c.withCredentials=!!e.withCredentials),n&&n!=="json"&&(c.responseType=e.responseType),typeof e.onDownloadProgress=="function"&&c.addEventListener("progress",Xn(e.onDownloadProgress,!0)),typeof e.onUploadProgress=="function"&&c.upload&&c.upload.addEventListener("progress",Xn(e.onUploadProgress)),(e.cancelToken||e.signal)&&(l=v=>{c&&(i(!v||v.type?new _s(null,e,c):v),c.abort(),c=null)},e.cancelToken&&e.cancelToken.subscribe(l),e.signal&&(e.signal.aborted?l():e.signal.addEventListener("abort",l)));const m=bf(f);if(m&&Vt.protocols.indexOf(m)===-1){i(new ke("Unsupported protocol "+m+":",ke.ERR_BAD_REQUEST,e));return}c.send(s||null)})},Kr={http:Zu,xhr:Sf};G.forEach(Kr,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch{}Object.defineProperty(e,"adapterName",{value:t})}});const Qn=e=>`- ${e}`,wf=e=>G.isFunction(e)||e===null||e===!1,sl={getAdapter:e=>{e=G.isArray(e)?e:[e];const{length:t}=e;let i,s;const r={};for(let n=0;n<t;n++){i=e[n];let l;if(s=i,!wf(i)&&(s=Kr[(l=String(i)).toLowerCase()],s===void 0))throw new ke(`Unknown adapter '${l}'`);if(s)break;r[l||"#"+n]=s}if(!s){const n=Object.entries(r).map(([o,a])=>`adapter ${o} `+(a===!1?"is not supported by the environment":"is not available in the build"));let l=t?n.length>1?`since :
`+n.map(Qn).join(`
`):" "+Qn(n[0]):"as no adapter specified";throw new ke("There is no suitable adapter to dispatch the request "+l,"ERR_NOT_SUPPORT")}return s},adapters:Kr};function Lr(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new _s(null,e)}function eo(e){return Lr(e),e.headers=Gt.from(e.headers),e.data=kr.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),sl.getAdapter(e.adapter||mn.adapter)(e).then(function(t){return Lr(e),t.data=kr.call(e,e.transformResponse,t),t.headers=Gt.from(t.headers),t},function(t){return tl(t)||(Lr(e),t&&t.response&&(t.response.data=kr.call(e,e.transformResponse,t.response),t.response.headers=Gt.from(t.response.headers))),Promise.reject(t)})}const to=e=>e instanceof Gt?e.toJSON():e;function Ni(e,t){t=t||{};const i={};function s(c,f,u){return G.isPlainObject(c)&&G.isPlainObject(f)?G.merge.call({caseless:u},c,f):G.isPlainObject(f)?G.merge({},f):G.isArray(f)?f.slice():f}function r(c,f,u){if(G.isUndefined(f)){if(!G.isUndefined(c))return s(void 0,c,u)}else return s(c,f,u)}function n(c,f){if(!G.isUndefined(f))return s(void 0,f)}function l(c,f){if(G.isUndefined(f)){if(!G.isUndefined(c))return s(void 0,c)}else return s(void 0,f)}function o(c,f,u){if(u in t)return s(c,f);if(u in e)return s(void 0,c)}const a={url:n,method:n,data:n,baseURL:l,transformRequest:l,transformResponse:l,paramsSerializer:l,timeout:l,timeoutMessage:l,withCredentials:l,adapter:l,responseType:l,xsrfCookieName:l,xsrfHeaderName:l,onUploadProgress:l,onDownloadProgress:l,decompress:l,maxContentLength:l,maxBodyLength:l,beforeRedirect:l,transport:l,httpAgent:l,httpsAgent:l,cancelToken:l,socketPath:l,responseEncoding:l,validateStatus:o,headers:(c,f)=>r(to(c),to(f),!0)};return G.forEach(Object.keys(Object.assign({},e,t)),function(c){const f=a[c]||r,u=f(e[c],t[c],c);G.isUndefined(u)&&f!==o||(i[c]=u)}),i}const rl="1.5.1",gn={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{gn[e]=function(i){return typeof i===e||"a"+(t<1?"n ":" ")+e}});const io={};gn.transitional=function(e,t,i){function s(r,n){return"[Axios v"+rl+"] Transitional option '"+r+"'"+n+(i?". "+i:"")}return(r,n,l)=>{if(e===!1)throw new ke(s(n," has been removed"+(t?" in "+t:"")),ke.ERR_DEPRECATED);return t&&!io[n]&&(io[n]=!0,console.warn(s(n," has been deprecated since v"+t+" and will be removed in the near future"))),e?e(r,n,l):!0}};function kf(e,t,i){if(typeof e!="object")throw new ke("options must be an object",ke.ERR_BAD_OPTION_VALUE);const s=Object.keys(e);let r=s.length;for(;r-- >0;){const n=s[r],l=t[n];if(l){const o=e[n],a=o===void 0||l(o,n,e);if(a!==!0)throw new ke("option "+n+" must be "+a,ke.ERR_BAD_OPTION_VALUE);continue}if(i!==!0)throw new ke("Unknown option "+n,ke.ERR_BAD_OPTION)}}const Gr={assertOptions:kf,validators:gn},ni=Gr.validators;let Ns=class{constructor(e){this.defaults=e,this.interceptors={request:new $n,response:new $n}}request(e,t){typeof e=="string"?(t=t||{},t.url=e):t=e||{},t=Ni(this.defaults,t);const{transitional:i,paramsSerializer:s,headers:r}=t;i!==void 0&&Gr.assertOptions(i,{silentJSONParsing:ni.transitional(ni.boolean),forcedJSONParsing:ni.transitional(ni.boolean),clarifyTimeoutError:ni.transitional(ni.boolean)},!1),s!=null&&(G.isFunction(s)?t.paramsSerializer={serialize:s}:Gr.assertOptions(s,{encode:ni.function,serialize:ni.function},!0)),t.method=(t.method||this.defaults.method||"get").toLowerCase();let n=r&&G.merge(r.common,r[t.method]);r&&G.forEach(["delete","get","head","post","put","patch","common"],v=>{delete r[v]}),t.headers=Gt.concat(n,r);const l=[];let o=!0;this.interceptors.request.forEach(function(v){typeof v.runWhen=="function"&&v.runWhen(t)===!1||(o=o&&v.synchronous,l.unshift(v.fulfilled,v.rejected))});const a=[];this.interceptors.response.forEach(function(v){a.push(v.fulfilled,v.rejected)});let c,f=0,u;if(!o){const v=[eo.bind(this),void 0];for(v.unshift.apply(v,l),v.push.apply(v,a),u=v.length,c=Promise.resolve(t);f<u;)c=c.then(v[f++],v[f++]);return c}u=l.length;let m=t;for(f=0;f<u;){const v=l[f++],y=l[f++];try{m=v(m)}catch(g){y.call(this,g);break}}try{c=eo.call(this,m)}catch(v){return Promise.reject(v)}for(f=0,u=a.length;f<u;)c=c.then(a[f++],a[f++]);return c}getUri(e){e=Ni(this.defaults,e);const t=il(e.baseURL,e.url);return Xa(t,e.params,e.paramsSerializer)}};G.forEach(["delete","get","head","options"],function(e){Ns.prototype[e]=function(t,i){return this.request(Ni(i||{},{method:e,url:t,data:(i||{}).data}))}});G.forEach(["post","put","patch"],function(e){function t(i){return function(s,r,n){return this.request(Ni(n||{},{method:e,headers:i?{"Content-Type":"multipart/form-data"}:{},url:s,data:r}))}}Ns.prototype[e]=t(),Ns.prototype[e+"Form"]=t(!0)});const As=Ns;let Lf=class nl{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let i;this.promise=new Promise(function(r){i=r});const s=this;this.promise.then(r=>{if(!s._listeners)return;let n=s._listeners.length;for(;n-- >0;)s._listeners[n](r);s._listeners=null}),this.promise.then=r=>{let n;const l=new Promise(o=>{s.subscribe(o),n=o}).then(r);return l.cancel=function(){s.unsubscribe(n)},l},t(function(r,n,l){s.reason||(s.reason=new _s(r,n,l),i(s.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const i=this._listeners.indexOf(t);i!==-1&&this._listeners.splice(i,1)}static source(){let t;return{token:new nl(function(i){t=i}),cancel:t}}};const Ef=Lf;function Mf(e){return function(t){return e.apply(null,t)}}function Df(e){return G.isObject(e)&&e.isAxiosError===!0}const $r={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries($r).forEach(([e,t])=>{$r[t]=e});const Tf=$r;function ol(e){const t=new As(e),i=ja(As.prototype.request,t);return G.extend(i,As.prototype,t,{allOwnKeys:!0}),G.extend(i,t,null,{allOwnKeys:!0}),i.create=function(s){return ol(Ni(e,s))},i}const Xe=ol(mn);Xe.Axios=As;Xe.CanceledError=_s;Xe.CancelToken=Ef;Xe.isCancel=tl;Xe.VERSION=rl;Xe.toFormData=er;Xe.AxiosError=ke;Xe.Cancel=Xe.CanceledError;Xe.all=function(e){return Promise.all(e)};Xe.spread=Mf;Xe.isAxiosError=Df;Xe.mergeConfig=Ni;Xe.AxiosHeaders=Gt;Xe.formToJSON=e=>el(G.isHTMLForm(e)?new FormData(e):e);Xe.getAdapter=sl.getAdapter;Xe.HttpStatusCode=Tf;Xe.default=Xe;const al=Xe,{Axios:_4,AxiosError:p4,CanceledError:m4,isCancel:g4,CancelToken:v4,VERSION:b4,all:y4,Cancel:C4,isAxiosError:S4,spread:w4,toFormData:k4,AxiosHeaders:L4,HttpStatusCode:bs,formToJSON:E4,getAdapter:M4,mergeConfig:D4}=al;var Ti=null;typeof WebSocket<"u"?Ti=WebSocket:typeof MozWebSocket<"u"?Ti=MozWebSocket:typeof global<"u"?Ti=global.WebSocket||global.MozWebSocket:typeof window<"u"?Ti=window.WebSocket||window.MozWebSocket:typeof self<"u"&&(Ti=self.WebSocket||self.MozWebSocket);const Rf=Ti,Er={SCHEMA_DIR_RELATIVE_PATH:"./../schemas/",SCHEMA_FILENAME_PAYLOAD:"payload.schema.json",SCHEMA_FILENAME_RESPONSE:"response.schema.json",SIYUAN_DEFAULT_BASE_URL:"http://localhost:6806/",SIYUAN_DEFAULT_TOKEN:"",REQUEST_TIMEOUT:6e4};var so,ro,no,oo,ao;const Jr=class Y{constructor(t={},i="xhr"){qt(this,"_type","xhr"),qt(this,"_baseURL",((ro=(so=globalThis.top)==null?void 0:so.document)==null?void 0:ro.baseURI)??((oo=(no=globalThis.parent)==null?void 0:no.document)==null?void 0:oo.baseURI)??((ao=globalThis.location)==null?void 0:ao.origin)??Er.SIYUAN_DEFAULT_BASE_URL),qt(this,"_token",Er.SIYUAN_DEFAULT_TOKEN),qt(this,"_axios",al.create({baseURL:this._baseURL,timeout:Er.REQUEST_TIMEOUT,headers:{Authorization:`Token ${this._token}`}})),qt(this,"_fetch",hu.create({baseURL:this._baseURL,headers:{Authorization:`Token ${this._token}`}})),this._setClientType(i),this._updateOptions(t,i)}_setClientType(t){this._type=t}_updateOptions(t,i=this._type){switch(this._token=t.token??this._token,this._baseURL=t.baseURL??this._baseURL,i){case"fetch":const s=t;if(s.token){const r="Authorization",n=`Token ${t.token}`;Array.isArray(s.headers)?s.headers.push([r,n]):s.headers instanceof Headers?s.headers.set(r,n):typeof s.headers=="object"?s.headers[r]=n:s.headers={[r]:n},delete t.token}this._fetch=this._fetch.create(s);break;case"xhr":default:for(const[r,n]of Object.entries(t))switch(r){case"token":this._axios.defaults.headers.Authorization=`Token ${this._token}`;break;default:this._axios.defaults[r]=n;break}break}this._baseURL=t.baseURL??this._baseURL}broadcast(t,i,s){const r=(s==null?void 0:s.baseURL)??this._baseURL,n=(s==null?void 0:s.token)??this._token,l=new URLSearchParams(t);l.set("token",n);const o=new URL(r);return o.protocol=o.protocol.replace(/^http/,"ws"),o.pathname=o.pathname.endsWith("/")?`${o.pathname}${Y.ws.broadcast.pathname.substring(1)}`:`${o.pathname}${Y.ws.broadcast.pathname}`,o.search=l.toString(),new Rf(o,i)}async upload(t,i){const s=new FormData;return s.append("assetsDirPath",t.assetsDirPath??"/assets/"),t.files.forEach(r=>s.append("file[]",r)),await this._request(Y.api.asset.upload.pathname,Y.api.asset.upload.method,s,i)}async getBlockAttrs(t,i){return await this._request(Y.api.attr.getBlockAttrs.pathname,Y.api.attr.getBlockAttrs.method,t,i)}async getBookmarkLabels(t){return await this._request(Y.api.attr.getBookmarkLabels.pathname,Y.api.attr.getBookmarkLabels.method,void 0,t)}async setBlockAttrs(t,i){return await this._request(Y.api.attr.setBlockAttrs.pathname,Y.api.attr.setBlockAttrs.method,t,i)}async appendBlock(t,i){return await this._request(Y.api.block.appendBlock.pathname,Y.api.block.appendBlock.method,t,i)}async deleteBlock(t,i){return await this._request(Y.api.block.deleteBlock.pathname,Y.api.block.deleteBlock.method,t,i)}async getBlockBreadcrumb(t,i){return await this._request(Y.api.block.getBlockBreadcrumb.pathname,Y.api.block.getBlockBreadcrumb.method,t,i)}async getBlockDOM(t,i){return await this._request(Y.api.block.getBlockDOM.pathname,Y.api.block.getBlockDOM.method,t,i)}async getBlockInfo(t,i){return await this._request(Y.api.block.getBlockInfo.pathname,Y.api.block.getBlockInfo.method,t,i)}async getBlockKramdown(t,i){return await this._request(Y.api.block.getBlockKramdown.pathname,Y.api.block.getBlockKramdown.method,t,i)}async getChildBlocks(t,i){return await this._request(Y.api.block.getChildBlocks.pathname,Y.api.block.getChildBlocks.method,t,i)}async getDocInfo(t,i){return await this._request(Y.api.block.getDocInfo.pathname,Y.api.block.getDocInfo.method,t,i)}async insertBlock(t,i){return await this._request(Y.api.block.insertBlock.pathname,Y.api.block.insertBlock.method,t,i)}async moveBlock(t,i){return await this._request(Y.api.block.moveBlock.pathname,Y.api.block.moveBlock.method,t,i)}async prependBlock(t,i){return await this._request(Y.api.block.prependBlock.pathname,Y.api.block.prependBlock.method,t,i)}async transferBlockRef(t,i){return await this._request(Y.api.block.transferBlockRef.pathname,Y.api.block.transferBlockRef.method,t,i)}async updateBlock(t,i){return await this._request(Y.api.block.updateBlock.pathname,Y.api.block.updateBlock.method,t,i)}async channels(t){return await this._request(Y.api.broadcast.channels.pathname,Y.api.broadcast.channels.method,void 0,t)}async getChannelInfo(t,i){return await this._request(Y.api.broadcast.getChannelInfo.pathname,Y.api.broadcast.getChannelInfo.method,t,i)}async postMessage(t,i){return await this._request(Y.api.broadcast.postMessage.pathname,Y.api.broadcast.postMessage.method,t,i)}async pandoc(t,i){return await this._request(Y.api.convert.pandoc.pathname,Y.api.convert.pandoc.method,t,i)}async exportResources(t,i){return await this._request(Y.api.export.exportResources.pathname,Y.api.export.exportResources.method,t,i)}async exportMdContent(t,i){return await this._request(Y.api.export.exportMdContent.pathname,Y.api.export.exportMdContent.method,t,i)}async getFile(t,i="text",s){return await this._request(Y.api.file.getFile.pathname,Y.api.file.getFile.method,t,s,!1,i)}async putFile(t,i){t.file!==void 0&&!(t.file instanceof File)&&(t.file=new File([t.file],t.path.split("/").pop()));const s=new FormData;for(const[r,n]of Object.entries(t))t.hasOwnProperty(r)&&(n instanceof Blob?s.append(r,n):s.append(r,String(n)));return await this._request(Y.api.file.putFile.pathname,Y.api.file.putFile.method,s,i)}async readDir(t,i){return await this._request(Y.api.file.readDir.pathname,Y.api.file.readDir.method,t,i)}async removeFile(t,i){return await this._request(Y.api.file.removeFile.pathname,Y.api.file.removeFile.method,t,i)}async renameFile(t,i){return await this._request(Y.api.file.renameFile.pathname,Y.api.file.renameFile.method,t,i)}async createDocWithMd(t,i){return await this._request(Y.api.filetree.createDocWithMd.pathname,Y.api.filetree.createDocWithMd.method,t,i)}async getDoc(t,i){return await this._request(Y.api.filetree.getDoc.pathname,Y.api.filetree.getDoc.method,t,i)}async getHPathByID(t,i){return await this._request(Y.api.filetree.getHPathByID.pathname,Y.api.filetree.getHPathByID.method,t,i)}async getHPathByPath(t,i){return await this._request(Y.api.filetree.getHPathByPath.pathname,Y.api.filetree.getHPathByPath.method,t,i)}async listDocsByPath(t,i){return await this._request(Y.api.filetree.listDocsByPath.pathname,Y.api.filetree.listDocsByPath.method,t,i)}async moveDocs(t,i){return await this._request(Y.api.filetree.moveDocs.pathname,Y.api.filetree.moveDocs.method,t,i)}async removeDoc(t,i){return await this._request(Y.api.filetree.removeDoc.pathname,Y.api.filetree.removeDoc.method,t,i)}async renameDoc(t,i){return await this._request(Y.api.filetree.renameDoc.pathname,Y.api.filetree.renameDoc.method,t,i)}async searchDocs(t,i){return await this._request(Y.api.filetree.searchDocs.pathname,Y.api.filetree.searchDocs.method,t,i)}async getDocHistoryContent(t,i){return await this._request(Y.api.history.getDocHistoryContent.pathname,Y.api.history.getDocHistoryContent.method,t,i)}async getHistoryItems(t,i){return await this._request(Y.api.history.getHistoryItems.pathname,Y.api.history.getHistoryItems.method,t,i)}async getShorthand(t,i){return await this._request(Y.api.inbox.getShorthand.pathname,Y.api.inbox.getShorthand.method,t,i)}async forwardProxy(t,i){return await this._request(Y.api.network.forwardProxy.pathname,Y.api.network.forwardProxy.method,t,i)}async closeNotebook(t,i){return await this._request(Y.api.notebook.closeNotebook.pathname,Y.api.notebook.closeNotebook.method,t,i)}async createNotebook(t,i){return await this._request(Y.api.notebook.createNotebook.pathname,Y.api.notebook.createNotebook.method,t,i)}async getNotebookConf(t,i){return await this._request(Y.api.notebook.getNotebookConf.pathname,Y.api.notebook.getNotebookConf.method,t,i)}async lsNotebooks(t){return await this._request(Y.api.notebook.lsNotebooks.pathname,Y.api.notebook.lsNotebooks.method,void 0,t)}async openNotebook(t,i){return await this._request(Y.api.notebook.openNotebook.pathname,Y.api.notebook.openNotebook.method,t,i)}async removeNotebook(t,i){return await this._request(Y.api.notebook.removeNotebook.pathname,Y.api.notebook.removeNotebook.method,t,i)}async renameNotebook(t,i){return await this._request(Y.api.notebook.renameNotebook.pathname,Y.api.notebook.renameNotebook.method,t,i)}async setNotebookConf(t,i){return await this._request(Y.api.notebook.setNotebookConf.pathname,Y.api.notebook.setNotebookConf.method,t,i)}async pushErrMsg(t,i){return await this._request(Y.api.notification.pushErrMsg.pathname,Y.api.notification.pushErrMsg.method,t,i)}async pushMsg(t,i){return await this._request(Y.api.notification.pushMsg.pathname,Y.api.notification.pushMsg.method,t,i)}async sql(t,i){return await this._request(Y.api.query.sql.pathname,Y.api.query.sql.method,t,i)}async openRepoSnapshotDoc(t,i){return await this._request(Y.api.repo.openRepoSnapshotDoc.pathname,Y.api.repo.openRepoSnapshotDoc.method,t,i)}async fullTextSearchBlock(t,i){return await this._request(Y.api.search.fullTextSearchBlock.pathname,Y.api.search.fullTextSearchBlock.method,t,i)}async getSnippet(t,i){return await this._request(Y.api.snippet.getSnippet.pathname,Y.api.snippet.getSnippet.method,t,i)}async setSnippet(t,i){return await this._request(Y.api.snippet.setSnippet.pathname,Y.api.snippet.setSnippet.method,t,i)}async getLocalStorage(t){return await this._request(Y.api.storage.getLocalStorage.pathname,Y.api.storage.getLocalStorage.method,void 0,t)}async getRecentDocs(t){return await this._request(Y.api.storage.getRecentDocs.pathname,Y.api.storage.getRecentDocs.method,void 0,t)}async setLocalStorage(t,i){return await this._request(Y.api.storage.setLocalStorage.pathname,Y.api.storage.setLocalStorage.method,t,i)}async bootProgress(t){return await this._request(Y.api.system.bootProgress.pathname,Y.api.system.bootProgress.method,void 0,t)}async getConf(t){return await this._request(Y.api.system.getConf.pathname,Y.api.system.getConf.method,void 0,t)}async currentTime(t){return await this._request(Y.api.system.currentTime.pathname,Y.api.system.currentTime.method,void 0,t)}async version(t){return await this._request(Y.api.system.version.pathname,Y.api.system.version.method,void 0,t)}async render(t,i){return await this._request(Y.api.template.render.pathname,Y.api.template.render.method,t,i)}async renderSprig(t,i){return await this._request(Y.api.template.renderSprig.pathname,Y.api.template.renderSprig.method,t,i)}async _request(t,i,s,r,n=!0,l="json"){try{switch((r==null?void 0:r.type)??this._type){case"fetch":{const o=r==null?void 0:r.options;l=(()=>{switch(l){case"arraybuffer":return"arrayBuffer";case"document":return"text";default:return l}})();const a=await this._fetch(t,{method:i,body:s,responseType:l,onResponse:async c=>{switch(c.response.status){case bs.Ok:break;case bs.Accepted:t===Y.api.file.getFile.pathname&&this._parseFetchResponse(c.response._data);break;default:break}},...o});return n&&l==="json"&&typeof a=="object"?this._parseFetchResponse(a):a}case"xhr":default:{const o=r==null?void 0:r.options;l=(()=>{switch(l){case"arrayBuffer":return"arraybuffer";default:return l}})();const a=await this._axios.request({url:t,method:i,data:s,responseType:l,...o});switch(a.status){case bs.Ok:return n&&l==="json"&&typeof a.data=="object"?this._parseAxiosResponse(a):a.data;case bs.Accepted:return t===Y.api.file.getFile.pathname?this._parseAxiosResponse(a):a.data;default:throw new uu(a)}}}}catch(o){throw o}}_parseFetchResponse(t){if(t.code===0)return t;throw new Yn(t)}_parseAxiosResponse(t){if(t.data.code===0)return t.data;throw new Yn(t.data,t)}};qt(Jr,"ws",{broadcast:{pathname:"/ws/broadcast"}}),qt(Jr,"api",{asset:{upload:{pathname:"/api/asset/upload",method:"POST"}},attr:{getBlockAttrs:{pathname:"/api/attr/getBlockAttrs",method:"POST"},getBookmarkLabels:{pathname:"/api/attr/getBookmarkLabels",method:"POST"},setBlockAttrs:{pathname:"/api/attr/setBlockAttrs",method:"POST"}},block:{appendBlock:{pathname:"/api/block/appendBlock",method:"POST"},deleteBlock:{pathname:"/api/block/deleteBlock",method:"POST"},getBlockBreadcrumb:{pathname:"/api/block/getBlockBreadcrumb",method:"POST"},getBlockDOM:{pathname:"/api/block/getBlockDOM",method:"POST"},getBlockInfo:{pathname:"/api/block/getBlockInfo",method:"POST"},getBlockKramdown:{pathname:"/api/block/getBlockKramdown",method:"POST"},getChildBlocks:{pathname:"/api/block/getChildBlocks",method:"POST"},getDocInfo:{pathname:"/api/block/getDocInfo",method:"POST"},insertBlock:{pathname:"/api/block/insertBlock",method:"POST"},moveBlock:{pathname:"/api/block/moveBlock",method:"POST"},prependBlock:{pathname:"/api/block/prependBlock",method:"POST"},transferBlockRef:{pathname:"/api/block/transferBlockRef",method:"POST"},updateBlock:{pathname:"/api/block/updateBlock",method:"POST"}},broadcast:{channels:{pathname:"/api/broadcast/channels",method:"GET"},getChannelInfo:{pathname:"/api/broadcast/getChannelInfo",method:"POST"},postMessage:{pathname:"/api/broadcast/postMessage",method:"POST"}},convert:{pandoc:{pathname:"/api/convert/pandoc",method:"POST"}},export:{exportMdContent:{pathname:"/api/export/exportMdContent",method:"POST"},exportResources:{pathname:"/api/export/exportResources",method:"POST"}},file:{getFile:{pathname:"/api/file/getFile",method:"POST"},putFile:{pathname:"/api/file/putFile",method:"POST"},readDir:{pathname:"/api/file/readDir",method:"POST"},removeFile:{pathname:"/api/file/removeFile",method:"POST"},renameFile:{pathname:"/api/file/renameFile",method:"POST"}},filetree:{createDocWithMd:{pathname:"/api/filetree/createDocWithMd",method:"POST"},getDoc:{pathname:"/api/filetree/getDoc",method:"POST"},getHPathByID:{pathname:"/api/filetree/getHPathByID",method:"POST"},getHPathByPath:{pathname:"/api/filetree/getHPathByPath",method:"POST"},listDocsByPath:{pathname:"/api/filetree/listDocsByPath",method:"POST"},moveDocs:{pathname:"/api/filetree/moveDocs",method:"POST"},removeDoc:{pathname:"/api/filetree/removeDoc",method:"POST"},renameDoc:{pathname:"/api/filetree/renameDoc",method:"POST"},searchDocs:{pathname:"/api/filetree/searchDocs",method:"POST"}},history:{getDocHistoryContent:{pathname:"/api/history/getDocHistoryContent",method:"POST"},getHistoryItems:{pathname:"/api/history/getHistoryItems",method:"POST"}},inbox:{getShorthand:{pathname:"/api/inbox/getShorthand",method:"POST"}},network:{forwardProxy:{pathname:"/api/network/forwardProxy",method:"POST"}},notebook:{closeNotebook:{pathname:"/api/notebook/closeNotebook",method:"POST"},createNotebook:{pathname:"/api/notebook/createNotebook",method:"POST"},getNotebookConf:{pathname:"/api/notebook/getNotebookConf",method:"POST"},lsNotebooks:{pathname:"/api/notebook/lsNotebooks",method:"POST"},openNotebook:{pathname:"/api/notebook/openNotebook",method:"POST"},removeNotebook:{pathname:"/api/notebook/removeNotebook",method:"POST"},renameNotebook:{pathname:"/api/notebook/renameNotebook",method:"POST"},setNotebookConf:{pathname:"/api/notebook/setNotebookConf",method:"POST"}},notification:{pushErrMsg:{pathname:"/api/notification/pushErrMsg",method:"POST"},pushMsg:{pathname:"/api/notification/pushMsg",method:"POST"}},query:{sql:{pathname:"/api/query/sql",method:"POST"}},repo:{openRepoSnapshotDoc:{pathname:"/api/repo/openRepoSnapshotDoc",method:"POST"}},search:{fullTextSearchBlock:{pathname:"/api/search/fullTextSearchBlock",method:"POST"}},snippet:{getSnippet:{pathname:"/api/snippet/getSnippet",method:"POST"},setSnippet:{pathname:"/api/snippet/setSnippet",method:"POST"}},storage:{getLocalStorage:{pathname:"/api/storage/getLocalStorage",method:"POST"},getRecentDocs:{pathname:"/api/storage/getRecentDocs",method:"POST"},setLocalStorage:{pathname:"/api/storage/setLocalStorage",method:"POST"}},system:{bootProgress:{pathname:"/api/system/bootProgress",method:"POST"},currentTime:{pathname:"/api/system/currentTime",method:"POST"},getConf:{pathname:"/api/system/getConf",method:"POST"},version:{pathname:"/api/system/version",method:"POST"}},template:{render:{pathname:"/api/template/render",method:"POST"},renderSprig:{pathname:"/api/template/renderSprig",method:"POST"}}});let Af=Jr;var ll=(e=>(e.NodeNotebook="NodeNotebook",e.NodeFolder="NodeFolder",e.NodeDocument="NodeDocument",e.NodeSuperBlock="NodeSuperBlock",e.NodeBlockquote="NodeBlockquote",e.NodeList="NodeList",e.NodeListItem="NodeListItem",e.NodeHeading="NodeHeading",e.NodeParagraph="NodeParagraph",e.NodeMathBlock="NodeMathBlock",e.NodeTable="NodeTable",e.NodeCodeBlock="NodeCodeBlock",e.NodeHTMLBlock="NodeHTMLBlock",e.NodeBlockQueryEmbed="NodeBlockQueryEmbed",e.NodeAttributeView="NodeAttributeView",e.NodeThematicBreak="NodeThematicBreak",e.NodeAudio="NodeAudio",e.NodeVideo="NodeVideo",e.NodeIFrame="NodeIFrame",e.NodeWidget="NodeWidget",e))(ll||{}),cl=(e=>(e.d="d",e.s="s",e.b="b",e.l="l",e.i="i",e.h="h",e.p="p",e.m="m",e.t="t",e.c="c",e.html="html",e.query_embed="query_embed",e.tb="tb",e.audio="audio",e.video="video",e.iframe="iframe",e.widget="widget",e))(cl||{}),hl=(e=>(e.d="d",e.s="s",e.b="b",e.l="l",e.i="i",e))(hl||{}),ul=(e=>(e.h="h",e.p="p",e.m="m",e.t="t",e.c="c",e.html="html",e.query_embed="query_embed",e.tb="tb",e.audio="audio",e.video="video",e.iframe="iframe",e.widget="widget",e))(ul||{}),fl=(e=>(e.h1="h1",e.h2="h2",e.h3="h3",e.h4="h4",e.h5="h5",e.h6="h6",e.u="u",e.o="o",e.t="t",e.none="",e))(fl||{}),dl=(e=>(e.u="u",e.o="o",e.t="t",e))(dl||{}),_l=(e=>(e.h1="h1",e.h2="h2",e.h3="h3",e.h4="h4",e.h5="h5",e.h6="h6",e))(_l||{}),pl=(e=>(e[e.keyword=0]="keyword",e[e.querySyntax=1]="querySyntax",e[e.sql=2]="sql",e[e.regex=3]="regex",e))(pl||{}),ml=(e=>(e[e.noGroupBy=0]="noGroupBy",e[e.group=1]="group",e))(ml||{}),gl=(e=>(e[e.type=0]="type",e[e.createdASC=1]="createdASC",e[e.createdDESC=2]="createdDESC",e[e.modifiedASC=3]="modifiedASC",e[e.modifiedDESC=4]="modifiedDESC",e[e.sortByContent=5]="sortByContent",e[e.sortByRankAsc=6]="sortByRankAsc",e[e.sortByRankDesc=7]="sortByRankDesc",e))(gl||{}),vl=(e=>(e[e.SortModeNameASC=0]="SortModeNameASC",e[e.SortModeNameDESC=1]="SortModeNameDESC",e[e.SortModeUpdatedASC=2]="SortModeUpdatedASC",e[e.SortModeUpdatedDESC=3]="SortModeUpdatedDESC",e[e.SortModeAlphanumASC=4]="SortModeAlphanumASC",e[e.SortModeAlphanumDESC=5]="SortModeAlphanumDESC",e[e.SortModeCustom=6]="SortModeCustom",e[e.SortModeRefCountASC=7]="SortModeRefCountASC",e[e.SortModeRefCountDESC=8]="SortModeRefCountDESC",e[e.SortModeCreatedASC=9]="SortModeCreatedASC",e[e.SortModeCreatedDESC=10]="SortModeCreatedDESC",e[e.SortModeSizeASC=11]="SortModeSizeASC",e[e.SortModeSizeDESC=12]="SortModeSizeDESC",e[e.SortModeSubDocCountASC=13]="SortModeSubDocCountASC",e[e.SortModeSubDocCountDESC=14]="SortModeSubDocCountDESC",e))(vl||{});const bl=Object.freeze(Object.defineProperty({__proto__:null,BlockSubType:fl,BlockType:cl,Container:hl,GroupBy:ml,Leaf:ul,Method:pl,NodeHeadingSubType:_l,NodeListSubType:dl,NodeType:ll,OrderBy:gl,SortMode:vl},Symbol.toStringTag,{value:"Module"}));function Ae(){}function Qt(e,t){for(const i in t)e[i]=t[i];return e}function yl(e){return e()}function lo(){return Object.create(null)}function Qe(e){e.forEach(yl)}function vn(e){return typeof e=="function"}function Re(e,t){return e!=e?t==t:e!==t||e&&typeof e=="object"||typeof e=="function"}let ys;function Vs(e,t){return e===t?!0:(ys||(ys=document.createElement("a")),ys.href=t,e===ys.href)}function Of(e){return Object.keys(e).length===0}function Bf(e,...t){if(e==null){for(const s of t)s(void 0);return Ae}const i=e.subscribe(...t);return i.unsubscribe?()=>i.unsubscribe():i}function li(e){let t;return Bf(e,i=>t=i)(),t}function Fe(e,t,i,s){if(e){const r=Cl(e,t,i,s);return e[0](r)}}function Cl(e,t,i,s){return e[1]&&s?Qt(i.ctx.slice(),e[1](s(t))):i.ctx}function Ue(e,t,i,s){if(e[2]&&s){const r=e[2](s(i));if(t.dirty===void 0)return r;if(typeof r=="object"){const n=[],l=Math.max(t.dirty.length,r.length);for(let o=0;o<l;o+=1)n[o]=t.dirty[o]|r[o];return n}return t.dirty|r}return t.dirty}function We(e,t,i,s,r,n){if(r){const l=Cl(t,i,s,n);e.p(l,r)}}function Ye(e){if(e.ctx.length>32){const t=[],i=e.ctx.length/32;for(let s=0;s<i;s++)t[s]=-1;return t}return-1}function Hf(e){const t={};for(const i in e)t[i]=!0;return t}function Pf(e){return e&&vn(e.destroy)?e.destroy:Ae}function ae(e,t){e.appendChild(t)}function J(e,t,i){e.insertBefore(t,i||null)}function $(e){e.parentNode&&e.parentNode.removeChild(e)}function re(e){return document.createElement(e)}function Jt(e){return document.createElementNS("http://www.w3.org/2000/svg",e)}function ct(e){return document.createTextNode(e)}function ue(){return ct(" ")}function $e(){return ct("")}function ve(e,t,i,s){return e.addEventListener(t,i,s),()=>e.removeEventListener(t,i,s)}function oi(e){return function(t){return t.preventDefault(),e.call(this,t)}}function It(e){return function(t){return t.stopPropagation(),e.call(this,t)}}function x(e,t,i){i==null?e.removeAttribute(t):e.getAttribute(t)!==i&&e.setAttribute(t,i)}const xf=["width","height"];function If(e,t){const i=Object.getOwnPropertyDescriptors(e.__proto__);for(const s in t)t[s]==null?e.removeAttribute(s):s==="style"?e.style.cssText=t[s]:s==="__value"?e.value=e[s]=t[s]:i[s]&&i[s].set&&xf.indexOf(s)===-1?e[s]=t[s]:x(e,s,t[s])}function Nf(e,t){Object.keys(t).forEach(i=>{Os(e,i,t[i])})}function Os(e,t,i){const s=t.toLowerCase();s in e?e[s]=typeof e[s]=="boolean"&&i===""?!0:i:t in e?e[t]=typeof e[t]=="boolean"&&i===""?!0:i:x(e,t,i)}function co(e){return/-/.test(e)?Nf:If}function Ci(e,t,i){e.setAttributeNS("http://www.w3.org/1999/xlink",t,i)}function Xr(e){return e===""?null:+e}function Vf(e){return Array.from(e.childNodes)}function At(e,t){t=""+t,e.data!==t&&(e.data=t)}function ht(e,t){e.value=t??""}function pt(e,t,i,s){i==null?e.style.removeProperty(t):e.style.setProperty(t,i,s?"important":"")}function ho(e,t,i){for(let s=0;s<e.options.length;s+=1){const r=e.options[s];if(r.__value===t){r.selected=!0;return}}(!i||t!==void 0)&&(e.selectedIndex=-1)}function jf(e){const t=e.querySelector(":checked");return t&&t.__value}function W(e,t,i){e.classList.toggle(t,!!i)}function Ff(e,t,{bubbles:i=!1,cancelable:s=!1}={}){return new CustomEvent(e,{detail:t,bubbles:i,cancelable:s})}class Ui{constructor(t=!1){ne(this,"is_svg",!1);ne(this,"e");ne(this,"n");ne(this,"t");ne(this,"a");this.is_svg=t,this.e=this.n=null}c(t){this.h(t)}m(t,i,s=null){this.e||(this.is_svg?this.e=Jt(i.nodeName):this.e=re(i.nodeType===11?"TEMPLATE":i.nodeName),this.t=i.tagName!=="TEMPLATE"?i:i.content,this.c(t)),this.i(s)}h(t){this.e.innerHTML=t,this.n=Array.from(this.e.nodeName==="TEMPLATE"?this.e.content.childNodes:this.e.childNodes)}i(t){for(let i=0;i<this.n.length;i+=1)J(this.t,this.n[i],t)}p(t){this.d(),this.h(t),this.i(this.a)}d(){this.n.forEach($)}}let ls;function ss(e){ls=e}function ir(){if(!ls)throw new Error("Function called outside component initialization");return ls}function Uf(e){ir().$$.on_mount.push(e)}function bn(e){ir().$$.on_destroy.push(e)}function ei(){const e=ir();return(t,i,{cancelable:s=!1}={})=>{const r=e.$$.callbacks[t];if(r){const n=Ff(t,i,{cancelable:s});return r.slice().forEach(l=>{l.call(e,n)}),!n.defaultPrevented}return!0}}function Wf(e){return ir().$$.context.get(e)}function Ee(e,t){const i=e.$$.callbacks[t.type];i&&i.slice().forEach(s=>s.call(this,t))}const Ri=[],Ot=[];let Bi=[];const uo=[],Yf=Promise.resolve();let Qr=!1;function zf(){Qr||(Qr=!0,Yf.then(Sl))}function js(e){Bi.push(e)}const Mr=new Set;let Ei=0;function Sl(){if(Ei!==0)return;const e=ls;do{try{for(;Ei<Ri.length;){const t=Ri[Ei];Ei++,ss(t),qf(t.$$)}}catch(t){throw Ri.length=0,Ei=0,t}for(ss(null),Ri.length=0,Ei=0;Ot.length;)Ot.pop()();for(let t=0;t<Bi.length;t+=1){const i=Bi[t];Mr.has(i)||(Mr.add(i),i())}Bi.length=0}while(Ri.length);for(;uo.length;)uo.pop()();Qr=!1,Mr.clear(),ss(e)}function qf(e){if(e.fragment!==null){e.update(),Qe(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(js)}}function Zf(e){const t=[],i=[];Bi.forEach(s=>e.indexOf(s)===-1?t.push(s):i.push(s)),i.forEach(s=>s()),Bi=t}const Bs=new Set;let vi;function ze(){vi={r:0,c:[],p:vi}}function qe(){vi.r||Qe(vi.c),vi=vi.p}function j(e,t){e&&e.i&&(Bs.delete(e),e.i(t))}function U(e,t,i,s){if(e&&e.o){if(Bs.has(e))return;Bs.add(e),vi.c.push(()=>{Bs.delete(e),s&&(i&&e.d(1),s())}),e.o(t)}else s&&s()}function ut(e){return(e==null?void 0:e.length)!==void 0?e:Array.from(e)}function Kf(e,t){e.d(1),t.delete(e.key)}function Si(e,t){U(e,1,1,()=>{t.delete(e.key)})}function di(e,t,i,s,r,n,l,o,a,c,f,u){let m=e.length,v=n.length,y=m;const g={};for(;y--;)g[e[y].key]=y;const h=[],d=new Map,_=new Map,p=[];for(y=v;y--;){const k=u(r,n,y),C=i(k);let w=l.get(C);w?s&&p.push(()=>w.p(k,t)):(w=c(C,k),w.c()),d.set(C,h[y]=w),C in g&&_.set(C,Math.abs(y-g[C]))}const b=new Set,S=new Set;function L(k){j(k,1),k.m(o,f),l.set(k.key,k),f=k.first,v--}for(;m&&v;){const k=h[v-1],C=e[m-1],w=k.key,E=C.key;k===C?(f=k.first,m--,v--):d.has(E)?!l.has(w)||b.has(w)?L(k):S.has(E)?m--:_.get(w)>_.get(E)?(S.add(w),L(k)):(b.add(E),m--):(a(C,l),m--)}for(;m--;){const k=e[m];d.has(k.key)||a(k,l)}for(;v;)L(h[v-1]);return Qe(p),h}function _i(e,t){const i={},s={},r={$$scope:1};let n=e.length;for(;n--;){const l=e[n],o=t[n];if(o){for(const a in l)a in o||(s[a]=1);for(const a in o)r[a]||(i[a]=o[a],r[a]=1);e[n]=o}else for(const a in l)r[a]=1}for(const l in s)l in i||(i[l]=void 0);return i}function wi(e){return typeof e=="object"&&e!==null?e:{}}function te(e){e&&e.c()}function Q(e,t,i){const{fragment:s,after_update:r}=e.$$;s&&s.m(t,i),js(()=>{const n=e.$$.on_mount.map(yl).filter(vn);e.$$.on_destroy?e.$$.on_destroy.push(...n):Qe(n),e.$$.on_mount=[]}),r.forEach(js)}function ee(e,t){const i=e.$$;i.fragment!==null&&(Zf(i.after_update),Qe(i.on_destroy),i.fragment&&i.fragment.d(t),i.on_destroy=i.fragment=null,i.ctx=[])}function Gf(e,t){e.$$.dirty[0]===-1&&(Ri.push(e),zf(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function Oe(e,t,i,s,r,n,l=null,o=[-1]){const a=ls;ss(e);const c=e.$$={fragment:null,ctx:[],props:n,update:Ae,not_equal:r,bound:lo(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(a?a.$$.context:[])),callbacks:lo(),dirty:o,skip_bound:!1,root:t.target||a.$$.root};l&&l(c.root);let f=!1;if(c.ctx=i?i(e,t.props||{},(u,m,...v)=>{const y=v.length?v[0]:m;return c.ctx&&r(c.ctx[u],c.ctx[u]=y)&&(!c.skip_bound&&c.bound[u]&&c.bound[u](y),f&&Gf(e,u)),m}):[],c.update(),f=!0,Qe(c.before_update),c.fragment=s?s(c.ctx):!1,t.target){if(t.hydrate){const u=Vf(t.target);c.fragment&&c.fragment.l(u),u.forEach($)}else c.fragment&&c.fragment.c();t.intro&&j(e.$$.fragment),Q(e,t.target,t.anchor),Sl()}ss(a)}class Be{constructor(){ne(this,"$$");ne(this,"$$set")}$destroy(){ee(this,1),this.$destroy=Ae}$on(t,i){if(!vn(i))return Ae;const s=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return s.push(i),()=>{const r=s.indexOf(i);r!==-1&&s.splice(r,1)}}$set(t){this.$$set&&!Of(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const $f="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add($f);const Jf=e=>({}),fo=e=>({});function Xf(e){let t;const i=e[16].icon,s=Fe(i,e,e[15],fo),r=s||e1();return{c(){r&&r.c()},m(n,l){r&&r.m(n,l),t=!0},p(n,l){s&&s.p&&(!t||l&32768)&&We(s,i,n,n[15],t?Ue(i,n[15],l,Jf):Ye(n[15]),fo)},i(n){t||(j(r,n),t=!0)},o(n){U(r,n),t=!1},d(n){r&&r.d(n)}}}function Qf(e){let t,i;return{c(){t=Jt("svg"),i=Jt("use"),Ci(i,"xlink:href",e[1]),x(t,"class","b3-menu__icon")},m(s,r){J(s,t,r),ae(t,i)},p(s,r){r&2&&Ci(i,"xlink:href",s[1])},i:Ae,o:Ae,d(s){s&&$(t)}}}function e1(e){let t,i;return{c(){t=Jt("svg"),i=Jt("use"),Ci(i,"xlink:href","#"),x(t,"class","b3-menu__icon")},m(s,r){J(s,t,r),ae(t,i)},p:Ae,d(s){s&&$(t)}}}function t1(e){let t,i,s,r,n,l,o;return{c(){t=re("div"),i=ue(),s=re("input"),r=ue(),n=re("div"),x(t,"class","fn__hr--small"),s.disabled=e[4],x(s,"placeholder",e[3]),x(s,"class","b3-text-field fn__size200"),x(n,"class","fn__hr--small")},m(a,c){J(a,t,c),J(a,i,c),J(a,s,c),e[17](s),ht(s,e[0]),J(a,r,c),J(a,n,c),l||(o=[ve(s,"input",e[18]),ve(s,"change",e[12])],l=!0)},p(a,c){c&16&&(s.disabled=a[4]),c&8&&x(s,"placeholder",a[3]),c&1&&s.value!==a[0]&&ht(s,a[0])},d(a){a&&($(t),$(i),$(s),$(r),$(n)),e[17](null),l=!1,Qe(o)}}}function i1(e){let t;return{c(){t=ct(e[3])},m(i,s){J(i,t,s)},p(i,s){s&8&&At(t,i[3])},d(i){i&&$(t)}}}function _o(e){let t,i,s;return{c(){t=re("input"),x(t,"type","file"),x(t,"accept",e[8]),t.disabled=e[4],t.multiple=e[9],x(t,"class","file-input svelte-14whws2")},m(r,n){J(r,t,n),e[19](t),i||(s=[ve(t,"change",e[20]),ve(t,"change",e[13])],i=!0)},p(r,n){n&256&&x(t,"accept",r[8]),n&16&&(t.disabled=r[4]),n&512&&(t.multiple=r[9])},d(r){r&&$(t),e[19](null),i=!1,Qe(s)}}}function po(e){let t,i;return{c(){t=re("span"),i=ct(e[6]),x(t,"class","b3-menu__accelerator")},m(s,r){J(s,t,r),ae(t,i)},p(s,r){r&64&&At(i,s[6])},d(s){s&&$(t)}}}function s1(e){let t,i,s,r,n,l,o,a;const c=[Qf,Xf],f=[];function u(d,_){return d[1]?0:1}t=u(e),i=f[t]=c[t](e);function m(d,_){return!d[5]||d[7]?i1:t1}let v=m(e),y=v(e),g=e[7]&&_o(e),h=e[6]&&po(e);return{c(){i.c(),s=ue(),r=re("span"),y.c(),n=ue(),g&&g.c(),l=ue(),h&&h.c(),o=$e(),x(r,"class","b3-menu__label"),pt(r,"font",e[2]),pt(r,"position",e[7]?"relative":"initial")},m(d,_){f[t].m(d,_),J(d,s,_),J(d,r,_),y.m(r,null),ae(r,n),g&&g.m(r,null),J(d,l,_),h&&h.m(d,_),J(d,o,_),a=!0},p(d,[_]){let p=t;t=u(d),t===p?f[t].p(d,_):(ze(),U(f[p],1,1,()=>{f[p]=null}),qe(),i=f[t],i?i.p(d,_):(i=f[t]=c[t](d),i.c()),j(i,1),i.m(s.parentNode,s)),v===(v=m(d))&&y?y.p(d,_):(y.d(1),y=v(d),y&&(y.c(),y.m(r,n))),d[7]?g?g.p(d,_):(g=_o(d),g.c(),g.m(r,null)):g&&(g.d(1),g=null),_&4&&pt(r,"font",d[2]),_&128&&pt(r,"position",d[7]?"relative":"initial"),d[6]?h?h.p(d,_):(h=po(d),h.c(),h.m(o.parentNode,o)):h&&(h.d(1),h=null)},i(d){a||(j(i),a=!0)},o(d){U(i),a=!1},d(d){d&&($(s),$(r),$(l),$(o)),f[t].d(d),y.d(),g&&g.d(),h&&h.d(d)}}}function r1(e,t,i){let{$$slots:s={},$$scope:r}=t,{icon:n=""}=t,{font:l=""}=t,{label:o=""}=t,{disabled:a=!1}=t,{input:c=!1}=t,{value:f=""}=t,{accelerator:u=""}=t,{file:m=!1}=t,{accept:v=""}=t,{multiple:y=!0}=t,{webkitdirectory:g=!0}=t,h=null,d;function _(E){d&&i(11,d.webkitdirectory=E,d)}Uf(()=>{_(g)});const p=ei();function b(E){p("changed",{value:f,event:E})}function S(E){p("selected",{files:h,event:E})}function L(E){Ot[E?"unshift":"push"](()=>{d=E,i(11,d)})}function k(){f=this.value,i(0,f)}function C(E){Ot[E?"unshift":"push"](()=>{d=E,i(11,d)})}function w(){h=this.files,i(10,h)}return e.$$set=E=>{"icon"in E&&i(1,n=E.icon),"font"in E&&i(2,l=E.font),"label"in E&&i(3,o=E.label),"disabled"in E&&i(4,a=E.disabled),"input"in E&&i(5,c=E.input),"value"in E&&i(0,f=E.value),"accelerator"in E&&i(6,u=E.accelerator),"file"in E&&i(7,m=E.file),"accept"in E&&i(8,v=E.accept),"multiple"in E&&i(9,y=E.multiple),"webkitdirectory"in E&&i(14,g=E.webkitdirectory),"$$scope"in E&&i(15,r=E.$$scope)},e.$$.update=()=>{e.$$.dirty&16384&&_(g)},[f,n,l,o,a,c,u,m,v,y,h,d,b,S,g,r,s,L,k,C,w]}let mo=class extends Be{constructor(t){super(),Oe(this,t,r1,s1,Re,{icon:1,font:2,label:3,disabled:4,input:5,value:0,accelerator:6,file:7,accept:8,multiple:9,webkitdirectory:14})}};const Mi=[];function ye(e,t=Ae){let i;const s=new Set;function r(o){if(Re(e,o)&&(e=o,i)){const a=!Mi.length;for(const c of s)c[1](),Mi.push(c,e);if(a){for(let c=0;c<Mi.length;c+=2)Mi[c][0](Mi[c+1]);Mi.length=0}}}function n(o){r(o(e))}function l(o,a=Ae){const c=[o,a];return s.add(c),s.size===1&&(i=t(r,n)||Ae),o(e),()=>{s.delete(c),s.size===0&&i&&(i(),i=null)}}return{set:r,update:n,subscribe:l}}const Vi={id:/^\d{14}-[0-9a-z]{7}$/,url:/^siyuan:\/\/blocks\/(\d{14}-[0-9a-z]{7})/,snippet:/^\d{14}-[0-9a-z]{7}$/,created:/^\d{10}$/,history:/[\/\\]history[\/\\]\d{4}-\d{2}-\d{2}-\d{6}-(clean|update|delete|format|sync|replace)([\/\\]\d{14}-[0-9a-z]{7})+\.sy$/,snapshot:/^[0-9a-f]{40}$/,shorthand:/^\d{13}$/};function n1(e){let t,i;return{c(){t=Jt("svg"),i=Jt("use"),Ci(i,"xlink:href",e[0]),x(t,"style",e[3]),x(t,"data-id",e[1]),x(t,"class",e[2]),W(t,"popover__block",Vi.id.test(e[1]))},m(s,r){J(s,t,r),ae(t,i)},p(s,[r]){r&1&&Ci(i,"xlink:href",s[0]),r&8&&x(t,"style",s[3]),r&2&&x(t,"data-id",s[1]),r&4&&x(t,"class",s[2]),r&6&&W(t,"popover__block",Vi.id.test(s[1]))},i:Ae,o:Ae,d(s){s&&$(t)}}}function o1(e,t,i){let{icon:s}=t,{id:r=""}=t,{className:n=""}=t,{style:l=""}=t;return e.$$set=o=>{"icon"in o&&i(0,s=o.icon),"id"in o&&i(1,r=o.id),"className"in o&&i(2,n=o.className),"style"in o&&i(3,l=o.style)},[s,r,n,l]}class Ct extends Be{constructor(t){super(),Oe(this,t,o1,n1,Re,{icon:0,id:1,className:2,style:3})}}const a1=e=>({}),go=e=>({});function vo(e){let t,i;return t=new Ct({props:{id:e[1],icon:e[2]}}),{c(){te(t.$$.fragment)},m(s,r){Q(t,s,r),i=!0},p(s,r){const n={};r&2&&(n.id=s[1]),r&4&&(n.icon=s[2]),t.$set(n)},i(s){i||(j(t.$$.fragment,s),i=!0)},o(s){U(t.$$.fragment,s),i=!1},d(s){ee(t,s)}}}function l1(e){let t,i,s=e[2]&&vo(e);return{c(){s&&s.c(),t=$e()},m(r,n){s&&s.m(r,n),J(r,t,n),i=!0},p(r,n){r[2]?s?(s.p(r,n),n&4&&j(s,1)):(s=vo(r),s.c(),j(s,1),s.m(t.parentNode,t)):s&&(ze(),U(s,1,1,()=>{s=null}),qe())},i(r){i||(j(s),i=!0)},o(r){U(s),i=!1},d(r){r&&$(t),s&&s.d(r)}}}function c1(e){let t,i,s,r,n;const l=e[8].svg,o=Fe(l,e,e[7],go),a=o||l1(e);return{c(){t=re("span"),a&&a.c(),i=ue(),s=re("span"),r=ct(e[3]),x(s,"title",e[4]),x(s,"class","protyle-breadcrumb__text"),W(s,"protyle-breadcrumb__text--ellipsis",e[5]),x(t,"data-node-id",e[0]),x(t,"class","protyle-breadcrumb__item"),W(t,"protyle-breadcrumb__item--active",e[6])},m(c,f){J(c,t,f),a&&a.m(t,null),ae(t,i),ae(t,s),ae(s,r),n=!0},p(c,[f]){o?o.p&&(!n||f&128)&&We(o,l,c,c[7],n?Ue(l,c[7],f,a1):Ye(c[7]),go):a&&a.p&&(!n||f&6)&&a.p(c,n?f:-1),(!n||f&8)&&At(r,c[3]),(!n||f&16)&&x(s,"title",c[4]),(!n||f&32)&&W(s,"protyle-breadcrumb__text--ellipsis",c[5]),(!n||f&1)&&x(t,"data-node-id",c[0]),(!n||f&64)&&W(t,"protyle-breadcrumb__item--active",c[6])},i(c){n||(j(a,c),n=!0)},o(c){U(a,c),n=!1},d(c){c&&$(t),a&&a.d(c)}}}function h1(e,t,i){let{$$slots:s={},$$scope:r}=t,{itemId:n=""}=t,{iconId:l=""}=t,{icon:o=""}=t,{text:a=""}=t,{textTitle:c=""}=t,{textEllipsis:f=!0}=t,{active:u=!1}=t;return e.$$set=m=>{"itemId"in m&&i(0,n=m.itemId),"iconId"in m&&i(1,l=m.iconId),"icon"in m&&i(2,o=m.icon),"text"in m&&i(3,a=m.text),"textTitle"in m&&i(4,c=m.textTitle),"textEllipsis"in m&&i(5,f=m.textEllipsis),"active"in m&&i(6,u=m.active),"$$scope"in m&&i(7,r=m.$$scope)},[n,l,o,a,c,f,u,r,s]}let u1=class extends Be{constructor(t){super(),Oe(this,t,h1,c1,Re,{itemId:0,iconId:1,icon:2,text:3,textTitle:4,textEllipsis:5,active:6})}};function bo(e,t,i){const s=e.slice();return s[3]=t[i],s[5]=i,s}function f1(e){let t,i;return t=new Ct({props:{className:"protyle-breadcrumb__arrow",icon:e[3].icon||"#iconRight"}}),{c(){te(t.$$.fragment)},m(s,r){Q(t,s,r),i=!0},p(s,r){const n={};r&1&&(n.icon=s[3].icon||"#iconRight"),t.$set(n)},i(s){i||(j(t.$$.fragment,s),i=!0)},o(s){U(t.$$.fragment,s),i=!1},d(s){ee(t,s)}}}function d1(e){let t,i;const s=[e[3]];let r={};for(let n=0;n<s.length;n+=1)r=Qt(r,s[n]);return t=new u1({props:r}),{c(){te(t.$$.fragment)},m(n,l){Q(t,n,l),i=!0},p(n,l){const o=l&1?_i(s,[wi(n[3])]):{};t.$set(o)},i(n){i||(j(t.$$.fragment,n),i=!0)},o(n){U(t.$$.fragment,n),i=!1},d(n){ee(t,n)}}}function yo(e,t){let i,s,r,n,l;const o=[d1,f1],a=[];function c(f,u){return f[3].type==="item"?0:f[3].type==="arrow"?1:-1}return~(s=c(t))&&(r=a[s]=o[s](t)),{key:e,first:null,c(){i=$e(),r&&r.c(),n=$e(),this.first=i},m(f,u){J(f,i,u),~s&&a[s].m(f,u),J(f,n,u),l=!0},p(f,u){t=f;let m=s;s=c(t),s===m?~s&&a[s].p(t,u):(r&&(ze(),U(a[m],1,1,()=>{a[m]=null}),qe()),~s?(r=a[s],r?r.p(t,u):(r=a[s]=o[s](t),r.c()),j(r,1),r.m(n.parentNode,n)):r=null)},i(f){l||(j(r),l=!0)},o(f){U(r),l=!1},d(f){f&&($(i),$(n)),~s&&a[s].d(f)}}}function _1(e){let t=[],i=new Map,s,r,n=ut(e[0]);const l=o=>o[5];for(let o=0;o<n.length;o+=1){let a=bo(e,n,o),c=l(a);i.set(c,t[o]=yo(c,a))}return{c(){for(let o=0;o<t.length;o+=1)t[o].c();s=$e()},m(o,a){for(let c=0;c<t.length;c+=1)t[c]&&t[c].m(o,a);J(o,s,a),r=!0},p(o,a){a&1&&(n=ut(o[0]),ze(),t=di(t,a,l,1,o,n,i,s.parentNode,Si,yo,s,bo),qe())},i(o){if(!r){for(let a=0;a<n.length;a+=1)j(t[a]);r=!0}},o(o){for(let a=0;a<t.length;a+=1)U(t[a]);r=!1},d(o){o&&$(s);for(let a=0;a<t.length;a+=1)t[a].d(o)}}}function p1(e){let t,i;const s=e[2].default,r=Fe(s,e,e[1],null),n=r||_1(e);return{c(){t=re("div"),n&&n.c(),x(t,"class","protyle-breadcrumb__bar protyle-breadcrumb__bar--nowrap")},m(l,o){J(l,t,o),n&&n.m(t,null),i=!0},p(l,[o]){r?r.p&&(!i||o&2)&&We(r,s,l,l[1],i?Ue(s,l[1],o,null):Ye(l[1]),null):n&&n.p&&(!i||o&1)&&n.p(l,i?o:-1)},i(l){i||(j(n,l),i=!0)},o(l){U(n,l),i=!1},d(l){l&&$(t),n&&n.d(l)}}}function m1(e,t,i){let{$$slots:s={},$$scope:r}=t,{items:n=[]}=t;return e.$$set=l=>{"items"in l&&i(0,n=l.items),"$$scope"in l&&i(1,r=l.$$scope)},[n,r,s]}let g1=class extends Be{constructor(t){super(),Oe(this,t,m1,p1,Re,{items:0})}};var Tt=(e=>(e.none="",e.n="b3-tooltips__n",e.ne="b3-tooltips__ne",e.e="b3-tooltips__e",e.se="b3-tooltips__se",e.s="b3-tooltips__s",e.sw="b3-tooltips__sw",e.w="b3-tooltips__w",e.nw="b3-tooltips__nw",e))(Tt||{});function Dr(e){let t,i,s,r,n,l;i=new Ct({props:{icon:e[0]}});let o=[{role:"button"},{"data-type":e[5]},{"aria-label":e[6]},{class:s="block__icon fn__flex-center "+e[7]}],a={};for(let c=0;c<o.length;c+=1)a=Qt(a,o[c]);return{c(){t=re(e[8]),te(i.$$.fragment),co(e[8])(t,a),W(t,"fn__none",e[2]),W(t,"block__icon--show",e[1]),W(t,"toolbar__item--active",e[3]),W(t,"toolbar__item--disabled",e[4]),W(t,"b3-tooltips",e[7]!==Tt.none)},m(c,f){J(c,t,f),Q(i,t,null),e[14](t),r=!0,n||(l=[ve(t,"click",e[12]),ve(t,"dblclick",e[13]),ve(t,"click",e[15])],n=!0)},p(c,f){const u={};f&1&&(u.icon=c[0]),i.$set(u),co(c[8])(t,a=_i(o,[{role:"button"},(!r||f&32)&&{"data-type":c[5]},(!r||f&64)&&{"aria-label":c[6]},(!r||f&128&&s!==(s="block__icon fn__flex-center "+c[7]))&&{class:s}])),W(t,"fn__none",c[2]),W(t,"block__icon--show",c[1]),W(t,"toolbar__item--active",c[3]),W(t,"toolbar__item--disabled",c[4]),W(t,"b3-tooltips",c[7]!==Tt.none)},i(c){r||(j(i.$$.fragment,c),r=!0)},o(c){U(i.$$.fragment,c),r=!1},d(c){c&&$(t),ee(i),e[14](null),n=!1,Qe(l)}}}function v1(e){let t=e[8],i,s=e[8]&&Dr(e);return{c(){s&&s.c(),i=$e()},m(r,n){s&&s.m(r,n),J(r,i,n)},p(r,[n]){r[8]?t?Re(t,r[8])?(s.d(1),s=Dr(r),t=r[8],s.c(),s.m(i.parentNode,i)):s.p(r,n):(s=Dr(r),t=r[8],s.c(),s.m(i.parentNode,i)):t&&(s.d(1),s=null,t=r[8])},i:Ae,o(r){U(s,r)},d(r){r&&$(i),s&&s.d(r)}}}function b1(e,t,i){let{icon:s="#iconHelp"}=t,{tag:r="button"}=t,{show:n=!0}=t,{none:l=!1}=t,{active:o=!1}=t,{disabled:a=!1}=t,{type:c=""}=t,{ariaLabel:f=""}=t,{tooltipsDirection:u=Tt.none}=t,{onClick:m=()=>null}=t,v;const y={icon:ye(s),show:ye(n),none:ye(l),active:ye(o),disabled:ye(a),type:ye(c),ariaLabel:ye(f),tooltipsDirection:ye(u)},g=[y.icon.subscribe(b=>i(0,s=b)),y.show.subscribe(b=>i(1,n=b)),y.none.subscribe(b=>i(2,l=b)),y.active.subscribe(b=>i(3,o=b)),y.disabled.subscribe(b=>i(4,a=b)),y.type.subscribe(b=>i(5,c=b)),y.ariaLabel.subscribe(b=>i(6,f=b)),y.tooltipsDirection.subscribe(b=>i(7,u=b))];bn(()=>{g.forEach(b=>b())});function h(b){Ee.call(this,e,b)}function d(b){Ee.call(this,e,b)}function _(b){Ot[b?"unshift":"push"](()=>{v=b,i(10,v)})}const p=b=>m(b,v,y);return e.$$set=b=>{"icon"in b&&i(0,s=b.icon),"tag"in b&&i(8,r=b.tag),"show"in b&&i(1,n=b.show),"none"in b&&i(2,l=b.none),"active"in b&&i(3,o=b.active),"disabled"in b&&i(4,a=b.disabled),"type"in b&&i(5,c=b.type),"ariaLabel"in b&&i(6,f=b.ariaLabel),"tooltipsDirection"in b&&i(7,u=b.tooltipsDirection),"onClick"in b&&i(9,m=b.onClick)},e.$$.update=()=>{e.$$.dirty&1&&y.icon.set(s),e.$$.dirty&2&&y.show.set(n),e.$$.dirty&4&&y.none.set(l),e.$$.dirty&8&&y.active.set(o),e.$$.dirty&16&&y.disabled.set(a),e.$$.dirty&32&&y.type.set(c),e.$$.dirty&64&&y.ariaLabel.set(f),e.$$.dirty&128&&y.tooltipsDirection.set(u)},[s,n,l,o,a,c,f,u,r,m,v,y,h,d,_,p]}class wl extends Be{constructor(t){super(),Oe(this,t,b1,v1,Re,{icon:0,tag:8,show:1,none:2,active:3,disabled:4,type:5,ariaLabel:6,tooltipsDirection:7,onClick:9})}}function Co(e,t,i){const s=e.slice();return s[4]=t[i],s[6]=i,s}const y1=e=>({}),So=e=>({}),C1=e=>({}),wo=e=>({});function S1(e){let t,i;return t=new g1({props:{items:e[0]}}),{c(){te(t.$$.fragment)},m(s,r){Q(t,s,r),i=!0},p(s,r){const n={};r&1&&(n.items=s[0]),t.$set(n)},i(s){i||(j(t.$$.fragment,s),i=!0)},o(s){U(t.$$.fragment,s),i=!1},d(s){ee(t,s)}}}function w1(e){let t;return{c(){t=re("span"),x(t,"class","fn__space")},m(i,s){J(i,t,s)},d(i){i&&$(t)}}}function k1(e){let t;return{c(){t=re("span"),x(t,"class","protyle-breadcrumb__space")},m(i,s){J(i,t,s)},d(i){i&&$(t)}}}function ko(e,t){let i,s,r,n;function l(u,m){return u[6]===0?k1:w1}let o=l(t),a=o(t);const c=[t[4]];let f={};for(let u=0;u<c.length;u+=1)f=Qt(f,c[u]);return r=new wl({props:f}),{key:e,first:null,c(){i=$e(),a.c(),s=ue(),te(r.$$.fragment),this.first=i},m(u,m){J(u,i,m),a.m(u,m),J(u,s,m),Q(r,u,m),n=!0},p(u,m){t=u,o!==(o=l(t))&&(a.d(1),a=o(t),a&&(a.c(),a.m(s.parentNode,s)));const v=m&2?_i(c,[wi(t[4])]):{};r.$set(v)},i(u){n||(j(r.$$.fragment,u),n=!0)},o(u){U(r.$$.fragment,u),n=!1},d(u){u&&($(i),$(s)),a.d(u),ee(r,u)}}}function L1(e){let t=[],i=new Map,s,r,n=ut(e[1]);const l=o=>o[6];for(let o=0;o<n.length;o+=1){let a=Co(e,n,o),c=l(a);i.set(c,t[o]=ko(c,a))}return{c(){for(let o=0;o<t.length;o+=1)t[o].c();s=$e()},m(o,a){for(let c=0;c<t.length;c+=1)t[c]&&t[c].m(o,a);J(o,s,a),r=!0},p(o,a){a&2&&(n=ut(o[1]),ze(),t=di(t,a,l,1,o,n,i,s.parentNode,Si,ko,s,Co),qe())},i(o){if(!r){for(let a=0;a<n.length;a+=1)j(t[a]);r=!0}},o(o){for(let a=0;a<t.length;a+=1)U(t[a]);r=!1},d(o){o&&$(s);for(let a=0;a<t.length;a+=1)t[a].d(o)}}}function E1(e){let t,i,s;const r=e[3].bar,n=Fe(r,e,e[2],wo),l=n||S1(e),o=e[3].icons,a=Fe(o,e,e[2],So),c=a||L1(e);return{c(){t=re("div"),l&&l.c(),i=ue(),c&&c.c(),x(t,"class","protyle-breadcrumb")},m(f,u){J(f,t,u),l&&l.m(t,null),ae(t,i),c&&c.m(t,null),s=!0},p(f,[u]){n?n.p&&(!s||u&4)&&We(n,r,f,f[2],s?Ue(r,f[2],u,C1):Ye(f[2]),wo):l&&l.p&&(!s||u&1)&&l.p(f,s?u:-1),a?a.p&&(!s||u&4)&&We(a,o,f,f[2],s?Ue(o,f[2],u,y1):Ye(f[2]),So):c&&c.p&&(!s||u&2)&&c.p(f,s?u:-1)},i(f){s||(j(l,f),j(c,f),s=!0)},o(f){U(l,f),U(c,f),s=!1},d(f){f&&$(t),l&&l.d(f),c&&c.d(f)}}}function M1(e,t,i){let{$$slots:s={},$$scope:r}=t,{items:n=[]}=t,{icons:l=[]}=t;return e.$$set=o=>{"items"in o&&i(0,n=o.items),"icons"in o&&i(1,l=o.icons),"$$scope"in o&&i(2,r=o.$$scope)},[n,l,r,s]}class D1 extends Be{constructor(t){super(),Oe(this,t,M1,E1,Re,{items:0,icons:1})}}const T1=e=>({}),Lo=e=>({}),R1=e=>({}),Eo=e=>({});function Mo(e){let t,i;return t=new D1({props:{items:e[2],icons:e[3]}}),{c(){te(t.$$.fragment)},m(s,r){Q(t,s,r),i=!0},p(s,r){const n={};r&4&&(n.items=s[2]),r&8&&(n.icons=s[3]),t.$set(n)},i(s){i||(j(t.$$.fragment,s),i=!0)},o(s){U(t.$$.fragment,s),i=!1},d(s){ee(t,s)}}}function A1(e){let t,i,s=e[1]&&Mo(e);return{c(){s&&s.c(),t=$e()},m(r,n){s&&s.m(r,n),J(r,t,n),i=!0},p(r,n){r[1]?s?(s.p(r,n),n&2&&j(s,1)):(s=Mo(r),s.c(),j(s,1),s.m(t.parentNode,t)):s&&(ze(),U(s,1,1,()=>{s=null}),qe())},i(r){i||(j(s),i=!0)},o(r){U(s),i=!1},d(r){r&&$(t),s&&s.d(r)}}}function O1(e){let t,i,s,r;const n=e[5].breadcrumb,l=Fe(n,e,e[4],Eo),o=l||A1(e),a=e[5].content,c=Fe(a,e,e[4],Lo);return{c(){t=re("div"),o&&o.c(),i=ue(),s=re("div"),c&&c.c(),x(s,"class","protyle-preview"),x(t,"class","fn__flex-column"),W(t,"fullscreen",e[0])},m(f,u){J(f,t,u),o&&o.m(t,null),ae(t,i),ae(t,s),c&&c.m(s,null),r=!0},p(f,[u]){l?l.p&&(!r||u&16)&&We(l,n,f,f[4],r?Ue(n,f[4],u,R1):Ye(f[4]),Eo):o&&o.p&&(!r||u&14)&&o.p(f,r?u:-1),c&&c.p&&(!r||u&16)&&We(c,a,f,f[4],r?Ue(a,f[4],u,T1):Ye(f[4]),Lo),(!r||u&1)&&W(t,"fullscreen",f[0])},i(f){r||(j(o,f),j(c,f),r=!0)},o(f){U(o,f),U(c,f),r=!1},d(f){f&&$(t),o&&o.d(f),c&&c.d(f)}}}function B1(e,t,i){let{$$slots:s={},$$scope:r}=t,{fullscreen:n=!1}=t,{breadcrumb:l=!0}=t,{breadcrumbItems:o=[]}=t,{breadcrumbIcons:a=[]}=t;return e.$$set=c=>{"fullscreen"in c&&i(0,n=c.fullscreen),"breadcrumb"in c&&i(1,l=c.breadcrumb),"breadcrumbItems"in c&&i(2,o=c.breadcrumbItems),"breadcrumbIcons"in c&&i(3,a=c.breadcrumbIcons),"$$scope"in c&&i(4,r=c.$$scope)},[n,l,o,a,r,s]}let H1=class extends Be{constructor(t){super(),Oe(this,t,B1,O1,Re,{fullscreen:0,breadcrumb:1,breadcrumbItems:2,breadcrumbIcons:3})}};function P1(e){let t,i,s,r;return{c(){t=re("iframe"),Vs(t.src,i=e[0])||x(t,"src",i),x(t,"title",e[1]),x(t,"allow",e[2]),x(t,"csp",e[3]),x(t,"importance",e[4]),x(t,"name",e[5]),x(t,"referrerpolicy",e[6]),x(t,"sandbox",e[7]),x(t,"srcdoc",e[8]),x(t,"class","fn__flex fn__flex-1 iframe svelte-2g72x8")},m(n,l){J(n,t,l),e[11](t),s||(r=Pf(e[10].call(null,t)),s=!0)},p(n,[l]){l&1&&!Vs(t.src,i=n[0])&&x(t,"src",i),l&2&&x(t,"title",n[1]),l&4&&x(t,"allow",n[2]),l&8&&x(t,"csp",n[3]),l&16&&x(t,"importance",n[4]),l&32&&x(t,"name",n[5]),l&64&&x(t,"referrerpolicy",n[6]),l&128&&x(t,"sandbox",n[7]),l&256&&x(t,"srcdoc",n[8])},i:Ae,o:Ae,d(n){n&&$(t),e[11](null),s=!1,r()}}}function x1(e,t,i){let{src:s=void 0}=t,{title:r=void 0}=t;const n=ei();let l,{allow:o=void 0}=t,{csp:a=void 0}=t,{importance:c=void 0}=t,{name:f=void 0}=t,{referrerpolicy:u=void 0}=t,{sandbox:m=void 0}=t,{srcdoc:v=void 0}=t;const y=h=>(n("create",{iframe:h}),{update(d){n("update",{iframe:l})},destroy(){n("destroy")}});function g(h){Ot[h?"unshift":"push"](()=>{l=h,i(9,l)})}return e.$$set=h=>{"src"in h&&i(0,s=h.src),"title"in h&&i(1,r=h.title),"allow"in h&&i(2,o=h.allow),"csp"in h&&i(3,a=h.csp),"importance"in h&&i(4,c=h.importance),"name"in h&&i(5,f=h.name),"referrerpolicy"in h&&i(6,u=h.referrerpolicy),"sandbox"in h&&i(7,m=h.sandbox),"srcdoc"in h&&i(8,v=h.srcdoc)},[s,r,o,a,c,f,u,m,v,l,y,g]}class I1 extends Be{constructor(t){super(),Oe(this,t,x1,P1,Re,{src:0,title:1,allow:2,csp:3,importance:4,name:5,referrerpolicy:6,sandbox:7,srcdoc:8})}}function N1(e){const t=globalThis.document.createElement("a");return t.href=e,new URL(t.href)}function yn(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var V1=function(){var e=document.getSelection();if(!e.rangeCount)return function(){};for(var t=document.activeElement,i=[],s=0;s<e.rangeCount;s++)i.push(e.getRangeAt(s));switch(t.tagName.toUpperCase()){case"INPUT":case"TEXTAREA":t.blur();break;default:t=null;break}return e.removeAllRanges(),function(){e.type==="Caret"&&e.removeAllRanges(),e.rangeCount||i.forEach(function(r){e.addRange(r)}),t&&t.focus()}},j1=V1,Do={"text/plain":"Text","text/html":"Url",default:"Text"},F1="Copy to clipboard: #{key}, Enter";function U1(e){var t=(/mac os x/i.test(navigator.userAgent)?"⌘":"Ctrl")+"+C";return e.replace(/#{\s*key\s*}/g,t)}function W1(e,t){var i,s,r,n,l,o,a=!1;t||(t={}),i=t.debug||!1;try{r=j1(),n=document.createRange(),l=document.getSelection(),o=document.createElement("span"),o.textContent=e,o.ariaHidden="true",o.style.all="unset",o.style.position="fixed",o.style.top=0,o.style.clip="rect(0, 0, 0, 0)",o.style.whiteSpace="pre",o.style.webkitUserSelect="text",o.style.MozUserSelect="text",o.style.msUserSelect="text",o.style.userSelect="text",o.addEventListener("copy",function(f){if(f.stopPropagation(),t.format)if(f.preventDefault(),typeof f.clipboardData>"u"){i&&console.warn("unable to use e.clipboardData"),i&&console.warn("trying IE specific stuff"),window.clipboardData.clearData();var u=Do[t.format]||Do.default;window.clipboardData.setData(u,e)}else f.clipboardData.clearData(),f.clipboardData.setData(t.format,e);t.onCopy&&(f.preventDefault(),t.onCopy(f.clipboardData))}),document.body.appendChild(o),n.selectNodeContents(o),l.addRange(n);var c=document.execCommand("copy");if(!c)throw new Error("copy command was unsuccessful");a=!0}catch(f){i&&console.error("unable to copy using execCommand: ",f),i&&console.warn("trying IE specific stuff");try{window.clipboardData.setData(t.format||"text",e),t.onCopy&&t.onCopy(window.clipboardData),a=!0}catch(u){i&&console.error("unable to copy using clipboardData: ",u),i&&console.error("falling back to prompt"),s=U1("message"in t?t.message:F1),window.prompt(s,e)}}finally{l&&(typeof l.removeRange=="function"?l.removeRange(n):l.removeAllRanges()),o&&document.body.removeChild(o),r()}return a}var Y1=W1;const z1=yn(Y1);function kl(e){if(navigator.clipboard&&window.isSecureContext)return navigator.clipboard.writeText(e);z1(e)}function q1(e){return String.fromCodePoint(parseInt(e,16))}const Z1=new Map([["stage","iconFolder"],["assets","iconImage"],["assets","iconImage"],["emojies","iconEmoji"],["plugins","iconPlugin"],["public","iconCloud"],["snippets","iconCode"],["templates","iconMarkdown"],["widgets","iconBoth"],["appearance","iconTheme"],["export","iconUpload"],["history","iconHistory"]]);function K1(e){return Z1.get(e)??"iconHelp"}function G1(e){let t,i;return t=new I1({props:{src:e[0],title:e[1],slot:"content"}}),t.$on("create",e[5]),t.$on("destroy",e[6]),{c(){te(t.$$.fragment)},m(s,r){Q(t,s,r),i=!0},p(s,r){const n={};r&1&&(n.src=s[0]),r&2&&(n.title=s[1]),t.$set(n)},i(s){i||(j(t.$$.fragment,s),i=!0)},o(s){U(t.$$.fragment,s),i=!1},d(s){ee(t,s)}}}function $1(e){let t,i;return t=new H1({props:{fullscreen:e[2],breadcrumb:J1,breadcrumbItems:e[3],breadcrumbIcons:e[4],$$slots:{content:[G1]},$$scope:{ctx:e}}}),{c(){te(t.$$.fragment)},m(s,r){Q(t,s,r),i=!0},p(s,[r]){const n={};r&4&&(n.fullscreen=s[2]),r&8&&(n.breadcrumbItems=s[3]),r&1027&&(n.$$scope={dirty:r,ctx:s}),t.$set(n)},i(s){i||(j(t.$$.fragment,s),i=!0)},o(s){U(t.$$.fragment,s),i=!1},d(s){ee(t,s)}}}let J1=!0;function X1(e,t,i){var v,y,g,h,d,_,p,b;let s,{src:r}=t,{title:n}=t,l,o=!1,a=[],c=[{icon:"#iconCopy",type:"copy",ariaLabel:(y=(v=globalThis.siyuan)==null?void 0:v.languages)==null?void 0:y.copy,tooltipsDirection:Tt.sw,onClick(S,L,k){kl(s.href)}},{icon:"#iconRefresh",type:"refresh",ariaLabel:(h=(g=globalThis.siyuan)==null?void 0:g.languages)==null?void 0:h.refresh,tooltipsDirection:Tt.sw,onClick(S,L,k){var C,w;(w=(C=l==null?void 0:l.contentWindow)==null?void 0:C.location)!=null&&w.reload?l.contentWindow.location.reload():i(0,r)}},{icon:"#iconOpenWindow",type:"open",ariaLabel:(_=(d=globalThis.siyuan)==null?void 0:d.languages)==null?void 0:_.useBrowserView,tooltipsDirection:Tt.sw,onClick(S,L,k){globalThis.open(r)}},{icon:"#iconFullscreen",type:"fullscreen",ariaLabel:(b=(p=globalThis.siyuan)==null?void 0:p.languages)==null?void 0:b.fullscreen,tooltipsDirection:Tt.sw,onClick(S,L,k){var w;const C=(k.active&&li(k.active))??o;i(2,o=!C),(w=k.active)==null||w.set(o)}}];function f(S){const L=[],k=[],C=S.origin===location.origin;L.push(`${S.protocol}//`),k.push({type:"item",get icon(){switch(S.protocol){case"https:":case"ftps:":return"#iconLock";case"http:":case"ftp:":return"#iconUnlock";default:return"#iconHelp"}},text:`${S.protocol}//`,textTitle:L.join(""),textEllipsis:!1},{type:"arrow"}),L.push(S.host),k.push({type:"item",get icon(){return C?"#iconSiYuan":"#iconLanguage"},text:S.host,textTitle:L.join(""),textEllipsis:!1,active:!0}),S.pathname.split("/").forEach((w,E)=>{w&&(L.push(`/${w}`),k.push({type:"arrow",icon:"#icon-keepass-slash"},{type:"item",icon:E===1&&C?`#${K1(w)}`:void 0,text:w,textTitle:L.join(""),textEllipsis:!1}))}),S.search&&(L.push(S.search),k.push({type:"arrow"},{type:"item",text:S.search,textTitle:L.join(""),textEllipsis:!1,active:!1})),S.hash&&(L.push(S.hash),k.push({type:"arrow"},{type:"item",text:S.hash,textTitle:L.join(""),textEllipsis:!1,active:!1})),i(3,a=k)}function u(S){l=S.detail.iframe}function m(S){l=void 0}return e.$$set=S=>{"src"in S&&i(0,r=S.src),"title"in S&&i(1,n=S.title)},e.$$.update=()=>{e.$$.dirty&1&&i(7,s=N1(r)),e.$$.dirty&128&&f(s)},[r,n,o,a,c,u,m,s]}class Q1 extends Be{constructor(t){super(),Oe(this,t,X1,$1,Re,{src:0,title:1})}}const ed=e=>({focus:e&1}),To=e=>({focus:e[0]});function Ro(e,t,i){const s=e.slice();return s[13]=t[i],s}function Ao(e){let t,i,s,r,n,l,o;return i=new Ct({props:{icon:"#iconSearch",className:"b3-form__icon-icon"}}),{c(){t=re("div"),te(i.$$.fragment),s=ue(),r=re("input"),x(r,"placeholder",e[4]),x(r,"class","b3-text-field fn__block b3-form__icon-input"),x(t,"class","b3-form__icon")},m(a,c){J(a,t,c),Q(i,t,null),ae(t,s),ae(t,r),ht(r,e[1]),n=!0,l||(o=[ve(r,"input",e[9]),ve(r,"change",e[5])],l=!0)},p(a,c){(!n||c&16)&&x(r,"placeholder",a[4]),c&2&&r.value!==a[1]&&ht(r,a[1])},i(a){n||(j(i.$$.fragment,a),n=!0)},o(a){U(i.$$.fragment,a),n=!1},d(a){a&&$(t),ee(i),l=!1,Qe(o)}}}function Oo(e,t){let i,s,r,n,l=t[13].text+"",o,a,c,f,u;s=new Ct({props:{icon:t[13].icon,className:"b3-list-item__graphic"}});function m(){return t[10](t[13])}function v(){return t[11](t[13])}return{key:e,first:null,c(){i=re("li"),te(s.$$.fragment),r=ue(),n=re("span"),o=ue(),x(n,"class","b3-list-item__text svelte-15drd7h"),x(i,"role","button"),x(i,"data-name",a=t[13].name),x(i,"class","b3-list-item"),W(i,"b3-list-item--focus",t[13].key===t[0]),this.first=i},m(y,g){J(y,i,g),Q(s,i,null),ae(i,r),ae(i,n),n.innerHTML=l,ae(i,o),c=!0,f||(u=[ve(i,"click",m),ve(i,"keyup",v)],f=!0)},p(y,g){t=y;const h={};g&4&&(h.icon=t[13].icon),s.$set(h),(!c||g&4)&&l!==(l=t[13].text+"")&&(n.innerHTML=l),(!c||g&4&&a!==(a=t[13].name))&&x(i,"data-name",a),(!c||g&5)&&W(i,"b3-list-item--focus",t[13].key===t[0])},i(y){c||(j(s.$$.fragment,y),c=!0)},o(y){U(s.$$.fragment,y),c=!1},d(y){y&&$(i),ee(s),f=!1,Qe(u)}}}function td(e){let t;return{c(){t=ct("Container")},m(i,s){J(i,t,s)},d(i){i&&$(t)}}}function id(e){let t,i,s,r=[],n=new Map,l,o,a,c=e[3]&&Ao(e),f=ut(e[2]);const u=g=>g[13].key;for(let g=0;g<f.length;g+=1){let h=Ro(e,f,g),d=u(h);n.set(d,r[g]=Oo(d,h))}const m=e[8].default,v=Fe(m,e,e[7],To),y=v||td();return{c(){t=re("div"),i=re("ul"),c&&c.c(),s=ue();for(let g=0;g<r.length;g+=1)r[g].c();l=ue(),o=re("div"),y&&y.c(),x(i,"class","b3-tab-bar b3-list b3-list--background"),x(o,"class","config__tab-wrap"),x(t,"class","fn__flex-1 fn__flex config__panel")},m(g,h){J(g,t,h),ae(t,i),c&&c.m(i,null),ae(i,s);for(let d=0;d<r.length;d+=1)r[d]&&r[d].m(i,null);ae(t,l),ae(t,o),y&&y.m(o,null),a=!0},p(g,[h]){g[3]?c?(c.p(g,h),h&8&&j(c,1)):(c=Ao(g),c.c(),j(c,1),c.m(i,s)):c&&(ze(),U(c,1,1,()=>{c=null}),qe()),h&69&&(f=ut(g[2]),ze(),r=di(r,h,u,1,g,f,n,i,Si,Oo,null,Ro),qe()),v&&v.p&&(!a||h&129)&&We(v,m,g,g[7],a?Ue(m,g[7],h,ed):Ye(g[7]),To)},i(g){if(!a){j(c);for(let h=0;h<f.length;h+=1)j(r[h]);j(y,g),a=!0}},o(g){U(c);for(let h=0;h<r.length;h+=1)U(r[h]);U(y,g),a=!1},d(g){g&&$(t),c&&c.d();for(let h=0;h<r.length;h+=1)r[h].d();y&&y.d(g)}}}function sd(e,t,i){let{$$slots:s={},$$scope:r}=t,{panels:n}=t,{focus:l}=t,{searchEnable:o=!1}=t,{searchPlaceholder:a=""}=t,{searchValue:c=""}=t;const f=ei();function u(){f("search-changed",{value:c})}function m(h){f("changed",{key:h}),i(0,l=h)}function v(){c=this.value,i(1,c)}const y=h=>m(h.key),g=h=>m(h.key);return e.$$set=h=>{"panels"in h&&i(2,n=h.panels),"focus"in h&&i(0,l=h.focus),"searchEnable"in h&&i(3,o=h.searchEnable),"searchPlaceholder"in h&&i(4,a=h.searchPlaceholder),"searchValue"in h&&i(1,c=h.searchValue),"$$scope"in h&&i(7,r=h.$$scope)},[l,c,n,o,a,u,m,r,s,v,y,g]}class rd extends Be{constructor(t){super(),Oe(this,t,sd,id,Re,{panels:2,focus:0,searchEnable:3,searchPlaceholder:4,searchValue:1})}}function nd(e){let t,i;const s=e[4].default,r=Fe(s,e,e[3],null);return{c(){t=re("div"),r&&r.c(),x(t,"data-name",e[2]),x(t,"class","config__tab-container"),W(t,"fn__none",!e[0]),W(t,"config__tab-container--top",e[1])},m(n,l){J(n,t,l),r&&r.m(t,null),i=!0},p(n,[l]){r&&r.p&&(!i||l&8)&&We(r,s,n,n[3],i?Ue(s,n[3],l,null):Ye(n[3]),null),(!i||l&4)&&x(t,"data-name",n[2]),(!i||l&1)&&W(t,"fn__none",!n[0]),(!i||l&2)&&W(t,"config__tab-container--top",n[1])},i(n){i||(j(r,n),i=!0)},o(n){U(r,n),i=!1},d(n){n&&$(t),r&&r.d(n)}}}function od(e,t,i){let{$$slots:s={},$$scope:r}=t,{display:n=!0}=t,{top:l=!0}=t,{name:o=""}=t;return e.$$set=a=>{"display"in a&&i(0,n=a.display),"top"in a&&i(1,l=a.top),"name"in a&&i(2,o=a.name),"$$scope"in a&&i(3,r=a.$$scope)},[n,l,o,r,s]}class Hs extends Be{constructor(t){super(),Oe(this,t,od,nd,Re,{display:0,top:1,name:2})}}const ad=e=>({}),Bo=e=>({}),ld=e=>({}),Ho=e=>({});function Po(e){let t,i;const s=e[7].icon,r=Fe(s,e,e[6],Ho);return{c(){t=re("span"),r&&r.c(),x(t,"class","item__icon")},m(n,l){J(n,t,l),r&&r.m(t,null),i=!0},p(n,l){r&&r.p&&(!i||l&64)&&We(r,s,n,n[6],i?Ue(s,n[6],l,ld):Ye(n[6]),Ho)},i(n){i||(j(r,n),i=!0)},o(n){U(r,n),i=!1},d(n){n&&$(t),r&&r.d(n)}}}function cd(e){let t;return{c(){t=ct("text")},m(i,s){J(i,t,s)},d(i){i&&$(t)}}}function hd(e){let t,i,s,r,n,l,o,a,c,f,u=e[0]&&e[4].icon&&Po(e);const m=e[7].text,v=Fe(m,e,e[6],Bo),y=v||cd();return{c(){t=re("div"),i=re("span"),s=ue(),u&&u.c(),r=ue(),n=re("span"),y&&y.c(),l=ue(),o=re("span"),x(i,"class","fn__flex-1"),x(n,"class","item__text"),x(o,"class","fn__flex-1"),x(t,"role","button"),x(t,"data-type",e[1]),x(t,"class","item item--full"),W(t,"item--focus",e[2])},m(g,h){J(g,t,h),ae(t,i),ae(t,s),u&&u.m(t,null),ae(t,r),ae(t,n),y&&y.m(n,null),ae(t,l),ae(t,o),a=!0,c||(f=ve(t,"click",e[3]),c=!0)},p(g,[h]){g[0]&&g[4].icon?u?(u.p(g,h),h&17&&j(u,1)):(u=Po(g),u.c(),j(u,1),u.m(t,r)):u&&(ze(),U(u,1,1,()=>{u=null}),qe()),v&&v.p&&(!a||h&64)&&We(v,m,g,g[6],a?Ue(m,g[6],h,ad):Ye(g[6]),Bo),(!a||h&2)&&x(t,"data-type",g[1]),(!a||h&4)&&W(t,"item--focus",g[2])},i(g){a||(j(u),j(y,g),a=!0)},o(g){U(u),U(y,g),a=!1},d(g){g&&$(t),u&&u.d(),y&&y.d(g),c=!1,f()}}}function ud(e,t,i){let{$$slots:s={},$$scope:r}=t;const n=Hf(s);let{key:l}=t,{icon:o}=t,{name:a=""}=t,{focus:c=!1}=t;const f=ei();function u(){c||f("changed",{key:l})}return e.$$set=m=>{"key"in m&&i(5,l=m.key),"icon"in m&&i(0,o=m.icon),"name"in m&&i(1,a=m.name),"focus"in m&&i(2,c=m.focus),"$$scope"in m&&i(6,r=m.$$scope)},[o,a,c,u,n,l,r,s]}class fd extends Be{constructor(t){super(),Oe(this,t,ud,hd,Re,{key:5,icon:0,name:1,focus:2})}}const dd=e=>({focus:e&1}),xo=e=>({focus:e[0]});function Io(e,t,i){const s=e.slice();return s[5]=t[i],s}function _d(e){let t,i=e[5].icon+"",s;return{c(){t=new Ui(!1),s=$e(),t.a=s},m(r,n){t.m(i,r,n),J(r,s,n)},p(r,n){n&2&&i!==(i=r[5].icon+"")&&t.p(i)},i:Ae,o:Ae,d(r){r&&($(s),t.d())}}}function pd(e){let t,i;return t=new Ct({props:{icon:e[5].icon}}),{c(){te(t.$$.fragment)},m(s,r){Q(t,s,r),i=!0},p(s,r){const n={};r&2&&(n.icon=s[5].icon),t.$set(n)},i(s){i||(j(t.$$.fragment,s),i=!0)},o(s){U(t.$$.fragment,s),i=!1},d(s){ee(t,s)}}}function md(e){let t,i,s,r,n,l;const o=[pd,_d],a=[];function c(f,u){var m;return u&2&&(i=null),i==null&&(i=!!((m=f[5].icon)!=null&&m.startsWith("#"))),i?0:f[5].icon?1:-1}return~(s=c(e,-1))&&(r=a[s]=o[s](e)),{c(){t=re("span"),r&&r.c(),n=ue(),x(t,"slot","icon")},m(f,u){J(f,t,u),~s&&a[s].m(t,null),ae(t,n),l=!0},p(f,u){let m=s;s=c(f,u),s===m?~s&&a[s].p(f,u):(r&&(ze(),U(a[m],1,1,()=>{a[m]=null}),qe()),~s?(r=a[s],r?r.p(f,u):(r=a[s]=o[s](f),r.c()),j(r,1),r.m(t,n)):r=null)},i(f){l||(j(r),l=!0)},o(f){U(r),l=!1},d(f){f&&$(t),~s&&a[s].d()}}}function gd(e){let t,i,s=e[5].text+"",r;return{c(){t=re("span"),i=new Ui(!1),r=ue(),i.a=r,x(t,"slot","text")},m(n,l){J(n,t,l),i.m(s,t),ae(t,r)},p(n,l){l&2&&s!==(s=n[5].text+"")&&i.p(s)},d(n){n&&$(t)}}}function No(e,t){let i,s,r;return s=new fd({props:{key:t[5].key,icon:!!t[5].icon,name:t[5].name,focus:t[5].key===t[0],$$slots:{text:[gd],icon:[md]},$$scope:{ctx:t}}}),s.$on("changed",t[2]),{key:e,first:null,c(){i=$e(),te(s.$$.fragment),this.first=i},m(n,l){J(n,i,l),Q(s,n,l),r=!0},p(n,l){t=n;const o={};l&2&&(o.key=t[5].key),l&2&&(o.icon=!!t[5].icon),l&2&&(o.name=t[5].name),l&3&&(o.focus=t[5].key===t[0]),l&18&&(o.$$scope={dirty:l,ctx:t}),s.$set(o)},i(n){r||(j(s.$$.fragment,n),r=!0)},o(n){U(s.$$.fragment,n),r=!1},d(n){n&&$(i),ee(s,n)}}}function vd(e){let t;return{c(){t=ct("Container")},m(i,s){J(i,t,s)},d(i){i&&$(t)}}}function bd(e){let t,i,s=[],r=new Map,n,l,o,a=ut(e[1]);const c=v=>v[5].key;for(let v=0;v<a.length;v+=1){let y=Io(e,a,v),g=c(y);r.set(g,s[v]=No(g,y))}const f=e[3].default,u=Fe(f,e,e[4],xo),m=u||vd();return{c(){t=re("div"),i=re("div");for(let v=0;v<s.length;v+=1)s[v].c();n=ue(),l=re("div"),m&&m.c(),x(i,"class","layout-tab-bar fn__flex"),x(l,"class","fn__flex-1"),x(t,"class","fn__flex-column"),pt(t,"height","100%")},m(v,y){J(v,t,y),ae(t,i);for(let g=0;g<s.length;g+=1)s[g]&&s[g].m(i,null);ae(t,n),ae(t,l),m&&m.m(l,null),o=!0},p(v,[y]){y&7&&(a=ut(v[1]),ze(),s=di(s,y,c,1,v,a,r,i,Si,No,null,Io),qe()),u&&u.p&&(!o||y&17)&&We(u,f,v,v[4],o?Ue(f,v[4],y,dd):Ye(v[4]),xo)},i(v){if(!o){for(let y=0;y<a.length;y+=1)j(s[y]);j(m,v),o=!0}},o(v){for(let y=0;y<s.length;y+=1)U(s[y]);U(m,v),o=!1},d(v){v&&$(t);for(let y=0;y<s.length;y+=1)s[y].d();m&&m.d(v)}}}function yd(e,t,i){let{$$slots:s={},$$scope:r}=t,{tabs:n}=t,{focus:l}=t;function o(a){i(0,l=a.detail.key)}return e.$$set=a=>{"tabs"in a&&i(1,n=a.tabs),"focus"in a&&i(0,l=a.focus),"$$scope"in a&&i(4,r=a.$$scope)},[l,n,o,s,r]}class Cd extends Be{constructor(t){super(),Oe(this,t,yd,bd,Re,{tabs:1,focus:0})}}const Sd=e=>({}),Vo=e=>({}),wd=e=>({}),jo=e=>({}),kd=e=>({}),Fo=e=>({}),Ld=e=>({}),Uo=e=>({});function Ed(e){let t,i;return{c(){t=new Ui(!1),i=$e(),t.a=i},m(s,r){t.m(e[0],s,r),J(s,i,r)},p(s,r){r&1&&t.p(s[0])},d(s){s&&($(i),t.d())}}}function Md(e){let t,i;return{c(){t=new Ui(!1),i=$e(),t.a=i},m(s,r){t.m(e[1],s,r),J(s,i,r)},p(s,r){r&2&&t.p(s[1])},d(s){s&&($(i),t.d())}}}function Wo(e){let t,i,s;const r=e[4].input,n=Fe(r,e,e[3],jo);return{c(){t=re("div"),i=ue(),n&&n.c(),x(t,"class","fn__hr")},m(l,o){J(l,t,o),J(l,i,o),n&&n.m(l,o),s=!0},p(l,o){n&&n.p&&(!s||o&8)&&We(n,r,l,l[3],s?Ue(r,l[3],o,wd):Ye(l[3]),jo)},i(l){s||(j(n,l),s=!0)},o(l){U(n,l),s=!1},d(l){l&&($(t),$(i)),n&&n.d(l)}}}function Yo(e){let t,i,s;const r=e[4].input,n=Fe(r,e,e[3],Vo);return{c(){t=re("span"),i=ue(),n&&n.c(),x(t,"class","fn__space")},m(l,o){J(l,t,o),J(l,i,o),n&&n.m(l,o),s=!0},p(l,o){n&&n.p&&(!s||o&8)&&We(n,r,l,l[3],s?Ue(r,l[3],o,Sd):Ye(l[3]),Vo)},i(l){s||(j(n,l),s=!0)},o(l){U(n,l),s=!1},d(l){l&&($(t),$(i)),n&&n.d(l)}}}function Dd(e){let t,i,s,r,n,l,o;const a=e[4].title,c=Fe(a,e,e[3],Uo),f=c||Ed(e),u=e[4].text,m=Fe(u,e,e[3],Fo),v=m||Md(e);let y=e[2]&&Wo(e),g=!e[2]&&Yo(e);return{c(){t=re("label"),i=re("div"),f&&f.c(),s=ue(),r=re("div"),v&&v.c(),n=ue(),y&&y.c(),l=ue(),g&&g.c(),x(r,"class","b3-label__text"),x(i,"class","fn__flex-1 svelte-2m76cy"),W(i,"visible",e[2]),x(t,"class","fn__flex b3-label")},m(h,d){J(h,t,d),ae(t,i),f&&f.m(i,null),ae(i,s),ae(i,r),v&&v.m(r,null),ae(i,n),y&&y.m(i,null),ae(t,l),g&&g.m(t,null),o=!0},p(h,[d]){c?c.p&&(!o||d&8)&&We(c,a,h,h[3],o?Ue(a,h[3],d,Ld):Ye(h[3]),Uo):f&&f.p&&(!o||d&1)&&f.p(h,o?d:-1),m?m.p&&(!o||d&8)&&We(m,u,h,h[3],o?Ue(u,h[3],d,kd):Ye(h[3]),Fo):v&&v.p&&(!o||d&2)&&v.p(h,o?d:-1),h[2]?y?(y.p(h,d),d&4&&j(y,1)):(y=Wo(h),y.c(),j(y,1),y.m(i,null)):y&&(ze(),U(y,1,1,()=>{y=null}),qe()),(!o||d&4)&&W(i,"visible",h[2]),h[2]?g&&(ze(),U(g,1,1,()=>{g=null}),qe()):g?(g.p(h,d),d&4&&j(g,1)):(g=Yo(h),g.c(),j(g,1),g.m(t,null))},i(h){o||(j(f,h),j(v,h),j(y),j(g),o=!0)},o(h){U(f,h),U(v,h),U(y),U(g),o=!1},d(h){h&&$(t),f&&f.d(h),v&&v.d(h),y&&y.d(),g&&g.d()}}}function Td(e,t,i){let{$$slots:s={},$$scope:r}=t,{title:n=""}=t,{text:l=""}=t,{block:o=!1}=t;return e.$$set=a=>{"title"in a&&i(0,n=a.title),"text"in a&&i(1,l=a.text),"block"in a&&i(2,o=a.block),"$$scope"in a&&i(3,r=a.$$scope)},[n,l,o,r,s]}class je extends Be{constructor(t){super(),Oe(this,t,Td,Dd,Re,{title:0,text:1,block:2})}}var Te=(e=>(e[e.checkbox=0]="checkbox",e[e.text=1]="text",e[e.number=2]="number",e[e.slider=3]="slider",e[e.button=4]="button",e[e.select=5]="select",e[e.textarea=6]="textarea",e))(Te||{});function zo(e,t,i){const s=e.slice();return s[20]=t[i],s}function Rd(e){let t,i,s;return{c(){t=re("textarea"),t.disabled=e[2],x(t,"class","b3-text-field"),x(t,"placeholder",e[5]),W(t,"fn__block",e[3]),W(t,"fn__size200",!e[3]&&e[4]),pt(t,"height",e[8]>0?`${e[8]}px`:void 0),pt(t,"font-family",e[9]?e[9]:void 0)},m(r,n){J(r,t,n),ht(t,e[0]),i||(s=[ve(t,"input",e[18]),ve(t,"change",e[11])],i=!0)},p(r,n){n&4&&(t.disabled=r[2]),n&32&&x(t,"placeholder",r[5]),n&65&&ht(t,r[0]),n&8&&W(t,"fn__block",r[3]),n&24&&W(t,"fn__size200",!r[3]&&r[4]),n&256&&pt(t,"height",r[8]>0?`${r[8]}px`:void 0),n&512&&pt(t,"font-family",r[9]?r[9]:void 0)},d(r){r&&$(t),i=!1,Qe(s)}}}function Ad(e){let t,i=[],s=new Map,r,n,l=ut(e[6]);const o=a=>a[20].key;for(let a=0;a<l.length;a+=1){let c=zo(e,l,a),f=o(c);s.set(f,i[a]=qo(f,c))}return{c(){t=re("select");for(let a=0;a<i.length;a+=1)i[a].c();t.disabled=e[2],x(t,"class","b3-select"),e[0]===void 0&&js(()=>e[17].call(t)),W(t,"fn__block",e[3]),W(t,"fn__size200",!e[3]&&e[4]),W(t,"fn__flex-center",!e[3])},m(a,c){J(a,t,c);for(let f=0;f<i.length;f+=1)i[f]&&i[f].m(t,null);ho(t,e[0],!0),r||(n=[ve(t,"change",e[17]),ve(t,"change",e[11])],r=!0)},p(a,c){c&64&&(l=ut(a[6]),i=di(i,c,o,1,a,l,s,t,Kf,qo,null,zo)),c&4&&(t.disabled=a[2]),c&65&&ho(t,a[0]),c&8&&W(t,"fn__block",a[3]),c&24&&W(t,"fn__size200",!a[3]&&a[4]),c&8&&W(t,"fn__flex-center",!a[3])},d(a){a&&$(t);for(let c=0;c<i.length;c+=1)i[c].d();r=!1,Qe(n)}}}function Od(e){let t,i,s,r;return{c(){t=re("button"),i=ct(e[0]),t.disabled=e[2],x(t,"class","b3-button b3-button--outline"),W(t,"fn__block",e[3]),W(t,"fn__size200",!e[3]&&e[4]),W(t,"fn__flex-center",!e[3])},m(n,l){J(n,t,l),ae(t,i),s||(r=ve(t,"click",e[10]),s=!0)},p(n,l){l&1&&At(i,n[0]),l&4&&(t.disabled=n[2]),l&8&&W(t,"fn__block",n[3]),l&24&&W(t,"fn__size200",!n[3]&&n[4]),l&8&&W(t,"fn__flex-center",!n[3])},d(n){n&&$(t),s=!1,r()}}}function Bd(e){let t,i,s,r,n,l;return{c(){t=re("input"),t.disabled=e[2],x(t,"class","b3-slider svelte-edt8og"),x(t,"type","range"),x(t,"min",i=e[7].min),x(t,"max",s=e[7].max),x(t,"step",r=e[7].step),W(t,"fn__block",e[3]),W(t,"fn__size200",!e[3]&&e[4])},m(o,a){J(o,t,a),ht(t,e[0]),n||(l=[ve(t,"change",e[16]),ve(t,"input",e[16]),ve(t,"change",e[11])],n=!0)},p(o,a){a&4&&(t.disabled=o[2]),a&128&&i!==(i=o[7].min)&&x(t,"min",i),a&128&&s!==(s=o[7].max)&&x(t,"max",s),a&128&&r!==(r=o[7].step)&&x(t,"step",r),a&65&&ht(t,o[0]),a&8&&W(t,"fn__block",o[3]),a&24&&W(t,"fn__size200",!o[3]&&o[4])},d(o){o&&$(t),n=!1,Qe(l)}}}function Hd(e){let t,i,s,r,n,l;return{c(){t=re("input"),t.disabled=e[2],x(t,"class","b3-text-field"),x(t,"type","number"),x(t,"placeholder",e[5]),x(t,"min",i=e[7].min),x(t,"max",s=e[7].max),x(t,"step",r=e[7].step),W(t,"fn__block",e[3]),W(t,"fn__size200",!e[3]&&e[4]),W(t,"fn__flex-center",!e[3])},m(o,a){J(o,t,a),ht(t,e[0]),n||(l=[ve(t,"input",e[15]),ve(t,"change",e[11])],n=!0)},p(o,a){a&4&&(t.disabled=o[2]),a&32&&x(t,"placeholder",o[5]),a&128&&i!==(i=o[7].min)&&x(t,"min",i),a&128&&s!==(s=o[7].max)&&x(t,"max",s),a&128&&r!==(r=o[7].step)&&x(t,"step",r),a&65&&Xr(t.value)!==o[0]&&ht(t,o[0]),a&8&&W(t,"fn__block",o[3]),a&24&&W(t,"fn__size200",!o[3]&&o[4]),a&8&&W(t,"fn__flex-center",!o[3])},d(o){o&&$(t),n=!1,Qe(l)}}}function Pd(e){let t,i,s;return{c(){t=re("input"),t.disabled=e[2],x(t,"class","b3-text-field"),x(t,"placeholder",e[5]),W(t,"fn__block",e[3]),W(t,"fn__size200",!e[3]&&e[4]),W(t,"fn__flex-center",!e[3])},m(r,n){J(r,t,n),ht(t,e[0]),i||(s=[ve(t,"input",e[14]),ve(t,"change",e[11])],i=!0)},p(r,n){n&4&&(t.disabled=r[2]),n&32&&x(t,"placeholder",r[5]),n&65&&t.value!==r[0]&&ht(t,r[0]),n&8&&W(t,"fn__block",r[3]),n&24&&W(t,"fn__size200",!r[3]&&r[4]),n&8&&W(t,"fn__flex-center",!r[3])},d(r){r&&$(t),i=!1,Qe(s)}}}function xd(e){let t,i,s;return{c(){t=re("input"),t.disabled=e[2],x(t,"class","b3-switch svelte-edt8og"),x(t,"type","checkbox"),W(t,"fn__block",e[3]),W(t,"fn__flex-center",!e[3])},m(r,n){J(r,t,n),t.checked=e[0],i||(s=[ve(t,"change",e[13]),ve(t,"change",e[11])],i=!0)},p(r,n){n&4&&(t.disabled=r[2]),n&65&&(t.checked=r[0]),n&8&&W(t,"fn__block",r[3]),n&8&&W(t,"fn__flex-center",!r[3])},d(r){r&&$(t),i=!1,Qe(s)}}}function qo(e,t){let i,s=t[20].text+"",r,n;return{key:e,first:null,c(){i=re("option"),r=ct(s),i.__value=n=t[20].key,ht(i,i.__value),this.first=i},m(l,o){J(l,i,o),ae(i,r)},p(l,o){t=l,o&64&&s!==(s=t[20].text+"")&&At(r,s),o&64&&n!==(n=t[20].key)&&(i.__value=n,ht(i,i.__value))},d(l){l&&$(i)}}}function Id(e){let t;function i(n,l){if(n[1]===Te.checkbox)return xd;if(n[1]===Te.text)return Pd;if(n[1]===Te.number)return Hd;if(n[1]===Te.slider)return Bd;if(n[1]===Te.button)return Od;if(n[1]===Te.select)return Ad;if(n[1]===Te.textarea)return Rd}let s=i(e),r=s&&s(e);return{c(){r&&r.c(),t=$e()},m(n,l){r&&r.m(n,l),J(n,t,l)},p(n,[l]){s===(s=i(n))&&r?r.p(n,l):(r&&r.d(1),r=s&&s(n),r&&(r.c(),r.m(t.parentNode,t)))},i:Ae,o:Ae,d(n){n&&$(t),r&&r.d(n)}}}function Nd(e,t,i){let{type:s}=t,{settingKey:r}=t,{settingValue:n}=t,{disabled:l=!1}=t,{block:o=!1}=t,{normal:a=!0}=t,{placeholder:c=""}=t,{options:f=[]}=t,{limits:u={min:0,max:100,step:1}}=t,{height:m=0}=t,{fontFamily:v=""}=t;const y=ei();function g(k){y("clicked",{event:k})}function h(k){y("changed",{key:r,value:n,event:k})}function d(){n=this.checked,i(0,n),i(6,f)}function _(){n=this.value,i(0,n),i(6,f)}function p(){n=Xr(this.value),i(0,n),i(6,f)}function b(){n=Xr(this.value),i(0,n),i(6,f)}function S(){n=jf(this),i(0,n),i(6,f)}function L(){n=this.value,i(0,n),i(6,f)}return e.$$set=k=>{"type"in k&&i(1,s=k.type),"settingKey"in k&&i(12,r=k.settingKey),"settingValue"in k&&i(0,n=k.settingValue),"disabled"in k&&i(2,l=k.disabled),"block"in k&&i(3,o=k.block),"normal"in k&&i(4,a=k.normal),"placeholder"in k&&i(5,c=k.placeholder),"options"in k&&i(6,f=k.options),"limits"in k&&i(7,u=k.limits),"height"in k&&i(8,m=k.height),"fontFamily"in k&&i(9,v=k.fontFamily)},[n,s,l,o,a,c,f,u,m,v,g,h,r,d,_,p,b,S,L]}class Ze extends Be{constructor(t){super(),Oe(this,t,Nd,Id,Re,{type:1,settingKey:12,settingValue:0,disabled:2,block:3,normal:4,placeholder:5,options:6,limits:7,height:8,fontFamily:9})}}const sr={baseUrl:"http://localhost:8888/",appUrl:"/lab",wsUrl:"",token:""};function Vd(e){return e=e||sr.baseUrl,`ws${e.slice(4)}`}function jd(e){let t,i;return t=new Ze({props:{slot:"input",type:Te.button,settingKey:"Reset",settingValue:e[2].settings.generalSettings.reset.text}}),t.$on("clicked",e[4]),{c(){te(t.$$.fragment)},m(s,r){Q(t,s,r),i=!0},p:Ae,i(s){i||(j(t.$$.fragment,s),i=!0)},o(s){U(t.$$.fragment,s),i=!1},d(s){ee(t,s)}}}function Fd(e){let t,i;return t=new je({props:{title:e[2].settings.generalSettings.reset.title,text:e[2].settings.generalSettings.reset.description,$$slots:{input:[jd]},$$scope:{ctx:e}}}),{c(){te(t.$$.fragment)},m(s,r){Q(t,s,r),i=!0},p(s,r){const n={};r&268435456&&(n.$$scope={dirty:r,ctx:s}),t.$set(n)},i(s){i||(j(t.$$.fragment,s),i=!0)},o(s){U(t.$$.fragment,s),i=!1},d(s){ee(t,s)}}}function Ud(e){let t,i;return t=new Ze({props:{slot:"input",type:Te.checkbox,settingKey:"enable",settingValue:e[0].jupyter.server.enable}}),t.$on("changed",e[8]),{c(){te(t.$$.fragment)},m(s,r){Q(t,s,r),i=!0},p(s,r){const n={};r&1&&(n.settingValue=s[0].jupyter.server.enable),t.$set(n)},i(s){i||(j(t.$$.fragment,s),i=!0)},o(s){U(t.$$.fragment,s),i=!1},d(s){ee(t,s)}}}function Wd(e){let t,i;return t=new Ze({props:{slot:"input",type:Te.number,settingKey:"delay",settingValue:e[0].jupyter.edit.delay,limits:{min:0,max:1/0,step:25}}}),t.$on("changed",e[9]),{c(){te(t.$$.fragment)},m(s,r){Q(t,s,r),i=!0},p(s,r){const n={};r&1&&(n.settingValue=s[0].jupyter.edit.delay),t.$set(n)},i(s){i||(j(t.$$.fragment,s),i=!0)},o(s){U(t.$$.fragment,s),i=!1},d(s){ee(t,s)}}}function Yd(e){let t,i;return t=new Ze({props:{slot:"input",type:Te.text,settingKey:"baseUrl",settingValue:e[0].jupyter.server.settings.baseUrl,placeholder:sr.baseUrl,block:!0}}),t.$on("changed",e[10]),{c(){te(t.$$.fragment)},m(s,r){Q(t,s,r),i=!0},p(s,r){const n={};r&1&&(n.settingValue=s[0].jupyter.server.settings.baseUrl),t.$set(n)},i(s){i||(j(t.$$.fragment,s),i=!0)},o(s){U(t.$$.fragment,s),i=!1},d(s){ee(t,s)}}}function zd(e){let t,i;return t=new Ze({props:{slot:"input",type:Te.text,settingKey:"appUrl",settingValue:e[0].jupyter.server.settings.appUrl,placeholder:sr.appUrl,block:!0}}),t.$on("changed",e[11]),{c(){te(t.$$.fragment)},m(s,r){Q(t,s,r),i=!0},p(s,r){const n={};r&1&&(n.settingValue=s[0].jupyter.server.settings.appUrl),t.$set(n)},i(s){i||(j(t.$$.fragment,s),i=!0)},o(s){U(t.$$.fragment,s),i=!1},d(s){ee(t,s)}}}function qd(e){let t,i;return t=new Ze({props:{slot:"input",type:Te.text,settingKey:"wsUrl",settingValue:e[0].jupyter.server.settings.wsUrl,placeholder:e[1],block:!0}}),t.$on("changed",e[12]),{c(){te(t.$$.fragment)},m(s,r){Q(t,s,r),i=!0},p(s,r){const n={};r&1&&(n.settingValue=s[0].jupyter.server.settings.wsUrl),r&2&&(n.placeholder=s[1]),t.$set(n)},i(s){i||(j(t.$$.fragment,s),i=!0)},o(s){U(t.$$.fragment,s),i=!1},d(s){ee(t,s)}}}function Zd(e){let t,i;return t=new Ze({props:{slot:"input",type:Te.text,settingKey:"token",settingValue:e[0].jupyter.server.settings.token,block:!0}}),t.$on("changed",e[13]),{c(){te(t.$$.fragment)},m(s,r){Q(t,s,r),i=!0},p(s,r){const n={};r&1&&(n.settingValue=s[0].jupyter.server.settings.token),t.$set(n)},i(s){i||(j(t.$$.fragment,s),i=!0)},o(s){U(t.$$.fragment,s),i=!1},d(s){ee(t,s)}}}function Kd(e){let t,i;return t=new Ze({props:{slot:"input",type:Te.checkbox,settingKey:"goto",settingValue:e[0].jupyter.execute.goto}}),t.$on("changed",e[14]),{c(){te(t.$$.fragment)},m(s,r){Q(t,s,r),i=!0},p(s,r){const n={};r&1&&(n.settingValue=s[0].jupyter.execute.goto),t.$set(n)},i(s){i||(j(t.$$.fragment,s),i=!0)},o(s){U(t.$$.fragment,s),i=!1},d(s){ee(t,s)}}}function Gd(e){let t,i;return t=new Ze({props:{slot:"input",type:Te.checkbox,settingKey:"input.goto",settingValue:e[0].jupyter.execute.input.goto}}),t.$on("changed",e[15]),{c(){te(t.$$.fragment)},m(s,r){Q(t,s,r),i=!0},p(s,r){const n={};r&1&&(n.settingValue=s[0].jupyter.execute.input.goto),t.$set(n)},i(s){i||(j(t.$$.fragment,s),i=!0)},o(s){U(t.$$.fragment,s),i=!1},d(s){ee(t,s)}}}function $d(e){let t,i;return t=new Ze({props:{slot:"input",type:Te.checkbox,settingKey:"content.stop_on_error",settingValue:e[0].jupyter.execute.content.stop_on_error}}),t.$on("changed",e[16]),{c(){te(t.$$.fragment)},m(s,r){Q(t,s,r),i=!0},p(s,r){const n={};r&1&&(n.settingValue=s[0].jupyter.execute.content.stop_on_error),t.$set(n)},i(s){i||(j(t.$$.fragment,s),i=!0)},o(s){U(t.$$.fragment,s),i=!1},d(s){ee(t,s)}}}function Jd(e){let t,i;return t=new Ze({props:{slot:"input",type:Te.checkbox,settingKey:"output.parser.xterm",settingValue:e[0].jupyter.execute.output.parser.xterm}}),t.$on("changed",e[17]),{c(){te(t.$$.fragment)},m(s,r){Q(t,s,r),i=!0},p(s,r){const n={};r&1&&(n.settingValue=s[0].jupyter.execute.output.parser.xterm),t.$set(n)},i(s){i||(j(t.$$.fragment,s),i=!0)},o(s){U(t.$$.fragment,s),i=!1},d(s){ee(t,s)}}}function Xd(e){let t,i;return t=new Ze({props:{slot:"input",type:Te.checkbox,settingKey:"output.parser.escaped",settingValue:e[0].jupyter.execute.output.parser.escaped}}),t.$on("changed",e[18]),{c(){te(t.$$.fragment)},m(s,r){Q(t,s,r),i=!0},p(s,r){const n={};r&1&&(n.settingValue=s[0].jupyter.execute.output.parser.escaped),t.$set(n)},i(s){i||(j(t.$$.fragment,s),i=!0)},o(s){U(t.$$.fragment,s),i=!1},d(s){ee(t,s)}}}function Qd(e){let t,i;return t=new Ze({props:{slot:"input",type:Te.checkbox,settingKey:"output.parser.cntrl",settingValue:e[0].jupyter.execute.output.parser.cntrl}}),t.$on("changed",e[19]),{c(){te(t.$$.fragment)},m(s,r){Q(t,s,r),i=!0},p(s,r){const n={};r&1&&(n.settingValue=s[0].jupyter.execute.output.parser.cntrl),t.$set(n)},i(s){i||(j(t.$$.fragment,s),i=!0)},o(s){U(t.$$.fragment,s),i=!1},d(s){ee(t,s)}}}function e0(e){let t,i;return t=new Ze({props:{slot:"input",type:Te.checkbox,settingKey:"import.parser.xterm",settingValue:e[0].jupyter.import.parser.xterm}}),t.$on("changed",e[20]),{c(){te(t.$$.fragment)},m(s,r){Q(t,s,r),i=!0},p(s,r){const n={};r&1&&(n.settingValue=s[0].jupyter.import.parser.xterm),t.$set(n)},i(s){i||(j(t.$$.fragment,s),i=!0)},o(s){U(t.$$.fragment,s),i=!1},d(s){ee(t,s)}}}function t0(e){let t,i;return t=new Ze({props:{slot:"input",type:Te.checkbox,settingKey:"import.parser.escaped",settingValue:e[0].jupyter.import.parser.escaped}}),t.$on("changed",e[21]),{c(){te(t.$$.fragment)},m(s,r){Q(t,s,r),i=!0},p(s,r){const n={};r&1&&(n.settingValue=s[0].jupyter.import.parser.escaped),t.$set(n)},i(s){i||(j(t.$$.fragment,s),i=!0)},o(s){U(t.$$.fragment,s),i=!1},d(s){ee(t,s)}}}function i0(e){let t,i;return t=new Ze({props:{slot:"input",type:Te.checkbox,settingKey:"import.parser.cntrl",settingValue:e[0].jupyter.import.parser.cntrl}}),t.$on("changed",e[22]),{c(){te(t.$$.fragment)},m(s,r){Q(t,s,r),i=!0},p(s,r){const n={};r&1&&(n.settingValue=s[0].jupyter.import.parser.cntrl),t.$set(n)},i(s){i||(j(t.$$.fragment,s),i=!0)},o(s){U(t.$$.fragment,s),i=!1},d(s){ee(t,s)}}}function s0(e){let t,i,s,r,n,l,o,a,c,f,u,m,v,y,g,h,d,_,p,b,S,L,k,C,w,E,A,O,T,P,F,z,Z,M,B;return i=new je({props:{title:e[2].settings.jupyterSettings.globalTab.enable.title,text:e[2].settings.jupyterSettings.globalTab.enable.description,$$slots:{input:[Ud]},$$scope:{ctx:e}}}),r=new je({props:{title:e[2].settings.jupyterSettings.globalTab.delay.title,text:e[2].settings.jupyterSettings.globalTab.delay.description,$$slots:{input:[Wd]},$$scope:{ctx:e}}}),o=new je({props:{title:e[2].settings.jupyterSettings.serviceTab.baseUrl.title,text:e[2].settings.jupyterSettings.serviceTab.baseUrl.description,block:!0,$$slots:{input:[Yd]},$$scope:{ctx:e}}}),c=new je({props:{title:e[2].settings.jupyterSettings.serviceTab.appUrl.title,text:e[2].settings.jupyterSettings.serviceTab.appUrl.description,block:!0,$$slots:{input:[zd]},$$scope:{ctx:e}}}),u=new je({props:{title:e[2].settings.jupyterSettings.serviceTab.wsUrl.title,text:e[2].settings.jupyterSettings.serviceTab.wsUrl.description,block:!0,$$slots:{input:[qd]},$$scope:{ctx:e}}}),v=new je({props:{title:e[2].settings.jupyterSettings.serviceTab.token.title,text:e[2].settings.jupyterSettings.serviceTab.token.description,block:!0,$$slots:{input:[Zd]},$$scope:{ctx:e}}}),h=new je({props:{title:e[2].settings.jupyterSettings.executeTab.executeGoto.title,text:e[2].settings.jupyterSettings.executeTab.executeGoto.description,$$slots:{input:[Kd]},$$scope:{ctx:e}}}),_=new je({props:{title:e[2].settings.jupyterSettings.executeTab.inputGoto.title,text:e[2].settings.jupyterSettings.executeTab.inputGoto.description,$$slots:{input:[Gd]},$$scope:{ctx:e}}}),b=new je({props:{title:e[2].settings.jupyterSettings.executeTab.stopOnError.title,text:e[2].settings.jupyterSettings.executeTab.stopOnError.description,$$slots:{input:[$d]},$$scope:{ctx:e}}}),k=new je({props:{title:e[2].settings.jupyterSettings.outputTab.xterm.title,text:e[2].settings.jupyterSettings.outputTab.xterm.description,$$slots:{input:[Jd]},$$scope:{ctx:e}}}),w=new je({props:{title:e[2].settings.jupyterSettings.outputTab.escaped.title,text:e[2].settings.jupyterSettings.outputTab.escaped.description,$$slots:{input:[Xd]},$$scope:{ctx:e}}}),A=new je({props:{title:e[2].settings.jupyterSettings.outputTab.cntrl.title,text:e[2].settings.jupyterSettings.outputTab.cntrl.description,$$slots:{input:[Qd]},$$scope:{ctx:e}}}),P=new je({props:{title:e[2].settings.jupyterSettings.importTab.xterm.title,text:e[2].settings.jupyterSettings.importTab.xterm.description,$$slots:{input:[e0]},$$scope:{ctx:e}}}),z=new je({props:{title:e[2].settings.jupyterSettings.importTab.escaped.title,text:e[2].settings.jupyterSettings.importTab.escaped.description,$$slots:{input:[t0]},$$scope:{ctx:e}}}),M=new je({props:{title:e[2].settings.jupyterSettings.importTab.cntrl.title,text:e[2].settings.jupyterSettings.importTab.cntrl.description,$$slots:{input:[i0]},$$scope:{ctx:e}}}),{c(){t=re("div"),te(i.$$.fragment),s=ue(),te(r.$$.fragment),n=ue(),l=re("div"),te(o.$$.fragment),a=ue(),te(c.$$.fragment),f=ue(),te(u.$$.fragment),m=ue(),te(v.$$.fragment),y=ue(),g=re("div"),te(h.$$.fragment),d=ue(),te(_.$$.fragment),p=ue(),te(b.$$.fragment),S=ue(),L=re("div"),te(k.$$.fragment),C=ue(),te(w.$$.fragment),E=ue(),te(A.$$.fragment),O=ue(),T=re("div"),te(P.$$.fragment),F=ue(),te(z.$$.fragment),Z=ue(),te(M.$$.fragment),x(t,"data-type",e[6].jupyter[0].name),W(t,"fn__none",e[6].jupyter[0].key!==e[27]),x(l,"data-type",e[6].jupyter[1].name),W(l,"fn__none",e[6].jupyter[1].key!==e[27]),x(g,"data-type",e[6].jupyter[2].name),W(g,"fn__none",e[6].jupyter[2].key!==e[27]),x(L,"data-type",e[6].jupyter[3].name),W(L,"fn__none",e[6].jupyter[3].key!==e[27]),x(T,"data-type",e[6].jupyter[4].name),W(T,"fn__none",e[6].jupyter[4].key!==e[27])},m(R,H){J(R,t,H),Q(i,t,null),ae(t,s),Q(r,t,null),J(R,n,H),J(R,l,H),Q(o,l,null),ae(l,a),Q(c,l,null),ae(l,f),Q(u,l,null),ae(l,m),Q(v,l,null),J(R,y,H),J(R,g,H),Q(h,g,null),ae(g,d),Q(_,g,null),ae(g,p),Q(b,g,null),J(R,S,H),J(R,L,H),Q(k,L,null),ae(L,C),Q(w,L,null),ae(L,E),Q(A,L,null),J(R,O,H),J(R,T,H),Q(P,T,null),ae(T,F),Q(z,T,null),ae(T,Z),Q(M,T,null),B=!0},p(R,H){const N={};H&268435457&&(N.$$scope={dirty:H,ctx:R}),i.$set(N);const se={};H&268435457&&(se.$$scope={dirty:H,ctx:R}),r.$set(se),(!B||H&134217792)&&W(t,"fn__none",R[6].jupyter[0].key!==R[27]);const he={};H&268435457&&(he.$$scope={dirty:H,ctx:R}),o.$set(he);const ce={};H&268435457&&(ce.$$scope={dirty:H,ctx:R}),c.$set(ce);const be={};H&268435459&&(be.$$scope={dirty:H,ctx:R}),u.$set(be);const D={};H&268435457&&(D.$$scope={dirty:H,ctx:R}),v.$set(D),(!B||H&134217792)&&W(l,"fn__none",R[6].jupyter[1].key!==R[27]);const V={};H&268435457&&(V.$$scope={dirty:H,ctx:R}),h.$set(V);const K={};H&268435457&&(K.$$scope={dirty:H,ctx:R}),_.$set(K);const q={};H&268435457&&(q.$$scope={dirty:H,ctx:R}),b.$set(q),(!B||H&134217792)&&W(g,"fn__none",R[6].jupyter[2].key!==R[27]);const _e={};H&268435457&&(_e.$$scope={dirty:H,ctx:R}),k.$set(_e);const ie={};H&268435457&&(ie.$$scope={dirty:H,ctx:R}),w.$set(ie);const we={};H&268435457&&(we.$$scope={dirty:H,ctx:R}),A.$set(we),(!B||H&134217792)&&W(L,"fn__none",R[6].jupyter[3].key!==R[27]);const Ie={};H&268435457&&(Ie.$$scope={dirty:H,ctx:R}),P.$set(Ie);const Ke={};H&268435457&&(Ke.$$scope={dirty:H,ctx:R}),z.$set(Ke);const vt={};H&268435457&&(vt.$$scope={dirty:H,ctx:R}),M.$set(vt),(!B||H&134217792)&&W(T,"fn__none",R[6].jupyter[4].key!==R[27])},i(R){B||(j(i.$$.fragment,R),j(r.$$.fragment,R),j(o.$$.fragment,R),j(c.$$.fragment,R),j(u.$$.fragment,R),j(v.$$.fragment,R),j(h.$$.fragment,R),j(_.$$.fragment,R),j(b.$$.fragment,R),j(k.$$.fragment,R),j(w.$$.fragment,R),j(A.$$.fragment,R),j(P.$$.fragment,R),j(z.$$.fragment,R),j(M.$$.fragment,R),B=!0)},o(R){U(i.$$.fragment,R),U(r.$$.fragment,R),U(o.$$.fragment,R),U(c.$$.fragment,R),U(u.$$.fragment,R),U(v.$$.fragment,R),U(h.$$.fragment,R),U(_.$$.fragment,R),U(b.$$.fragment,R),U(k.$$.fragment,R),U(w.$$.fragment,R),U(A.$$.fragment,R),U(P.$$.fragment,R),U(z.$$.fragment,R),U(M.$$.fragment,R),B=!1},d(R){R&&($(t),$(n),$(l),$(y),$(g),$(S),$(L),$(O),$(T)),ee(i),ee(r),ee(o),ee(c),ee(u),ee(v),ee(h),ee(_),ee(b),ee(k),ee(w),ee(A),ee(P),ee(z),ee(M)}}}function r0(e){let t,i;return t=new Cd({props:{focus:h0,tabs:e[6].jupyter,$$slots:{default:[s0,({focus:s})=>({27:s}),({focus:s})=>s?134217728:0]},$$scope:{ctx:e}}}),{c(){te(t.$$.fragment)},m(s,r){Q(t,s,r),i=!0},p(s,r){const n={};r&402653187&&(n.$$scope={dirty:r,ctx:s}),t.$set(n)},i(s){i||(j(t.$$.fragment,s),i=!0)},o(s){U(t.$$.fragment,s),i=!1},d(s){ee(t,s)}}}function n0(e){let t,i;return t=new Ze({props:{slot:"input",type:Te.text,settingKey:"fontFamily",settingValue:e[0].xterm.options.fontFamily,placeholder:"--b3-font-family-code"}}),t.$on("changed",e[23]),{c(){te(t.$$.fragment)},m(s,r){Q(t,s,r),i=!0},p(s,r){const n={};r&1&&(n.settingValue=s[0].xterm.options.fontFamily),t.$set(n)},i(s){i||(j(t.$$.fragment,s),i=!0)},o(s){U(t.$$.fragment,s),i=!1},d(s){ee(t,s)}}}function o0(e){let t,i;return t=new je({props:{title:e[2].settings.xtermSettings.fontFamily.title,text:e[2].settings.xtermSettings.fontFamily.description,$$slots:{input:[n0]},$$scope:{ctx:e}}}),{c(){te(t.$$.fragment)},m(s,r){Q(t,s,r),i=!0},p(s,r){const n={};r&268435457&&(n.$$scope={dirty:r,ctx:s}),t.$set(n)},i(s){i||(j(t.$$.fragment,s),i=!0)},o(s){U(t.$$.fragment,s),i=!1},d(s){ee(t,s)}}}function a0(e){let t,i,s,r,n,l;return t=new Hs({props:{display:e[5][0].key===e[26],$$slots:{default:[Fd]},$$scope:{ctx:e}}}),s=new Hs({props:{display:e[5][1].key===e[26],$$slots:{default:[r0]},$$scope:{ctx:e}}}),n=new Hs({props:{display:e[5][2].key===e[26],$$slots:{default:[o0]},$$scope:{ctx:e}}}),{c(){te(t.$$.fragment),i=ue(),te(s.$$.fragment),r=ue(),te(n.$$.fragment)},m(o,a){Q(t,o,a),J(o,i,a),Q(s,o,a),J(o,r,a),Q(n,o,a),l=!0},p(o,a){const c={};a&67108864&&(c.display=o[5][0].key===o[26]),a&268435456&&(c.$$scope={dirty:a,ctx:o}),t.$set(c);const f={};a&67108864&&(f.display=o[5][1].key===o[26]),a&268435459&&(f.$$scope={dirty:a,ctx:o}),s.$set(f);const u={};a&67108864&&(u.display=o[5][2].key===o[26]),a&268435457&&(u.$$scope={dirty:a,ctx:o}),n.$set(u)},i(o){l||(j(t.$$.fragment,o),j(s.$$.fragment,o),j(n.$$.fragment,o),l=!0)},o(o){U(t.$$.fragment,o),U(s.$$.fragment,o),U(n.$$.fragment,o),l=!1},d(o){o&&($(i),$(r)),ee(t,o),ee(s,o),ee(n,o)}}}function l0(e){let t,i;return t=new rd({props:{panels:e[5],focus:c0,$$slots:{default:[a0,({focus:s})=>({26:s}),({focus:s})=>s?67108864:0]},$$scope:{ctx:e}}}),{c(){te(t.$$.fragment)},m(s,r){Q(t,s,r),i=!0},p(s,[r]){const n={};r&335544323&&(n.$$scope={dirty:r,ctx:s}),t.$set(n)},i(s){i||(j(t.$$.fragment,s),i=!0)},o(s){U(t.$$.fragment,s),i=!1},d(s){ee(t,s)}}}let c0=0,h0=0;function u0(e,t,i){let s,{config:r}=t,{plugin:n}=t;const l=n.i18n;async function o(A=!1){await n.updateConfig(r,A)}function a(){n.siyuan.confirm(l.settings.generalSettings.reset.title,l.settings.generalSettings.reset.description,async()=>{await n.resetConfig(),globalThis.location.reload()})}const c=[{key:0,text:l.settings.generalSettings.title,name:l.settings.generalSettings.title,icon:"#iconSettings"},{key:1,text:l.settings.jupyterSettings.title,name:l.settings.jupyterSettings.title,icon:"#icon-jupyter-client"},{key:2,text:l.settings.xtermSettings.title,name:l.settings.xtermSettings.title,icon:"#icon-jupyter-client-terminal"}],f={jupyter:[{key:0,text:l.settings.jupyterSettings.globalTab.title,name:l.settings.jupyterSettings.globalTab.title,icon:"⚙"},{key:1,text:l.settings.jupyterSettings.serviceTab.title,name:l.settings.jupyterSettings.serviceTab.title,icon:"🌐"},{key:2,text:l.settings.jupyterSettings.executeTab.title,name:l.settings.jupyterSettings.executeTab.title,icon:"▶"},{key:3,text:l.settings.jupyterSettings.outputTab.title,name:l.settings.jupyterSettings.outputTab.title,icon:"🖨️"},{key:4,text:l.settings.jupyterSettings.importTab.title,name:l.settings.jupyterSettings.importTab.title,icon:"📤︎"}]},u=async A=>{i(0,r.jupyter.server.enable=A.detail.value,r),await o(!0)},m=async A=>{i(0,r.jupyter.edit.delay=A.detail.value,r),await o()},v=async A=>{i(0,r.jupyter.server.settings.baseUrl=A.detail.value,r),await o(!0)},y=async A=>{i(0,r.jupyter.server.settings.appUrl=A.detail.value,r),await o(!0)},g=async A=>{i(0,r.jupyter.server.settings.wsUrl=A.detail.value,r),await o(!0)},h=async A=>{i(0,r.jupyter.server.settings.token=A.detail.value,r),await o(!0)},d=async A=>{i(0,r.jupyter.execute.goto=A.detail.value,r),await o()},_=async A=>{i(0,r.jupyter.execute.input.goto=A.detail.value,r),await o()},p=async A=>{i(0,r.jupyter.execute.content.stop_on_error=A.detail.value,r),await o()},b=async A=>{i(0,r.jupyter.execute.output.parser.xterm=A.detail.value,r),await o()},S=async A=>{i(0,r.jupyter.execute.output.parser.escaped=A.detail.value,r),await o()},L=async A=>{i(0,r.jupyter.execute.output.parser.cntrl=A.detail.value,r),await o()},k=async A=>{i(0,r.jupyter.import.parser.xterm=A.detail.value,r),await o()},C=async A=>{i(0,r.jupyter.import.parser.escaped=A.detail.value,r),await o()},w=async A=>{i(0,r.jupyter.import.parser.cntrl=A.detail.value,r),await o()},E=async A=>{i(0,r.xterm.options.fontFamily=A.detail.value,r),await o()};return e.$$set=A=>{"config"in A&&i(0,r=A.config),"plugin"in A&&i(7,n=A.plugin)},e.$$.update=()=>{e.$$.dirty&1&&i(1,s=Vd(r.jupyter.server.settings.baseUrl))},[r,s,l,o,a,c,f,n,u,m,v,y,g,h,d,_,p,b,S,L,k,C,w,E]}class f0 extends Be{constructor(t){super(),Oe(this,t,u0,l0,Re,{config:0,plugin:7})}}function Zo(e){let t,i;return t=new Ct({props:{icon:e[0]}}),{c(){te(t.$$.fragment)},m(s,r){Q(t,s,r),i=!0},p(s,r){const n={};r&1&&(n.icon=s[0]),t.$set(n)},i(s){i||(j(t.$$.fragment,s),i=!0)},o(s){U(t.$$.fragment,s),i=!1},d(s){ee(t,s)}}}function Ko(e){let t;return{c(){t=ct(e[1])},m(i,s){J(i,t,s)},p(i,s){s&2&&At(t,i[1])},d(i){i&&$(t)}}}function d0(e){let t,i,s,r=e[0]&&Zo(e),n=e[1]&&Ko(e);return{c(){t=re("div"),r&&r.c(),i=ue(),n&&n.c(),x(t,"class","block__logo")},m(l,o){J(l,t,o),r&&r.m(t,null),ae(t,i),n&&n.m(t,null),s=!0},p(l,[o]){l[0]?r?(r.p(l,o),o&1&&j(r,1)):(r=Zo(l),r.c(),j(r,1),r.m(t,i)):r&&(ze(),U(r,1,1,()=>{r=null}),qe()),l[1]?n?n.p(l,o):(n=Ko(l),n.c(),n.m(t,null)):n&&(n.d(1),n=null)},i(l){s||(j(r),s=!0)},o(l){U(r),s=!1},d(l){l&&$(t),r&&r.d(),n&&n.d()}}}function _0(e,t,i){let{icon:s=""}=t,{title:r=""}=t;return e.$$set=n=>{"icon"in n&&i(0,s=n.icon),"title"in n&&i(1,r=n.title)},[s,r]}class p0 extends Be{constructor(t){super(),Oe(this,t,_0,d0,Re,{icon:0,title:1})}}function Go(e,t,i){const s=e.slice();return s[5]=t[i],s[7]=i,s}const m0=e=>({icon:e&4}),$o=e=>({icon:e[5]}),g0=e=>({}),Jo=e=>({});function Xo(e){let t,i;return t=new p0({props:{icon:e[0],title:e[1]}}),{c(){te(t.$$.fragment)},m(s,r){Q(t,s,r),i=!0},p(s,r){const n={};r&1&&(n.icon=s[0]),r&2&&(n.title=s[1]),t.$set(n)},i(s){i||(j(t.$$.fragment,s),i=!0)},o(s){U(t.$$.fragment,s),i=!1},d(s){ee(t,s)}}}function v0(e){let t,i,s=(e[0]||e[1])&&Xo(e);return{c(){s&&s.c(),t=$e()},m(r,n){s&&s.m(r,n),J(r,t,n),i=!0},p(r,n){r[0]||r[1]?s?(s.p(r,n),n&3&&j(s,1)):(s=Xo(r),s.c(),j(s,1),s.m(t.parentNode,t)):s&&(ze(),U(s,1,1,()=>{s=null}),qe())},i(r){i||(j(s),i=!0)},o(r){U(s),i=!1},d(r){r&&$(t),s&&s.d(r)}}}function b0(e){let t,i,s;const r=[e[5]];let n={};for(let l=0;l<r.length;l+=1)n=Qt(n,r[l]);return t=new wl({props:n}),{c(){te(t.$$.fragment),i=ue()},m(l,o){Q(t,l,o),J(l,i,o),s=!0},p(l,o){const a=o&4?_i(r,[wi(l[5])]):{};t.$set(a)},i(l){s||(j(t.$$.fragment,l),s=!0)},o(l){U(t.$$.fragment,l),s=!1},d(l){l&&$(i),ee(t,l)}}}function Qo(e,t){let i,s,r;const n=t[4].icon,l=Fe(n,t,t[3],$o),o=l||b0(t);return{key:e,first:null,c(){i=re("span"),s=ue(),o&&o.c(),x(i,"class","fn__space"),W(i,"fn__flex-1",t[7]===0),this.first=i},m(a,c){J(a,i,c),J(a,s,c),o&&o.m(a,c),r=!0},p(a,c){t=a,(!r||c&4)&&W(i,"fn__flex-1",t[7]===0),l?l.p&&(!r||c&12)&&We(l,n,t,t[3],r?Ue(n,t[3],c,m0):Ye(t[3]),$o):o&&o.p&&(!r||c&4)&&o.p(t,r?c:-1)},i(a){r||(j(o,a),r=!0)},o(a){U(o,a),r=!1},d(a){a&&($(i),$(s)),o&&o.d(a)}}}function y0(e){let t,i,s=[],r=new Map,n;const l=e[4].logo,o=Fe(l,e,e[3],Jo),a=o||v0(e);let c=ut(e[2]);const f=u=>u[7];for(let u=0;u<c.length;u+=1){let m=Go(e,c,u),v=f(m);r.set(v,s[u]=Qo(v,m))}return{c(){t=re("div"),a&&a.c(),i=ue();for(let u=0;u<s.length;u+=1)s[u].c();x(t,"class","block__icons")},m(u,m){J(u,t,m),a&&a.m(t,null),ae(t,i);for(let v=0;v<s.length;v+=1)s[v]&&s[v].m(t,null);n=!0},p(u,[m]){o?o.p&&(!n||m&8)&&We(o,l,u,u[3],n?Ue(l,u[3],m,g0):Ye(u[3]),Jo):a&&a.p&&(!n||m&3)&&a.p(u,n?m:-1),m&12&&(c=ut(u[2]),ze(),s=di(s,m,f,1,u,c,r,t,Si,Qo,null,Go),qe())},i(u){if(!n){j(a,u);for(let m=0;m<c.length;m+=1)j(s[m]);n=!0}},o(u){U(a,u);for(let m=0;m<s.length;m+=1)U(s[m]);n=!1},d(u){u&&$(t),a&&a.d(u);for(let m=0;m<s.length;m+=1)s[m].d()}}}function C0(e,t,i){let{$$slots:s={},$$scope:r}=t,{logo:n=""}=t,{title:l=""}=t,{icons:o=[]}=t;return e.$$set=a=>{"logo"in a&&i(0,n=a.logo),"title"in a&&i(1,l=a.title),"icons"in a&&i(2,o=a.icons),"$$scope"in a&&i(3,r=a.$$scope)},[n,l,o,r,s]}class Ll extends Be{constructor(t){super(),Oe(this,t,C0,y0,Re,{logo:0,title:1,icons:2})}}var me=(e=>(e.Root="navigation-root",e.File="navigation-file",e.Folder="navigation-folder",e))(me||{});function S0(e){let t,i;return t=new Ct({props:{icon:"#iconHelp",id:e[1],className:e[2],style:e[3]}}),{c(){te(t.$$.fragment)},m(s,r){Q(t,s,r),i=!0},p(s,r){const n={};r&2&&(n.id=s[1]),r&4&&(n.className=s[2]),r&8&&(n.style=s[3]),t.$set(n)},i(s){i||(j(t.$$.fragment,s),i=!0)},o(s){U(t.$$.fragment,s),i=!1},d(s){ee(t,s)}}}function w0(e){let t;return{c(){t=ct(e[0])},m(i,s){J(i,t,s)},p(i,s){s&1&&At(t,i[0])},i:Ae,o:Ae,d(i){i&&$(t)}}}function k0(e){let t,i;return{c(){t=new Ui(!1),i=$e(),t.a=i},m(s,r){t.m(e[0],s,r),J(s,i,r)},p(s,r){r&1&&t.p(s[0])},i:Ae,o:Ae,d(s){s&&($(i),t.d())}}}function L0(e){let t,i;return{c(){t=re("img"),x(t,"alt","icon"),x(t,"style",e[3]),Vs(t.src,i=e[0])||x(t,"src",i),x(t,"data-id",e[1]),x(t,"class",e[2]),W(t,"popover__block",Vi.id.test(e[1])),W(t,"b3-list-item__icon",!0)},m(s,r){J(s,t,r)},p(s,r){r&8&&x(t,"style",s[3]),r&1&&!Vs(t.src,i=s[0])&&x(t,"src",i),r&2&&x(t,"data-id",s[1]),r&4&&x(t,"class",s[2]),r&6&&W(t,"popover__block",Vi.id.test(s[1])),r&4&&W(t,"b3-list-item__icon",!0)},i:Ae,o:Ae,d(s){s&&$(t)}}}function E0(e){let t,i;return t=new Ct({props:{icon:e[0],id:e[1],className:e[2],style:e[3]}}),{c(){te(t.$$.fragment)},m(s,r){Q(t,s,r),i=!0},p(s,r){const n={};r&1&&(n.icon=s[0]),r&2&&(n.id=s[1]),r&4&&(n.className=s[2]),r&8&&(n.style=s[3]),t.$set(n)},i(s){i||(j(t.$$.fragment,s),i=!0)},o(s){U(t.$$.fragment,s),i=!1},d(s){ee(t,s)}}}function M0(e){let t,i,s,r,n,l,o;const a=[E0,L0,k0,w0,S0],c=[];function f(u,m){return m&1&&(t=null),m&1&&(i=null),m&1&&(s=null),t==null&&(t=!!u[0].startsWith("#")),t?0:(i==null&&(i=!!(u[0].startsWith("/")||u[0].startsWith("http")||u[0].startsWith("data")||u[0].startsWith("blob"))),i?1:(s==null&&(s=!!(u[0].startsWith("<")&&u[0].endsWith(">"))),s?2:u[0]?3:4))}return r=f(e,-1),n=c[r]=a[r](e),{c(){n.c(),l=$e()},m(u,m){c[r].m(u,m),J(u,l,m),o=!0},p(u,[m]){let v=r;r=f(u,m),r===v?c[r].p(u,m):(ze(),U(c[v],1,1,()=>{c[v]=null}),qe(),n=c[r],n?n.p(u,m):(n=c[r]=a[r](u),n.c()),j(n,1),n.m(l.parentNode,l))},i(u){o||(j(n),o=!0)},o(u){U(n),o=!1},d(u){u&&$(l),c[r].d(u)}}}function D0(e,t,i){let{icon:s}=t,{id:r=""}=t,{className:n=""}=t,{style:l=""}=t;return e.$$set=o=>{"icon"in o&&i(0,s=o.icon),"id"in o&&i(1,r=o.id),"className"in o&&i(2,n=o.className),"style"in o&&i(3,l=o.style)},[s,r,n,l]}class Cn extends Be{constructor(t){super(),Oe(this,t,D0,M0,Re,{icon:0,id:1,className:2,style:3})}}function T0(e){let t,i;return{c(){t=Jt("svg"),i=Jt("use"),Ci(i,"xlink:href",e[1]),x(t,"style",e[3]),x(t,"class",e[2]),W(t,"b3-list-item__arrow--open",e[0])},m(s,r){J(s,t,r),ae(t,i)},p(s,[r]){r&2&&Ci(i,"xlink:href",s[1]),r&8&&x(t,"style",s[3]),r&4&&x(t,"class",s[2]),r&5&&W(t,"b3-list-item__arrow--open",s[0])},i:Ae,o:Ae,d(s){s&&$(t)}}}function R0(e,t,i){let{open:s=!1}=t,{icon:r="#iconRight"}=t,{className:n="b3-list-item__arrow"}=t,{style:l=void 0}=t;return e.$$set=o=>{"open"in o&&i(0,s=o.open),"icon"in o&&i(1,r=o.icon),"className"in o&&i(2,n=o.className),"style"in o&&i(3,l=o.style)},[s,r,n,l]}class A0 extends Be{constructor(t){super(),Oe(this,t,R0,T0,Re,{open:0,icon:1,className:2,style:3})}}function ea(e,t,i){const s=e.slice();return s[59]=t[i],s[61]=i,s}function O0(e){let t,i;return t=new Ct({props:{icon:"#iconHelp",id:e[21]}}),{c(){te(t.$$.fragment)},m(s,r){Q(t,s,r),i=!0},p(s,r){const n={};r[0]&2097152&&(n.id=s[21]),t.$set(n)},i(s){i||(j(t.$$.fragment,s),i=!0)},o(s){U(t.$$.fragment,s),i=!1},d(s){ee(t,s)}}}function B0(e){let t,i;return t=new Ct({props:{icon:"#iconFilesRoot",id:e[21]}}),{c(){te(t.$$.fragment)},m(s,r){Q(t,s,r),i=!0},p(s,r){const n={};r[0]&2097152&&(n.id=s[21]),t.$set(n)},i(s){i||(j(t.$$.fragment,s),i=!0)},o(s){U(t.$$.fragment,s),i=!1},d(s){ee(t,s)}}}function H0(e){let t,i;return t=new Ct({props:{icon:"#iconFolder",id:e[21]}}),{c(){te(t.$$.fragment)},m(s,r){Q(t,s,r),i=!0},p(s,r){const n={};r[0]&2097152&&(n.id=s[21]),t.$set(n)},i(s){i||(j(t.$$.fragment,s),i=!0)},o(s){U(t.$$.fragment,s),i=!1},d(s){ee(t,s)}}}function P0(e){let t,i;return t=new Ct({props:{icon:"#iconFile",id:e[21]}}),{c(){te(t.$$.fragment)},m(s,r){Q(t,s,r),i=!0},p(s,r){const n={};r[0]&2097152&&(n.id=s[21]),t.$set(n)},i(s){i||(j(t.$$.fragment,s),i=!0)},o(s){U(t.$$.fragment,s),i=!1},d(s){ee(t,s)}}}function x0(e){let t,i;return t=new Cn({props:{icon:e[19],id:e[21]}}),{c(){te(t.$$.fragment)},m(s,r){Q(t,s,r),i=!0},p(s,r){const n={};r[0]&524288&&(n.icon=s[19]),r[0]&2097152&&(n.id=s[21]),t.$set(n)},i(s){i||(j(t.$$.fragment,s),i=!0)},o(s){U(t.$$.fragment,s),i=!1},d(s){ee(t,s)}}}function ta(e){let t,i,s;return i=new Cn({props:{icon:e[26]}}),{c(){t=re("span"),te(i.$$.fragment),x(t,"data-type","symlink"),x(t,"aria-label",e[27]),x(t,"class","symblink b3-list-item__action"),W(t,"b3-tooltips",!!e[27]),W(t,"b3-tooltips__sw",!!e[27]&&e[0]===me.Root),W(t,"b3-tooltips__nw",!!e[27]&&e[0]!==me.Root)},m(r,n){J(r,t,n),Q(i,t,null),s=!0},p(r,n){const l={};n[0]&67108864&&(l.icon=r[26]),i.$set(l),(!s||n[0]&134217728)&&x(t,"aria-label",r[27]),(!s||n[0]&134217728)&&W(t,"b3-tooltips",!!r[27]),(!s||n[0]&134217729)&&W(t,"b3-tooltips__sw",!!r[27]&&r[0]===me.Root),(!s||n[0]&134217729)&&W(t,"b3-tooltips__nw",!!r[27]&&r[0]!==me.Root)},i(r){s||(j(i.$$.fragment,r),s=!0)},o(r){U(i.$$.fragment,r),s=!1},d(r){r&&$(t),ee(i)}}}function ia(e){let t,i;return{c(){t=re("span"),i=ct(e[28]),x(t,"aria-label",e[29]),x(t,"class","counter"),W(t,"b3-tooltips",!!e[29]),W(t,"b3-tooltips__sw",!!e[29]&&e[0]===me.Root),W(t,"b3-tooltips__nw",!!e[29]&&e[0]!==me.Root)},m(s,r){J(s,t,r),ae(t,i)},p(s,r){r[0]&268435456&&At(i,s[28]),r[0]&536870912&&x(t,"aria-label",s[29]),r[0]&536870912&&W(t,"b3-tooltips",!!s[29]),r[0]&536870913&&W(t,"b3-tooltips__sw",!!s[29]&&s[0]===me.Root),r[0]&536870913&&W(t,"b3-tooltips__nw",!!s[29]&&s[0]!==me.Root)},d(s){s&&$(t)}}}function sa(e){let t,i=[],s=new Map,r=`calc(12px + ${e[4]} * ${e[3]})`,n,l=ut(e[16]);const o=a=>a[59].path;for(let a=0;a<l.length;a+=1){let c=ea(e,l,a),f=o(c);s.set(f,i[a]=ra(f,c))}return{c(){t=re("ul");for(let a=0;a<i.length;a+=1)i[a].c();x(t,"class","node-list svelte-1oapgz1"),W(t,"dragging",e[9]),W(t,"dragover",e[13]),W(t,"fn__none",e[7]),pt(t,"--monaco-editor-explorer-indent-left",r)},m(a,c){J(a,t,c);for(let f=0;f<i.length;f+=1)i[f]&&i[f].m(t,null);e[54](t),n=!0},p(a,c){c[0]&65544&&(l=ut(a[16]),ze(),i=di(i,c,o,1,a,l,s,t,Si,ra,null,ea),qe()),(!n||c[0]&512)&&W(t,"dragging",a[9]),(!n||c[0]&8192)&&W(t,"dragover",a[13]),(!n||c[0]&128)&&W(t,"fn__none",a[7]),c[0]&24&&r!==(r=`calc(12px + ${a[4]} * ${a[3]})`)&&pt(t,"--monaco-editor-explorer-indent-left",r)},i(a){if(!n){for(let c=0;c<l.length;c+=1)j(i[c]);n=!0}},o(a){for(let c=0;c<i.length;c+=1)U(i[c]);n=!1},d(a){a&&$(t);for(let c=0;c<i.length;c+=1)i[c].d();e[54](null)}}}function ra(e,t){let i,s,r;const n=[{depth:t[3]+1},t[59]];let l={};for(let o=0;o<n.length;o+=1)l=Qt(l,n[o]);return s=new El({props:l}),s.$on("open",t[44]),s.$on("fold",t[45]),s.$on("menu",t[46]),s.$on("unfold",t[47]),s.$on("dragstart",t[48]),s.$on("dragend",t[49]),s.$on("dragenter",t[50]),s.$on("dragover",t[51]),s.$on("dragleave",t[52]),s.$on("drop",t[53]),{key:e,first:null,c(){i=$e(),te(s.$$.fragment),this.first=i},m(o,a){J(o,i,a),Q(s,o,a),r=!0},p(o,a){t=o;const c=a[0]&65544?_i(n,[a[0]&8&&{depth:t[3]+1},a[0]&65536&&wi(t[59])]):{};s.$set(c)},i(o){r||(j(s.$$.fragment,o),r=!0)},o(o){U(s.$$.fragment,o),r=!1},d(o){o&&$(i),ee(s,o)}}}function I0(e){let t,i,s,r=`calc(4px + ${e[4]} * ${e[3]})`,n,l,o,a,c,f,u,m,v,y,g,h,d=!Number.isNaN(e[28]),_,p,b,S,L;s=new A0({props:{open:!e[7],icon:e[17]}});const k=[x0,P0,H0,B0,O0],C=[];function w(T,P){return T[19]?0:T[0]===me.File?1:T[0]===me.Folder?2:T[0]===me.Root?3:4}o=w(e),a=C[o]=k[o](e),y=new Cn({props:{icon:e[24]}});let E=e[8]&&ta(e),A=d&&ia(e),O=e[16]&&sa(e);return{c(){t=re("li"),i=re("span"),te(s.$$.fragment),n=ue(),l=re("span"),a.c(),c=ue(),f=re("span"),u=ct(e[22]),m=ue(),v=re("span"),te(y.$$.fragment),g=ue(),E&&E.c(),h=ue(),A&&A.c(),_=ue(),O&&O.c(),p=$e(),x(i,"role","button"),x(i,"aria-label",e[18]),x(i,"class","toggle b3-list-item__toggle b3-list-item__toggle--hl"),W(i,"b3-tooltips",!!e[18]),W(i,"b3-tooltips__se",!!e[18]&&e[0]===me.Root),W(i,"b3-tooltips__ne",!!e[18]&&e[0]!==me.Root),W(i,"fn__hidden",e[0]===me.File),pt(i,"padding-left",r),x(l,"aria-label",e[20]),x(l,"class","icon b3-list-item__icon"),W(l,"b3-tooltips",!!e[20]),W(l,"b3-tooltips__se",!!e[20]&&e[0]===me.Root),W(l,"b3-tooltips__ne",!!e[20]&&e[0]!==me.Root),x(f,"aria-label",e[23]),x(f,"class","text b3-list-item__text"),W(f,"ariaLabel",!!e[23]),W(f,"b3-tooltips__se",!!e[23]&&e[0]===me.Root),W(f,"b3-tooltips__ne",!!e[23]&&e[0]!==me.Root),x(v,"role","button"),x(v,"data-type","more"),x(v,"aria-label",e[25]),x(v,"class","menu b3-list-item__action"),W(v,"b3-tooltips",!!e[25]),W(v,"b3-tooltips__sw",!!e[25]&&e[0]===me.Root),W(v,"b3-tooltips__nw",!!e[25]&&e[0]!==me.Root),x(t,"draggable",e[10]),x(t,"title",e[15]),x(t,"data-type",e[0]),x(t,"data-name",e[1]),x(t,"data-path",e[2]),x(t,"data-depth",e[3]),x(t,"data-directory",e[5]),x(t,"class","node b3-list-item svelte-1oapgz1"),W(t,"dragging",e[9]),W(t,"dragover",e[13]),W(t,"dragover__top",e[12]),W(t,"dragover__bottom",e[14]),W(t,"b3-list-item--focus",e[6]),W(t,"b3-list-item--hide-action",e[11])},m(T,P){J(T,t,P),ae(t,i),Q(s,i,null),ae(t,n),ae(t,l),C[o].m(l,null),ae(t,c),ae(t,f),ae(f,u),ae(t,m),ae(t,v),Q(y,v,null),ae(t,g),E&&E.m(t,null),ae(t,h),A&&A.m(t,null),e[43](t),J(T,_,P),O&&O.m(T,P),J(T,p,P),b=!0,S||(L=[ve(i,"click",It(oi(e[33]))),ve(v,"click",It(oi(e[34]))),ve(t,"dragstart",It(e[35])),ve(t,"dragend",It(e[36])),ve(t,"dragenter",It(oi(e[37]))),ve(t,"dragover",It(oi(e[38]))),ve(t,"dragleave",It(oi(e[39]))),ve(t,"drop",It(oi(e[40]))),ve(t,"click",It(oi(e[32]))),ve(t,"contextmenu",It(oi(e[34])))],S=!0)},p(T,P){const F={};P[0]&128&&(F.open=!T[7]),P[0]&131072&&(F.icon=T[17]),s.$set(F),(!b||P[0]&262144)&&x(i,"aria-label",T[18]),(!b||P[0]&262144)&&W(i,"b3-tooltips",!!T[18]),(!b||P[0]&262145)&&W(i,"b3-tooltips__se",!!T[18]&&T[0]===me.Root),(!b||P[0]&262145)&&W(i,"b3-tooltips__ne",!!T[18]&&T[0]!==me.Root),(!b||P[0]&1)&&W(i,"fn__hidden",T[0]===me.File),P[0]&24&&r!==(r=`calc(4px + ${T[4]} * ${T[3]})`)&&pt(i,"padding-left",r);let z=o;o=w(T),o===z?C[o].p(T,P):(ze(),U(C[z],1,1,()=>{C[z]=null}),qe(),a=C[o],a?a.p(T,P):(a=C[o]=k[o](T),a.c()),j(a,1),a.m(l,null)),(!b||P[0]&1048576)&&x(l,"aria-label",T[20]),(!b||P[0]&1048576)&&W(l,"b3-tooltips",!!T[20]),(!b||P[0]&1048577)&&W(l,"b3-tooltips__se",!!T[20]&&T[0]===me.Root),(!b||P[0]&1048577)&&W(l,"b3-tooltips__ne",!!T[20]&&T[0]!==me.Root),(!b||P[0]&4194304)&&At(u,T[22]),(!b||P[0]&8388608)&&x(f,"aria-label",T[23]),(!b||P[0]&8388608)&&W(f,"ariaLabel",!!T[23]),(!b||P[0]&8388609)&&W(f,"b3-tooltips__se",!!T[23]&&T[0]===me.Root),(!b||P[0]&8388609)&&W(f,"b3-tooltips__ne",!!T[23]&&T[0]!==me.Root);const Z={};P[0]&16777216&&(Z.icon=T[24]),y.$set(Z),(!b||P[0]&33554432)&&x(v,"aria-label",T[25]),(!b||P[0]&33554432)&&W(v,"b3-tooltips",!!T[25]),(!b||P[0]&33554433)&&W(v,"b3-tooltips__sw",!!T[25]&&T[0]===me.Root),(!b||P[0]&33554433)&&W(v,"b3-tooltips__nw",!!T[25]&&T[0]!==me.Root),T[8]?E?(E.p(T,P),P[0]&256&&j(E,1)):(E=ta(T),E.c(),j(E,1),E.m(t,h)):E&&(ze(),U(E,1,1,()=>{E=null}),qe()),P[0]&268435456&&(d=!Number.isNaN(T[28])),d?A?A.p(T,P):(A=ia(T),A.c(),A.m(t,null)):A&&(A.d(1),A=null),(!b||P[0]&1024)&&x(t,"draggable",T[10]),(!b||P[0]&32768)&&x(t,"title",T[15]),(!b||P[0]&1)&&x(t,"data-type",T[0]),(!b||P[0]&2)&&x(t,"data-name",T[1]),(!b||P[0]&4)&&x(t,"data-path",T[2]),(!b||P[0]&8)&&x(t,"data-depth",T[3]),(!b||P[0]&32)&&x(t,"data-directory",T[5]),(!b||P[0]&512)&&W(t,"dragging",T[9]),(!b||P[0]&8192)&&W(t,"dragover",T[13]),(!b||P[0]&4096)&&W(t,"dragover__top",T[12]),(!b||P[0]&16384)&&W(t,"dragover__bottom",T[14]),(!b||P[0]&64)&&W(t,"b3-list-item--focus",T[6]),(!b||P[0]&2048)&&W(t,"b3-list-item--hide-action",T[11]),T[16]?O?(O.p(T,P),P[0]&65536&&j(O,1)):(O=sa(T),O.c(),j(O,1),O.m(p.parentNode,p)):O&&(ze(),U(O,1,1,()=>{O=null}),qe())},i(T){b||(j(s.$$.fragment,T),j(a),j(y.$$.fragment,T),j(E),j(O),b=!0)},o(T){U(s.$$.fragment,T),U(a),U(y.$$.fragment,T),U(E),U(O),b=!1},d(T){T&&($(t),$(_),$(p)),ee(s),C[o].d(),ee(y),E&&E.d(),A&&A.d(),e[43](null),O&&O.d(T),S=!1,Qe(L)}}}function N0(e,t,i){let{type:s}=t,{name:r=""}=t,{path:n}=t,{root:l=""}=t,{depth:o=0}=t,{indent:a="1em"}=t,{relative:c=""}=t,{directory:f}=t,{focus:u=!1}=t,{folded:m=!0}=t,{symlink:v=!1}=t,{dragging:y=!1}=t,{draggable:g=!1}=t,{hideActions:h=!0}=t,{dragoverTop:d=!1}=t,{dragover:_=!1}=t,{dragoverBottom:p=!1}=t,{title:b=""}=t,{children:S=void 0}=t,{toggleIcon:L="#iconRight"}=t,{toggleAriaLabel:k=""}=t,{icon:C=""}=t,{iconAriaLabel:w=""}=t,{iconPopoverID:E=""}=t,{text:A=""}=t,{textAriaLabel:O=""}=t,{menuIcon:T="#iconMore"}=t,{menuAriaLabel:P=""}=t,{symlinkIcon:F="#iconLink"}=t,{symlinkAriaLabel:z=""}=t,{count:Z=NaN}=t,{countAriaLabel:M=""}=t,B,R;const H=ei(),N={type:ye(s),name:ye(r),path:ye(n),root:ye(l),depth:ye(o),indent:ye(a),relative:ye(c),directory:ye(f),focus:ye(u),folded:ye(m),symlink:ye(v),dragging:ye(y),draggable:ye(g),hideActions:ye(h),dragoverTop:ye(d),dragover:ye(_),dragoverBottom:ye(p),title:ye(b),children:ye(S),toggleIcon:ye(L),toggleAriaLabel:ye(k),icon:ye(C),iconAriaLabel:ye(w),iconPopoverID:ye(E),text:ye(A),textAriaLabel:ye(O),menuIcon:ye(T),menuAriaLabel:ye(P),symlinkIcon:ye(F),symlinkAriaLabel:ye(z),count:ye(Z),countAriaLabel:ye(M)},se=[N.type.subscribe(I=>i(0,s=I)),N.name.subscribe(I=>i(1,r=I)),N.path.subscribe(I=>i(2,n=I)),N.root.subscribe(I=>i(41,l=I)),N.indent.subscribe(I=>i(4,a=I)),N.depth.subscribe(I=>i(3,o=I)),N.relative.subscribe(I=>i(42,c=I)),N.directory.subscribe(I=>i(5,f=I)),N.focus.subscribe(I=>i(6,u=I)),N.folded.subscribe(I=>i(7,m=I)),N.symlink.subscribe(I=>i(8,v=I)),N.dragging.subscribe(I=>i(9,y=I)),N.draggable.subscribe(I=>i(10,g=I)),N.hideActions.subscribe(I=>i(11,h=I)),N.dragoverTop.subscribe(I=>i(12,d=I)),N.dragover.subscribe(I=>i(13,_=I)),N.dragoverBottom.subscribe(I=>i(14,p=I)),N.title.subscribe(I=>i(15,b=I)),N.children.subscribe(I=>i(16,S=I)),N.toggleIcon.subscribe(I=>i(17,L=I)),N.toggleAriaLabel.subscribe(I=>i(18,k=I)),N.icon.subscribe(I=>i(19,C=I)),N.iconAriaLabel.subscribe(I=>i(20,w=I)),N.iconPopoverID.subscribe(I=>i(21,E=I)),N.text.subscribe(I=>i(22,A=I)),N.textAriaLabel.subscribe(I=>i(23,O=I)),N.menuIcon.subscribe(I=>i(24,T=I)),N.menuAriaLabel.subscribe(I=>i(25,P=I)),N.symlinkIcon.subscribe(I=>i(26,F=I)),N.symlinkAriaLabel.subscribe(I=>i(27,z=I)),N.count.subscribe(I=>i(28,Z=I)),N.countAriaLabel.subscribe(I=>i(29,M=I))],he=Wf("tree");he==null||he.appendNode(N),bn(()=>{he==null||he.removeNode(N),se.forEach(I=>I())});function ce(I){switch(s){case me.File:H("open",{e:I,li:B,ul:R,props:N,dispatcher:H});break;case me.Root:case me.Folder:default:be(I);break}}function be(I){m?H("unfold",{e:I,li:B,ul:R,props:N,dispatcher:H}):H("fold",{e:I,li:B,ul:R,props:N,dispatcher:H})}function D(I){H("menu",{e:I,li:B,ul:R,props:N,dispatcher:H})}function V(I){H("dragstart",{e:I,li:B,ul:R,props:N,dispatcher:H})}function K(I){H("dragend",{e:I,li:B,ul:R,props:N,dispatcher:H})}function q(I){H("dragenter",{e:I,li:B,ul:R,props:N,dispatcher:H})}function _e(I){H("dragover",{e:I,li:B,ul:R,props:N,dispatcher:H})}function ie(I){H("dragleave",{e:I,li:B,ul:R,props:N,dispatcher:H})}function we(I){H("drop",{e:I,li:B,ul:R,props:N,dispatcher:H})}function Ie(I){Ot[I?"unshift":"push"](()=>{B=I,i(30,B)})}function Ke(I){Ee.call(this,e,I)}function vt(I){Ee.call(this,e,I)}function Ce(I){Ee.call(this,e,I)}function pi(I){Ee.call(this,e,I)}function qi(I){Ee.call(this,e,I)}function Zi(I){Ee.call(this,e,I)}function Ki(I){Ee.call(this,e,I)}function Li(I){Ee.call(this,e,I)}function mt(I){Ee.call(this,e,I)}function mi(I){Ee.call(this,e,I)}function wt(I){Ot[I?"unshift":"push"](()=>{R=I,i(31,R)})}return e.$$set=I=>{"type"in I&&i(0,s=I.type),"name"in I&&i(1,r=I.name),"path"in I&&i(2,n=I.path),"root"in I&&i(41,l=I.root),"depth"in I&&i(3,o=I.depth),"indent"in I&&i(4,a=I.indent),"relative"in I&&i(42,c=I.relative),"directory"in I&&i(5,f=I.directory),"focus"in I&&i(6,u=I.focus),"folded"in I&&i(7,m=I.folded),"symlink"in I&&i(8,v=I.symlink),"dragging"in I&&i(9,y=I.dragging),"draggable"in I&&i(10,g=I.draggable),"hideActions"in I&&i(11,h=I.hideActions),"dragoverTop"in I&&i(12,d=I.dragoverTop),"dragover"in I&&i(13,_=I.dragover),"dragoverBottom"in I&&i(14,p=I.dragoverBottom),"title"in I&&i(15,b=I.title),"children"in I&&i(16,S=I.children),"toggleIcon"in I&&i(17,L=I.toggleIcon),"toggleAriaLabel"in I&&i(18,k=I.toggleAriaLabel),"icon"in I&&i(19,C=I.icon),"iconAriaLabel"in I&&i(20,w=I.iconAriaLabel),"iconPopoverID"in I&&i(21,E=I.iconPopoverID),"text"in I&&i(22,A=I.text),"textAriaLabel"in I&&i(23,O=I.textAriaLabel),"menuIcon"in I&&i(24,T=I.menuIcon),"menuAriaLabel"in I&&i(25,P=I.menuAriaLabel),"symlinkIcon"in I&&i(26,F=I.symlinkIcon),"symlinkAriaLabel"in I&&i(27,z=I.symlinkAriaLabel),"count"in I&&i(28,Z=I.count),"countAriaLabel"in I&&i(29,M=I.countAriaLabel)},e.$$.update=()=>{e.$$.dirty[0]&1&&N.type.set(s),e.$$.dirty[0]&2&&N.name.set(r),e.$$.dirty[0]&4&&N.path.set(n),e.$$.dirty[1]&1024&&N.root.set(l),e.$$.dirty[0]&8&&N.depth.set(o),e.$$.dirty[0]&16&&N.indent.set(a),e.$$.dirty[1]&2048&&N.relative.set(c),e.$$.dirty[0]&32&&N.directory.set(f),e.$$.dirty[0]&64&&N.focus.set(u),e.$$.dirty[0]&128&&N.folded.set(m),e.$$.dirty[0]&256&&N.symlink.set(v),e.$$.dirty[0]&512&&N.dragging.set(y),e.$$.dirty[0]&1024&&N.draggable.set(g),e.$$.dirty[0]&2048&&N.hideActions.set(h),e.$$.dirty[0]&4096&&N.dragoverTop.set(d),e.$$.dirty[0]&8192&&N.dragover.set(_),e.$$.dirty[0]&16384&&N.dragoverBottom.set(p),e.$$.dirty[0]&32768&&N.title.set(b),e.$$.dirty[0]&65536&&N.children.set(S),e.$$.dirty[0]&131072&&N.toggleIcon.set(L),e.$$.dirty[0]&262144&&N.toggleAriaLabel.set(k),e.$$.dirty[0]&524288&&N.icon.set(C),e.$$.dirty[0]&1048576&&N.iconAriaLabel.set(w),e.$$.dirty[0]&2097152&&N.iconPopoverID.set(E),e.$$.dirty[0]&4194304&&N.text.set(A),e.$$.dirty[0]&8388608&&N.textAriaLabel.set(O),e.$$.dirty[0]&16777216&&N.menuIcon.set(T),e.$$.dirty[0]&33554432&&N.menuAriaLabel.set(P),e.$$.dirty[0]&67108864&&N.symlinkIcon.set(F),e.$$.dirty[0]&134217728&&N.symlinkAriaLabel.set(z),e.$$.dirty[0]&268435456&&N.count.set(Z),e.$$.dirty[0]&536870912&&N.countAriaLabel.set(M)},[s,r,n,o,a,f,u,m,v,y,g,h,d,_,p,b,S,L,k,C,w,E,A,O,T,P,F,z,Z,M,B,R,ce,be,D,V,K,q,_e,ie,we,l,c,Ie,Ke,vt,Ce,pi,qi,Zi,Ki,Li,mt,mi,wt]}let El=class extends Be{constructor(t){super(),Oe(this,t,N0,I0,Re,{type:0,name:1,path:2,root:41,depth:3,indent:4,relative:42,directory:5,focus:6,folded:7,symlink:8,dragging:9,draggable:10,hideActions:11,dragoverTop:12,dragover:13,dragoverBottom:14,title:15,children:16,toggleIcon:17,toggleAriaLabel:18,icon:19,iconAriaLabel:20,iconPopoverID:21,text:22,textAriaLabel:23,menuIcon:24,menuAriaLabel:25,symlinkIcon:26,symlinkAriaLabel:27,count:28,countAriaLabel:29},null,[-1,-1])}};function V0(e){let t,i,s,r;const n=[e[0]];let l={};for(let o=0;o<n.length;o+=1)l=Qt(l,n[o]);return i=new El({props:l}),i.$on("open",e[1]),i.$on("fold",e[2]),i.$on("menu",e[3]),i.$on("unfold",e[4]),i.$on("dragstart",e[5]),i.$on("dragend",e[6]),i.$on("dragenter",e[7]),i.$on("dragover",e[8]),i.$on("dragleave",e[9]),i.$on("drop",e[10]),{c(){t=re("ul"),te(i.$$.fragment),x(t,"data-url",s=e[0].path),x(t,"class","b3-list b3-list--background")},m(o,a){J(o,t,a),Q(i,t,null),r=!0},p(o,[a]){const c=a&1?_i(n,[wi(o[0])]):{};i.$set(c),(!r||a&1&&s!==(s=o[0].path))&&x(t,"data-url",s)},i(o){r||(j(i.$$.fragment,o),r=!0)},o(o){U(i.$$.fragment,o),r=!1},d(o){o&&$(t),ee(i)}}}function j0(e,t,i){let{root:s}=t;function r(y){Ee.call(this,e,y)}function n(y){Ee.call(this,e,y)}function l(y){Ee.call(this,e,y)}function o(y){Ee.call(this,e,y)}function a(y){Ee.call(this,e,y)}function c(y){Ee.call(this,e,y)}function f(y){Ee.call(this,e,y)}function u(y){Ee.call(this,e,y)}function m(y){Ee.call(this,e,y)}function v(y){Ee.call(this,e,y)}return e.$$set=y=>{"root"in y&&i(0,s=y.root)},[s,r,n,l,o,a,c,f,u,m,v]}class F0 extends Be{constructor(t){super(),Oe(this,t,j0,V0,Re,{root:0})}}function na(e,t,i){const s=e.slice();return s[11]=t[i],s[13]=i,s}function oa(e,t){let i,s,r;return s=new F0({props:{root:t[11]}}),s.$on("open",t[1]),s.$on("menu",t[2]),s.$on("fold",t[3]),s.$on("unfold",t[4]),s.$on("dragstart",t[5]),s.$on("dragend",t[6]),s.$on("dragenter",t[7]),s.$on("dragover",t[8]),s.$on("dragleave",t[9]),s.$on("drop",t[10]),{key:e,first:null,c(){i=$e(),te(s.$$.fragment),this.first=i},m(n,l){J(n,i,l),Q(s,n,l),r=!0},p(n,l){t=n;const o={};l&1&&(o.root=t[11]),s.$set(o)},i(n){r||(j(s.$$.fragment,n),r=!0)},o(n){U(s.$$.fragment,n),r=!1},d(n){n&&$(i),ee(s,n)}}}function U0(e){let t,i=[],s=new Map,r,n=ut(e[0]);const l=o=>o[11].path;for(let o=0;o<n.length;o+=1){let a=na(e,n,o),c=l(a);s.set(c,i[o]=oa(c,a))}return{c(){t=re("div");for(let o=0;o<i.length;o+=1)i[o].c();x(t,"class","fn__flex-1 file-tree")},m(o,a){J(o,t,a);for(let c=0;c<i.length;c+=1)i[c]&&i[c].m(t,null);r=!0},p(o,[a]){a&1&&(n=ut(o[0]),ze(),i=di(i,a,l,1,o,n,s,t,Si,oa,null,na),qe())},i(o){if(!r){for(let a=0;a<n.length;a+=1)j(i[a]);r=!0}},o(o){for(let a=0;a<i.length;a+=1)U(i[a]);r=!1},d(o){o&&$(t);for(let a=0;a<i.length;a+=1)i[a].d()}}}function W0(e,t,i){let{roots:s=[]}=t;function r(y){Ee.call(this,e,y)}function n(y){Ee.call(this,e,y)}function l(y){Ee.call(this,e,y)}function o(y){Ee.call(this,e,y)}function a(y){Ee.call(this,e,y)}function c(y){Ee.call(this,e,y)}function f(y){Ee.call(this,e,y)}function u(y){Ee.call(this,e,y)}function m(y){Ee.call(this,e,y)}function v(y){Ee.call(this,e,y)}return e.$$set=y=>{"roots"in y&&i(0,s=y.roots)},[s,r,n,l,o,a,c,f,u,m,v]}class Y0 extends Be{constructor(t){super(),Oe(this,t,W0,U0,Re,{roots:0})}}function z0(e){return e=e.slice(e.findIndex(t=>t.type!=="separator"),e.findLastIndex(t=>t.type!=="separator")+1),e.length===0||(e=e.filter((t,i,s)=>{var r;return t.type!=="separator"?!0:((r=s[i-1])==null?void 0:r.type)!=="separator"})),e}//! moment.js
//! version : 2.29.4
//! authors : Tim Wood, Iskren Chernev, Moment.js contributors
//! license : MIT
//! momentjs.com
var Ml;function oe(){return Ml.apply(null,arguments)}function q0(e){Ml=e}function Bt(e){return e instanceof Array||Object.prototype.toString.call(e)==="[object Array]"}function yi(e){return e!=null&&Object.prototype.toString.call(e)==="[object Object]"}function Me(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function Sn(e){if(Object.getOwnPropertyNames)return Object.getOwnPropertyNames(e).length===0;var t;for(t in e)if(Me(e,t))return!1;return!0}function gt(e){return e===void 0}function Xt(e){return typeof e=="number"||Object.prototype.toString.call(e)==="[object Number]"}function ps(e){return e instanceof Date||Object.prototype.toString.call(e)==="[object Date]"}function Dl(e,t){var i=[],s,r=e.length;for(s=0;s<r;++s)i.push(t(e[s],s));return i}function ci(e,t){for(var i in t)Me(t,i)&&(e[i]=t[i]);return Me(t,"toString")&&(e.toString=t.toString),Me(t,"valueOf")&&(e.valueOf=t.valueOf),e}function Ut(e,t,i,s){return Xl(e,t,i,s,!0).utc()}function Z0(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidEra:null,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],era:null,meridiem:null,rfc2822:!1,weekdayMismatch:!1}}function ge(e){return e._pf==null&&(e._pf=Z0()),e._pf}var en;Array.prototype.some?en=Array.prototype.some:en=function(e){var t=Object(this),i=t.length>>>0,s;for(s=0;s<i;s++)if(s in t&&e.call(this,t[s],s,t))return!0;return!1};function wn(e){if(e._isValid==null){var t=ge(e),i=en.call(t.parsedDateParts,function(r){return r!=null}),s=!isNaN(e._d.getTime())&&t.overflow<0&&!t.empty&&!t.invalidEra&&!t.invalidMonth&&!t.invalidWeekday&&!t.weekdayMismatch&&!t.nullInput&&!t.invalidFormat&&!t.userInvalidated&&(!t.meridiem||t.meridiem&&i);if(e._strict&&(s=s&&t.charsLeftOver===0&&t.unusedTokens.length===0&&t.bigHour===void 0),Object.isFrozen==null||!Object.isFrozen(e))e._isValid=s;else return s}return e._isValid}function rr(e){var t=Ut(NaN);return e!=null?ci(ge(t),e):ge(t).userInvalidated=!0,t}var aa=oe.momentProperties=[],Tr=!1;function kn(e,t){var i,s,r,n=aa.length;if(gt(t._isAMomentObject)||(e._isAMomentObject=t._isAMomentObject),gt(t._i)||(e._i=t._i),gt(t._f)||(e._f=t._f),gt(t._l)||(e._l=t._l),gt(t._strict)||(e._strict=t._strict),gt(t._tzm)||(e._tzm=t._tzm),gt(t._isUTC)||(e._isUTC=t._isUTC),gt(t._offset)||(e._offset=t._offset),gt(t._pf)||(e._pf=ge(t)),gt(t._locale)||(e._locale=t._locale),n>0)for(i=0;i<n;i++)s=aa[i],r=t[s],gt(r)||(e[s]=r);return e}function ms(e){kn(this,e),this._d=new Date(e._d!=null?e._d.getTime():NaN),this.isValid()||(this._d=new Date(NaN)),Tr===!1&&(Tr=!0,oe.updateOffset(this),Tr=!1)}function Ht(e){return e instanceof ms||e!=null&&e._isAMomentObject!=null}function Tl(e){oe.suppressDeprecationWarnings===!1&&typeof console<"u"&&console.warn&&console.warn("Deprecation warning: "+e)}function Mt(e,t){var i=!0;return ci(function(){if(oe.deprecationHandler!=null&&oe.deprecationHandler(null,e),i){var s=[],r,n,l,o=arguments.length;for(n=0;n<o;n++){if(r="",typeof arguments[n]=="object"){r+=`
[`+n+"] ";for(l in arguments[0])Me(arguments[0],l)&&(r+=l+": "+arguments[0][l]+", ");r=r.slice(0,-2)}else r=arguments[n];s.push(r)}Tl(e+`
Arguments: `+Array.prototype.slice.call(s).join("")+`
`+new Error().stack),i=!1}return t.apply(this,arguments)},t)}var la={};function Rl(e,t){oe.deprecationHandler!=null&&oe.deprecationHandler(e,t),la[e]||(Tl(t),la[e]=!0)}oe.suppressDeprecationWarnings=!1;oe.deprecationHandler=null;function Wt(e){return typeof Function<"u"&&e instanceof Function||Object.prototype.toString.call(e)==="[object Function]"}function K0(e){var t,i;for(i in e)Me(e,i)&&(t=e[i],Wt(t)?this[i]=t:this["_"+i]=t);this._config=e,this._dayOfMonthOrdinalParseLenient=new RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+"|"+/\d{1,2}/.source)}function tn(e,t){var i=ci({},e),s;for(s in t)Me(t,s)&&(yi(e[s])&&yi(t[s])?(i[s]={},ci(i[s],e[s]),ci(i[s],t[s])):t[s]!=null?i[s]=t[s]:delete i[s]);for(s in e)Me(e,s)&&!Me(t,s)&&yi(e[s])&&(i[s]=ci({},i[s]));return i}function Ln(e){e!=null&&this.set(e)}var sn;Object.keys?sn=Object.keys:sn=function(e){var t,i=[];for(t in e)Me(e,t)&&i.push(t);return i};var G0={sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"};function $0(e,t,i){var s=this._calendar[e]||this._calendar.sameElse;return Wt(s)?s.call(t,i):s}function jt(e,t,i){var s=""+Math.abs(e),r=t-s.length,n=e>=0;return(n?i?"+":"":"-")+Math.pow(10,Math.max(0,r)).toString().substr(1)+s}var En=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|N{1,5}|YYYYYY|YYYYY|YYYY|YY|y{2,4}|yo?|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,Cs=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,Rr={},Hi={};function fe(e,t,i,s){var r=s;typeof s=="string"&&(r=function(){return this[s]()}),e&&(Hi[e]=r),t&&(Hi[t[0]]=function(){return jt(r.apply(this,arguments),t[1],t[2])}),i&&(Hi[i]=function(){return this.localeData().ordinal(r.apply(this,arguments),e)})}function J0(e){return e.match(/\[[\s\S]/)?e.replace(/^\[|\]$/g,""):e.replace(/\\/g,"")}function X0(e){var t=e.match(En),i,s;for(i=0,s=t.length;i<s;i++)Hi[t[i]]?t[i]=Hi[t[i]]:t[i]=J0(t[i]);return function(r){var n="",l;for(l=0;l<s;l++)n+=Wt(t[l])?t[l].call(r,e):t[l];return n}}function Ps(e,t){return e.isValid()?(t=Al(t,e.localeData()),Rr[t]=Rr[t]||X0(t),Rr[t](e)):e.localeData().invalidDate()}function Al(e,t){var i=5;function s(r){return t.longDateFormat(r)||r}for(Cs.lastIndex=0;i>=0&&Cs.test(e);)e=e.replace(Cs,s),Cs.lastIndex=0,i-=1;return e}var Q0={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"};function e_(e){var t=this._longDateFormat[e],i=this._longDateFormat[e.toUpperCase()];return t||!i?t:(this._longDateFormat[e]=i.match(En).map(function(s){return s==="MMMM"||s==="MM"||s==="DD"||s==="dddd"?s.slice(1):s}).join(""),this._longDateFormat[e])}var t_="Invalid date";function i_(){return this._invalidDate}var s_="%d",r_=/\d{1,2}/;function n_(e){return this._ordinal.replace("%d",e)}var o_={future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",w:"a week",ww:"%d weeks",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};function a_(e,t,i,s){var r=this._relativeTime[i];return Wt(r)?r(e,t,i,s):r.replace(/%d/i,e)}function l_(e,t){var i=this._relativeTime[e>0?"future":"past"];return Wt(i)?i(t):i.replace(/%s/i,t)}var rs={};function ft(e,t){var i=e.toLowerCase();rs[i]=rs[i+"s"]=rs[t]=e}function Dt(e){return typeof e=="string"?rs[e]||rs[e.toLowerCase()]:void 0}function Mn(e){var t={},i,s;for(s in e)Me(e,s)&&(i=Dt(s),i&&(t[i]=e[s]));return t}var Ol={};function dt(e,t){Ol[e]=t}function c_(e){var t=[],i;for(i in e)Me(e,i)&&t.push({unit:i,priority:Ol[i]});return t.sort(function(s,r){return s.priority-r.priority}),t}function nr(e){return e%4===0&&e%100!==0||e%400===0}function Lt(e){return e<0?Math.ceil(e)||0:Math.floor(e)}function Se(e){var t=+e,i=0;return t!==0&&isFinite(t)&&(i=Lt(t)),i}function Wi(e,t){return function(i){return i!=null?(Bl(this,e,i),oe.updateOffset(this,t),this):Fs(this,e)}}function Fs(e,t){return e.isValid()?e._d["get"+(e._isUTC?"UTC":"")+t]():NaN}function Bl(e,t,i){e.isValid()&&!isNaN(i)&&(t==="FullYear"&&nr(e.year())&&e.month()===1&&e.date()===29?(i=Se(i),e._d["set"+(e._isUTC?"UTC":"")+t](i,e.month(),ur(i,e.month()))):e._d["set"+(e._isUTC?"UTC":"")+t](i))}function h_(e){return e=Dt(e),Wt(this[e])?this[e]():this}function u_(e,t){if(typeof e=="object"){e=Mn(e);var i=c_(e),s,r=i.length;for(s=0;s<r;s++)this[i[s].unit](e[i[s].unit])}else if(e=Dt(e),Wt(this[e]))return this[e](t);return this}var Hl=/\d/,St=/\d\d/,Pl=/\d{3}/,Dn=/\d{4}/,or=/[+-]?\d{6}/,xe=/\d\d?/,xl=/\d\d\d\d?/,Il=/\d\d\d\d\d\d?/,ar=/\d{1,3}/,Tn=/\d{1,4}/,lr=/[+-]?\d{1,6}/,Yi=/\d+/,cr=/[+-]?\d+/,f_=/Z|[+-]\d\d:?\d\d/gi,hr=/Z|[+-]\d\d(?::?\d\d)?/gi,d_=/[+-]?\d+(\.\d{1,3})?/,gs=/[0-9]{0,256}['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFF07\uFF10-\uFFEF]{1,256}|[\u0600-\u06FF\/]{1,256}(\s*?[\u0600-\u06FF]{1,256}){1,2}/i,Us;Us={};function le(e,t,i){Us[e]=Wt(t)?t:function(s,r){return s&&i?i:t}}function __(e,t){return Me(Us,e)?Us[e](t._strict,t._locale):new RegExp(p_(e))}function p_(e){return bt(e.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(t,i,s,r,n){return i||s||r||n}))}function bt(e){return e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}var rn={};function He(e,t){var i,s=t,r;for(typeof e=="string"&&(e=[e]),Xt(t)&&(s=function(n,l){l[t]=Se(n)}),r=e.length,i=0;i<r;i++)rn[e[i]]=s}function vs(e,t){He(e,function(i,s,r,n){r._w=r._w||{},t(i,r._w,r,n)})}function m_(e,t,i){t!=null&&Me(rn,e)&&rn[e](t,i._a,i,e)}var lt=0,Zt=1,Nt=2,et=3,Rt=4,Kt=5,bi=6,g_=7,v_=8;function b_(e,t){return(e%t+t)%t}var Ge;Array.prototype.indexOf?Ge=Array.prototype.indexOf:Ge=function(e){var t;for(t=0;t<this.length;++t)if(this[t]===e)return t;return-1};function ur(e,t){if(isNaN(e)||isNaN(t))return NaN;var i=b_(t,12);return e+=(t-i)/12,i===1?nr(e)?29:28:31-i%7%2}fe("M",["MM",2],"Mo",function(){return this.month()+1});fe("MMM",0,0,function(e){return this.localeData().monthsShort(this,e)});fe("MMMM",0,0,function(e){return this.localeData().months(this,e)});ft("month","M");dt("month",8);le("M",xe);le("MM",xe,St);le("MMM",function(e,t){return t.monthsShortRegex(e)});le("MMMM",function(e,t){return t.monthsRegex(e)});He(["M","MM"],function(e,t){t[Zt]=Se(e)-1});He(["MMM","MMMM"],function(e,t,i,s){var r=i._locale.monthsParse(e,s,i._strict);r!=null?t[Zt]=r:ge(i).invalidMonth=e});var y_="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),Nl="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),Vl=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/,C_=gs,S_=gs;function w_(e,t){return e?Bt(this._months)?this._months[e.month()]:this._months[(this._months.isFormat||Vl).test(t)?"format":"standalone"][e.month()]:Bt(this._months)?this._months:this._months.standalone}function k_(e,t){return e?Bt(this._monthsShort)?this._monthsShort[e.month()]:this._monthsShort[Vl.test(t)?"format":"standalone"][e.month()]:Bt(this._monthsShort)?this._monthsShort:this._monthsShort.standalone}function L_(e,t,i){var s,r,n,l=e.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],s=0;s<12;++s)n=Ut([2e3,s]),this._shortMonthsParse[s]=this.monthsShort(n,"").toLocaleLowerCase(),this._longMonthsParse[s]=this.months(n,"").toLocaleLowerCase();return i?t==="MMM"?(r=Ge.call(this._shortMonthsParse,l),r!==-1?r:null):(r=Ge.call(this._longMonthsParse,l),r!==-1?r:null):t==="MMM"?(r=Ge.call(this._shortMonthsParse,l),r!==-1?r:(r=Ge.call(this._longMonthsParse,l),r!==-1?r:null)):(r=Ge.call(this._longMonthsParse,l),r!==-1?r:(r=Ge.call(this._shortMonthsParse,l),r!==-1?r:null))}function E_(e,t,i){var s,r,n;if(this._monthsParseExact)return L_.call(this,e,t,i);for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),s=0;s<12;s++){if(r=Ut([2e3,s]),i&&!this._longMonthsParse[s]&&(this._longMonthsParse[s]=new RegExp("^"+this.months(r,"").replace(".","")+"$","i"),this._shortMonthsParse[s]=new RegExp("^"+this.monthsShort(r,"").replace(".","")+"$","i")),!i&&!this._monthsParse[s]&&(n="^"+this.months(r,"")+"|^"+this.monthsShort(r,""),this._monthsParse[s]=new RegExp(n.replace(".",""),"i")),i&&t==="MMMM"&&this._longMonthsParse[s].test(e))return s;if(i&&t==="MMM"&&this._shortMonthsParse[s].test(e))return s;if(!i&&this._monthsParse[s].test(e))return s}}function jl(e,t){var i;if(!e.isValid())return e;if(typeof t=="string"){if(/^\d+$/.test(t))t=Se(t);else if(t=e.localeData().monthsParse(t),!Xt(t))return e}return i=Math.min(e.date(),ur(e.year(),t)),e._d["set"+(e._isUTC?"UTC":"")+"Month"](t,i),e}function Fl(e){return e!=null?(jl(this,e),oe.updateOffset(this,!0),this):Fs(this,"Month")}function M_(){return ur(this.year(),this.month())}function D_(e){return this._monthsParseExact?(Me(this,"_monthsRegex")||Ul.call(this),e?this._monthsShortStrictRegex:this._monthsShortRegex):(Me(this,"_monthsShortRegex")||(this._monthsShortRegex=C_),this._monthsShortStrictRegex&&e?this._monthsShortStrictRegex:this._monthsShortRegex)}function T_(e){return this._monthsParseExact?(Me(this,"_monthsRegex")||Ul.call(this),e?this._monthsStrictRegex:this._monthsRegex):(Me(this,"_monthsRegex")||(this._monthsRegex=S_),this._monthsStrictRegex&&e?this._monthsStrictRegex:this._monthsRegex)}function Ul(){function e(l,o){return o.length-l.length}var t=[],i=[],s=[],r,n;for(r=0;r<12;r++)n=Ut([2e3,r]),t.push(this.monthsShort(n,"")),i.push(this.months(n,"")),s.push(this.months(n,"")),s.push(this.monthsShort(n,""));for(t.sort(e),i.sort(e),s.sort(e),r=0;r<12;r++)t[r]=bt(t[r]),i[r]=bt(i[r]);for(r=0;r<24;r++)s[r]=bt(s[r]);this._monthsRegex=new RegExp("^("+s.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp("^("+i.join("|")+")","i"),this._monthsShortStrictRegex=new RegExp("^("+t.join("|")+")","i")}fe("Y",0,0,function(){var e=this.year();return e<=9999?jt(e,4):"+"+e});fe(0,["YY",2],0,function(){return this.year()%100});fe(0,["YYYY",4],0,"year");fe(0,["YYYYY",5],0,"year");fe(0,["YYYYYY",6,!0],0,"year");ft("year","y");dt("year",1);le("Y",cr);le("YY",xe,St);le("YYYY",Tn,Dn);le("YYYYY",lr,or);le("YYYYYY",lr,or);He(["YYYYY","YYYYYY"],lt);He("YYYY",function(e,t){t[lt]=e.length===2?oe.parseTwoDigitYear(e):Se(e)});He("YY",function(e,t){t[lt]=oe.parseTwoDigitYear(e)});He("Y",function(e,t){t[lt]=parseInt(e,10)});function ns(e){return nr(e)?366:365}oe.parseTwoDigitYear=function(e){return Se(e)+(Se(e)>68?1900:2e3)};var Wl=Wi("FullYear",!0);function R_(){return nr(this.year())}function A_(e,t,i,s,r,n,l){var o;return e<100&&e>=0?(o=new Date(e+400,t,i,s,r,n,l),isFinite(o.getFullYear())&&o.setFullYear(e)):o=new Date(e,t,i,s,r,n,l),o}function cs(e){var t,i;return e<100&&e>=0?(i=Array.prototype.slice.call(arguments),i[0]=e+400,t=new Date(Date.UTC.apply(null,i)),isFinite(t.getUTCFullYear())&&t.setUTCFullYear(e)):t=new Date(Date.UTC.apply(null,arguments)),t}function Ws(e,t,i){var s=7+t-i,r=(7+cs(e,0,s).getUTCDay()-t)%7;return-r+s-1}function Yl(e,t,i,s,r){var n=(7+i-s)%7,l=Ws(e,s,r),o=1+7*(t-1)+n+l,a,c;return o<=0?(a=e-1,c=ns(a)+o):o>ns(e)?(a=e+1,c=o-ns(e)):(a=e,c=o),{year:a,dayOfYear:c}}function hs(e,t,i){var s=Ws(e.year(),t,i),r=Math.floor((e.dayOfYear()-s-1)/7)+1,n,l;return r<1?(l=e.year()-1,n=r+$t(l,t,i)):r>$t(e.year(),t,i)?(n=r-$t(e.year(),t,i),l=e.year()+1):(l=e.year(),n=r),{week:n,year:l}}function $t(e,t,i){var s=Ws(e,t,i),r=Ws(e+1,t,i);return(ns(e)-s+r)/7}fe("w",["ww",2],"wo","week");fe("W",["WW",2],"Wo","isoWeek");ft("week","w");ft("isoWeek","W");dt("week",5);dt("isoWeek",5);le("w",xe);le("ww",xe,St);le("W",xe);le("WW",xe,St);vs(["w","ww","W","WW"],function(e,t,i,s){t[s.substr(0,1)]=Se(e)});function O_(e){return hs(e,this._week.dow,this._week.doy).week}var B_={dow:0,doy:6};function H_(){return this._week.dow}function P_(){return this._week.doy}function x_(e){var t=this.localeData().week(this);return e==null?t:this.add((e-t)*7,"d")}function I_(e){var t=hs(this,1,4).week;return e==null?t:this.add((e-t)*7,"d")}fe("d",0,"do","day");fe("dd",0,0,function(e){return this.localeData().weekdaysMin(this,e)});fe("ddd",0,0,function(e){return this.localeData().weekdaysShort(this,e)});fe("dddd",0,0,function(e){return this.localeData().weekdays(this,e)});fe("e",0,0,"weekday");fe("E",0,0,"isoWeekday");ft("day","d");ft("weekday","e");ft("isoWeekday","E");dt("day",11);dt("weekday",11);dt("isoWeekday",11);le("d",xe);le("e",xe);le("E",xe);le("dd",function(e,t){return t.weekdaysMinRegex(e)});le("ddd",function(e,t){return t.weekdaysShortRegex(e)});le("dddd",function(e,t){return t.weekdaysRegex(e)});vs(["dd","ddd","dddd"],function(e,t,i,s){var r=i._locale.weekdaysParse(e,s,i._strict);r!=null?t.d=r:ge(i).invalidWeekday=e});vs(["d","e","E"],function(e,t,i,s){t[s]=Se(e)});function N_(e,t){return typeof e!="string"?e:isNaN(e)?(e=t.weekdaysParse(e),typeof e=="number"?e:null):parseInt(e,10)}function V_(e,t){return typeof e=="string"?t.weekdaysParse(e)%7||7:isNaN(e)?null:e}function Rn(e,t){return e.slice(t,7).concat(e.slice(0,t))}var j_="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),zl="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),F_="Su_Mo_Tu_We_Th_Fr_Sa".split("_"),U_=gs,W_=gs,Y_=gs;function z_(e,t){var i=Bt(this._weekdays)?this._weekdays:this._weekdays[e&&e!==!0&&this._weekdays.isFormat.test(t)?"format":"standalone"];return e===!0?Rn(i,this._week.dow):e?i[e.day()]:i}function q_(e){return e===!0?Rn(this._weekdaysShort,this._week.dow):e?this._weekdaysShort[e.day()]:this._weekdaysShort}function Z_(e){return e===!0?Rn(this._weekdaysMin,this._week.dow):e?this._weekdaysMin[e.day()]:this._weekdaysMin}function K_(e,t,i){var s,r,n,l=e.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],s=0;s<7;++s)n=Ut([2e3,1]).day(s),this._minWeekdaysParse[s]=this.weekdaysMin(n,"").toLocaleLowerCase(),this._shortWeekdaysParse[s]=this.weekdaysShort(n,"").toLocaleLowerCase(),this._weekdaysParse[s]=this.weekdays(n,"").toLocaleLowerCase();return i?t==="dddd"?(r=Ge.call(this._weekdaysParse,l),r!==-1?r:null):t==="ddd"?(r=Ge.call(this._shortWeekdaysParse,l),r!==-1?r:null):(r=Ge.call(this._minWeekdaysParse,l),r!==-1?r:null):t==="dddd"?(r=Ge.call(this._weekdaysParse,l),r!==-1||(r=Ge.call(this._shortWeekdaysParse,l),r!==-1)?r:(r=Ge.call(this._minWeekdaysParse,l),r!==-1?r:null)):t==="ddd"?(r=Ge.call(this._shortWeekdaysParse,l),r!==-1||(r=Ge.call(this._weekdaysParse,l),r!==-1)?r:(r=Ge.call(this._minWeekdaysParse,l),r!==-1?r:null)):(r=Ge.call(this._minWeekdaysParse,l),r!==-1||(r=Ge.call(this._weekdaysParse,l),r!==-1)?r:(r=Ge.call(this._shortWeekdaysParse,l),r!==-1?r:null))}function G_(e,t,i){var s,r,n;if(this._weekdaysParseExact)return K_.call(this,e,t,i);for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),s=0;s<7;s++){if(r=Ut([2e3,1]).day(s),i&&!this._fullWeekdaysParse[s]&&(this._fullWeekdaysParse[s]=new RegExp("^"+this.weekdays(r,"").replace(".","\\.?")+"$","i"),this._shortWeekdaysParse[s]=new RegExp("^"+this.weekdaysShort(r,"").replace(".","\\.?")+"$","i"),this._minWeekdaysParse[s]=new RegExp("^"+this.weekdaysMin(r,"").replace(".","\\.?")+"$","i")),this._weekdaysParse[s]||(n="^"+this.weekdays(r,"")+"|^"+this.weekdaysShort(r,"")+"|^"+this.weekdaysMin(r,""),this._weekdaysParse[s]=new RegExp(n.replace(".",""),"i")),i&&t==="dddd"&&this._fullWeekdaysParse[s].test(e))return s;if(i&&t==="ddd"&&this._shortWeekdaysParse[s].test(e))return s;if(i&&t==="dd"&&this._minWeekdaysParse[s].test(e))return s;if(!i&&this._weekdaysParse[s].test(e))return s}}function $_(e){if(!this.isValid())return e!=null?this:NaN;var t=this._isUTC?this._d.getUTCDay():this._d.getDay();return e!=null?(e=N_(e,this.localeData()),this.add(e-t,"d")):t}function J_(e){if(!this.isValid())return e!=null?this:NaN;var t=(this.day()+7-this.localeData()._week.dow)%7;return e==null?t:this.add(e-t,"d")}function X_(e){if(!this.isValid())return e!=null?this:NaN;if(e!=null){var t=V_(e,this.localeData());return this.day(this.day()%7?t:t-7)}else return this.day()||7}function Q_(e){return this._weekdaysParseExact?(Me(this,"_weekdaysRegex")||An.call(this),e?this._weekdaysStrictRegex:this._weekdaysRegex):(Me(this,"_weekdaysRegex")||(this._weekdaysRegex=U_),this._weekdaysStrictRegex&&e?this._weekdaysStrictRegex:this._weekdaysRegex)}function e2(e){return this._weekdaysParseExact?(Me(this,"_weekdaysRegex")||An.call(this),e?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):(Me(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=W_),this._weekdaysShortStrictRegex&&e?this._weekdaysShortStrictRegex:this._weekdaysShortRegex)}function t2(e){return this._weekdaysParseExact?(Me(this,"_weekdaysRegex")||An.call(this),e?this._weekdaysMinStrictRegex:this._weekdaysMinRegex):(Me(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=Y_),this._weekdaysMinStrictRegex&&e?this._weekdaysMinStrictRegex:this._weekdaysMinRegex)}function An(){function e(f,u){return u.length-f.length}var t=[],i=[],s=[],r=[],n,l,o,a,c;for(n=0;n<7;n++)l=Ut([2e3,1]).day(n),o=bt(this.weekdaysMin(l,"")),a=bt(this.weekdaysShort(l,"")),c=bt(this.weekdays(l,"")),t.push(o),i.push(a),s.push(c),r.push(o),r.push(a),r.push(c);t.sort(e),i.sort(e),s.sort(e),r.sort(e),this._weekdaysRegex=new RegExp("^("+r.join("|")+")","i"),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=new RegExp("^("+s.join("|")+")","i"),this._weekdaysShortStrictRegex=new RegExp("^("+i.join("|")+")","i"),this._weekdaysMinStrictRegex=new RegExp("^("+t.join("|")+")","i")}function On(){return this.hours()%12||12}function i2(){return this.hours()||24}fe("H",["HH",2],0,"hour");fe("h",["hh",2],0,On);fe("k",["kk",2],0,i2);fe("hmm",0,0,function(){return""+On.apply(this)+jt(this.minutes(),2)});fe("hmmss",0,0,function(){return""+On.apply(this)+jt(this.minutes(),2)+jt(this.seconds(),2)});fe("Hmm",0,0,function(){return""+this.hours()+jt(this.minutes(),2)});fe("Hmmss",0,0,function(){return""+this.hours()+jt(this.minutes(),2)+jt(this.seconds(),2)});function ql(e,t){fe(e,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),t)})}ql("a",!0);ql("A",!1);ft("hour","h");dt("hour",13);function Zl(e,t){return t._meridiemParse}le("a",Zl);le("A",Zl);le("H",xe);le("h",xe);le("k",xe);le("HH",xe,St);le("hh",xe,St);le("kk",xe,St);le("hmm",xl);le("hmmss",Il);le("Hmm",xl);le("Hmmss",Il);He(["H","HH"],et);He(["k","kk"],function(e,t,i){var s=Se(e);t[et]=s===24?0:s});He(["a","A"],function(e,t,i){i._isPm=i._locale.isPM(e),i._meridiem=e});He(["h","hh"],function(e,t,i){t[et]=Se(e),ge(i).bigHour=!0});He("hmm",function(e,t,i){var s=e.length-2;t[et]=Se(e.substr(0,s)),t[Rt]=Se(e.substr(s)),ge(i).bigHour=!0});He("hmmss",function(e,t,i){var s=e.length-4,r=e.length-2;t[et]=Se(e.substr(0,s)),t[Rt]=Se(e.substr(s,2)),t[Kt]=Se(e.substr(r)),ge(i).bigHour=!0});He("Hmm",function(e,t,i){var s=e.length-2;t[et]=Se(e.substr(0,s)),t[Rt]=Se(e.substr(s))});He("Hmmss",function(e,t,i){var s=e.length-4,r=e.length-2;t[et]=Se(e.substr(0,s)),t[Rt]=Se(e.substr(s,2)),t[Kt]=Se(e.substr(r))});function s2(e){return(e+"").toLowerCase().charAt(0)==="p"}var r2=/[ap]\.?m?\.?/i,n2=Wi("Hours",!0);function o2(e,t,i){return e>11?i?"pm":"PM":i?"am":"AM"}var Kl={calendar:G0,longDateFormat:Q0,invalidDate:t_,ordinal:s_,dayOfMonthOrdinalParse:r_,relativeTime:o_,months:y_,monthsShort:Nl,week:B_,weekdays:j_,weekdaysMin:F_,weekdaysShort:zl,meridiemParse:r2},Ne={},Ji={},us;function a2(e,t){var i,s=Math.min(e.length,t.length);for(i=0;i<s;i+=1)if(e[i]!==t[i])return i;return s}function ca(e){return e&&e.toLowerCase().replace("_","-")}function l2(e){for(var t=0,i,s,r,n;t<e.length;){for(n=ca(e[t]).split("-"),i=n.length,s=ca(e[t+1]),s=s?s.split("-"):null;i>0;){if(r=fr(n.slice(0,i).join("-")),r)return r;if(s&&s.length>=i&&a2(n,s)>=i-1)break;i--}t++}return us}function c2(e){return e.match("^[^/\\\\]*$")!=null}function fr(e){var t=null,i;if(Ne[e]===void 0&&typeof module<"u"&&module&&module.exports&&c2(e))try{t=us._abbr,i=require,i("./locale/"+e),fi(t)}catch{Ne[e]=null}return Ne[e]}function fi(e,t){var i;return e&&(gt(t)?i=ti(e):i=Bn(e,t),i?us=i:typeof console<"u"&&console.warn&&console.warn("Locale "+e+" not found. Did you forget to load it?")),us._abbr}function Bn(e,t){if(t!==null){var i,s=Kl;if(t.abbr=e,Ne[e]!=null)Rl("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),s=Ne[e]._config;else if(t.parentLocale!=null)if(Ne[t.parentLocale]!=null)s=Ne[t.parentLocale]._config;else if(i=fr(t.parentLocale),i!=null)s=i._config;else return Ji[t.parentLocale]||(Ji[t.parentLocale]=[]),Ji[t.parentLocale].push({name:e,config:t}),null;return Ne[e]=new Ln(tn(s,t)),Ji[e]&&Ji[e].forEach(function(r){Bn(r.name,r.config)}),fi(e),Ne[e]}else return delete Ne[e],null}function h2(e,t){if(t!=null){var i,s,r=Kl;Ne[e]!=null&&Ne[e].parentLocale!=null?Ne[e].set(tn(Ne[e]._config,t)):(s=fr(e),s!=null&&(r=s._config),t=tn(r,t),s==null&&(t.abbr=e),i=new Ln(t),i.parentLocale=Ne[e],Ne[e]=i),fi(e)}else Ne[e]!=null&&(Ne[e].parentLocale!=null?(Ne[e]=Ne[e].parentLocale,e===fi()&&fi(e)):Ne[e]!=null&&delete Ne[e]);return Ne[e]}function ti(e){var t;if(e&&e._locale&&e._locale._abbr&&(e=e._locale._abbr),!e)return us;if(!Bt(e)){if(t=fr(e),t)return t;e=[e]}return l2(e)}function u2(){return sn(Ne)}function Hn(e){var t,i=e._a;return i&&ge(e).overflow===-2&&(t=i[Zt]<0||i[Zt]>11?Zt:i[Nt]<1||i[Nt]>ur(i[lt],i[Zt])?Nt:i[et]<0||i[et]>24||i[et]===24&&(i[Rt]!==0||i[Kt]!==0||i[bi]!==0)?et:i[Rt]<0||i[Rt]>59?Rt:i[Kt]<0||i[Kt]>59?Kt:i[bi]<0||i[bi]>999?bi:-1,ge(e)._overflowDayOfYear&&(t<lt||t>Nt)&&(t=Nt),ge(e)._overflowWeeks&&t===-1&&(t=g_),ge(e)._overflowWeekday&&t===-1&&(t=v_),ge(e).overflow=t),e}var f2=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,d2=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d|))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,_2=/Z|[+-]\d\d(?::?\d\d)?/,Ss=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/],["YYYYMM",/\d{6}/,!1],["YYYY",/\d{4}/,!1]],Ar=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],p2=/^\/?Date\((-?\d+)/i,m2=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\d{4}))$/,g2={UT:0,GMT:0,EDT:-4*60,EST:-5*60,CDT:-5*60,CST:-6*60,MDT:-6*60,MST:-7*60,PDT:-7*60,PST:-8*60};function Gl(e){var t,i,s=e._i,r=f2.exec(s)||d2.exec(s),n,l,o,a,c=Ss.length,f=Ar.length;if(r){for(ge(e).iso=!0,t=0,i=c;t<i;t++)if(Ss[t][1].exec(r[1])){l=Ss[t][0],n=Ss[t][2]!==!1;break}if(l==null){e._isValid=!1;return}if(r[3]){for(t=0,i=f;t<i;t++)if(Ar[t][1].exec(r[3])){o=(r[2]||" ")+Ar[t][0];break}if(o==null){e._isValid=!1;return}}if(!n&&o!=null){e._isValid=!1;return}if(r[4])if(_2.exec(r[4]))a="Z";else{e._isValid=!1;return}e._f=l+(o||"")+(a||""),xn(e)}else e._isValid=!1}function v2(e,t,i,s,r,n){var l=[b2(e),Nl.indexOf(t),parseInt(i,10),parseInt(s,10),parseInt(r,10)];return n&&l.push(parseInt(n,10)),l}function b2(e){var t=parseInt(e,10);return t<=49?2e3+t:t<=999?1900+t:t}function y2(e){return e.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").replace(/^\s\s*/,"").replace(/\s\s*$/,"")}function C2(e,t,i){if(e){var s=zl.indexOf(e),r=new Date(t[0],t[1],t[2]).getDay();if(s!==r)return ge(i).weekdayMismatch=!0,i._isValid=!1,!1}return!0}function S2(e,t,i){if(e)return g2[e];if(t)return 0;var s=parseInt(i,10),r=s%100,n=(s-r)/100;return n*60+r}function $l(e){var t=m2.exec(y2(e._i)),i;if(t){if(i=v2(t[4],t[3],t[2],t[5],t[6],t[7]),!C2(t[1],i,e))return;e._a=i,e._tzm=S2(t[8],t[9],t[10]),e._d=cs.apply(null,e._a),e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm),ge(e).rfc2822=!0}else e._isValid=!1}function w2(e){var t=p2.exec(e._i);if(t!==null){e._d=new Date(+t[1]);return}if(Gl(e),e._isValid===!1)delete e._isValid;else return;if($l(e),e._isValid===!1)delete e._isValid;else return;e._strict?e._isValid=!1:oe.createFromInputFallback(e)}oe.createFromInputFallback=Mt("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are discouraged. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",function(e){e._d=new Date(e._i+(e._useUTC?" UTC":""))});function Ai(e,t,i){return e??t??i}function k2(e){var t=new Date(oe.now());return e._useUTC?[t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate()]:[t.getFullYear(),t.getMonth(),t.getDate()]}function Pn(e){var t,i,s=[],r,n,l;if(!e._d){for(r=k2(e),e._w&&e._a[Nt]==null&&e._a[Zt]==null&&L2(e),e._dayOfYear!=null&&(l=Ai(e._a[lt],r[lt]),(e._dayOfYear>ns(l)||e._dayOfYear===0)&&(ge(e)._overflowDayOfYear=!0),i=cs(l,0,e._dayOfYear),e._a[Zt]=i.getUTCMonth(),e._a[Nt]=i.getUTCDate()),t=0;t<3&&e._a[t]==null;++t)e._a[t]=s[t]=r[t];for(;t<7;t++)e._a[t]=s[t]=e._a[t]==null?t===2?1:0:e._a[t];e._a[et]===24&&e._a[Rt]===0&&e._a[Kt]===0&&e._a[bi]===0&&(e._nextDay=!0,e._a[et]=0),e._d=(e._useUTC?cs:A_).apply(null,s),n=e._useUTC?e._d.getUTCDay():e._d.getDay(),e._tzm!=null&&e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm),e._nextDay&&(e._a[et]=24),e._w&&typeof e._w.d<"u"&&e._w.d!==n&&(ge(e).weekdayMismatch=!0)}}function L2(e){var t,i,s,r,n,l,o,a,c;t=e._w,t.GG!=null||t.W!=null||t.E!=null?(n=1,l=4,i=Ai(t.GG,e._a[lt],hs(Pe(),1,4).year),s=Ai(t.W,1),r=Ai(t.E,1),(r<1||r>7)&&(a=!0)):(n=e._locale._week.dow,l=e._locale._week.doy,c=hs(Pe(),n,l),i=Ai(t.gg,e._a[lt],c.year),s=Ai(t.w,c.week),t.d!=null?(r=t.d,(r<0||r>6)&&(a=!0)):t.e!=null?(r=t.e+n,(t.e<0||t.e>6)&&(a=!0)):r=n),s<1||s>$t(i,n,l)?ge(e)._overflowWeeks=!0:a!=null?ge(e)._overflowWeekday=!0:(o=Yl(i,s,r,n,l),e._a[lt]=o.year,e._dayOfYear=o.dayOfYear)}oe.ISO_8601=function(){};oe.RFC_2822=function(){};function xn(e){if(e._f===oe.ISO_8601){Gl(e);return}if(e._f===oe.RFC_2822){$l(e);return}e._a=[],ge(e).empty=!0;var t=""+e._i,i,s,r,n,l,o=t.length,a=0,c,f;for(r=Al(e._f,e._locale).match(En)||[],f=r.length,i=0;i<f;i++)n=r[i],s=(t.match(__(n,e))||[])[0],s&&(l=t.substr(0,t.indexOf(s)),l.length>0&&ge(e).unusedInput.push(l),t=t.slice(t.indexOf(s)+s.length),a+=s.length),Hi[n]?(s?ge(e).empty=!1:ge(e).unusedTokens.push(n),m_(n,s,e)):e._strict&&!s&&ge(e).unusedTokens.push(n);ge(e).charsLeftOver=o-a,t.length>0&&ge(e).unusedInput.push(t),e._a[et]<=12&&ge(e).bigHour===!0&&e._a[et]>0&&(ge(e).bigHour=void 0),ge(e).parsedDateParts=e._a.slice(0),ge(e).meridiem=e._meridiem,e._a[et]=E2(e._locale,e._a[et],e._meridiem),c=ge(e).era,c!==null&&(e._a[lt]=e._locale.erasConvertYear(c,e._a[lt])),Pn(e),Hn(e)}function E2(e,t,i){var s;return i==null?t:e.meridiemHour!=null?e.meridiemHour(t,i):(e.isPM!=null&&(s=e.isPM(i),s&&t<12&&(t+=12),!s&&t===12&&(t=0)),t)}function M2(e){var t,i,s,r,n,l,o=!1,a=e._f.length;if(a===0){ge(e).invalidFormat=!0,e._d=new Date(NaN);return}for(r=0;r<a;r++)n=0,l=!1,t=kn({},e),e._useUTC!=null&&(t._useUTC=e._useUTC),t._f=e._f[r],xn(t),wn(t)&&(l=!0),n+=ge(t).charsLeftOver,n+=ge(t).unusedTokens.length*10,ge(t).score=n,o?n<s&&(s=n,i=t):(s==null||n<s||l)&&(s=n,i=t,l&&(o=!0));ci(e,i||t)}function D2(e){if(!e._d){var t=Mn(e._i),i=t.day===void 0?t.date:t.day;e._a=Dl([t.year,t.month,i,t.hour,t.minute,t.second,t.millisecond],function(s){return s&&parseInt(s,10)}),Pn(e)}}function T2(e){var t=new ms(Hn(Jl(e)));return t._nextDay&&(t.add(1,"d"),t._nextDay=void 0),t}function Jl(e){var t=e._i,i=e._f;return e._locale=e._locale||ti(e._l),t===null||i===void 0&&t===""?rr({nullInput:!0}):(typeof t=="string"&&(e._i=t=e._locale.preparse(t)),Ht(t)?new ms(Hn(t)):(ps(t)?e._d=t:Bt(i)?M2(e):i?xn(e):R2(e),wn(e)||(e._d=null),e))}function R2(e){var t=e._i;gt(t)?e._d=new Date(oe.now()):ps(t)?e._d=new Date(t.valueOf()):typeof t=="string"?w2(e):Bt(t)?(e._a=Dl(t.slice(0),function(i){return parseInt(i,10)}),Pn(e)):yi(t)?D2(e):Xt(t)?e._d=new Date(t):oe.createFromInputFallback(e)}function Xl(e,t,i,s,r){var n={};return(t===!0||t===!1)&&(s=t,t=void 0),(i===!0||i===!1)&&(s=i,i=void 0),(yi(e)&&Sn(e)||Bt(e)&&e.length===0)&&(e=void 0),n._isAMomentObject=!0,n._useUTC=n._isUTC=r,n._l=i,n._i=e,n._f=t,n._strict=s,T2(n)}function Pe(e,t,i,s){return Xl(e,t,i,s,!1)}var A2=Mt("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var e=Pe.apply(null,arguments);return this.isValid()&&e.isValid()?e<this?this:e:rr()}),O2=Mt("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var e=Pe.apply(null,arguments);return this.isValid()&&e.isValid()?e>this?this:e:rr()});function Ql(e,t){var i,s;if(t.length===1&&Bt(t[0])&&(t=t[0]),!t.length)return Pe();for(i=t[0],s=1;s<t.length;++s)(!t[s].isValid()||t[s][e](i))&&(i=t[s]);return i}function B2(){var e=[].slice.call(arguments,0);return Ql("isBefore",e)}function H2(){var e=[].slice.call(arguments,0);return Ql("isAfter",e)}var P2=function(){return Date.now?Date.now():+new Date},Xi=["year","quarter","month","week","day","hour","minute","second","millisecond"];function x2(e){var t,i=!1,s,r=Xi.length;for(t in e)if(Me(e,t)&&!(Ge.call(Xi,t)!==-1&&(e[t]==null||!isNaN(e[t]))))return!1;for(s=0;s<r;++s)if(e[Xi[s]]){if(i)return!1;parseFloat(e[Xi[s]])!==Se(e[Xi[s]])&&(i=!0)}return!0}function I2(){return this._isValid}function N2(){return Pt(NaN)}function dr(e){var t=Mn(e),i=t.year||0,s=t.quarter||0,r=t.month||0,n=t.week||t.isoWeek||0,l=t.day||0,o=t.hour||0,a=t.minute||0,c=t.second||0,f=t.millisecond||0;this._isValid=x2(t),this._milliseconds=+f+c*1e3+a*6e4+o*1e3*60*60,this._days=+l+n*7,this._months=+r+s*3+i*12,this._data={},this._locale=ti(),this._bubble()}function xs(e){return e instanceof dr}function nn(e){return e<0?Math.round(-1*e)*-1:Math.round(e)}function V2(e,t,i){var s=Math.min(e.length,t.length),r=Math.abs(e.length-t.length),n=0,l;for(l=0;l<s;l++)(i&&e[l]!==t[l]||!i&&Se(e[l])!==Se(t[l]))&&n++;return n+r}function ec(e,t){fe(e,0,0,function(){var i=this.utcOffset(),s="+";return i<0&&(i=-i,s="-"),s+jt(~~(i/60),2)+t+jt(~~i%60,2)})}ec("Z",":");ec("ZZ","");le("Z",hr);le("ZZ",hr);He(["Z","ZZ"],function(e,t,i){i._useUTC=!0,i._tzm=In(hr,e)});var j2=/([\+\-]|\d\d)/gi;function In(e,t){var i=(t||"").match(e),s,r,n;return i===null?null:(s=i[i.length-1]||[],r=(s+"").match(j2)||["-",0,0],n=+(r[1]*60)+Se(r[2]),n===0?0:r[0]==="+"?n:-n)}function Nn(e,t){var i,s;return t._isUTC?(i=t.clone(),s=(Ht(e)||ps(e)?e.valueOf():Pe(e).valueOf())-i.valueOf(),i._d.setTime(i._d.valueOf()+s),oe.updateOffset(i,!1),i):Pe(e).local()}function on(e){return-Math.round(e._d.getTimezoneOffset())}oe.updateOffset=function(){};function F2(e,t,i){var s=this._offset||0,r;if(!this.isValid())return e!=null?this:NaN;if(e!=null){if(typeof e=="string"){if(e=In(hr,e),e===null)return this}else Math.abs(e)<16&&!i&&(e=e*60);return!this._isUTC&&t&&(r=on(this)),this._offset=e,this._isUTC=!0,r!=null&&this.add(r,"m"),s!==e&&(!t||this._changeInProgress?sc(this,Pt(e-s,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,oe.updateOffset(this,!0),this._changeInProgress=null)),this}else return this._isUTC?s:on(this)}function U2(e,t){return e!=null?(typeof e!="string"&&(e=-e),this.utcOffset(e,t),this):-this.utcOffset()}function W2(e){return this.utcOffset(0,e)}function Y2(e){return this._isUTC&&(this.utcOffset(0,e),this._isUTC=!1,e&&this.subtract(on(this),"m")),this}function z2(){if(this._tzm!=null)this.utcOffset(this._tzm,!1,!0);else if(typeof this._i=="string"){var e=In(f_,this._i);e!=null?this.utcOffset(e):this.utcOffset(0,!0)}return this}function q2(e){return this.isValid()?(e=e?Pe(e).utcOffset():0,(this.utcOffset()-e)%60===0):!1}function Z2(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()}function K2(){if(!gt(this._isDSTShifted))return this._isDSTShifted;var e={},t;return kn(e,this),e=Jl(e),e._a?(t=e._isUTC?Ut(e._a):Pe(e._a),this._isDSTShifted=this.isValid()&&V2(e._a,t.toArray())>0):this._isDSTShifted=!1,this._isDSTShifted}function G2(){return this.isValid()?!this._isUTC:!1}function $2(){return this.isValid()?this._isUTC:!1}function tc(){return this.isValid()?this._isUTC&&this._offset===0:!1}var J2=/^(-|\+)?(?:(\d*)[. ])?(\d+):(\d+)(?::(\d+)(\.\d*)?)?$/,X2=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;function Pt(e,t){var i=e,s=null,r,n,l;return xs(e)?i={ms:e._milliseconds,d:e._days,M:e._months}:Xt(e)||!isNaN(+e)?(i={},t?i[t]=+e:i.milliseconds=+e):(s=J2.exec(e))?(r=s[1]==="-"?-1:1,i={y:0,d:Se(s[Nt])*r,h:Se(s[et])*r,m:Se(s[Rt])*r,s:Se(s[Kt])*r,ms:Se(nn(s[bi]*1e3))*r}):(s=X2.exec(e))?(r=s[1]==="-"?-1:1,i={y:gi(s[2],r),M:gi(s[3],r),w:gi(s[4],r),d:gi(s[5],r),h:gi(s[6],r),m:gi(s[7],r),s:gi(s[8],r)}):i==null?i={}:typeof i=="object"&&("from"in i||"to"in i)&&(l=Q2(Pe(i.from),Pe(i.to)),i={},i.ms=l.milliseconds,i.M=l.months),n=new dr(i),xs(e)&&Me(e,"_locale")&&(n._locale=e._locale),xs(e)&&Me(e,"_isValid")&&(n._isValid=e._isValid),n}Pt.fn=dr.prototype;Pt.invalid=N2;function gi(e,t){var i=e&&parseFloat(e.replace(",","."));return(isNaN(i)?0:i)*t}function ha(e,t){var i={};return i.months=t.month()-e.month()+(t.year()-e.year())*12,e.clone().add(i.months,"M").isAfter(t)&&--i.months,i.milliseconds=+t-+e.clone().add(i.months,"M"),i}function Q2(e,t){var i;return e.isValid()&&t.isValid()?(t=Nn(t,e),e.isBefore(t)?i=ha(e,t):(i=ha(t,e),i.milliseconds=-i.milliseconds,i.months=-i.months),i):{milliseconds:0,months:0}}function ic(e,t){return function(i,s){var r,n;return s!==null&&!isNaN(+s)&&(Rl(t,"moment()."+t+"(period, number) is deprecated. Please use moment()."+t+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."),n=i,i=s,s=n),r=Pt(i,s),sc(this,r,e),this}}function sc(e,t,i,s){var r=t._milliseconds,n=nn(t._days),l=nn(t._months);e.isValid()&&(s=s??!0,l&&jl(e,Fs(e,"Month")+l*i),n&&Bl(e,"Date",Fs(e,"Date")+n*i),r&&e._d.setTime(e._d.valueOf()+r*i),s&&oe.updateOffset(e,n||l))}var ep=ic(1,"add"),tp=ic(-1,"subtract");function rc(e){return typeof e=="string"||e instanceof String}function ip(e){return Ht(e)||ps(e)||rc(e)||Xt(e)||rp(e)||sp(e)||e===null||e===void 0}function sp(e){var t=yi(e)&&!Sn(e),i=!1,s=["years","year","y","months","month","M","days","day","d","dates","date","D","hours","hour","h","minutes","minute","m","seconds","second","s","milliseconds","millisecond","ms"],r,n,l=s.length;for(r=0;r<l;r+=1)n=s[r],i=i||Me(e,n);return t&&i}function rp(e){var t=Bt(e),i=!1;return t&&(i=e.filter(function(s){return!Xt(s)&&rc(e)}).length===0),t&&i}function np(e){var t=yi(e)&&!Sn(e),i=!1,s=["sameDay","nextDay","lastDay","nextWeek","lastWeek","sameElse"],r,n;for(r=0;r<s.length;r+=1)n=s[r],i=i||Me(e,n);return t&&i}function op(e,t){var i=e.diff(t,"days",!0);return i<-6?"sameElse":i<-1?"lastWeek":i<0?"lastDay":i<1?"sameDay":i<2?"nextDay":i<7?"nextWeek":"sameElse"}function ap(e,t){arguments.length===1&&(arguments[0]?ip(arguments[0])?(e=arguments[0],t=void 0):np(arguments[0])&&(t=arguments[0],e=void 0):(e=void 0,t=void 0));var i=e||Pe(),s=Nn(i,this).startOf("day"),r=oe.calendarFormat(this,s)||"sameElse",n=t&&(Wt(t[r])?t[r].call(this,i):t[r]);return this.format(n||this.localeData().calendar(r,this,Pe(i)))}function lp(){return new ms(this)}function cp(e,t){var i=Ht(e)?e:Pe(e);return this.isValid()&&i.isValid()?(t=Dt(t)||"millisecond",t==="millisecond"?this.valueOf()>i.valueOf():i.valueOf()<this.clone().startOf(t).valueOf()):!1}function hp(e,t){var i=Ht(e)?e:Pe(e);return this.isValid()&&i.isValid()?(t=Dt(t)||"millisecond",t==="millisecond"?this.valueOf()<i.valueOf():this.clone().endOf(t).valueOf()<i.valueOf()):!1}function up(e,t,i,s){var r=Ht(e)?e:Pe(e),n=Ht(t)?t:Pe(t);return this.isValid()&&r.isValid()&&n.isValid()?(s=s||"()",(s[0]==="("?this.isAfter(r,i):!this.isBefore(r,i))&&(s[1]===")"?this.isBefore(n,i):!this.isAfter(n,i))):!1}function fp(e,t){var i=Ht(e)?e:Pe(e),s;return this.isValid()&&i.isValid()?(t=Dt(t)||"millisecond",t==="millisecond"?this.valueOf()===i.valueOf():(s=i.valueOf(),this.clone().startOf(t).valueOf()<=s&&s<=this.clone().endOf(t).valueOf())):!1}function dp(e,t){return this.isSame(e,t)||this.isAfter(e,t)}function _p(e,t){return this.isSame(e,t)||this.isBefore(e,t)}function pp(e,t,i){var s,r,n;if(!this.isValid())return NaN;if(s=Nn(e,this),!s.isValid())return NaN;switch(r=(s.utcOffset()-this.utcOffset())*6e4,t=Dt(t),t){case"year":n=Is(this,s)/12;break;case"month":n=Is(this,s);break;case"quarter":n=Is(this,s)/3;break;case"second":n=(this-s)/1e3;break;case"minute":n=(this-s)/6e4;break;case"hour":n=(this-s)/36e5;break;case"day":n=(this-s-r)/864e5;break;case"week":n=(this-s-r)/6048e5;break;default:n=this-s}return i?n:Lt(n)}function Is(e,t){if(e.date()<t.date())return-Is(t,e);var i=(t.year()-e.year())*12+(t.month()-e.month()),s=e.clone().add(i,"months"),r,n;return t-s<0?(r=e.clone().add(i-1,"months"),n=(t-s)/(s-r)):(r=e.clone().add(i+1,"months"),n=(t-s)/(r-s)),-(i+n)||0}oe.defaultFormat="YYYY-MM-DDTHH:mm:ssZ";oe.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";function mp(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")}function gp(e){if(!this.isValid())return null;var t=e!==!0,i=t?this.clone().utc():this;return i.year()<0||i.year()>9999?Ps(i,t?"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYYYY-MM-DD[T]HH:mm:ss.SSSZ"):Wt(Date.prototype.toISOString)?t?this.toDate().toISOString():new Date(this.valueOf()+this.utcOffset()*60*1e3).toISOString().replace("Z",Ps(i,"Z")):Ps(i,t?"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYY-MM-DD[T]HH:mm:ss.SSSZ")}function vp(){if(!this.isValid())return"moment.invalid(/* "+this._i+" */)";var e="moment",t="",i,s,r,n;return this.isLocal()||(e=this.utcOffset()===0?"moment.utc":"moment.parseZone",t="Z"),i="["+e+'("]',s=0<=this.year()&&this.year()<=9999?"YYYY":"YYYYYY",r="-MM-DD[T]HH:mm:ss.SSS",n=t+'[")]',this.format(i+s+r+n)}function bp(e){e||(e=this.isUtc()?oe.defaultFormatUtc:oe.defaultFormat);var t=Ps(this,e);return this.localeData().postformat(t)}function yp(e,t){return this.isValid()&&(Ht(e)&&e.isValid()||Pe(e).isValid())?Pt({to:this,from:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()}function Cp(e){return this.from(Pe(),e)}function Sp(e,t){return this.isValid()&&(Ht(e)&&e.isValid()||Pe(e).isValid())?Pt({from:this,to:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()}function wp(e){return this.to(Pe(),e)}function nc(e){var t;return e===void 0?this._locale._abbr:(t=ti(e),t!=null&&(this._locale=t),this)}var oc=Mt("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(e){return e===void 0?this.localeData():this.locale(e)});function ac(){return this._locale}var Ys=1e3,Pi=60*Ys,zs=60*Pi,lc=(365*400+97)*24*zs;function xi(e,t){return(e%t+t)%t}function cc(e,t,i){return e<100&&e>=0?new Date(e+400,t,i)-lc:new Date(e,t,i).valueOf()}function hc(e,t,i){return e<100&&e>=0?Date.UTC(e+400,t,i)-lc:Date.UTC(e,t,i)}function kp(e){var t,i;if(e=Dt(e),e===void 0||e==="millisecond"||!this.isValid())return this;switch(i=this._isUTC?hc:cc,e){case"year":t=i(this.year(),0,1);break;case"quarter":t=i(this.year(),this.month()-this.month()%3,1);break;case"month":t=i(this.year(),this.month(),1);break;case"week":t=i(this.year(),this.month(),this.date()-this.weekday());break;case"isoWeek":t=i(this.year(),this.month(),this.date()-(this.isoWeekday()-1));break;case"day":case"date":t=i(this.year(),this.month(),this.date());break;case"hour":t=this._d.valueOf(),t-=xi(t+(this._isUTC?0:this.utcOffset()*Pi),zs);break;case"minute":t=this._d.valueOf(),t-=xi(t,Pi);break;case"second":t=this._d.valueOf(),t-=xi(t,Ys);break}return this._d.setTime(t),oe.updateOffset(this,!0),this}function Lp(e){var t,i;if(e=Dt(e),e===void 0||e==="millisecond"||!this.isValid())return this;switch(i=this._isUTC?hc:cc,e){case"year":t=i(this.year()+1,0,1)-1;break;case"quarter":t=i(this.year(),this.month()-this.month()%3+3,1)-1;break;case"month":t=i(this.year(),this.month()+1,1)-1;break;case"week":t=i(this.year(),this.month(),this.date()-this.weekday()+7)-1;break;case"isoWeek":t=i(this.year(),this.month(),this.date()-(this.isoWeekday()-1)+7)-1;break;case"day":case"date":t=i(this.year(),this.month(),this.date()+1)-1;break;case"hour":t=this._d.valueOf(),t+=zs-xi(t+(this._isUTC?0:this.utcOffset()*Pi),zs)-1;break;case"minute":t=this._d.valueOf(),t+=Pi-xi(t,Pi)-1;break;case"second":t=this._d.valueOf(),t+=Ys-xi(t,Ys)-1;break}return this._d.setTime(t),oe.updateOffset(this,!0),this}function Ep(){return this._d.valueOf()-(this._offset||0)*6e4}function Mp(){return Math.floor(this.valueOf()/1e3)}function Dp(){return new Date(this.valueOf())}function Tp(){var e=this;return[e.year(),e.month(),e.date(),e.hour(),e.minute(),e.second(),e.millisecond()]}function Rp(){var e=this;return{years:e.year(),months:e.month(),date:e.date(),hours:e.hours(),minutes:e.minutes(),seconds:e.seconds(),milliseconds:e.milliseconds()}}function Ap(){return this.isValid()?this.toISOString():null}function Op(){return wn(this)}function Bp(){return ci({},ge(this))}function Hp(){return ge(this).overflow}function Pp(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}}fe("N",0,0,"eraAbbr");fe("NN",0,0,"eraAbbr");fe("NNN",0,0,"eraAbbr");fe("NNNN",0,0,"eraName");fe("NNNNN",0,0,"eraNarrow");fe("y",["y",1],"yo","eraYear");fe("y",["yy",2],0,"eraYear");fe("y",["yyy",3],0,"eraYear");fe("y",["yyyy",4],0,"eraYear");le("N",Vn);le("NN",Vn);le("NNN",Vn);le("NNNN",qp);le("NNNNN",Zp);He(["N","NN","NNN","NNNN","NNNNN"],function(e,t,i,s){var r=i._locale.erasParse(e,s,i._strict);r?ge(i).era=r:ge(i).invalidEra=e});le("y",Yi);le("yy",Yi);le("yyy",Yi);le("yyyy",Yi);le("yo",Kp);He(["y","yy","yyy","yyyy"],lt);He(["yo"],function(e,t,i,s){var r;i._locale._eraYearOrdinalRegex&&(r=e.match(i._locale._eraYearOrdinalRegex)),i._locale.eraYearOrdinalParse?t[lt]=i._locale.eraYearOrdinalParse(e,r):t[lt]=parseInt(e,10)});function xp(e,t){var i,s,r,n=this._eras||ti("en")._eras;for(i=0,s=n.length;i<s;++i){switch(typeof n[i].since){case"string":r=oe(n[i].since).startOf("day"),n[i].since=r.valueOf();break}switch(typeof n[i].until){case"undefined":n[i].until=1/0;break;case"string":r=oe(n[i].until).startOf("day").valueOf(),n[i].until=r.valueOf();break}}return n}function Ip(e,t,i){var s,r,n=this.eras(),l,o,a;for(e=e.toUpperCase(),s=0,r=n.length;s<r;++s)if(l=n[s].name.toUpperCase(),o=n[s].abbr.toUpperCase(),a=n[s].narrow.toUpperCase(),i)switch(t){case"N":case"NN":case"NNN":if(o===e)return n[s];break;case"NNNN":if(l===e)return n[s];break;case"NNNNN":if(a===e)return n[s];break}else if([l,o,a].indexOf(e)>=0)return n[s]}function Np(e,t){var i=e.since<=e.until?1:-1;return t===void 0?oe(e.since).year():oe(e.since).year()+(t-e.offset)*i}function Vp(){var e,t,i,s=this.localeData().eras();for(e=0,t=s.length;e<t;++e)if(i=this.clone().startOf("day").valueOf(),s[e].since<=i&&i<=s[e].until||s[e].until<=i&&i<=s[e].since)return s[e].name;return""}function jp(){var e,t,i,s=this.localeData().eras();for(e=0,t=s.length;e<t;++e)if(i=this.clone().startOf("day").valueOf(),s[e].since<=i&&i<=s[e].until||s[e].until<=i&&i<=s[e].since)return s[e].narrow;return""}function Fp(){var e,t,i,s=this.localeData().eras();for(e=0,t=s.length;e<t;++e)if(i=this.clone().startOf("day").valueOf(),s[e].since<=i&&i<=s[e].until||s[e].until<=i&&i<=s[e].since)return s[e].abbr;return""}function Up(){var e,t,i,s,r=this.localeData().eras();for(e=0,t=r.length;e<t;++e)if(i=r[e].since<=r[e].until?1:-1,s=this.clone().startOf("day").valueOf(),r[e].since<=s&&s<=r[e].until||r[e].until<=s&&s<=r[e].since)return(this.year()-oe(r[e].since).year())*i+r[e].offset;return this.year()}function Wp(e){return Me(this,"_erasNameRegex")||jn.call(this),e?this._erasNameRegex:this._erasRegex}function Yp(e){return Me(this,"_erasAbbrRegex")||jn.call(this),e?this._erasAbbrRegex:this._erasRegex}function zp(e){return Me(this,"_erasNarrowRegex")||jn.call(this),e?this._erasNarrowRegex:this._erasRegex}function Vn(e,t){return t.erasAbbrRegex(e)}function qp(e,t){return t.erasNameRegex(e)}function Zp(e,t){return t.erasNarrowRegex(e)}function Kp(e,t){return t._eraYearOrdinalRegex||Yi}function jn(){var e=[],t=[],i=[],s=[],r,n,l=this.eras();for(r=0,n=l.length;r<n;++r)t.push(bt(l[r].name)),e.push(bt(l[r].abbr)),i.push(bt(l[r].narrow)),s.push(bt(l[r].name)),s.push(bt(l[r].abbr)),s.push(bt(l[r].narrow));this._erasRegex=new RegExp("^("+s.join("|")+")","i"),this._erasNameRegex=new RegExp("^("+t.join("|")+")","i"),this._erasAbbrRegex=new RegExp("^("+e.join("|")+")","i"),this._erasNarrowRegex=new RegExp("^("+i.join("|")+")","i")}fe(0,["gg",2],0,function(){return this.weekYear()%100});fe(0,["GG",2],0,function(){return this.isoWeekYear()%100});function _r(e,t){fe(0,[e,e.length],0,t)}_r("gggg","weekYear");_r("ggggg","weekYear");_r("GGGG","isoWeekYear");_r("GGGGG","isoWeekYear");ft("weekYear","gg");ft("isoWeekYear","GG");dt("weekYear",1);dt("isoWeekYear",1);le("G",cr);le("g",cr);le("GG",xe,St);le("gg",xe,St);le("GGGG",Tn,Dn);le("gggg",Tn,Dn);le("GGGGG",lr,or);le("ggggg",lr,or);vs(["gggg","ggggg","GGGG","GGGGG"],function(e,t,i,s){t[s.substr(0,2)]=Se(e)});vs(["gg","GG"],function(e,t,i,s){t[s]=oe.parseTwoDigitYear(e)});function Gp(e){return uc.call(this,e,this.week(),this.weekday(),this.localeData()._week.dow,this.localeData()._week.doy)}function $p(e){return uc.call(this,e,this.isoWeek(),this.isoWeekday(),1,4)}function Jp(){return $t(this.year(),1,4)}function Xp(){return $t(this.isoWeekYear(),1,4)}function Qp(){var e=this.localeData()._week;return $t(this.year(),e.dow,e.doy)}function e3(){var e=this.localeData()._week;return $t(this.weekYear(),e.dow,e.doy)}function uc(e,t,i,s,r){var n;return e==null?hs(this,s,r).year:(n=$t(e,s,r),t>n&&(t=n),t3.call(this,e,t,i,s,r))}function t3(e,t,i,s,r){var n=Yl(e,t,i,s,r),l=cs(n.year,0,n.dayOfYear);return this.year(l.getUTCFullYear()),this.month(l.getUTCMonth()),this.date(l.getUTCDate()),this}fe("Q",0,"Qo","quarter");ft("quarter","Q");dt("quarter",7);le("Q",Hl);He("Q",function(e,t){t[Zt]=(Se(e)-1)*3});function i3(e){return e==null?Math.ceil((this.month()+1)/3):this.month((e-1)*3+this.month()%3)}fe("D",["DD",2],"Do","date");ft("date","D");dt("date",9);le("D",xe);le("DD",xe,St);le("Do",function(e,t){return e?t._dayOfMonthOrdinalParse||t._ordinalParse:t._dayOfMonthOrdinalParseLenient});He(["D","DD"],Nt);He("Do",function(e,t){t[Nt]=Se(e.match(xe)[0])});var fc=Wi("Date",!0);fe("DDD",["DDDD",3],"DDDo","dayOfYear");ft("dayOfYear","DDD");dt("dayOfYear",4);le("DDD",ar);le("DDDD",Pl);He(["DDD","DDDD"],function(e,t,i){i._dayOfYear=Se(e)});function s3(e){var t=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return e==null?t:this.add(e-t,"d")}fe("m",["mm",2],0,"minute");ft("minute","m");dt("minute",14);le("m",xe);le("mm",xe,St);He(["m","mm"],Rt);var r3=Wi("Minutes",!1);fe("s",["ss",2],0,"second");ft("second","s");dt("second",15);le("s",xe);le("ss",xe,St);He(["s","ss"],Kt);var n3=Wi("Seconds",!1);fe("S",0,0,function(){return~~(this.millisecond()/100)});fe(0,["SS",2],0,function(){return~~(this.millisecond()/10)});fe(0,["SSS",3],0,"millisecond");fe(0,["SSSS",4],0,function(){return this.millisecond()*10});fe(0,["SSSSS",5],0,function(){return this.millisecond()*100});fe(0,["SSSSSS",6],0,function(){return this.millisecond()*1e3});fe(0,["SSSSSSS",7],0,function(){return this.millisecond()*1e4});fe(0,["SSSSSSSS",8],0,function(){return this.millisecond()*1e5});fe(0,["SSSSSSSSS",9],0,function(){return this.millisecond()*1e6});ft("millisecond","ms");dt("millisecond",16);le("S",ar,Hl);le("SS",ar,St);le("SSS",ar,Pl);var hi,dc;for(hi="SSSS";hi.length<=9;hi+="S")le(hi,Yi);function o3(e,t){t[bi]=Se(("0."+e)*1e3)}for(hi="S";hi.length<=9;hi+="S")He(hi,o3);dc=Wi("Milliseconds",!1);fe("z",0,0,"zoneAbbr");fe("zz",0,0,"zoneName");function a3(){return this._isUTC?"UTC":""}function l3(){return this._isUTC?"Coordinated Universal Time":""}var X=ms.prototype;X.add=ep;X.calendar=ap;X.clone=lp;X.diff=pp;X.endOf=Lp;X.format=bp;X.from=yp;X.fromNow=Cp;X.to=Sp;X.toNow=wp;X.get=h_;X.invalidAt=Hp;X.isAfter=cp;X.isBefore=hp;X.isBetween=up;X.isSame=fp;X.isSameOrAfter=dp;X.isSameOrBefore=_p;X.isValid=Op;X.lang=oc;X.locale=nc;X.localeData=ac;X.max=O2;X.min=A2;X.parsingFlags=Bp;X.set=u_;X.startOf=kp;X.subtract=tp;X.toArray=Tp;X.toObject=Rp;X.toDate=Dp;X.toISOString=gp;X.inspect=vp;typeof Symbol<"u"&&Symbol.for!=null&&(X[Symbol.for("nodejs.util.inspect.custom")]=function(){return"Moment<"+this.format()+">"});X.toJSON=Ap;X.toString=mp;X.unix=Mp;X.valueOf=Ep;X.creationData=Pp;X.eraName=Vp;X.eraNarrow=jp;X.eraAbbr=Fp;X.eraYear=Up;X.year=Wl;X.isLeapYear=R_;X.weekYear=Gp;X.isoWeekYear=$p;X.quarter=X.quarters=i3;X.month=Fl;X.daysInMonth=M_;X.week=X.weeks=x_;X.isoWeek=X.isoWeeks=I_;X.weeksInYear=Qp;X.weeksInWeekYear=e3;X.isoWeeksInYear=Jp;X.isoWeeksInISOWeekYear=Xp;X.date=fc;X.day=X.days=$_;X.weekday=J_;X.isoWeekday=X_;X.dayOfYear=s3;X.hour=X.hours=n2;X.minute=X.minutes=r3;X.second=X.seconds=n3;X.millisecond=X.milliseconds=dc;X.utcOffset=F2;X.utc=W2;X.local=Y2;X.parseZone=z2;X.hasAlignedHourOffset=q2;X.isDST=Z2;X.isLocal=G2;X.isUtcOffset=$2;X.isUtc=tc;X.isUTC=tc;X.zoneAbbr=a3;X.zoneName=l3;X.dates=Mt("dates accessor is deprecated. Use date instead.",fc);X.months=Mt("months accessor is deprecated. Use month instead",Fl);X.years=Mt("years accessor is deprecated. Use year instead",Wl);X.zone=Mt("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",U2);X.isDSTShifted=Mt("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",K2);function c3(e){return Pe(e*1e3)}function h3(){return Pe.apply(null,arguments).parseZone()}function _c(e){return e}var De=Ln.prototype;De.calendar=$0;De.longDateFormat=e_;De.invalidDate=i_;De.ordinal=n_;De.preparse=_c;De.postformat=_c;De.relativeTime=a_;De.pastFuture=l_;De.set=K0;De.eras=xp;De.erasParse=Ip;De.erasConvertYear=Np;De.erasAbbrRegex=Yp;De.erasNameRegex=Wp;De.erasNarrowRegex=zp;De.months=w_;De.monthsShort=k_;De.monthsParse=E_;De.monthsRegex=T_;De.monthsShortRegex=D_;De.week=O_;De.firstDayOfYear=P_;De.firstDayOfWeek=H_;De.weekdays=z_;De.weekdaysMin=Z_;De.weekdaysShort=q_;De.weekdaysParse=G_;De.weekdaysRegex=Q_;De.weekdaysShortRegex=e2;De.weekdaysMinRegex=t2;De.isPM=s2;De.meridiem=o2;function qs(e,t,i,s){var r=ti(),n=Ut().set(s,t);return r[i](n,e)}function pc(e,t,i){if(Xt(e)&&(t=e,e=void 0),e=e||"",t!=null)return qs(e,t,i,"month");var s,r=[];for(s=0;s<12;s++)r[s]=qs(e,s,i,"month");return r}function Fn(e,t,i,s){typeof e=="boolean"?(Xt(t)&&(i=t,t=void 0),t=t||""):(t=e,i=t,e=!1,Xt(t)&&(i=t,t=void 0),t=t||"");var r=ti(),n=e?r._week.dow:0,l,o=[];if(i!=null)return qs(t,(i+n)%7,s,"day");for(l=0;l<7;l++)o[l]=qs(t,(l+n)%7,s,"day");return o}function u3(e,t){return pc(e,t,"months")}function f3(e,t){return pc(e,t,"monthsShort")}function d3(e,t,i){return Fn(e,t,i,"weekdays")}function _3(e,t,i){return Fn(e,t,i,"weekdaysShort")}function p3(e,t,i){return Fn(e,t,i,"weekdaysMin")}fi("en",{eras:[{since:"0001-01-01",until:1/0,offset:1,name:"Anno Domini",narrow:"AD",abbr:"AD"},{since:"0000-12-31",until:-1/0,offset:1,name:"Before Christ",narrow:"BC",abbr:"BC"}],dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(e){var t=e%10,i=Se(e%100/10)===1?"th":t===1?"st":t===2?"nd":t===3?"rd":"th";return e+i}});oe.lang=Mt("moment.lang is deprecated. Use moment.locale instead.",fi);oe.langData=Mt("moment.langData is deprecated. Use moment.localeData instead.",ti);var Yt=Math.abs;function m3(){var e=this._data;return this._milliseconds=Yt(this._milliseconds),this._days=Yt(this._days),this._months=Yt(this._months),e.milliseconds=Yt(e.milliseconds),e.seconds=Yt(e.seconds),e.minutes=Yt(e.minutes),e.hours=Yt(e.hours),e.months=Yt(e.months),e.years=Yt(e.years),this}function mc(e,t,i,s){var r=Pt(t,i);return e._milliseconds+=s*r._milliseconds,e._days+=s*r._days,e._months+=s*r._months,e._bubble()}function g3(e,t){return mc(this,e,t,1)}function v3(e,t){return mc(this,e,t,-1)}function ua(e){return e<0?Math.floor(e):Math.ceil(e)}function b3(){var e=this._milliseconds,t=this._days,i=this._months,s=this._data,r,n,l,o,a;return e>=0&&t>=0&&i>=0||e<=0&&t<=0&&i<=0||(e+=ua(an(i)+t)*864e5,t=0,i=0),s.milliseconds=e%1e3,r=Lt(e/1e3),s.seconds=r%60,n=Lt(r/60),s.minutes=n%60,l=Lt(n/60),s.hours=l%24,t+=Lt(l/24),a=Lt(gc(t)),i+=a,t-=ua(an(a)),o=Lt(i/12),i%=12,s.days=t,s.months=i,s.years=o,this}function gc(e){return e*4800/146097}function an(e){return e*146097/4800}function y3(e){if(!this.isValid())return NaN;var t,i,s=this._milliseconds;if(e=Dt(e),e==="month"||e==="quarter"||e==="year")switch(t=this._days+s/864e5,i=this._months+gc(t),e){case"month":return i;case"quarter":return i/3;case"year":return i/12}else switch(t=this._days+Math.round(an(this._months)),e){case"week":return t/7+s/6048e5;case"day":return t+s/864e5;case"hour":return t*24+s/36e5;case"minute":return t*1440+s/6e4;case"second":return t*86400+s/1e3;case"millisecond":return Math.floor(t*864e5)+s;default:throw new Error("Unknown unit "+e)}}function C3(){return this.isValid()?this._milliseconds+this._days*864e5+this._months%12*2592e6+Se(this._months/12)*31536e6:NaN}function ii(e){return function(){return this.as(e)}}var S3=ii("ms"),w3=ii("s"),k3=ii("m"),L3=ii("h"),E3=ii("d"),M3=ii("w"),D3=ii("M"),T3=ii("Q"),R3=ii("y");function A3(){return Pt(this)}function O3(e){return e=Dt(e),this.isValid()?this[e+"s"]():NaN}function ki(e){return function(){return this.isValid()?this._data[e]:NaN}}var B3=ki("milliseconds"),H3=ki("seconds"),P3=ki("minutes"),x3=ki("hours"),I3=ki("days"),N3=ki("months"),V3=ki("years");function j3(){return Lt(this.days()/7)}var zt=Math.round,Oi={ss:44,s:45,m:45,h:22,d:26,w:null,M:11};function F3(e,t,i,s,r){return r.relativeTime(t||1,!!i,e,s)}function U3(e,t,i,s){var r=Pt(e).abs(),n=zt(r.as("s")),l=zt(r.as("m")),o=zt(r.as("h")),a=zt(r.as("d")),c=zt(r.as("M")),f=zt(r.as("w")),u=zt(r.as("y")),m=n<=i.ss&&["s",n]||n<i.s&&["ss",n]||l<=1&&["m"]||l<i.m&&["mm",l]||o<=1&&["h"]||o<i.h&&["hh",o]||a<=1&&["d"]||a<i.d&&["dd",a];return i.w!=null&&(m=m||f<=1&&["w"]||f<i.w&&["ww",f]),m=m||c<=1&&["M"]||c<i.M&&["MM",c]||u<=1&&["y"]||["yy",u],m[2]=t,m[3]=+e>0,m[4]=s,F3.apply(null,m)}function W3(e){return e===void 0?zt:typeof e=="function"?(zt=e,!0):!1}function Y3(e,t){return Oi[e]===void 0?!1:t===void 0?Oi[e]:(Oi[e]=t,e==="s"&&(Oi.ss=t-1),!0)}function z3(e,t){if(!this.isValid())return this.localeData().invalidDate();var i=!1,s=Oi,r,n;return typeof e=="object"&&(t=e,e=!1),typeof e=="boolean"&&(i=e),typeof t=="object"&&(s=Object.assign({},Oi,t),t.s!=null&&t.ss==null&&(s.ss=t.s-1)),r=this.localeData(),n=U3(this,!i,s,r),i&&(n=r.pastFuture(+this,n)),r.postformat(n)}var Or=Math.abs;function Di(e){return(e>0)-(e<0)||+e}function pr(){if(!this.isValid())return this.localeData().invalidDate();var e=Or(this._milliseconds)/1e3,t=Or(this._days),i=Or(this._months),s,r,n,l,o=this.asSeconds(),a,c,f,u;return o?(s=Lt(e/60),r=Lt(s/60),e%=60,s%=60,n=Lt(i/12),i%=12,l=e?e.toFixed(3).replace(/\.?0+$/,""):"",a=o<0?"-":"",c=Di(this._months)!==Di(o)?"-":"",f=Di(this._days)!==Di(o)?"-":"",u=Di(this._milliseconds)!==Di(o)?"-":"",a+"P"+(n?c+n+"Y":"")+(i?c+i+"M":"")+(t?f+t+"D":"")+(r||s||e?"T":"")+(r?u+r+"H":"")+(s?u+s+"M":"")+(e?u+l+"S":"")):"P0D"}var Le=dr.prototype;Le.isValid=I2;Le.abs=m3;Le.add=g3;Le.subtract=v3;Le.as=y3;Le.asMilliseconds=S3;Le.asSeconds=w3;Le.asMinutes=k3;Le.asHours=L3;Le.asDays=E3;Le.asWeeks=M3;Le.asMonths=D3;Le.asQuarters=T3;Le.asYears=R3;Le.valueOf=C3;Le._bubble=b3;Le.clone=A3;Le.get=O3;Le.milliseconds=B3;Le.seconds=H3;Le.minutes=P3;Le.hours=x3;Le.days=I3;Le.weeks=j3;Le.months=N3;Le.years=V3;Le.humanize=z3;Le.toISOString=pr;Le.toString=pr;Le.toJSON=pr;Le.locale=nc;Le.localeData=ac;Le.toIsoString=Mt("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",pr);Le.lang=oc;fe("X",0,0,"unix");fe("x",0,0,"valueOf");le("x",cr);le("X",d_);He("X",function(e,t,i){i._d=new Date(parseFloat(e)*1e3)});He("x",function(e,t,i){i._d=new Date(Se(e))});//! moment.js
oe.version="2.29.4";q0(Pe);oe.fn=X;oe.min=B2;oe.max=H2;oe.now=P2;oe.utc=Ut;oe.unix=c3;oe.months=u3;oe.isDate=ps;oe.locale=fi;oe.invalid=rr;oe.duration=Pt;oe.isMoment=Ht;oe.weekdays=d3;oe.parseZone=h3;oe.localeData=ti;oe.isDuration=xs;oe.monthsShort=f3;oe.weekdaysMin=p3;oe.defineLocale=Bn;oe.updateLocale=h2;oe.locales=u2;oe.weekdaysShort=_3;oe.normalizeUnits=Dt;oe.relativeTimeRounding=W3;oe.relativeTimeThreshold=Y3;oe.calendarFormat=op;oe.prototype=X;oe.HTML5_FMT={DATETIME_LOCAL:"YYYY-MM-DDTHH:mm",DATETIME_LOCAL_SECONDS:"YYYY-MM-DDTHH:mm:ss",DATETIME_LOCAL_MS:"YYYY-MM-DDTHH:mm:ss.SSS",DATE:"YYYY-MM-DD",TIME:"HH:mm",TIME_SECONDS:"HH:mm:ss",TIME_MS:"HH:mm:ss.SSS",WEEK:"GGGG-[W]WW",MONTH:"YYYY-MM"};function q3(e){let t,i,s,r;const n=[e[1]];let l={};for(let o=0;o<n.length;o+=1)l=Qt(l,n[o]);return t=new Ll({props:l}),s=new Y0({props:{roots:e[0]}}),s.$on("open",e[2]),s.$on("menu",e[3]),s.$on("fold",K3),s.$on("unfold",G3),{c(){te(t.$$.fragment),i=ue(),te(s.$$.fragment)},m(o,a){Q(t,o,a),J(o,i,a),Q(s,o,a),r=!0},p(o,[a]){const c=a&2?_i(n,[wi(o[1])]):{};t.$set(c);const f={};a&1&&(f.roots=o[0]),s.$set(f)},i(o){r||(j(t.$$.fragment,o),j(s.$$.fragment,o),r=!0)},o(o){U(t.$$.fragment,o),U(s.$$.fragment,o),r=!1},d(o){o&&$(i),ee(t,o),ee(s,o)}}}const ws="/",ai="/respurces",Z3="#icon-jupyter-client-simple",ks="/kernelspecs",fa="#icon-jupyter-client-kernelspec",Qi="/kernels",da="#icon-jupyter-client-kernel",es="/sessions",_a="#icon-jupyter-client-session",Br="YYYY-MM-DD hh:mm:ss";function K3(e){e.detail.props.folded.set(!0)}async function G3(e){e.detail.props.folded.set(!1)}function $3(e,t,i){let{plugin:s}=t,{kernelspecs:r={default:"",kernelspecs:{}}}=t,{kernels:n=[]}=t,{sessions:l=[]}=t,{currentSpec:o=""}=t,{currentKernel:a=""}=t,{currentSession:c=""}=t,{currentDocument:f=""}=t;async function u(k,C,w){const E=[];for(const[A,O]of Object.entries(k.kernelspecs)){if(!O)continue;const T=`${ai}/${O.name}`,P={type:me.Folder,name:O.name,path:T,directory:ai,focus:O.name===o,folded:!1,icon:s.kernelName2logoObjectURL.has(O.name)?s.kernelName2logoObjectURL.get(O.name):await s.loadKernelSpecIcon(O),iconAriaLabel:O.language,text:O.name,textAriaLabel:O.display_name};P.children=await(async()=>{var Z;const F=[],z=await((Z=s.bridge)==null?void 0:Z.call("jupyter.kernels.running"));for(const M of z??[]){if(M.name!==O.name)continue;const B=`${T}/${M.id}`,R=oe(M.last_activity),H={type:me.Folder,name:M.id,path:B,directory:T,focus:M.id===a,folded:!1,icon:`#icon-jupyter-client-kernel-${M.execution_state}`,iconAriaLabel:M.execution_state,text:M.name,textAriaLabel:`${R.format(Br)}<br/>${R.fromNow()}`,title:M.id};H.children=await(async()=>{var he,ce;const N=[],se=await((he=s.bridge)==null?void 0:he.call("jupyter.sessions.running"));for(const be of se??[]){if(((ce=be.kernel)==null?void 0:ce.id)!==M.id)continue;const D=`${B}/${be.id}`,V={type:me.Folder,name:be.id,path:D,directory:B,focus:be.id===c,folded:!1,icon:`#icon-jupyter-client-session-${be.type}`,iconAriaLabel:be.type,text:be.name,textAriaLabel:be.path,title:be.id};V.children=await(async()=>{const K=[],q=s.session2docs.get(be.id);if(q&&q.size>0)for(const _e of q.values()){if(!s.doc2info.has(_e)){const vt=await s.client.getDocInfo({id:_e});s.doc2info.set(_e,vt.data)}const ie=s.doc2info.get(_e),we=`${D}/${ie.id}`,Ie=oe(ie.ial.updated,"YYYYMMDDhhmmss"),Ke={type:me.File,name:ie.id,path:we,directory:D,focus:ie.id===f,icon:/^[1-9a-f]+$/.test(ie.icon)?q1(ie.icon):ie.icon?`/emojis/${ie.icon}`:"📄",text:ie.name,textAriaLabel:`${Ie.format(Br)}<br/>${R.fromNow()}`,title:ie.name};K.push(Ke)}return K})(),V.count=V.children.length,N.push(V)}return N})(),H.count=H.children.length,F.push(H)}return F})(),P.count=P.children.length,E.push(P)}return E}async function m(k){const C=[];for(const[w,E]of Object.entries(k.kernelspecs)){if(!E)continue;const A={type:me.File,name:w,path:`${ks}/${w}`,directory:ks,focus:w===o,icon:fa,text:w,textAriaLabel:E.display_name},O=s.kernelName2logoObjectURL.get(w);O?A.icon=O:A.icon=await s.loadKernelSpecIcon(E),A.iconAriaLabel=E.language,C.push(A)}return C}function v(k){const C=[];for(const w of k){const E=oe(w.last_activity);C.push({type:me.File,name:w.id,path:`${Qi}/${w.id}`,directory:Qi,focus:w.id===a,icon:`#icon-jupyter-client-kernel-${w.execution_state}`,iconAriaLabel:w.execution_state,text:w.name,textAriaLabel:`${E.format(Br)}<br/>${E.fromNow()}`,symlinkIcon:s.kernelName2logoObjectURL.get(w.name)??da,symlinkAriaLabel:s.kernelName2language.get(w.name),symlink:!0,count:w.connections,title:w.id})}return C}function y(k){var w,E,A,O,T;const C=[];for(const P of k)C.push({type:me.File,name:P.id,path:`${es}/${P.id}`,directory:es,focus:P.id===c,icon:`#icon-jupyter-client-session-${P.type}`,iconAriaLabel:P.type,text:P.name,textAriaLabel:`${(w=P.kernel)==null?void 0:w.name}<br/>${P.path}`,symlink:!0,symlinkIcon:s.kernelName2logoObjectURL.get(((E=P.kernel)==null?void 0:E.name)??"")??_a,symlinkAriaLabel:s.kernelName2language.get(((A=P.kernel)==null?void 0:A.name)??""),count:((O=s.session2docs.get(P.id))==null?void 0:O.size)??0,countAriaLabel:(T=P.kernel)==null?void 0:T.execution_state,title:P.id});return C}function g(k,C,w,E){var A;(A=b[0].children)==null||A.forEach((O,T)=>{var P;(P=O.children)==null||P.forEach((F,z)=>{var Z;(Z=F.children)==null||Z.forEach((M,B)=>{var R;(R=M.children)==null||R.forEach((H,N)=>{i(0,b[0].children[T].children[z].children[B].children[N].focus=H.name===E,b)}),i(0,b[0].children[T].children[z].children[B].focus=M.name===w,b)}),i(0,b[0].children[T].children[z].focus=F.name===C,b)}),i(0,b[0].children[T].focus=O.name===k,b)})}function h(k){var C;(C=b[1].children)==null||C.forEach((w,E)=>{i(0,b[1].children[E].focus=w.name===k,b)})}function d(k){var C;(C=b[2].children)==null||C.forEach((w,E)=>{i(0,b[2].children[E].focus=w.name===k,b)})}function _(k){var C;(C=b[3].children)==null||C.forEach((w,E)=>{i(0,b[3].children[E].focus=w.name===k,b)})}const p={logo:"#icon-jupyter-client",title:s.i18n.dock.title,icons:[{icon:"#iconRefresh",type:"refresh",ariaLabel:s.i18n.dock.refresh.ariaLabel,tooltipsDirection:Tt.sw,onClick:async(k,C,w)=>{await s.jupyterForceRefresh()}},{icon:"#iconMin",type:"min",ariaLabel:`${globalThis.siyuan.languages.min} ${s.siyuan.adaptHotkey("⌘W")}`,tooltipsDirection:Tt.sw}]};let b=[{type:me.Root,name:"respurces",path:ai,directory:ws,depth:0,folded:!1,icon:Z3,text:s.i18n.dock.resources.text},{type:me.Root,name:"kernelspec",path:ks,directory:ws,depth:0,folded:!1,icon:fa,text:s.i18n.dock.kernelspecs.text},{type:me.Root,name:"kernels",path:Qi,directory:ws,depth:0,folded:!1,icon:da,text:s.i18n.dock.kernels.text},{type:me.Root,name:"sessions",path:es,directory:ws,depth:0,folded:!1,icon:_a,text:s.i18n.dock.sessions.text}];bn(()=>{for(const k of s.kernelName2logoObjectURL.values())URL.revokeObjectURL(k);s.kernelName2logoObjectURL.clear()});function S(k){const C=k.detail.props,w=li(C.name),E=li(C.path),A=li(C.depth);E.startsWith(ai)&&A===4&&s.siyuan.openTab({app:s.app,doc:{id:w,action:["cb-get-focus","cb-get-hl"]},keepCursor:!1,removeCurrentTab:!1})}async function L(k){const C=k.detail.props,w=li(C.name),E=li(C.path),A=li(C.depth),O=li(C.directory),T=[];if((E===ks||E.startsWith(ai)&&A===0)&&T.push({icon:"iconRefresh",label:s.i18n.dock.refresh.label,click:async()=>{var P;await((P=s.bridge)==null?void 0:P.call("jupyter.kernelspecs.refreshSpecs"))}}),E===Qi&&(T.push({icon:"iconRefresh",label:s.i18n.dock.refresh.label,click:async()=>{var P;await((P=s.bridge)==null?void 0:P.call("jupyter.kernels.refreshRunning"))}}),T.push({type:"separator"}),T.push({icon:"iconClose",label:s.i18n.dock.menu.shutdownAllKernels.label,click:async()=>{var P,F;await((P=s.bridge)==null?void 0:P.call("jupyter.kernels.shutdownAll")),await((F=s.bridge)==null?void 0:F.call("jupyter.sessions.refreshRunning"))}})),(O===Qi||E.startsWith(ai)&&A===2)&&T.push({icon:"iconClose",label:s.i18n.dock.menu.shutdownKernel.label,click:async()=>{var P,F;await((P=s.bridge)==null?void 0:P.call("jupyter.kernels.shutdown",w)),await((F=s.bridge)==null?void 0:F.call("jupyter.sessions.refreshRunning"))}}),E===es&&(T.push({icon:"iconRefresh",label:s.i18n.dock.refresh.label,click:async()=>{var P;await((P=s.bridge)==null?void 0:P.call("jupyter.sessions.refreshRunning"))}}),T.push({type:"separator"}),T.push({icon:"iconClose",label:s.i18n.dock.menu.shutdownAllSessions.label,click:async()=>{var P,F;await((P=s.bridge)==null?void 0:P.call("jupyter.sessions.shutdownAll")),await((F=s.bridge)==null?void 0:F.call("jupyter.kernels.refreshRunning"))}})),(O===es||E.startsWith(ai)&&A===3)&&T.push({icon:"iconClose",label:s.i18n.dock.menu.shutdownSession.label,click:async()=>{var P,F;await((P=s.bridge)==null?void 0:P.call("jupyter.sessions.shutdown",w)),await((F=s.bridge)==null?void 0:F.call("jupyter.kernels.refreshRunning"))}}),E.startsWith(ai)&&A===4){const F=(await s.client.getBlockAttrs({id:w})).data;T.push({icon:"iconOpenWindow",label:s.i18n.menu.open.label,submenu:s.buildOpenDocumentMenuItems(w)}),T.push({type:"separator"}),T.push(...s.buildJupyterDocumentMenuItems(w,F,s.doc2session.get(w),{isDocumentBlock:!0,isMultiBlock:!1,id:w}))}if(z0(T),T.length>0){const P=new s.siyuan.Menu;T.forEach(z=>P.addItem(z));const F=k.detail.e;P.open({x:F.clientX,y:F.clientY,isLeft:!1})}}return e.$$set=k=>{"plugin"in k&&i(4,s=k.plugin),"kernelspecs"in k&&i(5,r=k.kernelspecs),"kernels"in k&&i(6,n=k.kernels),"sessions"in k&&i(7,l=k.sessions),"currentSpec"in k&&i(8,o=k.currentSpec),"currentKernel"in k&&i(9,a=k.currentKernel),"currentSession"in k&&i(10,c=k.currentSession),"currentDocument"in k&&i(11,f=k.currentDocument)},e.$$.update=()=>{e.$$.dirty&224&&(i(0,b[0].count=Object.keys(r.kernelspecs).length,b),u(r).then(k=>{i(0,b[0].children=k,b)})),e.$$.dirty&224&&(i(0,b[1].count=Object.keys(r.kernelspecs).length,b),m(r).then(async k=>{i(0,b[1].children=k,b),i(0,b[2].children=v(n),b),i(0,b[3].children=y(l),b)})),e.$$.dirty&64&&(i(0,b[2].count=n.length,b),i(0,b[2].children=v(n),b)),e.$$.dirty&128&&(i(0,b[3].count=l.length,b),i(0,b[3].children=y(l),b)),e.$$.dirty&3840&&(h(o),d(a),_(c),g(o,a,c,f))},[b,p,S,L,s,r,n,l,o,a,c,f]}class J3 extends Be{constructor(t){super(),Oe(this,t,$3,q3,Re,{plugin:4,kernelspecs:5,kernels:6,sessions:7,currentSpec:8,currentKernel:9,currentSession:10,currentDocument:11})}}function X3(e){let t,i,s,r;const n=[e[2]];let l={};for(let o=0;o<n.length;o+=1)l=Qt(l,n[o]);return t=new Ll({props:l}),{c(){te(t.$$.fragment),i=ue(),s=re("jupyter-xterm-output"),Os(s,"data-stream",e[0]),Os(s,"class","xtrem fn__flex-1 svelte-1gokk8m")},m(o,a){Q(t,o,a),J(o,i,a),J(o,s,a),e[4](s),r=!0},p(o,[a]){const c=a&4?_i(n,[wi(o[2])]):{};t.$set(c),(!r||a&1)&&Os(s,"data-stream",o[0])},i(o){r||(j(t.$$.fragment,o),r=!0)},o(o){U(t.$$.fragment,o),r=!1},d(o){o&&($(i),$(s)),ee(t,o),e[4](null)}}}function Q3(e,t,i){let{plugin:s}=t,{stream:r=""}=t,n;const l={logo:"#icon-jupyter-client-inspect",title:s.i18n.inspectDock.title,icons:[{icon:"#iconMin",type:"min",ariaLabel:`${globalThis.siyuan.languages.min} ${s.siyuan.adaptHotkey("⌘W")}`,tooltipsDirection:Tt.sw}]};function o(a){Ot[a?"unshift":"push"](()=>{n=a,i(1,n)})}return e.$$set=a=>{"plugin"in a&&i(3,s=a.plugin),"stream"in a&&i(0,r=a.stream)},[r,n,l,s,o]}class em extends Be{constructor(t){super(),Oe(this,t,Q3,X3,Re,{plugin:3,stream:0})}}function tm(e){let t,i,s,r,n,l,o,a,c,f,u,m,v;const y=e[8].default,g=Fe(y,e,e[7],null);return{c(){t=re("div"),g&&g.c(),i=ue(),s=re("div"),r=re("button"),n=ct(e[1]),l=ue(),o=re("div"),a=ue(),c=re("button"),f=ct(e[2]),x(t,"class","b3-dialog__content"),pt(t,"user-select",e[0]?"auto":"none"),x(r,"class","b3-button b3-button--cancel"),x(o,"class","fn__space"),x(c,"class","b3-button b3-button--text"),x(s,"class","b3-dialog__action")},m(h,d){J(h,t,d),g&&g.m(t,null),J(h,i,d),J(h,s,d),ae(s,r),ae(r,n),e[9](r),ae(s,l),ae(s,o),ae(s,a),ae(s,c),ae(c,f),e[10](c),u=!0,m||(v=[ve(r,"click",e[5]),ve(c,"click",e[6])],m=!0)},p(h,[d]){g&&g.p&&(!u||d&128)&&We(g,y,h,h[7],u?Ue(y,h[7],d,null):Ye(h[7]),null),d&1&&pt(t,"user-select",h[0]?"auto":"none"),(!u||d&2)&&At(n,h[1]),(!u||d&4)&&At(f,h[2])},i(h){u||(j(g,h),u=!0)},o(h){U(g,h),u=!1},d(h){h&&($(t),$(i),$(s)),g&&g.d(h),e[9](null),e[10](null),m=!1,Qe(v)}}}function im(e,t,i){var g,h,d,_;let{$$slots:s={},$$scope:r}=t,{selectable:n=!0}=t,{cancelButtonText:l=((h=(g=globalThis.siyuan)==null?void 0:g.languages)==null?void 0:h.cancel)??"Cancel"}=t,{confirmButtonText:o=((_=(d=globalThis.siyuan)==null?void 0:d.languages)==null?void 0:_.confirm)??"Confirm"}=t,a,c;const f=ei();function u(p){f("cancel",{event:p})}function m(p){f("confirm",{event:p})}function v(p){Ot[p?"unshift":"push"](()=>{a=p,i(3,a)})}function y(p){Ot[p?"unshift":"push"](()=>{c=p,i(4,c)})}return e.$$set=p=>{"selectable"in p&&i(0,n=p.selectable),"cancelButtonText"in p&&i(1,l=p.cancelButtonText),"confirmButtonText"in p&&i(2,o=p.confirmButtonText),"$$scope"in p&&i(7,r=p.$$scope)},[n,l,o,a,c,u,m,r,s,v,y]}class vc extends Be{constructor(t){super(),Oe(this,t,im,tm,Re,{selectable:0,cancelButtonText:1,confirmButtonText:2})}}let Ls;const sm=new Uint8Array(16);function bc(){if(!Ls&&(Ls=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!Ls))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Ls(sm)}const rm=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function mr(e){return typeof e=="string"&&rm.test(e)}const tt=[];for(let e=0;e<256;++e)tt.push((e+256).toString(16).slice(1));function gr(e,t=0){return tt[e[t+0]]+tt[e[t+1]]+tt[e[t+2]]+tt[e[t+3]]+"-"+tt[e[t+4]]+tt[e[t+5]]+"-"+tt[e[t+6]]+tt[e[t+7]]+"-"+tt[e[t+8]]+tt[e[t+9]]+"-"+tt[e[t+10]]+tt[e[t+11]]+tt[e[t+12]]+tt[e[t+13]]+tt[e[t+14]]+tt[e[t+15]]}function nm(e,t=0){const i=gr(e,t);if(!mr(i))throw TypeError("Stringified UUID is invalid");return i}let pa,Hr,Pr=0,xr=0;function om(e,t,i){let s=t&&i||0;const r=t||new Array(16);e=e||{};let n=e.node||pa,l=e.clockseq!==void 0?e.clockseq:Hr;if(n==null||l==null){const m=e.random||(e.rng||bc)();n==null&&(n=pa=[m[0]|1,m[1],m[2],m[3],m[4],m[5]]),l==null&&(l=Hr=(m[6]<<8|m[7])&16383)}let o=e.msecs!==void 0?e.msecs:Date.now(),a=e.nsecs!==void 0?e.nsecs:xr+1;const c=o-Pr+(a-xr)/1e4;if(c<0&&e.clockseq===void 0&&(l=l+1&16383),(c<0||o>Pr)&&e.nsecs===void 0&&(a=0),a>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");Pr=o,xr=a,Hr=l,o+=122192928e5;const f=((o&268435455)*1e4+a)%4294967296;r[s++]=f>>>24&255,r[s++]=f>>>16&255,r[s++]=f>>>8&255,r[s++]=f&255;const u=o/4294967296*1e4&268435455;r[s++]=u>>>8&255,r[s++]=u&255,r[s++]=u>>>24&15|16,r[s++]=u>>>16&255,r[s++]=l>>>8|128,r[s++]=l&255;for(let m=0;m<6;++m)r[s+m]=n[m];return t||gr(r)}function yc(e){if(!mr(e))throw TypeError("Invalid UUID");let t;const i=new Uint8Array(16);return i[0]=(t=parseInt(e.slice(0,8),16))>>>24,i[1]=t>>>16&255,i[2]=t>>>8&255,i[3]=t&255,i[4]=(t=parseInt(e.slice(9,13),16))>>>8,i[5]=t&255,i[6]=(t=parseInt(e.slice(14,18),16))>>>8,i[7]=t&255,i[8]=(t=parseInt(e.slice(19,23),16))>>>8,i[9]=t&255,i[10]=(t=parseInt(e.slice(24,36),16))/1099511627776&255,i[11]=t/4294967296&255,i[12]=t>>>24&255,i[13]=t>>>16&255,i[14]=t>>>8&255,i[15]=t&255,i}function am(e){e=unescape(encodeURIComponent(e));const t=[];for(let i=0;i<e.length;++i)t.push(e.charCodeAt(i));return t}const lm="6ba7b810-9dad-11d1-80b4-00c04fd430c8",cm="6ba7b811-9dad-11d1-80b4-00c04fd430c8";function Cc(e,t,i){function s(r,n,l,o){var a;if(typeof r=="string"&&(r=am(r)),typeof n=="string"&&(n=yc(n)),((a=n)===null||a===void 0?void 0:a.length)!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let c=new Uint8Array(16+r.length);if(c.set(n),c.set(r,n.length),c=i(c),c[6]=c[6]&15|t,c[8]=c[8]&63|128,l){o=o||0;for(let f=0;f<16;++f)l[o+f]=c[f];return l}return gr(c)}try{s.name=e}catch{}return s.DNS=lm,s.URL=cm,s}function hm(e){if(typeof e=="string"){const t=unescape(encodeURIComponent(e));e=new Uint8Array(t.length);for(let i=0;i<t.length;++i)e[i]=t.charCodeAt(i)}return um(fm(dm(e),e.length*8))}function um(e){const t=[],i=e.length*32,s="0123456789abcdef";for(let r=0;r<i;r+=8){const n=e[r>>5]>>>r%32&255,l=parseInt(s.charAt(n>>>4&15)+s.charAt(n&15),16);t.push(l)}return t}function Sc(e){return(e+64>>>9<<4)+14+1}function fm(e,t){e[t>>5]|=128<<t%32,e[Sc(t)-1]=t;let i=1732584193,s=-271733879,r=-1732584194,n=271733878;for(let l=0;l<e.length;l+=16){const o=i,a=s,c=r,f=n;i=rt(i,s,r,n,e[l],7,-680876936),n=rt(n,i,s,r,e[l+1],12,-389564586),r=rt(r,n,i,s,e[l+2],17,606105819),s=rt(s,r,n,i,e[l+3],22,-1044525330),i=rt(i,s,r,n,e[l+4],7,-176418897),n=rt(n,i,s,r,e[l+5],12,1200080426),r=rt(r,n,i,s,e[l+6],17,-1473231341),s=rt(s,r,n,i,e[l+7],22,-45705983),i=rt(i,s,r,n,e[l+8],7,1770035416),n=rt(n,i,s,r,e[l+9],12,-1958414417),r=rt(r,n,i,s,e[l+10],17,-42063),s=rt(s,r,n,i,e[l+11],22,-1990404162),i=rt(i,s,r,n,e[l+12],7,1804603682),n=rt(n,i,s,r,e[l+13],12,-40341101),r=rt(r,n,i,s,e[l+14],17,-1502002290),s=rt(s,r,n,i,e[l+15],22,1236535329),i=nt(i,s,r,n,e[l+1],5,-165796510),n=nt(n,i,s,r,e[l+6],9,-1069501632),r=nt(r,n,i,s,e[l+11],14,643717713),s=nt(s,r,n,i,e[l],20,-373897302),i=nt(i,s,r,n,e[l+5],5,-701558691),n=nt(n,i,s,r,e[l+10],9,38016083),r=nt(r,n,i,s,e[l+15],14,-660478335),s=nt(s,r,n,i,e[l+4],20,-405537848),i=nt(i,s,r,n,e[l+9],5,568446438),n=nt(n,i,s,r,e[l+14],9,-1019803690),r=nt(r,n,i,s,e[l+3],14,-187363961),s=nt(s,r,n,i,e[l+8],20,1163531501),i=nt(i,s,r,n,e[l+13],5,-1444681467),n=nt(n,i,s,r,e[l+2],9,-51403784),r=nt(r,n,i,s,e[l+7],14,1735328473),s=nt(s,r,n,i,e[l+12],20,-1926607734),i=ot(i,s,r,n,e[l+5],4,-378558),n=ot(n,i,s,r,e[l+8],11,-2022574463),r=ot(r,n,i,s,e[l+11],16,1839030562),s=ot(s,r,n,i,e[l+14],23,-35309556),i=ot(i,s,r,n,e[l+1],4,-1530992060),n=ot(n,i,s,r,e[l+4],11,1272893353),r=ot(r,n,i,s,e[l+7],16,-155497632),s=ot(s,r,n,i,e[l+10],23,-1094730640),i=ot(i,s,r,n,e[l+13],4,681279174),n=ot(n,i,s,r,e[l],11,-358537222),r=ot(r,n,i,s,e[l+3],16,-722521979),s=ot(s,r,n,i,e[l+6],23,76029189),i=ot(i,s,r,n,e[l+9],4,-640364487),n=ot(n,i,s,r,e[l+12],11,-421815835),r=ot(r,n,i,s,e[l+15],16,530742520),s=ot(s,r,n,i,e[l+2],23,-995338651),i=at(i,s,r,n,e[l],6,-198630844),n=at(n,i,s,r,e[l+7],10,1126891415),r=at(r,n,i,s,e[l+14],15,-1416354905),s=at(s,r,n,i,e[l+5],21,-57434055),i=at(i,s,r,n,e[l+12],6,1700485571),n=at(n,i,s,r,e[l+3],10,-1894986606),r=at(r,n,i,s,e[l+10],15,-1051523),s=at(s,r,n,i,e[l+1],21,-2054922799),i=at(i,s,r,n,e[l+8],6,1873313359),n=at(n,i,s,r,e[l+15],10,-30611744),r=at(r,n,i,s,e[l+6],15,-1560198380),s=at(s,r,n,i,e[l+13],21,1309151649),i=at(i,s,r,n,e[l+4],6,-145523070),n=at(n,i,s,r,e[l+11],10,-1120210379),r=at(r,n,i,s,e[l+2],15,718787259),s=at(s,r,n,i,e[l+9],21,-343485551),i=ui(i,o),s=ui(s,a),r=ui(r,c),n=ui(n,f)}return[i,s,r,n]}function dm(e){if(e.length===0)return[];const t=e.length*8,i=new Uint32Array(Sc(t));for(let s=0;s<t;s+=8)i[s>>5]|=(e[s/8]&255)<<s%32;return i}function ui(e,t){const i=(e&65535)+(t&65535);return(e>>16)+(t>>16)+(i>>16)<<16|i&65535}function _m(e,t){return e<<t|e>>>32-t}function vr(e,t,i,s,r,n){return ui(_m(ui(ui(t,e),ui(s,n)),r),i)}function rt(e,t,i,s,r,n,l){return vr(t&i|~t&s,e,t,r,n,l)}function nt(e,t,i,s,r,n,l){return vr(t&s|i&~s,e,t,r,n,l)}function ot(e,t,i,s,r,n,l){return vr(t^i^s,e,t,r,n,l)}function at(e,t,i,s,r,n,l){return vr(i^(t|~s),e,t,r,n,l)}const pm=Cc("v3",48,hm),mm=pm,gm=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),ma={randomUUID:gm};function vm(e,t,i){if(ma.randomUUID&&!t&&!e)return ma.randomUUID();e=e||{};const s=e.random||(e.rng||bc)();if(s[6]=s[6]&15|64,s[8]=s[8]&63|128,t){i=i||0;for(let r=0;r<16;++r)t[i+r]=s[r];return t}return gr(s)}function bm(e,t,i,s){switch(e){case 0:return t&i^~t&s;case 1:return t^i^s;case 2:return t&i^t&s^i&s;case 3:return t^i^s}}function Ir(e,t){return e<<t|e>>>32-t}function ym(e){const t=[1518500249,1859775393,2400959708,3395469782],i=[1732584193,4023233417,2562383102,271733878,3285377520];if(typeof e=="string"){const l=unescape(encodeURIComponent(e));e=[];for(let o=0;o<l.length;++o)e.push(l.charCodeAt(o))}else Array.isArray(e)||(e=Array.prototype.slice.call(e));e.push(128);const s=e.length/4+2,r=Math.ceil(s/16),n=new Array(r);for(let l=0;l<r;++l){const o=new Uint32Array(16);for(let a=0;a<16;++a)o[a]=e[l*64+a*4]<<24|e[l*64+a*4+1]<<16|e[l*64+a*4+2]<<8|e[l*64+a*4+3];n[l]=o}n[r-1][14]=(e.length-1)*8/Math.pow(2,32),n[r-1][14]=Math.floor(n[r-1][14]),n[r-1][15]=(e.length-1)*8&4294967295;for(let l=0;l<r;++l){const o=new Uint32Array(80);for(let v=0;v<16;++v)o[v]=n[l][v];for(let v=16;v<80;++v)o[v]=Ir(o[v-3]^o[v-8]^o[v-14]^o[v-16],1);let a=i[0],c=i[1],f=i[2],u=i[3],m=i[4];for(let v=0;v<80;++v){const y=Math.floor(v/20),g=Ir(a,5)+bm(y,c,f,u)+m+t[y]+o[v]>>>0;m=u,u=f,f=Ir(c,30)>>>0,c=a,a=g}i[0]=i[0]+a>>>0,i[1]=i[1]+c>>>0,i[2]=i[2]+f>>>0,i[3]=i[3]+u>>>0,i[4]=i[4]+m>>>0}return[i[0]>>24&255,i[0]>>16&255,i[0]>>8&255,i[0]&255,i[1]>>24&255,i[1]>>16&255,i[1]>>8&255,i[1]&255,i[2]>>24&255,i[2]>>16&255,i[2]>>8&255,i[2]&255,i[3]>>24&255,i[3]>>16&255,i[3]>>8&255,i[3]&255,i[4]>>24&255,i[4]>>16&255,i[4]>>8&255,i[4]&255]}const Cm=Cc("v5",80,ym),Sm=Cm,wm="00000000-0000-0000-0000-000000000000";function km(e){if(!mr(e))throw TypeError("Invalid UUID");return parseInt(e.slice(14,15),16)}const ln=Object.freeze(Object.defineProperty({__proto__:null,NIL:wm,parse:yc,stringify:nm,v1:om,v3:mm,v4:vm,v5:Sm,validate:mr,version:km},Symbol.toStringTag,{value:"Module"}));function Lm(e){let t,i;return t=new Ze({props:{slot:"input",type:Te.select,settingKey:"session.id",settingValue:e[1].id,options:e[6]}}),t.$on("changed",e[13]),{c(){te(t.$$.fragment)},m(s,r){Q(t,s,r),i=!0},p(s,r){const n={};r&2&&(n.settingValue=s[1].id),t.$set(n)},i(s){i||(j(t.$$.fragment,s),i=!0)},o(s){U(t.$$.fragment,s),i=!1},d(s){ee(t,s)}}}function Em(e){let t,i;return t=new Ze({props:{slot:"input",block:!0,type:Te.text,settingKey:"session.name",settingValue:e[1].name,disabled:e[3]?!1:!e[4]}}),t.$on("changed",e[14]),{c(){te(t.$$.fragment)},m(s,r){Q(t,s,r),i=!0},p(s,r){const n={};r&2&&(n.settingValue=s[1].name),r&24&&(n.disabled=s[3]?!1:!s[4]),t.$set(n)},i(s){i||(j(t.$$.fragment,s),i=!0)},o(s){U(t.$$.fragment,s),i=!1},d(s){ee(t,s)}}}function Mm(e){let t,i;return t=new Ze({props:{slot:"input",block:!0,type:Te.text,settingKey:"session.path",settingValue:e[1].path,disabled:e[3]?!1:!e[4]}}),t.$on("changed",e[15]),{c(){te(t.$$.fragment)},m(s,r){Q(t,s,r),i=!0},p(s,r){const n={};r&2&&(n.settingValue=s[1].path),r&24&&(n.disabled=s[3]?!1:!s[4]),t.$set(n)},i(s){i||(j(t.$$.fragment,s),i=!0)},o(s){U(t.$$.fragment,s),i=!1},d(s){ee(t,s)}}}function Dm(e){let t,i;return t=new Ze({props:{slot:"input",type:Te.select,settingKey:"session.type",settingValue:e[1].type,options:[{key:"console",text:"console"},{key:"notebook",text:"notebook"}],disabled:e[3]?!1:!e[4]}}),t.$on("changed",e[16]),{c(){te(t.$$.fragment)},m(s,r){Q(t,s,r),i=!0},p(s,r){const n={};r&2&&(n.settingValue=s[1].type),r&24&&(n.disabled=s[3]?!1:!s[4]),t.$set(n)},i(s){i||(j(t.$$.fragment,s),i=!0)},o(s){U(t.$$.fragment,s),i=!1},d(s){ee(t,s)}}}function Tm(e){var s,r;let t,i;return t=new Ze({props:{slot:"input",block:!0,type:Te.select,settingKey:"session.kernel",settingValue:e[1].kernel?((s=e[0].kernels.find(e[17]))==null?void 0:s.id)??((r=e[1].kernel)==null?void 0:r.name)??e[0].kernelspecs.default:"",options:e[3]?e[8]:e[7],disabled:e[3]?!1:!e[4]}}),t.$on("changed",e[18]),{c(){te(t.$$.fragment)},m(n,l){Q(t,n,l),i=!0},p(n,l){var a,c;const o={};l&3&&(o.settingValue=n[1].kernel?((a=n[0].kernels.find(n[17]))==null?void 0:a.id)??((c=n[1].kernel)==null?void 0:c.name)??n[0].kernelspecs.default:""),l&8&&(o.options=n[3]?n[8]:n[7]),l&24&&(o.disabled=n[3]?!1:!n[4]),t.$set(o)},i(n){i||(j(t.$$.fragment,n),i=!0)},o(n){U(t.$$.fragment,n),i=!1},d(n){ee(t,n)}}}function Rm(e){let t,i,s,r,n,l,o,a,c,f;return t=new je({props:{title:e[5].settings.sessionSettings.connect.title,text:e[5].settings.sessionSettings.connect.description,$$slots:{input:[Lm]},$$scope:{ctx:e}}}),s=new je({props:{title:e[5].settings.sessionSettings.name.title,text:e[5].settings.sessionSettings.name.description,block:!0,$$slots:{input:[Em]},$$scope:{ctx:e}}}),n=new je({props:{title:e[5].settings.sessionSettings.path.title,text:e[5].settings.sessionSettings.path.description,block:!0,$$slots:{input:[Mm]},$$scope:{ctx:e}}}),o=new je({props:{title:e[5].settings.sessionSettings.type.title,text:e[5].settings.sessionSettings.type.description,$$slots:{input:[Dm]},$$scope:{ctx:e}}}),c=new je({props:{title:e[5].settings.sessionSettings.kernel.title,text:e[5].settings.sessionSettings.kernel.description,block:!0,$$slots:{input:[Tm]},$$scope:{ctx:e}}}),{c(){te(t.$$.fragment),i=ue(),te(s.$$.fragment),r=ue(),te(n.$$.fragment),l=ue(),te(o.$$.fragment),a=ue(),te(c.$$.fragment)},m(u,m){Q(t,u,m),J(u,i,m),Q(s,u,m),J(u,r,m),Q(n,u,m),J(u,l,m),Q(o,u,m),J(u,a,m),Q(c,u,m),f=!0},p(u,m){const v={};m&4194311&&(v.$$scope={dirty:m,ctx:u}),t.$set(v);const y={};m&4194334&&(y.$$scope={dirty:m,ctx:u}),s.$set(y);const g={};m&4194334&&(g.$$scope={dirty:m,ctx:u}),n.$set(g);const h={};m&4194334&&(h.$$scope={dirty:m,ctx:u}),o.$set(h);const d={};m&4194335&&(d.$$scope={dirty:m,ctx:u}),c.$set(d)},i(u){f||(j(t.$$.fragment,u),j(s.$$.fragment,u),j(n.$$.fragment,u),j(o.$$.fragment,u),j(c.$$.fragment,u),f=!0)},o(u){U(t.$$.fragment,u),U(s.$$.fragment,u),U(n.$$.fragment,u),U(o.$$.fragment,u),U(c.$$.fragment,u),f=!1},d(u){u&&($(i),$(r),$(l),$(a)),ee(t,u),ee(s,u),ee(n,u),ee(o,u),ee(c,u)}}}function Am(e){let t,i;return t=new Hs({props:{$$slots:{default:[Rm]},$$scope:{ctx:e}}}),{c(){te(t.$$.fragment)},m(s,r){Q(t,s,r),i=!0},p(s,r){const n={};r&4194335&&(n.$$scope={dirty:r,ctx:s}),t.$set(n)},i(s){i||(j(t.$$.fragment,s),i=!0)},o(s){U(t.$$.fragment,s),i=!1},d(s){ee(t,s)}}}function Om(e){let t,i;return t=new vc({props:{confirmButtonText:e[3]?e[5].settings.sessionSettings.confirm.new:e[4]?e[5].settings.sessionSettings.confirm.update:e[5].settings.sessionSettings.confirm.connect,$$slots:{default:[Am]},$$scope:{ctx:e}}}),t.$on("cancel",e[9]),t.$on("confirm",e[10]),{c(){te(t.$$.fragment)},m(s,r){Q(t,s,r),i=!0},p(s,[r]){const n={};r&24&&(n.confirmButtonText=s[3]?s[5].settings.sessionSettings.confirm.new:s[4]?s[5].settings.sessionSettings.confirm.update:s[5].settings.sessionSettings.confirm.connect),r&4194335&&(n.$$scope={dirty:r,ctx:s}),t.$set(n)},i(s){i||(j(t.$$.fragment,s),i=!0)},o(s){U(t.$$.fragment,s),i=!1},d(s){ee(t,s)}}}function Bm(e,t,i){let{docID:s}=t,{docIAL:r}=t,{plugin:n}=t;const l=n.i18n,o=ei();let a=n.ial2session(r,!0),c=a,f=!0,u=!1,m=!1;v(c);function v(w){const E=n.isSessionRunning(w.id);i(3,f=!E),u=E,i(4,m=n.doc2session.has(s))}const y=n.sessions.map(w=>({key:w.id,text:w.name}));u?(a=n.ial2session({},!0),y.unshift({key:a.id,text:l.settings.sessionSettings.connect.options.new.text}),c=n.sessions.find(w=>w.id===c.id)??c):y.unshift({key:c.id,text:l.settings.sessionSettings.connect.options.new.text});const g=[],h=[];g.push({key:"",text:`⏹ ${l.settings.sessionSettings.kernel.options.no.text}`}),g.push(...Array.from(Object.values(n.kernelspecs.kernelspecs)).filter(w=>w!==void 0).map(w=>({key:w.name,text:`▶ ${l.settings.sessionSettings.kernel.options.new.text} [${w.language}] ${w.name}: ${w.display_name}`}))),h.push(...g),g.push(...n.sessions.filter(w=>w.kernel).map(w=>{const E=n.kernelspecs.kernelspecs[w.kernel.name];return{key:w.kernel.id,text:`♻ ${l.settings.sessionSettings.kernel.options.use.text} [${E==null?void 0:E.language}] ${E==null?void 0:E.name}: ${w.name}`}}));async function d(w){o("cancel",{id:s,event:w.detail.event,session:c})}async function _(w){var A,O,T,P,F,z,Z,M;try{var E=c;if(f)c.kernel&&(E=await((A=n.bridge)==null?void 0:A.call("jupyter.sessions.startNew",s,{name:c.name,type:c.type,path:c.path,kernel:{name:c.kernel.name}},{username:n.username,clientId:n.clientId})));else if(!m)c.kernel&&(E=await((O=n.bridge)==null?void 0:O.call("jupyter.sessions.connectTo",s,{model:c,username:n.username,clientId:n.newClientId})));else{const B=n.doc2session.get(s);B&&(c.name!==B.name&&(E=await((T=n.bridge)==null?void 0:T.call("jupyter.session.connection.setName",c.id,c.name))),c.path!==B.path&&(E=await((P=n.bridge)==null?void 0:P.call("jupyter.session.connection.setPath",c.id,c.path))),c.type!==B.type&&(E=await((F=n.bridge)==null?void 0:F.call("jupyter.session.connection.setType",c.id,c.type))),c.kernel?!B.kernel||c.kernel.name!==B.kernel.name?E=await((z=n.bridge)==null?void 0:z.call("jupyter.session.connection.changeKernel",c.id,{name:c.kernel.name})):(!B.kernel||c.kernel.id!==B.kernel.id)&&(E=await((Z=n.bridge)==null?void 0:Z.call("jupyter.session.connection.changeKernel",c.id,{id:c.kernel.id}))):E=await((M=n.bridge)==null?void 0:M.call("jupyter.session.connection.changeKernel",c.id,{})))}if(E)i(1,c=E),n.relateDoc2Session(s,E);else{n.siyuan.showMessage(l.messages.uninitialized.text,void 0,"error");return}await n.client.setBlockAttrs({id:s,attrs:n.session2ial(c,!0)})}catch(B){n.logger.warn(B),n.siyuan.showMessage(String(B),void 0,"error");return}o("confirm",{id:s,event:w.detail.event,session:c})}const p=async w=>{const E=w.detail.value;if(E===y[0].key)i(1,c=a);else{const A=n.sessions.find(O=>O.id===E);A&&i(1,c=A)}},b=async w=>{const E=w.detail.value;i(1,c.name=E,c),f&&i(2,a.name=E,a)},S=async w=>{const E=w.detail.value;i(1,c.path=E,c),f&&i(2,a.path=E,a)},L=async w=>{const E=w.detail.value;i(1,c.type=E,c),f&&i(2,a.type=E,a)},k=w=>{var E;return w.id===((E=c.kernel)==null?void 0:E.id)},C=async w=>{const E=w.detail.value;if(E==="")i(1,c.kernel=null,c),f&&i(2,a.kernel=null,a);else if(n.kernels.some(A=>A.id===E))c.kernel&&i(1,c.kernel.id=E,c),f&&a.kernel&&i(2,a.kernel.id=E,a);else{const A=ln.v4();c.kernel&&(i(1,c.kernel.id=A,c),i(1,c.kernel.name=E,c)),f&&a.kernel&&(i(2,a.kernel.id=A,a),i(2,a.kernel.name=E,a))}};return e.$$set=w=>{"docID"in w&&i(11,s=w.docID),"docIAL"in w&&i(12,r=w.docIAL),"plugin"in w&&i(0,n=w.plugin)},e.$$.update=()=>{e.$$.dirty&2&&v(c)},[n,c,a,f,m,l,y,g,h,d,_,s,r,p,b,S,L,k,C]}class Hm extends Be{constructor(t){super(),Oe(this,t,Bm,Om,Re,{docID:11,docIAL:12,plugin:0})}}var wc={exports:{}};(function(e,t){(function(i,s){e.exports=s()})(self,()=>(()=>{var i={4567:function(l,o,a){var c=this&&this.__decorate||function(p,b,S,L){var k,C=arguments.length,w=C<3?b:L===null?L=Object.getOwnPropertyDescriptor(b,S):L;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")w=Reflect.decorate(p,b,S,L);else for(var E=p.length-1;E>=0;E--)(k=p[E])&&(w=(C<3?k(w):C>3?k(b,S,w):k(b,S))||w);return C>3&&w&&Object.defineProperty(b,S,w),w},f=this&&this.__param||function(p,b){return function(S,L){b(S,L,p)}};Object.defineProperty(o,"__esModule",{value:!0}),o.AccessibilityManager=void 0;const u=a(9042),m=a(6114),v=a(9924),y=a(844),g=a(5596),h=a(4725),d=a(3656);let _=o.AccessibilityManager=class extends y.Disposable{constructor(p,b){super(),this._terminal=p,this._renderService=b,this._liveRegionLineCount=0,this._charsToConsume=[],this._charsToAnnounce="",this._accessibilityContainer=document.createElement("div"),this._accessibilityContainer.classList.add("xterm-accessibility"),this._rowContainer=document.createElement("div"),this._rowContainer.setAttribute("role","list"),this._rowContainer.classList.add("xterm-accessibility-tree"),this._rowElements=[];for(let S=0;S<this._terminal.rows;S++)this._rowElements[S]=this._createAccessibilityTreeNode(),this._rowContainer.appendChild(this._rowElements[S]);if(this._topBoundaryFocusListener=S=>this._handleBoundaryFocus(S,0),this._bottomBoundaryFocusListener=S=>this._handleBoundaryFocus(S,1),this._rowElements[0].addEventListener("focus",this._topBoundaryFocusListener),this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._refreshRowsDimensions(),this._accessibilityContainer.appendChild(this._rowContainer),this._liveRegion=document.createElement("div"),this._liveRegion.classList.add("live-region"),this._liveRegion.setAttribute("aria-live","assertive"),this._accessibilityContainer.appendChild(this._liveRegion),this._liveRegionDebouncer=this.register(new v.TimeBasedDebouncer(this._renderRows.bind(this))),!this._terminal.element)throw new Error("Cannot enable accessibility before Terminal.open");this._terminal.element.insertAdjacentElement("afterbegin",this._accessibilityContainer),this.register(this._terminal.onResize(S=>this._handleResize(S.rows))),this.register(this._terminal.onRender(S=>this._refreshRows(S.start,S.end))),this.register(this._terminal.onScroll(()=>this._refreshRows())),this.register(this._terminal.onA11yChar(S=>this._handleChar(S))),this.register(this._terminal.onLineFeed(()=>this._handleChar(`
`))),this.register(this._terminal.onA11yTab(S=>this._handleTab(S))),this.register(this._terminal.onKey(S=>this._handleKey(S.key))),this.register(this._terminal.onBlur(()=>this._clearLiveRegion())),this.register(this._renderService.onDimensionsChange(()=>this._refreshRowsDimensions())),this._screenDprMonitor=new g.ScreenDprMonitor(window),this.register(this._screenDprMonitor),this._screenDprMonitor.setListener(()=>this._refreshRowsDimensions()),this.register((0,d.addDisposableDomListener)(window,"resize",()=>this._refreshRowsDimensions())),this._refreshRows(),this.register((0,y.toDisposable)(()=>{this._accessibilityContainer.remove(),this._rowElements.length=0}))}_handleTab(p){for(let b=0;b<p;b++)this._handleChar(" ")}_handleChar(p){this._liveRegionLineCount<21&&(this._charsToConsume.length>0?this._charsToConsume.shift()!==p&&(this._charsToAnnounce+=p):this._charsToAnnounce+=p,p===`
`&&(this._liveRegionLineCount++,this._liveRegionLineCount===21&&(this._liveRegion.textContent+=u.tooMuchOutput)),m.isMac&&this._liveRegion.textContent&&this._liveRegion.textContent.length>0&&!this._liveRegion.parentNode&&setTimeout(()=>{this._accessibilityContainer.appendChild(this._liveRegion)},0))}_clearLiveRegion(){this._liveRegion.textContent="",this._liveRegionLineCount=0,m.isMac&&this._liveRegion.remove()}_handleKey(p){this._clearLiveRegion(),/\p{Control}/u.test(p)||this._charsToConsume.push(p)}_refreshRows(p,b){this._liveRegionDebouncer.refresh(p,b,this._terminal.rows)}_renderRows(p,b){const S=this._terminal.buffer,L=S.lines.length.toString();for(let k=p;k<=b;k++){const C=S.translateBufferLineToString(S.ydisp+k,!0),w=(S.ydisp+k+1).toString(),E=this._rowElements[k];E&&(C.length===0?E.innerText=" ":E.textContent=C,E.setAttribute("aria-posinset",w),E.setAttribute("aria-setsize",L))}this._announceCharacters()}_announceCharacters(){this._charsToAnnounce.length!==0&&(this._liveRegion.textContent+=this._charsToAnnounce,this._charsToAnnounce="")}_handleBoundaryFocus(p,b){const S=p.target,L=this._rowElements[b===0?1:this._rowElements.length-2];if(S.getAttribute("aria-posinset")===(b===0?"1":`${this._terminal.buffer.lines.length}`)||p.relatedTarget!==L)return;let k,C;if(b===0?(k=S,C=this._rowElements.pop(),this._rowContainer.removeChild(C)):(k=this._rowElements.shift(),C=S,this._rowContainer.removeChild(k)),k.removeEventListener("focus",this._topBoundaryFocusListener),C.removeEventListener("focus",this._bottomBoundaryFocusListener),b===0){const w=this._createAccessibilityTreeNode();this._rowElements.unshift(w),this._rowContainer.insertAdjacentElement("afterbegin",w)}else{const w=this._createAccessibilityTreeNode();this._rowElements.push(w),this._rowContainer.appendChild(w)}this._rowElements[0].addEventListener("focus",this._topBoundaryFocusListener),this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._terminal.scrollLines(b===0?-1:1),this._rowElements[b===0?1:this._rowElements.length-2].focus(),p.preventDefault(),p.stopImmediatePropagation()}_handleResize(p){this._rowElements[this._rowElements.length-1].removeEventListener("focus",this._bottomBoundaryFocusListener);for(let b=this._rowContainer.children.length;b<this._terminal.rows;b++)this._rowElements[b]=this._createAccessibilityTreeNode(),this._rowContainer.appendChild(this._rowElements[b]);for(;this._rowElements.length>p;)this._rowContainer.removeChild(this._rowElements.pop());this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._refreshRowsDimensions()}_createAccessibilityTreeNode(){const p=document.createElement("div");return p.setAttribute("role","listitem"),p.tabIndex=-1,this._refreshRowDimensions(p),p}_refreshRowsDimensions(){if(this._renderService.dimensions.css.cell.height){this._accessibilityContainer.style.width=`${this._renderService.dimensions.css.canvas.width}px`,this._rowElements.length!==this._terminal.rows&&this._handleResize(this._terminal.rows);for(let p=0;p<this._terminal.rows;p++)this._refreshRowDimensions(this._rowElements[p])}}_refreshRowDimensions(p){p.style.height=`${this._renderService.dimensions.css.cell.height}px`}};o.AccessibilityManager=_=c([f(1,h.IRenderService)],_)},3614:(l,o)=>{function a(m){return m.replace(/\r?\n/g,"\r")}function c(m,v){return v?"\x1B[200~"+m+"\x1B[201~":m}function f(m,v,y,g){m=c(m=a(m),y.decPrivateModes.bracketedPasteMode&&g.rawOptions.ignoreBracketedPasteMode!==!0),y.triggerDataEvent(m,!0),v.value=""}function u(m,v,y){const g=y.getBoundingClientRect(),h=m.clientX-g.left-10,d=m.clientY-g.top-10;v.style.width="20px",v.style.height="20px",v.style.left=`${h}px`,v.style.top=`${d}px`,v.style.zIndex="1000",v.focus()}Object.defineProperty(o,"__esModule",{value:!0}),o.rightClickHandler=o.moveTextAreaUnderMouseCursor=o.paste=o.handlePasteEvent=o.copyHandler=o.bracketTextForPaste=o.prepareTextForTerminal=void 0,o.prepareTextForTerminal=a,o.bracketTextForPaste=c,o.copyHandler=function(m,v){m.clipboardData&&m.clipboardData.setData("text/plain",v.selectionText),m.preventDefault()},o.handlePasteEvent=function(m,v,y,g){m.stopPropagation(),m.clipboardData&&f(m.clipboardData.getData("text/plain"),v,y,g)},o.paste=f,o.moveTextAreaUnderMouseCursor=u,o.rightClickHandler=function(m,v,y,g,h){u(m,v,y),h&&g.rightClickSelect(m),v.value=g.selectionText,v.select()}},7239:(l,o,a)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.ColorContrastCache=void 0;const c=a(1505);o.ColorContrastCache=class{constructor(){this._color=new c.TwoKeyMap,this._css=new c.TwoKeyMap}setCss(f,u,m){this._css.set(f,u,m)}getCss(f,u){return this._css.get(f,u)}setColor(f,u,m){this._color.set(f,u,m)}getColor(f,u){return this._color.get(f,u)}clear(){this._color.clear(),this._css.clear()}}},3656:(l,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.addDisposableDomListener=void 0,o.addDisposableDomListener=function(a,c,f,u){a.addEventListener(c,f,u);let m=!1;return{dispose:()=>{m||(m=!0,a.removeEventListener(c,f,u))}}}},6465:function(l,o,a){var c=this&&this.__decorate||function(h,d,_,p){var b,S=arguments.length,L=S<3?d:p===null?p=Object.getOwnPropertyDescriptor(d,_):p;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")L=Reflect.decorate(h,d,_,p);else for(var k=h.length-1;k>=0;k--)(b=h[k])&&(L=(S<3?b(L):S>3?b(d,_,L):b(d,_))||L);return S>3&&L&&Object.defineProperty(d,_,L),L},f=this&&this.__param||function(h,d){return function(_,p){d(_,p,h)}};Object.defineProperty(o,"__esModule",{value:!0}),o.Linkifier2=void 0;const u=a(3656),m=a(8460),v=a(844),y=a(2585);let g=o.Linkifier2=class extends v.Disposable{get currentLink(){return this._currentLink}constructor(h){super(),this._bufferService=h,this._linkProviders=[],this._linkCacheDisposables=[],this._isMouseOut=!0,this._wasResized=!1,this._activeLine=-1,this._onShowLinkUnderline=this.register(new m.EventEmitter),this.onShowLinkUnderline=this._onShowLinkUnderline.event,this._onHideLinkUnderline=this.register(new m.EventEmitter),this.onHideLinkUnderline=this._onHideLinkUnderline.event,this.register((0,v.getDisposeArrayDisposable)(this._linkCacheDisposables)),this.register((0,v.toDisposable)(()=>{this._lastMouseEvent=void 0})),this.register(this._bufferService.onResize(()=>{this._clearCurrentLink(),this._wasResized=!0}))}registerLinkProvider(h){return this._linkProviders.push(h),{dispose:()=>{const d=this._linkProviders.indexOf(h);d!==-1&&this._linkProviders.splice(d,1)}}}attachToDom(h,d,_){this._element=h,this._mouseService=d,this._renderService=_,this.register((0,u.addDisposableDomListener)(this._element,"mouseleave",()=>{this._isMouseOut=!0,this._clearCurrentLink()})),this.register((0,u.addDisposableDomListener)(this._element,"mousemove",this._handleMouseMove.bind(this))),this.register((0,u.addDisposableDomListener)(this._element,"mousedown",this._handleMouseDown.bind(this))),this.register((0,u.addDisposableDomListener)(this._element,"mouseup",this._handleMouseUp.bind(this)))}_handleMouseMove(h){if(this._lastMouseEvent=h,!this._element||!this._mouseService)return;const d=this._positionFromMouseEvent(h,this._element,this._mouseService);if(!d)return;this._isMouseOut=!1;const _=h.composedPath();for(let p=0;p<_.length;p++){const b=_[p];if(b.classList.contains("xterm"))break;if(b.classList.contains("xterm-hover"))return}this._lastBufferCell&&d.x===this._lastBufferCell.x&&d.y===this._lastBufferCell.y||(this._handleHover(d),this._lastBufferCell=d)}_handleHover(h){if(this._activeLine!==h.y||this._wasResized)return this._clearCurrentLink(),this._askForLink(h,!1),void(this._wasResized=!1);this._currentLink&&this._linkAtPosition(this._currentLink.link,h)||(this._clearCurrentLink(),this._askForLink(h,!0))}_askForLink(h,d){var _,p;this._activeProviderReplies&&d||((_=this._activeProviderReplies)===null||_===void 0||_.forEach(S=>{S==null||S.forEach(L=>{L.link.dispose&&L.link.dispose()})}),this._activeProviderReplies=new Map,this._activeLine=h.y);let b=!1;for(const[S,L]of this._linkProviders.entries())d?!((p=this._activeProviderReplies)===null||p===void 0)&&p.get(S)&&(b=this._checkLinkProviderResult(S,h,b)):L.provideLinks(h.y,k=>{var C,w;if(this._isMouseOut)return;const E=k==null?void 0:k.map(A=>({link:A}));(C=this._activeProviderReplies)===null||C===void 0||C.set(S,E),b=this._checkLinkProviderResult(S,h,b),((w=this._activeProviderReplies)===null||w===void 0?void 0:w.size)===this._linkProviders.length&&this._removeIntersectingLinks(h.y,this._activeProviderReplies)})}_removeIntersectingLinks(h,d){const _=new Set;for(let p=0;p<d.size;p++){const b=d.get(p);if(b)for(let S=0;S<b.length;S++){const L=b[S],k=L.link.range.start.y<h?0:L.link.range.start.x,C=L.link.range.end.y>h?this._bufferService.cols:L.link.range.end.x;for(let w=k;w<=C;w++){if(_.has(w)){b.splice(S--,1);break}_.add(w)}}}}_checkLinkProviderResult(h,d,_){var p;if(!this._activeProviderReplies)return _;const b=this._activeProviderReplies.get(h);let S=!1;for(let L=0;L<h;L++)this._activeProviderReplies.has(L)&&!this._activeProviderReplies.get(L)||(S=!0);if(!S&&b){const L=b.find(k=>this._linkAtPosition(k.link,d));L&&(_=!0,this._handleNewLink(L))}if(this._activeProviderReplies.size===this._linkProviders.length&&!_)for(let L=0;L<this._activeProviderReplies.size;L++){const k=(p=this._activeProviderReplies.get(L))===null||p===void 0?void 0:p.find(C=>this._linkAtPosition(C.link,d));if(k){_=!0,this._handleNewLink(k);break}}return _}_handleMouseDown(){this._mouseDownLink=this._currentLink}_handleMouseUp(h){if(!this._element||!this._mouseService||!this._currentLink)return;const d=this._positionFromMouseEvent(h,this._element,this._mouseService);d&&this._mouseDownLink===this._currentLink&&this._linkAtPosition(this._currentLink.link,d)&&this._currentLink.link.activate(h,this._currentLink.link.text)}_clearCurrentLink(h,d){this._element&&this._currentLink&&this._lastMouseEvent&&(!h||!d||this._currentLink.link.range.start.y>=h&&this._currentLink.link.range.end.y<=d)&&(this._linkLeave(this._element,this._currentLink.link,this._lastMouseEvent),this._currentLink=void 0,(0,v.disposeArray)(this._linkCacheDisposables))}_handleNewLink(h){if(!this._element||!this._lastMouseEvent||!this._mouseService)return;const d=this._positionFromMouseEvent(this._lastMouseEvent,this._element,this._mouseService);d&&this._linkAtPosition(h.link,d)&&(this._currentLink=h,this._currentLink.state={decorations:{underline:h.link.decorations===void 0||h.link.decorations.underline,pointerCursor:h.link.decorations===void 0||h.link.decorations.pointerCursor},isHovered:!0},this._linkHover(this._element,h.link,this._lastMouseEvent),h.link.decorations={},Object.defineProperties(h.link.decorations,{pointerCursor:{get:()=>{var _,p;return(p=(_=this._currentLink)===null||_===void 0?void 0:_.state)===null||p===void 0?void 0:p.decorations.pointerCursor},set:_=>{var p,b;!((p=this._currentLink)===null||p===void 0)&&p.state&&this._currentLink.state.decorations.pointerCursor!==_&&(this._currentLink.state.decorations.pointerCursor=_,this._currentLink.state.isHovered&&((b=this._element)===null||b===void 0||b.classList.toggle("xterm-cursor-pointer",_)))}},underline:{get:()=>{var _,p;return(p=(_=this._currentLink)===null||_===void 0?void 0:_.state)===null||p===void 0?void 0:p.decorations.underline},set:_=>{var p,b,S;!((p=this._currentLink)===null||p===void 0)&&p.state&&((S=(b=this._currentLink)===null||b===void 0?void 0:b.state)===null||S===void 0?void 0:S.decorations.underline)!==_&&(this._currentLink.state.decorations.underline=_,this._currentLink.state.isHovered&&this._fireUnderlineEvent(h.link,_))}}}),this._renderService&&this._linkCacheDisposables.push(this._renderService.onRenderedViewportChange(_=>{if(!this._currentLink)return;const p=_.start===0?0:_.start+1+this._bufferService.buffer.ydisp,b=this._bufferService.buffer.ydisp+1+_.end;if(this._currentLink.link.range.start.y>=p&&this._currentLink.link.range.end.y<=b&&(this._clearCurrentLink(p,b),this._lastMouseEvent&&this._element)){const S=this._positionFromMouseEvent(this._lastMouseEvent,this._element,this._mouseService);S&&this._askForLink(S,!1)}})))}_linkHover(h,d,_){var p;!((p=this._currentLink)===null||p===void 0)&&p.state&&(this._currentLink.state.isHovered=!0,this._currentLink.state.decorations.underline&&this._fireUnderlineEvent(d,!0),this._currentLink.state.decorations.pointerCursor&&h.classList.add("xterm-cursor-pointer")),d.hover&&d.hover(_,d.text)}_fireUnderlineEvent(h,d){const _=h.range,p=this._bufferService.buffer.ydisp,b=this._createLinkUnderlineEvent(_.start.x-1,_.start.y-p-1,_.end.x,_.end.y-p-1,void 0);(d?this._onShowLinkUnderline:this._onHideLinkUnderline).fire(b)}_linkLeave(h,d,_){var p;!((p=this._currentLink)===null||p===void 0)&&p.state&&(this._currentLink.state.isHovered=!1,this._currentLink.state.decorations.underline&&this._fireUnderlineEvent(d,!1),this._currentLink.state.decorations.pointerCursor&&h.classList.remove("xterm-cursor-pointer")),d.leave&&d.leave(_,d.text)}_linkAtPosition(h,d){const _=h.range.start.y*this._bufferService.cols+h.range.start.x,p=h.range.end.y*this._bufferService.cols+h.range.end.x,b=d.y*this._bufferService.cols+d.x;return _<=b&&b<=p}_positionFromMouseEvent(h,d,_){const p=_.getCoords(h,d,this._bufferService.cols,this._bufferService.rows);if(p)return{x:p[0],y:p[1]+this._bufferService.buffer.ydisp}}_createLinkUnderlineEvent(h,d,_,p,b){return{x1:h,y1:d,x2:_,y2:p,cols:this._bufferService.cols,fg:b}}};o.Linkifier2=g=c([f(0,y.IBufferService)],g)},9042:(l,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.tooMuchOutput=o.promptLabel=void 0,o.promptLabel="Terminal input",o.tooMuchOutput="Too much output to announce, navigate to rows manually to read"},3730:function(l,o,a){var c=this&&this.__decorate||function(g,h,d,_){var p,b=arguments.length,S=b<3?h:_===null?_=Object.getOwnPropertyDescriptor(h,d):_;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")S=Reflect.decorate(g,h,d,_);else for(var L=g.length-1;L>=0;L--)(p=g[L])&&(S=(b<3?p(S):b>3?p(h,d,S):p(h,d))||S);return b>3&&S&&Object.defineProperty(h,d,S),S},f=this&&this.__param||function(g,h){return function(d,_){h(d,_,g)}};Object.defineProperty(o,"__esModule",{value:!0}),o.OscLinkProvider=void 0;const u=a(511),m=a(2585);let v=o.OscLinkProvider=class{constructor(g,h,d){this._bufferService=g,this._optionsService=h,this._oscLinkService=d}provideLinks(g,h){var d;const _=this._bufferService.buffer.lines.get(g-1);if(!_)return void h(void 0);const p=[],b=this._optionsService.rawOptions.linkHandler,S=new u.CellData,L=_.getTrimmedLength();let k=-1,C=-1,w=!1;for(let E=0;E<L;E++)if(C!==-1||_.hasContent(E)){if(_.loadCell(E,S),S.hasExtendedAttrs()&&S.extended.urlId){if(C===-1){C=E,k=S.extended.urlId;continue}w=S.extended.urlId!==k}else C!==-1&&(w=!0);if(w||C!==-1&&E===L-1){const A=(d=this._oscLinkService.getLinkData(k))===null||d===void 0?void 0:d.uri;if(A){const O={start:{x:C+1,y:g},end:{x:E+(w||E!==L-1?0:1),y:g}};let T=!1;if(!(b!=null&&b.allowNonHttpProtocols))try{const P=new URL(A);["http:","https:"].includes(P.protocol)||(T=!0)}catch{T=!0}T||p.push({text:A,range:O,activate:(P,F)=>b?b.activate(P,F,O):y(0,F),hover:(P,F)=>{var z;return(z=b==null?void 0:b.hover)===null||z===void 0?void 0:z.call(b,P,F,O)},leave:(P,F)=>{var z;return(z=b==null?void 0:b.leave)===null||z===void 0?void 0:z.call(b,P,F,O)}})}w=!1,S.hasExtendedAttrs()&&S.extended.urlId?(C=E,k=S.extended.urlId):(C=-1,k=-1)}}h(p)}};function y(g,h){if(confirm(`Do you want to navigate to ${h}?

WARNING: This link could potentially be dangerous`)){const d=window.open();if(d){try{d.opener=null}catch{}d.location.href=h}else console.warn("Opening link blocked as opener could not be cleared")}}o.OscLinkProvider=v=c([f(0,m.IBufferService),f(1,m.IOptionsService),f(2,m.IOscLinkService)],v)},6193:(l,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.RenderDebouncer=void 0,o.RenderDebouncer=class{constructor(a,c){this._parentWindow=a,this._renderCallback=c,this._refreshCallbacks=[]}dispose(){this._animationFrame&&(this._parentWindow.cancelAnimationFrame(this._animationFrame),this._animationFrame=void 0)}addRefreshCallback(a){return this._refreshCallbacks.push(a),this._animationFrame||(this._animationFrame=this._parentWindow.requestAnimationFrame(()=>this._innerRefresh())),this._animationFrame}refresh(a,c,f){this._rowCount=f,a=a!==void 0?a:0,c=c!==void 0?c:this._rowCount-1,this._rowStart=this._rowStart!==void 0?Math.min(this._rowStart,a):a,this._rowEnd=this._rowEnd!==void 0?Math.max(this._rowEnd,c):c,this._animationFrame||(this._animationFrame=this._parentWindow.requestAnimationFrame(()=>this._innerRefresh()))}_innerRefresh(){if(this._animationFrame=void 0,this._rowStart===void 0||this._rowEnd===void 0||this._rowCount===void 0)return void this._runRefreshCallbacks();const a=Math.max(this._rowStart,0),c=Math.min(this._rowEnd,this._rowCount-1);this._rowStart=void 0,this._rowEnd=void 0,this._renderCallback(a,c),this._runRefreshCallbacks()}_runRefreshCallbacks(){for(const a of this._refreshCallbacks)a(0);this._refreshCallbacks=[]}}},5596:(l,o,a)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.ScreenDprMonitor=void 0;const c=a(844);class f extends c.Disposable{constructor(m){super(),this._parentWindow=m,this._currentDevicePixelRatio=this._parentWindow.devicePixelRatio,this.register((0,c.toDisposable)(()=>{this.clearListener()}))}setListener(m){this._listener&&this.clearListener(),this._listener=m,this._outerListener=()=>{this._listener&&(this._listener(this._parentWindow.devicePixelRatio,this._currentDevicePixelRatio),this._updateDpr())},this._updateDpr()}_updateDpr(){var m;this._outerListener&&((m=this._resolutionMediaMatchList)===null||m===void 0||m.removeListener(this._outerListener),this._currentDevicePixelRatio=this._parentWindow.devicePixelRatio,this._resolutionMediaMatchList=this._parentWindow.matchMedia(`screen and (resolution: ${this._parentWindow.devicePixelRatio}dppx)`),this._resolutionMediaMatchList.addListener(this._outerListener))}clearListener(){this._resolutionMediaMatchList&&this._listener&&this._outerListener&&(this._resolutionMediaMatchList.removeListener(this._outerListener),this._resolutionMediaMatchList=void 0,this._listener=void 0,this._outerListener=void 0)}}o.ScreenDprMonitor=f},3236:(l,o,a)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.Terminal=void 0;const c=a(3614),f=a(3656),u=a(6465),m=a(9042),v=a(3730),y=a(1680),g=a(3107),h=a(5744),d=a(2950),_=a(1296),p=a(428),b=a(4269),S=a(5114),L=a(8934),k=a(3230),C=a(9312),w=a(4725),E=a(6731),A=a(8055),O=a(8969),T=a(8460),P=a(844),F=a(6114),z=a(8437),Z=a(2584),M=a(7399),B=a(5941),R=a(9074),H=a(2585),N=a(5435),se=a(4567),he=typeof window<"u"?window.document:null;class ce extends O.CoreTerminal{get onFocus(){return this._onFocus.event}get onBlur(){return this._onBlur.event}get onA11yChar(){return this._onA11yCharEmitter.event}get onA11yTab(){return this._onA11yTabEmitter.event}get onWillOpen(){return this._onWillOpen.event}constructor(D={}){super(D),this.browser=F,this._keyDownHandled=!1,this._keyDownSeen=!1,this._keyPressHandled=!1,this._unprocessedDeadKey=!1,this._accessibilityManager=this.register(new P.MutableDisposable),this._onCursorMove=this.register(new T.EventEmitter),this.onCursorMove=this._onCursorMove.event,this._onKey=this.register(new T.EventEmitter),this.onKey=this._onKey.event,this._onRender=this.register(new T.EventEmitter),this.onRender=this._onRender.event,this._onSelectionChange=this.register(new T.EventEmitter),this.onSelectionChange=this._onSelectionChange.event,this._onTitleChange=this.register(new T.EventEmitter),this.onTitleChange=this._onTitleChange.event,this._onBell=this.register(new T.EventEmitter),this.onBell=this._onBell.event,this._onFocus=this.register(new T.EventEmitter),this._onBlur=this.register(new T.EventEmitter),this._onA11yCharEmitter=this.register(new T.EventEmitter),this._onA11yTabEmitter=this.register(new T.EventEmitter),this._onWillOpen=this.register(new T.EventEmitter),this._setup(),this.linkifier2=this.register(this._instantiationService.createInstance(u.Linkifier2)),this.linkifier2.registerLinkProvider(this._instantiationService.createInstance(v.OscLinkProvider)),this._decorationService=this._instantiationService.createInstance(R.DecorationService),this._instantiationService.setService(H.IDecorationService,this._decorationService),this.register(this._inputHandler.onRequestBell(()=>this._onBell.fire())),this.register(this._inputHandler.onRequestRefreshRows((V,K)=>this.refresh(V,K))),this.register(this._inputHandler.onRequestSendFocus(()=>this._reportFocus())),this.register(this._inputHandler.onRequestReset(()=>this.reset())),this.register(this._inputHandler.onRequestWindowsOptionsReport(V=>this._reportWindowsOptions(V))),this.register(this._inputHandler.onColor(V=>this._handleColorEvent(V))),this.register((0,T.forwardEvent)(this._inputHandler.onCursorMove,this._onCursorMove)),this.register((0,T.forwardEvent)(this._inputHandler.onTitleChange,this._onTitleChange)),this.register((0,T.forwardEvent)(this._inputHandler.onA11yChar,this._onA11yCharEmitter)),this.register((0,T.forwardEvent)(this._inputHandler.onA11yTab,this._onA11yTabEmitter)),this.register(this._bufferService.onResize(V=>this._afterResize(V.cols,V.rows))),this.register((0,P.toDisposable)(()=>{var V,K;this._customKeyEventHandler=void 0,(K=(V=this.element)===null||V===void 0?void 0:V.parentNode)===null||K===void 0||K.removeChild(this.element)}))}_handleColorEvent(D){if(this._themeService)for(const V of D){let K,q="";switch(V.index){case 256:K="foreground",q="10";break;case 257:K="background",q="11";break;case 258:K="cursor",q="12";break;default:K="ansi",q="4;"+V.index}switch(V.type){case 0:const _e=A.color.toColorRGB(K==="ansi"?this._themeService.colors.ansi[V.index]:this._themeService.colors[K]);this.coreService.triggerDataEvent(`${Z.C0.ESC}]${q};${(0,B.toRgbString)(_e)}${Z.C1_ESCAPED.ST}`);break;case 1:if(K==="ansi")this._themeService.modifyColors(ie=>ie.ansi[V.index]=A.rgba.toColor(...V.color));else{const ie=K;this._themeService.modifyColors(we=>we[ie]=A.rgba.toColor(...V.color))}break;case 2:this._themeService.restoreColor(V.index)}}}_setup(){super._setup(),this._customKeyEventHandler=void 0}get buffer(){return this.buffers.active}focus(){this.textarea&&this.textarea.focus({preventScroll:!0})}_handleScreenReaderModeOptionChange(D){D?!this._accessibilityManager.value&&this._renderService&&(this._accessibilityManager.value=this._instantiationService.createInstance(se.AccessibilityManager,this)):this._accessibilityManager.clear()}_handleTextAreaFocus(D){this.coreService.decPrivateModes.sendFocus&&this.coreService.triggerDataEvent(Z.C0.ESC+"[I"),this.updateCursorStyle(D),this.element.classList.add("focus"),this._showCursor(),this._onFocus.fire()}blur(){var D;return(D=this.textarea)===null||D===void 0?void 0:D.blur()}_handleTextAreaBlur(){this.textarea.value="",this.refresh(this.buffer.y,this.buffer.y),this.coreService.decPrivateModes.sendFocus&&this.coreService.triggerDataEvent(Z.C0.ESC+"[O"),this.element.classList.remove("focus"),this._onBlur.fire()}_syncTextArea(){if(!this.textarea||!this.buffer.isCursorInViewport||this._compositionHelper.isComposing||!this._renderService)return;const D=this.buffer.ybase+this.buffer.y,V=this.buffer.lines.get(D);if(!V)return;const K=Math.min(this.buffer.x,this.cols-1),q=this._renderService.dimensions.css.cell.height,_e=V.getWidth(K),ie=this._renderService.dimensions.css.cell.width*_e,we=this.buffer.y*this._renderService.dimensions.css.cell.height,Ie=K*this._renderService.dimensions.css.cell.width;this.textarea.style.left=Ie+"px",this.textarea.style.top=we+"px",this.textarea.style.width=ie+"px",this.textarea.style.height=q+"px",this.textarea.style.lineHeight=q+"px",this.textarea.style.zIndex="-5"}_initGlobal(){this._bindKeys(),this.register((0,f.addDisposableDomListener)(this.element,"copy",V=>{this.hasSelection()&&(0,c.copyHandler)(V,this._selectionService)}));const D=V=>(0,c.handlePasteEvent)(V,this.textarea,this.coreService,this.optionsService);this.register((0,f.addDisposableDomListener)(this.textarea,"paste",D)),this.register((0,f.addDisposableDomListener)(this.element,"paste",D)),F.isFirefox?this.register((0,f.addDisposableDomListener)(this.element,"mousedown",V=>{V.button===2&&(0,c.rightClickHandler)(V,this.textarea,this.screenElement,this._selectionService,this.options.rightClickSelectsWord)})):this.register((0,f.addDisposableDomListener)(this.element,"contextmenu",V=>{(0,c.rightClickHandler)(V,this.textarea,this.screenElement,this._selectionService,this.options.rightClickSelectsWord)})),F.isLinux&&this.register((0,f.addDisposableDomListener)(this.element,"auxclick",V=>{V.button===1&&(0,c.moveTextAreaUnderMouseCursor)(V,this.textarea,this.screenElement)}))}_bindKeys(){this.register((0,f.addDisposableDomListener)(this.textarea,"keyup",D=>this._keyUp(D),!0)),this.register((0,f.addDisposableDomListener)(this.textarea,"keydown",D=>this._keyDown(D),!0)),this.register((0,f.addDisposableDomListener)(this.textarea,"keypress",D=>this._keyPress(D),!0)),this.register((0,f.addDisposableDomListener)(this.textarea,"compositionstart",()=>this._compositionHelper.compositionstart())),this.register((0,f.addDisposableDomListener)(this.textarea,"compositionupdate",D=>this._compositionHelper.compositionupdate(D))),this.register((0,f.addDisposableDomListener)(this.textarea,"compositionend",()=>this._compositionHelper.compositionend())),this.register((0,f.addDisposableDomListener)(this.textarea,"input",D=>this._inputEvent(D),!0)),this.register(this.onRender(()=>this._compositionHelper.updateCompositionElements()))}open(D){var V;if(!D)throw new Error("Terminal requires a parent element.");D.isConnected||this._logService.debug("Terminal.open was called on an element that was not attached to the DOM"),this._document=D.ownerDocument,this.element=this._document.createElement("div"),this.element.dir="ltr",this.element.classList.add("terminal"),this.element.classList.add("xterm"),D.appendChild(this.element);const K=he.createDocumentFragment();this._viewportElement=he.createElement("div"),this._viewportElement.classList.add("xterm-viewport"),K.appendChild(this._viewportElement),this._viewportScrollArea=he.createElement("div"),this._viewportScrollArea.classList.add("xterm-scroll-area"),this._viewportElement.appendChild(this._viewportScrollArea),this.screenElement=he.createElement("div"),this.screenElement.classList.add("xterm-screen"),this._helperContainer=he.createElement("div"),this._helperContainer.classList.add("xterm-helpers"),this.screenElement.appendChild(this._helperContainer),K.appendChild(this.screenElement),this.textarea=he.createElement("textarea"),this.textarea.classList.add("xterm-helper-textarea"),this.textarea.setAttribute("aria-label",m.promptLabel),F.isChromeOS||this.textarea.setAttribute("aria-multiline","false"),this.textarea.setAttribute("autocorrect","off"),this.textarea.setAttribute("autocapitalize","off"),this.textarea.setAttribute("spellcheck","false"),this.textarea.tabIndex=0,this._coreBrowserService=this._instantiationService.createInstance(S.CoreBrowserService,this.textarea,(V=this._document.defaultView)!==null&&V!==void 0?V:window),this._instantiationService.setService(w.ICoreBrowserService,this._coreBrowserService),this.register((0,f.addDisposableDomListener)(this.textarea,"focus",q=>this._handleTextAreaFocus(q))),this.register((0,f.addDisposableDomListener)(this.textarea,"blur",()=>this._handleTextAreaBlur())),this._helperContainer.appendChild(this.textarea),this._charSizeService=this._instantiationService.createInstance(p.CharSizeService,this._document,this._helperContainer),this._instantiationService.setService(w.ICharSizeService,this._charSizeService),this._themeService=this._instantiationService.createInstance(E.ThemeService),this._instantiationService.setService(w.IThemeService,this._themeService),this._characterJoinerService=this._instantiationService.createInstance(b.CharacterJoinerService),this._instantiationService.setService(w.ICharacterJoinerService,this._characterJoinerService),this._renderService=this.register(this._instantiationService.createInstance(k.RenderService,this.rows,this.screenElement)),this._instantiationService.setService(w.IRenderService,this._renderService),this.register(this._renderService.onRenderedViewportChange(q=>this._onRender.fire(q))),this.onResize(q=>this._renderService.resize(q.cols,q.rows)),this._compositionView=he.createElement("div"),this._compositionView.classList.add("composition-view"),this._compositionHelper=this._instantiationService.createInstance(d.CompositionHelper,this.textarea,this._compositionView),this._helperContainer.appendChild(this._compositionView),this.element.appendChild(K);try{this._onWillOpen.fire(this.element)}catch{}this._renderService.hasRenderer()||this._renderService.setRenderer(this._createRenderer()),this._mouseService=this._instantiationService.createInstance(L.MouseService),this._instantiationService.setService(w.IMouseService,this._mouseService),this.viewport=this._instantiationService.createInstance(y.Viewport,this._viewportElement,this._viewportScrollArea),this.viewport.onRequestScrollLines(q=>this.scrollLines(q.amount,q.suppressScrollEvent,1)),this.register(this._inputHandler.onRequestSyncScrollBar(()=>this.viewport.syncScrollArea())),this.register(this.viewport),this.register(this.onCursorMove(()=>{this._renderService.handleCursorMove(),this._syncTextArea()})),this.register(this.onResize(()=>this._renderService.handleResize(this.cols,this.rows))),this.register(this.onBlur(()=>this._renderService.handleBlur())),this.register(this.onFocus(()=>this._renderService.handleFocus())),this.register(this._renderService.onDimensionsChange(()=>this.viewport.syncScrollArea())),this._selectionService=this.register(this._instantiationService.createInstance(C.SelectionService,this.element,this.screenElement,this.linkifier2)),this._instantiationService.setService(w.ISelectionService,this._selectionService),this.register(this._selectionService.onRequestScrollLines(q=>this.scrollLines(q.amount,q.suppressScrollEvent))),this.register(this._selectionService.onSelectionChange(()=>this._onSelectionChange.fire())),this.register(this._selectionService.onRequestRedraw(q=>this._renderService.handleSelectionChanged(q.start,q.end,q.columnSelectMode))),this.register(this._selectionService.onLinuxMouseSelection(q=>{this.textarea.value=q,this.textarea.focus(),this.textarea.select()})),this.register(this._onScroll.event(q=>{this.viewport.syncScrollArea(),this._selectionService.refresh()})),this.register((0,f.addDisposableDomListener)(this._viewportElement,"scroll",()=>this._selectionService.refresh())),this.linkifier2.attachToDom(this.screenElement,this._mouseService,this._renderService),this.register(this._instantiationService.createInstance(g.BufferDecorationRenderer,this.screenElement)),this.register((0,f.addDisposableDomListener)(this.element,"mousedown",q=>this._selectionService.handleMouseDown(q))),this.coreMouseService.areMouseEventsActive?(this._selectionService.disable(),this.element.classList.add("enable-mouse-events")):this._selectionService.enable(),this.options.screenReaderMode&&(this._accessibilityManager.value=this._instantiationService.createInstance(se.AccessibilityManager,this)),this.register(this.optionsService.onSpecificOptionChange("screenReaderMode",q=>this._handleScreenReaderModeOptionChange(q))),this.options.overviewRulerWidth&&(this._overviewRulerRenderer=this.register(this._instantiationService.createInstance(h.OverviewRulerRenderer,this._viewportElement,this.screenElement))),this.optionsService.onSpecificOptionChange("overviewRulerWidth",q=>{!this._overviewRulerRenderer&&q&&this._viewportElement&&this.screenElement&&(this._overviewRulerRenderer=this.register(this._instantiationService.createInstance(h.OverviewRulerRenderer,this._viewportElement,this.screenElement)))}),this._charSizeService.measure(),this.refresh(0,this.rows-1),this._initGlobal(),this.bindMouse()}_createRenderer(){return this._instantiationService.createInstance(_.DomRenderer,this.element,this.screenElement,this._viewportElement,this.linkifier2)}bindMouse(){const D=this,V=this.element;function K(ie){const we=D._mouseService.getMouseReportCoords(ie,D.screenElement);if(!we)return!1;let Ie,Ke;switch(ie.overrideType||ie.type){case"mousemove":Ke=32,ie.buttons===void 0?(Ie=3,ie.button!==void 0&&(Ie=ie.button<3?ie.button:3)):Ie=1&ie.buttons?0:4&ie.buttons?1:2&ie.buttons?2:3;break;case"mouseup":Ke=0,Ie=ie.button<3?ie.button:3;break;case"mousedown":Ke=1,Ie=ie.button<3?ie.button:3;break;case"wheel":if(D.viewport.getLinesScrolled(ie)===0)return!1;Ke=ie.deltaY<0?0:1,Ie=4;break;default:return!1}return!(Ke===void 0||Ie===void 0||Ie>4)&&D.coreMouseService.triggerMouseEvent({col:we.col,row:we.row,x:we.x,y:we.y,button:Ie,action:Ke,ctrl:ie.ctrlKey,alt:ie.altKey,shift:ie.shiftKey})}const q={mouseup:null,wheel:null,mousedrag:null,mousemove:null},_e={mouseup:ie=>(K(ie),ie.buttons||(this._document.removeEventListener("mouseup",q.mouseup),q.mousedrag&&this._document.removeEventListener("mousemove",q.mousedrag)),this.cancel(ie)),wheel:ie=>(K(ie),this.cancel(ie,!0)),mousedrag:ie=>{ie.buttons&&K(ie)},mousemove:ie=>{ie.buttons||K(ie)}};this.register(this.coreMouseService.onProtocolChange(ie=>{ie?(this.optionsService.rawOptions.logLevel==="debug"&&this._logService.debug("Binding to mouse events:",this.coreMouseService.explainEvents(ie)),this.element.classList.add("enable-mouse-events"),this._selectionService.disable()):(this._logService.debug("Unbinding from mouse events."),this.element.classList.remove("enable-mouse-events"),this._selectionService.enable()),8&ie?q.mousemove||(V.addEventListener("mousemove",_e.mousemove),q.mousemove=_e.mousemove):(V.removeEventListener("mousemove",q.mousemove),q.mousemove=null),16&ie?q.wheel||(V.addEventListener("wheel",_e.wheel,{passive:!1}),q.wheel=_e.wheel):(V.removeEventListener("wheel",q.wheel),q.wheel=null),2&ie?q.mouseup||(V.addEventListener("mouseup",_e.mouseup),q.mouseup=_e.mouseup):(this._document.removeEventListener("mouseup",q.mouseup),V.removeEventListener("mouseup",q.mouseup),q.mouseup=null),4&ie?q.mousedrag||(q.mousedrag=_e.mousedrag):(this._document.removeEventListener("mousemove",q.mousedrag),q.mousedrag=null)})),this.coreMouseService.activeProtocol=this.coreMouseService.activeProtocol,this.register((0,f.addDisposableDomListener)(V,"mousedown",ie=>{if(ie.preventDefault(),this.focus(),this.coreMouseService.areMouseEventsActive&&!this._selectionService.shouldForceSelection(ie))return K(ie),q.mouseup&&this._document.addEventListener("mouseup",q.mouseup),q.mousedrag&&this._document.addEventListener("mousemove",q.mousedrag),this.cancel(ie)})),this.register((0,f.addDisposableDomListener)(V,"wheel",ie=>{if(!q.wheel){if(!this.buffer.hasScrollback){const we=this.viewport.getLinesScrolled(ie);if(we===0)return;const Ie=Z.C0.ESC+(this.coreService.decPrivateModes.applicationCursorKeys?"O":"[")+(ie.deltaY<0?"A":"B");let Ke="";for(let vt=0;vt<Math.abs(we);vt++)Ke+=Ie;return this.coreService.triggerDataEvent(Ke,!0),this.cancel(ie,!0)}return this.viewport.handleWheel(ie)?this.cancel(ie):void 0}},{passive:!1})),this.register((0,f.addDisposableDomListener)(V,"touchstart",ie=>{if(!this.coreMouseService.areMouseEventsActive)return this.viewport.handleTouchStart(ie),this.cancel(ie)},{passive:!0})),this.register((0,f.addDisposableDomListener)(V,"touchmove",ie=>{if(!this.coreMouseService.areMouseEventsActive)return this.viewport.handleTouchMove(ie)?void 0:this.cancel(ie)},{passive:!1}))}refresh(D,V){var K;(K=this._renderService)===null||K===void 0||K.refreshRows(D,V)}updateCursorStyle(D){var V;!((V=this._selectionService)===null||V===void 0)&&V.shouldColumnSelect(D)?this.element.classList.add("column-select"):this.element.classList.remove("column-select")}_showCursor(){this.coreService.isCursorInitialized||(this.coreService.isCursorInitialized=!0,this.refresh(this.buffer.y,this.buffer.y))}scrollLines(D,V,K=0){var q;K===1?(super.scrollLines(D,V,K),this.refresh(0,this.rows-1)):(q=this.viewport)===null||q===void 0||q.scrollLines(D)}paste(D){(0,c.paste)(D,this.textarea,this.coreService,this.optionsService)}attachCustomKeyEventHandler(D){this._customKeyEventHandler=D}registerLinkProvider(D){return this.linkifier2.registerLinkProvider(D)}registerCharacterJoiner(D){if(!this._characterJoinerService)throw new Error("Terminal must be opened first");const V=this._characterJoinerService.register(D);return this.refresh(0,this.rows-1),V}deregisterCharacterJoiner(D){if(!this._characterJoinerService)throw new Error("Terminal must be opened first");this._characterJoinerService.deregister(D)&&this.refresh(0,this.rows-1)}get markers(){return this.buffer.markers}registerMarker(D){return this.buffer.addMarker(this.buffer.ybase+this.buffer.y+D)}registerDecoration(D){return this._decorationService.registerDecoration(D)}hasSelection(){return!!this._selectionService&&this._selectionService.hasSelection}select(D,V,K){this._selectionService.setSelection(D,V,K)}getSelection(){return this._selectionService?this._selectionService.selectionText:""}getSelectionPosition(){if(this._selectionService&&this._selectionService.hasSelection)return{start:{x:this._selectionService.selectionStart[0],y:this._selectionService.selectionStart[1]},end:{x:this._selectionService.selectionEnd[0],y:this._selectionService.selectionEnd[1]}}}clearSelection(){var D;(D=this._selectionService)===null||D===void 0||D.clearSelection()}selectAll(){var D;(D=this._selectionService)===null||D===void 0||D.selectAll()}selectLines(D,V){var K;(K=this._selectionService)===null||K===void 0||K.selectLines(D,V)}_keyDown(D){if(this._keyDownHandled=!1,this._keyDownSeen=!0,this._customKeyEventHandler&&this._customKeyEventHandler(D)===!1)return!1;const V=this.browser.isMac&&this.options.macOptionIsMeta&&D.altKey;if(!V&&!this._compositionHelper.keydown(D))return this.options.scrollOnUserInput&&this.buffer.ybase!==this.buffer.ydisp&&this.scrollToBottom(),!1;V||D.key!=="Dead"&&D.key!=="AltGraph"||(this._unprocessedDeadKey=!0);const K=(0,M.evaluateKeyboardEvent)(D,this.coreService.decPrivateModes.applicationCursorKeys,this.browser.isMac,this.options.macOptionIsMeta);if(this.updateCursorStyle(D),K.type===3||K.type===2){const q=this.rows-1;return this.scrollLines(K.type===2?-q:q),this.cancel(D,!0)}return K.type===1&&this.selectAll(),!!this._isThirdLevelShift(this.browser,D)||(K.cancel&&this.cancel(D,!0),!K.key||!!(D.key&&!D.ctrlKey&&!D.altKey&&!D.metaKey&&D.key.length===1&&D.key.charCodeAt(0)>=65&&D.key.charCodeAt(0)<=90)||(this._unprocessedDeadKey?(this._unprocessedDeadKey=!1,!0):(K.key!==Z.C0.ETX&&K.key!==Z.C0.CR||(this.textarea.value=""),this._onKey.fire({key:K.key,domEvent:D}),this._showCursor(),this.coreService.triggerDataEvent(K.key,!0),!this.optionsService.rawOptions.screenReaderMode||D.altKey||D.ctrlKey?this.cancel(D,!0):void(this._keyDownHandled=!0))))}_isThirdLevelShift(D,V){const K=D.isMac&&!this.options.macOptionIsMeta&&V.altKey&&!V.ctrlKey&&!V.metaKey||D.isWindows&&V.altKey&&V.ctrlKey&&!V.metaKey||D.isWindows&&V.getModifierState("AltGraph");return V.type==="keypress"?K:K&&(!V.keyCode||V.keyCode>47)}_keyUp(D){this._keyDownSeen=!1,this._customKeyEventHandler&&this._customKeyEventHandler(D)===!1||(function(V){return V.keyCode===16||V.keyCode===17||V.keyCode===18}(D)||this.focus(),this.updateCursorStyle(D),this._keyPressHandled=!1)}_keyPress(D){let V;if(this._keyPressHandled=!1,this._keyDownHandled||this._customKeyEventHandler&&this._customKeyEventHandler(D)===!1)return!1;if(this.cancel(D),D.charCode)V=D.charCode;else if(D.which===null||D.which===void 0)V=D.keyCode;else{if(D.which===0||D.charCode===0)return!1;V=D.which}return!(!V||(D.altKey||D.ctrlKey||D.metaKey)&&!this._isThirdLevelShift(this.browser,D)||(V=String.fromCharCode(V),this._onKey.fire({key:V,domEvent:D}),this._showCursor(),this.coreService.triggerDataEvent(V,!0),this._keyPressHandled=!0,this._unprocessedDeadKey=!1,0))}_inputEvent(D){if(D.data&&D.inputType==="insertText"&&(!D.composed||!this._keyDownSeen)&&!this.optionsService.rawOptions.screenReaderMode){if(this._keyPressHandled)return!1;this._unprocessedDeadKey=!1;const V=D.data;return this.coreService.triggerDataEvent(V,!0),this.cancel(D),!0}return!1}resize(D,V){D!==this.cols||V!==this.rows?super.resize(D,V):this._charSizeService&&!this._charSizeService.hasValidSize&&this._charSizeService.measure()}_afterResize(D,V){var K,q;(K=this._charSizeService)===null||K===void 0||K.measure(),(q=this.viewport)===null||q===void 0||q.syncScrollArea(!0)}clear(){var D;if(this.buffer.ybase!==0||this.buffer.y!==0){this.buffer.clearAllMarkers(),this.buffer.lines.set(0,this.buffer.lines.get(this.buffer.ybase+this.buffer.y)),this.buffer.lines.length=1,this.buffer.ydisp=0,this.buffer.ybase=0,this.buffer.y=0;for(let V=1;V<this.rows;V++)this.buffer.lines.push(this.buffer.getBlankLine(z.DEFAULT_ATTR_DATA));this._onScroll.fire({position:this.buffer.ydisp,source:0}),(D=this.viewport)===null||D===void 0||D.reset(),this.refresh(0,this.rows-1)}}reset(){var D,V;this.options.rows=this.rows,this.options.cols=this.cols;const K=this._customKeyEventHandler;this._setup(),super.reset(),(D=this._selectionService)===null||D===void 0||D.reset(),this._decorationService.reset(),(V=this.viewport)===null||V===void 0||V.reset(),this._customKeyEventHandler=K,this.refresh(0,this.rows-1)}clearTextureAtlas(){var D;(D=this._renderService)===null||D===void 0||D.clearTextureAtlas()}_reportFocus(){var D;!((D=this.element)===null||D===void 0)&&D.classList.contains("focus")?this.coreService.triggerDataEvent(Z.C0.ESC+"[I"):this.coreService.triggerDataEvent(Z.C0.ESC+"[O")}_reportWindowsOptions(D){if(this._renderService)switch(D){case N.WindowsOptionsReportType.GET_WIN_SIZE_PIXELS:const V=this._renderService.dimensions.css.canvas.width.toFixed(0),K=this._renderService.dimensions.css.canvas.height.toFixed(0);this.coreService.triggerDataEvent(`${Z.C0.ESC}[4;${K};${V}t`);break;case N.WindowsOptionsReportType.GET_CELL_SIZE_PIXELS:const q=this._renderService.dimensions.css.cell.width.toFixed(0),_e=this._renderService.dimensions.css.cell.height.toFixed(0);this.coreService.triggerDataEvent(`${Z.C0.ESC}[6;${_e};${q}t`)}}cancel(D,V){if(this.options.cancelEvents||V)return D.preventDefault(),D.stopPropagation(),!1}}o.Terminal=ce},9924:(l,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.TimeBasedDebouncer=void 0,o.TimeBasedDebouncer=class{constructor(a,c=1e3){this._renderCallback=a,this._debounceThresholdMS=c,this._lastRefreshMs=0,this._additionalRefreshRequested=!1}dispose(){this._refreshTimeoutID&&clearTimeout(this._refreshTimeoutID)}refresh(a,c,f){this._rowCount=f,a=a!==void 0?a:0,c=c!==void 0?c:this._rowCount-1,this._rowStart=this._rowStart!==void 0?Math.min(this._rowStart,a):a,this._rowEnd=this._rowEnd!==void 0?Math.max(this._rowEnd,c):c;const u=Date.now();if(u-this._lastRefreshMs>=this._debounceThresholdMS)this._lastRefreshMs=u,this._innerRefresh();else if(!this._additionalRefreshRequested){const m=u-this._lastRefreshMs,v=this._debounceThresholdMS-m;this._additionalRefreshRequested=!0,this._refreshTimeoutID=window.setTimeout(()=>{this._lastRefreshMs=Date.now(),this._innerRefresh(),this._additionalRefreshRequested=!1,this._refreshTimeoutID=void 0},v)}}_innerRefresh(){if(this._rowStart===void 0||this._rowEnd===void 0||this._rowCount===void 0)return;const a=Math.max(this._rowStart,0),c=Math.min(this._rowEnd,this._rowCount-1);this._rowStart=void 0,this._rowEnd=void 0,this._renderCallback(a,c)}}},1680:function(l,o,a){var c=this&&this.__decorate||function(d,_,p,b){var S,L=arguments.length,k=L<3?_:b===null?b=Object.getOwnPropertyDescriptor(_,p):b;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")k=Reflect.decorate(d,_,p,b);else for(var C=d.length-1;C>=0;C--)(S=d[C])&&(k=(L<3?S(k):L>3?S(_,p,k):S(_,p))||k);return L>3&&k&&Object.defineProperty(_,p,k),k},f=this&&this.__param||function(d,_){return function(p,b){_(p,b,d)}};Object.defineProperty(o,"__esModule",{value:!0}),o.Viewport=void 0;const u=a(3656),m=a(4725),v=a(8460),y=a(844),g=a(2585);let h=o.Viewport=class extends y.Disposable{constructor(d,_,p,b,S,L,k,C){super(),this._viewportElement=d,this._scrollArea=_,this._bufferService=p,this._optionsService=b,this._charSizeService=S,this._renderService=L,this._coreBrowserService=k,this.scrollBarWidth=0,this._currentRowHeight=0,this._currentDeviceCellHeight=0,this._lastRecordedBufferLength=0,this._lastRecordedViewportHeight=0,this._lastRecordedBufferHeight=0,this._lastTouchY=0,this._lastScrollTop=0,this._wheelPartialScroll=0,this._refreshAnimationFrame=null,this._ignoreNextScrollEvent=!1,this._smoothScrollState={startTime:0,origin:-1,target:-1},this._onRequestScrollLines=this.register(new v.EventEmitter),this.onRequestScrollLines=this._onRequestScrollLines.event,this.scrollBarWidth=this._viewportElement.offsetWidth-this._scrollArea.offsetWidth||15,this.register((0,u.addDisposableDomListener)(this._viewportElement,"scroll",this._handleScroll.bind(this))),this._activeBuffer=this._bufferService.buffer,this.register(this._bufferService.buffers.onBufferActivate(w=>this._activeBuffer=w.activeBuffer)),this._renderDimensions=this._renderService.dimensions,this.register(this._renderService.onDimensionsChange(w=>this._renderDimensions=w)),this._handleThemeChange(C.colors),this.register(C.onChangeColors(w=>this._handleThemeChange(w))),this.register(this._optionsService.onSpecificOptionChange("scrollback",()=>this.syncScrollArea())),setTimeout(()=>this.syncScrollArea())}_handleThemeChange(d){this._viewportElement.style.backgroundColor=d.background.css}reset(){this._currentRowHeight=0,this._currentDeviceCellHeight=0,this._lastRecordedBufferLength=0,this._lastRecordedViewportHeight=0,this._lastRecordedBufferHeight=0,this._lastTouchY=0,this._lastScrollTop=0,this._coreBrowserService.window.requestAnimationFrame(()=>this.syncScrollArea())}_refresh(d){if(d)return this._innerRefresh(),void(this._refreshAnimationFrame!==null&&this._coreBrowserService.window.cancelAnimationFrame(this._refreshAnimationFrame));this._refreshAnimationFrame===null&&(this._refreshAnimationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>this._innerRefresh()))}_innerRefresh(){if(this._charSizeService.height>0){this._currentRowHeight=this._renderService.dimensions.device.cell.height/this._coreBrowserService.dpr,this._currentDeviceCellHeight=this._renderService.dimensions.device.cell.height,this._lastRecordedViewportHeight=this._viewportElement.offsetHeight;const _=Math.round(this._currentRowHeight*this._lastRecordedBufferLength)+(this._lastRecordedViewportHeight-this._renderService.dimensions.css.canvas.height);this._lastRecordedBufferHeight!==_&&(this._lastRecordedBufferHeight=_,this._scrollArea.style.height=this._lastRecordedBufferHeight+"px")}const d=this._bufferService.buffer.ydisp*this._currentRowHeight;this._viewportElement.scrollTop!==d&&(this._ignoreNextScrollEvent=!0,this._viewportElement.scrollTop=d),this._refreshAnimationFrame=null}syncScrollArea(d=!1){if(this._lastRecordedBufferLength!==this._bufferService.buffer.lines.length)return this._lastRecordedBufferLength=this._bufferService.buffer.lines.length,void this._refresh(d);this._lastRecordedViewportHeight===this._renderService.dimensions.css.canvas.height&&this._lastScrollTop===this._activeBuffer.ydisp*this._currentRowHeight&&this._renderDimensions.device.cell.height===this._currentDeviceCellHeight||this._refresh(d)}_handleScroll(d){if(this._lastScrollTop=this._viewportElement.scrollTop,!this._viewportElement.offsetParent)return;if(this._ignoreNextScrollEvent)return this._ignoreNextScrollEvent=!1,void this._onRequestScrollLines.fire({amount:0,suppressScrollEvent:!0});const _=Math.round(this._lastScrollTop/this._currentRowHeight)-this._bufferService.buffer.ydisp;this._onRequestScrollLines.fire({amount:_,suppressScrollEvent:!0})}_smoothScroll(){if(this._isDisposed||this._smoothScrollState.origin===-1||this._smoothScrollState.target===-1)return;const d=this._smoothScrollPercent();this._viewportElement.scrollTop=this._smoothScrollState.origin+Math.round(d*(this._smoothScrollState.target-this._smoothScrollState.origin)),d<1?this._coreBrowserService.window.requestAnimationFrame(()=>this._smoothScroll()):this._clearSmoothScrollState()}_smoothScrollPercent(){return this._optionsService.rawOptions.smoothScrollDuration&&this._smoothScrollState.startTime?Math.max(Math.min((Date.now()-this._smoothScrollState.startTime)/this._optionsService.rawOptions.smoothScrollDuration,1),0):1}_clearSmoothScrollState(){this._smoothScrollState.startTime=0,this._smoothScrollState.origin=-1,this._smoothScrollState.target=-1}_bubbleScroll(d,_){const p=this._viewportElement.scrollTop+this._lastRecordedViewportHeight;return!(_<0&&this._viewportElement.scrollTop!==0||_>0&&p<this._lastRecordedBufferHeight)||(d.cancelable&&d.preventDefault(),!1)}handleWheel(d){const _=this._getPixelsScrolled(d);return _!==0&&(this._optionsService.rawOptions.smoothScrollDuration?(this._smoothScrollState.startTime=Date.now(),this._smoothScrollPercent()<1?(this._smoothScrollState.origin=this._viewportElement.scrollTop,this._smoothScrollState.target===-1?this._smoothScrollState.target=this._viewportElement.scrollTop+_:this._smoothScrollState.target+=_,this._smoothScrollState.target=Math.max(Math.min(this._smoothScrollState.target,this._viewportElement.scrollHeight),0),this._smoothScroll()):this._clearSmoothScrollState()):this._viewportElement.scrollTop+=_,this._bubbleScroll(d,_))}scrollLines(d){if(d!==0)if(this._optionsService.rawOptions.smoothScrollDuration){const _=d*this._currentRowHeight;this._smoothScrollState.startTime=Date.now(),this._smoothScrollPercent()<1?(this._smoothScrollState.origin=this._viewportElement.scrollTop,this._smoothScrollState.target=this._smoothScrollState.origin+_,this._smoothScrollState.target=Math.max(Math.min(this._smoothScrollState.target,this._viewportElement.scrollHeight),0),this._smoothScroll()):this._clearSmoothScrollState()}else this._onRequestScrollLines.fire({amount:d,suppressScrollEvent:!1})}_getPixelsScrolled(d){if(d.deltaY===0||d.shiftKey)return 0;let _=this._applyScrollModifier(d.deltaY,d);return d.deltaMode===WheelEvent.DOM_DELTA_LINE?_*=this._currentRowHeight:d.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(_*=this._currentRowHeight*this._bufferService.rows),_}getBufferElements(d,_){var p;let b,S="";const L=[],k=_??this._bufferService.buffer.lines.length,C=this._bufferService.buffer.lines;for(let w=d;w<k;w++){const E=C.get(w);if(!E)continue;const A=(p=C.get(w+1))===null||p===void 0?void 0:p.isWrapped;if(S+=E.translateToString(!A),!A||w===C.length-1){const O=document.createElement("div");O.textContent=S,L.push(O),S.length>0&&(b=O),S=""}}return{bufferElements:L,cursorElement:b}}getLinesScrolled(d){if(d.deltaY===0||d.shiftKey)return 0;let _=this._applyScrollModifier(d.deltaY,d);return d.deltaMode===WheelEvent.DOM_DELTA_PIXEL?(_/=this._currentRowHeight+0,this._wheelPartialScroll+=_,_=Math.floor(Math.abs(this._wheelPartialScroll))*(this._wheelPartialScroll>0?1:-1),this._wheelPartialScroll%=1):d.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(_*=this._bufferService.rows),_}_applyScrollModifier(d,_){const p=this._optionsService.rawOptions.fastScrollModifier;return p==="alt"&&_.altKey||p==="ctrl"&&_.ctrlKey||p==="shift"&&_.shiftKey?d*this._optionsService.rawOptions.fastScrollSensitivity*this._optionsService.rawOptions.scrollSensitivity:d*this._optionsService.rawOptions.scrollSensitivity}handleTouchStart(d){this._lastTouchY=d.touches[0].pageY}handleTouchMove(d){const _=this._lastTouchY-d.touches[0].pageY;return this._lastTouchY=d.touches[0].pageY,_!==0&&(this._viewportElement.scrollTop+=_,this._bubbleScroll(d,_))}};o.Viewport=h=c([f(2,g.IBufferService),f(3,g.IOptionsService),f(4,m.ICharSizeService),f(5,m.IRenderService),f(6,m.ICoreBrowserService),f(7,m.IThemeService)],h)},3107:function(l,o,a){var c=this&&this.__decorate||function(h,d,_,p){var b,S=arguments.length,L=S<3?d:p===null?p=Object.getOwnPropertyDescriptor(d,_):p;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")L=Reflect.decorate(h,d,_,p);else for(var k=h.length-1;k>=0;k--)(b=h[k])&&(L=(S<3?b(L):S>3?b(d,_,L):b(d,_))||L);return S>3&&L&&Object.defineProperty(d,_,L),L},f=this&&this.__param||function(h,d){return function(_,p){d(_,p,h)}};Object.defineProperty(o,"__esModule",{value:!0}),o.BufferDecorationRenderer=void 0;const u=a(3656),m=a(4725),v=a(844),y=a(2585);let g=o.BufferDecorationRenderer=class extends v.Disposable{constructor(h,d,_,p){super(),this._screenElement=h,this._bufferService=d,this._decorationService=_,this._renderService=p,this._decorationElements=new Map,this._altBufferIsActive=!1,this._dimensionsChanged=!1,this._container=document.createElement("div"),this._container.classList.add("xterm-decoration-container"),this._screenElement.appendChild(this._container),this.register(this._renderService.onRenderedViewportChange(()=>this._doRefreshDecorations())),this.register(this._renderService.onDimensionsChange(()=>{this._dimensionsChanged=!0,this._queueRefresh()})),this.register((0,u.addDisposableDomListener)(window,"resize",()=>this._queueRefresh())),this.register(this._bufferService.buffers.onBufferActivate(()=>{this._altBufferIsActive=this._bufferService.buffer===this._bufferService.buffers.alt})),this.register(this._decorationService.onDecorationRegistered(()=>this._queueRefresh())),this.register(this._decorationService.onDecorationRemoved(b=>this._removeDecoration(b))),this.register((0,v.toDisposable)(()=>{this._container.remove(),this._decorationElements.clear()}))}_queueRefresh(){this._animationFrame===void 0&&(this._animationFrame=this._renderService.addRefreshCallback(()=>{this._doRefreshDecorations(),this._animationFrame=void 0}))}_doRefreshDecorations(){for(const h of this._decorationService.decorations)this._renderDecoration(h);this._dimensionsChanged=!1}_renderDecoration(h){this._refreshStyle(h),this._dimensionsChanged&&this._refreshXPosition(h)}_createElement(h){var d,_;const p=document.createElement("div");p.classList.add("xterm-decoration"),p.classList.toggle("xterm-decoration-top-layer",((d=h==null?void 0:h.options)===null||d===void 0?void 0:d.layer)==="top"),p.style.width=`${Math.round((h.options.width||1)*this._renderService.dimensions.css.cell.width)}px`,p.style.height=(h.options.height||1)*this._renderService.dimensions.css.cell.height+"px",p.style.top=(h.marker.line-this._bufferService.buffers.active.ydisp)*this._renderService.dimensions.css.cell.height+"px",p.style.lineHeight=`${this._renderService.dimensions.css.cell.height}px`;const b=(_=h.options.x)!==null&&_!==void 0?_:0;return b&&b>this._bufferService.cols&&(p.style.display="none"),this._refreshXPosition(h,p),p}_refreshStyle(h){const d=h.marker.line-this._bufferService.buffers.active.ydisp;if(d<0||d>=this._bufferService.rows)h.element&&(h.element.style.display="none",h.onRenderEmitter.fire(h.element));else{let _=this._decorationElements.get(h);_||(_=this._createElement(h),h.element=_,this._decorationElements.set(h,_),this._container.appendChild(_),h.onDispose(()=>{this._decorationElements.delete(h),_.remove()})),_.style.top=d*this._renderService.dimensions.css.cell.height+"px",_.style.display=this._altBufferIsActive?"none":"block",h.onRenderEmitter.fire(_)}}_refreshXPosition(h,d=h.element){var _;if(!d)return;const p=(_=h.options.x)!==null&&_!==void 0?_:0;(h.options.anchor||"left")==="right"?d.style.right=p?p*this._renderService.dimensions.css.cell.width+"px":"":d.style.left=p?p*this._renderService.dimensions.css.cell.width+"px":""}_removeDecoration(h){var d;(d=this._decorationElements.get(h))===null||d===void 0||d.remove(),this._decorationElements.delete(h),h.dispose()}};o.BufferDecorationRenderer=g=c([f(1,y.IBufferService),f(2,y.IDecorationService),f(3,m.IRenderService)],g)},5871:(l,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.ColorZoneStore=void 0,o.ColorZoneStore=class{constructor(){this._zones=[],this._zonePool=[],this._zonePoolIndex=0,this._linePadding={full:0,left:0,center:0,right:0}}get zones(){return this._zonePool.length=Math.min(this._zonePool.length,this._zones.length),this._zones}clear(){this._zones.length=0,this._zonePoolIndex=0}addDecoration(a){if(a.options.overviewRulerOptions){for(const c of this._zones)if(c.color===a.options.overviewRulerOptions.color&&c.position===a.options.overviewRulerOptions.position){if(this._lineIntersectsZone(c,a.marker.line))return;if(this._lineAdjacentToZone(c,a.marker.line,a.options.overviewRulerOptions.position))return void this._addLineToZone(c,a.marker.line)}if(this._zonePoolIndex<this._zonePool.length)return this._zonePool[this._zonePoolIndex].color=a.options.overviewRulerOptions.color,this._zonePool[this._zonePoolIndex].position=a.options.overviewRulerOptions.position,this._zonePool[this._zonePoolIndex].startBufferLine=a.marker.line,this._zonePool[this._zonePoolIndex].endBufferLine=a.marker.line,void this._zones.push(this._zonePool[this._zonePoolIndex++]);this._zones.push({color:a.options.overviewRulerOptions.color,position:a.options.overviewRulerOptions.position,startBufferLine:a.marker.line,endBufferLine:a.marker.line}),this._zonePool.push(this._zones[this._zones.length-1]),this._zonePoolIndex++}}setPadding(a){this._linePadding=a}_lineIntersectsZone(a,c){return c>=a.startBufferLine&&c<=a.endBufferLine}_lineAdjacentToZone(a,c,f){return c>=a.startBufferLine-this._linePadding[f||"full"]&&c<=a.endBufferLine+this._linePadding[f||"full"]}_addLineToZone(a,c){a.startBufferLine=Math.min(a.startBufferLine,c),a.endBufferLine=Math.max(a.endBufferLine,c)}}},5744:function(l,o,a){var c=this&&this.__decorate||function(b,S,L,k){var C,w=arguments.length,E=w<3?S:k===null?k=Object.getOwnPropertyDescriptor(S,L):k;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")E=Reflect.decorate(b,S,L,k);else for(var A=b.length-1;A>=0;A--)(C=b[A])&&(E=(w<3?C(E):w>3?C(S,L,E):C(S,L))||E);return w>3&&E&&Object.defineProperty(S,L,E),E},f=this&&this.__param||function(b,S){return function(L,k){S(L,k,b)}};Object.defineProperty(o,"__esModule",{value:!0}),o.OverviewRulerRenderer=void 0;const u=a(5871),m=a(3656),v=a(4725),y=a(844),g=a(2585),h={full:0,left:0,center:0,right:0},d={full:0,left:0,center:0,right:0},_={full:0,left:0,center:0,right:0};let p=o.OverviewRulerRenderer=class extends y.Disposable{get _width(){return this._optionsService.options.overviewRulerWidth||0}constructor(b,S,L,k,C,w,E){var A;super(),this._viewportElement=b,this._screenElement=S,this._bufferService=L,this._decorationService=k,this._renderService=C,this._optionsService=w,this._coreBrowseService=E,this._colorZoneStore=new u.ColorZoneStore,this._shouldUpdateDimensions=!0,this._shouldUpdateAnchor=!0,this._lastKnownBufferLength=0,this._canvas=document.createElement("canvas"),this._canvas.classList.add("xterm-decoration-overview-ruler"),this._refreshCanvasDimensions(),(A=this._viewportElement.parentElement)===null||A===void 0||A.insertBefore(this._canvas,this._viewportElement);const O=this._canvas.getContext("2d");if(!O)throw new Error("Ctx cannot be null");this._ctx=O,this._registerDecorationListeners(),this._registerBufferChangeListeners(),this._registerDimensionChangeListeners(),this.register((0,y.toDisposable)(()=>{var T;(T=this._canvas)===null||T===void 0||T.remove()}))}_registerDecorationListeners(){this.register(this._decorationService.onDecorationRegistered(()=>this._queueRefresh(void 0,!0))),this.register(this._decorationService.onDecorationRemoved(()=>this._queueRefresh(void 0,!0)))}_registerBufferChangeListeners(){this.register(this._renderService.onRenderedViewportChange(()=>this._queueRefresh())),this.register(this._bufferService.buffers.onBufferActivate(()=>{this._canvas.style.display=this._bufferService.buffer===this._bufferService.buffers.alt?"none":"block"})),this.register(this._bufferService.onScroll(()=>{this._lastKnownBufferLength!==this._bufferService.buffers.normal.lines.length&&(this._refreshDrawHeightConstants(),this._refreshColorZonePadding())}))}_registerDimensionChangeListeners(){this.register(this._renderService.onRender(()=>{this._containerHeight&&this._containerHeight===this._screenElement.clientHeight||(this._queueRefresh(!0),this._containerHeight=this._screenElement.clientHeight)})),this.register(this._optionsService.onSpecificOptionChange("overviewRulerWidth",()=>this._queueRefresh(!0))),this.register((0,m.addDisposableDomListener)(this._coreBrowseService.window,"resize",()=>this._queueRefresh(!0))),this._queueRefresh(!0)}_refreshDrawConstants(){const b=Math.floor(this._canvas.width/3),S=Math.ceil(this._canvas.width/3);d.full=this._canvas.width,d.left=b,d.center=S,d.right=b,this._refreshDrawHeightConstants(),_.full=0,_.left=0,_.center=d.left,_.right=d.left+d.center}_refreshDrawHeightConstants(){h.full=Math.round(2*this._coreBrowseService.dpr);const b=this._canvas.height/this._bufferService.buffer.lines.length,S=Math.round(Math.max(Math.min(b,12),6)*this._coreBrowseService.dpr);h.left=S,h.center=S,h.right=S}_refreshColorZonePadding(){this._colorZoneStore.setPadding({full:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*h.full),left:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*h.left),center:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*h.center),right:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*h.right)}),this._lastKnownBufferLength=this._bufferService.buffers.normal.lines.length}_refreshCanvasDimensions(){this._canvas.style.width=`${this._width}px`,this._canvas.width=Math.round(this._width*this._coreBrowseService.dpr),this._canvas.style.height=`${this._screenElement.clientHeight}px`,this._canvas.height=Math.round(this._screenElement.clientHeight*this._coreBrowseService.dpr),this._refreshDrawConstants(),this._refreshColorZonePadding()}_refreshDecorations(){this._shouldUpdateDimensions&&this._refreshCanvasDimensions(),this._ctx.clearRect(0,0,this._canvas.width,this._canvas.height),this._colorZoneStore.clear();for(const S of this._decorationService.decorations)this._colorZoneStore.addDecoration(S);this._ctx.lineWidth=1;const b=this._colorZoneStore.zones;for(const S of b)S.position!=="full"&&this._renderColorZone(S);for(const S of b)S.position==="full"&&this._renderColorZone(S);this._shouldUpdateDimensions=!1,this._shouldUpdateAnchor=!1}_renderColorZone(b){this._ctx.fillStyle=b.color,this._ctx.fillRect(_[b.position||"full"],Math.round((this._canvas.height-1)*(b.startBufferLine/this._bufferService.buffers.active.lines.length)-h[b.position||"full"]/2),d[b.position||"full"],Math.round((this._canvas.height-1)*((b.endBufferLine-b.startBufferLine)/this._bufferService.buffers.active.lines.length)+h[b.position||"full"]))}_queueRefresh(b,S){this._shouldUpdateDimensions=b||this._shouldUpdateDimensions,this._shouldUpdateAnchor=S||this._shouldUpdateAnchor,this._animationFrame===void 0&&(this._animationFrame=this._coreBrowseService.window.requestAnimationFrame(()=>{this._refreshDecorations(),this._animationFrame=void 0}))}};o.OverviewRulerRenderer=p=c([f(2,g.IBufferService),f(3,g.IDecorationService),f(4,v.IRenderService),f(5,g.IOptionsService),f(6,v.ICoreBrowserService)],p)},2950:function(l,o,a){var c=this&&this.__decorate||function(g,h,d,_){var p,b=arguments.length,S=b<3?h:_===null?_=Object.getOwnPropertyDescriptor(h,d):_;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")S=Reflect.decorate(g,h,d,_);else for(var L=g.length-1;L>=0;L--)(p=g[L])&&(S=(b<3?p(S):b>3?p(h,d,S):p(h,d))||S);return b>3&&S&&Object.defineProperty(h,d,S),S},f=this&&this.__param||function(g,h){return function(d,_){h(d,_,g)}};Object.defineProperty(o,"__esModule",{value:!0}),o.CompositionHelper=void 0;const u=a(4725),m=a(2585),v=a(2584);let y=o.CompositionHelper=class{get isComposing(){return this._isComposing}constructor(g,h,d,_,p,b){this._textarea=g,this._compositionView=h,this._bufferService=d,this._optionsService=_,this._coreService=p,this._renderService=b,this._isComposing=!1,this._isSendingComposition=!1,this._compositionPosition={start:0,end:0},this._dataAlreadySent=""}compositionstart(){this._isComposing=!0,this._compositionPosition.start=this._textarea.value.length,this._compositionView.textContent="",this._dataAlreadySent="",this._compositionView.classList.add("active")}compositionupdate(g){this._compositionView.textContent=g.data,this.updateCompositionElements(),setTimeout(()=>{this._compositionPosition.end=this._textarea.value.length},0)}compositionend(){this._finalizeComposition(!0)}keydown(g){if(this._isComposing||this._isSendingComposition){if(g.keyCode===229||g.keyCode===16||g.keyCode===17||g.keyCode===18)return!1;this._finalizeComposition(!1)}return g.keyCode!==229||(this._handleAnyTextareaChanges(),!1)}_finalizeComposition(g){if(this._compositionView.classList.remove("active"),this._isComposing=!1,g){const h={start:this._compositionPosition.start,end:this._compositionPosition.end};this._isSendingComposition=!0,setTimeout(()=>{if(this._isSendingComposition){let d;this._isSendingComposition=!1,h.start+=this._dataAlreadySent.length,d=this._isComposing?this._textarea.value.substring(h.start,h.end):this._textarea.value.substring(h.start),d.length>0&&this._coreService.triggerDataEvent(d,!0)}},0)}else{this._isSendingComposition=!1;const h=this._textarea.value.substring(this._compositionPosition.start,this._compositionPosition.end);this._coreService.triggerDataEvent(h,!0)}}_handleAnyTextareaChanges(){const g=this._textarea.value;setTimeout(()=>{if(!this._isComposing){const h=this._textarea.value,d=h.replace(g,"");this._dataAlreadySent=d,h.length>g.length?this._coreService.triggerDataEvent(d,!0):h.length<g.length?this._coreService.triggerDataEvent(`${v.C0.DEL}`,!0):h.length===g.length&&h!==g&&this._coreService.triggerDataEvent(h,!0)}},0)}updateCompositionElements(g){if(this._isComposing){if(this._bufferService.buffer.isCursorInViewport){const h=Math.min(this._bufferService.buffer.x,this._bufferService.cols-1),d=this._renderService.dimensions.css.cell.height,_=this._bufferService.buffer.y*this._renderService.dimensions.css.cell.height,p=h*this._renderService.dimensions.css.cell.width;this._compositionView.style.left=p+"px",this._compositionView.style.top=_+"px",this._compositionView.style.height=d+"px",this._compositionView.style.lineHeight=d+"px",this._compositionView.style.fontFamily=this._optionsService.rawOptions.fontFamily,this._compositionView.style.fontSize=this._optionsService.rawOptions.fontSize+"px";const b=this._compositionView.getBoundingClientRect();this._textarea.style.left=p+"px",this._textarea.style.top=_+"px",this._textarea.style.width=Math.max(b.width,1)+"px",this._textarea.style.height=Math.max(b.height,1)+"px",this._textarea.style.lineHeight=b.height+"px"}g||setTimeout(()=>this.updateCompositionElements(!0),0)}}};o.CompositionHelper=y=c([f(2,m.IBufferService),f(3,m.IOptionsService),f(4,m.ICoreService),f(5,u.IRenderService)],y)},9806:(l,o)=>{function a(c,f,u){const m=u.getBoundingClientRect(),v=c.getComputedStyle(u),y=parseInt(v.getPropertyValue("padding-left")),g=parseInt(v.getPropertyValue("padding-top"));return[f.clientX-m.left-y,f.clientY-m.top-g]}Object.defineProperty(o,"__esModule",{value:!0}),o.getCoords=o.getCoordsRelativeToElement=void 0,o.getCoordsRelativeToElement=a,o.getCoords=function(c,f,u,m,v,y,g,h,d){if(!y)return;const _=a(c,f,u);return _?(_[0]=Math.ceil((_[0]+(d?g/2:0))/g),_[1]=Math.ceil(_[1]/h),_[0]=Math.min(Math.max(_[0],1),m+(d?1:0)),_[1]=Math.min(Math.max(_[1],1),v),_):void 0}},9504:(l,o,a)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.moveToCellSequence=void 0;const c=a(2584);function f(h,d,_,p){const b=h-u(h,_),S=d-u(d,_),L=Math.abs(b-S)-function(k,C,w){let E=0;const A=k-u(k,w),O=C-u(C,w);for(let T=0;T<Math.abs(A-O);T++){const P=m(k,C)==="A"?-1:1,F=w.buffer.lines.get(A+P*T);F!=null&&F.isWrapped&&E++}return E}(h,d,_);return g(L,y(m(h,d),p))}function u(h,d){let _=0,p=d.buffer.lines.get(h),b=p==null?void 0:p.isWrapped;for(;b&&h>=0&&h<d.rows;)_++,p=d.buffer.lines.get(--h),b=p==null?void 0:p.isWrapped;return _}function m(h,d){return h>d?"A":"B"}function v(h,d,_,p,b,S){let L=h,k=d,C="";for(;L!==_||k!==p;)L+=b?1:-1,b&&L>S.cols-1?(C+=S.buffer.translateBufferLineToString(k,!1,h,L),L=0,h=0,k++):!b&&L<0&&(C+=S.buffer.translateBufferLineToString(k,!1,0,h+1),L=S.cols-1,h=L,k--);return C+S.buffer.translateBufferLineToString(k,!1,h,L)}function y(h,d){const _=d?"O":"[";return c.C0.ESC+_+h}function g(h,d){h=Math.floor(h);let _="";for(let p=0;p<h;p++)_+=d;return _}o.moveToCellSequence=function(h,d,_,p){const b=_.buffer.x,S=_.buffer.y;if(!_.buffer.hasScrollback)return function(C,w,E,A,O,T){return f(w,A,O,T).length===0?"":g(v(C,w,C,w-u(w,O),!1,O).length,y("D",T))}(b,S,0,d,_,p)+f(S,d,_,p)+function(C,w,E,A,O,T){let P;P=f(w,A,O,T).length>0?A-u(A,O):w;const F=A,z=function(Z,M,B,R,H,N){let se;return se=f(B,R,H,N).length>0?R-u(R,H):M,Z<B&&se<=R||Z>=B&&se<R?"C":"D"}(C,w,E,A,O,T);return g(v(C,P,E,F,z==="C",O).length,y(z,T))}(b,S,h,d,_,p);let L;if(S===d)return L=b>h?"D":"C",g(Math.abs(b-h),y(L,p));L=S>d?"D":"C";const k=Math.abs(S-d);return g(function(C,w){return w.cols-C}(S>d?h:b,_)+(k-1)*_.cols+1+((S>d?b:h)-1),y(L,p))}},1296:function(l,o,a){var c=this&&this.__decorate||function(O,T,P,F){var z,Z=arguments.length,M=Z<3?T:F===null?F=Object.getOwnPropertyDescriptor(T,P):F;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")M=Reflect.decorate(O,T,P,F);else for(var B=O.length-1;B>=0;B--)(z=O[B])&&(M=(Z<3?z(M):Z>3?z(T,P,M):z(T,P))||M);return Z>3&&M&&Object.defineProperty(T,P,M),M},f=this&&this.__param||function(O,T){return function(P,F){T(P,F,O)}};Object.defineProperty(o,"__esModule",{value:!0}),o.DomRenderer=void 0;const u=a(3787),m=a(2550),v=a(2223),y=a(6171),g=a(4725),h=a(8055),d=a(8460),_=a(844),p=a(2585),b="xterm-dom-renderer-owner-",S="xterm-rows",L="xterm-fg-",k="xterm-bg-",C="xterm-focus",w="xterm-selection";let E=1,A=o.DomRenderer=class extends _.Disposable{constructor(O,T,P,F,z,Z,M,B,R,H){super(),this._element=O,this._screenElement=T,this._viewportElement=P,this._linkifier2=F,this._charSizeService=Z,this._optionsService=M,this._bufferService=B,this._coreBrowserService=R,this._themeService=H,this._terminalClass=E++,this._rowElements=[],this.onRequestRedraw=this.register(new d.EventEmitter).event,this._rowContainer=document.createElement("div"),this._rowContainer.classList.add(S),this._rowContainer.style.lineHeight="normal",this._rowContainer.setAttribute("aria-hidden","true"),this._refreshRowElements(this._bufferService.cols,this._bufferService.rows),this._selectionContainer=document.createElement("div"),this._selectionContainer.classList.add(w),this._selectionContainer.setAttribute("aria-hidden","true"),this.dimensions=(0,y.createRenderDimensions)(),this._updateDimensions(),this.register(this._optionsService.onOptionChange(()=>this._handleOptionsChanged())),this.register(this._themeService.onChangeColors(N=>this._injectCss(N))),this._injectCss(this._themeService.colors),this._rowFactory=z.createInstance(u.DomRendererRowFactory,document),this._element.classList.add(b+this._terminalClass),this._screenElement.appendChild(this._rowContainer),this._screenElement.appendChild(this._selectionContainer),this.register(this._linkifier2.onShowLinkUnderline(N=>this._handleLinkHover(N))),this.register(this._linkifier2.onHideLinkUnderline(N=>this._handleLinkLeave(N))),this.register((0,_.toDisposable)(()=>{this._element.classList.remove(b+this._terminalClass),this._rowContainer.remove(),this._selectionContainer.remove(),this._widthCache.dispose(),this._themeStyleElement.remove(),this._dimensionsStyleElement.remove()})),this._widthCache=new m.WidthCache(document),this._widthCache.setFont(this._optionsService.rawOptions.fontFamily,this._optionsService.rawOptions.fontSize,this._optionsService.rawOptions.fontWeight,this._optionsService.rawOptions.fontWeightBold),this._setDefaultSpacing()}_updateDimensions(){const O=this._coreBrowserService.dpr;this.dimensions.device.char.width=this._charSizeService.width*O,this.dimensions.device.char.height=Math.ceil(this._charSizeService.height*O),this.dimensions.device.cell.width=this.dimensions.device.char.width+Math.round(this._optionsService.rawOptions.letterSpacing),this.dimensions.device.cell.height=Math.floor(this.dimensions.device.char.height*this._optionsService.rawOptions.lineHeight),this.dimensions.device.char.left=0,this.dimensions.device.char.top=0,this.dimensions.device.canvas.width=this.dimensions.device.cell.width*this._bufferService.cols,this.dimensions.device.canvas.height=this.dimensions.device.cell.height*this._bufferService.rows,this.dimensions.css.canvas.width=Math.round(this.dimensions.device.canvas.width/O),this.dimensions.css.canvas.height=Math.round(this.dimensions.device.canvas.height/O),this.dimensions.css.cell.width=this.dimensions.css.canvas.width/this._bufferService.cols,this.dimensions.css.cell.height=this.dimensions.css.canvas.height/this._bufferService.rows;for(const P of this._rowElements)P.style.width=`${this.dimensions.css.canvas.width}px`,P.style.height=`${this.dimensions.css.cell.height}px`,P.style.lineHeight=`${this.dimensions.css.cell.height}px`,P.style.overflow="hidden";this._dimensionsStyleElement||(this._dimensionsStyleElement=document.createElement("style"),this._screenElement.appendChild(this._dimensionsStyleElement));const T=`${this._terminalSelector} .${S} span { display: inline-block; height: 100%; vertical-align: top;}`;this._dimensionsStyleElement.textContent=T,this._selectionContainer.style.height=this._viewportElement.style.height,this._screenElement.style.width=`${this.dimensions.css.canvas.width}px`,this._screenElement.style.height=`${this.dimensions.css.canvas.height}px`}_injectCss(O){this._themeStyleElement||(this._themeStyleElement=document.createElement("style"),this._screenElement.appendChild(this._themeStyleElement));let T=`${this._terminalSelector} .${S} { color: ${O.foreground.css}; font-family: ${this._optionsService.rawOptions.fontFamily}; font-size: ${this._optionsService.rawOptions.fontSize}px; font-kerning: none; white-space: pre}`;T+=`${this._terminalSelector} .${S} .xterm-dim { color: ${h.color.multiplyOpacity(O.foreground,.5).css};}`,T+=`${this._terminalSelector} span:not(.xterm-bold) { font-weight: ${this._optionsService.rawOptions.fontWeight};}${this._terminalSelector} span.xterm-bold { font-weight: ${this._optionsService.rawOptions.fontWeightBold};}${this._terminalSelector} span.xterm-italic { font-style: italic;}`,T+="@keyframes blink_box_shadow_"+this._terminalClass+" { 50% {  border-bottom-style: hidden; }}",T+="@keyframes blink_block_"+this._terminalClass+` { 0% {  background-color: ${O.cursor.css};  color: ${O.cursorAccent.css}; } 50% {  background-color: inherit;  color: ${O.cursor.css}; }}`,T+=`${this._terminalSelector} .${S}.${C} .xterm-cursor.xterm-cursor-blink:not(.xterm-cursor-block) { animation: blink_box_shadow_`+this._terminalClass+` 1s step-end infinite;}${this._terminalSelector} .${S}.${C} .xterm-cursor.xterm-cursor-blink.xterm-cursor-block { animation: blink_block_`+this._terminalClass+` 1s step-end infinite;}${this._terminalSelector} .${S} .xterm-cursor.xterm-cursor-block { background-color: ${O.cursor.css}; color: ${O.cursorAccent.css};}${this._terminalSelector} .${S} .xterm-cursor.xterm-cursor-outline { outline: 1px solid ${O.cursor.css}; outline-offset: -1px;}${this._terminalSelector} .${S} .xterm-cursor.xterm-cursor-bar { box-shadow: ${this._optionsService.rawOptions.cursorWidth}px 0 0 ${O.cursor.css} inset;}${this._terminalSelector} .${S} .xterm-cursor.xterm-cursor-underline { border-bottom: 1px ${O.cursor.css}; border-bottom-style: solid; height: calc(100% - 1px);}`,T+=`${this._terminalSelector} .${w} { position: absolute; top: 0; left: 0; z-index: 1; pointer-events: none;}${this._terminalSelector}.focus .${w} div { position: absolute; background-color: ${O.selectionBackgroundOpaque.css};}${this._terminalSelector} .${w} div { position: absolute; background-color: ${O.selectionInactiveBackgroundOpaque.css};}`;for(const[P,F]of O.ansi.entries())T+=`${this._terminalSelector} .${L}${P} { color: ${F.css}; }${this._terminalSelector} .${L}${P}.xterm-dim { color: ${h.color.multiplyOpacity(F,.5).css}; }${this._terminalSelector} .${k}${P} { background-color: ${F.css}; }`;T+=`${this._terminalSelector} .${L}${v.INVERTED_DEFAULT_COLOR} { color: ${h.color.opaque(O.background).css}; }${this._terminalSelector} .${L}${v.INVERTED_DEFAULT_COLOR}.xterm-dim { color: ${h.color.multiplyOpacity(h.color.opaque(O.background),.5).css}; }${this._terminalSelector} .${k}${v.INVERTED_DEFAULT_COLOR} { background-color: ${O.foreground.css}; }`,this._themeStyleElement.textContent=T}_setDefaultSpacing(){const O=this.dimensions.css.cell.width-this._widthCache.get("W",!1,!1);this._rowContainer.style.letterSpacing=`${O}px`,this._rowFactory.defaultSpacing=O}handleDevicePixelRatioChange(){this._updateDimensions(),this._widthCache.clear(),this._setDefaultSpacing()}_refreshRowElements(O,T){for(let P=this._rowElements.length;P<=T;P++){const F=document.createElement("div");this._rowContainer.appendChild(F),this._rowElements.push(F)}for(;this._rowElements.length>T;)this._rowContainer.removeChild(this._rowElements.pop())}handleResize(O,T){this._refreshRowElements(O,T),this._updateDimensions()}handleCharSizeChanged(){this._updateDimensions(),this._widthCache.clear(),this._setDefaultSpacing()}handleBlur(){this._rowContainer.classList.remove(C)}handleFocus(){this._rowContainer.classList.add(C),this.renderRows(this._bufferService.buffer.y,this._bufferService.buffer.y)}handleSelectionChanged(O,T,P){if(this._selectionContainer.replaceChildren(),this._rowFactory.handleSelectionChanged(O,T,P),this.renderRows(0,this._bufferService.rows-1),!O||!T)return;const F=O[1]-this._bufferService.buffer.ydisp,z=T[1]-this._bufferService.buffer.ydisp,Z=Math.max(F,0),M=Math.min(z,this._bufferService.rows-1);if(Z>=this._bufferService.rows||M<0)return;const B=document.createDocumentFragment();if(P){const R=O[0]>T[0];B.appendChild(this._createSelectionElement(Z,R?T[0]:O[0],R?O[0]:T[0],M-Z+1))}else{const R=F===Z?O[0]:0,H=Z===z?T[0]:this._bufferService.cols;B.appendChild(this._createSelectionElement(Z,R,H));const N=M-Z-1;if(B.appendChild(this._createSelectionElement(Z+1,0,this._bufferService.cols,N)),Z!==M){const se=z===M?T[0]:this._bufferService.cols;B.appendChild(this._createSelectionElement(M,0,se))}}this._selectionContainer.appendChild(B)}_createSelectionElement(O,T,P,F=1){const z=document.createElement("div");return z.style.height=F*this.dimensions.css.cell.height+"px",z.style.top=O*this.dimensions.css.cell.height+"px",z.style.left=T*this.dimensions.css.cell.width+"px",z.style.width=this.dimensions.css.cell.width*(P-T)+"px",z}handleCursorMove(){}_handleOptionsChanged(){this._updateDimensions(),this._injectCss(this._themeService.colors),this._widthCache.setFont(this._optionsService.rawOptions.fontFamily,this._optionsService.rawOptions.fontSize,this._optionsService.rawOptions.fontWeight,this._optionsService.rawOptions.fontWeightBold),this._setDefaultSpacing()}clear(){for(const O of this._rowElements)O.replaceChildren()}renderRows(O,T){const P=this._bufferService.buffer,F=P.ybase+P.y,z=Math.min(P.x,this._bufferService.cols-1),Z=this._optionsService.rawOptions.cursorBlink,M=this._optionsService.rawOptions.cursorStyle,B=this._optionsService.rawOptions.cursorInactiveStyle;for(let R=O;R<=T;R++){const H=R+P.ydisp,N=this._rowElements[R],se=P.lines.get(H);if(!N||!se)break;N.replaceChildren(...this._rowFactory.createRow(se,H,H===F,M,B,z,Z,this.dimensions.css.cell.width,this._widthCache,-1,-1))}}get _terminalSelector(){return`.${b}${this._terminalClass}`}_handleLinkHover(O){this._setCellUnderline(O.x1,O.x2,O.y1,O.y2,O.cols,!0)}_handleLinkLeave(O){this._setCellUnderline(O.x1,O.x2,O.y1,O.y2,O.cols,!1)}_setCellUnderline(O,T,P,F,z,Z){P<0&&(O=0),F<0&&(T=0);const M=this._bufferService.rows-1;P=Math.max(Math.min(P,M),0),F=Math.max(Math.min(F,M),0),z=Math.min(z,this._bufferService.cols);const B=this._bufferService.buffer,R=B.ybase+B.y,H=Math.min(B.x,z-1),N=this._optionsService.rawOptions.cursorBlink,se=this._optionsService.rawOptions.cursorStyle,he=this._optionsService.rawOptions.cursorInactiveStyle;for(let ce=P;ce<=F;++ce){const be=ce+B.ydisp,D=this._rowElements[ce],V=B.lines.get(be);if(!D||!V)break;D.replaceChildren(...this._rowFactory.createRow(V,be,be===R,se,he,H,N,this.dimensions.css.cell.width,this._widthCache,Z?ce===P?O:0:-1,Z?(ce===F?T:z)-1:-1))}}};o.DomRenderer=A=c([f(4,p.IInstantiationService),f(5,g.ICharSizeService),f(6,p.IOptionsService),f(7,p.IBufferService),f(8,g.ICoreBrowserService),f(9,g.IThemeService)],A)},3787:function(l,o,a){var c=this&&this.__decorate||function(L,k,C,w){var E,A=arguments.length,O=A<3?k:w===null?w=Object.getOwnPropertyDescriptor(k,C):w;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")O=Reflect.decorate(L,k,C,w);else for(var T=L.length-1;T>=0;T--)(E=L[T])&&(O=(A<3?E(O):A>3?E(k,C,O):E(k,C))||O);return A>3&&O&&Object.defineProperty(k,C,O),O},f=this&&this.__param||function(L,k){return function(C,w){k(C,w,L)}};Object.defineProperty(o,"__esModule",{value:!0}),o.DomRendererRowFactory=void 0;const u=a(2223),m=a(643),v=a(511),y=a(2585),g=a(8055),h=a(4725),d=a(4269),_=a(6171),p=a(3734);let b=o.DomRendererRowFactory=class{constructor(L,k,C,w,E,A,O){this._document=L,this._characterJoinerService=k,this._optionsService=C,this._coreBrowserService=w,this._coreService=E,this._decorationService=A,this._themeService=O,this._workCell=new v.CellData,this._columnSelectMode=!1,this.defaultSpacing=0}handleSelectionChanged(L,k,C){this._selectionStart=L,this._selectionEnd=k,this._columnSelectMode=C}createRow(L,k,C,w,E,A,O,T,P,F,z){const Z=[],M=this._characterJoinerService.getJoinedCharacters(k),B=this._themeService.colors;let R,H=L.getNoBgTrimmedLength();C&&H<A+1&&(H=A+1);let N=0,se="",he=0,ce=0,be=0,D=!1,V=0,K=!1,q=0;const _e=[],ie=F!==-1&&z!==-1;for(let we=0;we<H;we++){L.loadCell(we,this._workCell);let Ie=this._workCell.getWidth();if(Ie===0)continue;let Ke=!1,vt=we,Ce=this._workCell;if(M.length>0&&we===M[0][0]){Ke=!0;const Ve=M.shift();Ce=new d.JoinedCellData(this._workCell,L.translateToString(!0,Ve[0],Ve[1]),Ve[1]-Ve[0]),vt=Ve[1]-1,Ie=Ce.getWidth()}const pi=this._isCellInSelection(we,k),qi=C&&we===A,Zi=ie&&we>=F&&we<=z;let Ki=!1;this._decorationService.forEachDecorationAtCell(we,k,void 0,Ve=>{Ki=!0});let Li=Ce.getChars()||m.WHITESPACE_CELL_CHAR;if(Li===" "&&(Ce.isUnderline()||Ce.isOverline())&&(Li=" "),q=Ie*T-P.get(Li,Ce.isBold(),Ce.isItalic()),R){if(N&&(pi&&K||!pi&&!K&&Ce.bg===he)&&(pi&&K&&B.selectionForeground||Ce.fg===ce)&&Ce.extended.ext===be&&Zi===D&&q===V&&!qi&&!Ke&&!Ki){se+=Li,N++;continue}N&&(R.textContent=se),R=this._document.createElement("span"),N=0,se=""}else R=this._document.createElement("span");if(he=Ce.bg,ce=Ce.fg,be=Ce.extended.ext,D=Zi,V=q,K=pi,Ke&&A>=we&&A<=vt&&(A=we),!this._coreService.isCursorHidden&&qi){if(_e.push("xterm-cursor"),this._coreBrowserService.isFocused)O&&_e.push("xterm-cursor-blink"),_e.push(w==="bar"?"xterm-cursor-bar":w==="underline"?"xterm-cursor-underline":"xterm-cursor-block");else if(E)switch(E){case"outline":_e.push("xterm-cursor-outline");break;case"block":_e.push("xterm-cursor-block");break;case"bar":_e.push("xterm-cursor-bar");break;case"underline":_e.push("xterm-cursor-underline")}}if(Ce.isBold()&&_e.push("xterm-bold"),Ce.isItalic()&&_e.push("xterm-italic"),Ce.isDim()&&_e.push("xterm-dim"),se=Ce.isInvisible()?m.WHITESPACE_CELL_CHAR:Ce.getChars()||m.WHITESPACE_CELL_CHAR,Ce.isUnderline()&&(_e.push(`xterm-underline-${Ce.extended.underlineStyle}`),se===" "&&(se=" "),!Ce.isUnderlineColorDefault()))if(Ce.isUnderlineColorRGB())R.style.textDecorationColor=`rgb(${p.AttributeData.toColorRGB(Ce.getUnderlineColor()).join(",")})`;else{let Ve=Ce.getUnderlineColor();this._optionsService.rawOptions.drawBoldTextInBrightColors&&Ce.isBold()&&Ve<8&&(Ve+=8),R.style.textDecorationColor=B.ansi[Ve].css}Ce.isOverline()&&(_e.push("xterm-overline"),se===" "&&(se=" ")),Ce.isStrikethrough()&&_e.push("xterm-strikethrough"),Zi&&(R.style.textDecoration="underline");let mt=Ce.getFgColor(),mi=Ce.getFgColorMode(),wt=Ce.getBgColor(),I=Ce.getBgColorMode();const br=!!Ce.isInverse();if(br){const Ve=mt;mt=wt,wt=Ve;const Nc=mi;mi=I,I=Nc}let si,yr,ri,Gi=!1;switch(this._decorationService.forEachDecorationAtCell(we,k,void 0,Ve=>{Ve.options.layer!=="top"&&Gi||(Ve.backgroundColorRGB&&(I=50331648,wt=Ve.backgroundColorRGB.rgba>>8&16777215,si=Ve.backgroundColorRGB),Ve.foregroundColorRGB&&(mi=50331648,mt=Ve.foregroundColorRGB.rgba>>8&16777215,yr=Ve.foregroundColorRGB),Gi=Ve.options.layer==="top")}),!Gi&&pi&&(si=this._coreBrowserService.isFocused?B.selectionBackgroundOpaque:B.selectionInactiveBackgroundOpaque,wt=si.rgba>>8&16777215,I=50331648,Gi=!0,B.selectionForeground&&(mi=50331648,mt=B.selectionForeground.rgba>>8&16777215,yr=B.selectionForeground)),Gi&&_e.push("xterm-decoration-top"),I){case 16777216:case 33554432:ri=B.ansi[wt],_e.push(`xterm-bg-${wt}`);break;case 50331648:ri=g.rgba.toColor(wt>>16,wt>>8&255,255&wt),this._addStyle(R,`background-color:#${S((wt>>>0).toString(16),"0",6)}`);break;default:br?(ri=B.foreground,_e.push(`xterm-bg-${u.INVERTED_DEFAULT_COLOR}`)):ri=B.background}switch(si||Ce.isDim()&&(si=g.color.multiplyOpacity(ri,.5)),mi){case 16777216:case 33554432:Ce.isBold()&&mt<8&&this._optionsService.rawOptions.drawBoldTextInBrightColors&&(mt+=8),this._applyMinimumContrast(R,ri,B.ansi[mt],Ce,si,void 0)||_e.push(`xterm-fg-${mt}`);break;case 50331648:const Ve=g.rgba.toColor(mt>>16&255,mt>>8&255,255&mt);this._applyMinimumContrast(R,ri,Ve,Ce,si,yr)||this._addStyle(R,`color:#${S(mt.toString(16),"0",6)}`);break;default:this._applyMinimumContrast(R,ri,B.foreground,Ce,si,void 0)||br&&_e.push(`xterm-fg-${u.INVERTED_DEFAULT_COLOR}`)}_e.length&&(R.className=_e.join(" "),_e.length=0),qi||Ke||Ki?R.textContent=se:N++,q!==this.defaultSpacing&&(R.style.letterSpacing=`${q}px`),Z.push(R),we=vt}return R&&N&&(R.textContent=se),Z}_applyMinimumContrast(L,k,C,w,E,A){if(this._optionsService.rawOptions.minimumContrastRatio===1||(0,_.excludeFromContrastRatioDemands)(w.getCode()))return!1;const O=this._getContrastCache(w);let T;if(E||A||(T=O.getColor(k.rgba,C.rgba)),T===void 0){const P=this._optionsService.rawOptions.minimumContrastRatio/(w.isDim()?2:1);T=g.color.ensureContrastRatio(E||k,A||C,P),O.setColor((E||k).rgba,(A||C).rgba,T??null)}return!!T&&(this._addStyle(L,`color:${T.css}`),!0)}_getContrastCache(L){return L.isDim()?this._themeService.colors.halfContrastCache:this._themeService.colors.contrastCache}_addStyle(L,k){L.setAttribute("style",`${L.getAttribute("style")||""}${k};`)}_isCellInSelection(L,k){const C=this._selectionStart,w=this._selectionEnd;return!(!C||!w)&&(this._columnSelectMode?C[0]<=w[0]?L>=C[0]&&k>=C[1]&&L<w[0]&&k<=w[1]:L<C[0]&&k>=C[1]&&L>=w[0]&&k<=w[1]:k>C[1]&&k<w[1]||C[1]===w[1]&&k===C[1]&&L>=C[0]&&L<w[0]||C[1]<w[1]&&k===w[1]&&L<w[0]||C[1]<w[1]&&k===C[1]&&L>=C[0])}};function S(L,k,C){for(;L.length<C;)L=k+L;return L}o.DomRendererRowFactory=b=c([f(1,h.ICharacterJoinerService),f(2,y.IOptionsService),f(3,h.ICoreBrowserService),f(4,y.ICoreService),f(5,y.IDecorationService),f(6,h.IThemeService)],b)},2550:(l,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.WidthCache=void 0,o.WidthCache=class{constructor(a){this._flat=new Float32Array(256),this._font="",this._fontSize=0,this._weight="normal",this._weightBold="bold",this._measureElements=[],this._container=a.createElement("div"),this._container.style.position="absolute",this._container.style.top="-50000px",this._container.style.width="50000px",this._container.style.whiteSpace="pre",this._container.style.fontKerning="none";const c=a.createElement("span"),f=a.createElement("span");f.style.fontWeight="bold";const u=a.createElement("span");u.style.fontStyle="italic";const m=a.createElement("span");m.style.fontWeight="bold",m.style.fontStyle="italic",this._measureElements=[c,f,u,m],this._container.appendChild(c),this._container.appendChild(f),this._container.appendChild(u),this._container.appendChild(m),a.body.appendChild(this._container),this.clear()}dispose(){this._container.remove(),this._measureElements.length=0,this._holey=void 0}clear(){this._flat.fill(-9999),this._holey=new Map}setFont(a,c,f,u){a===this._font&&c===this._fontSize&&f===this._weight&&u===this._weightBold||(this._font=a,this._fontSize=c,this._weight=f,this._weightBold=u,this._container.style.fontFamily=this._font,this._container.style.fontSize=`${this._fontSize}px`,this._measureElements[0].style.fontWeight=`${f}`,this._measureElements[1].style.fontWeight=`${u}`,this._measureElements[2].style.fontWeight=`${f}`,this._measureElements[3].style.fontWeight=`${u}`,this.clear())}get(a,c,f){let u=0;if(!c&&!f&&a.length===1&&(u=a.charCodeAt(0))<256)return this._flat[u]!==-9999?this._flat[u]:this._flat[u]=this._measure(a,0);let m=a;c&&(m+="B"),f&&(m+="I");let v=this._holey.get(m);if(v===void 0){let y=0;c&&(y|=1),f&&(y|=2),v=this._measure(a,y),this._holey.set(m,v)}return v}_measure(a,c){const f=this._measureElements[c];return f.textContent=a.repeat(32),f.offsetWidth/32}}},2223:(l,o,a)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.TEXT_BASELINE=o.DIM_OPACITY=o.INVERTED_DEFAULT_COLOR=void 0;const c=a(6114);o.INVERTED_DEFAULT_COLOR=257,o.DIM_OPACITY=.5,o.TEXT_BASELINE=c.isFirefox||c.isLegacyEdge?"bottom":"ideographic"},6171:(l,o)=>{function a(c){return 57508<=c&&c<=57558}Object.defineProperty(o,"__esModule",{value:!0}),o.createRenderDimensions=o.excludeFromContrastRatioDemands=o.isRestrictedPowerlineGlyph=o.isPowerlineGlyph=o.throwIfFalsy=void 0,o.throwIfFalsy=function(c){if(!c)throw new Error("value must not be falsy");return c},o.isPowerlineGlyph=a,o.isRestrictedPowerlineGlyph=function(c){return 57520<=c&&c<=57527},o.excludeFromContrastRatioDemands=function(c){return a(c)||function(f){return 9472<=f&&f<=9631}(c)},o.createRenderDimensions=function(){return{css:{canvas:{width:0,height:0},cell:{width:0,height:0}},device:{canvas:{width:0,height:0},cell:{width:0,height:0},char:{width:0,height:0,left:0,top:0}}}}},456:(l,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.SelectionModel=void 0,o.SelectionModel=class{constructor(a){this._bufferService=a,this.isSelectAllActive=!1,this.selectionStartLength=0}clearSelection(){this.selectionStart=void 0,this.selectionEnd=void 0,this.isSelectAllActive=!1,this.selectionStartLength=0}get finalSelectionStart(){return this.isSelectAllActive?[0,0]:this.selectionEnd&&this.selectionStart&&this.areSelectionValuesReversed()?this.selectionEnd:this.selectionStart}get finalSelectionEnd(){if(this.isSelectAllActive)return[this._bufferService.cols,this._bufferService.buffer.ybase+this._bufferService.rows-1];if(this.selectionStart){if(!this.selectionEnd||this.areSelectionValuesReversed()){const a=this.selectionStart[0]+this.selectionStartLength;return a>this._bufferService.cols?a%this._bufferService.cols==0?[this._bufferService.cols,this.selectionStart[1]+Math.floor(a/this._bufferService.cols)-1]:[a%this._bufferService.cols,this.selectionStart[1]+Math.floor(a/this._bufferService.cols)]:[a,this.selectionStart[1]]}if(this.selectionStartLength&&this.selectionEnd[1]===this.selectionStart[1]){const a=this.selectionStart[0]+this.selectionStartLength;return a>this._bufferService.cols?[a%this._bufferService.cols,this.selectionStart[1]+Math.floor(a/this._bufferService.cols)]:[Math.max(a,this.selectionEnd[0]),this.selectionEnd[1]]}return this.selectionEnd}}areSelectionValuesReversed(){const a=this.selectionStart,c=this.selectionEnd;return!(!a||!c)&&(a[1]>c[1]||a[1]===c[1]&&a[0]>c[0])}handleTrim(a){return this.selectionStart&&(this.selectionStart[1]-=a),this.selectionEnd&&(this.selectionEnd[1]-=a),this.selectionEnd&&this.selectionEnd[1]<0?(this.clearSelection(),!0):(this.selectionStart&&this.selectionStart[1]<0&&(this.selectionStart[1]=0),!1)}}},428:function(l,o,a){var c=this&&this.__decorate||function(h,d,_,p){var b,S=arguments.length,L=S<3?d:p===null?p=Object.getOwnPropertyDescriptor(d,_):p;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")L=Reflect.decorate(h,d,_,p);else for(var k=h.length-1;k>=0;k--)(b=h[k])&&(L=(S<3?b(L):S>3?b(d,_,L):b(d,_))||L);return S>3&&L&&Object.defineProperty(d,_,L),L},f=this&&this.__param||function(h,d){return function(_,p){d(_,p,h)}};Object.defineProperty(o,"__esModule",{value:!0}),o.CharSizeService=void 0;const u=a(2585),m=a(8460),v=a(844);let y=o.CharSizeService=class extends v.Disposable{get hasValidSize(){return this.width>0&&this.height>0}constructor(h,d,_){super(),this._optionsService=_,this.width=0,this.height=0,this._onCharSizeChange=this.register(new m.EventEmitter),this.onCharSizeChange=this._onCharSizeChange.event,this._measureStrategy=new g(h,d,this._optionsService),this.register(this._optionsService.onMultipleOptionChange(["fontFamily","fontSize"],()=>this.measure()))}measure(){const h=this._measureStrategy.measure();h.width===this.width&&h.height===this.height||(this.width=h.width,this.height=h.height,this._onCharSizeChange.fire())}};o.CharSizeService=y=c([f(2,u.IOptionsService)],y);class g{constructor(d,_,p){this._document=d,this._parentElement=_,this._optionsService=p,this._result={width:0,height:0},this._measureElement=this._document.createElement("span"),this._measureElement.classList.add("xterm-char-measure-element"),this._measureElement.textContent="W".repeat(32),this._measureElement.setAttribute("aria-hidden","true"),this._measureElement.style.whiteSpace="pre",this._measureElement.style.fontKerning="none",this._parentElement.appendChild(this._measureElement)}measure(){this._measureElement.style.fontFamily=this._optionsService.rawOptions.fontFamily,this._measureElement.style.fontSize=`${this._optionsService.rawOptions.fontSize}px`;const d={height:Number(this._measureElement.offsetHeight),width:Number(this._measureElement.offsetWidth)};return d.width!==0&&d.height!==0&&(this._result.width=d.width/32,this._result.height=Math.ceil(d.height)),this._result}}},4269:function(l,o,a){var c=this&&this.__decorate||function(d,_,p,b){var S,L=arguments.length,k=L<3?_:b===null?b=Object.getOwnPropertyDescriptor(_,p):b;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")k=Reflect.decorate(d,_,p,b);else for(var C=d.length-1;C>=0;C--)(S=d[C])&&(k=(L<3?S(k):L>3?S(_,p,k):S(_,p))||k);return L>3&&k&&Object.defineProperty(_,p,k),k},f=this&&this.__param||function(d,_){return function(p,b){_(p,b,d)}};Object.defineProperty(o,"__esModule",{value:!0}),o.CharacterJoinerService=o.JoinedCellData=void 0;const u=a(3734),m=a(643),v=a(511),y=a(2585);class g extends u.AttributeData{constructor(_,p,b){super(),this.content=0,this.combinedData="",this.fg=_.fg,this.bg=_.bg,this.combinedData=p,this._width=b}isCombined(){return 2097152}getWidth(){return this._width}getChars(){return this.combinedData}getCode(){return 2097151}setFromCharData(_){throw new Error("not implemented")}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}}o.JoinedCellData=g;let h=o.CharacterJoinerService=class kc{constructor(_){this._bufferService=_,this._characterJoiners=[],this._nextCharacterJoinerId=0,this._workCell=new v.CellData}register(_){const p={id:this._nextCharacterJoinerId++,handler:_};return this._characterJoiners.push(p),p.id}deregister(_){for(let p=0;p<this._characterJoiners.length;p++)if(this._characterJoiners[p].id===_)return this._characterJoiners.splice(p,1),!0;return!1}getJoinedCharacters(_){if(this._characterJoiners.length===0)return[];const p=this._bufferService.buffer.lines.get(_);if(!p||p.length===0)return[];const b=[],S=p.translateToString(!0);let L=0,k=0,C=0,w=p.getFg(0),E=p.getBg(0);for(let A=0;A<p.getTrimmedLength();A++)if(p.loadCell(A,this._workCell),this._workCell.getWidth()!==0){if(this._workCell.fg!==w||this._workCell.bg!==E){if(A-L>1){const O=this._getJoinedRanges(S,C,k,p,L);for(let T=0;T<O.length;T++)b.push(O[T])}L=A,C=k,w=this._workCell.fg,E=this._workCell.bg}k+=this._workCell.getChars().length||m.WHITESPACE_CELL_CHAR.length}if(this._bufferService.cols-L>1){const A=this._getJoinedRanges(S,C,k,p,L);for(let O=0;O<A.length;O++)b.push(A[O])}return b}_getJoinedRanges(_,p,b,S,L){const k=_.substring(p,b);let C=[];try{C=this._characterJoiners[0].handler(k)}catch(w){console.error(w)}for(let w=1;w<this._characterJoiners.length;w++)try{const E=this._characterJoiners[w].handler(k);for(let A=0;A<E.length;A++)kc._mergeRanges(C,E[A])}catch(E){console.error(E)}return this._stringRangesToCellRanges(C,S,L),C}_stringRangesToCellRanges(_,p,b){let S=0,L=!1,k=0,C=_[S];if(C){for(let w=b;w<this._bufferService.cols;w++){const E=p.getWidth(w),A=p.getString(w).length||m.WHITESPACE_CELL_CHAR.length;if(E!==0){if(!L&&C[0]<=k&&(C[0]=w,L=!0),C[1]<=k){if(C[1]=w,C=_[++S],!C)break;C[0]<=k?(C[0]=w,L=!0):L=!1}k+=A}}C&&(C[1]=this._bufferService.cols)}}static _mergeRanges(_,p){let b=!1;for(let S=0;S<_.length;S++){const L=_[S];if(b){if(p[1]<=L[0])return _[S-1][1]=p[1],_;if(p[1]<=L[1])return _[S-1][1]=Math.max(p[1],L[1]),_.splice(S,1),_;_.splice(S,1),S--}else{if(p[1]<=L[0])return _.splice(S,0,p),_;if(p[1]<=L[1])return L[0]=Math.min(p[0],L[0]),_;p[0]<L[1]&&(L[0]=Math.min(p[0],L[0]),b=!0)}}return b?_[_.length-1][1]=p[1]:_.push(p),_}};o.CharacterJoinerService=h=c([f(0,y.IBufferService)],h)},5114:(l,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.CoreBrowserService=void 0,o.CoreBrowserService=class{constructor(a,c){this._textarea=a,this.window=c,this._isFocused=!1,this._cachedIsFocused=void 0,this._textarea.addEventListener("focus",()=>this._isFocused=!0),this._textarea.addEventListener("blur",()=>this._isFocused=!1)}get dpr(){return this.window.devicePixelRatio}get isFocused(){return this._cachedIsFocused===void 0&&(this._cachedIsFocused=this._isFocused&&this._textarea.ownerDocument.hasFocus(),queueMicrotask(()=>this._cachedIsFocused=void 0)),this._cachedIsFocused}}},8934:function(l,o,a){var c=this&&this.__decorate||function(y,g,h,d){var _,p=arguments.length,b=p<3?g:d===null?d=Object.getOwnPropertyDescriptor(g,h):d;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")b=Reflect.decorate(y,g,h,d);else for(var S=y.length-1;S>=0;S--)(_=y[S])&&(b=(p<3?_(b):p>3?_(g,h,b):_(g,h))||b);return p>3&&b&&Object.defineProperty(g,h,b),b},f=this&&this.__param||function(y,g){return function(h,d){g(h,d,y)}};Object.defineProperty(o,"__esModule",{value:!0}),o.MouseService=void 0;const u=a(4725),m=a(9806);let v=o.MouseService=class{constructor(y,g){this._renderService=y,this._charSizeService=g}getCoords(y,g,h,d,_){return(0,m.getCoords)(window,y,g,h,d,this._charSizeService.hasValidSize,this._renderService.dimensions.css.cell.width,this._renderService.dimensions.css.cell.height,_)}getMouseReportCoords(y,g){const h=(0,m.getCoordsRelativeToElement)(window,y,g);if(this._charSizeService.hasValidSize)return h[0]=Math.min(Math.max(h[0],0),this._renderService.dimensions.css.canvas.width-1),h[1]=Math.min(Math.max(h[1],0),this._renderService.dimensions.css.canvas.height-1),{col:Math.floor(h[0]/this._renderService.dimensions.css.cell.width),row:Math.floor(h[1]/this._renderService.dimensions.css.cell.height),x:Math.floor(h[0]),y:Math.floor(h[1])}}};o.MouseService=v=c([f(0,u.IRenderService),f(1,u.ICharSizeService)],v)},3230:function(l,o,a){var c=this&&this.__decorate||function(b,S,L,k){var C,w=arguments.length,E=w<3?S:k===null?k=Object.getOwnPropertyDescriptor(S,L):k;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")E=Reflect.decorate(b,S,L,k);else for(var A=b.length-1;A>=0;A--)(C=b[A])&&(E=(w<3?C(E):w>3?C(S,L,E):C(S,L))||E);return w>3&&E&&Object.defineProperty(S,L,E),E},f=this&&this.__param||function(b,S){return function(L,k){S(L,k,b)}};Object.defineProperty(o,"__esModule",{value:!0}),o.RenderService=void 0;const u=a(3656),m=a(6193),v=a(5596),y=a(4725),g=a(8460),h=a(844),d=a(7226),_=a(2585);let p=o.RenderService=class extends h.Disposable{get dimensions(){return this._renderer.value.dimensions}constructor(b,S,L,k,C,w,E,A){if(super(),this._rowCount=b,this._charSizeService=k,this._renderer=this.register(new h.MutableDisposable),this._pausedResizeTask=new d.DebouncedIdleTask,this._isPaused=!1,this._needsFullRefresh=!1,this._isNextRenderRedrawOnly=!0,this._needsSelectionRefresh=!1,this._canvasWidth=0,this._canvasHeight=0,this._selectionState={start:void 0,end:void 0,columnSelectMode:!1},this._onDimensionsChange=this.register(new g.EventEmitter),this.onDimensionsChange=this._onDimensionsChange.event,this._onRenderedViewportChange=this.register(new g.EventEmitter),this.onRenderedViewportChange=this._onRenderedViewportChange.event,this._onRender=this.register(new g.EventEmitter),this.onRender=this._onRender.event,this._onRefreshRequest=this.register(new g.EventEmitter),this.onRefreshRequest=this._onRefreshRequest.event,this._renderDebouncer=new m.RenderDebouncer(E.window,(O,T)=>this._renderRows(O,T)),this.register(this._renderDebouncer),this._screenDprMonitor=new v.ScreenDprMonitor(E.window),this._screenDprMonitor.setListener(()=>this.handleDevicePixelRatioChange()),this.register(this._screenDprMonitor),this.register(w.onResize(()=>this._fullRefresh())),this.register(w.buffers.onBufferActivate(()=>{var O;return(O=this._renderer.value)===null||O===void 0?void 0:O.clear()})),this.register(L.onOptionChange(()=>this._handleOptionsChanged())),this.register(this._charSizeService.onCharSizeChange(()=>this.handleCharSizeChanged())),this.register(C.onDecorationRegistered(()=>this._fullRefresh())),this.register(C.onDecorationRemoved(()=>this._fullRefresh())),this.register(L.onMultipleOptionChange(["customGlyphs","drawBoldTextInBrightColors","letterSpacing","lineHeight","fontFamily","fontSize","fontWeight","fontWeightBold","minimumContrastRatio"],()=>{this.clear(),this.handleResize(w.cols,w.rows),this._fullRefresh()})),this.register(L.onMultipleOptionChange(["cursorBlink","cursorStyle"],()=>this.refreshRows(w.buffer.y,w.buffer.y,!0))),this.register((0,u.addDisposableDomListener)(E.window,"resize",()=>this.handleDevicePixelRatioChange())),this.register(A.onChangeColors(()=>this._fullRefresh())),"IntersectionObserver"in E.window){const O=new E.window.IntersectionObserver(T=>this._handleIntersectionChange(T[T.length-1]),{threshold:0});O.observe(S),this.register({dispose:()=>O.disconnect()})}}_handleIntersectionChange(b){this._isPaused=b.isIntersecting===void 0?b.intersectionRatio===0:!b.isIntersecting,this._isPaused||this._charSizeService.hasValidSize||this._charSizeService.measure(),!this._isPaused&&this._needsFullRefresh&&(this._pausedResizeTask.flush(),this.refreshRows(0,this._rowCount-1),this._needsFullRefresh=!1)}refreshRows(b,S,L=!1){this._isPaused?this._needsFullRefresh=!0:(L||(this._isNextRenderRedrawOnly=!1),this._renderDebouncer.refresh(b,S,this._rowCount))}_renderRows(b,S){this._renderer.value&&(b=Math.min(b,this._rowCount-1),S=Math.min(S,this._rowCount-1),this._renderer.value.renderRows(b,S),this._needsSelectionRefresh&&(this._renderer.value.handleSelectionChanged(this._selectionState.start,this._selectionState.end,this._selectionState.columnSelectMode),this._needsSelectionRefresh=!1),this._isNextRenderRedrawOnly||this._onRenderedViewportChange.fire({start:b,end:S}),this._onRender.fire({start:b,end:S}),this._isNextRenderRedrawOnly=!0)}resize(b,S){this._rowCount=S,this._fireOnCanvasResize()}_handleOptionsChanged(){this._renderer.value&&(this.refreshRows(0,this._rowCount-1),this._fireOnCanvasResize())}_fireOnCanvasResize(){this._renderer.value&&(this._renderer.value.dimensions.css.canvas.width===this._canvasWidth&&this._renderer.value.dimensions.css.canvas.height===this._canvasHeight||this._onDimensionsChange.fire(this._renderer.value.dimensions))}hasRenderer(){return!!this._renderer.value}setRenderer(b){this._renderer.value=b,this._renderer.value.onRequestRedraw(S=>this.refreshRows(S.start,S.end,!0)),this._needsSelectionRefresh=!0,this._fullRefresh()}addRefreshCallback(b){return this._renderDebouncer.addRefreshCallback(b)}_fullRefresh(){this._isPaused?this._needsFullRefresh=!0:this.refreshRows(0,this._rowCount-1)}clearTextureAtlas(){var b,S;this._renderer.value&&((S=(b=this._renderer.value).clearTextureAtlas)===null||S===void 0||S.call(b),this._fullRefresh())}handleDevicePixelRatioChange(){this._charSizeService.measure(),this._renderer.value&&(this._renderer.value.handleDevicePixelRatioChange(),this.refreshRows(0,this._rowCount-1))}handleResize(b,S){this._renderer.value&&(this._isPaused?this._pausedResizeTask.set(()=>this._renderer.value.handleResize(b,S)):this._renderer.value.handleResize(b,S),this._fullRefresh())}handleCharSizeChanged(){var b;(b=this._renderer.value)===null||b===void 0||b.handleCharSizeChanged()}handleBlur(){var b;(b=this._renderer.value)===null||b===void 0||b.handleBlur()}handleFocus(){var b;(b=this._renderer.value)===null||b===void 0||b.handleFocus()}handleSelectionChanged(b,S,L){var k;this._selectionState.start=b,this._selectionState.end=S,this._selectionState.columnSelectMode=L,(k=this._renderer.value)===null||k===void 0||k.handleSelectionChanged(b,S,L)}handleCursorMove(){var b;(b=this._renderer.value)===null||b===void 0||b.handleCursorMove()}clear(){var b;(b=this._renderer.value)===null||b===void 0||b.clear()}};o.RenderService=p=c([f(2,_.IOptionsService),f(3,y.ICharSizeService),f(4,_.IDecorationService),f(5,_.IBufferService),f(6,y.ICoreBrowserService),f(7,y.IThemeService)],p)},9312:function(l,o,a){var c=this&&this.__decorate||function(C,w,E,A){var O,T=arguments.length,P=T<3?w:A===null?A=Object.getOwnPropertyDescriptor(w,E):A;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")P=Reflect.decorate(C,w,E,A);else for(var F=C.length-1;F>=0;F--)(O=C[F])&&(P=(T<3?O(P):T>3?O(w,E,P):O(w,E))||P);return T>3&&P&&Object.defineProperty(w,E,P),P},f=this&&this.__param||function(C,w){return function(E,A){w(E,A,C)}};Object.defineProperty(o,"__esModule",{value:!0}),o.SelectionService=void 0;const u=a(9806),m=a(9504),v=a(456),y=a(4725),g=a(8460),h=a(844),d=a(6114),_=a(4841),p=a(511),b=a(2585),S=String.fromCharCode(160),L=new RegExp(S,"g");let k=o.SelectionService=class extends h.Disposable{constructor(C,w,E,A,O,T,P,F,z){super(),this._element=C,this._screenElement=w,this._linkifier=E,this._bufferService=A,this._coreService=O,this._mouseService=T,this._optionsService=P,this._renderService=F,this._coreBrowserService=z,this._dragScrollAmount=0,this._enabled=!0,this._workCell=new p.CellData,this._mouseDownTimeStamp=0,this._oldHasSelection=!1,this._oldSelectionStart=void 0,this._oldSelectionEnd=void 0,this._onLinuxMouseSelection=this.register(new g.EventEmitter),this.onLinuxMouseSelection=this._onLinuxMouseSelection.event,this._onRedrawRequest=this.register(new g.EventEmitter),this.onRequestRedraw=this._onRedrawRequest.event,this._onSelectionChange=this.register(new g.EventEmitter),this.onSelectionChange=this._onSelectionChange.event,this._onRequestScrollLines=this.register(new g.EventEmitter),this.onRequestScrollLines=this._onRequestScrollLines.event,this._mouseMoveListener=Z=>this._handleMouseMove(Z),this._mouseUpListener=Z=>this._handleMouseUp(Z),this._coreService.onUserInput(()=>{this.hasSelection&&this.clearSelection()}),this._trimListener=this._bufferService.buffer.lines.onTrim(Z=>this._handleTrim(Z)),this.register(this._bufferService.buffers.onBufferActivate(Z=>this._handleBufferActivate(Z))),this.enable(),this._model=new v.SelectionModel(this._bufferService),this._activeSelectionMode=0,this.register((0,h.toDisposable)(()=>{this._removeMouseDownListeners()}))}reset(){this.clearSelection()}disable(){this.clearSelection(),this._enabled=!1}enable(){this._enabled=!0}get selectionStart(){return this._model.finalSelectionStart}get selectionEnd(){return this._model.finalSelectionEnd}get hasSelection(){const C=this._model.finalSelectionStart,w=this._model.finalSelectionEnd;return!(!C||!w||C[0]===w[0]&&C[1]===w[1])}get selectionText(){const C=this._model.finalSelectionStart,w=this._model.finalSelectionEnd;if(!C||!w)return"";const E=this._bufferService.buffer,A=[];if(this._activeSelectionMode===3){if(C[0]===w[0])return"";const O=C[0]<w[0]?C[0]:w[0],T=C[0]<w[0]?w[0]:C[0];for(let P=C[1];P<=w[1];P++){const F=E.translateBufferLineToString(P,!0,O,T);A.push(F)}}else{const O=C[1]===w[1]?w[0]:void 0;A.push(E.translateBufferLineToString(C[1],!0,C[0],O));for(let T=C[1]+1;T<=w[1]-1;T++){const P=E.lines.get(T),F=E.translateBufferLineToString(T,!0);P!=null&&P.isWrapped?A[A.length-1]+=F:A.push(F)}if(C[1]!==w[1]){const T=E.lines.get(w[1]),P=E.translateBufferLineToString(w[1],!0,0,w[0]);T&&T.isWrapped?A[A.length-1]+=P:A.push(P)}}return A.map(O=>O.replace(L," ")).join(d.isWindows?`\r
`:`
`)}clearSelection(){this._model.clearSelection(),this._removeMouseDownListeners(),this.refresh(),this._onSelectionChange.fire()}refresh(C){this._refreshAnimationFrame||(this._refreshAnimationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>this._refresh())),d.isLinux&&C&&this.selectionText.length&&this._onLinuxMouseSelection.fire(this.selectionText)}_refresh(){this._refreshAnimationFrame=void 0,this._onRedrawRequest.fire({start:this._model.finalSelectionStart,end:this._model.finalSelectionEnd,columnSelectMode:this._activeSelectionMode===3})}_isClickInSelection(C){const w=this._getMouseBufferCoords(C),E=this._model.finalSelectionStart,A=this._model.finalSelectionEnd;return!!(E&&A&&w)&&this._areCoordsInSelection(w,E,A)}isCellInSelection(C,w){const E=this._model.finalSelectionStart,A=this._model.finalSelectionEnd;return!(!E||!A)&&this._areCoordsInSelection([C,w],E,A)}_areCoordsInSelection(C,w,E){return C[1]>w[1]&&C[1]<E[1]||w[1]===E[1]&&C[1]===w[1]&&C[0]>=w[0]&&C[0]<E[0]||w[1]<E[1]&&C[1]===E[1]&&C[0]<E[0]||w[1]<E[1]&&C[1]===w[1]&&C[0]>=w[0]}_selectWordAtCursor(C,w){var E,A;const O=(A=(E=this._linkifier.currentLink)===null||E===void 0?void 0:E.link)===null||A===void 0?void 0:A.range;if(O)return this._model.selectionStart=[O.start.x-1,O.start.y-1],this._model.selectionStartLength=(0,_.getRangeLength)(O,this._bufferService.cols),this._model.selectionEnd=void 0,!0;const T=this._getMouseBufferCoords(C);return!!T&&(this._selectWordAt(T,w),this._model.selectionEnd=void 0,!0)}selectAll(){this._model.isSelectAllActive=!0,this.refresh(),this._onSelectionChange.fire()}selectLines(C,w){this._model.clearSelection(),C=Math.max(C,0),w=Math.min(w,this._bufferService.buffer.lines.length-1),this._model.selectionStart=[0,C],this._model.selectionEnd=[this._bufferService.cols,w],this.refresh(),this._onSelectionChange.fire()}_handleTrim(C){this._model.handleTrim(C)&&this.refresh()}_getMouseBufferCoords(C){const w=this._mouseService.getCoords(C,this._screenElement,this._bufferService.cols,this._bufferService.rows,!0);if(w)return w[0]--,w[1]--,w[1]+=this._bufferService.buffer.ydisp,w}_getMouseEventScrollAmount(C){let w=(0,u.getCoordsRelativeToElement)(this._coreBrowserService.window,C,this._screenElement)[1];const E=this._renderService.dimensions.css.canvas.height;return w>=0&&w<=E?0:(w>E&&(w-=E),w=Math.min(Math.max(w,-50),50),w/=50,w/Math.abs(w)+Math.round(14*w))}shouldForceSelection(C){return d.isMac?C.altKey&&this._optionsService.rawOptions.macOptionClickForcesSelection:C.shiftKey}handleMouseDown(C){if(this._mouseDownTimeStamp=C.timeStamp,(C.button!==2||!this.hasSelection)&&C.button===0){if(!this._enabled){if(!this.shouldForceSelection(C))return;C.stopPropagation()}C.preventDefault(),this._dragScrollAmount=0,this._enabled&&C.shiftKey?this._handleIncrementalClick(C):C.detail===1?this._handleSingleClick(C):C.detail===2?this._handleDoubleClick(C):C.detail===3&&this._handleTripleClick(C),this._addMouseDownListeners(),this.refresh(!0)}}_addMouseDownListeners(){this._screenElement.ownerDocument&&(this._screenElement.ownerDocument.addEventListener("mousemove",this._mouseMoveListener),this._screenElement.ownerDocument.addEventListener("mouseup",this._mouseUpListener)),this._dragScrollIntervalTimer=this._coreBrowserService.window.setInterval(()=>this._dragScroll(),50)}_removeMouseDownListeners(){this._screenElement.ownerDocument&&(this._screenElement.ownerDocument.removeEventListener("mousemove",this._mouseMoveListener),this._screenElement.ownerDocument.removeEventListener("mouseup",this._mouseUpListener)),this._coreBrowserService.window.clearInterval(this._dragScrollIntervalTimer),this._dragScrollIntervalTimer=void 0}_handleIncrementalClick(C){this._model.selectionStart&&(this._model.selectionEnd=this._getMouseBufferCoords(C))}_handleSingleClick(C){if(this._model.selectionStartLength=0,this._model.isSelectAllActive=!1,this._activeSelectionMode=this.shouldColumnSelect(C)?3:0,this._model.selectionStart=this._getMouseBufferCoords(C),!this._model.selectionStart)return;this._model.selectionEnd=void 0;const w=this._bufferService.buffer.lines.get(this._model.selectionStart[1]);w&&w.length!==this._model.selectionStart[0]&&w.hasWidth(this._model.selectionStart[0])===0&&this._model.selectionStart[0]++}_handleDoubleClick(C){this._selectWordAtCursor(C,!0)&&(this._activeSelectionMode=1)}_handleTripleClick(C){const w=this._getMouseBufferCoords(C);w&&(this._activeSelectionMode=2,this._selectLineAt(w[1]))}shouldColumnSelect(C){return C.altKey&&!(d.isMac&&this._optionsService.rawOptions.macOptionClickForcesSelection)}_handleMouseMove(C){if(C.stopImmediatePropagation(),!this._model.selectionStart)return;const w=this._model.selectionEnd?[this._model.selectionEnd[0],this._model.selectionEnd[1]]:null;if(this._model.selectionEnd=this._getMouseBufferCoords(C),!this._model.selectionEnd)return void this.refresh(!0);this._activeSelectionMode===2?this._model.selectionEnd[1]<this._model.selectionStart[1]?this._model.selectionEnd[0]=0:this._model.selectionEnd[0]=this._bufferService.cols:this._activeSelectionMode===1&&this._selectToWordAt(this._model.selectionEnd),this._dragScrollAmount=this._getMouseEventScrollAmount(C),this._activeSelectionMode!==3&&(this._dragScrollAmount>0?this._model.selectionEnd[0]=this._bufferService.cols:this._dragScrollAmount<0&&(this._model.selectionEnd[0]=0));const E=this._bufferService.buffer;if(this._model.selectionEnd[1]<E.lines.length){const A=E.lines.get(this._model.selectionEnd[1]);A&&A.hasWidth(this._model.selectionEnd[0])===0&&this._model.selectionEnd[0]++}w&&w[0]===this._model.selectionEnd[0]&&w[1]===this._model.selectionEnd[1]||this.refresh(!0)}_dragScroll(){if(this._model.selectionEnd&&this._model.selectionStart&&this._dragScrollAmount){this._onRequestScrollLines.fire({amount:this._dragScrollAmount,suppressScrollEvent:!1});const C=this._bufferService.buffer;this._dragScrollAmount>0?(this._activeSelectionMode!==3&&(this._model.selectionEnd[0]=this._bufferService.cols),this._model.selectionEnd[1]=Math.min(C.ydisp+this._bufferService.rows,C.lines.length-1)):(this._activeSelectionMode!==3&&(this._model.selectionEnd[0]=0),this._model.selectionEnd[1]=C.ydisp),this.refresh()}}_handleMouseUp(C){const w=C.timeStamp-this._mouseDownTimeStamp;if(this._removeMouseDownListeners(),this.selectionText.length<=1&&w<500&&C.altKey&&this._optionsService.rawOptions.altClickMovesCursor){if(this._bufferService.buffer.ybase===this._bufferService.buffer.ydisp){const E=this._mouseService.getCoords(C,this._element,this._bufferService.cols,this._bufferService.rows,!1);if(E&&E[0]!==void 0&&E[1]!==void 0){const A=(0,m.moveToCellSequence)(E[0]-1,E[1]-1,this._bufferService,this._coreService.decPrivateModes.applicationCursorKeys);this._coreService.triggerDataEvent(A,!0)}}}else this._fireEventIfSelectionChanged()}_fireEventIfSelectionChanged(){const C=this._model.finalSelectionStart,w=this._model.finalSelectionEnd,E=!(!C||!w||C[0]===w[0]&&C[1]===w[1]);E?C&&w&&(this._oldSelectionStart&&this._oldSelectionEnd&&C[0]===this._oldSelectionStart[0]&&C[1]===this._oldSelectionStart[1]&&w[0]===this._oldSelectionEnd[0]&&w[1]===this._oldSelectionEnd[1]||this._fireOnSelectionChange(C,w,E)):this._oldHasSelection&&this._fireOnSelectionChange(C,w,E)}_fireOnSelectionChange(C,w,E){this._oldSelectionStart=C,this._oldSelectionEnd=w,this._oldHasSelection=E,this._onSelectionChange.fire()}_handleBufferActivate(C){this.clearSelection(),this._trimListener.dispose(),this._trimListener=C.activeBuffer.lines.onTrim(w=>this._handleTrim(w))}_convertViewportColToCharacterIndex(C,w){let E=w;for(let A=0;w>=A;A++){const O=C.loadCell(A,this._workCell).getChars().length;this._workCell.getWidth()===0?E--:O>1&&w!==A&&(E+=O-1)}return E}setSelection(C,w,E){this._model.clearSelection(),this._removeMouseDownListeners(),this._model.selectionStart=[C,w],this._model.selectionStartLength=E,this.refresh(),this._fireEventIfSelectionChanged()}rightClickSelect(C){this._isClickInSelection(C)||(this._selectWordAtCursor(C,!1)&&this.refresh(!0),this._fireEventIfSelectionChanged())}_getWordAt(C,w,E=!0,A=!0){if(C[0]>=this._bufferService.cols)return;const O=this._bufferService.buffer,T=O.lines.get(C[1]);if(!T)return;const P=O.translateBufferLineToString(C[1],!1);let F=this._convertViewportColToCharacterIndex(T,C[0]),z=F;const Z=C[0]-F;let M=0,B=0,R=0,H=0;if(P.charAt(F)===" "){for(;F>0&&P.charAt(F-1)===" ";)F--;for(;z<P.length&&P.charAt(z+1)===" ";)z++}else{let he=C[0],ce=C[0];T.getWidth(he)===0&&(M++,he--),T.getWidth(ce)===2&&(B++,ce++);const be=T.getString(ce).length;for(be>1&&(H+=be-1,z+=be-1);he>0&&F>0&&!this._isCharWordSeparator(T.loadCell(he-1,this._workCell));){T.loadCell(he-1,this._workCell);const D=this._workCell.getChars().length;this._workCell.getWidth()===0?(M++,he--):D>1&&(R+=D-1,F-=D-1),F--,he--}for(;ce<T.length&&z+1<P.length&&!this._isCharWordSeparator(T.loadCell(ce+1,this._workCell));){T.loadCell(ce+1,this._workCell);const D=this._workCell.getChars().length;this._workCell.getWidth()===2?(B++,ce++):D>1&&(H+=D-1,z+=D-1),z++,ce++}}z++;let N=F+Z-M+R,se=Math.min(this._bufferService.cols,z-F+M+B-R-H);if(w||P.slice(F,z).trim()!==""){if(E&&N===0&&T.getCodePoint(0)!==32){const he=O.lines.get(C[1]-1);if(he&&T.isWrapped&&he.getCodePoint(this._bufferService.cols-1)!==32){const ce=this._getWordAt([this._bufferService.cols-1,C[1]-1],!1,!0,!1);if(ce){const be=this._bufferService.cols-ce.start;N-=be,se+=be}}}if(A&&N+se===this._bufferService.cols&&T.getCodePoint(this._bufferService.cols-1)!==32){const he=O.lines.get(C[1]+1);if(he!=null&&he.isWrapped&&he.getCodePoint(0)!==32){const ce=this._getWordAt([0,C[1]+1],!1,!1,!0);ce&&(se+=ce.length)}}return{start:N,length:se}}}_selectWordAt(C,w){const E=this._getWordAt(C,w);if(E){for(;E.start<0;)E.start+=this._bufferService.cols,C[1]--;this._model.selectionStart=[E.start,C[1]],this._model.selectionStartLength=E.length}}_selectToWordAt(C){const w=this._getWordAt(C,!0);if(w){let E=C[1];for(;w.start<0;)w.start+=this._bufferService.cols,E--;if(!this._model.areSelectionValuesReversed())for(;w.start+w.length>this._bufferService.cols;)w.length-=this._bufferService.cols,E++;this._model.selectionEnd=[this._model.areSelectionValuesReversed()?w.start:w.start+w.length,E]}}_isCharWordSeparator(C){return C.getWidth()!==0&&this._optionsService.rawOptions.wordSeparator.indexOf(C.getChars())>=0}_selectLineAt(C){const w=this._bufferService.buffer.getWrappedRangeForLine(C),E={start:{x:0,y:w.first},end:{x:this._bufferService.cols-1,y:w.last}};this._model.selectionStart=[0,w.first],this._model.selectionEnd=void 0,this._model.selectionStartLength=(0,_.getRangeLength)(E,this._bufferService.cols)}};o.SelectionService=k=c([f(3,b.IBufferService),f(4,b.ICoreService),f(5,y.IMouseService),f(6,b.IOptionsService),f(7,y.IRenderService),f(8,y.ICoreBrowserService)],k)},4725:(l,o,a)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.IThemeService=o.ICharacterJoinerService=o.ISelectionService=o.IRenderService=o.IMouseService=o.ICoreBrowserService=o.ICharSizeService=void 0;const c=a(8343);o.ICharSizeService=(0,c.createDecorator)("CharSizeService"),o.ICoreBrowserService=(0,c.createDecorator)("CoreBrowserService"),o.IMouseService=(0,c.createDecorator)("MouseService"),o.IRenderService=(0,c.createDecorator)("RenderService"),o.ISelectionService=(0,c.createDecorator)("SelectionService"),o.ICharacterJoinerService=(0,c.createDecorator)("CharacterJoinerService"),o.IThemeService=(0,c.createDecorator)("ThemeService")},6731:function(l,o,a){var c=this&&this.__decorate||function(k,C,w,E){var A,O=arguments.length,T=O<3?C:E===null?E=Object.getOwnPropertyDescriptor(C,w):E;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")T=Reflect.decorate(k,C,w,E);else for(var P=k.length-1;P>=0;P--)(A=k[P])&&(T=(O<3?A(T):O>3?A(C,w,T):A(C,w))||T);return O>3&&T&&Object.defineProperty(C,w,T),T},f=this&&this.__param||function(k,C){return function(w,E){C(w,E,k)}};Object.defineProperty(o,"__esModule",{value:!0}),o.ThemeService=o.DEFAULT_ANSI_COLORS=void 0;const u=a(7239),m=a(8055),v=a(8460),y=a(844),g=a(2585),h=m.css.toColor("#ffffff"),d=m.css.toColor("#000000"),_=m.css.toColor("#ffffff"),p=m.css.toColor("#000000"),b={css:"rgba(255, 255, 255, 0.3)",rgba:4294967117};o.DEFAULT_ANSI_COLORS=Object.freeze((()=>{const k=[m.css.toColor("#2e3436"),m.css.toColor("#cc0000"),m.css.toColor("#4e9a06"),m.css.toColor("#c4a000"),m.css.toColor("#3465a4"),m.css.toColor("#75507b"),m.css.toColor("#06989a"),m.css.toColor("#d3d7cf"),m.css.toColor("#555753"),m.css.toColor("#ef2929"),m.css.toColor("#8ae234"),m.css.toColor("#fce94f"),m.css.toColor("#729fcf"),m.css.toColor("#ad7fa8"),m.css.toColor("#34e2e2"),m.css.toColor("#eeeeec")],C=[0,95,135,175,215,255];for(let w=0;w<216;w++){const E=C[w/36%6|0],A=C[w/6%6|0],O=C[w%6];k.push({css:m.channels.toCss(E,A,O),rgba:m.channels.toRgba(E,A,O)})}for(let w=0;w<24;w++){const E=8+10*w;k.push({css:m.channels.toCss(E,E,E),rgba:m.channels.toRgba(E,E,E)})}return k})());let S=o.ThemeService=class extends y.Disposable{get colors(){return this._colors}constructor(k){super(),this._optionsService=k,this._contrastCache=new u.ColorContrastCache,this._halfContrastCache=new u.ColorContrastCache,this._onChangeColors=this.register(new v.EventEmitter),this.onChangeColors=this._onChangeColors.event,this._colors={foreground:h,background:d,cursor:_,cursorAccent:p,selectionForeground:void 0,selectionBackgroundTransparent:b,selectionBackgroundOpaque:m.color.blend(d,b),selectionInactiveBackgroundTransparent:b,selectionInactiveBackgroundOpaque:m.color.blend(d,b),ansi:o.DEFAULT_ANSI_COLORS.slice(),contrastCache:this._contrastCache,halfContrastCache:this._halfContrastCache},this._updateRestoreColors(),this._setTheme(this._optionsService.rawOptions.theme),this.register(this._optionsService.onSpecificOptionChange("minimumContrastRatio",()=>this._contrastCache.clear())),this.register(this._optionsService.onSpecificOptionChange("theme",()=>this._setTheme(this._optionsService.rawOptions.theme)))}_setTheme(k={}){const C=this._colors;if(C.foreground=L(k.foreground,h),C.background=L(k.background,d),C.cursor=L(k.cursor,_),C.cursorAccent=L(k.cursorAccent,p),C.selectionBackgroundTransparent=L(k.selectionBackground,b),C.selectionBackgroundOpaque=m.color.blend(C.background,C.selectionBackgroundTransparent),C.selectionInactiveBackgroundTransparent=L(k.selectionInactiveBackground,C.selectionBackgroundTransparent),C.selectionInactiveBackgroundOpaque=m.color.blend(C.background,C.selectionInactiveBackgroundTransparent),C.selectionForeground=k.selectionForeground?L(k.selectionForeground,m.NULL_COLOR):void 0,C.selectionForeground===m.NULL_COLOR&&(C.selectionForeground=void 0),m.color.isOpaque(C.selectionBackgroundTransparent)&&(C.selectionBackgroundTransparent=m.color.opacity(C.selectionBackgroundTransparent,.3)),m.color.isOpaque(C.selectionInactiveBackgroundTransparent)&&(C.selectionInactiveBackgroundTransparent=m.color.opacity(C.selectionInactiveBackgroundTransparent,.3)),C.ansi=o.DEFAULT_ANSI_COLORS.slice(),C.ansi[0]=L(k.black,o.DEFAULT_ANSI_COLORS[0]),C.ansi[1]=L(k.red,o.DEFAULT_ANSI_COLORS[1]),C.ansi[2]=L(k.green,o.DEFAULT_ANSI_COLORS[2]),C.ansi[3]=L(k.yellow,o.DEFAULT_ANSI_COLORS[3]),C.ansi[4]=L(k.blue,o.DEFAULT_ANSI_COLORS[4]),C.ansi[5]=L(k.magenta,o.DEFAULT_ANSI_COLORS[5]),C.ansi[6]=L(k.cyan,o.DEFAULT_ANSI_COLORS[6]),C.ansi[7]=L(k.white,o.DEFAULT_ANSI_COLORS[7]),C.ansi[8]=L(k.brightBlack,o.DEFAULT_ANSI_COLORS[8]),C.ansi[9]=L(k.brightRed,o.DEFAULT_ANSI_COLORS[9]),C.ansi[10]=L(k.brightGreen,o.DEFAULT_ANSI_COLORS[10]),C.ansi[11]=L(k.brightYellow,o.DEFAULT_ANSI_COLORS[11]),C.ansi[12]=L(k.brightBlue,o.DEFAULT_ANSI_COLORS[12]),C.ansi[13]=L(k.brightMagenta,o.DEFAULT_ANSI_COLORS[13]),C.ansi[14]=L(k.brightCyan,o.DEFAULT_ANSI_COLORS[14]),C.ansi[15]=L(k.brightWhite,o.DEFAULT_ANSI_COLORS[15]),k.extendedAnsi){const w=Math.min(C.ansi.length-16,k.extendedAnsi.length);for(let E=0;E<w;E++)C.ansi[E+16]=L(k.extendedAnsi[E],o.DEFAULT_ANSI_COLORS[E+16])}this._contrastCache.clear(),this._halfContrastCache.clear(),this._updateRestoreColors(),this._onChangeColors.fire(this.colors)}restoreColor(k){this._restoreColor(k),this._onChangeColors.fire(this.colors)}_restoreColor(k){if(k!==void 0)switch(k){case 256:this._colors.foreground=this._restoreColors.foreground;break;case 257:this._colors.background=this._restoreColors.background;break;case 258:this._colors.cursor=this._restoreColors.cursor;break;default:this._colors.ansi[k]=this._restoreColors.ansi[k]}else for(let C=0;C<this._restoreColors.ansi.length;++C)this._colors.ansi[C]=this._restoreColors.ansi[C]}modifyColors(k){k(this._colors),this._onChangeColors.fire(this.colors)}_updateRestoreColors(){this._restoreColors={foreground:this._colors.foreground,background:this._colors.background,cursor:this._colors.cursor,ansi:this._colors.ansi.slice()}}};function L(k,C){if(k!==void 0)try{return m.css.toColor(k)}catch{}return C}o.ThemeService=S=c([f(0,g.IOptionsService)],S)},6349:(l,o,a)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.CircularList=void 0;const c=a(8460),f=a(844);class u extends f.Disposable{constructor(v){super(),this._maxLength=v,this.onDeleteEmitter=this.register(new c.EventEmitter),this.onDelete=this.onDeleteEmitter.event,this.onInsertEmitter=this.register(new c.EventEmitter),this.onInsert=this.onInsertEmitter.event,this.onTrimEmitter=this.register(new c.EventEmitter),this.onTrim=this.onTrimEmitter.event,this._array=new Array(this._maxLength),this._startIndex=0,this._length=0}get maxLength(){return this._maxLength}set maxLength(v){if(this._maxLength===v)return;const y=new Array(v);for(let g=0;g<Math.min(v,this.length);g++)y[g]=this._array[this._getCyclicIndex(g)];this._array=y,this._maxLength=v,this._startIndex=0}get length(){return this._length}set length(v){if(v>this._length)for(let y=this._length;y<v;y++)this._array[y]=void 0;this._length=v}get(v){return this._array[this._getCyclicIndex(v)]}set(v,y){this._array[this._getCyclicIndex(v)]=y}push(v){this._array[this._getCyclicIndex(this._length)]=v,this._length===this._maxLength?(this._startIndex=++this._startIndex%this._maxLength,this.onTrimEmitter.fire(1)):this._length++}recycle(){if(this._length!==this._maxLength)throw new Error("Can only recycle when the buffer is full");return this._startIndex=++this._startIndex%this._maxLength,this.onTrimEmitter.fire(1),this._array[this._getCyclicIndex(this._length-1)]}get isFull(){return this._length===this._maxLength}pop(){return this._array[this._getCyclicIndex(this._length---1)]}splice(v,y,...g){if(y){for(let h=v;h<this._length-y;h++)this._array[this._getCyclicIndex(h)]=this._array[this._getCyclicIndex(h+y)];this._length-=y,this.onDeleteEmitter.fire({index:v,amount:y})}for(let h=this._length-1;h>=v;h--)this._array[this._getCyclicIndex(h+g.length)]=this._array[this._getCyclicIndex(h)];for(let h=0;h<g.length;h++)this._array[this._getCyclicIndex(v+h)]=g[h];if(g.length&&this.onInsertEmitter.fire({index:v,amount:g.length}),this._length+g.length>this._maxLength){const h=this._length+g.length-this._maxLength;this._startIndex+=h,this._length=this._maxLength,this.onTrimEmitter.fire(h)}else this._length+=g.length}trimStart(v){v>this._length&&(v=this._length),this._startIndex+=v,this._length-=v,this.onTrimEmitter.fire(v)}shiftElements(v,y,g){if(!(y<=0)){if(v<0||v>=this._length)throw new Error("start argument out of range");if(v+g<0)throw new Error("Cannot shift elements in list beyond index 0");if(g>0){for(let d=y-1;d>=0;d--)this.set(v+d+g,this.get(v+d));const h=v+y+g-this._length;if(h>0)for(this._length+=h;this._length>this._maxLength;)this._length--,this._startIndex++,this.onTrimEmitter.fire(1)}else for(let h=0;h<y;h++)this.set(v+h+g,this.get(v+h))}}_getCyclicIndex(v){return(this._startIndex+v)%this._maxLength}}o.CircularList=u},1439:(l,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.clone=void 0,o.clone=function a(c,f=5){if(typeof c!="object")return c;const u=Array.isArray(c)?[]:{};for(const m in c)u[m]=f<=1?c[m]:c[m]&&a(c[m],f-1);return u}},8055:(l,o,a)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.contrastRatio=o.toPaddedHex=o.rgba=o.rgb=o.css=o.color=o.channels=o.NULL_COLOR=void 0;const c=a(6114);let f=0,u=0,m=0,v=0;var y,g,h,d,_;function p(S){const L=S.toString(16);return L.length<2?"0"+L:L}function b(S,L){return S<L?(L+.05)/(S+.05):(S+.05)/(L+.05)}o.NULL_COLOR={css:"#00000000",rgba:0},function(S){S.toCss=function(L,k,C,w){return w!==void 0?`#${p(L)}${p(k)}${p(C)}${p(w)}`:`#${p(L)}${p(k)}${p(C)}`},S.toRgba=function(L,k,C,w=255){return(L<<24|k<<16|C<<8|w)>>>0}}(y||(o.channels=y={})),function(S){function L(k,C){return v=Math.round(255*C),[f,u,m]=_.toChannels(k.rgba),{css:y.toCss(f,u,m,v),rgba:y.toRgba(f,u,m,v)}}S.blend=function(k,C){if(v=(255&C.rgba)/255,v===1)return{css:C.css,rgba:C.rgba};const w=C.rgba>>24&255,E=C.rgba>>16&255,A=C.rgba>>8&255,O=k.rgba>>24&255,T=k.rgba>>16&255,P=k.rgba>>8&255;return f=O+Math.round((w-O)*v),u=T+Math.round((E-T)*v),m=P+Math.round((A-P)*v),{css:y.toCss(f,u,m),rgba:y.toRgba(f,u,m)}},S.isOpaque=function(k){return(255&k.rgba)==255},S.ensureContrastRatio=function(k,C,w){const E=_.ensureContrastRatio(k.rgba,C.rgba,w);if(E)return _.toColor(E>>24&255,E>>16&255,E>>8&255)},S.opaque=function(k){const C=(255|k.rgba)>>>0;return[f,u,m]=_.toChannels(C),{css:y.toCss(f,u,m),rgba:C}},S.opacity=L,S.multiplyOpacity=function(k,C){return v=255&k.rgba,L(k,v*C/255)},S.toColorRGB=function(k){return[k.rgba>>24&255,k.rgba>>16&255,k.rgba>>8&255]}}(g||(o.color=g={})),function(S){let L,k;if(!c.isNode){const C=document.createElement("canvas");C.width=1,C.height=1;const w=C.getContext("2d",{willReadFrequently:!0});w&&(L=w,L.globalCompositeOperation="copy",k=L.createLinearGradient(0,0,1,1))}S.toColor=function(C){if(C.match(/#[\da-f]{3,8}/i))switch(C.length){case 4:return f=parseInt(C.slice(1,2).repeat(2),16),u=parseInt(C.slice(2,3).repeat(2),16),m=parseInt(C.slice(3,4).repeat(2),16),_.toColor(f,u,m);case 5:return f=parseInt(C.slice(1,2).repeat(2),16),u=parseInt(C.slice(2,3).repeat(2),16),m=parseInt(C.slice(3,4).repeat(2),16),v=parseInt(C.slice(4,5).repeat(2),16),_.toColor(f,u,m,v);case 7:return{css:C,rgba:(parseInt(C.slice(1),16)<<8|255)>>>0};case 9:return{css:C,rgba:parseInt(C.slice(1),16)>>>0}}const w=C.match(/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(,\s*(0|1|\d?\.(\d+))\s*)?\)/);if(w)return f=parseInt(w[1]),u=parseInt(w[2]),m=parseInt(w[3]),v=Math.round(255*(w[5]===void 0?1:parseFloat(w[5]))),_.toColor(f,u,m,v);if(!L||!k)throw new Error("css.toColor: Unsupported css format");if(L.fillStyle=k,L.fillStyle=C,typeof L.fillStyle!="string")throw new Error("css.toColor: Unsupported css format");if(L.fillRect(0,0,1,1),[f,u,m,v]=L.getImageData(0,0,1,1).data,v!==255)throw new Error("css.toColor: Unsupported css format");return{rgba:y.toRgba(f,u,m,v),css:C}}}(h||(o.css=h={})),function(S){function L(k,C,w){const E=k/255,A=C/255,O=w/255;return .2126*(E<=.03928?E/12.92:Math.pow((E+.055)/1.055,2.4))+.7152*(A<=.03928?A/12.92:Math.pow((A+.055)/1.055,2.4))+.0722*(O<=.03928?O/12.92:Math.pow((O+.055)/1.055,2.4))}S.relativeLuminance=function(k){return L(k>>16&255,k>>8&255,255&k)},S.relativeLuminance2=L}(d||(o.rgb=d={})),function(S){function L(C,w,E){const A=C>>24&255,O=C>>16&255,T=C>>8&255;let P=w>>24&255,F=w>>16&255,z=w>>8&255,Z=b(d.relativeLuminance2(P,F,z),d.relativeLuminance2(A,O,T));for(;Z<E&&(P>0||F>0||z>0);)P-=Math.max(0,Math.ceil(.1*P)),F-=Math.max(0,Math.ceil(.1*F)),z-=Math.max(0,Math.ceil(.1*z)),Z=b(d.relativeLuminance2(P,F,z),d.relativeLuminance2(A,O,T));return(P<<24|F<<16|z<<8|255)>>>0}function k(C,w,E){const A=C>>24&255,O=C>>16&255,T=C>>8&255;let P=w>>24&255,F=w>>16&255,z=w>>8&255,Z=b(d.relativeLuminance2(P,F,z),d.relativeLuminance2(A,O,T));for(;Z<E&&(P<255||F<255||z<255);)P=Math.min(255,P+Math.ceil(.1*(255-P))),F=Math.min(255,F+Math.ceil(.1*(255-F))),z=Math.min(255,z+Math.ceil(.1*(255-z))),Z=b(d.relativeLuminance2(P,F,z),d.relativeLuminance2(A,O,T));return(P<<24|F<<16|z<<8|255)>>>0}S.ensureContrastRatio=function(C,w,E){const A=d.relativeLuminance(C>>8),O=d.relativeLuminance(w>>8);if(b(A,O)<E){if(O<A){const F=L(C,w,E),z=b(A,d.relativeLuminance(F>>8));if(z<E){const Z=k(C,w,E);return z>b(A,d.relativeLuminance(Z>>8))?F:Z}return F}const T=k(C,w,E),P=b(A,d.relativeLuminance(T>>8));if(P<E){const F=L(C,w,E);return P>b(A,d.relativeLuminance(F>>8))?T:F}return T}},S.reduceLuminance=L,S.increaseLuminance=k,S.toChannels=function(C){return[C>>24&255,C>>16&255,C>>8&255,255&C]},S.toColor=function(C,w,E,A){return{css:y.toCss(C,w,E,A),rgba:y.toRgba(C,w,E,A)}}}(_||(o.rgba=_={})),o.toPaddedHex=p,o.contrastRatio=b},8969:(l,o,a)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.CoreTerminal=void 0;const c=a(844),f=a(2585),u=a(4348),m=a(7866),v=a(744),y=a(7302),g=a(6975),h=a(8460),d=a(1753),_=a(1480),p=a(7994),b=a(9282),S=a(5435),L=a(5981),k=a(2660);let C=!1;class w extends c.Disposable{get onScroll(){return this._onScrollApi||(this._onScrollApi=this.register(new h.EventEmitter),this._onScroll.event(A=>{var O;(O=this._onScrollApi)===null||O===void 0||O.fire(A.position)})),this._onScrollApi.event}get cols(){return this._bufferService.cols}get rows(){return this._bufferService.rows}get buffers(){return this._bufferService.buffers}get options(){return this.optionsService.options}set options(A){for(const O in A)this.optionsService.options[O]=A[O]}constructor(A){super(),this._windowsWrappingHeuristics=this.register(new c.MutableDisposable),this._onBinary=this.register(new h.EventEmitter),this.onBinary=this._onBinary.event,this._onData=this.register(new h.EventEmitter),this.onData=this._onData.event,this._onLineFeed=this.register(new h.EventEmitter),this.onLineFeed=this._onLineFeed.event,this._onResize=this.register(new h.EventEmitter),this.onResize=this._onResize.event,this._onWriteParsed=this.register(new h.EventEmitter),this.onWriteParsed=this._onWriteParsed.event,this._onScroll=this.register(new h.EventEmitter),this._instantiationService=new u.InstantiationService,this.optionsService=this.register(new y.OptionsService(A)),this._instantiationService.setService(f.IOptionsService,this.optionsService),this._bufferService=this.register(this._instantiationService.createInstance(v.BufferService)),this._instantiationService.setService(f.IBufferService,this._bufferService),this._logService=this.register(this._instantiationService.createInstance(m.LogService)),this._instantiationService.setService(f.ILogService,this._logService),this.coreService=this.register(this._instantiationService.createInstance(g.CoreService)),this._instantiationService.setService(f.ICoreService,this.coreService),this.coreMouseService=this.register(this._instantiationService.createInstance(d.CoreMouseService)),this._instantiationService.setService(f.ICoreMouseService,this.coreMouseService),this.unicodeService=this.register(this._instantiationService.createInstance(_.UnicodeService)),this._instantiationService.setService(f.IUnicodeService,this.unicodeService),this._charsetService=this._instantiationService.createInstance(p.CharsetService),this._instantiationService.setService(f.ICharsetService,this._charsetService),this._oscLinkService=this._instantiationService.createInstance(k.OscLinkService),this._instantiationService.setService(f.IOscLinkService,this._oscLinkService),this._inputHandler=this.register(new S.InputHandler(this._bufferService,this._charsetService,this.coreService,this._logService,this.optionsService,this._oscLinkService,this.coreMouseService,this.unicodeService)),this.register((0,h.forwardEvent)(this._inputHandler.onLineFeed,this._onLineFeed)),this.register(this._inputHandler),this.register((0,h.forwardEvent)(this._bufferService.onResize,this._onResize)),this.register((0,h.forwardEvent)(this.coreService.onData,this._onData)),this.register((0,h.forwardEvent)(this.coreService.onBinary,this._onBinary)),this.register(this.coreService.onRequestScrollToBottom(()=>this.scrollToBottom())),this.register(this.coreService.onUserInput(()=>this._writeBuffer.handleUserInput())),this.register(this.optionsService.onMultipleOptionChange(["windowsMode","windowsPty"],()=>this._handleWindowsPtyOptionChange())),this.register(this._bufferService.onScroll(O=>{this._onScroll.fire({position:this._bufferService.buffer.ydisp,source:0}),this._inputHandler.markRangeDirty(this._bufferService.buffer.scrollTop,this._bufferService.buffer.scrollBottom)})),this.register(this._inputHandler.onScroll(O=>{this._onScroll.fire({position:this._bufferService.buffer.ydisp,source:0}),this._inputHandler.markRangeDirty(this._bufferService.buffer.scrollTop,this._bufferService.buffer.scrollBottom)})),this._writeBuffer=this.register(new L.WriteBuffer((O,T)=>this._inputHandler.parse(O,T))),this.register((0,h.forwardEvent)(this._writeBuffer.onWriteParsed,this._onWriteParsed))}write(A,O){this._writeBuffer.write(A,O)}writeSync(A,O){this._logService.logLevel<=f.LogLevelEnum.WARN&&!C&&(this._logService.warn("writeSync is unreliable and will be removed soon."),C=!0),this._writeBuffer.writeSync(A,O)}resize(A,O){isNaN(A)||isNaN(O)||(A=Math.max(A,v.MINIMUM_COLS),O=Math.max(O,v.MINIMUM_ROWS),this._bufferService.resize(A,O))}scroll(A,O=!1){this._bufferService.scroll(A,O)}scrollLines(A,O,T){this._bufferService.scrollLines(A,O,T)}scrollPages(A){this.scrollLines(A*(this.rows-1))}scrollToTop(){this.scrollLines(-this._bufferService.buffer.ydisp)}scrollToBottom(){this.scrollLines(this._bufferService.buffer.ybase-this._bufferService.buffer.ydisp)}scrollToLine(A){const O=A-this._bufferService.buffer.ydisp;O!==0&&this.scrollLines(O)}registerEscHandler(A,O){return this._inputHandler.registerEscHandler(A,O)}registerDcsHandler(A,O){return this._inputHandler.registerDcsHandler(A,O)}registerCsiHandler(A,O){return this._inputHandler.registerCsiHandler(A,O)}registerOscHandler(A,O){return this._inputHandler.registerOscHandler(A,O)}_setup(){this._handleWindowsPtyOptionChange()}reset(){this._inputHandler.reset(),this._bufferService.reset(),this._charsetService.reset(),this.coreService.reset(),this.coreMouseService.reset()}_handleWindowsPtyOptionChange(){let A=!1;const O=this.optionsService.rawOptions.windowsPty;O&&O.buildNumber!==void 0&&O.buildNumber!==void 0?A=O.backend==="conpty"&&O.buildNumber<21376:this.optionsService.rawOptions.windowsMode&&(A=!0),A?this._enableWindowsWrappingHeuristics():this._windowsWrappingHeuristics.clear()}_enableWindowsWrappingHeuristics(){if(!this._windowsWrappingHeuristics.value){const A=[];A.push(this.onLineFeed(b.updateWindowsModeWrappedState.bind(null,this._bufferService))),A.push(this.registerCsiHandler({final:"H"},()=>((0,b.updateWindowsModeWrappedState)(this._bufferService),!1))),this._windowsWrappingHeuristics.value=(0,c.toDisposable)(()=>{for(const O of A)O.dispose()})}}}o.CoreTerminal=w},8460:(l,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.forwardEvent=o.EventEmitter=void 0,o.EventEmitter=class{constructor(){this._listeners=[],this._disposed=!1}get event(){return this._event||(this._event=a=>(this._listeners.push(a),{dispose:()=>{if(!this._disposed){for(let c=0;c<this._listeners.length;c++)if(this._listeners[c]===a)return void this._listeners.splice(c,1)}}})),this._event}fire(a,c){const f=[];for(let u=0;u<this._listeners.length;u++)f.push(this._listeners[u]);for(let u=0;u<f.length;u++)f[u].call(void 0,a,c)}dispose(){this.clearListeners(),this._disposed=!0}clearListeners(){this._listeners&&(this._listeners.length=0)}},o.forwardEvent=function(a,c){return a(f=>c.fire(f))}},5435:function(l,o,a){var c=this&&this.__decorate||function(Z,M,B,R){var H,N=arguments.length,se=N<3?M:R===null?R=Object.getOwnPropertyDescriptor(M,B):R;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")se=Reflect.decorate(Z,M,B,R);else for(var he=Z.length-1;he>=0;he--)(H=Z[he])&&(se=(N<3?H(se):N>3?H(M,B,se):H(M,B))||se);return N>3&&se&&Object.defineProperty(M,B,se),se},f=this&&this.__param||function(Z,M){return function(B,R){M(B,R,Z)}};Object.defineProperty(o,"__esModule",{value:!0}),o.InputHandler=o.WindowsOptionsReportType=void 0;const u=a(2584),m=a(7116),v=a(2015),y=a(844),g=a(482),h=a(8437),d=a(8460),_=a(643),p=a(511),b=a(3734),S=a(2585),L=a(6242),k=a(6351),C=a(5941),w={"(":0,")":1,"*":2,"+":3,"-":1,".":2},E=131072;function A(Z,M){if(Z>24)return M.setWinLines||!1;switch(Z){case 1:return!!M.restoreWin;case 2:return!!M.minimizeWin;case 3:return!!M.setWinPosition;case 4:return!!M.setWinSizePixels;case 5:return!!M.raiseWin;case 6:return!!M.lowerWin;case 7:return!!M.refreshWin;case 8:return!!M.setWinSizeChars;case 9:return!!M.maximizeWin;case 10:return!!M.fullscreenWin;case 11:return!!M.getWinState;case 13:return!!M.getWinPosition;case 14:return!!M.getWinSizePixels;case 15:return!!M.getScreenSizePixels;case 16:return!!M.getCellSizePixels;case 18:return!!M.getWinSizeChars;case 19:return!!M.getScreenSizeChars;case 20:return!!M.getIconTitle;case 21:return!!M.getWinTitle;case 22:return!!M.pushTitle;case 23:return!!M.popTitle;case 24:return!!M.setWinLines}return!1}var O;(function(Z){Z[Z.GET_WIN_SIZE_PIXELS=0]="GET_WIN_SIZE_PIXELS",Z[Z.GET_CELL_SIZE_PIXELS=1]="GET_CELL_SIZE_PIXELS"})(O||(o.WindowsOptionsReportType=O={}));let T=0;class P extends y.Disposable{getAttrData(){return this._curAttrData}constructor(M,B,R,H,N,se,he,ce,be=new v.EscapeSequenceParser){super(),this._bufferService=M,this._charsetService=B,this._coreService=R,this._logService=H,this._optionsService=N,this._oscLinkService=se,this._coreMouseService=he,this._unicodeService=ce,this._parser=be,this._parseBuffer=new Uint32Array(4096),this._stringDecoder=new g.StringToUtf32,this._utf8Decoder=new g.Utf8ToUtf32,this._workCell=new p.CellData,this._windowTitle="",this._iconName="",this._windowTitleStack=[],this._iconNameStack=[],this._curAttrData=h.DEFAULT_ATTR_DATA.clone(),this._eraseAttrDataInternal=h.DEFAULT_ATTR_DATA.clone(),this._onRequestBell=this.register(new d.EventEmitter),this.onRequestBell=this._onRequestBell.event,this._onRequestRefreshRows=this.register(new d.EventEmitter),this.onRequestRefreshRows=this._onRequestRefreshRows.event,this._onRequestReset=this.register(new d.EventEmitter),this.onRequestReset=this._onRequestReset.event,this._onRequestSendFocus=this.register(new d.EventEmitter),this.onRequestSendFocus=this._onRequestSendFocus.event,this._onRequestSyncScrollBar=this.register(new d.EventEmitter),this.onRequestSyncScrollBar=this._onRequestSyncScrollBar.event,this._onRequestWindowsOptionsReport=this.register(new d.EventEmitter),this.onRequestWindowsOptionsReport=this._onRequestWindowsOptionsReport.event,this._onA11yChar=this.register(new d.EventEmitter),this.onA11yChar=this._onA11yChar.event,this._onA11yTab=this.register(new d.EventEmitter),this.onA11yTab=this._onA11yTab.event,this._onCursorMove=this.register(new d.EventEmitter),this.onCursorMove=this._onCursorMove.event,this._onLineFeed=this.register(new d.EventEmitter),this.onLineFeed=this._onLineFeed.event,this._onScroll=this.register(new d.EventEmitter),this.onScroll=this._onScroll.event,this._onTitleChange=this.register(new d.EventEmitter),this.onTitleChange=this._onTitleChange.event,this._onColor=this.register(new d.EventEmitter),this.onColor=this._onColor.event,this._parseStack={paused:!1,cursorStartX:0,cursorStartY:0,decodedLength:0,position:0},this._specialColors=[256,257,258],this.register(this._parser),this._dirtyRowTracker=new F(this._bufferService),this._activeBuffer=this._bufferService.buffer,this.register(this._bufferService.buffers.onBufferActivate(D=>this._activeBuffer=D.activeBuffer)),this._parser.setCsiHandlerFallback((D,V)=>{this._logService.debug("Unknown CSI code: ",{identifier:this._parser.identToString(D),params:V.toArray()})}),this._parser.setEscHandlerFallback(D=>{this._logService.debug("Unknown ESC code: ",{identifier:this._parser.identToString(D)})}),this._parser.setExecuteHandlerFallback(D=>{this._logService.debug("Unknown EXECUTE code: ",{code:D})}),this._parser.setOscHandlerFallback((D,V,K)=>{this._logService.debug("Unknown OSC code: ",{identifier:D,action:V,data:K})}),this._parser.setDcsHandlerFallback((D,V,K)=>{V==="HOOK"&&(K=K.toArray()),this._logService.debug("Unknown DCS code: ",{identifier:this._parser.identToString(D),action:V,payload:K})}),this._parser.setPrintHandler((D,V,K)=>this.print(D,V,K)),this._parser.registerCsiHandler({final:"@"},D=>this.insertChars(D)),this._parser.registerCsiHandler({intermediates:" ",final:"@"},D=>this.scrollLeft(D)),this._parser.registerCsiHandler({final:"A"},D=>this.cursorUp(D)),this._parser.registerCsiHandler({intermediates:" ",final:"A"},D=>this.scrollRight(D)),this._parser.registerCsiHandler({final:"B"},D=>this.cursorDown(D)),this._parser.registerCsiHandler({final:"C"},D=>this.cursorForward(D)),this._parser.registerCsiHandler({final:"D"},D=>this.cursorBackward(D)),this._parser.registerCsiHandler({final:"E"},D=>this.cursorNextLine(D)),this._parser.registerCsiHandler({final:"F"},D=>this.cursorPrecedingLine(D)),this._parser.registerCsiHandler({final:"G"},D=>this.cursorCharAbsolute(D)),this._parser.registerCsiHandler({final:"H"},D=>this.cursorPosition(D)),this._parser.registerCsiHandler({final:"I"},D=>this.cursorForwardTab(D)),this._parser.registerCsiHandler({final:"J"},D=>this.eraseInDisplay(D,!1)),this._parser.registerCsiHandler({prefix:"?",final:"J"},D=>this.eraseInDisplay(D,!0)),this._parser.registerCsiHandler({final:"K"},D=>this.eraseInLine(D,!1)),this._parser.registerCsiHandler({prefix:"?",final:"K"},D=>this.eraseInLine(D,!0)),this._parser.registerCsiHandler({final:"L"},D=>this.insertLines(D)),this._parser.registerCsiHandler({final:"M"},D=>this.deleteLines(D)),this._parser.registerCsiHandler({final:"P"},D=>this.deleteChars(D)),this._parser.registerCsiHandler({final:"S"},D=>this.scrollUp(D)),this._parser.registerCsiHandler({final:"T"},D=>this.scrollDown(D)),this._parser.registerCsiHandler({final:"X"},D=>this.eraseChars(D)),this._parser.registerCsiHandler({final:"Z"},D=>this.cursorBackwardTab(D)),this._parser.registerCsiHandler({final:"`"},D=>this.charPosAbsolute(D)),this._parser.registerCsiHandler({final:"a"},D=>this.hPositionRelative(D)),this._parser.registerCsiHandler({final:"b"},D=>this.repeatPrecedingCharacter(D)),this._parser.registerCsiHandler({final:"c"},D=>this.sendDeviceAttributesPrimary(D)),this._parser.registerCsiHandler({prefix:">",final:"c"},D=>this.sendDeviceAttributesSecondary(D)),this._parser.registerCsiHandler({final:"d"},D=>this.linePosAbsolute(D)),this._parser.registerCsiHandler({final:"e"},D=>this.vPositionRelative(D)),this._parser.registerCsiHandler({final:"f"},D=>this.hVPosition(D)),this._parser.registerCsiHandler({final:"g"},D=>this.tabClear(D)),this._parser.registerCsiHandler({final:"h"},D=>this.setMode(D)),this._parser.registerCsiHandler({prefix:"?",final:"h"},D=>this.setModePrivate(D)),this._parser.registerCsiHandler({final:"l"},D=>this.resetMode(D)),this._parser.registerCsiHandler({prefix:"?",final:"l"},D=>this.resetModePrivate(D)),this._parser.registerCsiHandler({final:"m"},D=>this.charAttributes(D)),this._parser.registerCsiHandler({final:"n"},D=>this.deviceStatus(D)),this._parser.registerCsiHandler({prefix:"?",final:"n"},D=>this.deviceStatusPrivate(D)),this._parser.registerCsiHandler({intermediates:"!",final:"p"},D=>this.softReset(D)),this._parser.registerCsiHandler({intermediates:" ",final:"q"},D=>this.setCursorStyle(D)),this._parser.registerCsiHandler({final:"r"},D=>this.setScrollRegion(D)),this._parser.registerCsiHandler({final:"s"},D=>this.saveCursor(D)),this._parser.registerCsiHandler({final:"t"},D=>this.windowOptions(D)),this._parser.registerCsiHandler({final:"u"},D=>this.restoreCursor(D)),this._parser.registerCsiHandler({intermediates:"'",final:"}"},D=>this.insertColumns(D)),this._parser.registerCsiHandler({intermediates:"'",final:"~"},D=>this.deleteColumns(D)),this._parser.registerCsiHandler({intermediates:'"',final:"q"},D=>this.selectProtected(D)),this._parser.registerCsiHandler({intermediates:"$",final:"p"},D=>this.requestMode(D,!0)),this._parser.registerCsiHandler({prefix:"?",intermediates:"$",final:"p"},D=>this.requestMode(D,!1)),this._parser.setExecuteHandler(u.C0.BEL,()=>this.bell()),this._parser.setExecuteHandler(u.C0.LF,()=>this.lineFeed()),this._parser.setExecuteHandler(u.C0.VT,()=>this.lineFeed()),this._parser.setExecuteHandler(u.C0.FF,()=>this.lineFeed()),this._parser.setExecuteHandler(u.C0.CR,()=>this.carriageReturn()),this._parser.setExecuteHandler(u.C0.BS,()=>this.backspace()),this._parser.setExecuteHandler(u.C0.HT,()=>this.tab()),this._parser.setExecuteHandler(u.C0.SO,()=>this.shiftOut()),this._parser.setExecuteHandler(u.C0.SI,()=>this.shiftIn()),this._parser.setExecuteHandler(u.C1.IND,()=>this.index()),this._parser.setExecuteHandler(u.C1.NEL,()=>this.nextLine()),this._parser.setExecuteHandler(u.C1.HTS,()=>this.tabSet()),this._parser.registerOscHandler(0,new L.OscHandler(D=>(this.setTitle(D),this.setIconName(D),!0))),this._parser.registerOscHandler(1,new L.OscHandler(D=>this.setIconName(D))),this._parser.registerOscHandler(2,new L.OscHandler(D=>this.setTitle(D))),this._parser.registerOscHandler(4,new L.OscHandler(D=>this.setOrReportIndexedColor(D))),this._parser.registerOscHandler(8,new L.OscHandler(D=>this.setHyperlink(D))),this._parser.registerOscHandler(10,new L.OscHandler(D=>this.setOrReportFgColor(D))),this._parser.registerOscHandler(11,new L.OscHandler(D=>this.setOrReportBgColor(D))),this._parser.registerOscHandler(12,new L.OscHandler(D=>this.setOrReportCursorColor(D))),this._parser.registerOscHandler(104,new L.OscHandler(D=>this.restoreIndexedColor(D))),this._parser.registerOscHandler(110,new L.OscHandler(D=>this.restoreFgColor(D))),this._parser.registerOscHandler(111,new L.OscHandler(D=>this.restoreBgColor(D))),this._parser.registerOscHandler(112,new L.OscHandler(D=>this.restoreCursorColor(D))),this._parser.registerEscHandler({final:"7"},()=>this.saveCursor()),this._parser.registerEscHandler({final:"8"},()=>this.restoreCursor()),this._parser.registerEscHandler({final:"D"},()=>this.index()),this._parser.registerEscHandler({final:"E"},()=>this.nextLine()),this._parser.registerEscHandler({final:"H"},()=>this.tabSet()),this._parser.registerEscHandler({final:"M"},()=>this.reverseIndex()),this._parser.registerEscHandler({final:"="},()=>this.keypadApplicationMode()),this._parser.registerEscHandler({final:">"},()=>this.keypadNumericMode()),this._parser.registerEscHandler({final:"c"},()=>this.fullReset()),this._parser.registerEscHandler({final:"n"},()=>this.setgLevel(2)),this._parser.registerEscHandler({final:"o"},()=>this.setgLevel(3)),this._parser.registerEscHandler({final:"|"},()=>this.setgLevel(3)),this._parser.registerEscHandler({final:"}"},()=>this.setgLevel(2)),this._parser.registerEscHandler({final:"~"},()=>this.setgLevel(1)),this._parser.registerEscHandler({intermediates:"%",final:"@"},()=>this.selectDefaultCharset()),this._parser.registerEscHandler({intermediates:"%",final:"G"},()=>this.selectDefaultCharset());for(const D in m.CHARSETS)this._parser.registerEscHandler({intermediates:"(",final:D},()=>this.selectCharset("("+D)),this._parser.registerEscHandler({intermediates:")",final:D},()=>this.selectCharset(")"+D)),this._parser.registerEscHandler({intermediates:"*",final:D},()=>this.selectCharset("*"+D)),this._parser.registerEscHandler({intermediates:"+",final:D},()=>this.selectCharset("+"+D)),this._parser.registerEscHandler({intermediates:"-",final:D},()=>this.selectCharset("-"+D)),this._parser.registerEscHandler({intermediates:".",final:D},()=>this.selectCharset("."+D)),this._parser.registerEscHandler({intermediates:"/",final:D},()=>this.selectCharset("/"+D));this._parser.registerEscHandler({intermediates:"#",final:"8"},()=>this.screenAlignmentPattern()),this._parser.setErrorHandler(D=>(this._logService.error("Parsing error: ",D),D)),this._parser.registerDcsHandler({intermediates:"$",final:"q"},new k.DcsHandler((D,V)=>this.requestStatusString(D,V)))}_preserveStack(M,B,R,H){this._parseStack.paused=!0,this._parseStack.cursorStartX=M,this._parseStack.cursorStartY=B,this._parseStack.decodedLength=R,this._parseStack.position=H}_logSlowResolvingAsync(M){this._logService.logLevel<=S.LogLevelEnum.WARN&&Promise.race([M,new Promise((B,R)=>setTimeout(()=>R("#SLOW_TIMEOUT"),5e3))]).catch(B=>{if(B!=="#SLOW_TIMEOUT")throw B;console.warn("async parser handler taking longer than 5000 ms")})}_getCurrentLinkId(){return this._curAttrData.extended.urlId}parse(M,B){let R,H=this._activeBuffer.x,N=this._activeBuffer.y,se=0;const he=this._parseStack.paused;if(he){if(R=this._parser.parse(this._parseBuffer,this._parseStack.decodedLength,B))return this._logSlowResolvingAsync(R),R;H=this._parseStack.cursorStartX,N=this._parseStack.cursorStartY,this._parseStack.paused=!1,M.length>E&&(se=this._parseStack.position+E)}if(this._logService.logLevel<=S.LogLevelEnum.DEBUG&&this._logService.debug("parsing data"+(typeof M=="string"?` "${M}"`:` "${Array.prototype.map.call(M,ce=>String.fromCharCode(ce)).join("")}"`),typeof M=="string"?M.split("").map(ce=>ce.charCodeAt(0)):M),this._parseBuffer.length<M.length&&this._parseBuffer.length<E&&(this._parseBuffer=new Uint32Array(Math.min(M.length,E))),he||this._dirtyRowTracker.clearRange(),M.length>E)for(let ce=se;ce<M.length;ce+=E){const be=ce+E<M.length?ce+E:M.length,D=typeof M=="string"?this._stringDecoder.decode(M.substring(ce,be),this._parseBuffer):this._utf8Decoder.decode(M.subarray(ce,be),this._parseBuffer);if(R=this._parser.parse(this._parseBuffer,D))return this._preserveStack(H,N,D,ce),this._logSlowResolvingAsync(R),R}else if(!he){const ce=typeof M=="string"?this._stringDecoder.decode(M,this._parseBuffer):this._utf8Decoder.decode(M,this._parseBuffer);if(R=this._parser.parse(this._parseBuffer,ce))return this._preserveStack(H,N,ce,0),this._logSlowResolvingAsync(R),R}this._activeBuffer.x===H&&this._activeBuffer.y===N||this._onCursorMove.fire(),this._onRequestRefreshRows.fire(this._dirtyRowTracker.start,this._dirtyRowTracker.end)}print(M,B,R){let H,N;const se=this._charsetService.charset,he=this._optionsService.rawOptions.screenReaderMode,ce=this._bufferService.cols,be=this._coreService.decPrivateModes.wraparound,D=this._coreService.modes.insertMode,V=this._curAttrData;let K=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._activeBuffer.x&&R-B>0&&K.getWidth(this._activeBuffer.x-1)===2&&K.setCellFromCodePoint(this._activeBuffer.x-1,0,1,V.fg,V.bg,V.extended);for(let q=B;q<R;++q){if(H=M[q],N=this._unicodeService.wcwidth(H),H<127&&se){const _e=se[String.fromCharCode(H)];_e&&(H=_e.charCodeAt(0))}if(he&&this._onA11yChar.fire((0,g.stringFromCodePoint)(H)),this._getCurrentLinkId()&&this._oscLinkService.addLineToLink(this._getCurrentLinkId(),this._activeBuffer.ybase+this._activeBuffer.y),N||!this._activeBuffer.x){if(this._activeBuffer.x+N-1>=ce){if(be){for(;this._activeBuffer.x<ce;)K.setCellFromCodePoint(this._activeBuffer.x++,0,1,V.fg,V.bg,V.extended);this._activeBuffer.x=0,this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData(),!0)):(this._activeBuffer.y>=this._bufferService.rows&&(this._activeBuffer.y=this._bufferService.rows-1),this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!0),K=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y)}else if(this._activeBuffer.x=ce-1,N===2)continue}if(D&&(K.insertCells(this._activeBuffer.x,N,this._activeBuffer.getNullCell(V),V),K.getWidth(ce-1)===2&&K.setCellFromCodePoint(ce-1,_.NULL_CELL_CODE,_.NULL_CELL_WIDTH,V.fg,V.bg,V.extended)),K.setCellFromCodePoint(this._activeBuffer.x++,H,N,V.fg,V.bg,V.extended),N>0)for(;--N;)K.setCellFromCodePoint(this._activeBuffer.x++,0,0,V.fg,V.bg,V.extended)}else K.getWidth(this._activeBuffer.x-1)?K.addCodepointToCell(this._activeBuffer.x-1,H):K.addCodepointToCell(this._activeBuffer.x-2,H)}R-B>0&&(K.loadCell(this._activeBuffer.x-1,this._workCell),this._workCell.getWidth()===2||this._workCell.getCode()>65535?this._parser.precedingCodepoint=0:this._workCell.isCombined()?this._parser.precedingCodepoint=this._workCell.getChars().charCodeAt(0):this._parser.precedingCodepoint=this._workCell.content),this._activeBuffer.x<ce&&R-B>0&&K.getWidth(this._activeBuffer.x)===0&&!K.hasContent(this._activeBuffer.x)&&K.setCellFromCodePoint(this._activeBuffer.x,0,1,V.fg,V.bg,V.extended),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}registerCsiHandler(M,B){return M.final!=="t"||M.prefix||M.intermediates?this._parser.registerCsiHandler(M,B):this._parser.registerCsiHandler(M,R=>!A(R.params[0],this._optionsService.rawOptions.windowOptions)||B(R))}registerDcsHandler(M,B){return this._parser.registerDcsHandler(M,new k.DcsHandler(B))}registerEscHandler(M,B){return this._parser.registerEscHandler(M,B)}registerOscHandler(M,B){return this._parser.registerOscHandler(M,new L.OscHandler(B))}bell(){return this._onRequestBell.fire(),!0}lineFeed(){return this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._optionsService.rawOptions.convertEol&&(this._activeBuffer.x=0),this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData())):this._activeBuffer.y>=this._bufferService.rows?this._activeBuffer.y=this._bufferService.rows-1:this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!1,this._activeBuffer.x>=this._bufferService.cols&&this._activeBuffer.x--,this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._onLineFeed.fire(),!0}carriageReturn(){return this._activeBuffer.x=0,!0}backspace(){var M;if(!this._coreService.decPrivateModes.reverseWraparound)return this._restrictCursor(),this._activeBuffer.x>0&&this._activeBuffer.x--,!0;if(this._restrictCursor(this._bufferService.cols),this._activeBuffer.x>0)this._activeBuffer.x--;else if(this._activeBuffer.x===0&&this._activeBuffer.y>this._activeBuffer.scrollTop&&this._activeBuffer.y<=this._activeBuffer.scrollBottom&&(!((M=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y))===null||M===void 0)&&M.isWrapped)){this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!1,this._activeBuffer.y--,this._activeBuffer.x=this._bufferService.cols-1;const B=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);B.hasWidth(this._activeBuffer.x)&&!B.hasContent(this._activeBuffer.x)&&this._activeBuffer.x--}return this._restrictCursor(),!0}tab(){if(this._activeBuffer.x>=this._bufferService.cols)return!0;const M=this._activeBuffer.x;return this._activeBuffer.x=this._activeBuffer.nextStop(),this._optionsService.rawOptions.screenReaderMode&&this._onA11yTab.fire(this._activeBuffer.x-M),!0}shiftOut(){return this._charsetService.setgLevel(1),!0}shiftIn(){return this._charsetService.setgLevel(0),!0}_restrictCursor(M=this._bufferService.cols-1){this._activeBuffer.x=Math.min(M,Math.max(0,this._activeBuffer.x)),this._activeBuffer.y=this._coreService.decPrivateModes.origin?Math.min(this._activeBuffer.scrollBottom,Math.max(this._activeBuffer.scrollTop,this._activeBuffer.y)):Math.min(this._bufferService.rows-1,Math.max(0,this._activeBuffer.y)),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}_setCursor(M,B){this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._coreService.decPrivateModes.origin?(this._activeBuffer.x=M,this._activeBuffer.y=this._activeBuffer.scrollTop+B):(this._activeBuffer.x=M,this._activeBuffer.y=B),this._restrictCursor(),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}_moveCursor(M,B){this._restrictCursor(),this._setCursor(this._activeBuffer.x+M,this._activeBuffer.y+B)}cursorUp(M){const B=this._activeBuffer.y-this._activeBuffer.scrollTop;return B>=0?this._moveCursor(0,-Math.min(B,M.params[0]||1)):this._moveCursor(0,-(M.params[0]||1)),!0}cursorDown(M){const B=this._activeBuffer.scrollBottom-this._activeBuffer.y;return B>=0?this._moveCursor(0,Math.min(B,M.params[0]||1)):this._moveCursor(0,M.params[0]||1),!0}cursorForward(M){return this._moveCursor(M.params[0]||1,0),!0}cursorBackward(M){return this._moveCursor(-(M.params[0]||1),0),!0}cursorNextLine(M){return this.cursorDown(M),this._activeBuffer.x=0,!0}cursorPrecedingLine(M){return this.cursorUp(M),this._activeBuffer.x=0,!0}cursorCharAbsolute(M){return this._setCursor((M.params[0]||1)-1,this._activeBuffer.y),!0}cursorPosition(M){return this._setCursor(M.length>=2?(M.params[1]||1)-1:0,(M.params[0]||1)-1),!0}charPosAbsolute(M){return this._setCursor((M.params[0]||1)-1,this._activeBuffer.y),!0}hPositionRelative(M){return this._moveCursor(M.params[0]||1,0),!0}linePosAbsolute(M){return this._setCursor(this._activeBuffer.x,(M.params[0]||1)-1),!0}vPositionRelative(M){return this._moveCursor(0,M.params[0]||1),!0}hVPosition(M){return this.cursorPosition(M),!0}tabClear(M){const B=M.params[0];return B===0?delete this._activeBuffer.tabs[this._activeBuffer.x]:B===3&&(this._activeBuffer.tabs={}),!0}cursorForwardTab(M){if(this._activeBuffer.x>=this._bufferService.cols)return!0;let B=M.params[0]||1;for(;B--;)this._activeBuffer.x=this._activeBuffer.nextStop();return!0}cursorBackwardTab(M){if(this._activeBuffer.x>=this._bufferService.cols)return!0;let B=M.params[0]||1;for(;B--;)this._activeBuffer.x=this._activeBuffer.prevStop();return!0}selectProtected(M){const B=M.params[0];return B===1&&(this._curAttrData.bg|=536870912),B!==2&&B!==0||(this._curAttrData.bg&=-536870913),!0}_eraseInBufferLine(M,B,R,H=!1,N=!1){const se=this._activeBuffer.lines.get(this._activeBuffer.ybase+M);se.replaceCells(B,R,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData(),N),H&&(se.isWrapped=!1)}_resetBufferLine(M,B=!1){const R=this._activeBuffer.lines.get(this._activeBuffer.ybase+M);R&&(R.fill(this._activeBuffer.getNullCell(this._eraseAttrData()),B),this._bufferService.buffer.clearMarkers(this._activeBuffer.ybase+M),R.isWrapped=!1)}eraseInDisplay(M,B=!1){let R;switch(this._restrictCursor(this._bufferService.cols),M.params[0]){case 0:for(R=this._activeBuffer.y,this._dirtyRowTracker.markDirty(R),this._eraseInBufferLine(R++,this._activeBuffer.x,this._bufferService.cols,this._activeBuffer.x===0,B);R<this._bufferService.rows;R++)this._resetBufferLine(R,B);this._dirtyRowTracker.markDirty(R);break;case 1:for(R=this._activeBuffer.y,this._dirtyRowTracker.markDirty(R),this._eraseInBufferLine(R,0,this._activeBuffer.x+1,!0,B),this._activeBuffer.x+1>=this._bufferService.cols&&(this._activeBuffer.lines.get(R+1).isWrapped=!1);R--;)this._resetBufferLine(R,B);this._dirtyRowTracker.markDirty(0);break;case 2:for(R=this._bufferService.rows,this._dirtyRowTracker.markDirty(R-1);R--;)this._resetBufferLine(R,B);this._dirtyRowTracker.markDirty(0);break;case 3:const H=this._activeBuffer.lines.length-this._bufferService.rows;H>0&&(this._activeBuffer.lines.trimStart(H),this._activeBuffer.ybase=Math.max(this._activeBuffer.ybase-H,0),this._activeBuffer.ydisp=Math.max(this._activeBuffer.ydisp-H,0),this._onScroll.fire(0))}return!0}eraseInLine(M,B=!1){switch(this._restrictCursor(this._bufferService.cols),M.params[0]){case 0:this._eraseInBufferLine(this._activeBuffer.y,this._activeBuffer.x,this._bufferService.cols,this._activeBuffer.x===0,B);break;case 1:this._eraseInBufferLine(this._activeBuffer.y,0,this._activeBuffer.x+1,!1,B);break;case 2:this._eraseInBufferLine(this._activeBuffer.y,0,this._bufferService.cols,!0,B)}return this._dirtyRowTracker.markDirty(this._activeBuffer.y),!0}insertLines(M){this._restrictCursor();let B=M.params[0]||1;if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const R=this._activeBuffer.ybase+this._activeBuffer.y,H=this._bufferService.rows-1-this._activeBuffer.scrollBottom,N=this._bufferService.rows-1+this._activeBuffer.ybase-H+1;for(;B--;)this._activeBuffer.lines.splice(N-1,1),this._activeBuffer.lines.splice(R,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.y,this._activeBuffer.scrollBottom),this._activeBuffer.x=0,!0}deleteLines(M){this._restrictCursor();let B=M.params[0]||1;if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const R=this._activeBuffer.ybase+this._activeBuffer.y;let H;for(H=this._bufferService.rows-1-this._activeBuffer.scrollBottom,H=this._bufferService.rows-1+this._activeBuffer.ybase-H;B--;)this._activeBuffer.lines.splice(R,1),this._activeBuffer.lines.splice(H,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.y,this._activeBuffer.scrollBottom),this._activeBuffer.x=0,!0}insertChars(M){this._restrictCursor();const B=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return B&&(B.insertCells(this._activeBuffer.x,M.params[0]||1,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}deleteChars(M){this._restrictCursor();const B=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return B&&(B.deleteCells(this._activeBuffer.x,M.params[0]||1,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}scrollUp(M){let B=M.params[0]||1;for(;B--;)this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollTop,1),this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollBottom,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollDown(M){let B=M.params[0]||1;for(;B--;)this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollBottom,1),this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollTop,0,this._activeBuffer.getBlankLine(h.DEFAULT_ATTR_DATA));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollLeft(M){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const B=M.params[0]||1;for(let R=this._activeBuffer.scrollTop;R<=this._activeBuffer.scrollBottom;++R){const H=this._activeBuffer.lines.get(this._activeBuffer.ybase+R);H.deleteCells(0,B,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),H.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollRight(M){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const B=M.params[0]||1;for(let R=this._activeBuffer.scrollTop;R<=this._activeBuffer.scrollBottom;++R){const H=this._activeBuffer.lines.get(this._activeBuffer.ybase+R);H.insertCells(0,B,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),H.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}insertColumns(M){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const B=M.params[0]||1;for(let R=this._activeBuffer.scrollTop;R<=this._activeBuffer.scrollBottom;++R){const H=this._activeBuffer.lines.get(this._activeBuffer.ybase+R);H.insertCells(this._activeBuffer.x,B,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),H.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}deleteColumns(M){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const B=M.params[0]||1;for(let R=this._activeBuffer.scrollTop;R<=this._activeBuffer.scrollBottom;++R){const H=this._activeBuffer.lines.get(this._activeBuffer.ybase+R);H.deleteCells(this._activeBuffer.x,B,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),H.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}eraseChars(M){this._restrictCursor();const B=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return B&&(B.replaceCells(this._activeBuffer.x,this._activeBuffer.x+(M.params[0]||1),this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}repeatPrecedingCharacter(M){if(!this._parser.precedingCodepoint)return!0;const B=M.params[0]||1,R=new Uint32Array(B);for(let H=0;H<B;++H)R[H]=this._parser.precedingCodepoint;return this.print(R,0,R.length),!0}sendDeviceAttributesPrimary(M){return M.params[0]>0||(this._is("xterm")||this._is("rxvt-unicode")||this._is("screen")?this._coreService.triggerDataEvent(u.C0.ESC+"[?1;2c"):this._is("linux")&&this._coreService.triggerDataEvent(u.C0.ESC+"[?6c")),!0}sendDeviceAttributesSecondary(M){return M.params[0]>0||(this._is("xterm")?this._coreService.triggerDataEvent(u.C0.ESC+"[>0;276;0c"):this._is("rxvt-unicode")?this._coreService.triggerDataEvent(u.C0.ESC+"[>85;95;0c"):this._is("linux")?this._coreService.triggerDataEvent(M.params[0]+"c"):this._is("screen")&&this._coreService.triggerDataEvent(u.C0.ESC+"[>83;40003;0c")),!0}_is(M){return(this._optionsService.rawOptions.termName+"").indexOf(M)===0}setMode(M){for(let B=0;B<M.length;B++)switch(M.params[B]){case 4:this._coreService.modes.insertMode=!0;break;case 20:this._optionsService.options.convertEol=!0}return!0}setModePrivate(M){for(let B=0;B<M.length;B++)switch(M.params[B]){case 1:this._coreService.decPrivateModes.applicationCursorKeys=!0;break;case 2:this._charsetService.setgCharset(0,m.DEFAULT_CHARSET),this._charsetService.setgCharset(1,m.DEFAULT_CHARSET),this._charsetService.setgCharset(2,m.DEFAULT_CHARSET),this._charsetService.setgCharset(3,m.DEFAULT_CHARSET);break;case 3:this._optionsService.rawOptions.windowOptions.setWinLines&&(this._bufferService.resize(132,this._bufferService.rows),this._onRequestReset.fire());break;case 6:this._coreService.decPrivateModes.origin=!0,this._setCursor(0,0);break;case 7:this._coreService.decPrivateModes.wraparound=!0;break;case 12:this._optionsService.options.cursorBlink=!0;break;case 45:this._coreService.decPrivateModes.reverseWraparound=!0;break;case 66:this._logService.debug("Serial port requested application keypad."),this._coreService.decPrivateModes.applicationKeypad=!0,this._onRequestSyncScrollBar.fire();break;case 9:this._coreMouseService.activeProtocol="X10";break;case 1e3:this._coreMouseService.activeProtocol="VT200";break;case 1002:this._coreMouseService.activeProtocol="DRAG";break;case 1003:this._coreMouseService.activeProtocol="ANY";break;case 1004:this._coreService.decPrivateModes.sendFocus=!0,this._onRequestSendFocus.fire();break;case 1005:this._logService.debug("DECSET 1005 not supported (see #2507)");break;case 1006:this._coreMouseService.activeEncoding="SGR";break;case 1015:this._logService.debug("DECSET 1015 not supported (see #2507)");break;case 1016:this._coreMouseService.activeEncoding="SGR_PIXELS";break;case 25:this._coreService.isCursorHidden=!1;break;case 1048:this.saveCursor();break;case 1049:this.saveCursor();case 47:case 1047:this._bufferService.buffers.activateAltBuffer(this._eraseAttrData()),this._coreService.isCursorInitialized=!0,this._onRequestRefreshRows.fire(0,this._bufferService.rows-1),this._onRequestSyncScrollBar.fire();break;case 2004:this._coreService.decPrivateModes.bracketedPasteMode=!0}return!0}resetMode(M){for(let B=0;B<M.length;B++)switch(M.params[B]){case 4:this._coreService.modes.insertMode=!1;break;case 20:this._optionsService.options.convertEol=!1}return!0}resetModePrivate(M){for(let B=0;B<M.length;B++)switch(M.params[B]){case 1:this._coreService.decPrivateModes.applicationCursorKeys=!1;break;case 3:this._optionsService.rawOptions.windowOptions.setWinLines&&(this._bufferService.resize(80,this._bufferService.rows),this._onRequestReset.fire());break;case 6:this._coreService.decPrivateModes.origin=!1,this._setCursor(0,0);break;case 7:this._coreService.decPrivateModes.wraparound=!1;break;case 12:this._optionsService.options.cursorBlink=!1;break;case 45:this._coreService.decPrivateModes.reverseWraparound=!1;break;case 66:this._logService.debug("Switching back to normal keypad."),this._coreService.decPrivateModes.applicationKeypad=!1,this._onRequestSyncScrollBar.fire();break;case 9:case 1e3:case 1002:case 1003:this._coreMouseService.activeProtocol="NONE";break;case 1004:this._coreService.decPrivateModes.sendFocus=!1;break;case 1005:this._logService.debug("DECRST 1005 not supported (see #2507)");break;case 1006:case 1016:this._coreMouseService.activeEncoding="DEFAULT";break;case 1015:this._logService.debug("DECRST 1015 not supported (see #2507)");break;case 25:this._coreService.isCursorHidden=!0;break;case 1048:this.restoreCursor();break;case 1049:case 47:case 1047:this._bufferService.buffers.activateNormalBuffer(),M.params[B]===1049&&this.restoreCursor(),this._coreService.isCursorInitialized=!0,this._onRequestRefreshRows.fire(0,this._bufferService.rows-1),this._onRequestSyncScrollBar.fire();break;case 2004:this._coreService.decPrivateModes.bracketedPasteMode=!1}return!0}requestMode(M,B){const R=this._coreService.decPrivateModes,{activeProtocol:H,activeEncoding:N}=this._coreMouseService,se=this._coreService,{buffers:he,cols:ce}=this._bufferService,{active:be,alt:D}=he,V=this._optionsService.rawOptions,K=we=>we?1:2,q=M.params[0];return _e=q,ie=B?q===2?4:q===4?K(se.modes.insertMode):q===12?3:q===20?K(V.convertEol):0:q===1?K(R.applicationCursorKeys):q===3?V.windowOptions.setWinLines?ce===80?2:ce===132?1:0:0:q===6?K(R.origin):q===7?K(R.wraparound):q===8?3:q===9?K(H==="X10"):q===12?K(V.cursorBlink):q===25?K(!se.isCursorHidden):q===45?K(R.reverseWraparound):q===66?K(R.applicationKeypad):q===67?4:q===1e3?K(H==="VT200"):q===1002?K(H==="DRAG"):q===1003?K(H==="ANY"):q===1004?K(R.sendFocus):q===1005?4:q===1006?K(N==="SGR"):q===1015?4:q===1016?K(N==="SGR_PIXELS"):q===1048?1:q===47||q===1047||q===1049?K(be===D):q===2004?K(R.bracketedPasteMode):0,se.triggerDataEvent(`${u.C0.ESC}[${B?"":"?"}${_e};${ie}$y`),!0;var _e,ie}_updateAttrColor(M,B,R,H,N){return B===2?(M|=50331648,M&=-16777216,M|=b.AttributeData.fromColorRGB([R,H,N])):B===5&&(M&=-50331904,M|=33554432|255&R),M}_extractColor(M,B,R){const H=[0,0,-1,0,0,0];let N=0,se=0;do{if(H[se+N]=M.params[B+se],M.hasSubParams(B+se)){const he=M.getSubParams(B+se);let ce=0;do H[1]===5&&(N=1),H[se+ce+1+N]=he[ce];while(++ce<he.length&&ce+se+1+N<H.length);break}if(H[1]===5&&se+N>=2||H[1]===2&&se+N>=5)break;H[1]&&(N=1)}while(++se+B<M.length&&se+N<H.length);for(let he=2;he<H.length;++he)H[he]===-1&&(H[he]=0);switch(H[0]){case 38:R.fg=this._updateAttrColor(R.fg,H[1],H[3],H[4],H[5]);break;case 48:R.bg=this._updateAttrColor(R.bg,H[1],H[3],H[4],H[5]);break;case 58:R.extended=R.extended.clone(),R.extended.underlineColor=this._updateAttrColor(R.extended.underlineColor,H[1],H[3],H[4],H[5])}return se}_processUnderline(M,B){B.extended=B.extended.clone(),(!~M||M>5)&&(M=1),B.extended.underlineStyle=M,B.fg|=268435456,M===0&&(B.fg&=-268435457),B.updateExtended()}_processSGR0(M){M.fg=h.DEFAULT_ATTR_DATA.fg,M.bg=h.DEFAULT_ATTR_DATA.bg,M.extended=M.extended.clone(),M.extended.underlineStyle=0,M.extended.underlineColor&=-67108864,M.updateExtended()}charAttributes(M){if(M.length===1&&M.params[0]===0)return this._processSGR0(this._curAttrData),!0;const B=M.length;let R;const H=this._curAttrData;for(let N=0;N<B;N++)R=M.params[N],R>=30&&R<=37?(H.fg&=-50331904,H.fg|=16777216|R-30):R>=40&&R<=47?(H.bg&=-50331904,H.bg|=16777216|R-40):R>=90&&R<=97?(H.fg&=-50331904,H.fg|=16777224|R-90):R>=100&&R<=107?(H.bg&=-50331904,H.bg|=16777224|R-100):R===0?this._processSGR0(H):R===1?H.fg|=134217728:R===3?H.bg|=67108864:R===4?(H.fg|=268435456,this._processUnderline(M.hasSubParams(N)?M.getSubParams(N)[0]:1,H)):R===5?H.fg|=536870912:R===7?H.fg|=67108864:R===8?H.fg|=1073741824:R===9?H.fg|=2147483648:R===2?H.bg|=134217728:R===21?this._processUnderline(2,H):R===22?(H.fg&=-134217729,H.bg&=-134217729):R===23?H.bg&=-67108865:R===24?(H.fg&=-268435457,this._processUnderline(0,H)):R===25?H.fg&=-536870913:R===27?H.fg&=-67108865:R===28?H.fg&=-1073741825:R===29?H.fg&=2147483647:R===39?(H.fg&=-67108864,H.fg|=16777215&h.DEFAULT_ATTR_DATA.fg):R===49?(H.bg&=-67108864,H.bg|=16777215&h.DEFAULT_ATTR_DATA.bg):R===38||R===48||R===58?N+=this._extractColor(M,N,H):R===53?H.bg|=1073741824:R===55?H.bg&=-1073741825:R===59?(H.extended=H.extended.clone(),H.extended.underlineColor=-1,H.updateExtended()):R===100?(H.fg&=-67108864,H.fg|=16777215&h.DEFAULT_ATTR_DATA.fg,H.bg&=-67108864,H.bg|=16777215&h.DEFAULT_ATTR_DATA.bg):this._logService.debug("Unknown SGR attribute: %d.",R);return!0}deviceStatus(M){switch(M.params[0]){case 5:this._coreService.triggerDataEvent(`${u.C0.ESC}[0n`);break;case 6:const B=this._activeBuffer.y+1,R=this._activeBuffer.x+1;this._coreService.triggerDataEvent(`${u.C0.ESC}[${B};${R}R`)}return!0}deviceStatusPrivate(M){if(M.params[0]===6){const B=this._activeBuffer.y+1,R=this._activeBuffer.x+1;this._coreService.triggerDataEvent(`${u.C0.ESC}[?${B};${R}R`)}return!0}softReset(M){return this._coreService.isCursorHidden=!1,this._onRequestSyncScrollBar.fire(),this._activeBuffer.scrollTop=0,this._activeBuffer.scrollBottom=this._bufferService.rows-1,this._curAttrData=h.DEFAULT_ATTR_DATA.clone(),this._coreService.reset(),this._charsetService.reset(),this._activeBuffer.savedX=0,this._activeBuffer.savedY=this._activeBuffer.ybase,this._activeBuffer.savedCurAttrData.fg=this._curAttrData.fg,this._activeBuffer.savedCurAttrData.bg=this._curAttrData.bg,this._activeBuffer.savedCharset=this._charsetService.charset,this._coreService.decPrivateModes.origin=!1,!0}setCursorStyle(M){const B=M.params[0]||1;switch(B){case 1:case 2:this._optionsService.options.cursorStyle="block";break;case 3:case 4:this._optionsService.options.cursorStyle="underline";break;case 5:case 6:this._optionsService.options.cursorStyle="bar"}const R=B%2==1;return this._optionsService.options.cursorBlink=R,!0}setScrollRegion(M){const B=M.params[0]||1;let R;return(M.length<2||(R=M.params[1])>this._bufferService.rows||R===0)&&(R=this._bufferService.rows),R>B&&(this._activeBuffer.scrollTop=B-1,this._activeBuffer.scrollBottom=R-1,this._setCursor(0,0)),!0}windowOptions(M){if(!A(M.params[0],this._optionsService.rawOptions.windowOptions))return!0;const B=M.length>1?M.params[1]:0;switch(M.params[0]){case 14:B!==2&&this._onRequestWindowsOptionsReport.fire(O.GET_WIN_SIZE_PIXELS);break;case 16:this._onRequestWindowsOptionsReport.fire(O.GET_CELL_SIZE_PIXELS);break;case 18:this._bufferService&&this._coreService.triggerDataEvent(`${u.C0.ESC}[8;${this._bufferService.rows};${this._bufferService.cols}t`);break;case 22:B!==0&&B!==2||(this._windowTitleStack.push(this._windowTitle),this._windowTitleStack.length>10&&this._windowTitleStack.shift()),B!==0&&B!==1||(this._iconNameStack.push(this._iconName),this._iconNameStack.length>10&&this._iconNameStack.shift());break;case 23:B!==0&&B!==2||this._windowTitleStack.length&&this.setTitle(this._windowTitleStack.pop()),B!==0&&B!==1||this._iconNameStack.length&&this.setIconName(this._iconNameStack.pop())}return!0}saveCursor(M){return this._activeBuffer.savedX=this._activeBuffer.x,this._activeBuffer.savedY=this._activeBuffer.ybase+this._activeBuffer.y,this._activeBuffer.savedCurAttrData.fg=this._curAttrData.fg,this._activeBuffer.savedCurAttrData.bg=this._curAttrData.bg,this._activeBuffer.savedCharset=this._charsetService.charset,!0}restoreCursor(M){return this._activeBuffer.x=this._activeBuffer.savedX||0,this._activeBuffer.y=Math.max(this._activeBuffer.savedY-this._activeBuffer.ybase,0),this._curAttrData.fg=this._activeBuffer.savedCurAttrData.fg,this._curAttrData.bg=this._activeBuffer.savedCurAttrData.bg,this._charsetService.charset=this._savedCharset,this._activeBuffer.savedCharset&&(this._charsetService.charset=this._activeBuffer.savedCharset),this._restrictCursor(),!0}setTitle(M){return this._windowTitle=M,this._onTitleChange.fire(M),!0}setIconName(M){return this._iconName=M,!0}setOrReportIndexedColor(M){const B=[],R=M.split(";");for(;R.length>1;){const H=R.shift(),N=R.shift();if(/^\d+$/.exec(H)){const se=parseInt(H);if(z(se))if(N==="?")B.push({type:0,index:se});else{const he=(0,C.parseColor)(N);he&&B.push({type:1,index:se,color:he})}}}return B.length&&this._onColor.fire(B),!0}setHyperlink(M){const B=M.split(";");return!(B.length<2)&&(B[1]?this._createHyperlink(B[0],B[1]):!B[0]&&this._finishHyperlink())}_createHyperlink(M,B){this._getCurrentLinkId()&&this._finishHyperlink();const R=M.split(":");let H;const N=R.findIndex(se=>se.startsWith("id="));return N!==-1&&(H=R[N].slice(3)||void 0),this._curAttrData.extended=this._curAttrData.extended.clone(),this._curAttrData.extended.urlId=this._oscLinkService.registerLink({id:H,uri:B}),this._curAttrData.updateExtended(),!0}_finishHyperlink(){return this._curAttrData.extended=this._curAttrData.extended.clone(),this._curAttrData.extended.urlId=0,this._curAttrData.updateExtended(),!0}_setOrReportSpecialColor(M,B){const R=M.split(";");for(let H=0;H<R.length&&!(B>=this._specialColors.length);++H,++B)if(R[H]==="?")this._onColor.fire([{type:0,index:this._specialColors[B]}]);else{const N=(0,C.parseColor)(R[H]);N&&this._onColor.fire([{type:1,index:this._specialColors[B],color:N}])}return!0}setOrReportFgColor(M){return this._setOrReportSpecialColor(M,0)}setOrReportBgColor(M){return this._setOrReportSpecialColor(M,1)}setOrReportCursorColor(M){return this._setOrReportSpecialColor(M,2)}restoreIndexedColor(M){if(!M)return this._onColor.fire([{type:2}]),!0;const B=[],R=M.split(";");for(let H=0;H<R.length;++H)if(/^\d+$/.exec(R[H])){const N=parseInt(R[H]);z(N)&&B.push({type:2,index:N})}return B.length&&this._onColor.fire(B),!0}restoreFgColor(M){return this._onColor.fire([{type:2,index:256}]),!0}restoreBgColor(M){return this._onColor.fire([{type:2,index:257}]),!0}restoreCursorColor(M){return this._onColor.fire([{type:2,index:258}]),!0}nextLine(){return this._activeBuffer.x=0,this.index(),!0}keypadApplicationMode(){return this._logService.debug("Serial port requested application keypad."),this._coreService.decPrivateModes.applicationKeypad=!0,this._onRequestSyncScrollBar.fire(),!0}keypadNumericMode(){return this._logService.debug("Switching back to normal keypad."),this._coreService.decPrivateModes.applicationKeypad=!1,this._onRequestSyncScrollBar.fire(),!0}selectDefaultCharset(){return this._charsetService.setgLevel(0),this._charsetService.setgCharset(0,m.DEFAULT_CHARSET),!0}selectCharset(M){return M.length!==2?(this.selectDefaultCharset(),!0):(M[0]==="/"||this._charsetService.setgCharset(w[M[0]],m.CHARSETS[M[1]]||m.DEFAULT_CHARSET),!0)}index(){return this._restrictCursor(),this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData())):this._activeBuffer.y>=this._bufferService.rows&&(this._activeBuffer.y=this._bufferService.rows-1),this._restrictCursor(),!0}tabSet(){return this._activeBuffer.tabs[this._activeBuffer.x]=!0,!0}reverseIndex(){if(this._restrictCursor(),this._activeBuffer.y===this._activeBuffer.scrollTop){const M=this._activeBuffer.scrollBottom-this._activeBuffer.scrollTop;this._activeBuffer.lines.shiftElements(this._activeBuffer.ybase+this._activeBuffer.y,M,1),this._activeBuffer.lines.set(this._activeBuffer.ybase+this._activeBuffer.y,this._activeBuffer.getBlankLine(this._eraseAttrData())),this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom)}else this._activeBuffer.y--,this._restrictCursor();return!0}fullReset(){return this._parser.reset(),this._onRequestReset.fire(),!0}reset(){this._curAttrData=h.DEFAULT_ATTR_DATA.clone(),this._eraseAttrDataInternal=h.DEFAULT_ATTR_DATA.clone()}_eraseAttrData(){return this._eraseAttrDataInternal.bg&=-67108864,this._eraseAttrDataInternal.bg|=67108863&this._curAttrData.bg,this._eraseAttrDataInternal}setgLevel(M){return this._charsetService.setgLevel(M),!0}screenAlignmentPattern(){const M=new p.CellData;M.content=4194304|"E".charCodeAt(0),M.fg=this._curAttrData.fg,M.bg=this._curAttrData.bg,this._setCursor(0,0);for(let B=0;B<this._bufferService.rows;++B){const R=this._activeBuffer.ybase+this._activeBuffer.y+B,H=this._activeBuffer.lines.get(R);H&&(H.fill(M),H.isWrapped=!1)}return this._dirtyRowTracker.markAllDirty(),this._setCursor(0,0),!0}requestStatusString(M,B){const R=this._bufferService.buffer,H=this._optionsService.rawOptions;return(N=>(this._coreService.triggerDataEvent(`${u.C0.ESC}${N}${u.C0.ESC}\\`),!0))(M==='"q'?`P1$r${this._curAttrData.isProtected()?1:0}"q`:M==='"p'?'P1$r61;1"p':M==="r"?`P1$r${R.scrollTop+1};${R.scrollBottom+1}r`:M==="m"?"P1$r0m":M===" q"?`P1$r${{block:2,underline:4,bar:6}[H.cursorStyle]-(H.cursorBlink?1:0)} q`:"P0$r")}markRangeDirty(M,B){this._dirtyRowTracker.markRangeDirty(M,B)}}o.InputHandler=P;let F=class{constructor(Z){this._bufferService=Z,this.clearRange()}clearRange(){this.start=this._bufferService.buffer.y,this.end=this._bufferService.buffer.y}markDirty(Z){Z<this.start?this.start=Z:Z>this.end&&(this.end=Z)}markRangeDirty(Z,M){Z>M&&(T=Z,Z=M,M=T),Z<this.start&&(this.start=Z),M>this.end&&(this.end=M)}markAllDirty(){this.markRangeDirty(0,this._bufferService.rows-1)}};function z(Z){return 0<=Z&&Z<256}F=c([f(0,S.IBufferService)],F)},844:(l,o)=>{function a(c){for(const f of c)f.dispose();c.length=0}Object.defineProperty(o,"__esModule",{value:!0}),o.getDisposeArrayDisposable=o.disposeArray=o.toDisposable=o.MutableDisposable=o.Disposable=void 0,o.Disposable=class{constructor(){this._disposables=[],this._isDisposed=!1}dispose(){this._isDisposed=!0;for(const c of this._disposables)c.dispose();this._disposables.length=0}register(c){return this._disposables.push(c),c}unregister(c){const f=this._disposables.indexOf(c);f!==-1&&this._disposables.splice(f,1)}},o.MutableDisposable=class{constructor(){this._isDisposed=!1}get value(){return this._isDisposed?void 0:this._value}set value(c){var f;this._isDisposed||c===this._value||((f=this._value)===null||f===void 0||f.dispose(),this._value=c)}clear(){this.value=void 0}dispose(){var c;this._isDisposed=!0,(c=this._value)===null||c===void 0||c.dispose(),this._value=void 0}},o.toDisposable=function(c){return{dispose:c}},o.disposeArray=a,o.getDisposeArrayDisposable=function(c){return{dispose:()=>a(c)}}},1505:(l,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.FourKeyMap=o.TwoKeyMap=void 0;class a{constructor(){this._data={}}set(f,u,m){this._data[f]||(this._data[f]={}),this._data[f][u]=m}get(f,u){return this._data[f]?this._data[f][u]:void 0}clear(){this._data={}}}o.TwoKeyMap=a,o.FourKeyMap=class{constructor(){this._data=new a}set(c,f,u,m,v){this._data.get(c,f)||this._data.set(c,f,new a),this._data.get(c,f).set(u,m,v)}get(c,f,u,m){var v;return(v=this._data.get(c,f))===null||v===void 0?void 0:v.get(u,m)}clear(){this._data.clear()}}},6114:(l,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.isChromeOS=o.isLinux=o.isWindows=o.isIphone=o.isIpad=o.isMac=o.getSafariVersion=o.isSafari=o.isLegacyEdge=o.isFirefox=o.isNode=void 0,o.isNode=typeof navigator>"u";const a=o.isNode?"node":navigator.userAgent,c=o.isNode?"node":navigator.platform;o.isFirefox=a.includes("Firefox"),o.isLegacyEdge=a.includes("Edge"),o.isSafari=/^((?!chrome|android).)*safari/i.test(a),o.getSafariVersion=function(){if(!o.isSafari)return 0;const f=a.match(/Version\/(\d+)/);return f===null||f.length<2?0:parseInt(f[1])},o.isMac=["Macintosh","MacIntel","MacPPC","Mac68K"].includes(c),o.isIpad=c==="iPad",o.isIphone=c==="iPhone",o.isWindows=["Windows","Win16","Win32","WinCE"].includes(c),o.isLinux=c.indexOf("Linux")>=0,o.isChromeOS=/\bCrOS\b/.test(a)},6106:(l,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.SortedList=void 0;let a=0;o.SortedList=class{constructor(c){this._getKey=c,this._array=[]}clear(){this._array.length=0}insert(c){this._array.length!==0?(a=this._search(this._getKey(c)),this._array.splice(a,0,c)):this._array.push(c)}delete(c){if(this._array.length===0)return!1;const f=this._getKey(c);if(f===void 0||(a=this._search(f),a===-1)||this._getKey(this._array[a])!==f)return!1;do if(this._array[a]===c)return this._array.splice(a,1),!0;while(++a<this._array.length&&this._getKey(this._array[a])===f);return!1}*getKeyIterator(c){if(this._array.length!==0&&(a=this._search(c),!(a<0||a>=this._array.length)&&this._getKey(this._array[a])===c))do yield this._array[a];while(++a<this._array.length&&this._getKey(this._array[a])===c)}forEachByKey(c,f){if(this._array.length!==0&&(a=this._search(c),!(a<0||a>=this._array.length)&&this._getKey(this._array[a])===c))do f(this._array[a]);while(++a<this._array.length&&this._getKey(this._array[a])===c)}values(){return[...this._array].values()}_search(c){let f=0,u=this._array.length-1;for(;u>=f;){let m=f+u>>1;const v=this._getKey(this._array[m]);if(v>c)u=m-1;else{if(!(v<c)){for(;m>0&&this._getKey(this._array[m-1])===c;)m--;return m}f=m+1}}return f}}},7226:(l,o,a)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.DebouncedIdleTask=o.IdleTaskQueue=o.PriorityTaskQueue=void 0;const c=a(6114);class f{constructor(){this._tasks=[],this._i=0}enqueue(v){this._tasks.push(v),this._start()}flush(){for(;this._i<this._tasks.length;)this._tasks[this._i]()||this._i++;this.clear()}clear(){this._idleCallback&&(this._cancelCallback(this._idleCallback),this._idleCallback=void 0),this._i=0,this._tasks.length=0}_start(){this._idleCallback||(this._idleCallback=this._requestCallback(this._process.bind(this)))}_process(v){this._idleCallback=void 0;let y=0,g=0,h=v.timeRemaining(),d=0;for(;this._i<this._tasks.length;){if(y=Date.now(),this._tasks[this._i]()||this._i++,y=Math.max(1,Date.now()-y),g=Math.max(y,g),d=v.timeRemaining(),1.5*g>d)return h-y<-20&&console.warn(`task queue exceeded allotted deadline by ${Math.abs(Math.round(h-y))}ms`),void this._start();h=d}this.clear()}}class u extends f{_requestCallback(v){return setTimeout(()=>v(this._createDeadline(16)))}_cancelCallback(v){clearTimeout(v)}_createDeadline(v){const y=Date.now()+v;return{timeRemaining:()=>Math.max(0,y-Date.now())}}}o.PriorityTaskQueue=u,o.IdleTaskQueue=!c.isNode&&"requestIdleCallback"in window?class extends f{_requestCallback(m){return requestIdleCallback(m)}_cancelCallback(m){cancelIdleCallback(m)}}:u,o.DebouncedIdleTask=class{constructor(){this._queue=new o.IdleTaskQueue}set(m){this._queue.clear(),this._queue.enqueue(m)}flush(){this._queue.flush()}}},9282:(l,o,a)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.updateWindowsModeWrappedState=void 0;const c=a(643);o.updateWindowsModeWrappedState=function(f){const u=f.buffer.lines.get(f.buffer.ybase+f.buffer.y-1),m=u==null?void 0:u.get(f.cols-1),v=f.buffer.lines.get(f.buffer.ybase+f.buffer.y);v&&m&&(v.isWrapped=m[c.CHAR_DATA_CODE_INDEX]!==c.NULL_CELL_CODE&&m[c.CHAR_DATA_CODE_INDEX]!==c.WHITESPACE_CELL_CODE)}},3734:(l,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.ExtendedAttrs=o.AttributeData=void 0;class a{constructor(){this.fg=0,this.bg=0,this.extended=new c}static toColorRGB(u){return[u>>>16&255,u>>>8&255,255&u]}static fromColorRGB(u){return(255&u[0])<<16|(255&u[1])<<8|255&u[2]}clone(){const u=new a;return u.fg=this.fg,u.bg=this.bg,u.extended=this.extended.clone(),u}isInverse(){return 67108864&this.fg}isBold(){return 134217728&this.fg}isUnderline(){return this.hasExtendedAttrs()&&this.extended.underlineStyle!==0?1:268435456&this.fg}isBlink(){return 536870912&this.fg}isInvisible(){return 1073741824&this.fg}isItalic(){return 67108864&this.bg}isDim(){return 134217728&this.bg}isStrikethrough(){return 2147483648&this.fg}isProtected(){return 536870912&this.bg}isOverline(){return 1073741824&this.bg}getFgColorMode(){return 50331648&this.fg}getBgColorMode(){return 50331648&this.bg}isFgRGB(){return(50331648&this.fg)==50331648}isBgRGB(){return(50331648&this.bg)==50331648}isFgPalette(){return(50331648&this.fg)==16777216||(50331648&this.fg)==33554432}isBgPalette(){return(50331648&this.bg)==16777216||(50331648&this.bg)==33554432}isFgDefault(){return(50331648&this.fg)==0}isBgDefault(){return(50331648&this.bg)==0}isAttributeDefault(){return this.fg===0&&this.bg===0}getFgColor(){switch(50331648&this.fg){case 16777216:case 33554432:return 255&this.fg;case 50331648:return 16777215&this.fg;default:return-1}}getBgColor(){switch(50331648&this.bg){case 16777216:case 33554432:return 255&this.bg;case 50331648:return 16777215&this.bg;default:return-1}}hasExtendedAttrs(){return 268435456&this.bg}updateExtended(){this.extended.isEmpty()?this.bg&=-268435457:this.bg|=268435456}getUnderlineColor(){if(268435456&this.bg&&~this.extended.underlineColor)switch(50331648&this.extended.underlineColor){case 16777216:case 33554432:return 255&this.extended.underlineColor;case 50331648:return 16777215&this.extended.underlineColor;default:return this.getFgColor()}return this.getFgColor()}getUnderlineColorMode(){return 268435456&this.bg&&~this.extended.underlineColor?50331648&this.extended.underlineColor:this.getFgColorMode()}isUnderlineColorRGB(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==50331648:this.isFgRGB()}isUnderlineColorPalette(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==16777216||(50331648&this.extended.underlineColor)==33554432:this.isFgPalette()}isUnderlineColorDefault(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==0:this.isFgDefault()}getUnderlineStyle(){return 268435456&this.fg?268435456&this.bg?this.extended.underlineStyle:1:0}}o.AttributeData=a;class c{get ext(){return this._urlId?-469762049&this._ext|this.underlineStyle<<26:this._ext}set ext(u){this._ext=u}get underlineStyle(){return this._urlId?5:(469762048&this._ext)>>26}set underlineStyle(u){this._ext&=-469762049,this._ext|=u<<26&469762048}get underlineColor(){return 67108863&this._ext}set underlineColor(u){this._ext&=-67108864,this._ext|=67108863&u}get urlId(){return this._urlId}set urlId(u){this._urlId=u}constructor(u=0,m=0){this._ext=0,this._urlId=0,this._ext=u,this._urlId=m}clone(){return new c(this._ext,this._urlId)}isEmpty(){return this.underlineStyle===0&&this._urlId===0}}o.ExtendedAttrs=c},9092:(l,o,a)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.Buffer=o.MAX_BUFFER_SIZE=void 0;const c=a(6349),f=a(7226),u=a(3734),m=a(8437),v=a(4634),y=a(511),g=a(643),h=a(4863),d=a(7116);o.MAX_BUFFER_SIZE=4294967295,o.Buffer=class{constructor(_,p,b){this._hasScrollback=_,this._optionsService=p,this._bufferService=b,this.ydisp=0,this.ybase=0,this.y=0,this.x=0,this.tabs={},this.savedY=0,this.savedX=0,this.savedCurAttrData=m.DEFAULT_ATTR_DATA.clone(),this.savedCharset=d.DEFAULT_CHARSET,this.markers=[],this._nullCell=y.CellData.fromCharData([0,g.NULL_CELL_CHAR,g.NULL_CELL_WIDTH,g.NULL_CELL_CODE]),this._whitespaceCell=y.CellData.fromCharData([0,g.WHITESPACE_CELL_CHAR,g.WHITESPACE_CELL_WIDTH,g.WHITESPACE_CELL_CODE]),this._isClearing=!1,this._memoryCleanupQueue=new f.IdleTaskQueue,this._memoryCleanupPosition=0,this._cols=this._bufferService.cols,this._rows=this._bufferService.rows,this.lines=new c.CircularList(this._getCorrectBufferLength(this._rows)),this.scrollTop=0,this.scrollBottom=this._rows-1,this.setupTabStops()}getNullCell(_){return _?(this._nullCell.fg=_.fg,this._nullCell.bg=_.bg,this._nullCell.extended=_.extended):(this._nullCell.fg=0,this._nullCell.bg=0,this._nullCell.extended=new u.ExtendedAttrs),this._nullCell}getWhitespaceCell(_){return _?(this._whitespaceCell.fg=_.fg,this._whitespaceCell.bg=_.bg,this._whitespaceCell.extended=_.extended):(this._whitespaceCell.fg=0,this._whitespaceCell.bg=0,this._whitespaceCell.extended=new u.ExtendedAttrs),this._whitespaceCell}getBlankLine(_,p){return new m.BufferLine(this._bufferService.cols,this.getNullCell(_),p)}get hasScrollback(){return this._hasScrollback&&this.lines.maxLength>this._rows}get isCursorInViewport(){const _=this.ybase+this.y-this.ydisp;return _>=0&&_<this._rows}_getCorrectBufferLength(_){if(!this._hasScrollback)return _;const p=_+this._optionsService.rawOptions.scrollback;return p>o.MAX_BUFFER_SIZE?o.MAX_BUFFER_SIZE:p}fillViewportRows(_){if(this.lines.length===0){_===void 0&&(_=m.DEFAULT_ATTR_DATA);let p=this._rows;for(;p--;)this.lines.push(this.getBlankLine(_))}}clear(){this.ydisp=0,this.ybase=0,this.y=0,this.x=0,this.lines=new c.CircularList(this._getCorrectBufferLength(this._rows)),this.scrollTop=0,this.scrollBottom=this._rows-1,this.setupTabStops()}resize(_,p){const b=this.getNullCell(m.DEFAULT_ATTR_DATA);let S=0;const L=this._getCorrectBufferLength(p);if(L>this.lines.maxLength&&(this.lines.maxLength=L),this.lines.length>0){if(this._cols<_)for(let C=0;C<this.lines.length;C++)S+=+this.lines.get(C).resize(_,b);let k=0;if(this._rows<p)for(let C=this._rows;C<p;C++)this.lines.length<p+this.ybase&&(this._optionsService.rawOptions.windowsMode||this._optionsService.rawOptions.windowsPty.backend!==void 0||this._optionsService.rawOptions.windowsPty.buildNumber!==void 0?this.lines.push(new m.BufferLine(_,b)):this.ybase>0&&this.lines.length<=this.ybase+this.y+k+1?(this.ybase--,k++,this.ydisp>0&&this.ydisp--):this.lines.push(new m.BufferLine(_,b)));else for(let C=this._rows;C>p;C--)this.lines.length>p+this.ybase&&(this.lines.length>this.ybase+this.y+1?this.lines.pop():(this.ybase++,this.ydisp++));if(L<this.lines.maxLength){const C=this.lines.length-L;C>0&&(this.lines.trimStart(C),this.ybase=Math.max(this.ybase-C,0),this.ydisp=Math.max(this.ydisp-C,0),this.savedY=Math.max(this.savedY-C,0)),this.lines.maxLength=L}this.x=Math.min(this.x,_-1),this.y=Math.min(this.y,p-1),k&&(this.y+=k),this.savedX=Math.min(this.savedX,_-1),this.scrollTop=0}if(this.scrollBottom=p-1,this._isReflowEnabled&&(this._reflow(_,p),this._cols>_))for(let k=0;k<this.lines.length;k++)S+=+this.lines.get(k).resize(_,b);this._cols=_,this._rows=p,this._memoryCleanupQueue.clear(),S>.1*this.lines.length&&(this._memoryCleanupPosition=0,this._memoryCleanupQueue.enqueue(()=>this._batchedMemoryCleanup()))}_batchedMemoryCleanup(){let _=!0;this._memoryCleanupPosition>=this.lines.length&&(this._memoryCleanupPosition=0,_=!1);let p=0;for(;this._memoryCleanupPosition<this.lines.length;)if(p+=this.lines.get(this._memoryCleanupPosition++).cleanupMemory(),p>100)return!0;return _}get _isReflowEnabled(){const _=this._optionsService.rawOptions.windowsPty;return _&&_.buildNumber?this._hasScrollback&&_.backend==="conpty"&&_.buildNumber>=21376:this._hasScrollback&&!this._optionsService.rawOptions.windowsMode}_reflow(_,p){this._cols!==_&&(_>this._cols?this._reflowLarger(_,p):this._reflowSmaller(_,p))}_reflowLarger(_,p){const b=(0,v.reflowLargerGetLinesToRemove)(this.lines,this._cols,_,this.ybase+this.y,this.getNullCell(m.DEFAULT_ATTR_DATA));if(b.length>0){const S=(0,v.reflowLargerCreateNewLayout)(this.lines,b);(0,v.reflowLargerApplyNewLayout)(this.lines,S.layout),this._reflowLargerAdjustViewport(_,p,S.countRemoved)}}_reflowLargerAdjustViewport(_,p,b){const S=this.getNullCell(m.DEFAULT_ATTR_DATA);let L=b;for(;L-- >0;)this.ybase===0?(this.y>0&&this.y--,this.lines.length<p&&this.lines.push(new m.BufferLine(_,S))):(this.ydisp===this.ybase&&this.ydisp--,this.ybase--);this.savedY=Math.max(this.savedY-b,0)}_reflowSmaller(_,p){const b=this.getNullCell(m.DEFAULT_ATTR_DATA),S=[];let L=0;for(let k=this.lines.length-1;k>=0;k--){let C=this.lines.get(k);if(!C||!C.isWrapped&&C.getTrimmedLength()<=_)continue;const w=[C];for(;C.isWrapped&&k>0;)C=this.lines.get(--k),w.unshift(C);const E=this.ybase+this.y;if(E>=k&&E<k+w.length)continue;const A=w[w.length-1].getTrimmedLength(),O=(0,v.reflowSmallerGetNewLineLengths)(w,this._cols,_),T=O.length-w.length;let P;P=this.ybase===0&&this.y!==this.lines.length-1?Math.max(0,this.y-this.lines.maxLength+T):Math.max(0,this.lines.length-this.lines.maxLength+T);const F=[];for(let H=0;H<T;H++){const N=this.getBlankLine(m.DEFAULT_ATTR_DATA,!0);F.push(N)}F.length>0&&(S.push({start:k+w.length+L,newLines:F}),L+=F.length),w.push(...F);let z=O.length-1,Z=O[z];Z===0&&(z--,Z=O[z]);let M=w.length-T-1,B=A;for(;M>=0;){const H=Math.min(B,Z);if(w[z]===void 0)break;if(w[z].copyCellsFrom(w[M],B-H,Z-H,H,!0),Z-=H,Z===0&&(z--,Z=O[z]),B-=H,B===0){M--;const N=Math.max(M,0);B=(0,v.getWrappedLineTrimmedLength)(w,N,this._cols)}}for(let H=0;H<w.length;H++)O[H]<_&&w[H].setCell(O[H],b);let R=T-P;for(;R-- >0;)this.ybase===0?this.y<p-1?(this.y++,this.lines.pop()):(this.ybase++,this.ydisp++):this.ybase<Math.min(this.lines.maxLength,this.lines.length+L)-p&&(this.ybase===this.ydisp&&this.ydisp++,this.ybase++);this.savedY=Math.min(this.savedY+T,this.ybase+p-1)}if(S.length>0){const k=[],C=[];for(let z=0;z<this.lines.length;z++)C.push(this.lines.get(z));const w=this.lines.length;let E=w-1,A=0,O=S[A];this.lines.length=Math.min(this.lines.maxLength,this.lines.length+L);let T=0;for(let z=Math.min(this.lines.maxLength-1,w+L-1);z>=0;z--)if(O&&O.start>E+T){for(let Z=O.newLines.length-1;Z>=0;Z--)this.lines.set(z--,O.newLines[Z]);z++,k.push({index:E+1,amount:O.newLines.length}),T+=O.newLines.length,O=S[++A]}else this.lines.set(z,C[E--]);let P=0;for(let z=k.length-1;z>=0;z--)k[z].index+=P,this.lines.onInsertEmitter.fire(k[z]),P+=k[z].amount;const F=Math.max(0,w+L-this.lines.maxLength);F>0&&this.lines.onTrimEmitter.fire(F)}}translateBufferLineToString(_,p,b=0,S){const L=this.lines.get(_);return L?L.translateToString(p,b,S):""}getWrappedRangeForLine(_){let p=_,b=_;for(;p>0&&this.lines.get(p).isWrapped;)p--;for(;b+1<this.lines.length&&this.lines.get(b+1).isWrapped;)b++;return{first:p,last:b}}setupTabStops(_){for(_!=null?this.tabs[_]||(_=this.prevStop(_)):(this.tabs={},_=0);_<this._cols;_+=this._optionsService.rawOptions.tabStopWidth)this.tabs[_]=!0}prevStop(_){for(_==null&&(_=this.x);!this.tabs[--_]&&_>0;);return _>=this._cols?this._cols-1:_<0?0:_}nextStop(_){for(_==null&&(_=this.x);!this.tabs[++_]&&_<this._cols;);return _>=this._cols?this._cols-1:_<0?0:_}clearMarkers(_){this._isClearing=!0;for(let p=0;p<this.markers.length;p++)this.markers[p].line===_&&(this.markers[p].dispose(),this.markers.splice(p--,1));this._isClearing=!1}clearAllMarkers(){this._isClearing=!0;for(let _=0;_<this.markers.length;_++)this.markers[_].dispose(),this.markers.splice(_--,1);this._isClearing=!1}addMarker(_){const p=new h.Marker(_);return this.markers.push(p),p.register(this.lines.onTrim(b=>{p.line-=b,p.line<0&&p.dispose()})),p.register(this.lines.onInsert(b=>{p.line>=b.index&&(p.line+=b.amount)})),p.register(this.lines.onDelete(b=>{p.line>=b.index&&p.line<b.index+b.amount&&p.dispose(),p.line>b.index&&(p.line-=b.amount)})),p.register(p.onDispose(()=>this._removeMarker(p))),p}_removeMarker(_){this._isClearing||this.markers.splice(this.markers.indexOf(_),1)}}},8437:(l,o,a)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.BufferLine=o.DEFAULT_ATTR_DATA=void 0;const c=a(3734),f=a(511),u=a(643),m=a(482);o.DEFAULT_ATTR_DATA=Object.freeze(new c.AttributeData);let v=0;class y{constructor(h,d,_=!1){this.isWrapped=_,this._combined={},this._extendedAttrs={},this._data=new Uint32Array(3*h);const p=d||f.CellData.fromCharData([0,u.NULL_CELL_CHAR,u.NULL_CELL_WIDTH,u.NULL_CELL_CODE]);for(let b=0;b<h;++b)this.setCell(b,p);this.length=h}get(h){const d=this._data[3*h+0],_=2097151&d;return[this._data[3*h+1],2097152&d?this._combined[h]:_?(0,m.stringFromCodePoint)(_):"",d>>22,2097152&d?this._combined[h].charCodeAt(this._combined[h].length-1):_]}set(h,d){this._data[3*h+1]=d[u.CHAR_DATA_ATTR_INDEX],d[u.CHAR_DATA_CHAR_INDEX].length>1?(this._combined[h]=d[1],this._data[3*h+0]=2097152|h|d[u.CHAR_DATA_WIDTH_INDEX]<<22):this._data[3*h+0]=d[u.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|d[u.CHAR_DATA_WIDTH_INDEX]<<22}getWidth(h){return this._data[3*h+0]>>22}hasWidth(h){return 12582912&this._data[3*h+0]}getFg(h){return this._data[3*h+1]}getBg(h){return this._data[3*h+2]}hasContent(h){return 4194303&this._data[3*h+0]}getCodePoint(h){const d=this._data[3*h+0];return 2097152&d?this._combined[h].charCodeAt(this._combined[h].length-1):2097151&d}isCombined(h){return 2097152&this._data[3*h+0]}getString(h){const d=this._data[3*h+0];return 2097152&d?this._combined[h]:2097151&d?(0,m.stringFromCodePoint)(2097151&d):""}isProtected(h){return 536870912&this._data[3*h+2]}loadCell(h,d){return v=3*h,d.content=this._data[v+0],d.fg=this._data[v+1],d.bg=this._data[v+2],2097152&d.content&&(d.combinedData=this._combined[h]),268435456&d.bg&&(d.extended=this._extendedAttrs[h]),d}setCell(h,d){2097152&d.content&&(this._combined[h]=d.combinedData),268435456&d.bg&&(this._extendedAttrs[h]=d.extended),this._data[3*h+0]=d.content,this._data[3*h+1]=d.fg,this._data[3*h+2]=d.bg}setCellFromCodePoint(h,d,_,p,b,S){268435456&b&&(this._extendedAttrs[h]=S),this._data[3*h+0]=d|_<<22,this._data[3*h+1]=p,this._data[3*h+2]=b}addCodepointToCell(h,d){let _=this._data[3*h+0];2097152&_?this._combined[h]+=(0,m.stringFromCodePoint)(d):(2097151&_?(this._combined[h]=(0,m.stringFromCodePoint)(2097151&_)+(0,m.stringFromCodePoint)(d),_&=-2097152,_|=2097152):_=d|4194304,this._data[3*h+0]=_)}insertCells(h,d,_,p){if((h%=this.length)&&this.getWidth(h-1)===2&&this.setCellFromCodePoint(h-1,0,1,(p==null?void 0:p.fg)||0,(p==null?void 0:p.bg)||0,(p==null?void 0:p.extended)||new c.ExtendedAttrs),d<this.length-h){const b=new f.CellData;for(let S=this.length-h-d-1;S>=0;--S)this.setCell(h+d+S,this.loadCell(h+S,b));for(let S=0;S<d;++S)this.setCell(h+S,_)}else for(let b=h;b<this.length;++b)this.setCell(b,_);this.getWidth(this.length-1)===2&&this.setCellFromCodePoint(this.length-1,0,1,(p==null?void 0:p.fg)||0,(p==null?void 0:p.bg)||0,(p==null?void 0:p.extended)||new c.ExtendedAttrs)}deleteCells(h,d,_,p){if(h%=this.length,d<this.length-h){const b=new f.CellData;for(let S=0;S<this.length-h-d;++S)this.setCell(h+S,this.loadCell(h+d+S,b));for(let S=this.length-d;S<this.length;++S)this.setCell(S,_)}else for(let b=h;b<this.length;++b)this.setCell(b,_);h&&this.getWidth(h-1)===2&&this.setCellFromCodePoint(h-1,0,1,(p==null?void 0:p.fg)||0,(p==null?void 0:p.bg)||0,(p==null?void 0:p.extended)||new c.ExtendedAttrs),this.getWidth(h)!==0||this.hasContent(h)||this.setCellFromCodePoint(h,0,1,(p==null?void 0:p.fg)||0,(p==null?void 0:p.bg)||0,(p==null?void 0:p.extended)||new c.ExtendedAttrs)}replaceCells(h,d,_,p,b=!1){if(b)for(h&&this.getWidth(h-1)===2&&!this.isProtected(h-1)&&this.setCellFromCodePoint(h-1,0,1,(p==null?void 0:p.fg)||0,(p==null?void 0:p.bg)||0,(p==null?void 0:p.extended)||new c.ExtendedAttrs),d<this.length&&this.getWidth(d-1)===2&&!this.isProtected(d)&&this.setCellFromCodePoint(d,0,1,(p==null?void 0:p.fg)||0,(p==null?void 0:p.bg)||0,(p==null?void 0:p.extended)||new c.ExtendedAttrs);h<d&&h<this.length;)this.isProtected(h)||this.setCell(h,_),h++;else for(h&&this.getWidth(h-1)===2&&this.setCellFromCodePoint(h-1,0,1,(p==null?void 0:p.fg)||0,(p==null?void 0:p.bg)||0,(p==null?void 0:p.extended)||new c.ExtendedAttrs),d<this.length&&this.getWidth(d-1)===2&&this.setCellFromCodePoint(d,0,1,(p==null?void 0:p.fg)||0,(p==null?void 0:p.bg)||0,(p==null?void 0:p.extended)||new c.ExtendedAttrs);h<d&&h<this.length;)this.setCell(h++,_)}resize(h,d){if(h===this.length)return 4*this._data.length*2<this._data.buffer.byteLength;const _=3*h;if(h>this.length){if(this._data.buffer.byteLength>=4*_)this._data=new Uint32Array(this._data.buffer,0,_);else{const p=new Uint32Array(_);p.set(this._data),this._data=p}for(let p=this.length;p<h;++p)this.setCell(p,d)}else{this._data=this._data.subarray(0,_);const p=Object.keys(this._combined);for(let S=0;S<p.length;S++){const L=parseInt(p[S],10);L>=h&&delete this._combined[L]}const b=Object.keys(this._extendedAttrs);for(let S=0;S<b.length;S++){const L=parseInt(b[S],10);L>=h&&delete this._extendedAttrs[L]}}return this.length=h,4*_*2<this._data.buffer.byteLength}cleanupMemory(){if(4*this._data.length*2<this._data.buffer.byteLength){const h=new Uint32Array(this._data.length);return h.set(this._data),this._data=h,1}return 0}fill(h,d=!1){if(d)for(let _=0;_<this.length;++_)this.isProtected(_)||this.setCell(_,h);else{this._combined={},this._extendedAttrs={};for(let _=0;_<this.length;++_)this.setCell(_,h)}}copyFrom(h){this.length!==h.length?this._data=new Uint32Array(h._data):this._data.set(h._data),this.length=h.length,this._combined={};for(const d in h._combined)this._combined[d]=h._combined[d];this._extendedAttrs={};for(const d in h._extendedAttrs)this._extendedAttrs[d]=h._extendedAttrs[d];this.isWrapped=h.isWrapped}clone(){const h=new y(0);h._data=new Uint32Array(this._data),h.length=this.length;for(const d in this._combined)h._combined[d]=this._combined[d];for(const d in this._extendedAttrs)h._extendedAttrs[d]=this._extendedAttrs[d];return h.isWrapped=this.isWrapped,h}getTrimmedLength(){for(let h=this.length-1;h>=0;--h)if(4194303&this._data[3*h+0])return h+(this._data[3*h+0]>>22);return 0}getNoBgTrimmedLength(){for(let h=this.length-1;h>=0;--h)if(4194303&this._data[3*h+0]||50331648&this._data[3*h+2])return h+(this._data[3*h+0]>>22);return 0}copyCellsFrom(h,d,_,p,b){const S=h._data;if(b)for(let k=p-1;k>=0;k--){for(let C=0;C<3;C++)this._data[3*(_+k)+C]=S[3*(d+k)+C];268435456&S[3*(d+k)+2]&&(this._extendedAttrs[_+k]=h._extendedAttrs[d+k])}else for(let k=0;k<p;k++){for(let C=0;C<3;C++)this._data[3*(_+k)+C]=S[3*(d+k)+C];268435456&S[3*(d+k)+2]&&(this._extendedAttrs[_+k]=h._extendedAttrs[d+k])}const L=Object.keys(h._combined);for(let k=0;k<L.length;k++){const C=parseInt(L[k],10);C>=d&&(this._combined[C-d+_]=h._combined[C])}}translateToString(h=!1,d=0,_=this.length){h&&(_=Math.min(_,this.getTrimmedLength()));let p="";for(;d<_;){const b=this._data[3*d+0],S=2097151&b;p+=2097152&b?this._combined[d]:S?(0,m.stringFromCodePoint)(S):u.WHITESPACE_CELL_CHAR,d+=b>>22||1}return p}}o.BufferLine=y},4841:(l,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.getRangeLength=void 0,o.getRangeLength=function(a,c){if(a.start.y>a.end.y)throw new Error(`Buffer range end (${a.end.x}, ${a.end.y}) cannot be before start (${a.start.x}, ${a.start.y})`);return c*(a.end.y-a.start.y)+(a.end.x-a.start.x+1)}},4634:(l,o)=>{function a(c,f,u){if(f===c.length-1)return c[f].getTrimmedLength();const m=!c[f].hasContent(u-1)&&c[f].getWidth(u-1)===1,v=c[f+1].getWidth(0)===2;return m&&v?u-1:u}Object.defineProperty(o,"__esModule",{value:!0}),o.getWrappedLineTrimmedLength=o.reflowSmallerGetNewLineLengths=o.reflowLargerApplyNewLayout=o.reflowLargerCreateNewLayout=o.reflowLargerGetLinesToRemove=void 0,o.reflowLargerGetLinesToRemove=function(c,f,u,m,v){const y=[];for(let g=0;g<c.length-1;g++){let h=g,d=c.get(++h);if(!d.isWrapped)continue;const _=[c.get(g)];for(;h<c.length&&d.isWrapped;)_.push(d),d=c.get(++h);if(m>=g&&m<h){g+=_.length-1;continue}let p=0,b=a(_,p,f),S=1,L=0;for(;S<_.length;){const C=a(_,S,f),w=C-L,E=u-b,A=Math.min(w,E);_[p].copyCellsFrom(_[S],L,b,A,!1),b+=A,b===u&&(p++,b=0),L+=A,L===C&&(S++,L=0),b===0&&p!==0&&_[p-1].getWidth(u-1)===2&&(_[p].copyCellsFrom(_[p-1],u-1,b++,1,!1),_[p-1].setCell(u-1,v))}_[p].replaceCells(b,u,v);let k=0;for(let C=_.length-1;C>0&&(C>p||_[C].getTrimmedLength()===0);C--)k++;k>0&&(y.push(g+_.length-k),y.push(k)),g+=_.length-1}return y},o.reflowLargerCreateNewLayout=function(c,f){const u=[];let m=0,v=f[m],y=0;for(let g=0;g<c.length;g++)if(v===g){const h=f[++m];c.onDeleteEmitter.fire({index:g-y,amount:h}),g+=h-1,y+=h,v=f[++m]}else u.push(g);return{layout:u,countRemoved:y}},o.reflowLargerApplyNewLayout=function(c,f){const u=[];for(let m=0;m<f.length;m++)u.push(c.get(f[m]));for(let m=0;m<u.length;m++)c.set(m,u[m]);c.length=f.length},o.reflowSmallerGetNewLineLengths=function(c,f,u){const m=[],v=c.map((d,_)=>a(c,_,f)).reduce((d,_)=>d+_);let y=0,g=0,h=0;for(;h<v;){if(v-h<u){m.push(v-h);break}y+=u;const d=a(c,g,f);y>d&&(y-=d,g++);const _=c[g].getWidth(y-1)===2;_&&y--;const p=_?u-1:u;m.push(p),h+=p}return m},o.getWrappedLineTrimmedLength=a},5295:(l,o,a)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.BufferSet=void 0;const c=a(8460),f=a(844),u=a(9092);class m extends f.Disposable{constructor(y,g){super(),this._optionsService=y,this._bufferService=g,this._onBufferActivate=this.register(new c.EventEmitter),this.onBufferActivate=this._onBufferActivate.event,this.reset(),this.register(this._optionsService.onSpecificOptionChange("scrollback",()=>this.resize(this._bufferService.cols,this._bufferService.rows))),this.register(this._optionsService.onSpecificOptionChange("tabStopWidth",()=>this.setupTabStops()))}reset(){this._normal=new u.Buffer(!0,this._optionsService,this._bufferService),this._normal.fillViewportRows(),this._alt=new u.Buffer(!1,this._optionsService,this._bufferService),this._activeBuffer=this._normal,this._onBufferActivate.fire({activeBuffer:this._normal,inactiveBuffer:this._alt}),this.setupTabStops()}get alt(){return this._alt}get active(){return this._activeBuffer}get normal(){return this._normal}activateNormalBuffer(){this._activeBuffer!==this._normal&&(this._normal.x=this._alt.x,this._normal.y=this._alt.y,this._alt.clearAllMarkers(),this._alt.clear(),this._activeBuffer=this._normal,this._onBufferActivate.fire({activeBuffer:this._normal,inactiveBuffer:this._alt}))}activateAltBuffer(y){this._activeBuffer!==this._alt&&(this._alt.fillViewportRows(y),this._alt.x=this._normal.x,this._alt.y=this._normal.y,this._activeBuffer=this._alt,this._onBufferActivate.fire({activeBuffer:this._alt,inactiveBuffer:this._normal}))}resize(y,g){this._normal.resize(y,g),this._alt.resize(y,g),this.setupTabStops(y)}setupTabStops(y){this._normal.setupTabStops(y),this._alt.setupTabStops(y)}}o.BufferSet=m},511:(l,o,a)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.CellData=void 0;const c=a(482),f=a(643),u=a(3734);class m extends u.AttributeData{constructor(){super(...arguments),this.content=0,this.fg=0,this.bg=0,this.extended=new u.ExtendedAttrs,this.combinedData=""}static fromCharData(y){const g=new m;return g.setFromCharData(y),g}isCombined(){return 2097152&this.content}getWidth(){return this.content>>22}getChars(){return 2097152&this.content?this.combinedData:2097151&this.content?(0,c.stringFromCodePoint)(2097151&this.content):""}getCode(){return this.isCombined()?this.combinedData.charCodeAt(this.combinedData.length-1):2097151&this.content}setFromCharData(y){this.fg=y[f.CHAR_DATA_ATTR_INDEX],this.bg=0;let g=!1;if(y[f.CHAR_DATA_CHAR_INDEX].length>2)g=!0;else if(y[f.CHAR_DATA_CHAR_INDEX].length===2){const h=y[f.CHAR_DATA_CHAR_INDEX].charCodeAt(0);if(55296<=h&&h<=56319){const d=y[f.CHAR_DATA_CHAR_INDEX].charCodeAt(1);56320<=d&&d<=57343?this.content=1024*(h-55296)+d-56320+65536|y[f.CHAR_DATA_WIDTH_INDEX]<<22:g=!0}else g=!0}else this.content=y[f.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|y[f.CHAR_DATA_WIDTH_INDEX]<<22;g&&(this.combinedData=y[f.CHAR_DATA_CHAR_INDEX],this.content=2097152|y[f.CHAR_DATA_WIDTH_INDEX]<<22)}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}}o.CellData=m},643:(l,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.WHITESPACE_CELL_CODE=o.WHITESPACE_CELL_WIDTH=o.WHITESPACE_CELL_CHAR=o.NULL_CELL_CODE=o.NULL_CELL_WIDTH=o.NULL_CELL_CHAR=o.CHAR_DATA_CODE_INDEX=o.CHAR_DATA_WIDTH_INDEX=o.CHAR_DATA_CHAR_INDEX=o.CHAR_DATA_ATTR_INDEX=o.DEFAULT_EXT=o.DEFAULT_ATTR=o.DEFAULT_COLOR=void 0,o.DEFAULT_COLOR=0,o.DEFAULT_ATTR=256|o.DEFAULT_COLOR<<9,o.DEFAULT_EXT=0,o.CHAR_DATA_ATTR_INDEX=0,o.CHAR_DATA_CHAR_INDEX=1,o.CHAR_DATA_WIDTH_INDEX=2,o.CHAR_DATA_CODE_INDEX=3,o.NULL_CELL_CHAR="",o.NULL_CELL_WIDTH=1,o.NULL_CELL_CODE=0,o.WHITESPACE_CELL_CHAR=" ",o.WHITESPACE_CELL_WIDTH=1,o.WHITESPACE_CELL_CODE=32},4863:(l,o,a)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.Marker=void 0;const c=a(8460),f=a(844);class u{get id(){return this._id}constructor(v){this.line=v,this.isDisposed=!1,this._disposables=[],this._id=u._nextId++,this._onDispose=this.register(new c.EventEmitter),this.onDispose=this._onDispose.event}dispose(){this.isDisposed||(this.isDisposed=!0,this.line=-1,this._onDispose.fire(),(0,f.disposeArray)(this._disposables),this._disposables.length=0)}register(v){return this._disposables.push(v),v}}o.Marker=u,u._nextId=1},7116:(l,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.DEFAULT_CHARSET=o.CHARSETS=void 0,o.CHARSETS={},o.DEFAULT_CHARSET=o.CHARSETS.B,o.CHARSETS[0]={"`":"◆",a:"▒",b:"␉",c:"␌",d:"␍",e:"␊",f:"°",g:"±",h:"␤",i:"␋",j:"┘",k:"┐",l:"┌",m:"└",n:"┼",o:"⎺",p:"⎻",q:"─",r:"⎼",s:"⎽",t:"├",u:"┤",v:"┴",w:"┬",x:"│",y:"≤",z:"≥","{":"π","|":"≠","}":"£","~":"·"},o.CHARSETS.A={"#":"£"},o.CHARSETS.B=void 0,o.CHARSETS[4]={"#":"£","@":"¾","[":"ij","\\":"½","]":"|","{":"¨","|":"f","}":"¼","~":"´"},o.CHARSETS.C=o.CHARSETS[5]={"[":"Ä","\\":"Ö","]":"Å","^":"Ü","`":"é","{":"ä","|":"ö","}":"å","~":"ü"},o.CHARSETS.R={"#":"£","@":"à","[":"°","\\":"ç","]":"§","{":"é","|":"ù","}":"è","~":"¨"},o.CHARSETS.Q={"@":"à","[":"â","\\":"ç","]":"ê","^":"î","`":"ô","{":"é","|":"ù","}":"è","~":"û"},o.CHARSETS.K={"@":"§","[":"Ä","\\":"Ö","]":"Ü","{":"ä","|":"ö","}":"ü","~":"ß"},o.CHARSETS.Y={"#":"£","@":"§","[":"°","\\":"ç","]":"é","`":"ù","{":"à","|":"ò","}":"è","~":"ì"},o.CHARSETS.E=o.CHARSETS[6]={"@":"Ä","[":"Æ","\\":"Ø","]":"Å","^":"Ü","`":"ä","{":"æ","|":"ø","}":"å","~":"ü"},o.CHARSETS.Z={"#":"£","@":"§","[":"¡","\\":"Ñ","]":"¿","{":"°","|":"ñ","}":"ç"},o.CHARSETS.H=o.CHARSETS[7]={"@":"É","[":"Ä","\\":"Ö","]":"Å","^":"Ü","`":"é","{":"ä","|":"ö","}":"å","~":"ü"},o.CHARSETS["="]={"#":"ù","@":"à","[":"é","\\":"ç","]":"ê","^":"î",_:"è","`":"ô","{":"ä","|":"ö","}":"ü","~":"û"}},2584:(l,o)=>{var a,c,f;Object.defineProperty(o,"__esModule",{value:!0}),o.C1_ESCAPED=o.C1=o.C0=void 0,function(u){u.NUL="\0",u.SOH="",u.STX="",u.ETX="",u.EOT="",u.ENQ="",u.ACK="",u.BEL="\x07",u.BS="\b",u.HT="	",u.LF=`
`,u.VT="\v",u.FF="\f",u.CR="\r",u.SO="",u.SI="",u.DLE="",u.DC1="",u.DC2="",u.DC3="",u.DC4="",u.NAK="",u.SYN="",u.ETB="",u.CAN="",u.EM="",u.SUB="",u.ESC="\x1B",u.FS="",u.GS="",u.RS="",u.US="",u.SP=" ",u.DEL=""}(a||(o.C0=a={})),function(u){u.PAD="",u.HOP="",u.BPH="",u.NBH="",u.IND="",u.NEL="",u.SSA="",u.ESA="",u.HTS="",u.HTJ="",u.VTS="",u.PLD="",u.PLU="",u.RI="",u.SS2="",u.SS3="",u.DCS="",u.PU1="",u.PU2="",u.STS="",u.CCH="",u.MW="",u.SPA="",u.EPA="",u.SOS="",u.SGCI="",u.SCI="",u.CSI="",u.ST="",u.OSC="",u.PM="",u.APC=""}(c||(o.C1=c={})),function(u){u.ST=`${a.ESC}\\`}(f||(o.C1_ESCAPED=f={}))},7399:(l,o,a)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.evaluateKeyboardEvent=void 0;const c=a(2584),f={48:["0",")"],49:["1","!"],50:["2","@"],51:["3","#"],52:["4","$"],53:["5","%"],54:["6","^"],55:["7","&"],56:["8","*"],57:["9","("],186:[";",":"],187:["=","+"],188:[",","<"],189:["-","_"],190:[".",">"],191:["/","?"],192:["`","~"],219:["[","{"],220:["\\","|"],221:["]","}"],222:["'",'"']};o.evaluateKeyboardEvent=function(u,m,v,y){const g={type:0,cancel:!1,key:void 0},h=(u.shiftKey?1:0)|(u.altKey?2:0)|(u.ctrlKey?4:0)|(u.metaKey?8:0);switch(u.keyCode){case 0:u.key==="UIKeyInputUpArrow"?g.key=m?c.C0.ESC+"OA":c.C0.ESC+"[A":u.key==="UIKeyInputLeftArrow"?g.key=m?c.C0.ESC+"OD":c.C0.ESC+"[D":u.key==="UIKeyInputRightArrow"?g.key=m?c.C0.ESC+"OC":c.C0.ESC+"[C":u.key==="UIKeyInputDownArrow"&&(g.key=m?c.C0.ESC+"OB":c.C0.ESC+"[B");break;case 8:if(u.altKey){g.key=c.C0.ESC+c.C0.DEL;break}g.key=c.C0.DEL;break;case 9:if(u.shiftKey){g.key=c.C0.ESC+"[Z";break}g.key=c.C0.HT,g.cancel=!0;break;case 13:g.key=u.altKey?c.C0.ESC+c.C0.CR:c.C0.CR,g.cancel=!0;break;case 27:g.key=c.C0.ESC,u.altKey&&(g.key=c.C0.ESC+c.C0.ESC),g.cancel=!0;break;case 37:if(u.metaKey)break;h?(g.key=c.C0.ESC+"[1;"+(h+1)+"D",g.key===c.C0.ESC+"[1;3D"&&(g.key=c.C0.ESC+(v?"b":"[1;5D"))):g.key=m?c.C0.ESC+"OD":c.C0.ESC+"[D";break;case 39:if(u.metaKey)break;h?(g.key=c.C0.ESC+"[1;"+(h+1)+"C",g.key===c.C0.ESC+"[1;3C"&&(g.key=c.C0.ESC+(v?"f":"[1;5C"))):g.key=m?c.C0.ESC+"OC":c.C0.ESC+"[C";break;case 38:if(u.metaKey)break;h?(g.key=c.C0.ESC+"[1;"+(h+1)+"A",v||g.key!==c.C0.ESC+"[1;3A"||(g.key=c.C0.ESC+"[1;5A")):g.key=m?c.C0.ESC+"OA":c.C0.ESC+"[A";break;case 40:if(u.metaKey)break;h?(g.key=c.C0.ESC+"[1;"+(h+1)+"B",v||g.key!==c.C0.ESC+"[1;3B"||(g.key=c.C0.ESC+"[1;5B")):g.key=m?c.C0.ESC+"OB":c.C0.ESC+"[B";break;case 45:u.shiftKey||u.ctrlKey||(g.key=c.C0.ESC+"[2~");break;case 46:g.key=h?c.C0.ESC+"[3;"+(h+1)+"~":c.C0.ESC+"[3~";break;case 36:g.key=h?c.C0.ESC+"[1;"+(h+1)+"H":m?c.C0.ESC+"OH":c.C0.ESC+"[H";break;case 35:g.key=h?c.C0.ESC+"[1;"+(h+1)+"F":m?c.C0.ESC+"OF":c.C0.ESC+"[F";break;case 33:u.shiftKey?g.type=2:u.ctrlKey?g.key=c.C0.ESC+"[5;"+(h+1)+"~":g.key=c.C0.ESC+"[5~";break;case 34:u.shiftKey?g.type=3:u.ctrlKey?g.key=c.C0.ESC+"[6;"+(h+1)+"~":g.key=c.C0.ESC+"[6~";break;case 112:g.key=h?c.C0.ESC+"[1;"+(h+1)+"P":c.C0.ESC+"OP";break;case 113:g.key=h?c.C0.ESC+"[1;"+(h+1)+"Q":c.C0.ESC+"OQ";break;case 114:g.key=h?c.C0.ESC+"[1;"+(h+1)+"R":c.C0.ESC+"OR";break;case 115:g.key=h?c.C0.ESC+"[1;"+(h+1)+"S":c.C0.ESC+"OS";break;case 116:g.key=h?c.C0.ESC+"[15;"+(h+1)+"~":c.C0.ESC+"[15~";break;case 117:g.key=h?c.C0.ESC+"[17;"+(h+1)+"~":c.C0.ESC+"[17~";break;case 118:g.key=h?c.C0.ESC+"[18;"+(h+1)+"~":c.C0.ESC+"[18~";break;case 119:g.key=h?c.C0.ESC+"[19;"+(h+1)+"~":c.C0.ESC+"[19~";break;case 120:g.key=h?c.C0.ESC+"[20;"+(h+1)+"~":c.C0.ESC+"[20~";break;case 121:g.key=h?c.C0.ESC+"[21;"+(h+1)+"~":c.C0.ESC+"[21~";break;case 122:g.key=h?c.C0.ESC+"[23;"+(h+1)+"~":c.C0.ESC+"[23~";break;case 123:g.key=h?c.C0.ESC+"[24;"+(h+1)+"~":c.C0.ESC+"[24~";break;default:if(!u.ctrlKey||u.shiftKey||u.altKey||u.metaKey)if(v&&!y||!u.altKey||u.metaKey)!v||u.altKey||u.ctrlKey||u.shiftKey||!u.metaKey?u.key&&!u.ctrlKey&&!u.altKey&&!u.metaKey&&u.keyCode>=48&&u.key.length===1?g.key=u.key:u.key&&u.ctrlKey&&(u.key==="_"&&(g.key=c.C0.US),u.key==="@"&&(g.key=c.C0.NUL)):u.keyCode===65&&(g.type=1);else{const d=f[u.keyCode],_=d==null?void 0:d[u.shiftKey?1:0];if(_)g.key=c.C0.ESC+_;else if(u.keyCode>=65&&u.keyCode<=90){const p=u.ctrlKey?u.keyCode-64:u.keyCode+32;let b=String.fromCharCode(p);u.shiftKey&&(b=b.toUpperCase()),g.key=c.C0.ESC+b}else if(u.keyCode===32)g.key=c.C0.ESC+(u.ctrlKey?c.C0.NUL:" ");else if(u.key==="Dead"&&u.code.startsWith("Key")){let p=u.code.slice(3,4);u.shiftKey||(p=p.toLowerCase()),g.key=c.C0.ESC+p,g.cancel=!0}}else u.keyCode>=65&&u.keyCode<=90?g.key=String.fromCharCode(u.keyCode-64):u.keyCode===32?g.key=c.C0.NUL:u.keyCode>=51&&u.keyCode<=55?g.key=String.fromCharCode(u.keyCode-51+27):u.keyCode===56?g.key=c.C0.DEL:u.keyCode===219?g.key=c.C0.ESC:u.keyCode===220?g.key=c.C0.FS:u.keyCode===221&&(g.key=c.C0.GS)}return g}},482:(l,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.Utf8ToUtf32=o.StringToUtf32=o.utf32ToString=o.stringFromCodePoint=void 0,o.stringFromCodePoint=function(a){return a>65535?(a-=65536,String.fromCharCode(55296+(a>>10))+String.fromCharCode(a%1024+56320)):String.fromCharCode(a)},o.utf32ToString=function(a,c=0,f=a.length){let u="";for(let m=c;m<f;++m){let v=a[m];v>65535?(v-=65536,u+=String.fromCharCode(55296+(v>>10))+String.fromCharCode(v%1024+56320)):u+=String.fromCharCode(v)}return u},o.StringToUtf32=class{constructor(){this._interim=0}clear(){this._interim=0}decode(a,c){const f=a.length;if(!f)return 0;let u=0,m=0;if(this._interim){const v=a.charCodeAt(m++);56320<=v&&v<=57343?c[u++]=1024*(this._interim-55296)+v-56320+65536:(c[u++]=this._interim,c[u++]=v),this._interim=0}for(let v=m;v<f;++v){const y=a.charCodeAt(v);if(55296<=y&&y<=56319){if(++v>=f)return this._interim=y,u;const g=a.charCodeAt(v);56320<=g&&g<=57343?c[u++]=1024*(y-55296)+g-56320+65536:(c[u++]=y,c[u++]=g)}else y!==65279&&(c[u++]=y)}return u}},o.Utf8ToUtf32=class{constructor(){this.interim=new Uint8Array(3)}clear(){this.interim.fill(0)}decode(a,c){const f=a.length;if(!f)return 0;let u,m,v,y,g=0,h=0,d=0;if(this.interim[0]){let b=!1,S=this.interim[0];S&=(224&S)==192?31:(240&S)==224?15:7;let L,k=0;for(;(L=63&this.interim[++k])&&k<4;)S<<=6,S|=L;const C=(224&this.interim[0])==192?2:(240&this.interim[0])==224?3:4,w=C-k;for(;d<w;){if(d>=f)return 0;if(L=a[d++],(192&L)!=128){d--,b=!0;break}this.interim[k++]=L,S<<=6,S|=63&L}b||(C===2?S<128?d--:c[g++]=S:C===3?S<2048||S>=55296&&S<=57343||S===65279||(c[g++]=S):S<65536||S>1114111||(c[g++]=S)),this.interim.fill(0)}const _=f-4;let p=d;for(;p<f;){for(;!(!(p<_)||128&(u=a[p])||128&(m=a[p+1])||128&(v=a[p+2])||128&(y=a[p+3]));)c[g++]=u,c[g++]=m,c[g++]=v,c[g++]=y,p+=4;if(u=a[p++],u<128)c[g++]=u;else if((224&u)==192){if(p>=f)return this.interim[0]=u,g;if(m=a[p++],(192&m)!=128){p--;continue}if(h=(31&u)<<6|63&m,h<128){p--;continue}c[g++]=h}else if((240&u)==224){if(p>=f)return this.interim[0]=u,g;if(m=a[p++],(192&m)!=128){p--;continue}if(p>=f)return this.interim[0]=u,this.interim[1]=m,g;if(v=a[p++],(192&v)!=128){p--;continue}if(h=(15&u)<<12|(63&m)<<6|63&v,h<2048||h>=55296&&h<=57343||h===65279)continue;c[g++]=h}else if((248&u)==240){if(p>=f)return this.interim[0]=u,g;if(m=a[p++],(192&m)!=128){p--;continue}if(p>=f)return this.interim[0]=u,this.interim[1]=m,g;if(v=a[p++],(192&v)!=128){p--;continue}if(p>=f)return this.interim[0]=u,this.interim[1]=m,this.interim[2]=v,g;if(y=a[p++],(192&y)!=128){p--;continue}if(h=(7&u)<<18|(63&m)<<12|(63&v)<<6|63&y,h<65536||h>1114111)continue;c[g++]=h}}return g}}},225:(l,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.UnicodeV6=void 0;const a=[[768,879],[1155,1158],[1160,1161],[1425,1469],[1471,1471],[1473,1474],[1476,1477],[1479,1479],[1536,1539],[1552,1557],[1611,1630],[1648,1648],[1750,1764],[1767,1768],[1770,1773],[1807,1807],[1809,1809],[1840,1866],[1958,1968],[2027,2035],[2305,2306],[2364,2364],[2369,2376],[2381,2381],[2385,2388],[2402,2403],[2433,2433],[2492,2492],[2497,2500],[2509,2509],[2530,2531],[2561,2562],[2620,2620],[2625,2626],[2631,2632],[2635,2637],[2672,2673],[2689,2690],[2748,2748],[2753,2757],[2759,2760],[2765,2765],[2786,2787],[2817,2817],[2876,2876],[2879,2879],[2881,2883],[2893,2893],[2902,2902],[2946,2946],[3008,3008],[3021,3021],[3134,3136],[3142,3144],[3146,3149],[3157,3158],[3260,3260],[3263,3263],[3270,3270],[3276,3277],[3298,3299],[3393,3395],[3405,3405],[3530,3530],[3538,3540],[3542,3542],[3633,3633],[3636,3642],[3655,3662],[3761,3761],[3764,3769],[3771,3772],[3784,3789],[3864,3865],[3893,3893],[3895,3895],[3897,3897],[3953,3966],[3968,3972],[3974,3975],[3984,3991],[3993,4028],[4038,4038],[4141,4144],[4146,4146],[4150,4151],[4153,4153],[4184,4185],[4448,4607],[4959,4959],[5906,5908],[5938,5940],[5970,5971],[6002,6003],[6068,6069],[6071,6077],[6086,6086],[6089,6099],[6109,6109],[6155,6157],[6313,6313],[6432,6434],[6439,6440],[6450,6450],[6457,6459],[6679,6680],[6912,6915],[6964,6964],[6966,6970],[6972,6972],[6978,6978],[7019,7027],[7616,7626],[7678,7679],[8203,8207],[8234,8238],[8288,8291],[8298,8303],[8400,8431],[12330,12335],[12441,12442],[43014,43014],[43019,43019],[43045,43046],[64286,64286],[65024,65039],[65056,65059],[65279,65279],[65529,65531]],c=[[68097,68099],[68101,68102],[68108,68111],[68152,68154],[68159,68159],[119143,119145],[119155,119170],[119173,119179],[119210,119213],[119362,119364],[917505,917505],[917536,917631],[917760,917999]];let f;o.UnicodeV6=class{constructor(){if(this.version="6",!f){f=new Uint8Array(65536),f.fill(1),f[0]=0,f.fill(0,1,32),f.fill(0,127,160),f.fill(2,4352,4448),f[9001]=2,f[9002]=2,f.fill(2,11904,42192),f[12351]=1,f.fill(2,44032,55204),f.fill(2,63744,64256),f.fill(2,65040,65050),f.fill(2,65072,65136),f.fill(2,65280,65377),f.fill(2,65504,65511);for(let u=0;u<a.length;++u)f.fill(0,a[u][0],a[u][1]+1)}}wcwidth(u){return u<32?0:u<127?1:u<65536?f[u]:function(m,v){let y,g=0,h=v.length-1;if(m<v[0][0]||m>v[h][1])return!1;for(;h>=g;)if(y=g+h>>1,m>v[y][1])g=y+1;else{if(!(m<v[y][0]))return!0;h=y-1}return!1}(u,c)?0:u>=131072&&u<=196605||u>=196608&&u<=262141?2:1}}},5981:(l,o,a)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.WriteBuffer=void 0;const c=a(8460),f=a(844);class u extends f.Disposable{constructor(v){super(),this._action=v,this._writeBuffer=[],this._callbacks=[],this._pendingData=0,this._bufferOffset=0,this._isSyncWriting=!1,this._syncCalls=0,this._didUserInput=!1,this._onWriteParsed=this.register(new c.EventEmitter),this.onWriteParsed=this._onWriteParsed.event}handleUserInput(){this._didUserInput=!0}writeSync(v,y){if(y!==void 0&&this._syncCalls>y)return void(this._syncCalls=0);if(this._pendingData+=v.length,this._writeBuffer.push(v),this._callbacks.push(void 0),this._syncCalls++,this._isSyncWriting)return;let g;for(this._isSyncWriting=!0;g=this._writeBuffer.shift();){this._action(g);const h=this._callbacks.shift();h&&h()}this._pendingData=0,this._bufferOffset=2147483647,this._isSyncWriting=!1,this._syncCalls=0}write(v,y){if(this._pendingData>5e7)throw new Error("write data discarded, use flow control to avoid losing data");if(!this._writeBuffer.length){if(this._bufferOffset=0,this._didUserInput)return this._didUserInput=!1,this._pendingData+=v.length,this._writeBuffer.push(v),this._callbacks.push(y),void this._innerWrite();setTimeout(()=>this._innerWrite())}this._pendingData+=v.length,this._writeBuffer.push(v),this._callbacks.push(y)}_innerWrite(v=0,y=!0){const g=v||Date.now();for(;this._writeBuffer.length>this._bufferOffset;){const h=this._writeBuffer[this._bufferOffset],d=this._action(h,y);if(d){const p=b=>Date.now()-g>=12?setTimeout(()=>this._innerWrite(0,b)):this._innerWrite(g,b);return void d.catch(b=>(queueMicrotask(()=>{throw b}),Promise.resolve(!1))).then(p)}const _=this._callbacks[this._bufferOffset];if(_&&_(),this._bufferOffset++,this._pendingData-=h.length,Date.now()-g>=12)break}this._writeBuffer.length>this._bufferOffset?(this._bufferOffset>50&&(this._writeBuffer=this._writeBuffer.slice(this._bufferOffset),this._callbacks=this._callbacks.slice(this._bufferOffset),this._bufferOffset=0),setTimeout(()=>this._innerWrite())):(this._writeBuffer.length=0,this._callbacks.length=0,this._pendingData=0,this._bufferOffset=0),this._onWriteParsed.fire()}}o.WriteBuffer=u},5941:(l,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.toRgbString=o.parseColor=void 0;const a=/^([\da-f])\/([\da-f])\/([\da-f])$|^([\da-f]{2})\/([\da-f]{2})\/([\da-f]{2})$|^([\da-f]{3})\/([\da-f]{3})\/([\da-f]{3})$|^([\da-f]{4})\/([\da-f]{4})\/([\da-f]{4})$/,c=/^[\da-f]+$/;function f(u,m){const v=u.toString(16),y=v.length<2?"0"+v:v;switch(m){case 4:return v[0];case 8:return y;case 12:return(y+y).slice(0,3);default:return y+y}}o.parseColor=function(u){if(!u)return;let m=u.toLowerCase();if(m.indexOf("rgb:")===0){m=m.slice(4);const v=a.exec(m);if(v){const y=v[1]?15:v[4]?255:v[7]?4095:65535;return[Math.round(parseInt(v[1]||v[4]||v[7]||v[10],16)/y*255),Math.round(parseInt(v[2]||v[5]||v[8]||v[11],16)/y*255),Math.round(parseInt(v[3]||v[6]||v[9]||v[12],16)/y*255)]}}else if(m.indexOf("#")===0&&(m=m.slice(1),c.exec(m)&&[3,6,9,12].includes(m.length))){const v=m.length/3,y=[0,0,0];for(let g=0;g<3;++g){const h=parseInt(m.slice(v*g,v*g+v),16);y[g]=v===1?h<<4:v===2?h:v===3?h>>4:h>>8}return y}},o.toRgbString=function(u,m=16){const[v,y,g]=u;return`rgb:${f(v,m)}/${f(y,m)}/${f(g,m)}`}},5770:(l,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.PAYLOAD_LIMIT=void 0,o.PAYLOAD_LIMIT=1e7},6351:(l,o,a)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.DcsHandler=o.DcsParser=void 0;const c=a(482),f=a(8742),u=a(5770),m=[];o.DcsParser=class{constructor(){this._handlers=Object.create(null),this._active=m,this._ident=0,this._handlerFb=()=>{},this._stack={paused:!1,loopPosition:0,fallThrough:!1}}dispose(){this._handlers=Object.create(null),this._handlerFb=()=>{},this._active=m}registerHandler(y,g){this._handlers[y]===void 0&&(this._handlers[y]=[]);const h=this._handlers[y];return h.push(g),{dispose:()=>{const d=h.indexOf(g);d!==-1&&h.splice(d,1)}}}clearHandler(y){this._handlers[y]&&delete this._handlers[y]}setHandlerFallback(y){this._handlerFb=y}reset(){if(this._active.length)for(let y=this._stack.paused?this._stack.loopPosition-1:this._active.length-1;y>=0;--y)this._active[y].unhook(!1);this._stack.paused=!1,this._active=m,this._ident=0}hook(y,g){if(this.reset(),this._ident=y,this._active=this._handlers[y]||m,this._active.length)for(let h=this._active.length-1;h>=0;h--)this._active[h].hook(g);else this._handlerFb(this._ident,"HOOK",g)}put(y,g,h){if(this._active.length)for(let d=this._active.length-1;d>=0;d--)this._active[d].put(y,g,h);else this._handlerFb(this._ident,"PUT",(0,c.utf32ToString)(y,g,h))}unhook(y,g=!0){if(this._active.length){let h=!1,d=this._active.length-1,_=!1;if(this._stack.paused&&(d=this._stack.loopPosition-1,h=g,_=this._stack.fallThrough,this._stack.paused=!1),!_&&h===!1){for(;d>=0&&(h=this._active[d].unhook(y),h!==!0);d--)if(h instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=d,this._stack.fallThrough=!1,h;d--}for(;d>=0;d--)if(h=this._active[d].unhook(!1),h instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=d,this._stack.fallThrough=!0,h}else this._handlerFb(this._ident,"UNHOOK",y);this._active=m,this._ident=0}};const v=new f.Params;v.addParam(0),o.DcsHandler=class{constructor(y){this._handler=y,this._data="",this._params=v,this._hitLimit=!1}hook(y){this._params=y.length>1||y.params[0]?y.clone():v,this._data="",this._hitLimit=!1}put(y,g,h){this._hitLimit||(this._data+=(0,c.utf32ToString)(y,g,h),this._data.length>u.PAYLOAD_LIMIT&&(this._data="",this._hitLimit=!0))}unhook(y){let g=!1;if(this._hitLimit)g=!1;else if(y&&(g=this._handler(this._data,this._params),g instanceof Promise))return g.then(h=>(this._params=v,this._data="",this._hitLimit=!1,h));return this._params=v,this._data="",this._hitLimit=!1,g}}},2015:(l,o,a)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.EscapeSequenceParser=o.VT500_TRANSITION_TABLE=o.TransitionTable=void 0;const c=a(844),f=a(8742),u=a(6242),m=a(6351);class v{constructor(d){this.table=new Uint8Array(d)}setDefault(d,_){this.table.fill(d<<4|_)}add(d,_,p,b){this.table[_<<8|d]=p<<4|b}addMany(d,_,p,b){for(let S=0;S<d.length;S++)this.table[_<<8|d[S]]=p<<4|b}}o.TransitionTable=v;const y=160;o.VT500_TRANSITION_TABLE=function(){const h=new v(4095),d=Array.apply(null,Array(256)).map((k,C)=>C),_=(k,C)=>d.slice(k,C),p=_(32,127),b=_(0,24);b.push(25),b.push.apply(b,_(28,32));const S=_(0,14);let L;for(L in h.setDefault(1,0),h.addMany(p,0,2,0),S)h.addMany([24,26,153,154],L,3,0),h.addMany(_(128,144),L,3,0),h.addMany(_(144,152),L,3,0),h.add(156,L,0,0),h.add(27,L,11,1),h.add(157,L,4,8),h.addMany([152,158,159],L,0,7),h.add(155,L,11,3),h.add(144,L,11,9);return h.addMany(b,0,3,0),h.addMany(b,1,3,1),h.add(127,1,0,1),h.addMany(b,8,0,8),h.addMany(b,3,3,3),h.add(127,3,0,3),h.addMany(b,4,3,4),h.add(127,4,0,4),h.addMany(b,6,3,6),h.addMany(b,5,3,5),h.add(127,5,0,5),h.addMany(b,2,3,2),h.add(127,2,0,2),h.add(93,1,4,8),h.addMany(p,8,5,8),h.add(127,8,5,8),h.addMany([156,27,24,26,7],8,6,0),h.addMany(_(28,32),8,0,8),h.addMany([88,94,95],1,0,7),h.addMany(p,7,0,7),h.addMany(b,7,0,7),h.add(156,7,0,0),h.add(127,7,0,7),h.add(91,1,11,3),h.addMany(_(64,127),3,7,0),h.addMany(_(48,60),3,8,4),h.addMany([60,61,62,63],3,9,4),h.addMany(_(48,60),4,8,4),h.addMany(_(64,127),4,7,0),h.addMany([60,61,62,63],4,0,6),h.addMany(_(32,64),6,0,6),h.add(127,6,0,6),h.addMany(_(64,127),6,0,0),h.addMany(_(32,48),3,9,5),h.addMany(_(32,48),5,9,5),h.addMany(_(48,64),5,0,6),h.addMany(_(64,127),5,7,0),h.addMany(_(32,48),4,9,5),h.addMany(_(32,48),1,9,2),h.addMany(_(32,48),2,9,2),h.addMany(_(48,127),2,10,0),h.addMany(_(48,80),1,10,0),h.addMany(_(81,88),1,10,0),h.addMany([89,90,92],1,10,0),h.addMany(_(96,127),1,10,0),h.add(80,1,11,9),h.addMany(b,9,0,9),h.add(127,9,0,9),h.addMany(_(28,32),9,0,9),h.addMany(_(32,48),9,9,12),h.addMany(_(48,60),9,8,10),h.addMany([60,61,62,63],9,9,10),h.addMany(b,11,0,11),h.addMany(_(32,128),11,0,11),h.addMany(_(28,32),11,0,11),h.addMany(b,10,0,10),h.add(127,10,0,10),h.addMany(_(28,32),10,0,10),h.addMany(_(48,60),10,8,10),h.addMany([60,61,62,63],10,0,11),h.addMany(_(32,48),10,9,12),h.addMany(b,12,0,12),h.add(127,12,0,12),h.addMany(_(28,32),12,0,12),h.addMany(_(32,48),12,9,12),h.addMany(_(48,64),12,0,11),h.addMany(_(64,127),12,12,13),h.addMany(_(64,127),10,12,13),h.addMany(_(64,127),9,12,13),h.addMany(b,13,13,13),h.addMany(p,13,13,13),h.add(127,13,0,13),h.addMany([27,156,24,26],13,14,0),h.add(y,0,2,0),h.add(y,8,5,8),h.add(y,6,0,6),h.add(y,11,0,11),h.add(y,13,13,13),h}();class g extends c.Disposable{constructor(d=o.VT500_TRANSITION_TABLE){super(),this._transitions=d,this._parseStack={state:0,handlers:[],handlerPos:0,transition:0,chunkPos:0},this.initialState=0,this.currentState=this.initialState,this._params=new f.Params,this._params.addParam(0),this._collect=0,this.precedingCodepoint=0,this._printHandlerFb=(_,p,b)=>{},this._executeHandlerFb=_=>{},this._csiHandlerFb=(_,p)=>{},this._escHandlerFb=_=>{},this._errorHandlerFb=_=>_,this._printHandler=this._printHandlerFb,this._executeHandlers=Object.create(null),this._csiHandlers=Object.create(null),this._escHandlers=Object.create(null),this.register((0,c.toDisposable)(()=>{this._csiHandlers=Object.create(null),this._executeHandlers=Object.create(null),this._escHandlers=Object.create(null)})),this._oscParser=this.register(new u.OscParser),this._dcsParser=this.register(new m.DcsParser),this._errorHandler=this._errorHandlerFb,this.registerEscHandler({final:"\\"},()=>!0)}_identifier(d,_=[64,126]){let p=0;if(d.prefix){if(d.prefix.length>1)throw new Error("only one byte as prefix supported");if(p=d.prefix.charCodeAt(0),p&&60>p||p>63)throw new Error("prefix must be in range 0x3c .. 0x3f")}if(d.intermediates){if(d.intermediates.length>2)throw new Error("only two bytes as intermediates are supported");for(let S=0;S<d.intermediates.length;++S){const L=d.intermediates.charCodeAt(S);if(32>L||L>47)throw new Error("intermediate must be in range 0x20 .. 0x2f");p<<=8,p|=L}}if(d.final.length!==1)throw new Error("final must be a single byte");const b=d.final.charCodeAt(0);if(_[0]>b||b>_[1])throw new Error(`final must be in range ${_[0]} .. ${_[1]}`);return p<<=8,p|=b,p}identToString(d){const _=[];for(;d;)_.push(String.fromCharCode(255&d)),d>>=8;return _.reverse().join("")}setPrintHandler(d){this._printHandler=d}clearPrintHandler(){this._printHandler=this._printHandlerFb}registerEscHandler(d,_){const p=this._identifier(d,[48,126]);this._escHandlers[p]===void 0&&(this._escHandlers[p]=[]);const b=this._escHandlers[p];return b.push(_),{dispose:()=>{const S=b.indexOf(_);S!==-1&&b.splice(S,1)}}}clearEscHandler(d){this._escHandlers[this._identifier(d,[48,126])]&&delete this._escHandlers[this._identifier(d,[48,126])]}setEscHandlerFallback(d){this._escHandlerFb=d}setExecuteHandler(d,_){this._executeHandlers[d.charCodeAt(0)]=_}clearExecuteHandler(d){this._executeHandlers[d.charCodeAt(0)]&&delete this._executeHandlers[d.charCodeAt(0)]}setExecuteHandlerFallback(d){this._executeHandlerFb=d}registerCsiHandler(d,_){const p=this._identifier(d);this._csiHandlers[p]===void 0&&(this._csiHandlers[p]=[]);const b=this._csiHandlers[p];return b.push(_),{dispose:()=>{const S=b.indexOf(_);S!==-1&&b.splice(S,1)}}}clearCsiHandler(d){this._csiHandlers[this._identifier(d)]&&delete this._csiHandlers[this._identifier(d)]}setCsiHandlerFallback(d){this._csiHandlerFb=d}registerDcsHandler(d,_){return this._dcsParser.registerHandler(this._identifier(d),_)}clearDcsHandler(d){this._dcsParser.clearHandler(this._identifier(d))}setDcsHandlerFallback(d){this._dcsParser.setHandlerFallback(d)}registerOscHandler(d,_){return this._oscParser.registerHandler(d,_)}clearOscHandler(d){this._oscParser.clearHandler(d)}setOscHandlerFallback(d){this._oscParser.setHandlerFallback(d)}setErrorHandler(d){this._errorHandler=d}clearErrorHandler(){this._errorHandler=this._errorHandlerFb}reset(){this.currentState=this.initialState,this._oscParser.reset(),this._dcsParser.reset(),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingCodepoint=0,this._parseStack.state!==0&&(this._parseStack.state=2,this._parseStack.handlers=[])}_preserveStack(d,_,p,b,S){this._parseStack.state=d,this._parseStack.handlers=_,this._parseStack.handlerPos=p,this._parseStack.transition=b,this._parseStack.chunkPos=S}parse(d,_,p){let b,S=0,L=0,k=0;if(this._parseStack.state)if(this._parseStack.state===2)this._parseStack.state=0,k=this._parseStack.chunkPos+1;else{if(p===void 0||this._parseStack.state===1)throw this._parseStack.state=1,new Error("improper continuation due to previous async handler, giving up parsing");const C=this._parseStack.handlers;let w=this._parseStack.handlerPos-1;switch(this._parseStack.state){case 3:if(p===!1&&w>-1){for(;w>=0&&(b=C[w](this._params),b!==!0);w--)if(b instanceof Promise)return this._parseStack.handlerPos=w,b}this._parseStack.handlers=[];break;case 4:if(p===!1&&w>-1){for(;w>=0&&(b=C[w](),b!==!0);w--)if(b instanceof Promise)return this._parseStack.handlerPos=w,b}this._parseStack.handlers=[];break;case 6:if(S=d[this._parseStack.chunkPos],b=this._dcsParser.unhook(S!==24&&S!==26,p),b)return b;S===27&&(this._parseStack.transition|=1),this._params.reset(),this._params.addParam(0),this._collect=0;break;case 5:if(S=d[this._parseStack.chunkPos],b=this._oscParser.end(S!==24&&S!==26,p),b)return b;S===27&&(this._parseStack.transition|=1),this._params.reset(),this._params.addParam(0),this._collect=0}this._parseStack.state=0,k=this._parseStack.chunkPos+1,this.precedingCodepoint=0,this.currentState=15&this._parseStack.transition}for(let C=k;C<_;++C){switch(S=d[C],L=this._transitions.table[this.currentState<<8|(S<160?S:y)],L>>4){case 2:for(let T=C+1;;++T){if(T>=_||(S=d[T])<32||S>126&&S<y){this._printHandler(d,C,T),C=T-1;break}if(++T>=_||(S=d[T])<32||S>126&&S<y){this._printHandler(d,C,T),C=T-1;break}if(++T>=_||(S=d[T])<32||S>126&&S<y){this._printHandler(d,C,T),C=T-1;break}if(++T>=_||(S=d[T])<32||S>126&&S<y){this._printHandler(d,C,T),C=T-1;break}}break;case 3:this._executeHandlers[S]?this._executeHandlers[S]():this._executeHandlerFb(S),this.precedingCodepoint=0;break;case 0:break;case 1:if(this._errorHandler({position:C,code:S,currentState:this.currentState,collect:this._collect,params:this._params,abort:!1}).abort)return;break;case 7:const w=this._csiHandlers[this._collect<<8|S];let E=w?w.length-1:-1;for(;E>=0&&(b=w[E](this._params),b!==!0);E--)if(b instanceof Promise)return this._preserveStack(3,w,E,L,C),b;E<0&&this._csiHandlerFb(this._collect<<8|S,this._params),this.precedingCodepoint=0;break;case 8:do switch(S){case 59:this._params.addParam(0);break;case 58:this._params.addSubParam(-1);break;default:this._params.addDigit(S-48)}while(++C<_&&(S=d[C])>47&&S<60);C--;break;case 9:this._collect<<=8,this._collect|=S;break;case 10:const A=this._escHandlers[this._collect<<8|S];let O=A?A.length-1:-1;for(;O>=0&&(b=A[O](),b!==!0);O--)if(b instanceof Promise)return this._preserveStack(4,A,O,L,C),b;O<0&&this._escHandlerFb(this._collect<<8|S),this.precedingCodepoint=0;break;case 11:this._params.reset(),this._params.addParam(0),this._collect=0;break;case 12:this._dcsParser.hook(this._collect<<8|S,this._params);break;case 13:for(let T=C+1;;++T)if(T>=_||(S=d[T])===24||S===26||S===27||S>127&&S<y){this._dcsParser.put(d,C,T),C=T-1;break}break;case 14:if(b=this._dcsParser.unhook(S!==24&&S!==26),b)return this._preserveStack(6,[],0,L,C),b;S===27&&(L|=1),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingCodepoint=0;break;case 4:this._oscParser.start();break;case 5:for(let T=C+1;;T++)if(T>=_||(S=d[T])<32||S>127&&S<y){this._oscParser.put(d,C,T),C=T-1;break}break;case 6:if(b=this._oscParser.end(S!==24&&S!==26),b)return this._preserveStack(5,[],0,L,C),b;S===27&&(L|=1),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingCodepoint=0}this.currentState=15&L}}}o.EscapeSequenceParser=g},6242:(l,o,a)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.OscHandler=o.OscParser=void 0;const c=a(5770),f=a(482),u=[];o.OscParser=class{constructor(){this._state=0,this._active=u,this._id=-1,this._handlers=Object.create(null),this._handlerFb=()=>{},this._stack={paused:!1,loopPosition:0,fallThrough:!1}}registerHandler(m,v){this._handlers[m]===void 0&&(this._handlers[m]=[]);const y=this._handlers[m];return y.push(v),{dispose:()=>{const g=y.indexOf(v);g!==-1&&y.splice(g,1)}}}clearHandler(m){this._handlers[m]&&delete this._handlers[m]}setHandlerFallback(m){this._handlerFb=m}dispose(){this._handlers=Object.create(null),this._handlerFb=()=>{},this._active=u}reset(){if(this._state===2)for(let m=this._stack.paused?this._stack.loopPosition-1:this._active.length-1;m>=0;--m)this._active[m].end(!1);this._stack.paused=!1,this._active=u,this._id=-1,this._state=0}_start(){if(this._active=this._handlers[this._id]||u,this._active.length)for(let m=this._active.length-1;m>=0;m--)this._active[m].start();else this._handlerFb(this._id,"START")}_put(m,v,y){if(this._active.length)for(let g=this._active.length-1;g>=0;g--)this._active[g].put(m,v,y);else this._handlerFb(this._id,"PUT",(0,f.utf32ToString)(m,v,y))}start(){this.reset(),this._state=1}put(m,v,y){if(this._state!==3){if(this._state===1)for(;v<y;){const g=m[v++];if(g===59){this._state=2,this._start();break}if(g<48||57<g)return void(this._state=3);this._id===-1&&(this._id=0),this._id=10*this._id+g-48}this._state===2&&y-v>0&&this._put(m,v,y)}}end(m,v=!0){if(this._state!==0){if(this._state!==3)if(this._state===1&&this._start(),this._active.length){let y=!1,g=this._active.length-1,h=!1;if(this._stack.paused&&(g=this._stack.loopPosition-1,y=v,h=this._stack.fallThrough,this._stack.paused=!1),!h&&y===!1){for(;g>=0&&(y=this._active[g].end(m),y!==!0);g--)if(y instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=g,this._stack.fallThrough=!1,y;g--}for(;g>=0;g--)if(y=this._active[g].end(!1),y instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=g,this._stack.fallThrough=!0,y}else this._handlerFb(this._id,"END",m);this._active=u,this._id=-1,this._state=0}}},o.OscHandler=class{constructor(m){this._handler=m,this._data="",this._hitLimit=!1}start(){this._data="",this._hitLimit=!1}put(m,v,y){this._hitLimit||(this._data+=(0,f.utf32ToString)(m,v,y),this._data.length>c.PAYLOAD_LIMIT&&(this._data="",this._hitLimit=!0))}end(m){let v=!1;if(this._hitLimit)v=!1;else if(m&&(v=this._handler(this._data),v instanceof Promise))return v.then(y=>(this._data="",this._hitLimit=!1,y));return this._data="",this._hitLimit=!1,v}}},8742:(l,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.Params=void 0;const a=2147483647;class c{static fromArray(u){const m=new c;if(!u.length)return m;for(let v=Array.isArray(u[0])?1:0;v<u.length;++v){const y=u[v];if(Array.isArray(y))for(let g=0;g<y.length;++g)m.addSubParam(y[g]);else m.addParam(y)}return m}constructor(u=32,m=32){if(this.maxLength=u,this.maxSubParamsLength=m,m>256)throw new Error("maxSubParamsLength must not be greater than 256");this.params=new Int32Array(u),this.length=0,this._subParams=new Int32Array(m),this._subParamsLength=0,this._subParamsIdx=new Uint16Array(u),this._rejectDigits=!1,this._rejectSubDigits=!1,this._digitIsSub=!1}clone(){const u=new c(this.maxLength,this.maxSubParamsLength);return u.params.set(this.params),u.length=this.length,u._subParams.set(this._subParams),u._subParamsLength=this._subParamsLength,u._subParamsIdx.set(this._subParamsIdx),u._rejectDigits=this._rejectDigits,u._rejectSubDigits=this._rejectSubDigits,u._digitIsSub=this._digitIsSub,u}toArray(){const u=[];for(let m=0;m<this.length;++m){u.push(this.params[m]);const v=this._subParamsIdx[m]>>8,y=255&this._subParamsIdx[m];y-v>0&&u.push(Array.prototype.slice.call(this._subParams,v,y))}return u}reset(){this.length=0,this._subParamsLength=0,this._rejectDigits=!1,this._rejectSubDigits=!1,this._digitIsSub=!1}addParam(u){if(this._digitIsSub=!1,this.length>=this.maxLength)this._rejectDigits=!0;else{if(u<-1)throw new Error("values lesser than -1 are not allowed");this._subParamsIdx[this.length]=this._subParamsLength<<8|this._subParamsLength,this.params[this.length++]=u>a?a:u}}addSubParam(u){if(this._digitIsSub=!0,this.length)if(this._rejectDigits||this._subParamsLength>=this.maxSubParamsLength)this._rejectSubDigits=!0;else{if(u<-1)throw new Error("values lesser than -1 are not allowed");this._subParams[this._subParamsLength++]=u>a?a:u,this._subParamsIdx[this.length-1]++}}hasSubParams(u){return(255&this._subParamsIdx[u])-(this._subParamsIdx[u]>>8)>0}getSubParams(u){const m=this._subParamsIdx[u]>>8,v=255&this._subParamsIdx[u];return v-m>0?this._subParams.subarray(m,v):null}getSubParamsAll(){const u={};for(let m=0;m<this.length;++m){const v=this._subParamsIdx[m]>>8,y=255&this._subParamsIdx[m];y-v>0&&(u[m]=this._subParams.slice(v,y))}return u}addDigit(u){let m;if(this._rejectDigits||!(m=this._digitIsSub?this._subParamsLength:this.length)||this._digitIsSub&&this._rejectSubDigits)return;const v=this._digitIsSub?this._subParams:this.params,y=v[m-1];v[m-1]=~y?Math.min(10*y+u,a):u}}o.Params=c},5741:(l,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.AddonManager=void 0,o.AddonManager=class{constructor(){this._addons=[]}dispose(){for(let a=this._addons.length-1;a>=0;a--)this._addons[a].instance.dispose()}loadAddon(a,c){const f={instance:c,dispose:c.dispose,isDisposed:!1};this._addons.push(f),c.dispose=()=>this._wrappedAddonDispose(f),c.activate(a)}_wrappedAddonDispose(a){if(a.isDisposed)return;let c=-1;for(let f=0;f<this._addons.length;f++)if(this._addons[f]===a){c=f;break}if(c===-1)throw new Error("Could not dispose an addon that has not been loaded");a.isDisposed=!0,a.dispose.apply(a.instance),this._addons.splice(c,1)}}},8771:(l,o,a)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.BufferApiView=void 0;const c=a(3785),f=a(511);o.BufferApiView=class{constructor(u,m){this._buffer=u,this.type=m}init(u){return this._buffer=u,this}get cursorY(){return this._buffer.y}get cursorX(){return this._buffer.x}get viewportY(){return this._buffer.ydisp}get baseY(){return this._buffer.ybase}get length(){return this._buffer.lines.length}getLine(u){const m=this._buffer.lines.get(u);if(m)return new c.BufferLineApiView(m)}getNullCell(){return new f.CellData}}},3785:(l,o,a)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.BufferLineApiView=void 0;const c=a(511);o.BufferLineApiView=class{constructor(f){this._line=f}get isWrapped(){return this._line.isWrapped}get length(){return this._line.length}getCell(f,u){if(!(f<0||f>=this._line.length))return u?(this._line.loadCell(f,u),u):this._line.loadCell(f,new c.CellData)}translateToString(f,u,m){return this._line.translateToString(f,u,m)}}},8285:(l,o,a)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.BufferNamespaceApi=void 0;const c=a(8771),f=a(8460),u=a(844);class m extends u.Disposable{constructor(y){super(),this._core=y,this._onBufferChange=this.register(new f.EventEmitter),this.onBufferChange=this._onBufferChange.event,this._normal=new c.BufferApiView(this._core.buffers.normal,"normal"),this._alternate=new c.BufferApiView(this._core.buffers.alt,"alternate"),this._core.buffers.onBufferActivate(()=>this._onBufferChange.fire(this.active))}get active(){if(this._core.buffers.active===this._core.buffers.normal)return this.normal;if(this._core.buffers.active===this._core.buffers.alt)return this.alternate;throw new Error("Active buffer is neither normal nor alternate")}get normal(){return this._normal.init(this._core.buffers.normal)}get alternate(){return this._alternate.init(this._core.buffers.alt)}}o.BufferNamespaceApi=m},7975:(l,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.ParserApi=void 0,o.ParserApi=class{constructor(a){this._core=a}registerCsiHandler(a,c){return this._core.registerCsiHandler(a,f=>c(f.toArray()))}addCsiHandler(a,c){return this.registerCsiHandler(a,c)}registerDcsHandler(a,c){return this._core.registerDcsHandler(a,(f,u)=>c(f,u.toArray()))}addDcsHandler(a,c){return this.registerDcsHandler(a,c)}registerEscHandler(a,c){return this._core.registerEscHandler(a,c)}addEscHandler(a,c){return this.registerEscHandler(a,c)}registerOscHandler(a,c){return this._core.registerOscHandler(a,c)}addOscHandler(a,c){return this.registerOscHandler(a,c)}}},7090:(l,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.UnicodeApi=void 0,o.UnicodeApi=class{constructor(a){this._core=a}register(a){this._core.unicodeService.register(a)}get versions(){return this._core.unicodeService.versions}get activeVersion(){return this._core.unicodeService.activeVersion}set activeVersion(a){this._core.unicodeService.activeVersion=a}}},744:function(l,o,a){var c=this&&this.__decorate||function(h,d,_,p){var b,S=arguments.length,L=S<3?d:p===null?p=Object.getOwnPropertyDescriptor(d,_):p;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")L=Reflect.decorate(h,d,_,p);else for(var k=h.length-1;k>=0;k--)(b=h[k])&&(L=(S<3?b(L):S>3?b(d,_,L):b(d,_))||L);return S>3&&L&&Object.defineProperty(d,_,L),L},f=this&&this.__param||function(h,d){return function(_,p){d(_,p,h)}};Object.defineProperty(o,"__esModule",{value:!0}),o.BufferService=o.MINIMUM_ROWS=o.MINIMUM_COLS=void 0;const u=a(8460),m=a(844),v=a(5295),y=a(2585);o.MINIMUM_COLS=2,o.MINIMUM_ROWS=1;let g=o.BufferService=class extends m.Disposable{get buffer(){return this.buffers.active}constructor(h){super(),this.isUserScrolling=!1,this._onResize=this.register(new u.EventEmitter),this.onResize=this._onResize.event,this._onScroll=this.register(new u.EventEmitter),this.onScroll=this._onScroll.event,this.cols=Math.max(h.rawOptions.cols||0,o.MINIMUM_COLS),this.rows=Math.max(h.rawOptions.rows||0,o.MINIMUM_ROWS),this.buffers=this.register(new v.BufferSet(h,this))}resize(h,d){this.cols=h,this.rows=d,this.buffers.resize(h,d),this._onResize.fire({cols:h,rows:d})}reset(){this.buffers.reset(),this.isUserScrolling=!1}scroll(h,d=!1){const _=this.buffer;let p;p=this._cachedBlankLine,p&&p.length===this.cols&&p.getFg(0)===h.fg&&p.getBg(0)===h.bg||(p=_.getBlankLine(h,d),this._cachedBlankLine=p),p.isWrapped=d;const b=_.ybase+_.scrollTop,S=_.ybase+_.scrollBottom;if(_.scrollTop===0){const L=_.lines.isFull;S===_.lines.length-1?L?_.lines.recycle().copyFrom(p):_.lines.push(p.clone()):_.lines.splice(S+1,0,p.clone()),L?this.isUserScrolling&&(_.ydisp=Math.max(_.ydisp-1,0)):(_.ybase++,this.isUserScrolling||_.ydisp++)}else{const L=S-b+1;_.lines.shiftElements(b+1,L-1,-1),_.lines.set(S,p.clone())}this.isUserScrolling||(_.ydisp=_.ybase),this._onScroll.fire(_.ydisp)}scrollLines(h,d,_){const p=this.buffer;if(h<0){if(p.ydisp===0)return;this.isUserScrolling=!0}else h+p.ydisp>=p.ybase&&(this.isUserScrolling=!1);const b=p.ydisp;p.ydisp=Math.max(Math.min(p.ydisp+h,p.ybase),0),b!==p.ydisp&&(d||this._onScroll.fire(p.ydisp))}};o.BufferService=g=c([f(0,y.IOptionsService)],g)},7994:(l,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.CharsetService=void 0,o.CharsetService=class{constructor(){this.glevel=0,this._charsets=[]}reset(){this.charset=void 0,this._charsets=[],this.glevel=0}setgLevel(a){this.glevel=a,this.charset=this._charsets[a]}setgCharset(a,c){this._charsets[a]=c,this.glevel===a&&(this.charset=c)}}},1753:function(l,o,a){var c=this&&this.__decorate||function(p,b,S,L){var k,C=arguments.length,w=C<3?b:L===null?L=Object.getOwnPropertyDescriptor(b,S):L;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")w=Reflect.decorate(p,b,S,L);else for(var E=p.length-1;E>=0;E--)(k=p[E])&&(w=(C<3?k(w):C>3?k(b,S,w):k(b,S))||w);return C>3&&w&&Object.defineProperty(b,S,w),w},f=this&&this.__param||function(p,b){return function(S,L){b(S,L,p)}};Object.defineProperty(o,"__esModule",{value:!0}),o.CoreMouseService=void 0;const u=a(2585),m=a(8460),v=a(844),y={NONE:{events:0,restrict:()=>!1},X10:{events:1,restrict:p=>p.button!==4&&p.action===1&&(p.ctrl=!1,p.alt=!1,p.shift=!1,!0)},VT200:{events:19,restrict:p=>p.action!==32},DRAG:{events:23,restrict:p=>p.action!==32||p.button!==3},ANY:{events:31,restrict:p=>!0}};function g(p,b){let S=(p.ctrl?16:0)|(p.shift?4:0)|(p.alt?8:0);return p.button===4?(S|=64,S|=p.action):(S|=3&p.button,4&p.button&&(S|=64),8&p.button&&(S|=128),p.action===32?S|=32:p.action!==0||b||(S|=3)),S}const h=String.fromCharCode,d={DEFAULT:p=>{const b=[g(p,!1)+32,p.col+32,p.row+32];return b[0]>255||b[1]>255||b[2]>255?"":`\x1B[M${h(b[0])}${h(b[1])}${h(b[2])}`},SGR:p=>{const b=p.action===0&&p.button!==4?"m":"M";return`\x1B[<${g(p,!0)};${p.col};${p.row}${b}`},SGR_PIXELS:p=>{const b=p.action===0&&p.button!==4?"m":"M";return`\x1B[<${g(p,!0)};${p.x};${p.y}${b}`}};let _=o.CoreMouseService=class extends v.Disposable{constructor(p,b){super(),this._bufferService=p,this._coreService=b,this._protocols={},this._encodings={},this._activeProtocol="",this._activeEncoding="",this._lastEvent=null,this._onProtocolChange=this.register(new m.EventEmitter),this.onProtocolChange=this._onProtocolChange.event;for(const S of Object.keys(y))this.addProtocol(S,y[S]);for(const S of Object.keys(d))this.addEncoding(S,d[S]);this.reset()}addProtocol(p,b){this._protocols[p]=b}addEncoding(p,b){this._encodings[p]=b}get activeProtocol(){return this._activeProtocol}get areMouseEventsActive(){return this._protocols[this._activeProtocol].events!==0}set activeProtocol(p){if(!this._protocols[p])throw new Error(`unknown protocol "${p}"`);this._activeProtocol=p,this._onProtocolChange.fire(this._protocols[p].events)}get activeEncoding(){return this._activeEncoding}set activeEncoding(p){if(!this._encodings[p])throw new Error(`unknown encoding "${p}"`);this._activeEncoding=p}reset(){this.activeProtocol="NONE",this.activeEncoding="DEFAULT",this._lastEvent=null}triggerMouseEvent(p){if(p.col<0||p.col>=this._bufferService.cols||p.row<0||p.row>=this._bufferService.rows||p.button===4&&p.action===32||p.button===3&&p.action!==32||p.button!==4&&(p.action===2||p.action===3)||(p.col++,p.row++,p.action===32&&this._lastEvent&&this._equalEvents(this._lastEvent,p,this._activeEncoding==="SGR_PIXELS"))||!this._protocols[this._activeProtocol].restrict(p))return!1;const b=this._encodings[this._activeEncoding](p);return b&&(this._activeEncoding==="DEFAULT"?this._coreService.triggerBinaryEvent(b):this._coreService.triggerDataEvent(b,!0)),this._lastEvent=p,!0}explainEvents(p){return{down:!!(1&p),up:!!(2&p),drag:!!(4&p),move:!!(8&p),wheel:!!(16&p)}}_equalEvents(p,b,S){if(S){if(p.x!==b.x||p.y!==b.y)return!1}else if(p.col!==b.col||p.row!==b.row)return!1;return p.button===b.button&&p.action===b.action&&p.ctrl===b.ctrl&&p.alt===b.alt&&p.shift===b.shift}};o.CoreMouseService=_=c([f(0,u.IBufferService),f(1,u.ICoreService)],_)},6975:function(l,o,a){var c=this&&this.__decorate||function(_,p,b,S){var L,k=arguments.length,C=k<3?p:S===null?S=Object.getOwnPropertyDescriptor(p,b):S;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")C=Reflect.decorate(_,p,b,S);else for(var w=_.length-1;w>=0;w--)(L=_[w])&&(C=(k<3?L(C):k>3?L(p,b,C):L(p,b))||C);return k>3&&C&&Object.defineProperty(p,b,C),C},f=this&&this.__param||function(_,p){return function(b,S){p(b,S,_)}};Object.defineProperty(o,"__esModule",{value:!0}),o.CoreService=void 0;const u=a(1439),m=a(8460),v=a(844),y=a(2585),g=Object.freeze({insertMode:!1}),h=Object.freeze({applicationCursorKeys:!1,applicationKeypad:!1,bracketedPasteMode:!1,origin:!1,reverseWraparound:!1,sendFocus:!1,wraparound:!0});let d=o.CoreService=class extends v.Disposable{constructor(_,p,b){super(),this._bufferService=_,this._logService=p,this._optionsService=b,this.isCursorInitialized=!1,this.isCursorHidden=!1,this._onData=this.register(new m.EventEmitter),this.onData=this._onData.event,this._onUserInput=this.register(new m.EventEmitter),this.onUserInput=this._onUserInput.event,this._onBinary=this.register(new m.EventEmitter),this.onBinary=this._onBinary.event,this._onRequestScrollToBottom=this.register(new m.EventEmitter),this.onRequestScrollToBottom=this._onRequestScrollToBottom.event,this.modes=(0,u.clone)(g),this.decPrivateModes=(0,u.clone)(h)}reset(){this.modes=(0,u.clone)(g),this.decPrivateModes=(0,u.clone)(h)}triggerDataEvent(_,p=!1){if(this._optionsService.rawOptions.disableStdin)return;const b=this._bufferService.buffer;p&&this._optionsService.rawOptions.scrollOnUserInput&&b.ybase!==b.ydisp&&this._onRequestScrollToBottom.fire(),p&&this._onUserInput.fire(),this._logService.debug(`sending data "${_}"`,()=>_.split("").map(S=>S.charCodeAt(0))),this._onData.fire(_)}triggerBinaryEvent(_){this._optionsService.rawOptions.disableStdin||(this._logService.debug(`sending binary "${_}"`,()=>_.split("").map(p=>p.charCodeAt(0))),this._onBinary.fire(_))}};o.CoreService=d=c([f(0,y.IBufferService),f(1,y.ILogService),f(2,y.IOptionsService)],d)},9074:(l,o,a)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.DecorationService=void 0;const c=a(8055),f=a(8460),u=a(844),m=a(6106);let v=0,y=0;class g extends u.Disposable{get decorations(){return this._decorations.values()}constructor(){super(),this._decorations=new m.SortedList(_=>_==null?void 0:_.marker.line),this._onDecorationRegistered=this.register(new f.EventEmitter),this.onDecorationRegistered=this._onDecorationRegistered.event,this._onDecorationRemoved=this.register(new f.EventEmitter),this.onDecorationRemoved=this._onDecorationRemoved.event,this.register((0,u.toDisposable)(()=>this.reset()))}registerDecoration(_){if(_.marker.isDisposed)return;const p=new h(_);if(p){const b=p.marker.onDispose(()=>p.dispose());p.onDispose(()=>{p&&(this._decorations.delete(p)&&this._onDecorationRemoved.fire(p),b.dispose())}),this._decorations.insert(p),this._onDecorationRegistered.fire(p)}return p}reset(){for(const _ of this._decorations.values())_.dispose();this._decorations.clear()}*getDecorationsAtCell(_,p,b){var S,L,k;let C=0,w=0;for(const E of this._decorations.getKeyIterator(p))C=(S=E.options.x)!==null&&S!==void 0?S:0,w=C+((L=E.options.width)!==null&&L!==void 0?L:1),_>=C&&_<w&&(!b||((k=E.options.layer)!==null&&k!==void 0?k:"bottom")===b)&&(yield E)}forEachDecorationAtCell(_,p,b,S){this._decorations.forEachByKey(p,L=>{var k,C,w;v=(k=L.options.x)!==null&&k!==void 0?k:0,y=v+((C=L.options.width)!==null&&C!==void 0?C:1),_>=v&&_<y&&(!b||((w=L.options.layer)!==null&&w!==void 0?w:"bottom")===b)&&S(L)})}}o.DecorationService=g;class h extends u.Disposable{get isDisposed(){return this._isDisposed}get backgroundColorRGB(){return this._cachedBg===null&&(this.options.backgroundColor?this._cachedBg=c.css.toColor(this.options.backgroundColor):this._cachedBg=void 0),this._cachedBg}get foregroundColorRGB(){return this._cachedFg===null&&(this.options.foregroundColor?this._cachedFg=c.css.toColor(this.options.foregroundColor):this._cachedFg=void 0),this._cachedFg}constructor(_){super(),this.options=_,this.onRenderEmitter=this.register(new f.EventEmitter),this.onRender=this.onRenderEmitter.event,this._onDispose=this.register(new f.EventEmitter),this.onDispose=this._onDispose.event,this._cachedBg=null,this._cachedFg=null,this.marker=_.marker,this.options.overviewRulerOptions&&!this.options.overviewRulerOptions.position&&(this.options.overviewRulerOptions.position="full")}dispose(){this._onDispose.fire(),super.dispose()}}},4348:(l,o,a)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.InstantiationService=o.ServiceCollection=void 0;const c=a(2585),f=a(8343);class u{constructor(...v){this._entries=new Map;for(const[y,g]of v)this.set(y,g)}set(v,y){const g=this._entries.get(v);return this._entries.set(v,y),g}forEach(v){for(const[y,g]of this._entries.entries())v(y,g)}has(v){return this._entries.has(v)}get(v){return this._entries.get(v)}}o.ServiceCollection=u,o.InstantiationService=class{constructor(){this._services=new u,this._services.set(c.IInstantiationService,this)}setService(m,v){this._services.set(m,v)}getService(m){return this._services.get(m)}createInstance(m,...v){const y=(0,f.getServiceDependencies)(m).sort((d,_)=>d.index-_.index),g=[];for(const d of y){const _=this._services.get(d.id);if(!_)throw new Error(`[createInstance] ${m.name} depends on UNKNOWN service ${d.id}.`);g.push(_)}const h=y.length>0?y[0].index:v.length;if(v.length!==h)throw new Error(`[createInstance] First service dependency of ${m.name} at position ${h+1} conflicts with ${v.length} static arguments`);return new m(...v,...g)}}},7866:function(l,o,a){var c=this&&this.__decorate||function(h,d,_,p){var b,S=arguments.length,L=S<3?d:p===null?p=Object.getOwnPropertyDescriptor(d,_):p;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")L=Reflect.decorate(h,d,_,p);else for(var k=h.length-1;k>=0;k--)(b=h[k])&&(L=(S<3?b(L):S>3?b(d,_,L):b(d,_))||L);return S>3&&L&&Object.defineProperty(d,_,L),L},f=this&&this.__param||function(h,d){return function(_,p){d(_,p,h)}};Object.defineProperty(o,"__esModule",{value:!0}),o.traceCall=o.setTraceLogger=o.LogService=void 0;const u=a(844),m=a(2585),v={trace:m.LogLevelEnum.TRACE,debug:m.LogLevelEnum.DEBUG,info:m.LogLevelEnum.INFO,warn:m.LogLevelEnum.WARN,error:m.LogLevelEnum.ERROR,off:m.LogLevelEnum.OFF};let y,g=o.LogService=class extends u.Disposable{get logLevel(){return this._logLevel}constructor(h){super(),this._optionsService=h,this._logLevel=m.LogLevelEnum.OFF,this._updateLogLevel(),this.register(this._optionsService.onSpecificOptionChange("logLevel",()=>this._updateLogLevel())),y=this}_updateLogLevel(){this._logLevel=v[this._optionsService.rawOptions.logLevel]}_evalLazyOptionalParams(h){for(let d=0;d<h.length;d++)typeof h[d]=="function"&&(h[d]=h[d]())}_log(h,d,_){this._evalLazyOptionalParams(_),h.call(console,(this._optionsService.options.logger?"":"xterm.js: ")+d,..._)}trace(h,...d){var _,p;this._logLevel<=m.LogLevelEnum.TRACE&&this._log((p=(_=this._optionsService.options.logger)===null||_===void 0?void 0:_.trace.bind(this._optionsService.options.logger))!==null&&p!==void 0?p:console.log,h,d)}debug(h,...d){var _,p;this._logLevel<=m.LogLevelEnum.DEBUG&&this._log((p=(_=this._optionsService.options.logger)===null||_===void 0?void 0:_.debug.bind(this._optionsService.options.logger))!==null&&p!==void 0?p:console.log,h,d)}info(h,...d){var _,p;this._logLevel<=m.LogLevelEnum.INFO&&this._log((p=(_=this._optionsService.options.logger)===null||_===void 0?void 0:_.info.bind(this._optionsService.options.logger))!==null&&p!==void 0?p:console.info,h,d)}warn(h,...d){var _,p;this._logLevel<=m.LogLevelEnum.WARN&&this._log((p=(_=this._optionsService.options.logger)===null||_===void 0?void 0:_.warn.bind(this._optionsService.options.logger))!==null&&p!==void 0?p:console.warn,h,d)}error(h,...d){var _,p;this._logLevel<=m.LogLevelEnum.ERROR&&this._log((p=(_=this._optionsService.options.logger)===null||_===void 0?void 0:_.error.bind(this._optionsService.options.logger))!==null&&p!==void 0?p:console.error,h,d)}};o.LogService=g=c([f(0,m.IOptionsService)],g),o.setTraceLogger=function(h){y=h},o.traceCall=function(h,d,_){if(typeof _.value!="function")throw new Error("not supported");const p=_.value;_.value=function(...b){if(y.logLevel!==m.LogLevelEnum.TRACE)return p.apply(this,b);y.trace(`GlyphRenderer#${p.name}(${b.map(L=>JSON.stringify(L)).join(", ")})`);const S=p.apply(this,b);return y.trace(`GlyphRenderer#${p.name} return`,S),S}}},7302:(l,o,a)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.OptionsService=o.DEFAULT_OPTIONS=void 0;const c=a(8460),f=a(844),u=a(6114);o.DEFAULT_OPTIONS={cols:80,rows:24,cursorBlink:!1,cursorStyle:"block",cursorWidth:1,cursorInactiveStyle:"outline",customGlyphs:!0,drawBoldTextInBrightColors:!0,fastScrollModifier:"alt",fastScrollSensitivity:5,fontFamily:"courier-new, courier, monospace",fontSize:15,fontWeight:"normal",fontWeightBold:"bold",ignoreBracketedPasteMode:!1,lineHeight:1,letterSpacing:0,linkHandler:null,logLevel:"info",logger:null,scrollback:1e3,scrollOnUserInput:!0,scrollSensitivity:1,screenReaderMode:!1,smoothScrollDuration:0,macOptionIsMeta:!1,macOptionClickForcesSelection:!1,minimumContrastRatio:1,disableStdin:!1,allowProposedApi:!1,allowTransparency:!1,tabStopWidth:8,theme:{},rightClickSelectsWord:u.isMac,windowOptions:{},windowsMode:!1,windowsPty:{},wordSeparator:" ()[]{}',\"`",altClickMovesCursor:!0,convertEol:!1,termName:"xterm",cancelEvents:!1,overviewRulerWidth:0};const m=["normal","bold","100","200","300","400","500","600","700","800","900"];class v extends f.Disposable{constructor(g){super(),this._onOptionChange=this.register(new c.EventEmitter),this.onOptionChange=this._onOptionChange.event;const h=Object.assign({},o.DEFAULT_OPTIONS);for(const d in g)if(d in h)try{const _=g[d];h[d]=this._sanitizeAndValidateOption(d,_)}catch(_){console.error(_)}this.rawOptions=h,this.options=Object.assign({},h),this._setupOptions()}onSpecificOptionChange(g,h){return this.onOptionChange(d=>{d===g&&h(this.rawOptions[g])})}onMultipleOptionChange(g,h){return this.onOptionChange(d=>{g.indexOf(d)!==-1&&h()})}_setupOptions(){const g=d=>{if(!(d in o.DEFAULT_OPTIONS))throw new Error(`No option with key "${d}"`);return this.rawOptions[d]},h=(d,_)=>{if(!(d in o.DEFAULT_OPTIONS))throw new Error(`No option with key "${d}"`);_=this._sanitizeAndValidateOption(d,_),this.rawOptions[d]!==_&&(this.rawOptions[d]=_,this._onOptionChange.fire(d))};for(const d in this.rawOptions){const _={get:g.bind(this,d),set:h.bind(this,d)};Object.defineProperty(this.options,d,_)}}_sanitizeAndValidateOption(g,h){switch(g){case"cursorStyle":if(h||(h=o.DEFAULT_OPTIONS[g]),!function(d){return d==="block"||d==="underline"||d==="bar"}(h))throw new Error(`"${h}" is not a valid value for ${g}`);break;case"wordSeparator":h||(h=o.DEFAULT_OPTIONS[g]);break;case"fontWeight":case"fontWeightBold":if(typeof h=="number"&&1<=h&&h<=1e3)break;h=m.includes(h)?h:o.DEFAULT_OPTIONS[g];break;case"cursorWidth":h=Math.floor(h);case"lineHeight":case"tabStopWidth":if(h<1)throw new Error(`${g} cannot be less than 1, value: ${h}`);break;case"minimumContrastRatio":h=Math.max(1,Math.min(21,Math.round(10*h)/10));break;case"scrollback":if((h=Math.min(h,4294967295))<0)throw new Error(`${g} cannot be less than 0, value: ${h}`);break;case"fastScrollSensitivity":case"scrollSensitivity":if(h<=0)throw new Error(`${g} cannot be less than or equal to 0, value: ${h}`);break;case"rows":case"cols":if(!h&&h!==0)throw new Error(`${g} must be numeric, value: ${h}`);break;case"windowsPty":h=h??{}}return h}}o.OptionsService=v},2660:function(l,o,a){var c=this&&this.__decorate||function(v,y,g,h){var d,_=arguments.length,p=_<3?y:h===null?h=Object.getOwnPropertyDescriptor(y,g):h;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")p=Reflect.decorate(v,y,g,h);else for(var b=v.length-1;b>=0;b--)(d=v[b])&&(p=(_<3?d(p):_>3?d(y,g,p):d(y,g))||p);return _>3&&p&&Object.defineProperty(y,g,p),p},f=this&&this.__param||function(v,y){return function(g,h){y(g,h,v)}};Object.defineProperty(o,"__esModule",{value:!0}),o.OscLinkService=void 0;const u=a(2585);let m=o.OscLinkService=class{constructor(v){this._bufferService=v,this._nextId=1,this._entriesWithId=new Map,this._dataByLinkId=new Map}registerLink(v){const y=this._bufferService.buffer;if(v.id===void 0){const b=y.addMarker(y.ybase+y.y),S={data:v,id:this._nextId++,lines:[b]};return b.onDispose(()=>this._removeMarkerFromLink(S,b)),this._dataByLinkId.set(S.id,S),S.id}const g=v,h=this._getEntryIdKey(g),d=this._entriesWithId.get(h);if(d)return this.addLineToLink(d.id,y.ybase+y.y),d.id;const _=y.addMarker(y.ybase+y.y),p={id:this._nextId++,key:this._getEntryIdKey(g),data:g,lines:[_]};return _.onDispose(()=>this._removeMarkerFromLink(p,_)),this._entriesWithId.set(p.key,p),this._dataByLinkId.set(p.id,p),p.id}addLineToLink(v,y){const g=this._dataByLinkId.get(v);if(g&&g.lines.every(h=>h.line!==y)){const h=this._bufferService.buffer.addMarker(y);g.lines.push(h),h.onDispose(()=>this._removeMarkerFromLink(g,h))}}getLinkData(v){var y;return(y=this._dataByLinkId.get(v))===null||y===void 0?void 0:y.data}_getEntryIdKey(v){return`${v.id};;${v.uri}`}_removeMarkerFromLink(v,y){const g=v.lines.indexOf(y);g!==-1&&(v.lines.splice(g,1),v.lines.length===0&&(v.data.id!==void 0&&this._entriesWithId.delete(v.key),this._dataByLinkId.delete(v.id)))}};o.OscLinkService=m=c([f(0,u.IBufferService)],m)},8343:(l,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.createDecorator=o.getServiceDependencies=o.serviceRegistry=void 0;const a="di$target",c="di$dependencies";o.serviceRegistry=new Map,o.getServiceDependencies=function(f){return f[c]||[]},o.createDecorator=function(f){if(o.serviceRegistry.has(f))return o.serviceRegistry.get(f);const u=function(m,v,y){if(arguments.length!==3)throw new Error("@IServiceName-decorator can only be used to decorate a parameter");(function(g,h,d){h[a]===h?h[c].push({id:g,index:d}):(h[c]=[{id:g,index:d}],h[a]=h)})(u,m,y)};return u.toString=()=>f,o.serviceRegistry.set(f,u),u}},2585:(l,o,a)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.IDecorationService=o.IUnicodeService=o.IOscLinkService=o.IOptionsService=o.ILogService=o.LogLevelEnum=o.IInstantiationService=o.ICharsetService=o.ICoreService=o.ICoreMouseService=o.IBufferService=void 0;const c=a(8343);var f;o.IBufferService=(0,c.createDecorator)("BufferService"),o.ICoreMouseService=(0,c.createDecorator)("CoreMouseService"),o.ICoreService=(0,c.createDecorator)("CoreService"),o.ICharsetService=(0,c.createDecorator)("CharsetService"),o.IInstantiationService=(0,c.createDecorator)("InstantiationService"),function(u){u[u.TRACE=0]="TRACE",u[u.DEBUG=1]="DEBUG",u[u.INFO=2]="INFO",u[u.WARN=3]="WARN",u[u.ERROR=4]="ERROR",u[u.OFF=5]="OFF"}(f||(o.LogLevelEnum=f={})),o.ILogService=(0,c.createDecorator)("LogService"),o.IOptionsService=(0,c.createDecorator)("OptionsService"),o.IOscLinkService=(0,c.createDecorator)("OscLinkService"),o.IUnicodeService=(0,c.createDecorator)("UnicodeService"),o.IDecorationService=(0,c.createDecorator)("DecorationService")},1480:(l,o,a)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.UnicodeService=void 0;const c=a(8460),f=a(225);o.UnicodeService=class{constructor(){this._providers=Object.create(null),this._active="",this._onChange=new c.EventEmitter,this.onChange=this._onChange.event;const u=new f.UnicodeV6;this.register(u),this._active=u.version,this._activeProvider=u}dispose(){this._onChange.dispose()}get versions(){return Object.keys(this._providers)}get activeVersion(){return this._active}set activeVersion(u){if(!this._providers[u])throw new Error(`unknown Unicode version "${u}"`);this._active=u,this._activeProvider=this._providers[u],this._onChange.fire(u)}register(u){this._providers[u.version]=u}wcwidth(u){return this._activeProvider.wcwidth(u)}getStringCellWidth(u){let m=0;const v=u.length;for(let y=0;y<v;++y){let g=u.charCodeAt(y);if(55296<=g&&g<=56319){if(++y>=v)return m+this.wcwidth(g);const h=u.charCodeAt(y);56320<=h&&h<=57343?g=1024*(g-55296)+h-56320+65536:m+=this.wcwidth(h)}m+=this.wcwidth(g)}return m}}}},s={};function r(l){var o=s[l];if(o!==void 0)return o.exports;var a=s[l]={exports:{}};return i[l].call(a.exports,a,a.exports,r),a.exports}var n={};return(()=>{var l=n;Object.defineProperty(l,"__esModule",{value:!0}),l.Terminal=void 0;const o=r(9042),a=r(3236),c=r(844),f=r(5741),u=r(8285),m=r(7975),v=r(7090),y=["cols","rows"];class g extends c.Disposable{constructor(d){super(),this._core=this.register(new a.Terminal(d)),this._addonManager=this.register(new f.AddonManager),this._publicOptions=Object.assign({},this._core.options);const _=b=>this._core.options[b],p=(b,S)=>{this._checkReadonlyOptions(b),this._core.options[b]=S};for(const b in this._core.options){const S={get:_.bind(this,b),set:p.bind(this,b)};Object.defineProperty(this._publicOptions,b,S)}}_checkReadonlyOptions(d){if(y.includes(d))throw new Error(`Option "${d}" can only be set in the constructor`)}_checkProposedApi(){if(!this._core.optionsService.rawOptions.allowProposedApi)throw new Error("You must set the allowProposedApi option to true to use proposed API")}get onBell(){return this._core.onBell}get onBinary(){return this._core.onBinary}get onCursorMove(){return this._core.onCursorMove}get onData(){return this._core.onData}get onKey(){return this._core.onKey}get onLineFeed(){return this._core.onLineFeed}get onRender(){return this._core.onRender}get onResize(){return this._core.onResize}get onScroll(){return this._core.onScroll}get onSelectionChange(){return this._core.onSelectionChange}get onTitleChange(){return this._core.onTitleChange}get onWriteParsed(){return this._core.onWriteParsed}get element(){return this._core.element}get parser(){return this._parser||(this._parser=new m.ParserApi(this._core)),this._parser}get unicode(){return this._checkProposedApi(),new v.UnicodeApi(this._core)}get textarea(){return this._core.textarea}get rows(){return this._core.rows}get cols(){return this._core.cols}get buffer(){return this._buffer||(this._buffer=this.register(new u.BufferNamespaceApi(this._core))),this._buffer}get markers(){return this._checkProposedApi(),this._core.markers}get modes(){const d=this._core.coreService.decPrivateModes;let _="none";switch(this._core.coreMouseService.activeProtocol){case"X10":_="x10";break;case"VT200":_="vt200";break;case"DRAG":_="drag";break;case"ANY":_="any"}return{applicationCursorKeysMode:d.applicationCursorKeys,applicationKeypadMode:d.applicationKeypad,bracketedPasteMode:d.bracketedPasteMode,insertMode:this._core.coreService.modes.insertMode,mouseTrackingMode:_,originMode:d.origin,reverseWraparoundMode:d.reverseWraparound,sendFocusMode:d.sendFocus,wraparoundMode:d.wraparound}}get options(){return this._publicOptions}set options(d){for(const _ in d)this._publicOptions[_]=d[_]}blur(){this._core.blur()}focus(){this._core.focus()}resize(d,_){this._verifyIntegers(d,_),this._core.resize(d,_)}open(d){this._core.open(d)}attachCustomKeyEventHandler(d){this._core.attachCustomKeyEventHandler(d)}registerLinkProvider(d){return this._core.registerLinkProvider(d)}registerCharacterJoiner(d){return this._checkProposedApi(),this._core.registerCharacterJoiner(d)}deregisterCharacterJoiner(d){this._checkProposedApi(),this._core.deregisterCharacterJoiner(d)}registerMarker(d=0){return this._verifyIntegers(d),this._core.registerMarker(d)}registerDecoration(d){var _,p,b;return this._checkProposedApi(),this._verifyPositiveIntegers((_=d.x)!==null&&_!==void 0?_:0,(p=d.width)!==null&&p!==void 0?p:0,(b=d.height)!==null&&b!==void 0?b:0),this._core.registerDecoration(d)}hasSelection(){return this._core.hasSelection()}select(d,_,p){this._verifyIntegers(d,_,p),this._core.select(d,_,p)}getSelection(){return this._core.getSelection()}getSelectionPosition(){return this._core.getSelectionPosition()}clearSelection(){this._core.clearSelection()}selectAll(){this._core.selectAll()}selectLines(d,_){this._verifyIntegers(d,_),this._core.selectLines(d,_)}dispose(){super.dispose()}scrollLines(d){this._verifyIntegers(d),this._core.scrollLines(d)}scrollPages(d){this._verifyIntegers(d),this._core.scrollPages(d)}scrollToTop(){this._core.scrollToTop()}scrollToBottom(){this._core.scrollToBottom()}scrollToLine(d){this._verifyIntegers(d),this._core.scrollToLine(d)}clear(){this._core.clear()}write(d,_){this._core.write(d,_)}writeln(d,_){this._core.write(d),this._core.write(`\r
`,_)}paste(d){this._core.paste(d)}refresh(d,_){this._verifyIntegers(d,_),this._core.refresh(d,_)}reset(){this._core.reset()}clearTextureAtlas(){this._core.clearTextureAtlas()}loadAddon(d){this._addonManager.loadAddon(this,d)}static get strings(){return o}_verifyIntegers(...d){for(const _ of d)if(_===1/0||isNaN(_)||_%1!=0)throw new Error("This API only accepts integers")}_verifyPositiveIntegers(...d){for(const _ of d)if(_&&(_===1/0||isNaN(_)||_%1!=0||_<0))throw new Error("This API only accepts positive integers")}}l.Terminal=g})(),n})())})(wc);var Pm=wc.exports,Lc={exports:{}};(function(e,t){(function(i,s){e.exports=s()})(self,function(){return(()=>{var i={};return(()=>{var s=i;Object.defineProperty(s,"__esModule",{value:!0}),s.FitAddon=void 0,s.FitAddon=class{constructor(){}activate(r){this._terminal=r}dispose(){}fit(){const r=this.proposeDimensions();if(!r||!this._terminal||isNaN(r.cols)||isNaN(r.rows))return;const n=this._terminal._core;this._terminal.rows===r.rows&&this._terminal.cols===r.cols||(n._renderService.clear(),this._terminal.resize(r.cols,r.rows))}proposeDimensions(){if(!this._terminal||!this._terminal.element||!this._terminal.element.parentElement)return;const r=this._terminal._core,n=r._renderService.dimensions;if(n.css.cell.width===0||n.css.cell.height===0)return;const l=this._terminal.options.scrollback===0?0:r.viewport.scrollBarWidth,o=window.getComputedStyle(this._terminal.element.parentElement),a=parseInt(o.getPropertyValue("height")),c=Math.max(0,parseInt(o.getPropertyValue("width"))),f=window.getComputedStyle(this._terminal.element),u=a-(parseInt(f.getPropertyValue("padding-top"))+parseInt(f.getPropertyValue("padding-bottom"))),m=c-(parseInt(f.getPropertyValue("padding-right"))+parseInt(f.getPropertyValue("padding-left")))-l;return{cols:Math.max(2,Math.floor(m/n.css.cell.width)),rows:Math.max(1,Math.floor(u/n.css.cell.height))}}}})(),i})()})})(Lc);var xm=Lc.exports;function Im(){var i,s,r,n,l,o;switch((r=(s=(i=globalThis==null?void 0:globalThis.document)==null?void 0:i.documentElement)==null?void 0:s.dataset)==null?void 0:r.themeMode){case"dark":return!0;case"light":return!1}switch((o=(l=(n=globalThis==null?void 0:globalThis.siyuan)==null?void 0:n.config)==null?void 0:l.appearance)==null?void 0:o.mode){case 1:return!0;case 0:return!1}return window.matchMedia("(prefers-color-scheme: dark)").matches}function Ec(){return!Im()}function Mc(e,t=100){let i;return function(...s){clearTimeout(i),i=setTimeout(()=>{e.apply(this,s)},t)}}const Nm=typeof atob=="function",Vm=typeof btoa=="function",zi=typeof Buffer=="function",ga=typeof TextDecoder=="function"?new TextDecoder:void 0,va=typeof TextEncoder=="function"?new TextEncoder:void 0,jm="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",ts=Array.prototype.slice.call(jm),Es=(e=>{let t={};return e.forEach((i,s)=>t[i]=s),t})(ts),Fm=/^(?:[A-Za-z\d+\/]{4})*?(?:[A-Za-z\d+\/]{2}(?:==)?|[A-Za-z\d+\/]{3}=?)?$/,st=String.fromCharCode.bind(String),ba=typeof Uint8Array.from=="function"?Uint8Array.from.bind(Uint8Array):e=>new Uint8Array(Array.prototype.slice.call(e,0)),Um=e=>e.replace(/=/g,"").replace(/[+\/]/g,t=>t=="+"?"-":"_"),Dc=e=>e.replace(/[^A-Za-z0-9\+\/]/g,""),Wm=e=>{let t,i,s,r,n="";const l=e.length%3;for(let o=0;o<e.length;){if((i=e.charCodeAt(o++))>255||(s=e.charCodeAt(o++))>255||(r=e.charCodeAt(o++))>255)throw new TypeError("invalid character found");t=i<<16|s<<8|r,n+=ts[t>>18&63]+ts[t>>12&63]+ts[t>>6&63]+ts[t&63]}return l?n.slice(0,l-3)+"===".substring(l):n},Tc=Vm?e=>btoa(e):zi?e=>Buffer.from(e,"binary").toString("base64"):Wm,Ym=zi?e=>Buffer.from(e).toString("base64"):e=>{let i=[];for(let s=0,r=e.length;s<r;s+=4096)i.push(st.apply(null,e.subarray(s,s+4096)));return Tc(i.join(""))},zm=e=>{if(e.length<2){var t=e.charCodeAt(0);return t<128?e:t<2048?st(192|t>>>6)+st(128|t&63):st(224|t>>>12&15)+st(128|t>>>6&63)+st(128|t&63)}else{var t=65536+(e.charCodeAt(0)-55296)*1024+(e.charCodeAt(1)-56320);return st(240|t>>>18&7)+st(128|t>>>12&63)+st(128|t>>>6&63)+st(128|t&63)}},qm=/[\uD800-\uDBFF][\uDC00-\uDFFFF]|[^\x00-\x7F]/g,Zm=e=>e.replace(qm,zm),ya=zi?e=>Buffer.from(e,"utf8").toString("base64"):va?e=>Ym(va.encode(e)):e=>Tc(Zm(e)),Km=(e,t=!1)=>t?Um(ya(e)):ya(e),Gm=/[\xC0-\xDF][\x80-\xBF]|[\xE0-\xEF][\x80-\xBF]{2}|[\xF0-\xF7][\x80-\xBF]{3}/g,$m=e=>{switch(e.length){case 4:var t=(7&e.charCodeAt(0))<<18|(63&e.charCodeAt(1))<<12|(63&e.charCodeAt(2))<<6|63&e.charCodeAt(3),i=t-65536;return st((i>>>10)+55296)+st((i&1023)+56320);case 3:return st((15&e.charCodeAt(0))<<12|(63&e.charCodeAt(1))<<6|63&e.charCodeAt(2));default:return st((31&e.charCodeAt(0))<<6|63&e.charCodeAt(1))}},Jm=e=>e.replace(Gm,$m),Xm=e=>{if(e=e.replace(/\s+/g,""),!Fm.test(e))throw new TypeError("malformed base64.");e+="==".slice(2-(e.length&3));let t,i="",s,r;for(let n=0;n<e.length;)t=Es[e.charAt(n++)]<<18|Es[e.charAt(n++)]<<12|(s=Es[e.charAt(n++)])<<6|(r=Es[e.charAt(n++)]),i+=s===64?st(t>>16&255):r===64?st(t>>16&255,t>>8&255):st(t>>16&255,t>>8&255,t&255);return i},Rc=Nm?e=>atob(Dc(e)):zi?e=>Buffer.from(e,"base64").toString("binary"):Xm,Ac=zi?e=>ba(Buffer.from(e,"base64")):e=>ba(Rc(e).split("").map(t=>t.charCodeAt(0))),Qm=e=>Ac(Oc(e)),eg=zi?e=>Buffer.from(e,"base64").toString("utf8"):ga?e=>ga.decode(Ac(e)):e=>Jm(Rc(e)),Oc=e=>Dc(e.replace(/[-_]/g,t=>t=="-"?"+":"/")),Nr=e=>eg(Oc(e));function tg(e,t){switch(!0){case t instanceof Set:return t.has(e);case t instanceof Function:return t(e);default:return e===t}}function Zs(e,t){return tg(e.key,t.key)&&e.type===t.type&&e.altKey===t.altKey&&e.ctrlKey===t.ctrlKey&&e.metaKey===t.metaKey&&e.shiftKey===t.shiftKey}function ig(e){return class extends sg{constructor(){super(e)}}}var yt;let sg=(yt=class extends HTMLElement{constructor(i){super();ne(this,"save");ne(this,"blockId");ne(this,"linkHref");ne(this,"shadowRoot");ne(this,"link");ne(this,"content");ne(this,"preview");ne(this,"data","");ne(this,"_terminal");ne(this,"fitAddon");ne(this,"resizeObserver");ne(this,"customAddon",{activate:i=>{i.attachCustomKeyEventHandler(s=>{if(Zs(s,{type:"keydown",key:"c",ctrlKey:!0,metaKey:!1,altKey:!1,shiftKey:!1})||Zs(s,{type:"keydown",key:"c",ctrlKey:!1,metaKey:!0,altKey:!1,shiftKey:!1})){const r=i.getSelection();return kl(r),!1}return!0})},dispose(){},fit:()=>{var i;(i=this._terminal)==null||i.resize(this._terminal.cols,this._terminal.buffer.active.baseY+this._terminal.buffer.active.cursorY+1)}});ne(this,"fit",()=>{var i,s;try{this._terminal&&this._terminal.options.fontSize!==this.fontSize&&(this._terminal.options.fontSize=this.fontSize),(i=this.fitAddon)==null||i.fit(),(s=this.customAddon)==null||s.fit()}catch(r){this.plugin.logger.warn(r)}});this.plugin=i,this.save=this.dataset.save,this.blockId=this.dataset.blockId,this.linkHref=`plugins/${this.plugin.name}/index.css?v=${Pa.version}`,this.shadowRoot=this.attachShadow({mode:"open"})}static get observedAttributes(){return["data-stream"]}get fontSize(){var i,s,r;return parseFloat(globalThis.getComputedStyle(this).getPropertyValue("font-size"))||((r=(s=(i=globalThis.siyuan)==null?void 0:i.config)==null?void 0:s.editor)==null?void 0:r.fontSize)}get terminal(){return this._terminal}connectedCallback(){if(this.plugin.xtermElements.add(this),this.link=this.querySelector(`link#${yt.ELEMENT_ID_STYLE}`),this.content=this.querySelector(`pre#${yt.ELEMENT_ID_CONTENT}`),this.preview=this.querySelector(`div#${yt.ELEMENT_ID_PREVIEW}`),this.link||(this.link=document.createElement("link"),this.link.id=yt.ELEMENT_ID_STYLE,this.link.rel="stylesheet",this.link.href=this.linkHref,this.shadowRoot.appendChild(this.link)),this.dataset.stream!==void 0?this.data=Nr(this.dataset.stream):this.content&&(this.shadowRoot.appendChild(this.content),this.content.style.display="none",this.data=Nr(this.content.dataset.stream??"")),this.preview)this.shadowRoot.appendChild(this.preview);else{this.preview=document.createElement("div"),this.preview.id=yt.ELEMENT_ID_PREVIEW,this.sizeObserver(this.preview),this.shadowRoot.appendChild(this.preview);const i=Ec()?rg:ng;this._terminal=new Pm.Terminal({rows:0,theme:i,fontSize:this.fontSize,...this.plugin.config.xterm.options}),this.fitAddon=new xm.FitAddon,this._terminal.loadAddon(this.fitAddon),this._terminal.loadAddon(this.customAddon),this._terminal.open(this.preview),this._terminal.write(this.data,this.fit)}}async write(i){return new Promise(s=>{var r;(r=this._terminal)==null||r.write(i,s)})}async writeln(i){return new Promise(s=>{var r;(r=this._terminal)==null||r.writeln(i,s)})}sizeObserver(i){this.resizeObserver??(this.resizeObserver=new ResizeObserver(Mc(this.fit,125))),this.resizeObserver.observe(i,{box:"content-box"})}disconnectedCallback(){var i,s;this.plugin.xtermElements.delete(this),(i=this.resizeObserver)==null||i.disconnect(),(s=this._terminal)==null||s.dispose()}adoptedCallback(){}async attributeChangedCallback(i,s,r){switch(i){case"data-stream":this._terminal&&(this.data=Nr(r),await this.write(`
`),this._terminal.clear(),this._terminal.write(this.data,this.fit));break}}},ne(yt,"TAG_NAME","jupyter-xterm-output"),ne(yt,"ELEMENT_ID_STYLE","style"),ne(yt,"ELEMENT_ID_CONTENT","content"),ne(yt,"ELEMENT_ID_PREVIEW","preview"),yt);const Bc={background:"#0000",extendedAnsi:["#000000","#00005f","#000087","#0000af","#0000d7","#0000ff","#005f00","#005f5f","#005f87","#005faf","#005fd7","#005fff","#008700","#00875f","#008787","#0087af","#0087d7","#0087ff","#00af00","#00af5f","#00af87","#00afaf","#00afd7","#00afff","#00d700","#00d75f","#00d787","#00d7af","#00d7d7","#00d7ff","#00ff00","#00ff5f","#00ff87","#00ffaf","#00ffd7","#00ffff","#5f0000","#5f005f","#5f0087","#5f00af","#5f00d7","#5f00ff","#5f5f00","#5f5f5f","#5f5f87","#5f5faf","#5f5fd7","#5f5fff","#5f8700","#5f875f","#5f8787","#5f87af","#5f87d7","#5f87ff","#5faf00","#5faf5f","#5faf87","#5fafaf","#5fafd7","#5fafff","#5fd700","#5fd75f","#5fd787","#5fd7af","#5fd7d7","#5fd7ff","#5fff00","#5fff5f","#5fff87","#5fffaf","#5fffd7","#5fffff","#870000","#87005f","#870087","#8700af","#8700d7","#8700ff","#875f00","#875f5f","#875f87","#875faf","#875fd7","#875fff","#878700","#87875f","#878787","#8787af","#8787d7","#8787ff","#87af00","#87af5f","#87af87","#87afaf","#87afd7","#87afff","#87d700","#87d75f","#87d787","#87d7af","#87d7d7","#87d7ff","#87ff00","#87ff5f","#87ff87","#87ffaf","#87ffd7","#87ffff","#af0000","#af005f","#af0087","#af00af","#af00d7","#af00ff","#af5f00","#af5f5f","#af5f87","#af5faf","#af5fd7","#af5fff","#af8700","#af875f","#af8787","#af87af","#af87d7","#af87ff","#afaf00","#afaf5f","#afaf87","#afafaf","#afafd7","#afafff","#afd700","#afd75f","#afd787","#afd7af","#afd7d7","#afd7ff","#afff00","#afff5f","#afff87","#afffaf","#afffd7","#afffff","#d70000","#d7005f","#d70087","#d700af","#d700d7","#d700ff","#d75f00","#d75f5f","#d75f87","#d75faf","#d75fd7","#d75fff","#d78700","#d7875f","#d78787","#d787af","#d787d7","#d787ff","#d7af00","#d7af5f","#d7af87","#d7afaf","#d7afd7","#d7afff","#d7d700","#d7d75f","#d7d787","#d7d7af","#d7d7d7","#d7d7ff","#d7ff00","#d7ff5f","#d7ff87","#d7ffaf","#d7ffd7","#d7ffff","#ff0000","#ff005f","#ff0087","#ff00af","#ff00d7","#ff00ff","#ff5f00","#ff5f5f","#ff5f87","#ff5faf","#ff5fd7","#ff5fff","#ff8700","#ff875f","#ff8787","#ff87af","#ff87d7","#ff87ff","#ffaf00","#ffaf5f","#ffaf87","#ffafaf","#ffafd7","#ffafff","#ffd700","#ffd75f","#ffd787","#ffd7af","#ffd7d7","#ffd7ff","#ffff00","#ffff5f","#ffff87","#ffffaf","#ffffd7","#ffffff","#080808","#121212","#1c1c1c","#262626","#303030","#3a3a3a","#444444","#4e4e4e","#585858","#626262","#6c6c6c","#767676","#808080","#8a8a8a","#949494","#9e9e9e","#a8a8a8","#b2b2b2","#bcbcbc","#c6c6c6","#d0d0d0","#dadada","#e4e4e4","#eeeeee"]},rg={foreground:"#3e424d",selectionBackground:"#fffe",selectionInactiveBackground:"#fffe",black:"#282c36",red:"#b22b31",green:"#007427",yellow:"#b27d12",blue:"#0065ca",magenta:"#a03196",cyan:"#258f8f",white:"#a1a6b2",brightBlack:"#3e424d",brightRed:"#e75c58",brightGreen:"#00a250",brightYellow:"#ddb62b",brightBlue:"#208ffb",brightMagenta:"#d160c4",brightCyan:"#60c6c8",brightWhite:"#c5c1b4",...Bc},ng={foreground:"#a1a6b2",selectionBackground:"#fff3",selectionInactiveBackground:"#fff3",black:"#3e424d",red:"#e75c58",green:"#00a250",yellow:"#ddb62b",blue:"#208ffb",magenta:"#d160c4",cyan:"#60c6c8",white:"#c5c1b4",brightBlack:"#282c36",brightRed:"#b22b31",brightGreen:"#007427",brightYellow:"#b27d12",brightBlue:"#0065ca",brightMagenta:"#a03196",brightCyan:"#258f8f",brightWhite:"#a1a6b2",...Bc},og=e=>({}),Ca=e=>({}),ag=e=>({}),Sa=e=>({}),lg=e=>({}),wa=e=>({});function cg(e){let t;return{c(){t=re("div"),x(t,"class","ft__breakword")},m(i,s){J(i,t,s),t.innerHTML=e[1]},p(i,s){s&2&&(t.innerHTML=i[1])},d(i){i&&$(t)}}}function hg(e){let t,i,s;return{c(){t=re("input"),t.autofocus=e[5],x(t,"placeholder",e[2]),x(t,"class","b3-text-field fn__block")},m(r,n){J(r,t,n),ht(t,e[0]),e[5]&&t.focus(),i||(s=[ve(t,"input",e[13]),ve(t,"input",e[11]),ve(t,"change",e[10])],i=!0)},p(r,n){n&32&&(t.autofocus=r[5]),n&4&&x(t,"placeholder",r[2]),n&1&&t.value!==r[0]&&ht(t,r[0])},d(r){r&&$(t),i=!1,Qe(s)}}}function ug(e){let t,i;return{c(){t=new Ui(!1),i=$e(),t.a=i},m(s,r){t.m(e[3],s,r),J(s,i,r)},p(s,r){r&8&&t.p(s[3])},d(s){s&&($(i),t.d())}}}function fg(e){let t,i,s,r,n;const l=e[12].text,o=Fe(l,e,e[14],wa),a=o||cg(e),c=e[12].input,f=Fe(c,e,e[14],Sa),u=f||hg(e),m=e[12].tips,v=Fe(m,e,e[14],Ca),y=v||ug(e);return{c(){a&&a.c(),t=ue(),i=re("br"),s=ue(),u&&u.c(),r=ue(),y&&y.c()},m(g,h){a&&a.m(g,h),J(g,t,h),J(g,i,h),J(g,s,h),u&&u.m(g,h),J(g,r,h),y&&y.m(g,h),n=!0},p(g,h){o?o.p&&(!n||h&16384)&&We(o,l,g,g[14],n?Ue(l,g[14],h,lg):Ye(g[14]),wa):a&&a.p&&(!n||h&2)&&a.p(g,n?h:-1),f?f.p&&(!n||h&16384)&&We(f,c,g,g[14],n?Ue(c,g[14],h,ag):Ye(g[14]),Sa):u&&u.p&&(!n||h&37)&&u.p(g,n?h:-1),v?v.p&&(!n||h&16384)&&We(v,m,g,g[14],n?Ue(m,g[14],h,og):Ye(g[14]),Ca):y&&y.p&&(!n||h&8)&&y.p(g,n?h:-1)},i(g){n||(j(a,g),j(u,g),j(y,g),n=!0)},o(g){U(a,g),U(u,g),U(y,g),n=!1},d(g){g&&($(t),$(i),$(s),$(r)),a&&a.d(g),u&&u.d(g),y&&y.d(g)}}}function dg(e){let t,i;return t=new vc({props:{selectable:e[4],cancelButtonText:e[6],confirmButtonText:e[7],$$slots:{default:[fg]},$$scope:{ctx:e}}}),t.$on("cancel",e[8]),t.$on("confirm",e[9]),{c(){te(t.$$.fragment)},m(s,r){Q(t,s,r),i=!0},p(s,[r]){const n={};r&16&&(n.selectable=s[4]),r&64&&(n.cancelButtonText=s[6]),r&128&&(n.confirmButtonText=s[7]),r&16431&&(n.$$scope={dirty:r,ctx:s}),t.$set(n)},i(s){i||(j(t.$$.fragment,s),i=!0)},o(s){U(t.$$.fragment,s),i=!1},d(s){ee(t,s)}}}function _g(e,t,i){var p,b,S,L;let{$$slots:s={},$$scope:r}=t,{text:n=""}=t,{value:l=""}=t,{placeholder:o=""}=t,{tips:a=""}=t,{selectable:c=!0}=t,{autofocus:f=!0}=t,{cancelButtonText:u=((b=(p=globalThis.siyuan)==null?void 0:p.languages)==null?void 0:b.cancel)??"Cancel"}=t,{confirmButtonText:m=((L=(S=globalThis.siyuan)==null?void 0:S.languages)==null?void 0:L.confirm)??"Confirm"}=t;const v=ei();function y(k){v("cancel",{value:l,event:k.detail.event})}function g(k){v("confirm",{value:l,event:k.detail.event})}function h(k){v("change",{value:l,event:k})}function d(k){v("input",{value:l,event:k})}function _(){l=this.value,i(0,l)}return e.$$set=k=>{"text"in k&&i(1,n=k.text),"value"in k&&i(0,l=k.value),"placeholder"in k&&i(2,o=k.placeholder),"tips"in k&&i(3,a=k.tips),"selectable"in k&&i(4,c=k.selectable),"autofocus"in k&&i(5,f=k.autofocus),"cancelButtonText"in k&&i(6,u=k.cancelButtonText),"confirmButtonText"in k&&i(7,m=k.confirmButtonText),"$$scope"in k&&i(14,r=k.$$scope)},[l,n,o,a,c,f,u,m,y,g,h,d,s,_,r]}class pg extends Be{constructor(t){super(),Oe(this,t,_g,dg,Re,{text:1,value:0,placeholder:2,tips:3,selectable:4,autofocus:5,cancelButtonText:6,confirmButtonText:7})}}async function mg(e,t){return new Promise((i,s)=>{const r=t.confirm,n=t.cancel;t.confirm=async(l,...o)=>{const a=await(r==null?void 0:r.call(t,l,...o))??!0;return a&&i(l),a},t.cancel=async(l,...o)=>{const a=await(n==null?void 0:n.call(t,l,...o))??!0;return a&&s(l),a},gg(e,t)})}function gg(e,t){const i=`dialog-prompt-${Date.now()}`,s=new e({title:t.title,content:`<div id="${i}" class="fn__flex-column" />`,width:t.width||void 0,height:t.height||void 0,destroyCallback:()=>r==null?void 0:r.$destroy()}),r=new pg({target:s.element.querySelector(`#${i}`),props:{text:t.text,value:t.value,placeholder:t.placeholder,tips:t.tips,selectable:t.selectable,autofocus:t.autofocus}});return r.$on("input",async n=>{if(t.input){const l=await t.input(n.detail.value,s,r);r.$set({tips:l})}}),r.$on("change",async n=>{if(t.change){const l=await t.change(n.detail.value,s,r);r.$set({tips:l})}}),r.$on("confirm",async n=>{(t.confirm?await t.confirm(n.detail.value,s,r):!0)&&s.destroy()}),r.$on("cancel",async n=>{(t.cancel?await t.cancel(n.detail.value,s,r):!0)&&s.destroy()}),{id:i,dialog:s,component:r}}vg();yg();const Ms=bg();function vg(){switch(it.getFrontend()){case"desktop":case"desktop-window":case"browser-desktop":return!0;case"mobile":case"browser-mobile":return!1;default:return!1}}function bg(){switch(it.getFrontend()){case"mobile":case"browser-mobile":return!0;case"desktop":case"desktop-window":case"browser-desktop":return!1;default:return!1}}function yg(){switch(it.getFrontend()){case"browser-desktop":case"browser-mobile":return!0;case"desktop":case"desktop-window":case"mobile":return!1;default:return!1}}function Cg(e){const{protyle:t,data:i,blockElements:s}=e;if(i){const r={element:t.wysiwyg.element,id:i.id,type:bl.NodeType.NodeDocument};return{...r,isDocumentBlock:!0,isMultiBlock:!1,blocks:[r],protyle:t,data:i}}else if(s&&s.length>0){const r=[];return s.forEach(n=>{r.push({element:n,id:n.dataset.nodeId,type:n.dataset.type,subtype:n.dataset.subtype})}),{...r[0],isDocumentBlock:!1,isMultiBlock:r.length>1,blocks:r,protyle:t}}return null}function Ii(e){return!!(e&&e instanceof HTMLElement&&e.dataset.type&&e.dataset.nodeId&&Vi.id.test(e.dataset.nodeId))}function Sg(e){return!!(e&&e instanceof HTMLElement&&e.classList.contains("protyle-title")&&e.dataset.nodeId&&Vi.id.test(e.dataset.nodeId))}const wg=Sg;function kg(e){return!!(e&&e instanceof HTMLElement&&e.classList.contains("protyle-wysiwyg"))}const Lg=kg;function Eg(){return Array.from(document.querySelectorAll(".protyle-wysiwyg div.protyle-wysiwyg--select[data-node-id]"))}function Ks(){const e=document.getSelection();for(var t=e==null?void 0:e.focusNode;t&&(!(t instanceof HTMLElement)||!Ii(t));)t=t.parentElement;return t}function Mg(){const e=Ks();return e==null?void 0:e.dataset.nodeId}function Dg(){const e=Eg();if(e.length>0)return e;{const t=Ks();return t?[t]:[]}}function Tg(e=(t=>(t=globalThis.document.getSelection())==null?void 0:t.focusNode)()){for(;e&&(!(e instanceof HTMLElement)||!e.classList.contains("hljs"));)e=e.parentElement;return e}function ka(){const e=globalThis.document.getSelection();if((e==null?void 0:e.rangeCount)===1){const t=e.getRangeAt(0),i=Tg(t.commonAncestorContainer);if(i){const s=i.textContent??"",r=globalThis.document.createRange(),n=globalThis.document.createRange(),l=globalThis.document.createRange(),o=globalThis.document.createRange(),{anchorNode:a,anchorOffset:c,focusNode:f,focusOffset:u}=e;if(a&&f&&i.firstChild&&i.lastChild){const m=a===f?c<=u:!!(a.compareDocumentPosition(f)&Node.DOCUMENT_POSITION_FOLLOWING);r.setStartBefore(i.firstChild),n.setEndAfter(i.lastChild),l.setStartBefore(i.firstChild),o.setEndAfter(i.lastChild),m?(r.setEnd(a,c),n.setStart(f,u)):(r.setEnd(f,u),n.setStart(a,c)),l.setEnd(f,u),o.setStart(f,u);const v=l.toString(),y=v.split(`
`),g=y.at(-1),h=y.length,d=g.length,_=v.length;return{code:s,row:h,column:d,offset:_,container:i,selection:e,order:m,before:r,current:t,after:n,prefix:l,suffix:o}}}}}class Rg{constructor(t,i=!0){this.label=t,this.collapsed=i}stdout(t,i,...s){const r=`[\x1B[4m${this.label}\x1B[0m] - <\x1B[1m${t.name.toUpperCase()}\x1B[0m>`;if(this.collapsed?globalThis.console.groupCollapsed(r):globalThis.console.group(r),i)for(const n of s)Array.isArray(n)?t(...n):t(n);else t(...s);globalThis.console.trace(),globalThis.console.groupEnd()}dir(...t){this.stdout(globalThis.console.dir,!1,...t)}dirs(...t){this.stdout(globalThis.console.dir,!0,...t)}table(...t){this.stdout(globalThis.console.table,!1,...t)}tables(...t){this.stdout(globalThis.console.table,!0,...t)}debug(...t){this.stdout(globalThis.console.debug,!1,...t)}debugs(...t){this.stdout(globalThis.console.debug,!0,...t)}info(...t){this.stdout(globalThis.console.info,!1,...t)}infos(...t){this.stdout(globalThis.console.info,!0,...t)}log(...t){this.stdout(globalThis.console.log,!1,...t)}logs(...t){this.stdout(globalThis.console.log,!0,...t)}warn(...t){this.stdout(globalThis.console.warn,!1,...t)}warns(...t){this.stdout(globalThis.console.warn,!0,...t)}error(...t){this.stdout(globalThis.console.error,!1,...t)}errors(...t){this.stdout(globalThis.console.error,!0,...t)}}function Ag(e,t,i="span"){return`<${i} class="${t}">${e}</${i}>`}function _t(e){return Ag(e,"fn__code","code")}var Og=function(t){return Bg(t)&&!Hg(t)};function Bg(e){return!!e&&typeof e=="object"}function Hg(e){var t=Object.prototype.toString.call(e);return t==="[object RegExp]"||t==="[object Date]"||Ig(e)}var Pg=typeof Symbol=="function"&&Symbol.for,xg=Pg?Symbol.for("react.element"):60103;function Ig(e){return e.$$typeof===xg}function Ng(e){return Array.isArray(e)?[]:{}}function fs(e,t){return t.clone!==!1&&t.isMergeableObject(e)?ji(Ng(e),e,t):e}function Vg(e,t,i){return e.concat(t).map(function(s){return fs(s,i)})}function jg(e,t){if(!t.customMerge)return ji;var i=t.customMerge(e);return typeof i=="function"?i:ji}function Fg(e){return Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(e).filter(function(t){return Object.propertyIsEnumerable.call(e,t)}):[]}function La(e){return Object.keys(e).concat(Fg(e))}function Hc(e,t){try{return t in e}catch{return!1}}function Ug(e,t){return Hc(e,t)&&!(Object.hasOwnProperty.call(e,t)&&Object.propertyIsEnumerable.call(e,t))}function Wg(e,t,i){var s={};return i.isMergeableObject(e)&&La(e).forEach(function(r){s[r]=fs(e[r],i)}),La(t).forEach(function(r){Ug(e,r)||(Hc(e,r)&&i.isMergeableObject(t[r])?s[r]=jg(r,i)(e[r],t[r],i):s[r]=fs(t[r],i))}),s}function ji(e,t,i){i=i||{},i.arrayMerge=i.arrayMerge||Vg,i.isMergeableObject=i.isMergeableObject||Og,i.cloneUnlessOtherwiseSpecified=fs;var s=Array.isArray(t),r=Array.isArray(e),n=s===r;return n?s?i.arrayMerge(e,t,i):Wg(e,t,i):fs(t,i)}ji.all=function(t,i){if(!Array.isArray(t))throw new Error("first argument should be an array");return t.reduce(function(s,r){return ji(s,r,i)},{})};var Yg=ji,zg=Yg;const qg=yn(zg);function Ea(...e){return qg.all(e,{arrayMerge:(t,i,s)=>i})}class Zg{constructor(t,i,s,r){ne(this,"map",new Map);ne(this,"counter",Math.random());ne(this,"errerEventListener",async t=>{this.logger.warn(t)});ne(this,"messageEventListener",async t=>{const i=t.data;switch(i.type){case"call":{try{if(i.uuid&&i.uuid!==this.uuid)break;if(i.handler.name in this.handlers){const s=this.handlers[i.handler.name],r=await s.func.call(s.this,...i.handler.args),n={type:"return",id:i.id,handler:{name:i.handler.name,result:r}};this.port.postMessage(n)}}catch(s){const r={type:"error",id:i.id,error:s};this.port.postMessage(r)}break}case"error":{const s=this.map.get(i.id);s&&(this.map.delete(i.id),s.reject(i.error));break}case"return":{const s=this.map.get(i.id);s&&(this.map.delete(i.id),s.resolve(i.handler.result));break}}});this.port=t,this.logger=i,this.handlers=s,this.uuid=r,this.port.addEventListener("error",this.errerEventListener),this.port.addEventListener("messageerror",this.errerEventListener),this.port.addEventListener("message",this.messageEventListener)}async call(t,...i){return new Promise((s,r)=>{const n=this.counter++;this.map.set(n,{resolve:s,reject:r});const l={type:"call",id:n,handler:{name:t,args:i}};this.port.postMessage(l)})}async singleCall(t,i,...s){return new Promise((r,n)=>{const l=this.counter++;this.map.set(l,{resolve:r,reject:n});const o={type:"call",id:l,uuid:i,handler:{name:t,args:s}};this.port.postMessage(o)})}}function*Pc(e=0){for(;;)yield e++}const Kg=Pc(Math.round(Math.random()*(36**8-1)));function Gg(e,t){return`${e.getFullYear().toString().padStart(4,"0")}${(e.getMonth()+1).toString().padStart(2,"0")}${e.getDate().toString().padStart(2,"0")}${e.getHours().toString().padStart(2,"0")}${e.getMinutes().toString().padStart(2,"0")}${e.getSeconds().toString().padStart(2,"0")}-${t.toString(36).padStart(7,"0").slice(-7)}`}function $g(e=new Date,t=Kg){return Gg(e,t.next().value)}class Jg extends Zg{constructor(t,i,s={},r=$g()){super(t,i,s,r)}async ping(t=1e3){const i=Date.now();return new Promise((s,r)=>{const n=setTimeout(()=>{r(new Error(`timeout: ${t}`))},t);this.port.addEventListener("message",l=>{l.data==="pong"&&(clearTimeout(n),s(Date.now()-i))}),this.port.postMessage("ping")})}terminate(){switch(!0){case"terminate"in this.port:this.port.terminate();break;case"close"in this.port:this.port.close();break}}}async function Xg(e){return new Promise(t=>{setTimeout(t,e)})}var Vr,Ma;function Da(){if(Ma)return Vr;Ma=1,Vr=e;function e(t,i){return!t!=!i}return Vr}var jr,Ta;function Ra(){if(Ta)return jr;Ta=1;var e=/\b(Array|Date|Object|Math|JSON)\b/g;jr=function(n,l){var o=s(t(n));return l&&typeof l=="string"&&(l=r(l)),l?i(n,o,l):o};function t(n){return n.replace(/\.\w+|\w+ *\(|"[^"]*"|'[^']*'|\/([^/]+)\//g,"").replace(e,"").match(/[a-zA-Z_]\w*/g)||[]}function i(n,l,o){var a=/\.\w+|\w+ *\(|"[^"]*"|'[^']*'|\/([^/]+)\/|[a-zA-Z_]\w*/g;return n.replace(a,function(c){return c[c.length-1]=="("||~l.indexOf(c)?o(c):c})}function s(n){for(var l=[],o=0;o<n.length;o++)~l.indexOf(n[o])||l.push(n[o]);return l}function r(n){return function(l){return n+l}}return jr}var Gs,cn;try{Gs=Da()}catch{Gs=Da()}try{cn=Ra()}catch{cn=Ra()}var Qg=Je;function Je(e,t){if(!(this instanceof Je))return new Je(e,t);if(this.node=this.start=this.peeked=e,this.root=t,this.closingTag=!1,this._revisit=!0,this._selects=[],this._rejects=[],e&&this.higher(e))throw new Error("root must be a parent or ancestor to node")}Je.prototype.reset=function(e){return this.node=e||this.start,this};Je.prototype.revisit=function(e){return this._revisit=e??!0,this};Je.prototype.opening=function(){return this.node.nodeType==1&&(this.closingTag=!1),this};Je.prototype.atOpening=function(){return!this.closingTag};Je.prototype.closing=function(){return this.node.nodeType==1&&(this.closingTag=!0),this};Je.prototype.atClosing=function(){return this.closingTag};Je.prototype.next=xc("nextSibling","firstChild");Je.prototype.previous=Je.prototype.prev=xc("previousSibling","lastChild");function xc(e,t){var i=e=="nextSibling";return function(r,n,l){r=this.compile(r),n=n&&n>0?n:1;for(var o=this.node,a=this.closingTag,c=this._revisit;o;){if(Gs(i,a)&&o[t])o=o[t],a=!i;else if(o.nodeType==1&&!o[t]&&Gs(i,a)){if(a=i,!c)continue}else if(o[e])o=o[e],a=!i;else if(o=o.parentNode,a=i,!c)continue;if(!o||this.higher(o,this.root))break;if(r(o)&&this.selects(o,l)&&this.rejects(o,l)){if(--n)continue;return l||(this.node=o),this.closingTag=a,o}}return null}}Je.prototype.select=function(e){return e=this.compile(e),this._selects.push(e),this};Je.prototype.selects=function(e,t){var i=this._selects,s=i.length;if(!s)return!0;for(var r=0;r<s;r++)if(i[r].call(this,e,t))return!0;return!1};Je.prototype.reject=function(e){return e=this.compile(e),this._rejects.push(e),this};Je.prototype.rejects=function(e,t){var i=this._rejects,s=i.length;if(!s)return!0;for(var r=0;r<s;r++)if(i[r].call(this,e,t))return!1;return!0};Je.prototype.higher=function(e){var t=this.root;if(!t)return!1;for(e=e.parentNode;e&&e!=t;)e=e.parentNode;return e!=t};Je.prototype.compile=function(e){switch(typeof e){case"number":return function(t){return e==t.nodeType};case"string":return new Function("node","return "+cn(e,"node."));case"function":return e;default:return function(){return!0}}};Je.prototype.peak=Je.prototype.peek=function(e,t){return arguments.length==1&&(t=e,e=!0),t=t??1,t?t>0?this.next(e,t,!0):this.prev(e,Math.abs(t),!0):this.node};Je.prototype.use=function(e){return e(this),this};var e6=Qg,$s=window.getSelection(),t6=i6;function i6(e,t){if(arguments.length==1){if(!$s.rangeCount)return;var i={},l=$s.getRangeAt(0),s=l.cloneRange();return s.selectNodeContents(e),s.setEnd(l.endContainer,l.endOffset),i.end=s.toString().length,s.setStart(l.startContainer,l.startOffset),i.start=i.end-s.toString().length,i.atStart=s.startOffset===0,i}for(var r=t.end&&t.end!==t.start,n=0,l=document.createRange(),o=e6(e).select(Node.TEXT_NODE).revisit(!1),a,c,f=t.start>e.textContent.length?e.textContent.length:t.start,u=t.end>e.textContent.length?e.textContent.length:t.end,m=t.atStart;a=o.next();){var v=n;n+=a.textContent.length;var y=m?n>f:n>=f;if(!c&&y&&(c=!0,l.setStart(a,f-v),!r)){l.collapse(!0),Aa(e,l);break}if(r&&n>=u){l.setEnd(a,u-v),Aa(e,l);break}}}function Aa(e,t){e.focus(),$s.removeAllRanges(),$s.addRange(t)}const Oa=yn(t6);function s6(e,t){e.deleteContents(),e.insertNode(document.createTextNode(t))}const r6=l6();c6();h6();function n6(){return!!globalThis.require}function o6(){return!!globalThis.process}function a6(){var e,t;return!!((t=(e=globalThis.process)==null?void 0:e.versions)!=null&&t.hasOwnProperty("electron"))}function l6(){return o6()&&n6()&&a6()}function c6(){var e,t,i;return((i=(t=(e=globalThis.siyuan)==null?void 0:e.config)==null?void 0:t.appearance)==null?void 0:i.mode)===0}function h6(){var e,t,i;return((i=(t=(e=globalThis.siyuan)==null?void 0:e.config)==null?void 0:t.appearance)==null?void 0:i.mode)===1}function u6(e=!0,t=(i=>(i=globalThis.process)==null?void 0:i.platform)()==="darwin"){const s=[{role:"about"},...t?[{type:"separator"},{role:"help"},{type:"separator"},{role:"services"},{type:"separator"},{role:"hide"},{role:"hideOthers"},{role:"unhide"}]:[],{type:"separator"},{role:"quit"}],r=[...t?[{role:"recentDocuments"},{role:"clearRecentDocuments"},{type:"separator"}]:[],{role:"close"}],n=[{role:"undo"},{role:"redo"},{type:"separator"},{role:"cut"},{role:"copy"},{role:"paste"},{role:"pasteAndMatchStyle"},{role:"delete"},{type:"separator"},{role:"selectAll"},{type:"separator"},{role:"toggleSpellChecker"},...t?[{type:"separator"},{role:"showSubstitutions"},{role:"toggleTextReplacement"},{type:"separator"},{role:"toggleSmartQuotes"},{role:"toggleSmartDashes"},{type:"separator"},{role:"startSpeaking"},{role:"stopSpeaking"}]:[]],l=[{role:"reload"},{role:"forceReload"},{type:"separator"},{role:"resetZoom"},{role:"zoomIn",accelerator:"CmdOrCtrl+="},{role:"zoomOut"},...t?[{role:"zoom"},{type:"separator"},{role:"front"}]:[{type:"separator"},{label:"Toggle On Top",click:(c,f,u)=>{f&&f.setAlwaysOnTop(!f.isAlwaysOnTop())},type:"checkbox",checked:e,accelerator:"CmdOrCtrl+Shift+Space"}],{role:"togglefullscreen"},{type:"separator"},{role:"toggleDevTools"}],o=[...t?[{role:"window"},{type:"separator"},{role:"toggleTabBar"},{role:"selectNextTab"},{role:"selectPreviousTab"},{role:"mergeAllWindows"},{role:"moveTabToNewWindow"},{type:"separator"}]:[],{role:"minimize"},{role:"close"}],a=[{role:"appMenu",submenu:s},{role:"fileMenu",submenu:r},{role:"editMenu",submenu:n},{role:"viewMenu",submenu:l},{role:"windowMenu",submenu:o}];return t&&a.push({role:"shareMenu"}),a}function f6(e){var r,n,l,o;e.base.center&&(delete e.base.x,delete e.base.y);const{BrowserWindow:t,Menu:i}=globalThis.require("@electron/remote"),s=new t(e.base);if((r=e.extra)!=null&&r.enableMenuBar)if((n=e.extra)!=null&&n.menu)s.setMenu(e.extra.menu);else{const a=i.buildFromTemplate(u6(e.base.alwaysOnTop));s.setMenu(a)}else s.removeMenu();return(l=e.extra)!=null&&l.enableElectron&&globalThis.require("@electron/remote").require("@electron/remote/main").enable(s.webContents),s.loadURL(e.url.toString(),(o=e.extra)==null?void 0:o.loadURLOptions),s}function d6(e){var s,r,n;e.base.center&&(e.base.width&&(e.base.x=(globalThis.screen.width-e.base.width)/2),e.base.height&&(e.base.y=(globalThis.screen.height-e.base.height)/2));const t=["popup = true"];return e.base.x!==void 0&&t.push(`left = ${e.base.x}`),e.base.y!==void 0&&t.push(`top = ${e.base.y}`),e.base.width!==void 0&&t.push(`width = ${e.base.width}`),e.base.height!==void 0&&t.push(`height = ${e.base.height}`),((s=e.extra)==null?void 0:s.noopener)!==void 0&&t.push(`noopener = ${e.extra.noopener}`),((r=e.extra)==null?void 0:r.noreferrer)!==void 0&&t.push(`noreferrer = ${e.extra.noreferrer}`),globalThis.open(e.url.toString(),(n=e.extra)==null?void 0:n.target,t.join(", "))}function _6(e){return r6?f6(e):d6(e)}const pe={JUPYTER_WORKER_FILE_NAME:"jupyter",JUPYTER_WORKER_BROADCAST_CHANNEL_NAME:"jupyter-worker",JUPYTER_UNKNOWN_VALUE:"unknown",JUPYTER_LAST_RUN_TIME_FORMAT:"YYYY-MM-DD HH:mm:ss.SSS",JUPYTER_RUNTIME_FORMAT:"HH:mm:ss.SSS",JUPYTER_CODE_CELL_ACTION_RUN_CLASS_NAME:"protyle-action__jupyter-client-code-cell-run",JUPYTER_NOTEBOOK_BUTTON_MENU_CLASS_NAME:"protyle-breadcrumb__jupyter-client-notebook-menu",attrs:{kernel:{id:"custom-jupyter-kernel-id",name:"custom-jupyter-kernel-name",language:"custom-jupyter-kernel-language",display_name:"custom-jupyter-kernel-display-name",status:"custom-jupyter-kernel-status",connection_status:"custom-jupyter-kernel-connection-status"},session:{id:"custom-jupyter-session-id",type:"custom-jupyter-session-type",name:"custom-jupyter-session-name",path:"custom-jupyter-session-path"},code:{type:{key:"custom-jupyter-block-type",value:"code"},time:"custom-jupyter-time",output:"custom-jupyter-output-block-id",index:"custom-jupyter-index",execute_input:"custom-jupyter-time-execute-input",execute_reply:"custom-jupyter-time-execute-reply",busy:"custom-jupyter-time-busy",idle:"custom-jupyter-time-idle"},output:{type:{key:"custom-jupyter-block-type",value:"output"},code:"custom-jupyter-code-block-id",index:"custom-jupyter-index"},other:{prompt:"custom-prompt"}},styles:{success:"color: var(--b3-card-success-color); background-color: var(--b3-card-success-background);",info:"color: var(--b3-card-info-color); background-color: var(--b3-card-info-background);",warning:"color: var(--b3-card-warning-color); background-color: var(--b3-card-warning-background);",error:"color: var(--b3-card-error-color); background-color: var(--b3-card-error-background);"}},Fr={jupyter:{server:{enable:!1,settings:{baseUrl:"",appUrl:"",wsUrl:"",token:""}},execute:{goto:!0,content:{silent:!1,store_history:!0,user_expressions:{},allow_stdin:!0,stop_on_error:!0},input:{goto:!0},output:{parser:{xterm:!1,escaped:!0,cntrl:!0}}},inspect:{detail_level:1},complete:{},import:{parser:{xterm:!1,escaped:!0,cntrl:!0}},edit:{delay:125}},xterm:{options:{allowTransparency:!0,disableStdin:!0,convertEol:!0,logLevel:"off",fontFamily:""}}},p6=`<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
<path fill-rule="evenodd" clip-rule="evenodd" d="M10.57 1.14L13.85 4.44L14 4.8V14.5L13.5 15H2.5L2 14.5V1.5L2.5 1H10.22L10.57 1.14ZM10 5H13L10 2V5ZM3 2V14H13V6H9.5L9 5.5V2H3ZM11 7H5V8H11V7ZM5 9H11V10H5V9ZM11 11H5V12H11V11Z" fill="#424242"/>
</svg>
`,m6=`<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
<g clip-path="url(#clip0)">
<path d="M14.4998 3H7.70978L6.8598 2.15002L6.50983 2H1.50983L1.00983 2.5V6.5V13.5L1.50983 14H14.5098L15.0098 13.5V9V3.5L14.4998 3ZM13.9898 11.49V13H1.98981V11.49V7.48999V7H6.4798L6.82977 6.84998L7.68976 5.98999H13.9998V7.48999L13.9898 11.49ZM13.9898 5H7.48981L7.13983 5.15002L6.27985 6.01001H1.99982V3.01001H6.28986L7.13983 3.85999L7.49982 4.01001H13.9998L13.9898 5Z" fill="#424242"/>
</g>
<defs>
<clipPath id="clip0">
<path d="M-0.000183105 0H15.9998V16H-0.000183105V0Z" fill="white"/>
</clipPath>
</defs>
</svg>
`,g6=`<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
<path fill-rule="evenodd" clip-rule="evenodd" d="M6 2.98361V2.97184V2H5.91083C5.59743 2 5.29407 2.06161 5.00128 2.18473C4.70818 2.30798 4.44942 2.48474 4.22578 2.71498C4.00311 2.94422 3.83792 3.19498 3.73282 3.46766L3.73233 3.46898C3.63382 3.7352 3.56814 4.01201 3.53533 4.29917L3.53519 4.30053C3.50678 4.5805 3.4987 4.86844 3.51084 5.16428C3.52272 5.45379 3.52866 5.74329 3.52866 6.03279C3.52866 6.23556 3.48974 6.42594 3.412 6.60507L3.4116 6.60601C3.33687 6.78296 3.23423 6.93866 3.10317 7.07359C2.97644 7.20405 2.82466 7.31055 2.64672 7.3925C2.4706 7.46954 2.28497 7.5082 2.08917 7.5082H2V7.6V8.4V8.4918H2.08917C2.28465 8.4918 2.47001 8.53238 2.64601 8.61334L2.64742 8.61396C2.82457 8.69157 2.97577 8.79762 3.10221 8.93161L3.10412 8.93352C3.23428 9.0637 3.33659 9.21871 3.41129 9.39942L3.41201 9.40108C3.48986 9.58047 3.52866 9.76883 3.52866 9.96721C3.52866 10.2567 3.52272 10.5462 3.51084 10.8357C3.4987 11.1316 3.50677 11.4215 3.53516 11.7055L3.53535 11.7072C3.56819 11.9903 3.63387 12.265 3.73232 12.531L3.73283 12.5323C3.83793 12.805 4.00311 13.0558 4.22578 13.285C4.44942 13.5153 4.70818 13.692 5.00128 13.8153C5.29407 13.9384 5.59743 14 5.91083 14H6V13.2V13.0164H5.91083C5.71095 13.0164 5.52346 12.9777 5.34763 12.9008C5.17396 12.8191 5.02194 12.7126 4.89086 12.5818C4.76386 12.4469 4.66104 12.2911 4.58223 12.1137C4.50838 11.9346 4.47134 11.744 4.47134 11.541C4.47134 11.3127 4.4753 11.0885 4.48321 10.8686C4.49125 10.6411 4.49127 10.4195 4.48324 10.2039C4.47914 9.98246 4.46084 9.76883 4.42823 9.56312C4.39513 9.35024 4.33921 9.14757 4.26039 8.95536C4.18091 8.76157 4.07258 8.57746 3.93616 8.40298C3.82345 8.25881 3.68538 8.12462 3.52283 8C3.68538 7.87538 3.82345 7.74119 3.93616 7.59702C4.07258 7.42254 4.18091 7.23843 4.26039 7.04464C4.33913 6.85263 4.39513 6.65175 4.42826 6.44285C4.46082 6.2333 4.47914 6.01973 4.48324 5.80219C4.49127 5.58262 4.49125 5.36105 4.48321 5.13749C4.4753 4.9134 4.47134 4.68725 4.47134 4.45902C4.47134 4.26019 4.50833 4.07152 4.58238 3.89205C4.66135 3.71034 4.76421 3.55475 4.89086 3.42437C5.02193 3.28942 5.17461 3.18275 5.34802 3.10513C5.5238 3.02427 5.71113 2.98361 5.91083 2.98361H6ZM10 13.0164V13.0282V14H10.0892C10.4026 14 10.7059 13.9384 10.9987 13.8153C11.2918 13.692 11.5506 13.5153 11.7742 13.285C11.9969 13.0558 12.1621 12.805 12.2672 12.5323L12.2677 12.531C12.3662 12.2648 12.4319 11.988 12.4647 11.7008L12.4648 11.6995C12.4932 11.4195 12.5013 11.1316 12.4892 10.8357C12.4773 10.5462 12.4713 10.2567 12.4713 9.96721C12.4713 9.76444 12.5103 9.57406 12.588 9.39493L12.5884 9.39399C12.6631 9.21704 12.7658 9.06134 12.8968 8.92642C13.0236 8.79595 13.1753 8.68945 13.3533 8.6075C13.5294 8.53046 13.715 8.4918 13.9108 8.4918H14V8.4V7.6V7.5082H13.9108C13.7153 7.5082 13.53 7.46762 13.354 7.38666L13.3526 7.38604C13.1754 7.30844 13.0242 7.20238 12.8978 7.06839L12.8959 7.06648C12.7657 6.9363 12.6634 6.78129 12.5887 6.60058L12.588 6.59892C12.5101 6.41953 12.4713 6.23117 12.4713 6.03279C12.4713 5.74329 12.4773 5.45379 12.4892 5.16428C12.5013 4.86842 12.4932 4.57848 12.4648 4.29454L12.4646 4.29285C12.4318 4.00971 12.3661 3.73502 12.2677 3.46897L12.2672 3.46766C12.1621 3.19499 11.9969 2.94422 11.7742 2.71498C11.5506 2.48474 11.2918 2.30798 10.9987 2.18473C10.7059 2.06161 10.4026 2 10.0892 2H10V2.8V2.98361H10.0892C10.2891 2.98361 10.4765 3.0223 10.6524 3.09917C10.826 3.18092 10.9781 3.28736 11.1091 3.41823C11.2361 3.55305 11.339 3.70889 11.4178 3.88628C11.4916 4.0654 11.5287 4.25596 11.5287 4.45902C11.5287 4.68727 11.5247 4.91145 11.5168 5.13142C11.5088 5.35894 11.5087 5.58049 11.5168 5.79605C11.5209 6.01754 11.5392 6.23117 11.5718 6.43688C11.6049 6.64976 11.6608 6.85243 11.7396 7.04464C11.8191 7.23843 11.9274 7.42254 12.0638 7.59702C12.1765 7.74119 12.3146 7.87538 12.4772 8C12.3146 8.12462 12.1765 8.25881 12.0638 8.40298C11.9274 8.57746 11.8191 8.76157 11.7396 8.95536C11.6609 9.14737 11.6049 9.34825 11.5717 9.55715C11.5392 9.7667 11.5209 9.98027 11.5168 10.1978C11.5087 10.4174 11.5087 10.6389 11.5168 10.8625C11.5247 11.0866 11.5287 11.3128 11.5287 11.541C11.5287 11.7398 11.4917 11.9285 11.4176 12.1079C11.3386 12.2897 11.2358 12.4452 11.1091 12.5756C10.9781 12.7106 10.8254 12.8173 10.652 12.8949C10.4762 12.9757 10.2889 13.0164 10.0892 13.0164H10Z" fill="#424242"/>
</svg>
`,v6=`<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
<path fill-rule="evenodd" clip-rule="evenodd" d="M1.49915 2H14.4991L14.9991 2.5V12.5L14.4991 13H1.49915L0.999146 12.5V2.5L1.49915 2ZM1.99915 3V12H13.9991V3H1.99915ZM3.99915 5H11.9991V6H3.99915V5ZM9.99915 7H3.99915V8H9.99915V7ZM3.99915 9H7.99915V10H3.99915V9Z" fill="#424242"/>
</svg>
`,b6=`<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
<path fill-rule="evenodd" clip-rule="evenodd" d="M11.1052 4.5613L7.67505 7.98827L6.54072 6.86834L8.61098 4.78848H3.81131C3.17483 4.78848 2.56442 5.04132 2.11436 5.49138C1.6643 5.94144 1.41147 6.55184 1.41147 7.18832C1.41147 7.8248 1.6643 8.43521 2.11436 8.88527C2.56442 9.33532 3.17483 9.58816 3.81131 9.58816H4.70085V11.1881H3.8209C2.7921 11.142 1.8207 10.7009 1.10896 9.95661C0.397222 9.21231 0 8.22216 0 7.19232C0 6.16249 0.397222 5.17234 1.10896 4.42803C1.8207 3.68373 2.7921 3.24263 3.8209 3.19659H8.62058L6.54072 1.13112L7.67505 0L11.1052 3.43177V4.5613ZM16.6201 24H7.0207L6.22075 23.2V10.4121L7.0207 9.61215H16.6201L17.42 10.4121V23.2L16.6201 24ZM7.82064 22.4001H15.8201V11.212H7.82064V22.4001ZM13.4203 1.6015H23.0196L23.8196 2.40145V15.1878L23.0196 15.9877H19.0199V14.3878H22.2197V3.20139H14.2202V7.98828H12.6203V2.40145L13.4203 1.6015ZM14.2202 12.7879H9.42053V14.3878H14.2202V12.7879ZM9.42053 15.9877H14.2202V17.5876H9.42053V15.9877ZM14.2202 19.1875H9.42053V20.7874H14.2202V19.1875ZM15.8201 4.78848H20.6198V6.38838H15.8201V4.78848ZM20.6198 11.188H19.0199V12.7879H20.6198V11.188ZM17.2824 8.01228V7.98828H20.6198V9.58817H18.8583L17.2824 8.01228Z" fill="#424242"/>
</svg>
`,y6=`<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M11.34 9.70998H12.05L14.72 7.04005V6.32997L13.38 5.00001H12.68L10.86 6.81007H5.86V5.56007L7.71999 3.70997V3L5.71998 1H5.00001L1 5.00001V5.70997L3 7.70998H3.71003L4.84998 6.56007V12.35L5.34999 12.85H10V13.37L11.33 14.71H12.04L14.7101 12.0401V11.33L13.37 10H12.67L10.81 11.85H5.81001V7.84999H10V8.32997L11.34 9.70998ZM13.0301 6.06007L13.66 6.68995L11.66 8.68996L11.0301 8.06007L13.0301 6.06007ZM13.0301 11.0601L13.66 11.69L11.66 13.69L11.0301 13.0601L13.0301 11.0601ZM3.34998 6.65004L2.06 5.34999L5.34999 2.06006L6.65004 3.34998L3.34998 6.65004Z" fill="#EE9D28"/>
</svg>
`,C6=`<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
<path fill-rule="evenodd" clip-rule="evenodd" d="M8 1.00305C6.14348 1.00305 4.36299 1.74059 3.05023 3.05334C1.73748 4.3661 1 6.14654 1 8.00305V8.43311C1.09 9.94311 2.91 10.2231 4 9.13306C4.35648 8.81625 4.82054 8.64759 5.29724 8.66162C5.77395 8.67565 6.22729 8.87127 6.56451 9.2085C6.90174 9.54572 7.09736 9.99912 7.11139 10.4758C7.12542 10.9525 6.95682 11.4166 6.64001 11.7731C5.54001 12.9331 5.85 14.843 7.44 14.973H8.03998C9.89649 14.973 11.677 14.2356 12.9897 12.9229C14.3025 11.6101 15.04 9.82954 15.04 7.97302C15.04 6.11651 14.3025 4.33607 12.9897 3.02332C11.677 1.71056 9.89649 0.973022 8.03998 0.973022L8 1.00305ZM8 14.0031H7.47998C7.34751 13.9989 7.22047 13.9495 7.12 13.863C7.04052 13.7807 6.98815 13.6761 6.96997 13.5631C6.9381 13.3682 6.95328 13.1684 7.01416 12.9806C7.07504 12.7927 7.17989 12.6222 7.32001 12.483C7.84048 11.9474 8.13165 11.2299 8.13165 10.483C8.13165 9.73615 7.84048 9.0187 7.32001 8.48303C7.05348 8.21635 6.73699 8.00481 6.38867 7.86047C6.04036 7.71614 5.66702 7.64185 5.28998 7.64185C4.91294 7.64185 4.5396 7.71614 4.19128 7.86047C3.84297 8.00481 3.52654 8.21635 3.26001 8.48303C3.15068 8.61081 3.01089 8.709 2.85358 8.76843C2.69626 8.82786 2.52649 8.84657 2.35999 8.823C2.27593 8.80694 2.19903 8.76498 2.14001 8.703C2.07131 8.6224 2.03556 8.5189 2.03998 8.41309V8.04309C2.03998 6.8564 2.39192 5.69629 3.05121 4.70959C3.7105 3.7229 4.64754 2.95388 5.7439 2.49976C6.84025 2.04563 8.04669 1.92681 9.21057 2.15833C10.3745 2.38984 11.4435 2.9613 12.2827 3.80042C13.1218 4.63953 13.6932 5.70867 13.9247 6.87256C14.1562 8.03644 14.0374 9.24275 13.5833 10.3391C13.1291 11.4355 12.3601 12.3726 11.3734 13.0319C10.3867 13.6911 9.22667 14.0431 8.03998 14.0431L8 14.0031ZM9 3.99683C9 4.54911 8.55228 4.99683 8 4.99683C7.44771 4.99683 7 4.54911 7 3.99683C7 3.44454 7.44771 2.99683 8 2.99683C8.55228 2.99683 9 3.44454 9 3.99683ZM12 11.0037C12 11.5559 11.5523 12.0037 11 12.0037C10.4477 12.0037 10 11.5559 10 11.0037C10 10.4514 10.4477 10.0037 11 10.0037C11.5523 10.0037 12 10.4514 12 11.0037ZM5 6.00415C5.55229 6.00415 6 5.55644 6 5.00415C6 4.45187 5.55229 4.00415 5 4.00415C4.44772 4.00415 4 4.45187 4 5.00415C4 5.55644 4.44772 6.00415 5 6.00415ZM12 5.00415C12 5.55644 11.5523 6.00415 11 6.00415C10.4477 6.00415 10 5.55644 10 5.00415C10 4.45187 10.4477 4.00415 11 4.00415C11.5523 4.00415 12 4.45187 12 5.00415ZM13.0001 7.99939C13.0001 8.55167 12.5524 8.99939 12.0001 8.99939C11.4478 8.99939 11.0001 8.55167 11.0001 7.99939C11.0001 7.4471 11.4478 6.99939 12.0001 6.99939C12.5524 6.99939 13.0001 7.4471 13.0001 7.99939Z" fill="#424242"/>
</svg>
`,S6=`<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
<path fill-rule="evenodd" clip-rule="evenodd" d="M4 6H12V7H4V6ZM12 9H4V10H12V9Z" fill="#424242"/>
<path fill-rule="evenodd" clip-rule="evenodd" d="M1 4L2 3H14L15 4V12L14 13H2L1 12V4ZM2 4V12H14V4H2Z" fill="#424242"/>
</svg>
`,w6=`<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
<path fill-rule="evenodd" clip-rule="evenodd" d="M7 3L8 2H14L15 3V8L14 9H10V8H14V3H8V6H7V3ZM9 9V8L8 7H7H2L1 8V13L2 14H8L9 13V9ZM8 8V9V13H2V8H7H8ZM9.41421 7L9 6.58579V6H13V7H9.41421ZM9 4H13V5H9V4ZM7 10H3V11H7V10Z" fill="#007ACC"/>
</svg>
`,k6=`<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
<path fill-rule="evenodd" clip-rule="evenodd" d="M14 2H8L7 3V6H8V3H14V8H10V9H14L15 8V3L14 2ZM9 6H13V7H9.41L9 6.59V6ZM7 7H2L1 8V13L2 14H8L9 13V8L8 7H7ZM8 13H2V8H8V9V13ZM3 9H7V10H3V9ZM3 11H7V12H3V11ZM9 4H13V5H9V4Z" fill="#EE9D28"/>
</svg>
`,L6=`<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
<path fill-rule="evenodd" clip-rule="evenodd" d="M7.41354 1.55996L8.31152 1H11.6056L12.424 2.57465L10.2356 6H12.0174L12.7363 7.69512L5.61943 15L4.01675 13.837L6.11943 10H4.89798L4 8.55996L7.41354 1.55996ZM7.78033 9L4.90054 14.3049L12.0174 7H8.31152L11.6056 2H8.31152L4.89798 9H7.78033Z" fill="#FF8E00"/>
</svg>
`,E6=`<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M14.45 4.5L9.44995 2H8.55005L1.55005 5.5L1 6.39001V10.89L1.55005 11.79L6.55005 14.29H7.44995L14.45 10.79L15 9.89001V5.39001L14.45 4.5ZM6.44995 13.14L1.94995 10.89V7.17004L6.44995 9.17004V13.14ZM6.94995 8.33997L2.29004 6.22998L8.94995 2.89001L13.62 5.22998L6.94995 8.33997ZM13.95 9.89001L7.44995 13.14V9.20996L13.95 6.20996V9.89001Z" fill="#007ACC"/>
</svg>
`,M6=`<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M11.4965 4C10.655 3.9989 9.84136 4.30189 9.20557 4.85315C8.56977 5.40442 8.15465 6.16684 8.0365 7H4.9364C4.8147 6.52867 4.52533 6.11794 4.12244 5.84473C3.71955 5.57152 3.23083 5.45466 2.74792 5.51599C2.26502 5.57733 1.82106 5.81261 1.49927 6.17786C1.17747 6.54311 1 7.01322 1 7.5C1 7.98679 1.17747 8.45689 1.49927 8.82215C1.82106 9.1874 2.26502 9.42267 2.74792 9.48401C3.23083 9.54535 3.71955 9.42848 4.12244 9.15528C4.52533 8.88207 4.8147 8.47133 4.9364 8H8.0365C8.13236 8.66418 8.41717 9.28683 8.85693 9.7937C9.2967 10.3006 9.87284 10.6703 10.5168 10.8589C11.1609 11.0475 11.8455 11.047 12.4893 10.8574C13.133 10.6679 13.7087 10.2973 14.1477 9.7898C14.5867 9.28227 14.8706 8.65919 14.9655 7.99488C15.0603 7.33056 14.9621 6.65298 14.6827 6.04285C14.4034 5.43272 13.9545 4.91578 13.3895 4.55359C12.8246 4.19141 12.1675 3.99922 11.4965 4ZM11.4965 10C11.002 10 10.5187 9.85332 10.1075 9.57862C9.69642 9.30391 9.37599 8.91348 9.18677 8.45667C8.99755 7.99985 8.94809 7.49728 9.04456 7.01233C9.14102 6.52738 9.37901 6.08181 9.72864 5.73218C10.0783 5.38255 10.5238 5.14456 11.0088 5.0481C11.4937 4.95164 11.9963 5.00109 12.4531 5.19031C12.9099 5.37953 13.3004 5.69996 13.5751 6.11109C13.8498 6.52221 13.9965 7.00555 13.9965 7.5C13.9965 8.16304 13.7331 8.79898 13.2643 9.26783C12.7954 9.73667 12.1595 10 11.4965 10Z" fill="#007ACC"/>
</svg>
`,D6=`<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M15 4H10V3H15V4ZM14 7H12V8H14V7ZM10 7H1V8H10V7ZM12 13H1V14H12V13ZM7 10H1V11H7V10ZM15 10H10V11H15V10ZM8 2V5H1V2H8ZM7 3H2V4H7V3Z" fill="#424242"/>
</svg>
`,Ur=`<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M13.51 4L8.51001 1H7.51001L2.51001 4L2.02002 4.85999V10.86L2.51001 11.71L7.51001 14.71H8.51001L13.51 11.71L14 10.86V4.85999L13.51 4ZM7.51001 13.5601L3.01001 10.86V5.69995L7.51001 8.15002V13.5601ZM3.27002 4.69995L8.01001 1.85999L12.75 4.69995L8.01001 7.29004L3.27002 4.69995ZM13.01 10.86L8.51001 13.5601V8.15002L13.01 5.69995V10.86Z" fill="#652D90"/>
</svg>
`,T6=`<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
<path fill-rule="evenodd" clip-rule="evenodd" d="M2.87289 1.10023C3.20768 1.23579 3.47545 1.498 3.61802 1.82988C3.69032 1.99959 3.72675 2.18242 3.72502 2.36688C3.72617 2.54999 3.68975 2.7314 3.61802 2.89988C3.51299 3.14567 3.33782 3.35503 3.11442 3.50177C2.89102 3.64851 2.6293 3.72612 2.36202 3.72488C2.17924 3.72592 1.99818 3.68951 1.83002 3.61788C1.58298 3.51406 1.37227 3.33932 1.22453 3.11575C1.0768 2.89219 0.998666 2.62984 1.00002 2.36188C0.99913 2.17921 1.03519 1.99825 1.10602 1.82988C1.24337 1.50314 1.50328 1.24323 1.83002 1.10588C2.16332 0.966692 2.53809 0.964661 2.87289 1.10023ZM2.57502 2.86488C2.7054 2.80913 2.80927 2.70526 2.86502 2.57488C2.8929 2.50838 2.90718 2.43698 2.90702 2.36488C2.90813 2.2654 2.88215 2.1675 2.83185 2.08167C2.78156 1.99584 2.70884 1.92531 2.62151 1.87767C2.53418 1.83002 2.43553 1.80705 2.33614 1.81121C2.23674 1.81537 2.14035 1.8465 2.05731 1.90128C1.97426 1.95606 1.9077 2.03241 1.86475 2.12215C1.8218 2.21188 1.80409 2.31161 1.81352 2.41065C1.82294 2.50968 1.85915 2.60428 1.91825 2.6843C1.97736 2.76433 2.05713 2.82675 2.14902 2.86488C2.28549 2.92089 2.43854 2.92089 2.57502 2.86488ZM6.42995 1.1095L1.10967 6.42977L1.79557 7.11567L7.11584 1.7954L6.42995 1.1095ZM11.5 8.99999H12.5V11.5H15V12.5H12.5V15H11.5V12.5H9V11.5H11.5V8.99999ZM5.76777 9.52509L6.47487 10.2322L4.70711 12L6.47487 13.7677L5.76777 14.4748L4 12.7071L2.23223 14.4748L1.52513 13.7677L3.29289 12L1.52513 10.2322L2.23223 9.52509L4 11.2929L5.76777 9.52509ZM7.11802 5.32988C7.01442 5.08268 6.83973 4.87183 6.61612 4.72406C6.3925 4.57629 6.13004 4.49826 5.86202 4.49988C5.67935 4.49899 5.49839 4.53505 5.33002 4.60588C5.00328 4.74323 4.74337 5.00314 4.60602 5.32988C4.53588 5.49478 4.49897 5.67191 4.49741 5.8511C4.49586 6.0303 4.52967 6.20804 4.59693 6.37414C4.66419 6.54024 4.76356 6.69143 4.88936 6.81906C5.01516 6.94669 5.1649 7.04823 5.33002 7.11788C5.49867 7.18848 5.67968 7.22484 5.86252 7.22484C6.04535 7.22484 6.22636 7.18848 6.39502 7.11788C6.64201 7.01388 6.8527 6.83913 7.00058 6.61563C7.14845 6.39213 7.22689 6.12987 7.22602 5.86188C7.22655 5.67905 7.1898 5.49803 7.11802 5.32988ZM6.36502 6.07488C6.33766 6.13937 6.29829 6.19808 6.24902 6.24788C6.19908 6.29724 6.14042 6.33691 6.07602 6.36488C6.00854 6.39297 5.93611 6.40725 5.86302 6.40688C5.78991 6.40744 5.71744 6.39315 5.65002 6.36488C5.58541 6.33729 5.52668 6.29757 5.47702 6.24788C5.42691 6.19856 5.38713 6.13975 5.36002 6.07488C5.30401 5.9384 5.30401 5.78536 5.36002 5.64888C5.41536 5.51846 5.51941 5.41477 5.65002 5.35988C5.71737 5.33126 5.78984 5.31663 5.86302 5.31688C5.93618 5.31685 6.0086 5.33147 6.07602 5.35988C6.14037 5.38749 6.19904 5.42682 6.24902 5.47588C6.29786 5.52603 6.33717 5.58465 6.36502 5.64888C6.3934 5.7163 6.40802 5.78872 6.40802 5.86188C6.40802 5.93503 6.3934 6.00745 6.36502 6.07488ZM14 3H10V4H14V3Z" fill="#424242"/>
</svg>
`,R6=`<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
<path fill-rule="evenodd" clip-rule="evenodd" d="M11 6H10V5.5C10 5.22386 9.77616 5 9.50001 5H8.47902V10.5C8.47902 10.7761 8.70288 11 8.97902 11H9.47902V12H6.47902V11H6.97902C7.25516 11 7.47902 10.7761 7.47902 10.5V5H6.50001C6.22387 5 6.00001 5.22386 6.00001 5.5V6H5.00001V4H11V6ZM13.9142 8.0481L12.4519 6.58581L13.159 5.87871L14.9749 7.69454V8.40165L13.2071 10.1694L12.5 9.46231L13.9142 8.0481ZM3.5481 9.4623L2.08581 8.00002L3.50002 6.58581L2.79291 5.8787L1.02515 7.64647V8.35357L2.841 10.1694L3.5481 9.4623Z" fill="#424242"/>
</svg>
`,A6=`<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M2.80723 14.9754C2.57119 14.9721 2.33826 14.9211 2.12247 14.8254C1.90667 14.7297 1.71248 14.5913 1.55158 14.4186C1.2385 14.1334 1.04433 13.7408 1.00775 13.3189C0.966225 12.8828 1.09269 12.4473 1.36133 12.1013C2.56779 10.8289 4.9473 8.4494 6.67811 6.75479C6.30983 5.75887 6.32704 4.66127 6.72637 3.67739C7.05474 2.85876 7.63869 2.16805 8.39129 1.70807C8.9817 1.31706 9.66031 1.07944 10.3657 1.01673C11.0711 0.954022 11.7809 1.06819 12.4311 1.34892L13.0482 1.6162L10.1824 4.56738L11.4371 5.82582L14.3809 2.94887L14.6482 3.56788C14.8735 4.08976 14.993 4.65119 14.9997 5.21961C15.0064 5.78802 14.9002 6.35211 14.6872 6.87915C14.476 7.40029 14.1623 7.87368 13.7647 8.27122C13.5394 8.49169 13.2904 8.68653 13.0222 8.85218C12.4673 9.22275 11.8324 9.45636 11.1697 9.5338C10.5069 9.61124 9.83521 9.5303 9.20982 9.29764C8.11194 10.4113 5.37142 13.1704 3.89119 14.5522C3.59426 14.8219 3.20832 14.9726 2.80723 14.9754ZM10.7448 1.92802C10.087 1.92637 9.44359 2.12018 8.89614 2.48485C8.68265 2.6152 8.48437 2.76897 8.30498 2.9433C7.82789 3.42423 7.50926 4.03953 7.39182 4.70669C7.27437 5.37385 7.36374 6.06098 7.64792 6.67591L7.78342 6.97288L7.55048 7.20025C5.81224 8.89672 3.28146 11.4201 2.06479 12.7045C1.95646 12.8658 1.91012 13.0608 1.93435 13.2535C1.95857 13.4463 2.05171 13.6238 2.19657 13.7532C2.28005 13.8462 2.38177 13.9211 2.49541 13.9731C2.59557 14.0184 2.70383 14.043 2.81373 14.0455C2.98064 14.0413 3.14044 13.977 3.26383 13.8646C4.83687 12.3964 7.87622 9.32641 8.76807 8.42435L8.9973 8.19326L9.29242 8.32783C9.80618 8.56732 10.3731 8.66985 10.9382 8.62545C11.5033 8.58106 12.0473 8.39125 12.5174 8.07447C12.7313 7.9426 12.9296 7.78694 13.1085 7.61045C13.4183 7.30153 13.6631 6.93374 13.8286 6.52874C13.994 6.12375 14.0767 5.68974 14.0719 5.25228C14.0719 5.03662 14.0505 4.82148 14.0078 4.61007L11.4306 7.12508L8.87944 4.57759L11.3944 1.98834C11.1804 1.94674 10.9628 1.92653 10.7448 1.92802Z" fill="#424242"/>
</svg>
`,O6=`<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
<path fill-rule="evenodd" clip-rule="evenodd" d="M4 1L3 2V14L4 15H12L13 14V2L12 1H4ZM4 3V2H12V14H4V13H6V12H4V10H8V9H4V7H6V6H4V4H8V3H4Z" fill="#424242"/>
</svg>
`,B6=`<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
<path fill-rule="evenodd" clip-rule="evenodd" d="M2.5 1L2 1.5V13H3V2H14V13H15V1.5L14.5 1H2.5ZM2 15V14H3V15H2ZM5 14.0001H4V15.0001H5V14.0001ZM6 14.0001H7V15.0001H6V14.0001ZM9 14.0001H8V15.0001H9V14.0001ZM10 14.0001H11V15.0001H10V14.0001ZM15 15.0001V14.0001H14V15.0001H15ZM12 14.0001H13V15.0001H12V14.0001Z" fill="#424242"/>
</svg>
`,H6=`<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
<path fill-rule="evenodd" clip-rule="evenodd" d="M2 2L1 3V12L2 13H14L15 12V3L14 2H2ZM2 12V3H14V12H2ZM5.3556 8.93017H6V7.22067C6 6.40689 5.68534 6 5.05603 6C4.92098 6 4.77083 6.02421 4.6056 6.07263C4.44181 6.12104 4.3125 6.17691 4.21767 6.24022V6.90503C4.45474 6.70205 4.70474 6.60056 4.96767 6.60056C5.22917 6.60056 5.35991 6.75698 5.35991 7.06983L4.76078 7.17318C4.25359 7.25885 4 7.57914 4 8.13408C4 8.39665 4.06106 8.60708 4.18319 8.76536C4.30675 8.92179 4.47557 9 4.68966 9C4.97989 9 5.19899 8.83985 5.34698 8.51955H5.3556V8.93017ZM5.35991 7.57542V7.76816C5.35991 7.9432 5.31968 8.08845 5.23922 8.20391C5.15876 8.3175 5.0546 8.3743 4.92672 8.3743C4.83477 8.3743 4.76149 8.34264 4.7069 8.27933C4.65374 8.21415 4.62716 8.13128 4.62716 8.03073C4.62716 7.80912 4.73779 7.6797 4.95905 7.64246L5.35991 7.57542ZM7.60094 8.62622H7.59343V8.93511H7V5H7.59343V6.67683H7.60094C7.74742 6.36708 7.95587 6.2122 8.22629 6.2122C8.47418 6.2122 8.6651 6.32987 8.79906 6.56522C8.93302 6.80056 9 7.12243 9 7.53082C9 7.97383 8.92175 8.32944 8.76526 8.59766C8.60876 8.86589 8.39969 9 8.13803 9C7.90141 9 7.72238 8.87541 7.60094 8.62622ZM7.58404 7.50487V7.77742C7.58404 7.94873 7.61972 8.09063 7.69108 8.20311C7.76244 8.3156 7.85383 8.37184 7.96526 8.37184C8.10047 8.37184 8.20501 8.30002 8.27887 8.15639C8.35399 8.01103 8.39155 7.80597 8.39155 7.54121C8.39155 7.32144 8.35712 7.15012 8.28826 7.02726C8.22066 6.90266 8.12363 6.84036 7.99718 6.84036C7.87825 6.84036 7.77934 6.9018 7.70047 7.02466C7.62285 7.14752 7.58404 7.30759 7.58404 7.50487ZM11.2616 9C11.5834 9 11.8295 8.94227 12 8.82682V8.11732C11.82 8.25512 11.636 8.32402 11.448 8.32402C11.2362 8.32402 11.0697 8.25233 10.9486 8.10894C10.8276 7.96369 10.767 7.76443 10.767 7.51117C10.767 7.25047 10.8299 7.04656 10.9558 6.89944C11.0832 6.75047 11.2553 6.67598 11.4719 6.67598C11.6663 6.67598 11.8423 6.74488 12 6.88268V6.13408C11.871 6.04469 11.6623 6 11.374 6C10.9566 6 10.6229 6.1406 10.3728 6.42179C10.1243 6.70112 10 7.0838 10 7.56983C10 7.99069 10.1163 8.33426 10.3489 8.60056C10.5814 8.86685 10.8857 9 11.2616 9Z" fill="#424242"/>
</svg>
`,P6=`<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
<path fill-rule="evenodd" clip-rule="evenodd" d="M14 3H2V6H14V3ZM2 10H5V13H2V10ZM11 10H14V13H11V10Z" fill="#424242"/>
</svg>
`,Ba=`<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
<path fill-rule="evenodd" clip-rule="evenodd" d="M2 5H4V4H1.5L1 4.5V12.5L1.5 13H4V12H2V5ZM14.5 4H12V5H14V12H12V13H14.5L15 12.5V4.5L14.5 4ZM11.76 6.56995L12 7V9.51001L11.7 9.95996L7.19995 11.96H6.73999L4.23999 10.46L4 10.03V7.53003L4.30005 7.06995L8.80005 5.06995H9.26001L11.76 6.56995ZM5 9.70996L6.5 10.61V9.28003L5 8.38V9.70996ZM5.57996 7.56006L7.03003 8.43005L10.42 6.93005L8.96997 6.06006L5.57996 7.56006ZM7.53003 10.73L11.03 9.17004V7.77002L7.53003 9.31995V10.73Z" fill="#007ACC"/>
</svg>
`,x6=`<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
<path fill-rule="evenodd" clip-rule="evenodd" d="M10.57 1.14L13.85 4.44L14 4.8V14.5L13.5 15H2.5L2 14.5V1.5L2.5 1H10.22L10.57 1.14ZM10 5H13L10 2V5ZM3 2V14H13V6H9.5L9 5.5V2H3ZM11 7H5V8H11V7ZM5 9H11V10H5V9ZM11 11H5V12H11V11Z" fill="#C5C5C5"/>
</svg>
`,I6=`<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M14.5 3H7.70996L6.85999 2.15002L6.51001 2H1.51001L1.01001 2.5V6.5V13.5L1.51001 14H14.51L15.01 13.5V9V3.5L14.5 3ZM13.99 11.49V13H1.98999V11.49V7.48999V7H6.47998L6.82996 6.84998L7.68994 5.98999H14V7.48999L13.99 11.49ZM13.99 5H7.48999L7.14001 5.15002L6.28003 6.01001H2V3.01001H6.29004L7.14001 3.85999L7.5 4.01001H14L13.99 5Z" fill="#C5C5C5"/>
</svg>
`,N6=`<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
<path fill-rule="evenodd" clip-rule="evenodd" d="M6 2.98361V2.97184V2H5.91083C5.59743 2 5.29407 2.06161 5.00128 2.18473C4.70818 2.30798 4.44942 2.48474 4.22578 2.71498C4.00311 2.94422 3.83792 3.19498 3.73282 3.46766L3.73233 3.46898C3.63382 3.7352 3.56814 4.01201 3.53533 4.29917L3.53519 4.30053C3.50678 4.5805 3.4987 4.86844 3.51084 5.16428C3.52272 5.45379 3.52866 5.74329 3.52866 6.03279C3.52866 6.23556 3.48974 6.42594 3.412 6.60507L3.4116 6.60601C3.33687 6.78296 3.23423 6.93866 3.10317 7.07359C2.97644 7.20405 2.82466 7.31055 2.64672 7.3925C2.4706 7.46954 2.28497 7.5082 2.08917 7.5082H2V7.6V8.4V8.4918H2.08917C2.28465 8.4918 2.47001 8.53238 2.64601 8.61334L2.64742 8.61396C2.82457 8.69157 2.97577 8.79762 3.10221 8.93161L3.10412 8.93352C3.23428 9.0637 3.33659 9.21871 3.41129 9.39942L3.41201 9.40108C3.48986 9.58047 3.52866 9.76883 3.52866 9.96721C3.52866 10.2567 3.52272 10.5462 3.51084 10.8357C3.4987 11.1316 3.50677 11.4215 3.53516 11.7055L3.53535 11.7072C3.56819 11.9903 3.63387 12.265 3.73232 12.531L3.73283 12.5323C3.83793 12.805 4.00311 13.0558 4.22578 13.285C4.44942 13.5153 4.70818 13.692 5.00128 13.8153C5.29407 13.9384 5.59743 14 5.91083 14H6V13.2V13.0164H5.91083C5.71095 13.0164 5.52346 12.9777 5.34763 12.9008C5.17396 12.8191 5.02194 12.7126 4.89086 12.5818C4.76386 12.4469 4.66104 12.2911 4.58223 12.1137C4.50838 11.9346 4.47134 11.744 4.47134 11.541C4.47134 11.3127 4.4753 11.0885 4.48321 10.8686C4.49125 10.6411 4.49127 10.4195 4.48324 10.2039C4.47914 9.98246 4.46084 9.76883 4.42823 9.56312C4.39513 9.35024 4.33921 9.14757 4.26039 8.95536C4.18091 8.76157 4.07258 8.57746 3.93616 8.40298C3.82345 8.25881 3.68538 8.12462 3.52283 8C3.68538 7.87538 3.82345 7.74119 3.93616 7.59702C4.07258 7.42254 4.18091 7.23843 4.26039 7.04464C4.33913 6.85263 4.39513 6.65175 4.42826 6.44285C4.46082 6.2333 4.47914 6.01973 4.48324 5.80219C4.49127 5.58262 4.49125 5.36105 4.48321 5.13749C4.4753 4.9134 4.47134 4.68725 4.47134 4.45902C4.47134 4.26019 4.50833 4.07152 4.58238 3.89205C4.66135 3.71034 4.76421 3.55475 4.89086 3.42437C5.02193 3.28942 5.17461 3.18275 5.34802 3.10513C5.5238 3.02427 5.71113 2.98361 5.91083 2.98361H6ZM10 13.0164V13.0282V14H10.0892C10.4026 14 10.7059 13.9384 10.9987 13.8153C11.2918 13.692 11.5506 13.5153 11.7742 13.285C11.9969 13.0558 12.1621 12.805 12.2672 12.5323L12.2677 12.531C12.3662 12.2648 12.4319 11.988 12.4647 11.7008L12.4648 11.6995C12.4932 11.4195 12.5013 11.1316 12.4892 10.8357C12.4773 10.5462 12.4713 10.2567 12.4713 9.96721C12.4713 9.76444 12.5103 9.57406 12.588 9.39493L12.5884 9.39399C12.6631 9.21704 12.7658 9.06134 12.8968 8.92642C13.0236 8.79595 13.1753 8.68945 13.3533 8.6075C13.5294 8.53046 13.715 8.4918 13.9108 8.4918H14V8.4V7.6V7.5082H13.9108C13.7153 7.5082 13.53 7.46762 13.354 7.38666L13.3526 7.38604C13.1754 7.30844 13.0242 7.20238 12.8978 7.06839L12.8959 7.06648C12.7657 6.9363 12.6634 6.78129 12.5887 6.60058L12.588 6.59892C12.5101 6.41953 12.4713 6.23117 12.4713 6.03279C12.4713 5.74329 12.4773 5.45379 12.4892 5.16428C12.5013 4.86842 12.4932 4.57848 12.4648 4.29454L12.4646 4.29285C12.4318 4.00971 12.3661 3.73502 12.2677 3.46897L12.2672 3.46766C12.1621 3.19499 11.9969 2.94422 11.7742 2.71498C11.5506 2.48474 11.2918 2.30798 10.9987 2.18473C10.7059 2.06161 10.4026 2 10.0892 2H10V2.8V2.98361H10.0892C10.2891 2.98361 10.4765 3.0223 10.6524 3.09917C10.826 3.18092 10.9781 3.28736 11.1091 3.41823C11.2361 3.55305 11.339 3.70889 11.4178 3.88628C11.4916 4.0654 11.5287 4.25596 11.5287 4.45902C11.5287 4.68727 11.5247 4.91145 11.5168 5.13142C11.5088 5.35894 11.5087 5.58049 11.5168 5.79605C11.5209 6.01754 11.5392 6.23117 11.5718 6.43688C11.6049 6.64976 11.6608 6.85243 11.7396 7.04464C11.8191 7.23843 11.9274 7.42254 12.0638 7.59702C12.1765 7.74119 12.3146 7.87538 12.4772 8C12.3146 8.12462 12.1765 8.25881 12.0638 8.40298C11.9274 8.57746 11.8191 8.76157 11.7396 8.95536C11.6609 9.14737 11.6049 9.34825 11.5717 9.55715C11.5392 9.7667 11.5209 9.98027 11.5168 10.1978C11.5087 10.4174 11.5087 10.6389 11.5168 10.8625C11.5247 11.0866 11.5287 11.3128 11.5287 11.541C11.5287 11.7398 11.4917 11.9285 11.4176 12.1079C11.3386 12.2897 11.2358 12.4452 11.1091 12.5756C10.9781 12.7106 10.8254 12.8173 10.652 12.8949C10.4762 12.9757 10.2889 13.0164 10.0892 13.0164H10Z" fill="#C5C5C5"/>
</svg>
`,V6=`<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
<path fill-rule="evenodd" clip-rule="evenodd" d="M1.49915 2H14.4991L14.9991 2.5V12.5L14.4991 13H1.49915L0.999146 12.5V2.5L1.49915 2ZM1.99915 3V12H13.9991V3H1.99915ZM3.99915 5H11.9991V6H3.99915V5ZM9.99915 7H3.99915V8H9.99915V7ZM3.99915 9H7.99915V10H3.99915V9Z" fill="#C5C5C5"/>
</svg>
`,j6=`<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
<path fill-rule="evenodd" clip-rule="evenodd" d="M11.1052 4.5613L7.67505 7.98827L6.54072 6.86834L8.61098 4.78848H3.81131C3.17483 4.78848 2.56442 5.04132 2.11436 5.49138C1.6643 5.94144 1.41147 6.55184 1.41147 7.18832C1.41147 7.8248 1.6643 8.43521 2.11436 8.88527C2.56442 9.33532 3.17483 9.58816 3.81131 9.58816H4.70085V11.1881H3.8209C2.7921 11.142 1.8207 10.7009 1.10896 9.95661C0.397222 9.21231 0 8.22216 0 7.19232C0 6.16249 0.397222 5.17234 1.10896 4.42803C1.8207 3.68373 2.7921 3.24263 3.8209 3.19659H8.62058L6.54072 1.13112L7.67505 0L11.1052 3.43177V4.5613ZM16.6201 24H7.0207L6.22075 23.2V10.4121L7.0207 9.61215H16.6201L17.42 10.4121V23.2L16.6201 24ZM7.82064 22.4001H15.8201V11.212H7.82064V22.4001ZM13.4203 1.6015H23.0196L23.8196 2.40145V15.1878L23.0196 15.9877H19.0199V14.3878H22.2197V3.20139H14.2202V7.98828H12.6203V2.40145L13.4203 1.6015ZM14.2202 12.7879H9.42053V14.3878H14.2202V12.7879ZM9.42053 15.9877H14.2202V17.5876H9.42053V15.9877ZM14.2202 19.1875H9.42053V20.7874H14.2202V19.1875ZM15.8201 4.78848H20.6198V6.38838H15.8201V4.78848ZM20.6198 11.188H19.0199V12.7879H20.6198V11.188ZM17.2824 8.01228V7.98828H20.6198V9.58817H18.8583L17.2824 8.01228Z" fill="#C5C5C5"/>
</svg>
`,F6=`<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M11.34 9.70998H12.05L14.72 7.04005V6.32997L13.38 5.00001H12.68L10.86 6.81007H5.86V5.56007L7.71999 3.70997V3L5.71998 1H5.00001L1 5.00001V5.70997L3 7.70998H3.71003L4.84998 6.56007V12.35L5.34999 12.85H10V13.37L11.33 14.71H12.04L14.7101 12.0401V11.33L13.37 10H12.67L10.81 11.85H5.81001V7.84999H10V8.32997L11.34 9.70998ZM13.0301 6.06007L13.66 6.68995L11.66 8.68996L11.0301 8.06007L13.0301 6.06007ZM13.0301 11.0601L13.66 11.69L11.66 13.69L11.0301 13.0601L13.0301 11.0601ZM3.34998 6.65004L2.06 5.34999L5.34999 2.06006L6.65004 3.34998L3.34998 6.65004Z" fill="#EE9D28"/>
</svg>
`,U6=`<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
<path fill-rule="evenodd" clip-rule="evenodd" d="M8 1.00305C6.14348 1.00305 4.36299 1.74059 3.05023 3.05334C1.73748 4.3661 1 6.14654 1 8.00305V8.43311C1.09 9.94311 2.91 10.2231 4 9.13306C4.35648 8.81625 4.82054 8.64759 5.29724 8.66162C5.77395 8.67565 6.22729 8.87127 6.56451 9.2085C6.90174 9.54572 7.09736 9.99912 7.11139 10.4758C7.12542 10.9525 6.95682 11.4166 6.64001 11.7731C5.54001 12.9331 5.85 14.843 7.44 14.973H8.03998C9.89649 14.973 11.677 14.2356 12.9897 12.9229C14.3025 11.6101 15.04 9.82954 15.04 7.97302C15.04 6.11651 14.3025 4.33607 12.9897 3.02332C11.677 1.71056 9.89649 0.973022 8.03998 0.973022L8 1.00305ZM8 14.0031H7.47998C7.34751 13.9989 7.22047 13.9495 7.12 13.863C7.04052 13.7807 6.98815 13.6761 6.96997 13.5631C6.9381 13.3682 6.95328 13.1684 7.01416 12.9806C7.07504 12.7927 7.17989 12.6222 7.32001 12.483C7.84048 11.9474 8.13165 11.2299 8.13165 10.483C8.13165 9.73615 7.84048 9.0187 7.32001 8.48303C7.05348 8.21635 6.73699 8.00481 6.38867 7.86047C6.04036 7.71614 5.66702 7.64185 5.28998 7.64185C4.91294 7.64185 4.5396 7.71614 4.19128 7.86047C3.84297 8.00481 3.52654 8.21635 3.26001 8.48303C3.15068 8.61081 3.01089 8.709 2.85358 8.76843C2.69626 8.82786 2.52649 8.84657 2.35999 8.823C2.27593 8.80694 2.19903 8.76498 2.14001 8.703C2.07131 8.6224 2.03556 8.5189 2.03998 8.41309V8.04309C2.03998 6.8564 2.39192 5.69629 3.05121 4.70959C3.7105 3.7229 4.64754 2.95388 5.7439 2.49976C6.84025 2.04563 8.04669 1.92681 9.21057 2.15833C10.3745 2.38984 11.4435 2.9613 12.2827 3.80042C13.1218 4.63953 13.6932 5.70867 13.9247 6.87256C14.1562 8.03644 14.0374 9.24275 13.5833 10.3391C13.1291 11.4355 12.3601 12.3726 11.3734 13.0319C10.3867 13.6911 9.22667 14.0431 8.03998 14.0431L8 14.0031ZM9 3.99683C9 4.54911 8.55228 4.99683 8 4.99683C7.44771 4.99683 7 4.54911 7 3.99683C7 3.44454 7.44771 2.99683 8 2.99683C8.55228 2.99683 9 3.44454 9 3.99683ZM12 11.0037C12 11.5559 11.5523 12.0037 11 12.0037C10.4477 12.0037 10 11.5559 10 11.0037C10 10.4514 10.4477 10.0037 11 10.0037C11.5523 10.0037 12 10.4514 12 11.0037ZM5 6.00415C5.55229 6.00415 6 5.55644 6 5.00415C6 4.45187 5.55229 4.00415 5 4.00415C4.44772 4.00415 4 4.45187 4 5.00415C4 5.55644 4.44772 6.00415 5 6.00415ZM12 5.00415C12 5.55644 11.5523 6.00415 11 6.00415C10.4477 6.00415 10 5.55644 10 5.00415C10 4.45187 10.4477 4.00415 11 4.00415C11.5523 4.00415 12 4.45187 12 5.00415ZM13.0001 7.99939C13.0001 8.55167 12.5524 8.99939 12.0001 8.99939C11.4478 8.99939 11.0001 8.55167 11.0001 7.99939C11.0001 7.4471 11.4478 6.99939 12.0001 6.99939C12.5524 6.99939 13.0001 7.4471 13.0001 7.99939Z" fill="#C5C5C5"/>
</svg>
`,W6=`<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
<path fill-rule="evenodd" clip-rule="evenodd" d="M4 6H12V7H4V6ZM12 9H4V10H12V9Z" fill="#C5C5C5"/>
<path fill-rule="evenodd" clip-rule="evenodd" d="M1 4L2 3H14L15 4V12L14 13H2L1 12V4ZM2 4V12H14V4H2Z" fill="#C5C5C5"/>
</svg>
`,Y6=`<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
<path fill-rule="evenodd" clip-rule="evenodd" d="M7 3L8 2H14L15 3V8L14 9H10V8H14V3H8V6H7V3ZM9 9V8L8 7H7H2L1 8V13L2 14H8L9 13V9ZM8 8V9V13H2V8H7H8ZM9.41421 7L9 6.58579V6H13V7H9.41421ZM9 4H13V5H9V4ZM7 10H3V11H7V10Z" fill="#75BEFF"/>
</svg>
`,z6=`<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
<path fill-rule="evenodd" clip-rule="evenodd" d="M14 2H8L7 3V6H8V3H14V8H10V9H14L15 8V3L14 2ZM9 6H13V7H9.41L9 6.59V6ZM7 7H2L1 8V13L2 14H8L9 13V8L8 7H7ZM8 13H2V8H8V9V13ZM3 9H7V10H3V9ZM3 11H7V12H3V11ZM9 4H13V5H9V4Z" fill="#EE9D28"/>
</svg>
`,q6=`<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
<path fill-rule="evenodd" clip-rule="evenodd" d="M7.41354 1.55996L8.31152 1H11.6056L12.424 2.57465L10.2356 6H12.0174L12.7363 7.69512L5.61943 15L4.01675 13.837L6.11943 10H4.89798L4 8.55996L7.41354 1.55996ZM7.78033 9L4.90054 14.3049L12.0174 7H8.31152L11.6056 2H8.31152L4.89798 9H7.78033Z" fill="#EE9D28"/>
</svg>
`,Z6=`<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M14.45 4.5L9.44995 2H8.55005L1.55005 5.5L1 6.39001V10.89L1.55005 11.79L6.55005 14.29H7.44995L14.45 10.79L15 9.89001V5.39001L14.45 4.5ZM6.44995 13.14L1.94995 10.89V7.17004L6.44995 9.17004V13.14ZM6.94995 8.33997L2.29004 6.22998L8.94995 2.89001L13.62 5.22998L6.94995 8.33997ZM13.95 9.89001L7.44995 13.14V9.20996L13.95 6.20996V9.89001Z" fill="#75BEFF"/>
</svg>
`,K6=`<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M11.4965 4C10.655 3.9989 9.84136 4.30189 9.20557 4.85315C8.56977 5.40442 8.15465 6.16684 8.0365 7H4.9364C4.8147 6.52867 4.52533 6.11794 4.12244 5.84473C3.71955 5.57152 3.23083 5.45466 2.74792 5.51599C2.26502 5.57733 1.82106 5.81261 1.49927 6.17786C1.17747 6.54311 1 7.01322 1 7.5C1 7.98679 1.17747 8.45689 1.49927 8.82215C1.82106 9.1874 2.26502 9.42267 2.74792 9.48401C3.23083 9.54535 3.71955 9.42848 4.12244 9.15528C4.52533 8.88207 4.8147 8.47133 4.9364 8H8.0365C8.13236 8.66418 8.41717 9.28683 8.85693 9.7937C9.2967 10.3006 9.87284 10.6703 10.5168 10.8589C11.1609 11.0475 11.8455 11.047 12.4893 10.8574C13.133 10.6679 13.7087 10.2973 14.1477 9.7898C14.5867 9.28227 14.8706 8.65919 14.9655 7.99488C15.0603 7.33056 14.9621 6.65298 14.6827 6.04285C14.4034 5.43272 13.9545 4.91578 13.3895 4.55359C12.8246 4.19141 12.1675 3.99922 11.4965 4ZM11.4965 10C11.002 10 10.5187 9.85332 10.1075 9.57862C9.69642 9.30391 9.37599 8.91348 9.18677 8.45667C8.99755 7.99985 8.94809 7.49728 9.04456 7.01233C9.14102 6.52738 9.37901 6.08181 9.72864 5.73218C10.0783 5.38255 10.5238 5.14456 11.0088 5.0481C11.4937 4.95164 11.9963 5.00109 12.4531 5.19031C12.9099 5.37953 13.3004 5.69996 13.5751 6.11109C13.8498 6.52221 13.9965 7.00555 13.9965 7.5C13.9965 8.16304 13.7331 8.79898 13.2643 9.26783C12.7954 9.73667 12.1595 10 11.4965 10Z" fill="#75BEFF"/>
</svg>
`,G6=`<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M15 4H10V3H15V4ZM14 7H12V8H14V7ZM10 7H1V8H10V7ZM12 13H1V14H12V13ZM7 10H1V11H7V10ZM15 10H10V11H15V10ZM8 2V5H1V2H8ZM7 3H2V4H7V3Z" fill="#C5C5C5"/>
</svg>
`,Wr=`<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M13.51 4L8.51001 1H7.51001L2.51001 4L2.02002 4.85999V10.86L2.51001 11.71L7.51001 14.71H8.51001L13.51 11.71L14 10.86V4.85999L13.51 4ZM7.51001 13.5601L3.01001 10.86V5.69995L7.51001 8.15002V13.5601ZM3.27002 4.69995L8.01001 1.85999L12.75 4.69995L8.01001 7.29004L3.27002 4.69995ZM13.01 10.86L8.51001 13.5601V8.15002L13.01 5.69995V10.86Z" fill="#B180D7"/>
</svg>
`,$6=`<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
<path fill-rule="evenodd" clip-rule="evenodd" d="M2.87289 1.10023C3.20768 1.23579 3.47545 1.498 3.61802 1.82988C3.69032 1.99959 3.72675 2.18242 3.72502 2.36688C3.72617 2.54999 3.68975 2.7314 3.61802 2.89988C3.51299 3.14567 3.33782 3.35503 3.11442 3.50177C2.89102 3.64851 2.6293 3.72612 2.36202 3.72488C2.17924 3.72592 1.99818 3.68951 1.83002 3.61788C1.58298 3.51406 1.37227 3.33932 1.22453 3.11575C1.0768 2.89219 0.998666 2.62984 1.00002 2.36188C0.99913 2.17921 1.03519 1.99825 1.10602 1.82988C1.24337 1.50314 1.50328 1.24323 1.83002 1.10588C2.16332 0.966692 2.53809 0.964661 2.87289 1.10023ZM2.57502 2.86488C2.7054 2.80913 2.80927 2.70526 2.86502 2.57488C2.8929 2.50838 2.90718 2.43698 2.90702 2.36488C2.90813 2.2654 2.88215 2.1675 2.83185 2.08167C2.78156 1.99584 2.70884 1.92531 2.62151 1.87767C2.53418 1.83002 2.43553 1.80705 2.33614 1.81121C2.23674 1.81537 2.14035 1.8465 2.05731 1.90128C1.97426 1.95606 1.9077 2.03241 1.86475 2.12215C1.8218 2.21188 1.80409 2.31161 1.81352 2.41065C1.82294 2.50968 1.85915 2.60428 1.91825 2.6843C1.97736 2.76433 2.05713 2.82675 2.14902 2.86488C2.28549 2.92089 2.43854 2.92089 2.57502 2.86488ZM6.42995 1.1095L1.10967 6.42977L1.79557 7.11567L7.11584 1.7954L6.42995 1.1095ZM11.5 8.99999H12.5V11.5H15V12.5H12.5V15H11.5V12.5H9V11.5H11.5V8.99999ZM5.76777 9.52509L6.47487 10.2322L4.70711 12L6.47487 13.7677L5.76777 14.4748L4 12.7071L2.23223 14.4748L1.52513 13.7677L3.29289 12L1.52513 10.2322L2.23223 9.52509L4 11.2929L5.76777 9.52509ZM7.11802 5.32988C7.01442 5.08268 6.83973 4.87183 6.61612 4.72406C6.3925 4.57629 6.13004 4.49826 5.86202 4.49988C5.67935 4.49899 5.49839 4.53505 5.33002 4.60588C5.00328 4.74323 4.74337 5.00314 4.60602 5.32988C4.53588 5.49478 4.49897 5.67191 4.49741 5.8511C4.49586 6.0303 4.52967 6.20804 4.59693 6.37414C4.66419 6.54024 4.76356 6.69143 4.88936 6.81906C5.01516 6.94669 5.1649 7.04823 5.33002 7.11788C5.49867 7.18848 5.67968 7.22484 5.86252 7.22484C6.04535 7.22484 6.22636 7.18848 6.39502 7.11788C6.64201 7.01388 6.8527 6.83913 7.00058 6.61563C7.14845 6.39213 7.22689 6.12987 7.22602 5.86188C7.22655 5.67905 7.1898 5.49803 7.11802 5.32988ZM6.36502 6.07488C6.33766 6.13937 6.29829 6.19808 6.24902 6.24788C6.19908 6.29724 6.14042 6.33691 6.07602 6.36488C6.00854 6.39297 5.93611 6.40725 5.86302 6.40688C5.78991 6.40744 5.71744 6.39315 5.65002 6.36488C5.58541 6.33729 5.52668 6.29757 5.47702 6.24788C5.42691 6.19856 5.38713 6.13975 5.36002 6.07488C5.30401 5.9384 5.30401 5.78536 5.36002 5.64888C5.41536 5.51846 5.51941 5.41477 5.65002 5.35988C5.71737 5.33126 5.78984 5.31663 5.86302 5.31688C5.93618 5.31685 6.0086 5.33147 6.07602 5.35988C6.14037 5.38749 6.19904 5.42682 6.24902 5.47588C6.29786 5.52603 6.33716 5.58465 6.36502 5.64888C6.3934 5.7163 6.40802 5.78872 6.40802 5.86188C6.40802 5.93503 6.3934 6.00745 6.36502 6.07488ZM14 3H10V4H14V3Z" fill="#C5C5C5"/>
</svg>
`,J6=`<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
<path fill-rule="evenodd" clip-rule="evenodd" d="M11 6H10V5.5C10 5.22386 9.77614 5 9.5 5H8.479V10.5C8.479 10.7761 8.70286 11 8.979 11H9.479V12H6.479V11H6.979C7.25515 11 7.479 10.7761 7.479 10.5V5H6.5C6.22386 5 6 5.22386 6 5.5V6H5V4H11V6ZM13.9142 8.0481L12.4519 6.58581L13.159 5.87871L14.9749 7.69454V8.40165L13.2071 10.1694L12.5 9.46231L13.9142 8.0481ZM3.54809 9.4623L2.08579 8.00002L3.5 6.58581L2.7929 5.8787L1.02513 7.64647V8.35357L2.84098 10.1694L3.54809 9.4623Z" fill="#C5C5C5"/>
</svg>
`,X6=`<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M2.80723 14.9754C2.57119 14.9721 2.33826 14.9211 2.12247 14.8254C1.90667 14.7297 1.71248 14.5913 1.55158 14.4186C1.2385 14.1334 1.04433 13.7408 1.00775 13.3189C0.966225 12.8828 1.09269 12.4473 1.36133 12.1013C2.56779 10.8289 4.9473 8.4494 6.67811 6.75479C6.30983 5.75887 6.32704 4.66127 6.72637 3.67739C7.05474 2.85876 7.63869 2.16805 8.39129 1.70807C8.9817 1.31706 9.66031 1.07944 10.3657 1.01673C11.0711 0.954022 11.7809 1.06819 12.4311 1.34892L13.0482 1.6162L10.1824 4.56738L11.4371 5.82582L14.3809 2.94887L14.6482 3.56788C14.8735 4.08976 14.993 4.65119 14.9997 5.21961C15.0064 5.78802 14.9002 6.35211 14.6872 6.87915C14.476 7.40029 14.1623 7.87368 13.7647 8.27122C13.5394 8.49169 13.2904 8.68653 13.0222 8.85218C12.4673 9.22275 11.8324 9.45636 11.1697 9.5338C10.5069 9.61124 9.83521 9.5303 9.20982 9.29764C8.11194 10.4113 5.37142 13.1704 3.89119 14.5522C3.59426 14.8219 3.20832 14.9726 2.80723 14.9754ZM10.7448 1.92802C10.087 1.92637 9.44359 2.12018 8.89614 2.48485C8.68265 2.6152 8.48437 2.76897 8.30498 2.9433C7.82789 3.42423 7.50926 4.03953 7.39182 4.70669C7.27437 5.37385 7.36374 6.06098 7.64792 6.67591L7.78342 6.97288L7.55048 7.20025C5.81224 8.89672 3.28146 11.4201 2.06479 12.7045C1.95646 12.8658 1.91012 13.0608 1.93435 13.2535C1.95857 13.4463 2.05171 13.6238 2.19657 13.7532C2.28005 13.8462 2.38177 13.9211 2.49541 13.9731C2.59557 14.0184 2.70383 14.043 2.81373 14.0455C2.98064 14.0413 3.14044 13.977 3.26383 13.8646C4.83687 12.3964 7.87622 9.32641 8.76807 8.42435L8.9973 8.19326L9.29242 8.32783C9.80618 8.56732 10.3731 8.66985 10.9382 8.62545C11.5033 8.58106 12.0473 8.39125 12.5174 8.07447C12.7313 7.9426 12.9296 7.78694 13.1085 7.61045C13.4183 7.30153 13.6631 6.93374 13.8286 6.52874C13.994 6.12375 14.0767 5.68974 14.0719 5.25228C14.0719 5.03662 14.0505 4.82148 14.0078 4.61007L11.4306 7.12508L8.87944 4.57759L11.3944 1.98834C11.1804 1.94674 10.9628 1.92653 10.7448 1.92802Z" fill="#C5C5C5"/>
</svg>
`,Q6=`<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
<path fill-rule="evenodd" clip-rule="evenodd" d="M4 1L3 2V14L4 15H12L13 14V2L12 1H4ZM4 3V2H12V14H4V13H6V12H4V10H8V9H4V7H6V6H4V4H8V3H4Z" fill="#C5C5C5"/>
</svg>
`,e4=`<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
<path fill-rule="evenodd" clip-rule="evenodd" d="M2.5 1L2 1.5V13H3V2H14V13H15V1.5L14.5 1H2.5ZM2 15V14H3V15H2ZM5 14.0001H4V15.0001H5V14.0001ZM6 14.0001H7V15.0001H6V14.0001ZM9 14.0001H8V15.0001H9V14.0001ZM10 14.0001H11V15.0001H10V14.0001ZM15 15.0001V14.0001H14V15.0001H15ZM12 14.0001H13V15.0001H12V14.0001Z" fill="#C5C5C5"/>
</svg>
`,t4=`<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
<path fill-rule="evenodd" clip-rule="evenodd" d="M2 2L1 3V12L2 13H14L15 12V3L14 2H2ZM2 12V3H14V12H2ZM5.3556 8.93017H6V7.22067C6 6.40689 5.68534 6 5.05603 6C4.92098 6 4.77083 6.02421 4.6056 6.07263C4.44181 6.12104 4.3125 6.17691 4.21767 6.24022V6.90503C4.45474 6.70205 4.70474 6.60056 4.96767 6.60056C5.22917 6.60056 5.35991 6.75698 5.35991 7.06983L4.76078 7.17318C4.25359 7.25885 4 7.57914 4 8.13408C4 8.39665 4.06106 8.60708 4.18319 8.76536C4.30675 8.92179 4.47557 9 4.68966 9C4.97989 9 5.19899 8.83985 5.34698 8.51955H5.3556V8.93017ZM5.35991 7.57542V7.76816C5.35991 7.9432 5.31968 8.08845 5.23922 8.20391C5.15876 8.3175 5.0546 8.3743 4.92672 8.3743C4.83477 8.3743 4.76149 8.34264 4.7069 8.27933C4.65374 8.21415 4.62716 8.13128 4.62716 8.03073C4.62716 7.80912 4.73779 7.6797 4.95905 7.64246L5.35991 7.57542ZM7.60094 8.62622H7.59343V8.93511H7V5H7.59343V6.67683H7.60094C7.74742 6.36708 7.95587 6.2122 8.22629 6.2122C8.47418 6.2122 8.6651 6.32987 8.79906 6.56522C8.93302 6.80056 9 7.12243 9 7.53082C9 7.97383 8.92175 8.32944 8.76526 8.59766C8.60876 8.86589 8.39969 9 8.13803 9C7.90141 9 7.72238 8.87541 7.60094 8.62622ZM7.58404 7.50487V7.77742C7.58404 7.94873 7.61972 8.09063 7.69108 8.20311C7.76244 8.3156 7.85383 8.37184 7.96526 8.37184C8.10047 8.37184 8.20501 8.30002 8.27887 8.15639C8.35399 8.01103 8.39155 7.80597 8.39155 7.54121C8.39155 7.32144 8.35712 7.15012 8.28826 7.02726C8.22066 6.90266 8.12363 6.84036 7.99718 6.84036C7.87825 6.84036 7.77934 6.9018 7.70047 7.02466C7.62285 7.14752 7.58404 7.30759 7.58404 7.50487ZM11.2616 9C11.5834 9 11.8295 8.94227 12 8.82682V8.11732C11.82 8.25512 11.636 8.32402 11.448 8.32402C11.2362 8.32402 11.0697 8.25233 10.9486 8.10894C10.8276 7.96369 10.767 7.76443 10.767 7.51117C10.767 7.25047 10.8299 7.04656 10.9558 6.89944C11.0832 6.75047 11.2553 6.67598 11.4719 6.67598C11.6663 6.67598 11.8423 6.74488 12 6.88268V6.13408C11.871 6.04469 11.6623 6 11.374 6C10.9566 6 10.6229 6.1406 10.3728 6.42179C10.1243 6.70112 10 7.0838 10 7.56983C10 7.99069 10.1163 8.33426 10.3489 8.60056C10.5814 8.86685 10.8857 9 11.2616 9Z" fill="#C5C5C5"/>
</svg>
`,i4=`<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
<path fill-rule="evenodd" clip-rule="evenodd" d="M2 2L1 3V6L2 7H14L15 6V3L14 2H2ZM2 3H3H13H14V4V5V6H13H3H2V5V4V3ZM1 10L2 9H5L6 10V13L5 14H2L1 13V10ZM3 10H2V11V12V13H3H4H5V12V11V10H4H3ZM10 10L11 9H14L15 10V13L14 14H11L10 13V10ZM12 10H11V11V12V13H12H13H14V12V11V10H13H12Z" fill="#C5C5C5"/>
</svg>
`,Ha=`<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
<path fill-rule="evenodd" clip-rule="evenodd" d="M2 5H4V4H1.5L1 4.5V12.5L1.5 13H4V12H2V5ZM14.5 4H12V5H14V12H12V13H14.5L15 12.5V4.5L14.5 4ZM11.76 6.56995L12 7V9.51001L11.7 9.95996L7.19995 11.96H6.73999L4.23999 10.46L4 10.03V7.53003L4.30005 7.06995L8.80005 5.06995H9.26001L11.76 6.56995ZM5 9.70996L6.5 10.61V9.28003L5 8.38V9.70996ZM5.57996 7.56006L7.03003 8.43005L10.42 6.93005L8.96997 6.06006L5.57996 7.56006ZM7.53003 10.73L11.03 9.17004V7.77002L7.53003 9.31995V10.73Z" fill="#75BEFF"/>
</svg>
`;function de(e){const t=document.createElement("span");return t.innerHTML=e,t.firstElementChild instanceof SVGElement&&t.firstElementChild.classList.toggle("b3-menu__icon",!0),t.innerHTML}const s4=new Map([["class",de(y6)],["color",de(C6)],["constant",de(S6)],["constructor",de(Ur)],["enum",de(k6)],["enumMember",de(w6)],["event",de(L6)],["field",de(E6)],["file",de(p6)],["folder",de(m6)],["function",de(Ur)],["instance",de(Ba)],["interface",de(M6)],["keyword",de(D6)],["method",de(Ur)],["module",de(g6)],["operator",de(T6)],["property",de(A6)],["reference",de(b6)],["snippet",de(B6)],["struct",de(P6)],["text",de(H6)],["typeParameter",de(R6)],["unit",de(O6)],["value",de(v6)],["variable",de(Ba)]]),r4=new Map([["class",de(F6)],["color",de(U6)],["constant",de(W6)],["constructor",de(Wr)],["enum",de(z6)],["enumMember",de(Y6)],["event",de(q6)],["field",de(Z6)],["file",de(x6)],["folder",de(I6)],["function",de(Wr)],["instance",de(Ha)],["interface",de(K6)],["keyword",de(G6)],["method",de(Wr)],["module",de(N6)],["operator",de($6)],["property",de(X6)],["reference",de(j6)],["snippet",de(e4)],["struct",de(i4)],["text",de(t4)],["typeParameter",de(J6)],["unit",de(Q6)],["value",de(V6)],["variable",de(Ha)]]),{replace:n4}="",o4=/[&<>'"]/g,a4={"&":"&amp;","<":"&lt;",">":"&gt;","'":"&#39;",'"':"&quot;"},l4=e=>a4[e],Ic=e=>n4.call(e,o4,l4);function c4(e){let t=[];for(const[i,s]of Object.entries(e))s&&t.push(`${i}="${Ic(s).replaceAll(`
`,"_esc_newline_")}"`);return`{: ${t.join(" ")}}`}function os(e,t){const i=document.createElement("div");return i.innerHTML=e,Array.from(i.querySelectorAll("div.code-block[data-node-id]")).filter(r=>t?r.getAttribute(pe.attrs.code.type.key)===pe.attrs.code.type.value:!0).map(r=>({id:r.dataset.nodeId,code:globalThis.Lute.BlockDOM2Content(r.outerHTML)}))}function h4(){const e={cells:[],elements:Dg()};switch(e.elements.length){case 0:break;case 1:e.cells=os(e.elements[0].outerHTML,!1);break;default:e.cells=os(e.elements.reduce((t,i)=>(t.push(i.outerHTML),t),[]).join(""),!0);break}return e}function u4(e=(s=>(s=(i=>(i=globalThis.siyuan)==null?void 0:i.storage)())==null?void 0:s["local-codelang"])()??"",t=" "){return[`\`\`\`${e}`,"","```",c4({[pe.attrs.code.type.key]:pe.attrs.code.type.value,[pe.attrs.code.index]:t})].join(`
`)}function Ds(e){return Ii(e)&&e instanceof HTMLElement&&e.getAttribute(pe.attrs.code.type.key)===pe.attrs.code.type.value&&e.dataset.type==="NodeCodeBlock"&&e.classList.contains("code-block")}function f4(e){return Ii(e)&&e instanceof HTMLElement&&e.getAttribute(pe.attrs.output.type.key)===pe.attrs.output.type.value&&e.dataset.type==="NodeSuperBlock"}const kt=class kt extends it.Plugin{constructor(i){super(i);ne(this,"siyuan",it);ne(this,"logger");ne(this,"client");ne(this,"TOP_BAR_MENU_ID");ne(this,"SETTINGS_DIALOG_ID");ne(this,"CUSTOM_TAB_ID_JUPYTER");ne(this,"jupyterTab");ne(this,"topBarButton");ne(this,"config",Fr);ne(this,"worker");ne(this,"bridge");ne(this,"complating",!1);ne(this,"editEventHandler");ne(this,"protyles",new WeakMap);ne(this,"jupyterDock");ne(this,"jupyterInspectDock");ne(this,"doc2session",new Map);ne(this,"doc2info",new Map);ne(this,"session2docs",new Map);ne(this,"handlers");ne(this,"kernelspecs",{default:"",kernelspecs:{}});ne(this,"kernels",[]);ne(this,"sessions",[]);ne(this,"kernelName2logoObjectURL",new Map);ne(this,"kernelName2language",new Map);ne(this,"kernelName2displayName",new Map);ne(this,"xtermElements",new Set);ne(this,"counter",Pc());ne(this,"username",`siyuan-${it.getBackend()}-${it.getFrontend()}`);ne(this,"clientId",globalThis.Lute.NewNodeID());ne(this,"editEventListener",(i,s)=>{this.editEventHandler(s,Zs(i,kt.EDIT_KEYBOARD_EVENT_STATUS_INSPECT),Zs(i,kt.EDIT_KEYBOARD_EVENT_STATUS_COMPLATE))});ne(this,"blockMenuEventListener",i=>{const s=i.detail,r=Cg(s);if(r){const n=this.doc2session.get(r.protyle.block.rootID),l=[];r.isDocumentBlock?l.push(...this.buildJupyterDocumentMenuItems(r.id,r.data.ial,n,r)):l.push(...this.buildExecuteMenuItems(!1,n,r)),s.menu.addItem({submenu:l,icon:"icon-jupyter-client-simple",label:this.i18n.displayName,accelerator:this.name}),this.updateDockFocusItem(r.protyle.block.rootID)}});ne(this,"clickEditorContentEventListener",i=>{var l,o,a,c,f,u,m;const s=i.detail.protyle;(o=(l=s.background)==null?void 0:l.ial)!=null&&o[pe.attrs.kernel.language]&&(a=globalThis.siyuan)!=null&&a.storage&&(globalThis.siyuan.storage["local-codelang"]=s.background.ial[pe.attrs.kernel.language]);const r=this.doc2session.get(s.block.rootID);r?this.toggleEditEventListener(s,!0):this.toggleEditEventListener(s,!1);const n=Ks();if(n&&n.dataset.type===bl.NodeType.NodeCodeBlock&&n.classList.contains("code-block")){const v=n.querySelector(`.${pe.JUPYTER_CODE_CELL_ACTION_RUN_CLASS_NAME}`);if(r&&(Ds(n)||((c=n.querySelector(".protyle-action__language"))==null?void 0:c.innerText)===((u=(f=s.background)==null?void 0:f.ial)==null?void 0:u[pe.attrs.kernel.language]))){const y=ka();if(y&&this.requestInspect(r.id,y),!v){const g=n.querySelector(".protyle-icon--last");if(g){const h=globalThis.document.createElement("span");h.classList.add("b3-tooltips","b3-tooltips__nw","protyle-icon",pe.JUPYTER_CODE_CELL_ACTION_RUN_CLASS_NAME),h.ariaLabel=this.i18n.menu.run.label,h.innerHTML='<svg><use xlink:href="#iconPlay"></use></svg>',h.onclick=async d=>{const _=os(n.outerHTML,!1);await this.requestExecuteCells(_,r,this.config.jupyter.execute.output.parser)},(m=g.parentElement)==null||m.insertBefore(h,g)}}}else v&&v.remove()}this.updateDockFocusItem(s.block.rootID)});ne(this,"loadedProtyleEventListener",async i=>{var r,n,l,o,a,c,f,u,m,v,y;const s=i.detail.protyle;if(this.doc2session.has(s.block.rootID))this.toggleEditEventListener(s,!0);else{const g={};(n=(r=s.background)==null?void 0:r.ial)!=null&&n[pe.attrs.kernel.connection_status]&&s.background.ial[pe.attrs.kernel.connection_status]!=="disconnected"&&(g[pe.attrs.kernel.connection_status]="disconnected"),(o=(l=s.background)==null?void 0:l.ial)!=null&&o[pe.attrs.kernel.status]&&s.background.ial[pe.attrs.kernel.status]!=="unknown"&&(g[pe.attrs.kernel.status]="unknown"),Object.keys(g).length>0&&await this.client.setBlockAttrs({id:s.block.rootID,attrs:g})}if((c=(a=s.title)==null?void 0:a.editElement)!=null&&c.innerText.endsWith(".ipynb")||(u=(f=s.background)==null?void 0:f.ial)!=null&&u[pe.attrs.kernel.name]){const g=(v=(m=s.breadcrumb)==null?void 0:m.element.parentElement)==null?void 0:v.querySelector(".protyle-breadcrumb__icon[data-type=exit-focus]");if(g){if((y=g.nextElementSibling)!=null&&y.classList.contains(pe.JUPYTER_NOTEBOOK_BUTTON_MENU_CLASS_NAME))return;{const h=globalThis.document.createElement("button");h.classList.add("block__icon","block__icon--show","fn__flex-center","b3-tooltips","b3-tooltips__sw",pe.JUPYTER_NOTEBOOK_BUTTON_MENU_CLASS_NAME),h.dataset.type="jupyter-client-notebook-menu",h.ariaLabel="Jupyter",h.innerHTML='<svg><use xlink:href="#icon-jupyter-client-session-notebook"></use></svg>',h.onclick=async d=>{var _;if(d.preventDefault(),d.stopPropagation(),s.block.rootID&&((_=s.background)!=null&&_.ial)){const p=s.block.rootID,b=this.buildJupyterDocumentMenuItems(p,s.background.ial,this.doc2session.get(p),{isDocumentBlock:!0,isMultiBlock:!1,id:p});if(b.length>0){const S=new this.siyuan.Menu;b.forEach(L=>S.addItem(L)),S.open({x:d.clientX,y:d.clientY,isLeft:!0})}}},g.parentElement.insertBefore(h,g.nextElementSibling)}}}});ne(this,"destroyProtyleEventListener",i=>{const s=i.detail.protyle;this.toggleEditEventListener(s,!1)});ne(this,"inputRequest",async(i,s,r="")=>{if(s===this.clientId){this.config.jupyter.execute.input.goto&&await this.gotoBlock(i);try{return await mg(this.siyuan.Dialog,{title:this.i18n.messages.inputRequest.title,text:r?_t(r):void 0,cancel:()=>!1})}catch{return}}});ne(this,"updateKernelSpecs",i=>{var s;Object.assign(this.kernelspecs,i);for(const[r,n]of Object.entries(i.kernelspecs))n&&(this.kernelName2language.set(r,n.language),this.kernelName2displayName.set(r,n.display_name));(s=this.jupyterDock.component)==null||s.$set({kernelspecs:i})});ne(this,"updateKernels",i=>{var s;this.kernels.length=0,this.kernels.push(...i),(s=this.jupyterDock.component)==null||s.$set({kernels:i})});ne(this,"updateSessions",i=>{var r;const s=new Set(i.map(n=>n.id));for(const n of this.session2docs.keys())if(!s.has(n)){const l=this.session2docs.get(n);l&&l.forEach(o=>this.doc2session.delete(o)),this.session2docs.delete(n)}this.sessions.length=0,this.sessions.push(...i),(r=this.jupyterDock.component)==null||r.$set({sessions:i})});ne(this,"openJupyterTab",async()=>{it.openTab({app:this.app,custom:{icon:"icon-jupyter-client",title:"Jupyter",id:this.CUSTOM_TAB_ID_JUPYTER,data:{src:this.baseUrl,title:"Jupyter"}},keepCursor:!1,removeCurrentTab:!1})});ne(this,"openJupyterBrowser",async()=>{globalThis.open(this.baseUrl)});ne(this,"openJupyterWindow",async()=>{_6({url:this.baseUrl,base:{center:!0},extra:{enableMenuBar:!0}})});this.logger=new Rg(this.name),this.client=new Af(void 0,"fetch"),this.TOP_BAR_MENU_ID=`${this.name}-top-bar-menu`,this.SETTINGS_DIALOG_ID=`${this.name}-settings-dialog`,this.CUSTOM_TAB_ID_JUPYTER=`${this.name}${kt.CUSTOM_TAB_TYPE_JUPYTER}`,this.handlers={gotoBlock:{this:this,func:async(r,n)=>{n===this.clientId&&this.doc2session.has(r)&&await this.gotoBlock(r)}},inputRequest:{this:this,func:this.inputRequest},updateKernelSpecs:{this:this,func:this.updateKernelSpecs},updateKernels:{this:this,func:this.updateKernels},updateSessions:{this:this,func:this.updateSessions}},this.jupyterTab=this.addTab({type:kt.CUSTOM_TAB_TYPE_JUPYTER,init(){const r=this;r.component=new Q1({target:r.element,props:{...r.data}})},destroy(){var n;(n=this.component)==null||n.$destroy()}});const s=ig(this);globalThis.customElements.get(s.TAG_NAME)??globalThis.customElements.define(s.TAG_NAME,s),this.updateEditEventHandler()}onload(){this.addIcons([Qc,eh,th,ih,sh,rh,nh,oh,ah,lh,ch,hh,uh,fh,dh,_h,ph,mh].join(""));const i=this;this.jupyterDock={dock:this.addDock({config:{position:"LeftTop",size:{width:256,height:0},icon:"icon-jupyter-client",title:this.i18n.dock.title,show:!0},data:{},type:"-dock",init(){this.element.classList.add("fn__flex-column");const s=new J3({target:this.element,props:{plugin:i,...this.data,kernelspecs:i.kernelspecs,kernels:i.kernels,sessions:i.sessions}});i.jupyterDock.model=this,i.jupyterDock.component=s},destroy(){var s;(s=i.jupyterDock.component)==null||s.$destroy(),delete i.jupyterDock.component,delete i.jupyterDock.model}})},this.jupyterInspectDock={dock:this.addDock({config:{position:"BottomLeft",size:{width:256,height:0},icon:"icon-jupyter-client-inspect",title:this.i18n.inspectDock.title,show:!0},data:{stream:""},type:"-inspect-dock",init(){this.element.classList.add("fn__flex-column");const s=new em({target:this.element,props:{plugin:i,...this.data}});i.jupyterInspectDock.model=this,i.jupyterInspectDock.component=s},destroy(){var s;(s=i.jupyterInspectDock.component)==null||s.$destroy(),delete i.jupyterInspectDock.component,delete i.jupyterInspectDock.model}})},this.addCommand({langKey:"run-selected-cells",langText:this.i18n.commands.runSelectedCells.text,hotkey:"⌘↩",customHotkey:"⌘↩",editorCallback:async()=>{const r=(await this.executeSelectedCellBlocks()).cells.at(-1);r&&await this.gotoBlock(r.id,!1)}}),this.addCommand({langKey:"run-selected-cells-and-goto-next",langText:this.i18n.commands.runSelectedCellsAndGotoNext.text,hotkey:"⇧↩",customHotkey:"⇧↩",editorCallback:async()=>{const s=await this.executeSelectedCellBlocks(),r=await this.getNextCodeCell(s);if(r)await this.gotoBlock(r.id,!1);else{if(s.cells.length==0)return;const n=await this.insertNewCodeCell(s);n&&await this.gotoBlock(n.id,!1)}}}),this.addCommand({langKey:"run-selected-cells-and-insert-below",langText:this.i18n.commands.runSelectedCellsAndInsertBelow.text,hotkey:"⌥↩",customHotkey:"⌥↩",editorCallback:async()=>{const s=await this.executeSelectedCellBlocks(),r=await this.insertNewCodeCell(s);r&&await this.gotoBlock(r.id,!1)}}),this.addCommand({langKey:"open-jupyter-tab",langText:this.i18n.commands.openJupyterTab.text,hotkey:"",customHotkey:"",callback:this.openJupyterTab}),this.addCommand({langKey:"open-jupyter-browser",langText:this.i18n.commands.openJupyterBrowser.text,hotkey:"",customHotkey:"",callback:this.openJupyterBrowser}),this.addCommand({langKey:"open-jupyter-window",langText:this.i18n.commands.openJupyterWindow.text,hotkey:"",customHotkey:"",callback:this.openJupyterWindow}),this.loadData(kt.GLOBAL_CONFIG_NAME).then(s=>{this.config=Ea(Fr,s||{})}).catch(s=>this.logger.error(s)).finally(async()=>{var r;if(this.initBridge(),await this.isWorkerRunning())await this.jupyterForceRefresh();else{for(this.initWorker();await this.isWorkerRunning();)await Xg(1e3);await((r=this.bridge)==null?void 0:r.call("onload",this.i18n)),await this.updateWorkerConfig(!0)}this.eventBus.on("click-editortitleicon",this.blockMenuEventListener),this.eventBus.on("click-blockicon",this.blockMenuEventListener),this.eventBus.on("click-editorcontent",this.clickEditorContentEventListener),this.eventBus.on("loaded-protyle-static",this.loadedProtyleEventListener),this.eventBus.on("switch-protyle",this.loadedProtyleEventListener),this.eventBus.off("destroy-protyle",this.destroyProtyleEventListener)})}onLayoutReady(){this.topBarButton=this.addTopBar({icon:"icon-jupyter-client",title:this.displayName,position:"right",callback:i=>{var r,n,l,o;const s=new it.Menu(this.TOP_BAR_MENU_ID);s.addItem({icon:"iconLayout",label:this.i18n.commands.openJupyterTab.text,click:this.openJupyterTab}),s.addItem({icon:"iconOpen",label:this.i18n.commands.openJupyterBrowser.text,click:this.openJupyterBrowser}),s.addItem({icon:"iconOpenWindow",label:this.i18n.commands.openJupyterWindow.text,click:this.openJupyterWindow}),Ms?s.fullscreen():s.open({x:((n=(r=globalThis.siyuan)==null?void 0:r.coordinates)==null?void 0:n.pageX)??0,y:((o=(l=globalThis.siyuan)==null?void 0:l.coordinates)==null?void 0:o.pageY)??0,isLeft:!0})}})}onunload(){var i,s;this.eventBus.off("click-editortitleicon",this.blockMenuEventListener),this.eventBus.off("click-blockicon",this.blockMenuEventListener),this.eventBus.off("click-editorcontent",this.clickEditorContentEventListener),this.eventBus.off("loaded-protyle-static",this.loadedProtyleEventListener),this.eventBus.off("switch-protyle",this.loadedProtyleEventListener),this.eventBus.off("destroy-protyle",this.destroyProtyleEventListener);for(const r of this.kernelName2logoObjectURL.values())URL.revokeObjectURL(r);this.doc2session.clear(),this.doc2info.clear(),this.session2docs.clear(),this.kernelName2logoObjectURL.clear(),this.kernelName2language.clear(),this.kernelName2displayName.clear(),this.worker?(i=this.bridge)==null||i.call("unload").then(()=>{var r,n;(r=this.bridge)==null||r.terminate(),this.bridge=void 0,(n=this.worker)==null||n.terminate(),this.worker=void 0}):((s=this.bridge)==null||s.terminate(),this.bridge=void 0)}openSetting(){const i=this,r=new it.Dialog({title:`${this.i18n.displayName} <code class="fn__code">${this.name}</code>`,content:`<div id="${i.SETTINGS_DIALOG_ID}" class="fn__flex-column" />`,width:Ms?"92vw":"720px",height:Ms?void 0:"640px"}).element.querySelector(`#${i.SETTINGS_DIALOG_ID}`);r&&new f0({target:r,props:{config:this.config,plugin:this}})}get baseUrl(){var i;return((i=this.config)==null?void 0:i.jupyter.server.settings.baseUrl)||sr.baseUrl}get newClientId(){return globalThis.Lute.NewNodeID()}async resetConfig(i=!0){return this.updateConfig(Ea(Fr),i)}async updateConfig(i,s=!1){i&&i!==this.config&&(this.config=i),this.updateXtermElement(),this.updateEditEventHandler(),await this.updateWorkerConfig(s),await this.saveData(kt.GLOBAL_CONFIG_NAME,this.config)}initBridge(){var i;(i=this.bridge)==null||i.terminate(),this.bridge=new Jg(new BroadcastChannel(pe.JUPYTER_WORKER_BROADCAST_CHANNEL_NAME),this.logger,this.handlers,this.clientId)}initWorker(){var i;(i=this.worker)==null||i.terminate(),this.worker=new Worker(`${globalThis.document.baseURI}plugins/${this.name}/workers/${pe.JUPYTER_WORKER_FILE_NAME}.js?v=${Pa.version}`,{type:"module",name:this.name,credentials:"same-origin"})}async isWorkerRunning(){try{return this.bridge||this.initBridge(),await this.bridge.ping(),!0}catch{return!1}}isSessionRunning(i){return this.sessions.some(s=>s.id===i)}isSessionConnected(i){return this.session2docs.has(i)}relateDoc2Session(i,s){const r=this.doc2session.get(i);if(r){const l=this.session2docs.get(r.id);l&&(l.delete(i),l.size===0&&this.session2docs.delete(r.id))}this.doc2session.set(i,s);const n=this.session2docs.get(s.id)??new Set;n.add(i),this.session2docs.set(s.id,n)}async updateWorkerConfig(i){var s,r;await((s=this.bridge)==null?void 0:s.call("updateConfig",this.config)),i&&await((r=this.bridge)==null?void 0:r.call("restart"))}updateXtermElement(i=this.config.xterm.options){for(const s of this.xtermElements)if(s.terminal)for(const[r,n]of Object.entries(i))s.terminal.options[r]!==n&&(s.terminal.options[r]=n)}updateEditEventHandler(i=this.config.jupyter.edit.delay){this.editEventHandler=Mc(async(s,r,n)=>{if(r||n){const l=this.doc2session.get(s.block.rootID);if(l){const o=Ks();if(Ds(o)){const a=ka();if(a){const c=[];r&&c.push(this.requestInspect(l.id,a)),n&&c.push(this.requestComplete(l.id,a)),await Promise.allSettled(c)}}}}},i)}async jupyterFetch(i,s={}){const r=new URL(this.baseUrl);i.startsWith("/")?r.pathname=i:r.pathname=`${r.pathname}/${i}`;const n={Authorization:`token ${this.config.jupyter.server.settings.token}`};s.headers?Object.assign(n,s.headers):s.headers=n;const l=await this.client.forwardProxy({url:r.href,method:s.method,headers:[s.headers],responseEncoding:"base64"});if(200<=l.data.status&&l.data.status<300)return new Blob([Qm(l.data.body)],{type:l.data.contentType});throw new Error(l.msg)}async jupyterForceRefresh(){var s,r,n;const i=await Promise.allSettled([(s=this.bridge)==null?void 0:s.call("jupyter.kernelspecs.specs"),(r=this.bridge)==null?void 0:r.call("jupyter.kernels.running"),(n=this.bridge)==null?void 0:n.call("jupyter.sessions.running")]);i[0].status==="fulfilled"&&i[0].value&&this.updateKernelSpecs(i[0].value),i[1].status==="fulfilled"&&i[1].value&&this.updateKernels(i[1].value),i[2].status==="fulfilled"&&i[2].value&&this.updateSessions(i[2].value)}async loadKernelSpecIcon(i,s="#icon-jupyter-client-kernelspec"){if(this.kernelName2logoObjectURL.has(i.name))return this.kernelName2logoObjectURL.get(i.name);const r=(()=>{switch(!0){case"logo-64x64"in i.resources:return i.resources["logo-64x64"];case"logo-32x32"in i.resources:return i.resources["logo-32x32"];case"logo-svg"in i.resources:return i.resources["logo-svg"];default:return Object.keys(i.resources).length>0?Object.values(i.resources)[0]:""}})();if(r)try{const n=await this.jupyterFetch(r,{method:"GET"});if(this.kernelName2logoObjectURL.has(i.name))return this.kernelName2logoObjectURL.get(i.name);{const l=URL.createObjectURL(n);return this.kernelName2logoObjectURL.set(i.name,l),l}}catch(n){this.logger.warn(n)}return this.kernelName2logoObjectURL.set(i.name,s),s}session2ial(i,s=!1){return{[pe.attrs.session.id]:i.id,[pe.attrs.session.name]:i.name,[pe.attrs.session.path]:i.path,[pe.attrs.session.type]:i.type,...this.kernel2ial(i.kernel,s)}}ial2session(i,s=!1){const r=this.counter.next().value,n=i[pe.attrs.session.id]??(s?ln.v4():pe.JUPYTER_UNKNOWN_VALUE),l=i[pe.attrs.session.name]??(s?`siyuan-console-${r}`:pe.JUPYTER_UNKNOWN_VALUE),o=i[pe.attrs.session.path]??(s?`siyuan-console-${r}-${globalThis.Lute.NewNodeID()}`:pe.JUPYTER_UNKNOWN_VALUE),a=i[pe.attrs.session.type]??(s?"console":pe.JUPYTER_UNKNOWN_VALUE),c=this.ial2kernel(i,s);return{id:n,type:a,name:l,path:o,kernel:c}}kernel2ial(i,s=!1){const r=i&&this.kernelspecs.kernelspecs[i.name]||void 0;return{[pe.attrs.kernel.id]:(i==null?void 0:i.id)??(s?null:void 0),[pe.attrs.kernel.name]:(i==null?void 0:i.name)??(s?null:void 0),[pe.attrs.kernel.language]:(r==null?void 0:r.language)??(s?null:void 0),[pe.attrs.kernel.display_name]:(r==null?void 0:r.display_name)??(s?null:void 0)}}ial2kernel(i,s=!1){const r=i[pe.attrs.kernel.id]??(s?ln.v4():pe.JUPYTER_UNKNOWN_VALUE),n=i[pe.attrs.kernel.name]??(s?this.kernelspecs.default:pe.JUPYTER_UNKNOWN_VALUE);return{id:r,name:n}}buildJupyterDocumentMenuItems(i,s,r,n){var u,m;const l=[],o=this.ial2session(s,!1),a=((u=r==null?void 0:r.kernel)==null?void 0:u.name)??o.kernel.name,c=this.kernelName2language.get(a)??s[pe.attrs.kernel.language]??pe.JUPYTER_UNKNOWN_VALUE,f=this.kernelName2displayName.get(a)??s[pe.attrs.kernel.display_name]??pe.JUPYTER_UNKNOWN_VALUE;return l.push({icon:"icon-jupyter-client-session",label:this.i18n.menu.session.label,accelerator:r?_t(r.name):void 0,submenu:[{icon:"iconSettings",label:this.i18n.menu.session.submenu.settings.label,click:()=>{const v=new it.Dialog({title:`Jupyter ${this.i18n.settings.sessionSettings.title} <code class="fn__code">${this.name}</code>`,content:`<div id="${this.SETTINGS_DIALOG_ID}" class="fn__flex-column" />`,width:Ms?"92vw":"720px"}),y=v.element.querySelector(`#${this.SETTINGS_DIALOG_ID}`);if(y){const g=new Hm({target:y,props:{docID:i,docIAL:s,plugin:this}});g.$on("cancel",h=>{v.destroy()}),g.$on("confirm",h=>{v.destroy(),this.updateDockFocusItem(i)})}}},{icon:"iconRefresh",label:this.i18n.menu.session.submenu.shutdown.label,disabled:!r,click:()=>{var v;r&&((v=this.bridge)==null||v.call("jupyter.sessions.shutdown",r.id))}},{type:"separator"},{type:"readonly",iconHTML:"",label:this.i18n.menu.session.submenu.info.label.replaceAll("${1}",_t((r==null?void 0:r.id)??o.id)).replaceAll("${2}",_t((r==null?void 0:r.name)??o.name)).replaceAll("${3}",_t((r==null?void 0:r.path)??o.path)).replaceAll("${4}",_t((r==null?void 0:r.type)??o.type)),disabled:!r}]}),l.push({icon:"icon-jupyter-client-kernel",label:this.i18n.menu.kernel.label,accelerator:r!=null&&r.kernel?_t(r.kernel.name):void 0,submenu:[{icon:"iconRefresh",label:this.i18n.menu.kernel.submenu.reconnect.label,disabled:!(r!=null&&r.kernel),click:async()=>{var v;r!=null&&r.kernel&&await((v=this.bridge)==null?void 0:v.call("jupyter.session.kernel.connection.reconnect",r.id))}},{icon:"iconPause",label:this.i18n.menu.kernel.submenu.interrupt.label,disabled:!(r!=null&&r.kernel),click:async()=>{var v;r!=null&&r.kernel&&await((v=this.bridge)==null?void 0:v.call("jupyter.session.kernel.connection.interrupt",r.id))}},{icon:"iconRefresh",label:this.i18n.menu.kernel.submenu.restart.label,disabled:!(r!=null&&r.kernel),click:async()=>{var v;r!=null&&r.kernel&&await((v=this.bridge)==null?void 0:v.call("jupyter.session.kernel.connection.restart",r.id))}},{icon:"iconClose",label:this.i18n.menu.kernel.submenu.shutdown.label,disabled:!(r!=null&&r.kernel),click:async()=>{var v;r!=null&&r.kernel&&await((v=this.bridge)==null?void 0:v.call("jupyter.session.kernel.connection.shutdown",r.id))}},{type:"separator"},{type:"readonly",iconHTML:"",label:this.i18n.menu.kernel.submenu.info.label.replaceAll("${1}",_t(((m=r==null?void 0:r.kernel)==null?void 0:m.id)??o.kernel.id)).replaceAll("${2}",_t(a)).replaceAll("${3}",_t(c)).replaceAll("${4}",_t(f)),disabled:!(r!=null&&r.kernel)}]}),l.push({type:"separator"}),l.push({icon:"iconPlay",label:this.i18n.menu.run.label,submenu:[{icon:"iconPlay",label:this.i18n.menu.run.submenu.all.label,disabled:!(r!=null&&r.kernel),submenu:this.buildExecuteMenuItems(!1,r,n)},{icon:"iconRefresh",label:this.i18n.menu.run.submenu.restart.label,accelerator:this.i18n.menu.run.submenu.restart.accelerator,disabled:!(r!=null&&r.kernel),submenu:this.buildExecuteMenuItems(!0,r,n)}]}),l.push({type:"separator"}),l.push({icon:"iconUpload",label:this.i18n.menu.import.label,accelerator:_t(this.i18n.menu.import.accelerator),submenu:[{element:globalThis.document.createElement("div"),bind:v=>{new mo({target:v,props:{file:!0,icon:"#iconEdit",label:this.i18n.menu.import.submenu.override.label,accept:".ipynb",multiple:!1,webkitdirectory:!1}}).$on("selected",async g=>{var _;const d=g.detail.files.item(0);d&&await((_=this.bridge)==null?void 0:_.call("importIpynb",i,d,"override"))})}},{element:globalThis.document.createElement("div"),bind:v=>{new mo({target:v,props:{file:!0,icon:"#iconAfter",label:this.i18n.menu.import.submenu.append.label,accept:".ipynb",multiple:!1,webkitdirectory:!1}}).$on("selected",async g=>{var _;const d=g.detail.files.item(0);d&&await((_=this.bridge)==null?void 0:_.call("importIpynb",i,d,"append"))})}}]}),l}buildExecuteMenuItems(i,s,r){const n=!(s!=null&&s.kernel),l=r.isDocumentBlock||r.isMultiBlock,o=async f=>{var v;i&&await((v=this.bridge)==null?void 0:v.call("jupyter.session.kernel.connection.restart",s.id));const u=await this.getBlockDOM(r),m=os(u,l);await this.requestExecuteCells(m,s,f)},a=f=>[{icon:"iconTheme",label:this.i18n.menu.run.submenu.cntrl.enable.label,accelerator:this.i18n.menu.run.submenu.cntrl.enable.accelerator,disabled:n,click:async()=>{f.cntrl=!0,await o(f)}},{icon:"icon-jupyter-client-text",label:this.i18n.menu.run.submenu.cntrl.disable.label,accelerator:this.i18n.menu.run.submenu.cntrl.disable.accelerator,disabled:n,click:async()=>{f.cntrl=!1,await o(f)}}];return[{icon:"iconPlay",label:this.i18n.menu.run.submenu.custom.label,disabled:n,click:async()=>{const f=this.config.jupyter.execute.output.parser;await o(f)}},{icon:"iconCode",label:this.i18n.menu.run.submenu.terminal.label,accelerator:_t("Xterm"),disabled:n,click:async()=>{await o({xterm:!0,escaped:!1,cntrl:!1})}},{icon:"icon-jupyter-client-text",label:this.i18n.menu.run.submenu.escape.enable.label,accelerator:this.i18n.menu.run.submenu.escape.enable.accelerator,disabled:n,submenu:a({xterm:!1,escaped:!0,cntrl:!0})},{icon:"iconMarkdown",label:this.i18n.menu.run.submenu.escape.disable.label,accelerator:this.i18n.menu.run.submenu.escape.disable.accelerator,disabled:n,submenu:a({xterm:!1,escaped:!1,cntrl:!0})}]}buildOpenDocumentMenuItems(i){const s=[];return s.push({icon:"iconAdd",label:this.i18n.menu.openTab.label,click:()=>{it.openTab({app:this.app,doc:{id:i,action:["cb-get-focus","cb-get-hl"]},keepCursor:!1,removeCurrentTab:!1})}}),s.push({icon:"iconMin",label:this.i18n.menu.openTabBackground.label,click:()=>{it.openTab({app:this.app,doc:{id:i,action:["cb-get-focus","cb-get-hl"]},keepCursor:!0,removeCurrentTab:!1})}}),s.push({icon:"iconLayoutRight",label:this.i18n.menu.openTabRight.label,click:()=>{it.openTab({app:this.app,doc:{id:i,action:["cb-get-focus","cb-get-hl"]},position:"right",keepCursor:!1,removeCurrentTab:!1})}}),s.push({icon:"iconLayoutBottom",label:this.i18n.menu.openTabBottom.label,click:()=>{it.openTab({app:this.app,doc:{id:i,action:["cb-get-focus","cb-get-hl"]},position:"bottom",keepCursor:!1,removeCurrentTab:!1})}}),s}async requestInspect(i,s){var n,l;const r=await((n=this.bridge)==null?void 0:n.call("jupyter.session.kernel.connection.requestInspect",i,{code:s.code,cursor_pos:s.offset,detail_level:this.config.jupyter.inspect.detail_level}));if(r)switch(r.content.status){case"ok":if(r.content.found){const o=r.content.data["text/plain"];if(o!==void 0){const a=Km(Array.isArray(o)?o.join():o,!0);return(l=this.jupyterInspectDock.component)==null||l.$set({stream:a}),!0}else this.logger.warn(r)}break;case"abort":this.logger.info(r);case"error":this.logger.warn(r);break}return!1}async requestComplete(i,s){var l;const r={code:s.code,cursor_pos:s.offset},n=await((l=this.bridge)==null?void 0:l.call("jupyter.session.kernel.connection.requestComplete",i,r));if(n)switch(n.content.status){case"ok":{const o=n.content,a=[],c=Ec()?s4:r4,f=o.metadata._jupyter_types_experimental;if(Array.isArray(f)&&f.length>0?f.reduce((u,m)=>{u.type!==m.type&&a.push({type:"separator"});const v=()=>this.complete(s,m.start,m.end,m.text),y={label:m.text,accelerator:_t(m.type),click:v,submenu:m.signature?[{iconHTML:"",label:_t(Ic(m.signature)),click:v}]:void 0},g=c.get(m.type);if(g)y.iconHTML=g;else switch(m.type){case"magic":y.icon="icon-jupyter-client-simple";break;case"path":switch(!0){case m.text.endsWith("/"):y.iconHTML=c.get("folder");break;default:y.iconHTML=c.get("file");break}break;default:y.icon=void 0;break}return a.push(y),m},f[0]):a.push(...o.matches.map(u=>({label:u,click:()=>this.complete(s,o.cursor_start,o.cursor_end,u)}))),a.length>0){const u=s.current,m=(()=>{var h;var g;return g=u.getBoundingClientRect(),g.x>0&&g.y>0?{x:g.right,y:g.bottom}:(g=u.commonAncestorContainer instanceof Element?u.commonAncestorContainer.getBoundingClientRect():void 0,g&&g.x>0&&g.y>0?{x:g.right,y:g.bottom}:(g=u.commonAncestorContainer.parentElement instanceof HTMLSpanElement?(h=u.commonAncestorContainer.parentElement)==null?void 0:h.getBoundingClientRect():void 0,g&&g.x>0&&g.y>0?{x:g.right,y:g.bottom}:(g=s.container.getBoundingClientRect(),{x:g.left,y:g.bottom})))})(),v=new it.Menu(n.header.msg_id,()=>{this.complating=!1,v.element.lastElementChild instanceof HTMLElement&&(v.element.lastElementChild.style.maxHeight="")});if(a.forEach(g=>v.addItem(g)),this.complating=!0,v.open(m),v.element.getBoundingClientRect().y!==m.y){const g=v.element.lastElementChild;if(g instanceof HTMLElement){const h=globalThis.innerHeight-m.y-32;g.style.maxHeight=`${h}px`,v.element.style.top=`${m.y}px`}}}break}case"abort":this.logger.info(n);case"error":this.logger.warn(n);break}return!1}complete(i,s,r,n){var o;Oa(i.container,{start:s,end:r});const l=(o=globalThis.getSelection())==null?void 0:o.getRangeAt(0);l&&l.toString()!==n&&s6(l,n),Oa(i.container,{start:s+n.length})}async requestExecuteCell(i,s,r,n,l=this.config.jupyter.execute.goto){var o;await((o=this.bridge)==null?void 0:o.call("jupyter.session.kernel.connection.requestExecute",this.clientId,i,s,r,n,l))}async requestExecuteCells(i,s,r,n=this.config.jupyter.execute.goto){for(const l of i)await this.requestExecuteCell(l.code,l.id,s.id,r,n)}async executeSelectedCellBlocks(){const i=h4();if(i.cells.length>0){const s=i.cells[0],r=await this.client.getBlockInfo({id:s.id}),n=this.doc2session.get(r.data.rootID);n?await this.requestExecuteCells(i.cells,n,this.config.jupyter.execute.output.parser,!1):this.siyuan.showMessage(this.i18n.messages.sessionNotConnected.text)}else this.siyuan.showMessage(this.i18n.messages.noValidBlockSelected.text);return i}async getNextCodeCell(i){const s=i.cells.at(-1);if(s){const n=(await this.client.getBlockInfo({id:s.id})).data,o=(await this.client.getDoc({id:n.rootID})).data.content,a=os(o,!0),c=a.findIndex(f=>f.id===s.id);if(c>=0)return a.at(c+1)}}async insertNewCodeCell(i){var r,n;const s={data:u4(),dataType:"markdown"};switch(i.elements.length){case 0:{const l=Mg();if(l){s.previousID=l;break}else return}default:{const l=i.elements.at(-1);if(!Ii(l))return;if(Ds(l)){const o=l.nextElementSibling;switch(!0){case f4(o):s.previousID=o.dataset.nodeId;break;case Ds(o):case Ii(o):s.nextID=o.dataset.nodeId;break;default:{const a=l.parentElement;let c;switch(!0){case Lg(a):{const f=a==null?void 0:a.previousElementSibling;if(wg(f)){c=a.dataset.nodeId;break}else return}case Ii(a):c=a.dataset.nodeId;break;default:return}try{return(r=(await this.client.appendBlock({...s,parentID:c})).data[0])==null?void 0:r.doOperations[0]}catch{return}}}}else{s.previousID=l.dataset.nodeId;break}break}}try{return(n=(await this.client.insertBlock(s)).data[0])==null?void 0:n.doOperations[0]}catch{return}}async gotoBlock(i,s=!0,r){await it.openTab({app:this.app,doc:{id:i,action:[s?"cb-get-hl":"cb-get-focus"]},keepCursor:!1,removeCurrentTab:!1,afterOpen:r})}async getBlockDOM(i){var s;if(i.isDocumentBlock)s=(await this.client.getDoc({id:i.id})).data.content;else{const r=[];for(const n of i.blocks)r.push(n.element.outerHTML);s=r.join("")}return s}updateDockFocusItem(i){var r,n,l;const s=this.doc2session.get(i);(l=this.jupyterDock.component)==null||l.$set({currentSpec:(r=s==null?void 0:s.kernel)==null?void 0:r.name,currentKernel:(n=s==null?void 0:s.kernel)==null?void 0:n.id,currentSession:s==null?void 0:s.id,currentDocument:i})}toggleEditEventListener(i,s){var r,n,l,o;if(s){if(!this.protyles.has(i)){const a=["keyup",c=>this.editEventListener(c,i),{capture:!0}];this.protyles.set(i,a),(n=(r=i.wysiwyg)==null?void 0:r.element)==null||n.addEventListener(...a)}}else{const a=this.protyles.get(i);a&&((o=(l=i.wysiwyg)==null?void 0:l.element)==null||o.removeEventListener(...a))}}};ne(kt,"GLOBAL_CONFIG_NAME","global-config"),ne(kt,"CUSTOM_TAB_TYPE_JUPYTER","-jupyter-tab"),ne(kt,"EDIT_KEYBOARD_EVENT_STATUS_INSPECT",{type:"keyup",altKey:!1,ctrlKey:!1,metaKey:!1,shiftKey:!1,key:i=>/^(\S|Tab|Delete|Backspace|ArrowUp|ArrowDown|ArrowLeft|ArrowRight|Home|End)$/.test(i)}),ne(kt,"EDIT_KEYBOARD_EVENT_STATUS_COMPLATE",{type:"keyup",altKey:!1,ctrlKey:!1,metaKey:!1,shiftKey:!1,key:i=>/^(\S|Tab|Delete|Backspace)$/.test(i)});let hn=kt;module.exports=hn;
