"use strict";var Ul=Object.defineProperty;var Wl=(e,t,i)=>t in e?Ul(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i;var fe=(e,t,i)=>(Wl(e,typeof t!="symbol"?t+"":t,i),i);const at=require("siyuan"),Yl="jupyter-client",zl="Zuoqiu Yingyi",ql="https://github.com/Zuoqiu-Yingyi/siyuan-plugin-jupyter-client",Vl="0.1.1",Kl="2.10.3",Gl={default:"Jupyter Client",zh_CN:"Jupyter 客户端",zh_CHT:"Jupyter 客戶端"},$l={default:"The plugin can connect to the Jupyter service, run the code block, output and save the run result.",zh_CN:"该插件可以连接 Jupyter 服务，运行代码块，输出并保存运行结果。",zh_CHT:"該插件可以連接 Jupyter 服務，運行代碼塊，輸出並保存運行結果。"},Jl={default:"README.md",zh_CN:"README_zh_CN.md",zh_CHT:"README_zh_CN.md"},Zl={openCollective:"",patreon:"",github:"",custom:["https://afdian.net/a/zuoqiu","https://ko-fi.com/zuoqiu"]},Xl={name:Yl,author:zl,url:ql,version:Vl,minAppVersion:Kl,displayName:Gl,description:$l,readme:Jl,funding:Zl};const Ql=`<symbol
    id="icon-jupyter-client"
    viewBox="0 0 44 51"
    xmlns="http://www.w3.org/2000/svg"
    xmlns:xlink="http://www.w3.org/1999/xlink"
    xmlns:figma="http://www.figma.com/figma/ns"
>
    <title>Group.svg</title>
    <desc>Created using Figma 0.90</desc>
    <g transform="translate(-1640 -2453)" figma:type="canvas">
        <g style="mix-blend-mode:normal;" figma:type="group">
            <g style="mix-blend-mode:normal;" figma:type="group">
                <g style="mix-blend-mode:normal;" figma:type="group">
                    <g style="mix-blend-mode:normal;" figma:type="group">
                        <g style="mix-blend-mode:normal;" figma:type="group">
                            <g style="mix-blend-mode:normal;" figma:type="vector">
                                <use xlink:href="#jupyter-client-path0_fill" transform="translate(1640.54 2474.36)"
                                    fill="#4E4E4E" style="mix-blend-mode:normal;" />
                            </g>
                        </g>
                        <g style="mix-blend-mode:normal;" figma:type="group">
                            <g style="mix-blend-mode:normal;" figma:type="vector">
                                <use xlink:href="#jupyter-client-path1_fill" transform="translate(1645.68 2474.37)"
                                    fill="#4E4E4E" style="mix-blend-mode:normal;" />
                            </g>
                        </g>
                        <g style="mix-blend-mode:normal;" figma:type="group">
                            <g style="mix-blend-mode:normal;" figma:type="vector">
                                <use xlink:href="#jupyter-client-path2_fill" transform="translate(1653.39 2474.26)"
                                    fill="#4E4E4E" style="mix-blend-mode:normal;" />
                            </g>
                        </g>
                        <g style="mix-blend-mode:normal;" figma:type="group">
                            <g style="mix-blend-mode:normal;" figma:type="vector">
                                <use xlink:href="#jupyter-client-path3_fill" transform="translate(1660.43 2474.39)"
                                    fill="#4E4E4E" style="mix-blend-mode:normal;" />
                            </g>
                        </g>
                        <g style="mix-blend-mode:normal;" figma:type="group">
                            <g style="mix-blend-mode:normal;" figma:type="vector">
                                <use xlink:href="#jupyter-client-path4_fill" transform="translate(1667.55 2472.54)"
                                    fill="#4E4E4E" style="mix-blend-mode:normal;" />
                            </g>
                        </g>
                        <g style="mix-blend-mode:normal;" figma:type="group">
                            <g style="mix-blend-mode:normal;" figma:type="vector">
                                <use xlink:href="#jupyter-client-path5_fill" transform="translate(1672.47 2474.29)"
                                    fill="#4E4E4E" style="mix-blend-mode:normal;" />
                            </g>
                        </g>
                        <g style="mix-blend-mode:normal;" figma:type="group">
                            <g style="mix-blend-mode:normal;" figma:type="vector">
                                <use xlink:href="#jupyter-client-path6_fill" transform="translate(1679.98 2474.24)"
                                    fill="#4E4E4E" style="mix-blend-mode:normal;" />
                            </g>
                        </g>
                    </g>
                </g>
                <g style="mix-blend-mode:normal;" figma:type="group">
                    <g style="mix-blend-mode:normal;" figma:type="group">
                        <g style="mix-blend-mode:normal;" figma:type="vector">
                            <use xlink:href="#jupyter-client-path7_fill" transform="translate(1673.48 2453.69)"
                                fill="#767677" style="mix-blend-mode:normal;" />
                        </g>
                    </g>
                    <g style="mix-blend-mode:normal;" figma:type="group">
                        <g style="mix-blend-mode:normal;" figma:type="vector">
                            <use xlink:href="#jupyter-client-path8_fill" transform="translate(1643.21 2484.27)"
                                fill="#F37726" style="mix-blend-mode:normal;" />
                        </g>
                    </g>
                    <g style="mix-blend-mode:normal;" figma:type="group">
                        <g style="mix-blend-mode:normal;" figma:type="vector">
                            <use xlink:href="#jupyter-client-path9_fill" transform="translate(1643.21 2457.88)"
                                fill="#F37726" style="mix-blend-mode:normal;" />
                        </g>
                    </g>
                    <g style="mix-blend-mode:normal;" figma:type="group">
                        <g style="mix-blend-mode:normal;" figma:type="vector">
                            <use xlink:href="#jupyter-client-path10_fill" transform="translate(1643.28 2496.09)"
                                fill="#9E9E9E" style="mix-blend-mode:normal;" />
                        </g>
                    </g>
                    <g style="mix-blend-mode:normal;" figma:type="group">
                        <g style="mix-blend-mode:normal;" figma:type="vector">
                            <use xlink:href="#jupyter-client-path11_fill" transform="translate(1641.87 2458.43)"
                                fill="#616262" style="mix-blend-mode:normal;" />
                        </g>
                    </g>
                </g>
            </g>
        </g>
    </g>
    <defs>
        <path id="jupyter-client-path0_fill"
            d="M 1.74498 5.47533C 1.74498 7.03335 1.62034 7.54082 1.29983 7.91474C 0.943119 8.23595 0.480024 8.41358 0 8.41331L 0.124642 9.3036C 0.86884 9.31366 1.59095 9.05078 2.15452 8.56466C 2.45775 8.19487 2.6834 7.76781 2.818 7.30893C 2.95261 6.85005 2.99341 6.36876 2.93798 5.89377L 2.93798 0L 1.74498 0L 1.74498 5.43972L 1.74498 5.47533Z" />
        <path id="jupyter-client-path1_fill"
            d="M 5.50204 4.76309C 5.50204 5.43081 5.50204 6.02731 5.55545 6.54368L 4.496 6.54368L 4.42478 5.48423C 4.20318 5.85909 3.88627 6.16858 3.50628 6.38125C 3.12628 6.59392 2.69675 6.70219 2.26135 6.69503C 1.22861 6.69503 0 6.13415 0 3.84608L 0 0.0445149L 1.193 0.0445149L 1.193 3.6057C 1.193 4.84322 1.57583 5.67119 2.65309 5.67119C 2.87472 5.67358 3.09459 5.63168 3.29982 5.54796C 3.50505 5.46424 3.69149 5.34039 3.84822 5.18366C 4.00494 5.02694 4.1288 4.84049 4.21252 4.63527C 4.29623 4.43004 4.33813 4.21016 4.33575 3.98853L 4.33575 0L 5.52874 0L 5.52874 4.72748L 5.50204 4.76309Z" />
        <path id="jupyter-client-path2_fill"
            d="M 0.0534178 2.27264C 0.0534178 1.44466 0.0534178 0.768036 0 0.153731L 1.06836 0.153731L 1.12177 1.2666C 1.3598 0.864535 1.70247 0.534594 2.11325 0.311954C 2.52404 0.0893145 2.98754 -0.0176786 3.45435 0.00238095C 5.03908 0.00238095 6.23208 1.32892 6.23208 3.30538C 6.23208 5.63796 4.7987 6.79535 3.24958 6.79535C 2.85309 6.81304 2.45874 6.7281 2.10469 6.54874C 1.75064 6.36937 1.44888 6.10166 1.22861 5.77151L 1.22861 5.77151L 1.22861 9.33269L 0.0534178 9.33269L 0.0534178 2.29935L 0.0534178 2.27264ZM 1.22861 4.00872C 1.23184 4.17026 1.24972 4.33117 1.28203 4.48948C 1.38304 4.88479 1.61299 5.23513 1.93548 5.48506C 2.25798 5.735 2.65461 5.87026 3.06262 5.86944C 4.31794 5.86944 5.05689 4.8456 5.05689 3.3588C 5.05689 2.05897 4.36246 0.946096 3.10714 0.946096C 2.61036 0.986777 2.14548 1.20726 1.79965 1.5662C 1.45382 1.92514 1.25079 2.3979 1.22861 2.89585L 1.22861 4.00872Z" />
        <path id="jupyter-client-path3_fill"
            d="M 1.31764 0.0178059L 2.75102 3.85499C 2.90237 4.28233 3.06262 4.7987 3.16946 5.18153C 3.2941 4.7898 3.42764 4.29123 3.5879 3.82828L 4.88773 0.0178059L 6.14305 0.0178059L 4.36246 4.64735C 3.47216 6.87309 2.92908 8.02158 2.11 8.71601C 1.69745 9.09283 1.19448 9.35658 0.649917 9.48166L 0.356119 8.48453C 0.736886 8.35942 1.09038 8.16304 1.39777 7.90584C 1.8321 7.55188 2.17678 7.10044 2.4038 6.5882C 2.45239 6.49949 2.48551 6.40314 2.50173 6.3033C 2.49161 6.19586 2.46457 6.0907 2.42161 5.9917L 0 0L 1.29983 0L 1.31764 0.0178059Z" />
        <path id="jupyter-client-path4_fill"
            d="M 2.19013 0L 2.19013 1.86962L 3.8995 1.86962L 3.8995 2.75992L 2.19013 2.75992L 2.19013 6.26769C 2.19013 7.06896 2.42161 7.53191 3.08043 7.53191C 3.31442 7.53574 3.54789 7.5088 3.77486 7.45179L 3.82828 8.34208C 3.48794 8.45999 3.12881 8.51431 2.76882 8.50234C 2.53042 8.51726 2.29161 8.48043 2.06878 8.39437C 1.84595 8.30831 1.64438 8.17506 1.47789 8.00377C 1.11525 7.51873 0.949826 6.91431 1.01494 6.31221L 1.01494 2.75102L 0 2.75102L 0 1.86072L 1.03274 1.86072L 1.03274 0.275992L 2.19013 0Z" />
        <path id="jupyter-client-path5_fill"
            d="M 1.17716 3.57899C 1.153 3.88093 1.19468 4.18451 1.29933 4.46876C 1.40398 4.75301 1.5691 5.01114 1.78329 5.22532C 1.99747 5.43951 2.2556 5.60463 2.53985 5.70928C 2.8241 5.81393 3.12768 5.85561 3.42962 5.83145C 4.04033 5.84511 4.64706 5.72983 5.21021 5.49313L 5.41498 6.38343C 4.72393 6.66809 3.98085 6.80458 3.23375 6.78406C 2.79821 6.81388 2.36138 6.74914 1.95322 6.59427C 1.54505 6.43941 1.17522 6.19809 0.869071 5.88688C 0.562928 5.57566 0.327723 5.2019 0.179591 4.79125C 0.0314584 4.38059 -0.0260962 3.94276 0.0108748 3.50777C 0.0108748 1.54912 1.17716 0 3.0824 0C 5.21911 0 5.75329 1.86962 5.75329 3.06262C 5.76471 3.24644 5.76471 3.43079 5.75329 3.61461L 1.15046 3.61461L 1.17716 3.57899ZM 4.66713 2.6887C 4.70149 2.45067 4.68443 2.20805 4.61709 1.97718C 4.54976 1.74631 4.43372 1.53255 4.2768 1.35031C 4.11987 1.16808 3.92571 1.0216 3.70739 0.920744C 3.48907 0.81989 3.25166 0.767006 3.01118 0.765656C 2.52201 0.801064 2.06371 1.01788 1.72609 1.37362C 1.38847 1.72935 1.19588 2.19835 1.18607 2.6887L 4.66713 2.6887Z" />
        <path id="jupyter-client-path6_fill"
            d="M 0.0534178 2.19228C 0.0534178 1.42663 0.0534178 0.767806 0 0.162404L 1.06836 0.162404L 1.06836 1.43553L 1.12177 1.43553C 1.23391 1.04259 1.4656 0.694314 1.78468 0.439049C 2.10376 0.183783 2.4944 0.034196 2.90237 0.0110538C 3.01466 -0.00368459 3.12839 -0.00368459 3.24068 0.0110538L 3.24068 1.12393C 3.10462 1.10817 2.9672 1.10817 2.83114 1.12393C 2.427 1.13958 2.04237 1.30182 1.7491 1.58035C 1.45583 1.85887 1.27398 2.23462 1.23751 2.63743C 1.20422 2.8196 1.18635 3.00425 1.1841 3.18941L 1.1841 6.65267L 0.00890297 6.65267L 0.00890297 2.20118L 0.0534178 2.19228Z" />
        <path id="jupyter-client-path7_fill"
            d="M 6.03059 2.83565C 6.06715 3.43376 5.92485 4.02921 5.6218 4.54615C 5.31875 5.0631 4.86869 5.47813 4.32893 5.73839C 3.78917 5.99864 3.18416 6.09233 2.59097 6.00753C 1.99778 5.92272 1.44326 5.66326 0.998048 5.26219C 0.552837 4.86113 0.23709 4.33661 0.0910307 3.75546C -0.0550287 3.17431 -0.0247891 2.56283 0.177897 1.99893C 0.380583 1.43503 0.746541 0.944221 1.22915 0.589037C 1.71176 0.233853 2.28918 0.0303686 2.88784 0.00450543C 3.28035 -0.0170932 3.67326 0.0391144 4.04396 0.169896C 4.41467 0.300677 4.75587 0.503453 5.04794 0.766561C 5.34 1.02967 5.57718 1.34792 5.74582 1.70301C 5.91446 2.0581 6.01124 2.44303 6.03059 2.83565L 6.03059 2.83565Z" />
        <path id="jupyter-client-path8_fill"
            d="M 18.6962 7.12238C 10.6836 7.12238 3.64131 4.24672 0 0C 1.41284 3.82041 3.96215 7.1163 7.30479 9.44404C 10.6474 11.7718 14.623 13.0196 18.6962 13.0196C 22.7695 13.0196 26.745 11.7718 30.0877 9.44404C 33.4303 7.1163 35.9796 3.82041 37.3925 4.0486e-13C 33.7601 4.24672 26.7445 7.12238 18.6962 7.12238Z" />
        <path id="jupyter-client-path9_fill"
            d="M 18.6962 5.89725C 26.7089 5.89725 33.7512 8.77291 37.3925 13.0196C 35.9796 9.19922 33.4303 5.90333 30.0877 3.57559C 26.745 1.24785 22.7695 4.0486e-13 18.6962 0C 14.623 4.0486e-13 10.6474 1.24785 7.30479 3.57559C 3.96215 5.90333 1.41284 9.19922 0 13.0196C 3.64131 8.76401 10.648 5.89725 18.6962 5.89725Z" />
        <path id="jupyter-client-path10_fill"
            d="M 7.59576 3.56656C 7.64276 4.31992 7.46442 5.07022 7.08347 5.72186C 6.70251 6.3735 6.13619 6.89698 5.45666 7.22561C 4.77713 7.55424 4.01515 7.67314 3.26781 7.56716C 2.52046 7.46117 1.82158 7.13511 1.26021 6.63051C 0.698839 6.12591 0.300394 5.46561 0.115637 4.73375C -0.0691191 4.00188 -0.0318219 3.23159 0.222777 2.52099C 0.477376 1.8104 0.93775 1.19169 1.54524 0.743685C 2.15274 0.295678 2.87985 0.0386595 3.63394 0.00537589C 4.12793 -0.0210471 4.62229 0.0501173 5.08878 0.214803C 5.55526 0.37949 5.98473 0.63447 6.35264 0.965179C 6.72055 1.29589 7.01971 1.69584 7.233 2.1422C 7.4463 2.58855 7.56957 3.07256 7.59576 3.56656L 7.59576 3.56656Z" />
        <path id="jupyter-client-path11_fill"
            d="M 2.25061 4.37943C 1.81886 4.39135 1.39322 4.27535 1.02722 4.04602C 0.661224 3.81668 0.371206 3.48424 0.193641 3.09052C 0.0160762 2.69679 -0.0411078 2.25935 0.0292804 1.83321C 0.0996686 1.40707 0.294486 1.01125 0.589233 0.695542C 0.883981 0.37983 1.2655 0.158316 1.68581 0.0588577C 2.10611 -0.0406005 2.54644 -0.0135622 2.95143 0.136572C 3.35641 0.286707 3.70796 0.553234 3.96186 0.902636C 4.21577 1.25204 4.3607 1.66872 4.37842 2.10027C 4.39529 2.6838 4.18131 3.25044 3.78293 3.67715C 3.38455 4.10387 2.83392 4.35623 2.25061 4.37943Z" />
    </defs>
</symbol>
`,ec=`<symbol
    id="icon-jupyter-client-text"
    viewBox="0 0 1024 1024"
>
    <path
        d="M853.333333 1024 170.666667 1024c-93.866667 0-170.666667-76.8-170.666667-170.666667L0 170.666667c0-93.866667 76.8-170.666667 170.666667-170.666667l682.666667 0c93.866667 0 170.666667 76.8 170.666667 170.666667l0 682.666667C1024 947.2 947.2 1024 853.333333 1024zM170.666667 85.333333C123.733333 85.333333 85.333333 123.733333 85.333333 170.666667l0 682.666667c0 46.933333 38.4 85.333333 85.333333 85.333333l682.666667 0c46.933333 0 85.333333-38.4 85.333333-85.333333L938.666667 170.666667c0-46.933333-38.4-85.333333-85.333333-85.333333L170.666667 85.333333zM725.333333 341.333333 298.666667 341.333333C273.066667 341.333333 256 324.266667 256 298.666667s17.066667-42.666667 42.666667-42.666667l426.666667 0c25.6 0 42.666667 17.066667 42.666667 42.666667S750.933333 341.333333 725.333333 341.333333zM298.666667 384C273.066667 384 256 366.933333 256 341.333333L256 298.666667c0-25.6 17.066667-42.666667 42.666667-42.666667s42.666667 17.066667 42.666667 42.666667l0 42.666667C341.333333 366.933333 324.266667 384 298.666667 384zM725.333333 384c-25.6 0-42.666667-17.066667-42.666667-42.666667L682.666667 298.666667c0-25.6 17.066667-42.666667 42.666667-42.666667s42.666667 17.066667 42.666667 42.666667l0 42.666667C768 366.933333 750.933333 384 725.333333 384zM512 768c-25.6 0-42.666667-17.066667-42.666667-42.666667L469.333333 298.666667c0-25.6 17.066667-42.666667 42.666667-42.666667s42.666667 17.066667 42.666667 42.666667l0 426.666667C554.666667 750.933333 537.6 768 512 768zM554.666667 768l-85.333333 0c-25.6 0-42.666667-17.066667-42.666667-42.666667s17.066667-42.666667 42.666667-42.666667l85.333333 0c25.6 0 42.666667 17.066667 42.666667 42.666667S580.266667 768 554.666667 768z"
    />
</symbol>
`,tc=`<symbol
    id="icon-jupyter-client-simple"
    viewBox="0 0 152 165"
    xmlns="http://www.w3.org/2000/svg"
    xmlns:xlink="http://www.w3.org/1999/xlink"
>
    <!-- Generator: Sketch 39.1 (31720) - http://www.bohemiancoding.com/sketch -->
    <title>logo</title>
    <desc>Created with Sketch.</desc>
    <defs></defs>
    <g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
        <g fill="#F37726">
            <g>
                <g>
                    <g>
                        <g>
                            <g transform="translate(0.000000, 109.804878)">
                                <g>
                                    <g
                                        transform="translate(0.078947, 0.778049)">
                                        <path
                                            d="M75.9422842,29.5804561 C43.3023947,29.5804561 14.7967832,17.6534634 0,0 C5.51083211,15.8406829 15.7815389,29.5667732 29.3904947,39.2784171 C42.9997,48.9898537 59.2737,54.2067805 75.9605789,54.2067805 C92.6474579,54.2067805 108.921458,48.9898537 122.530663,39.2784171 C136.139453,29.5667732 146.410284,15.8406829 151.921158,0 C137.087868,17.6534634 108.582589,29.5804561 75.9422842,29.5804561 L75.9422842,29.5804561 Z"
                                        />
                                    </g>
                                </g>
                            </g>
                            <g>
                                <g>
                                    <g
                                        transform="translate(0.037368, 0.704878)">
                                        <path
                                            d="M75.9784579,24.6264073 C108.618763,24.6264073 137.124458,36.5534415 151.921158,54.2067805 C146.410284,38.366222 136.139453,24.6401317 122.530663,14.9284878 C108.921458,5.2168439 92.6474579,0 75.9605789,0 C59.2737,0 42.9997,5.2168439 29.3904947,14.9284878 C15.7815389,24.6401317 5.51083211,38.366222 0,54.2067805 C14.8330816,36.5899293 43.3385684,24.6264073 75.9784579,24.6264073 L75.9784579,24.6264073 Z"
                                        />
                                    </g>
                                </g>
                            </g>
                        </g>
                    </g>
                </g>
            </g>
        </g>
    </g>
</symbol>
`,ic=`<symbol
    id="icon-jupyter-client-terminal"
    viewBox="0 0 24 24"
>
    <path
        d="M3 3H21C21.5523 3 22 3.44772 22 4V20C22 20.5523 21.5523 21 21 21H3C2.44772 21 2 20.5523 2 20V4C2 3.44772 2.44772 3 3 3ZM4 5V19H20V5H4ZM12 15H18V17H12V15ZM8.66685 12L5.83842 9.17157L7.25264 7.75736L11.4953 12L7.25264 16.2426L5.83842 14.8284L8.66685 12Z"
    />
</symbol>
`,sc=`<symbol
    id="icon-jupyter-client-kernelspec"
    viewBox="0 0 512 512"
>
    <g>
        <path
            d="M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8zm96 328c0 8.8-7.2 16-16 16H176c-8.8 0-16-7.2-16-16V176c0-8.8 7.2-16 16-16h160c8.8 0 16 7.2 16 16v160z"
        />
    </g>
</symbol>
`,rc=`<symbol
    id="icon-jupyter-client-kernel"
    viewBox="0 0 24 24"
>
    <path
        d="M15 9H9v6h6V9zm-2 4h-2v-2h2v2zm8-2V9h-2V7c0-1.1-.9-2-2-2h-2V3h-2v2h-2V3H9v2H7c-1.1 0-2 .9-2 2v2H3v2h2v2H3v2h2v2c0 1.1.9 2 2 2h2v2h2v-2h2v2h2v-2h2c1.1 0 2-.9 2-2v-2h2v-2h-2v-2h2zm-4 6H7V7h10v10z"
    />
</symbol>
`,nc=`<symbol
    id="icon-jupyter-client-kernel-unknown"
    viewBox="0 0 24 24"
    fill="none"
>
    <path
        stroke="currentColor"
        stroke-width="2"
        d="M2,3.99079514 C2,2.89130934 2.89821238,2 3.99079514,2 L20.0092049,2 C21.1086907,2 22,2.89821238 22,3.99079514 L22,20.0092049 C22,21.1086907 21.1017876,22 20.0092049,22 L3.99079514,22 C2.89130934,22 2,21.1017876 2,20.0092049 L2,3.99079514 Z M12,15 L12,14 C12,13 12,12.5 13,12 C14,11.5 15,11 15,9.5 C15,8.5 14,7 12,7 C10,7 9,8.26413718 9,10 M12,16 L12,18"
    />
</symbol>
`,oc=`<symbol
    id="icon-jupyter-client-kernel-starting"
    viewBox="0 0 1024 1024"
>
    <path
        d="M256 640c-35.413333 0-67.413333 14.506667-90.453333 37.546667C115.2 727.893333 85.333333 938.666667 85.333333 938.666667s210.773333-29.866667 261.12-80.213334A127.829333 127.829333 0 0 0 256 640z m30.293333 158.293333c-11.946667 11.946667-92.586667 32.426667-92.586666 32.426667s20.053333-80.213333 32.426666-92.586667c7.253333-8.106667 17.92-12.8 29.866667-12.8a42.794667 42.794667 0 0 1 30.293333 72.96z m456.96-215.893333c271.36-271.36 180.906667-482.56 180.906667-482.56S712.96 9.386667 441.6 280.746667l-106.24-21.333334a86.613333 86.613333 0 0 0-77.226667 23.466667L85.333333 456.106667l213.333334 91.306666L476.586667 725.333333l91.306666 213.333334 172.8-172.8c20.053333-20.053333 29.013333-49.066667 23.466667-77.226667l-20.906667-106.24zM316.16 462.08l-81.493333-34.986667 84.053333-84.053333 61.44 12.373333c-24.32 35.413333-46.08 72.533333-64 106.666667z m280.746667 327.253333l-34.986667-81.493333c34.133333-17.92 71.253333-39.68 106.24-64l12.373333 61.44-83.626666 84.053333zM682.666667 522.24c-56.32 56.32-144.213333 102.4-172.373334 116.48l-125.013333-125.013333c13.653333-27.733333 59.733333-115.626667 116.48-172.373334 199.68-199.68 351.146667-170.24 351.146667-170.24s29.44 151.466667-170.24 351.146667zM640 469.333333c46.933333 0 85.333333-38.4 85.333333-85.333333s-38.4-85.333333-85.333333-85.333333-85.333333 38.4-85.333333 85.333333 38.4 85.333333 85.333333 85.333333z"
    />
</symbol>
`,ac=`<symbol
    id="icon-jupyter-client-kernel-idle"
    viewBox="0 0 1024 1024"
>
    <path
        d="M926.3 337.9c-22.6-53.3-54.8-101.2-96-142.3-41.1-41.1-89-73.4-142.3-96-55.2-23.4-113.9-35.2-174.3-35.2S394.6 76.2 339.3 99.6c-53.3 22.6-101.2 54.8-142.3 96-41.1 41.1-73.4 89-96 142.3-23.4 55.2-35.2 113.9-35.2 174.3 0 60.4 11.8 119.1 35.2 174.3 22.6 53.3 54.8 101.2 96 142.3 41.1 41.1 89 73.4 142.3 96 55.2 23.4 113.9 35.2 174.3 35.2s119.1-11.8 174.3-35.2c53.3-22.6 101.2-54.8 142.3-96 41.1-41.1 73.4-89 96-142.3 23.4-55.2 35.2-113.9 35.2-174.3 0.1-60.4-11.8-119.1-35.1-174.3zM513.7 879.1c-202.3 0-366.9-164.6-366.9-366.9s164.6-366.9 366.9-366.9c202.3 0 366.9 164.6 366.9 366.9S716 879.1 513.7 879.1zM715.6 371.6c-15.7-15.7-41.4-15.7-57 0l-196 196-95.9-95.9c-15.7-15.7-41.4-15.7-57 0-15.7 15.7-15.7 41.4 0 57l124.5 124.5c15.7 15.7 41.4 15.7 57 0l224.5-224.5c15.6-15.7 15.6-41.4-0.1-57.1z"
    />
</symbol>
`,lc=`<symbol
    id="icon-jupyter-client-kernel-busy"
    viewBox="0 0 1024 1024"
>
    <path
        d="M492.8 214.4c19.2 0 38.4 16 38.4 38.4v243.2c0 41.6-32 73.6-73.6 73.6h-166.4c-19.2 0-38.4-16-38.4-38.4 0-19.2 16-38.4 38.4-38.4h166.4v-243.2c0-16 16-35.2 35.2-35.2zM873.6 291.2c35.2 67.2 54.4 140.8 51.2 211.2-22.4-6.4-48-3.2-73.6 0 0-60.8-12.8-121.6-44.8-176-96-182.4-323.2-249.6-505.6-153.6s-249.6 323.2-153.6 505.6c51.2 96 137.6 160 233.6 185.6l-38.4 64c-108.8-35.2-201.6-108.8-259.2-214.4-115.2-217.6-35.2-486.4 182.4-604.8s492.8-35.2 608 182.4zM755.2 150.4c60.8 48 105.6 105.6 134.4 172.8-22.4 6.4-48 16-67.2 28.8-22.4-54.4-60.8-105.6-112-144-163.2-128-396.8-99.2-524.8 64-128 163.2-99.2 396.8 64 524.8 83.2 67.2 188.8 89.6 288 73.6l-9.6 73.6c-112 12.8-227.2-16-323.2-92.8-195.2-153.6-227.2-432-76.8-627.2 153.6-192 435.2-227.2 627.2-73.6zM748.8 496c-128 0-233.6 105.6-233.6 233.6s105.6 233.6 233.6 233.6 233.6-105.6 233.6-233.6c3.2-128-102.4-233.6-233.6-233.6z m0 393.6c-89.6 0-160-70.4-160-160s70.4-160 160-160 160 70.4 160 160-70.4 160-160 160zM627.2 732.8v-3.2c0-16 12.8-32 32-32h172.8c16 0 32 12.8 32 32v3.2c0 16-12.8 32-32 32h-172.8c-16 0-32-16-32-32z"
    />
</symbol>
`,cc=`<symbol
    id="icon-jupyter-client-kernel-terminating"
    viewBox="0 0 1024 1024"
>
    <path
        d="M57.33 0h909.34q24 0 40.67 16.66Q1024 33.32 1024 57.32v909.34q0 24-16.66 40.67-16.67 16.66-40.67 16.66H57.33q-24 0-40.66-16.66Q0.01 990.66 0.01 966.66V57.32q0-24 16.66-40.66Q33.33 0 57.33 0z m56 113.33v797.34h797.34V113.33H113.33zM228 454.67h568v114.66H228V454.67z"
    />
</symbol>
`,hc=`<symbol
    id="icon-jupyter-client-kernel-restarting"
    viewBox="0 0 1024 1024"
>
    <path
        d="M707.584 389.312c-12.928-6.08-18.88-14.272-17.728-24.576s5.504-18.432 13.12-24.576c2.304-1.536 9.728-7.424 22.272-17.664 12.544-10.304 28.032-22.656 46.272-37.12-32-36.544-70.144-65.28-114.304-86.208-44.096-20.864-92.096-31.36-143.936-31.36-48 0-92.992 8.96-134.912 26.816-41.92 17.92-78.528 42.432-109.76 73.664-31.232 31.168-55.808 67.712-73.728 109.568s-26.88 86.784-26.88 134.72c0 47.168 8.96 91.712 26.88 133.568s42.496 78.4 73.728 109.568c31.232 31.232 67.84 55.744 109.76 73.6s86.848 26.816 134.912 26.816c39.616 0 77.184-6.272 112.576-18.816 35.456-12.544 67.84-30.272 97.152-53.056 29.312-22.848 54.464-49.664 75.456-80.512 20.928-30.848 36.416-64.512 46.272-101.056 5.312-17.472 15.232-31.936 29.696-43.392 14.464-11.392 31.616-17.152 51.456-17.152 23.616 0 43.648 8.384 60.032 25.152 16.384 16.704 24.576 36.544 24.576 59.328 0 10.624-1.92 20.928-5.696 30.848-16 53.248-39.616 102.336-70.848 147.264s-68.416 83.52-111.488 115.84c-43.072 32.32-90.88 57.664-143.488 75.904-52.544 18.368-107.776 27.52-165.696 27.52-70.848 0-137.536-13.312-200.064-39.936-62.464-26.624-116.8-63.168-162.88-109.568s-82.688-100.672-109.76-162.688c-27.072-62.016-40.576-128.448-40.576-199.232s13.504-137.344 40.576-199.808c27.072-62.4 63.616-116.608 109.76-162.688 46.08-46.016 100.416-82.56 162.88-109.568s129.152-40.512 200.064-40.512c78.528 0 151.296 16.192 218.368 48.512s124.224 76.288 171.456 131.84c17.536-12.928 32.192-24.192 44.032-33.664 11.84-9.536 19.264-15.424 22.272-17.728 4.608-3.776 9.536-6.656 14.848-8.576s10.304-1.92 14.848 0c4.544 1.92 8.576 5.888 12.032 11.968s5.888 15.232 7.424 27.392c0.768 6.848 1.536 18.432 2.304 34.816s1.536 35.392 2.304 57.088c0.768 21.696 1.152 44.16 1.152 67.328 0 23.232-0.384 45.12-1.152 65.664-0.768 25.856-6.848 44.544-18.304 55.936-6.144 6.144-15.296 9.6-27.456 10.368-12.224 0.768-25.152-0.384-38.848-3.456-20.608-4.544-43.264-9.472-68.032-14.848-24.768-5.312-48.384-10.816-70.848-16.576-22.464-5.696-42.304-11.072-59.456-16-17.152-4.864-28.032-8.512-32.64-10.752l0 0 0 0z"
    />
</symbol>
`,uc=`<symbol
    id="icon-jupyter-client-kernel-autorestarting"
    viewBox="0 0 1024 1024"
>
    <path
        d="M150.613333 640H61.44A461.653333 461.653333 0 0 1 42.666667 512 469.333333 469.333333 0 0 1 512 42.666667a463.786667 463.786667 0 0 1 298.666667 107.52V42.666667h85.333333v256h-256V213.333333h111.36A384 384 0 0 0 128 512a378.453333 378.453333 0 0 0 22.613333 128z m810.666667-256h-89.6A384 384 0 0 1 270.506667 810.666667H384v-85.333334H128v256h85.333333v-107.946666A469.333333 469.333333 0 0 0 981.333333 512a462.08 462.08 0 0 0-17.92-128h-2.133333z m-376.746667 208.213333h-150.613333L401.92 682.666667H330.666667l148.906666-384h61.44l149.333334 384H618.666667l-34.133334-90.453334z m-133.546666-53.333333h116.48L512 380.16l-61.013333 158.72z"
    />
</symbol>
`,fc=`<symbol
    id="icon-jupyter-client-kernel-dead"
    viewBox="0 0 1024 1024"
>
    <path
        d="M512 960c-60.416 0-119.296-11.776-174.592-35.328-53.248-22.528-101.376-54.784-142.336-95.744s-73.216-89.088-95.744-142.336c-23.552-55.296-35.328-114.176-35.328-174.592s11.776-119.296 35.328-174.592c22.528-53.248 54.784-101.376 95.744-142.336s89.088-73.216 142.336-95.744c55.296-23.552 114.176-35.328 174.592-35.328s119.296 11.776 174.592 35.328c53.248 22.528 101.376 54.784 142.336 95.744s73.216 89.088 95.744 142.336c23.552 55.296 35.328 114.176 35.328 174.592s-11.776 119.296-35.328 174.592c-22.528 53.248-54.784 101.376-95.744 142.336s-89.088 73.216-142.336 95.744c-55.296 23.552-114.176 35.328-174.592 35.328z m0-809.472c-96.256 0-187.392 37.376-255.488 105.984-68.096 68.096-105.984 158.72-105.984 255.488s37.376 187.392 105.984 255.488 158.72 105.984 255.488 105.984 187.392-37.376 255.488-105.984 105.984-158.72 105.984-255.488-37.376-187.392-105.984-255.488-159.232-105.984-255.488-105.984zM242.688 824.832c-11.264 0-22.016-4.096-30.72-12.8-16.896-16.896-16.896-44.544 0-61.44L729.6 232.96c16.896-16.896 44.544-16.896 61.44 0 16.896 16.896 16.896 44.544 0 61.44L273.408 812.032c-8.704 8.704-19.968 12.8-30.72 12.8z"
    />
</symbol>
`,dc=`<symbol
    id="icon-jupyter-client-session"
    viewBox="0 0 1024 1024"
>
    <path
        d="M213.33 532.33v-320h405.33V383H704V169.67c0-23.57-19.1-42.67-42.67-42.67H170.67c-11.32 0-22.17 4.5-30.17 12.5S128 158.35 128 169.67v448h170v-85.34h-84.67z m85.34 321V426.67c0-11.32 4.5-22.17 12.5-30.17s18.85-12.5 30.17-12.5h511.99c11.32 0 22.17 4.5 30.17 12.5s12.5 18.85 12.5 30.17V896H341.34c-11.32 0-22.17-4.5-30.17-12.5s-12.5-18.85-12.5-30.17z m512-384H384v341.33h426.67V469.33z m-384 213.33v-85.33H512v85.33h-85.33zM640 597.33v85.33h-85.33v-85.33H640z m42.67 85.33v-85.33H768v85.33h-85.33z"
    ></path>
</symbol>
`,_c=`<symbol
    id="icon-jupyter-client-session-console"
    viewBox="0 0 200 200"
>
    <g fill="#0288D1">
        <path
            d="M20 19.8h160v159.9H20z"
        />
    </g>
    <g fill="#fff">
        <path
            d="M105 127.3h40v12.8h-40zM51.1 77L74 99.9l-23.3 23.3 10.5 10.5 23.3-23.3L95 99.9 84.5 89.4 61.6 66.5z"
        />
    </g>
</symbol>
`,pc=`<symbol
    id="icon-jupyter-client-session-notebook"
    viewBox="0 0 22 22"
>
    <g fill="#EF6C00">
        <path
            d="M18.7 3.3v15.4H3.3V3.3h15.4m1.5-1.5H1.8v18.3h18.3l.1-18.3z"
        />
        <path
            d="M16.5 16.5l-5.4-4.3-5.6 4.3v-11h11z"
        />
    </g>
</symbol>
`;var mc=Object.defineProperty,gc=(e,t,i)=>t in e?mc(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i,xt=(e,t,i)=>(gc(e,typeof t!="symbol"?t+"":t,i),i);const vc=/"(?:_|\\u0{2}5[Ff]){2}(?:p|\\u0{2}70)(?:r|\\u0{2}72)(?:o|\\u0{2}6[Ff])(?:t|\\u0{2}74)(?:o|\\u0{2}6[Ff])(?:_|\\u0{2}5[Ff]){2}"\s*:/,bc=/"(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)"\s*:/,yc=/^\s*["[{]|^\s*-?\d[\d.]{0,14}\s*$/;function Sc(e,t){if(e==="__proto__"||e==="constructor"&&t&&typeof t=="object"&&"prototype"in t){wc(e);return}return t}function wc(e){console.warn(`[destr] Dropping "${e}" key to prevent prototype pollution.`)}function Cc(e,t={}){if(typeof e!="string")return e;const i=e.trim();if(e[0]==='"'&&e[e.length-1]==='"')return i.slice(1,-1);if(i.length<=9){const s=i.toLowerCase();if(s==="true")return!0;if(s==="false")return!1;if(s==="undefined")return;if(s==="null")return null;if(s==="nan")return Number.NaN;if(s==="infinity")return Number.POSITIVE_INFINITY;if(s==="-infinity")return Number.NEGATIVE_INFINITY}if(!yc.test(e)){if(t.strict)throw new SyntaxError("[destr] Invalid JSON");return e}try{if(vc.test(e)||bc.test(e)){if(t.strict)throw new Error("[destr] Possible prototype pollution");return JSON.parse(e,Sc)}return JSON.parse(e)}catch(s){if(t.strict)throw s;return e}}const kc=/#/g,Ec=/&/g,Dc=/=/g,Br=/\+/g,Lc=/%5e/gi,Rc=/%60/gi,Tc=/%7c/gi,Ac=/%20/gi;function Mc(e){return encodeURI(""+e).replace(Tc,"|")}function pr(e){return Mc(typeof e=="string"?e:JSON.stringify(e)).replace(Br,"%2B").replace(Ac,"+").replace(kc,"%23").replace(Ec,"%26").replace(Rc,"`").replace(Lc,"^")}function Js(e){return pr(e).replace(Dc,"%3D")}function No(e=""){try{return decodeURIComponent(""+e)}catch{return""+e}}function Oc(e){return No(e.replace(Br," "))}function Bc(e){return No(e.replace(Br," "))}function Pc(e=""){const t={};e[0]==="?"&&(e=e.slice(1));for(const i of e.split("&")){const s=i.match(/([^=]+)=?(.*)/)||[];if(s.length<2)continue;const r=Oc(s[1]);if(r==="__proto__"||r==="constructor")continue;const n=Bc(s[2]||"");t[r]===void 0?t[r]=n:Array.isArray(t[r])?t[r].push(n):t[r]=[t[r],n]}return t}function Ic(e,t){return(typeof t=="number"||typeof t=="boolean")&&(t=String(t)),t?Array.isArray(t)?t.map(i=>`${Js(e)}=${pr(i)}`).join("&"):`${Js(e)}=${pr(t)}`:Js(e)}function xc(e){return Object.keys(e).filter(t=>e[t]!==void 0).map(t=>Ic(t,e[t])).filter(Boolean).join("&")}const Nc=/^[\s\w\0+.-]{2,}:([/\\]{1,2})/,Hc=/^[\s\w\0+.-]{2,}:([/\\]{2})?/,Fc=/^([/\\]\s*){2,}[^/\\]/;function Ho(e,t={}){return typeof t=="boolean"&&(t={acceptRelative:t}),t.strict?Nc.test(e):Hc.test(e)||(t.acceptRelative?Fc.test(e):!1)}const jc=/\/$|\/\?/;function mr(e="",t=!1){return t?jc.test(e):e.endsWith("/")}function Uc(e="",t=!1){if(!t)return(mr(e)?e.slice(0,-1):e)||"/";if(!mr(e,!0))return e||"/";const[i,...s]=e.split("?");return(i.slice(0,-1)||"/")+(s.length>0?`?${s.join("?")}`:"")}function Wc(e="",t=!1){if(!t)return e.endsWith("/")?e:e+"/";if(mr(e,!0))return e||"/";const[i,...s]=e.split("?");return i+"/"+(s.length>0?`?${s.join("?")}`:"")}function Yc(e,t){if(qc(t)||Ho(e))return e;const i=Uc(t);return e.startsWith(i)?e:Gc(i,e)}function zc(e,t){const i=Fo(e),s={...Pc(i.search),...t};return i.search=xc(s),$c(i)}function qc(e){return!e||e==="/"}function Vc(e){return e&&e!=="/"}const Kc=/^\.?\//;function Gc(e,...t){let i=e||"";for(const s of t.filter(r=>Vc(r)))if(i){const r=s.replace(Kc,"");i=Wc(i)+r}else i=s;return i}function Fo(e="",t){const i=e.match(/^[\s\0]*(blob:|data:|javascript:|vbscript:)(.*)/);if(i){const[,f,b=""]=i;return{protocol:f,pathname:b,href:f+b,auth:"",host:"",search:"",hash:""}}if(!Ho(e,{acceptRelative:!0}))return t?Fo(t+e):hn(e);const[,s="",r,n=""]=e.replace(/\\/g,"/").match(/^[\s\0]*([\w+.-]{2,}:)?\/\/([^/@]+@)?(.*)/)||[],[,c="",o=""]=n.match(/([^#/?]*)(.*)?/)||[],{pathname:a,search:h,hash:u}=hn(o.replace(/\/(?=[A-Za-z]:)/,""));return{protocol:s,auth:r?r.slice(0,Math.max(0,r.length-1)):"",host:c,pathname:a,search:h,hash:u}}function hn(e=""){const[t="",i="",s=""]=(e.match(/([^#?]*)(\?[^#]*)?(#.*)?/)||[]).splice(1);return{pathname:t,search:i,hash:s}}function $c(e){const t=e.pathname||"",i=e.search?(e.search.startsWith("?")?"":"?")+e.search:"",s=e.hash||"",r=e.auth?e.auth+"@":"",n=e.host||"";return(e.protocol?e.protocol+"//":"")+r+n+t+i+s}class Jc extends Error{constructor(t,i){super(t,i),this.name="FetchError",i!=null&&i.cause&&!this.cause&&(this.cause=i.cause)}}function Zc(e){var t,i,s,r,n;const c=((t=e.error)==null?void 0:t.message)||((i=e.error)==null?void 0:i.toString())||"",o=((s=e.request)==null?void 0:s.method)||((r=e.options)==null?void 0:r.method)||"GET",a=((n=e.request)==null?void 0:n.url)||String(e.request)||"/",h=`[${o}] ${JSON.stringify(a)}`,u=e.response?`${e.response.status} ${e.response.statusText}`:"<no response>",f=`${h}: ${u}${c?` ${c}`:""}`,b=new Jc(f,e.error?{cause:e.error}:void 0);for(const y of["request","options","response"])Object.defineProperty(b,y,{get(){return e[y]}});for(const[y,v]of[["data","_data"],["status","status"],["statusCode","status"],["statusText","statusText"],["statusMessage","statusText"]])Object.defineProperty(b,y,{get(){return e.response&&e.response[v]}});return b}const Xc=new Set(Object.freeze(["PATCH","POST","PUT","DELETE"]));function un(e="GET"){return Xc.has(e.toUpperCase())}function Qc(e){if(e===void 0)return!1;const t=typeof e;return t==="string"||t==="number"||t==="boolean"||t===null?!0:t!=="object"?!1:Array.isArray(e)?!0:e.buffer?!1:e.constructor&&e.constructor.name==="Object"||typeof e.toJSON=="function"}const eh=new Set(["image/svg","application/xml","application/xhtml","application/html"]),th=/^application\/(?:[\w!#$%&*.^`~-]*\+)?json(;.+)?$/i;function ih(e=""){if(!e)return"json";const t=e.split(";").shift()||"";return th.test(t)?"json":eh.has(t)||t.startsWith("text/")?"text":"blob"}function sh(e,t,i=globalThis.Headers){const s={...t,...e};if(t!=null&&t.params&&e!=null&&e.params&&(s.params={...t==null?void 0:t.params,...e==null?void 0:e.params}),t!=null&&t.query&&e!=null&&e.query&&(s.query={...t==null?void 0:t.query,...e==null?void 0:e.query}),t!=null&&t.headers&&e!=null&&e.headers){s.headers=new i((t==null?void 0:t.headers)||{});for(const[r,n]of new i((e==null?void 0:e.headers)||{}))s.headers.set(r,n)}return s}const rh=new Set([408,409,425,429,500,502,503,504]),nh=new Set([101,204,205,304]);function jo(e={}){const{fetch:t=globalThis.fetch,Headers:i=globalThis.Headers,AbortController:s=globalThis.AbortController}=e;async function r(o){const a=o.error&&o.error.name==="AbortError"&&!o.options.timeout||!1;if(o.options.retry!==!1&&!a){let u;typeof o.options.retry=="number"?u=o.options.retry:u=un(o.options.method)?0:1;const f=o.response&&o.response.status||500;if(u>0&&(Array.isArray(o.options.retryStatusCodes)?o.options.retryStatusCodes.includes(f):rh.has(f))){const b=o.options.retryDelay||0;return b>0&&await new Promise(y=>setTimeout(y,b)),n(o.request,{...o.options,retry:u-1,timeout:o.options.timeout})}}const h=Zc(o);throw Error.captureStackTrace&&Error.captureStackTrace(h,n),h}const n=async function(o,a={}){var h;const u={request:o,options:sh(a,e.defaults,i),response:void 0,error:void 0};if(u.options.method=(h=u.options.method)==null?void 0:h.toUpperCase(),u.options.onRequest&&await u.options.onRequest(u),typeof u.request=="string"&&(u.options.baseURL&&(u.request=Yc(u.request,u.options.baseURL)),(u.options.query||u.options.params)&&(u.request=zc(u.request,{...u.options.params,...u.options.query}))),u.options.body&&un(u.options.method)&&(Qc(u.options.body)?(u.options.body=typeof u.options.body=="string"?u.options.body:JSON.stringify(u.options.body),u.options.headers=new i(u.options.headers||{}),u.options.headers.has("content-type")||u.options.headers.set("content-type","application/json"),u.options.headers.has("accept")||u.options.headers.set("accept","application/json")):("pipeTo"in u.options.body&&typeof u.options.body.pipeTo=="function"||typeof u.options.body.pipe=="function")&&("duplex"in u.options||(u.options.duplex="half"))),!u.options.signal&&u.options.timeout){const f=new s;setTimeout(()=>f.abort(),u.options.timeout),u.options.signal=f.signal}try{u.response=await t(u.request,u.options)}catch(f){return u.error=f,u.options.onRequestError&&await u.options.onRequestError(u),await r(u)}if(u.response.body&&!nh.has(u.response.status)&&u.options.method!=="HEAD"){const f=(u.options.parseResponse?"json":u.options.responseType)||ih(u.response.headers.get("content-type")||"");switch(f){case"json":{const b=await u.response.text(),y=u.options.parseResponse||Cc;u.response._data=y(b);break}case"stream":{u.response._data=u.response.body;break}default:u.response._data=await u.response[f]()}}return u.options.onResponse&&await u.options.onResponse(u),!u.options.ignoreResponseError&&u.response.status>=400&&u.response.status<600?(u.options.onResponseError&&await u.options.onResponseError(u),await r(u)):u.response},c=async function(o,a){return(await n(o,a))._data};return c.raw=n,c.native=(...o)=>t(...o),c.create=(o={})=>jo({...e,defaults:{...e.defaults,...o}}),c}const Pr=function(){if(typeof globalThis<"u")return globalThis;if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")}(),oh=Pr.fetch||(()=>Promise.reject(new Error("[ofetch] global.fetch is not supported!"))),ah=Pr.Headers,lh=Pr.AbortController,ch=jo({fetch:oh,Headers:ah,AbortController:lh});class hh extends Error{constructor(t){super(t.statusText),xt(this,"status"),this.response=t,this.status=t.status}}class fn extends Error{constructor(t,i){super(t.msg),xt(this,"code"),this.body=t,this.response=i,this.code=t.code}}function Dt(e){if(typeof e!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(e))}function dn(e,t){for(var i="",s=0,r=-1,n=0,c,o=0;o<=e.length;++o){if(o<e.length)c=e.charCodeAt(o);else{if(c===47)break;c=47}if(c===47){if(!(r===o-1||n===1))if(r!==o-1&&n===2){if(i.length<2||s!==2||i.charCodeAt(i.length-1)!==46||i.charCodeAt(i.length-2)!==46){if(i.length>2){var a=i.lastIndexOf("/");if(a!==i.length-1){a===-1?(i="",s=0):(i=i.slice(0,a),s=i.length-1-i.lastIndexOf("/")),r=o,n=0;continue}}else if(i.length===2||i.length===1){i="",s=0,r=o,n=0;continue}}t&&(i.length>0?i+="/..":i="..",s=2)}else i.length>0?i+="/"+e.slice(r+1,o):i=e.slice(r+1,o),s=o-r-1;r=o,n=0}else c===46&&n!==-1?++n:n=-1}return i}function uh(e,t){var i=t.dir||t.root,s=t.base||(t.name||"")+(t.ext||"");return i?i===t.root?i+s:i+e+s:s}var Ii={resolve:function(){for(var e="",t=!1,i,s=arguments.length-1;s>=-1&&!t;s--){var r;s>=0?r=arguments[s]:(i===void 0&&(i=process.cwd()),r=i),Dt(r),r.length!==0&&(e=r+"/"+e,t=r.charCodeAt(0)===47)}return e=dn(e,!t),t?e.length>0?"/"+e:"/":e.length>0?e:"."},normalize:function(e){if(Dt(e),e.length===0)return".";var t=e.charCodeAt(0)===47,i=e.charCodeAt(e.length-1)===47;return e=dn(e,!t),e.length===0&&!t&&(e="."),e.length>0&&i&&(e+="/"),t?"/"+e:e},isAbsolute:function(e){return Dt(e),e.length>0&&e.charCodeAt(0)===47},join:function(){if(arguments.length===0)return".";for(var e,t=0;t<arguments.length;++t){var i=arguments[t];Dt(i),i.length>0&&(e===void 0?e=i:e+="/"+i)}return e===void 0?".":Ii.normalize(e)},relative:function(e,t){if(Dt(e),Dt(t),e===t||(e=Ii.resolve(e),t=Ii.resolve(t),e===t))return"";for(var i=1;i<e.length&&e.charCodeAt(i)===47;++i);for(var s=e.length,r=s-i,n=1;n<t.length&&t.charCodeAt(n)===47;++n);for(var c=t.length,o=c-n,a=r<o?r:o,h=-1,u=0;u<=a;++u){if(u===a){if(o>a){if(t.charCodeAt(n+u)===47)return t.slice(n+u+1);if(u===0)return t.slice(n+u)}else r>a&&(e.charCodeAt(i+u)===47?h=u:u===0&&(h=0));break}var f=e.charCodeAt(i+u),b=t.charCodeAt(n+u);if(f!==b)break;f===47&&(h=u)}var y="";for(u=i+h+1;u<=s;++u)(u===s||e.charCodeAt(u)===47)&&(y.length===0?y+="..":y+="/..");return y.length>0?y+t.slice(n+h):(n+=h,t.charCodeAt(n)===47&&++n,t.slice(n))},_makeLong:function(e){return e},dirname:function(e){if(Dt(e),e.length===0)return".";for(var t=e.charCodeAt(0),i=t===47,s=-1,r=!0,n=e.length-1;n>=1;--n)if(t=e.charCodeAt(n),t===47){if(!r){s=n;break}}else r=!1;return s===-1?i?"/":".":i&&s===1?"//":e.slice(0,s)},basename:function(e,t){if(t!==void 0&&typeof t!="string")throw new TypeError('"ext" argument must be a string');Dt(e);var i=0,s=-1,r=!0,n;if(t!==void 0&&t.length>0&&t.length<=e.length){if(t.length===e.length&&t===e)return"";var c=t.length-1,o=-1;for(n=e.length-1;n>=0;--n){var a=e.charCodeAt(n);if(a===47){if(!r){i=n+1;break}}else o===-1&&(r=!1,o=n+1),c>=0&&(a===t.charCodeAt(c)?--c===-1&&(s=n):(c=-1,s=o))}return i===s?s=o:s===-1&&(s=e.length),e.slice(i,s)}else{for(n=e.length-1;n>=0;--n)if(e.charCodeAt(n)===47){if(!r){i=n+1;break}}else s===-1&&(r=!1,s=n+1);return s===-1?"":e.slice(i,s)}},extname:function(e){Dt(e);for(var t=-1,i=0,s=-1,r=!0,n=0,c=e.length-1;c>=0;--c){var o=e.charCodeAt(c);if(o===47){if(!r){i=c+1;break}continue}s===-1&&(r=!1,s=c+1),o===46?t===-1?t=c:n!==1&&(n=1):t!==-1&&(n=-1)}return t===-1||s===-1||n===0||n===1&&t===s-1&&t===i+1?"":e.slice(t,s)},format:function(e){if(e===null||typeof e!="object")throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof e);return uh("/",e)},parse:function(e){Dt(e);var t={root:"",dir:"",base:"",ext:"",name:""};if(e.length===0)return t;var i=e.charCodeAt(0),s=i===47,r;s?(t.root="/",r=1):r=0;for(var n=-1,c=0,o=-1,a=!0,h=e.length-1,u=0;h>=r;--h){if(i=e.charCodeAt(h),i===47){if(!a){c=h+1;break}continue}o===-1&&(a=!1,o=h+1),i===46?n===-1?n=h:u!==1&&(u=1):n!==-1&&(u=-1)}return n===-1||o===-1||u===0||u===1&&n===o-1&&n===c+1?o!==-1&&(c===0&&s?t.base=t.name=e.slice(1,o):t.base=t.name=e.slice(c,o)):(c===0&&s?(t.name=e.slice(1,n),t.base=e.slice(1,o)):(t.name=e.slice(c,n),t.base=e.slice(c,o)),t.ext=e.slice(n,o)),c>0?t.dir=e.slice(0,c-1):s&&(t.dir="/"),t},sep:"/",delimiter:":",win32:null,posix:null};Ii.posix=Ii;function Uo(e,t){return function(){return e.apply(t,arguments)}}const{toString:fh}=Object.prototype,{getPrototypeOf:Ir}=Object,Ds=(e=>t=>{const i=fh.call(t);return e[i]||(e[i]=i.slice(8,-1).toLowerCase())})(Object.create(null)),Mt=e=>(e=e.toLowerCase(),t=>Ds(t)===e),Ls=e=>t=>typeof t===e,{isArray:ki}=Array,ji=Ls("undefined");function dh(e){return e!==null&&!ji(e)&&e.constructor!==null&&!ji(e.constructor)&&mt(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const Wo=Mt("ArrayBuffer");function _h(e){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&Wo(e.buffer),t}const ph=Ls("string"),mt=Ls("function"),Yo=Ls("number"),Rs=e=>e!==null&&typeof e=="object",mh=e=>e===!0||e===!1,ls=e=>{if(Ds(e)!=="object")return!1;const t=Ir(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},gh=Mt("Date"),vh=Mt("File"),bh=Mt("Blob"),yh=Mt("FileList"),Sh=e=>Rs(e)&&mt(e.pipe),wh=e=>{let t;return e&&(typeof FormData=="function"&&e instanceof FormData||mt(e.append)&&((t=Ds(e))==="formdata"||t==="object"&&mt(e.toString)&&e.toString()==="[object FormData]"))},Ch=Mt("URLSearchParams"),kh=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Vi(e,t,{allOwnKeys:i=!1}={}){if(e===null||typeof e>"u")return;let s,r;if(typeof e!="object"&&(e=[e]),ki(e))for(s=0,r=e.length;s<r;s++)t.call(null,e[s],s,e);else{const n=i?Object.getOwnPropertyNames(e):Object.keys(e),c=n.length;let o;for(s=0;s<c;s++)o=n[s],t.call(null,e[o],o,e)}}function zo(e,t){t=t.toLowerCase();const i=Object.keys(e);let s=i.length,r;for(;s-- >0;)if(r=i[s],t===r.toLowerCase())return r;return null}const qo=(()=>typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global)(),Vo=e=>!ji(e)&&e!==qo;function gr(){const{caseless:e}=Vo(this)&&this||{},t={},i=(s,r)=>{const n=e&&zo(t,r)||r;ls(t[n])&&ls(s)?t[n]=gr(t[n],s):ls(s)?t[n]=gr({},s):ki(s)?t[n]=s.slice():t[n]=s};for(let s=0,r=arguments.length;s<r;s++)arguments[s]&&Vi(arguments[s],i);return t}const Eh=(e,t,i,{allOwnKeys:s}={})=>(Vi(t,(r,n)=>{i&&mt(r)?e[n]=Uo(r,i):e[n]=r},{allOwnKeys:s}),e),Dh=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),Lh=(e,t,i,s)=>{e.prototype=Object.create(t.prototype,s),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),i&&Object.assign(e.prototype,i)},Rh=(e,t,i,s)=>{let r,n,c;const o={};if(t=t||{},e==null)return t;do{for(r=Object.getOwnPropertyNames(e),n=r.length;n-- >0;)c=r[n],(!s||s(c,e,t))&&!o[c]&&(t[c]=e[c],o[c]=!0);e=i!==!1&&Ir(e)}while(e&&(!i||i(e,t))&&e!==Object.prototype);return t},Th=(e,t,i)=>{e=String(e),(i===void 0||i>e.length)&&(i=e.length),i-=t.length;const s=e.indexOf(t,i);return s!==-1&&s===i},Ah=e=>{if(!e)return null;if(ki(e))return e;let t=e.length;if(!Yo(t))return null;const i=new Array(t);for(;t-- >0;)i[t]=e[t];return i},Mh=(e=>t=>e&&t instanceof e)(typeof Uint8Array<"u"&&Ir(Uint8Array)),Oh=(e,t)=>{const i=(e&&e[Symbol.iterator]).call(e);let s;for(;(s=i.next())&&!s.done;){const r=s.value;t.call(e,r[0],r[1])}},Bh=(e,t)=>{let i;const s=[];for(;(i=e.exec(t))!==null;)s.push(i);return s},Ph=Mt("HTMLFormElement"),Ih=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(t,i,s){return i.toUpperCase()+s}),_n=(({hasOwnProperty:e})=>(t,i)=>e.call(t,i))(Object.prototype),xh=Mt("RegExp"),Ko=(e,t)=>{const i=Object.getOwnPropertyDescriptors(e),s={};Vi(i,(r,n)=>{let c;(c=t(r,n,e))!==!1&&(s[n]=c||r)}),Object.defineProperties(e,s)},Nh=e=>{Ko(e,(t,i)=>{if(mt(e)&&["arguments","caller","callee"].indexOf(i)!==-1)return!1;const s=e[i];if(mt(s)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+i+"'")})}})},Hh=(e,t)=>{const i={},s=r=>{r.forEach(n=>{i[n]=!0})};return ki(e)?s(e):s(String(e).split(t)),i},Fh=()=>{},jh=(e,t)=>(e=+e,Number.isFinite(e)?e:t),Zs="abcdefghijklmnopqrstuvwxyz",pn="0123456789",Go={DIGIT:pn,ALPHA:Zs,ALPHA_DIGIT:Zs+Zs.toUpperCase()+pn},Uh=(e=16,t=Go.ALPHA_DIGIT)=>{let i="";const{length:s}=t;for(;e--;)i+=t[Math.random()*s|0];return i};function Wh(e){return!!(e&&mt(e.append)&&e[Symbol.toStringTag]==="FormData"&&e[Symbol.iterator])}const Yh=e=>{const t=new Array(10),i=(s,r)=>{if(Rs(s)){if(t.indexOf(s)>=0)return;if(!("toJSON"in s)){t[r]=s;const n=ki(s)?[]:{};return Vi(s,(c,o)=>{const a=i(c,r+1);!ji(a)&&(n[o]=a)}),t[r]=void 0,n}}return s};return i(e,0)},zh=Mt("AsyncFunction"),qh=e=>e&&(Rs(e)||mt(e))&&mt(e.then)&&mt(e.catch),K={isArray:ki,isArrayBuffer:Wo,isBuffer:dh,isFormData:wh,isArrayBufferView:_h,isString:ph,isNumber:Yo,isBoolean:mh,isObject:Rs,isPlainObject:ls,isUndefined:ji,isDate:gh,isFile:vh,isBlob:bh,isRegExp:xh,isFunction:mt,isStream:Sh,isURLSearchParams:Ch,isTypedArray:Mh,isFileList:yh,forEach:Vi,merge:gr,extend:Eh,trim:kh,stripBOM:Dh,inherits:Lh,toFlatObject:Rh,kindOf:Ds,kindOfTest:Mt,endsWith:Th,toArray:Ah,forEachEntry:Oh,matchAll:Bh,isHTMLForm:Ph,hasOwnProperty:_n,hasOwnProp:_n,reduceDescriptors:Ko,freezeMethods:Nh,toObjectSet:Hh,toCamelCase:Ih,noop:Fh,toFiniteNumber:jh,findKey:zo,global:qo,isContextDefined:Vo,ALPHABET:Go,generateString:Uh,isSpecCompliantForm:Wh,toJSONObject:Yh,isAsyncFn:zh,isThenable:qh};function we(e,t,i,s,r){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=e,this.name="AxiosError",t&&(this.code=t),i&&(this.config=i),s&&(this.request=s),r&&(this.response=r)}K.inherits(we,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:K.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});const $o=we.prototype,Jo={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{Jo[e]={value:e}});Object.defineProperties(we,Jo);Object.defineProperty($o,"isAxiosError",{value:!0});we.from=(e,t,i,s,r,n)=>{const c=Object.create($o);return K.toFlatObject(e,c,function(o){return o!==Error.prototype},o=>o!=="isAxiosError"),we.call(c,e.message,t,i,s,r),c.cause=e,c.name=e.name,n&&Object.assign(c,n),c};const Vh=null;function vr(e){return K.isPlainObject(e)||K.isArray(e)}function Zo(e){return K.endsWith(e,"[]")?e.slice(0,-2):e}function mn(e,t,i){return e?e.concat(t).map(function(s,r){return s=Zo(s),!i&&r?"["+s+"]":s}).join(i?".":""):t}function Kh(e){return K.isArray(e)&&!e.some(vr)}const Gh=K.toFlatObject(K,{},null,function(e){return/^is[A-Z]/.test(e)});function Ts(e,t,i){if(!K.isObject(e))throw new TypeError("target must be an object");t=t||new FormData,i=K.toFlatObject(i,{metaTokens:!0,dots:!1,indexes:!1},!1,function(y,v){return!K.isUndefined(v[y])});const s=i.metaTokens,r=i.visitor||h,n=i.dots,c=i.indexes,o=(i.Blob||typeof Blob<"u"&&Blob)&&K.isSpecCompliantForm(t);if(!K.isFunction(r))throw new TypeError("visitor must be a function");function a(y){if(y===null)return"";if(K.isDate(y))return y.toISOString();if(!o&&K.isBlob(y))throw new we("Blob is not supported. Use a Buffer instead.");return K.isArrayBuffer(y)||K.isTypedArray(y)?o&&typeof Blob=="function"?new Blob([y]):Buffer.from(y):y}function h(y,v,m){let l=y;if(y&&!m&&typeof y=="object"){if(K.endsWith(v,"{}"))v=s?v:v.slice(0,-2),y=JSON.stringify(y);else if(K.isArray(y)&&Kh(y)||(K.isFileList(y)||K.endsWith(v,"[]"))&&(l=K.toArray(y)))return v=Zo(v),l.forEach(function(_,p){!(K.isUndefined(_)||_===null)&&t.append(c===!0?mn([v],p,n):c===null?v:v+"[]",a(_))}),!1}return vr(y)?!0:(t.append(mn(m,v,n),a(y)),!1)}const u=[],f=Object.assign(Gh,{defaultVisitor:h,convertValue:a,isVisitable:vr});function b(y,v){if(!K.isUndefined(y)){if(u.indexOf(y)!==-1)throw Error("Circular reference detected in "+v.join("."));u.push(y),K.forEach(y,function(m,l){(!(K.isUndefined(m)||m===null)&&r.call(t,m,K.isString(l)?l.trim():l,v,f))===!0&&b(m,v?v.concat(l):[l])}),u.pop()}}if(!K.isObject(e))throw new TypeError("data must be an object");return b(e),t}function gn(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(i){return t[i]})}function xr(e,t){this._pairs=[],e&&Ts(e,this,t)}const Xo=xr.prototype;Xo.append=function(e,t){this._pairs.push([e,t])};Xo.toString=function(e){const t=e?function(i){return e.call(this,i,gn)}:gn;return this._pairs.map(function(i){return t(i[0])+"="+t(i[1])},"").join("&")};function $h(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function Qo(e,t,i){if(!t)return e;const s=i&&i.encode||$h,r=i&&i.serialize;let n;if(r?n=r(t,i):n=K.isURLSearchParams(t)?t.toString():new xr(t,i).toString(s),n){const c=e.indexOf("#");c!==-1&&(e=e.slice(0,c)),e+=(e.indexOf("?")===-1?"?":"&")+n}return e}class Jh{constructor(){this.handlers=[]}use(t,i,s){return this.handlers.push({fulfilled:t,rejected:i,synchronous:s?s.synchronous:!1,runWhen:s?s.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){K.forEach(this.handlers,function(i){i!==null&&t(i)})}}const vn=Jh,ea={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Zh=typeof URLSearchParams<"u"?URLSearchParams:xr,Xh=typeof FormData<"u"?FormData:null,Qh=typeof Blob<"u"?Blob:null,eu=(()=>{let e;return typeof navigator<"u"&&((e=navigator.product)==="ReactNative"||e==="NativeScript"||e==="NS")?!1:typeof window<"u"&&typeof document<"u"})(),tu=(()=>typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function")(),yt={isBrowser:!0,classes:{URLSearchParams:Zh,FormData:Xh,Blob:Qh},isStandardBrowserEnv:eu,isStandardBrowserWebWorkerEnv:tu,protocols:["http","https","file","blob","url","data"]};function iu(e,t){return Ts(e,new yt.classes.URLSearchParams,Object.assign({visitor:function(i,s,r,n){return yt.isNode&&K.isBuffer(i)?(this.append(s,i.toString("base64")),!1):n.defaultVisitor.apply(this,arguments)}},t))}function su(e){return K.matchAll(/\w+|\[(\w*)]/g,e).map(t=>t[0]==="[]"?"":t[1]||t[0])}function ru(e){const t={},i=Object.keys(e);let s;const r=i.length;let n;for(s=0;s<r;s++)n=i[s],t[n]=e[n];return t}function ta(e){function t(i,s,r,n){let c=i[n++];const o=Number.isFinite(+c),a=n>=i.length;return c=!c&&K.isArray(r)?r.length:c,a?(K.hasOwnProp(r,c)?r[c]=[r[c],s]:r[c]=s,!o):((!r[c]||!K.isObject(r[c]))&&(r[c]=[]),t(i,s,r[c],n)&&K.isArray(r[c])&&(r[c]=ru(r[c])),!o)}if(K.isFormData(e)&&K.isFunction(e.entries)){const i={};return K.forEachEntry(e,(s,r)=>{t(su(s),r,i,0)}),i}return null}function nu(e,t,i){if(K.isString(e))try{return(t||JSON.parse)(e),K.trim(e)}catch(s){if(s.name!=="SyntaxError")throw s}return(i||JSON.stringify)(e)}const Nr={transitional:ea,adapter:yt.isNode?"http":"xhr",transformRequest:[function(e,t){const i=t.getContentType()||"",s=i.indexOf("application/json")>-1,r=K.isObject(e);if(r&&K.isHTMLForm(e)&&(e=new FormData(e)),K.isFormData(e))return s&&s?JSON.stringify(ta(e)):e;if(K.isArrayBuffer(e)||K.isBuffer(e)||K.isStream(e)||K.isFile(e)||K.isBlob(e))return e;if(K.isArrayBufferView(e))return e.buffer;if(K.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let n;if(r){if(i.indexOf("application/x-www-form-urlencoded")>-1)return iu(e,this.formSerializer).toString();if((n=K.isFileList(e))||i.indexOf("multipart/form-data")>-1){const c=this.env&&this.env.FormData;return Ts(n?{"files[]":e}:e,c&&new c,this.formSerializer)}}return r||s?(t.setContentType("application/json",!1),nu(e)):e}],transformResponse:[function(e){const t=this.transitional||Nr.transitional,i=t&&t.forcedJSONParsing,s=this.responseType==="json";if(e&&K.isString(e)&&(i&&!this.responseType||s)){const r=!(t&&t.silentJSONParsing)&&s;try{return JSON.parse(e)}catch(n){if(r)throw n.name==="SyntaxError"?we.from(n,we.ERR_BAD_RESPONSE,this,null,this.response):n}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:yt.classes.FormData,Blob:yt.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};K.forEach(["delete","get","head","post","put","patch"],e=>{Nr.headers[e]={}});const Hr=Nr,ou=K.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),au=e=>{const t={};let i,s,r;return e&&e.split(`
`).forEach(function(n){r=n.indexOf(":"),i=n.substring(0,r).trim().toLowerCase(),s=n.substring(r+1).trim(),!(!i||t[i]&&ou[i])&&(i==="set-cookie"?t[i]?t[i].push(s):t[i]=[s]:t[i]=t[i]?t[i]+", "+s:s)}),t},bn=Symbol("internals");function Ai(e){return e&&String(e).trim().toLowerCase()}function cs(e){return e===!1||e==null?e:K.isArray(e)?e.map(cs):String(e)}function lu(e){const t=Object.create(null),i=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let s;for(;s=i.exec(e);)t[s[1]]=s[2];return t}const cu=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function Xs(e,t,i,s,r){if(K.isFunction(s))return s.call(this,t,i);if(r&&(t=i),!!K.isString(t)){if(K.isString(s))return t.indexOf(s)!==-1;if(K.isRegExp(s))return s.test(t)}}function hu(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,i,s)=>i.toUpperCase()+s)}function uu(e,t){const i=K.toCamelCase(" "+t);["get","set","has"].forEach(s=>{Object.defineProperty(e,s+i,{value:function(r,n,c){return this[s].call(this,t,r,n,c)},configurable:!0})})}let As=class{constructor(e){e&&this.set(e)}set(e,t,i){const s=this;function r(c,o,a){const h=Ai(o);if(!h)throw new Error("header name must be a non-empty string");const u=K.findKey(s,h);(!u||s[u]===void 0||a===!0||a===void 0&&s[u]!==!1)&&(s[u||o]=cs(c))}const n=(c,o)=>K.forEach(c,(a,h)=>r(a,h,o));return K.isPlainObject(e)||e instanceof this.constructor?n(e,t):K.isString(e)&&(e=e.trim())&&!cu(e)?n(au(e),t):e!=null&&r(t,e,i),this}get(e,t){if(e=Ai(e),e){const i=K.findKey(this,e);if(i){const s=this[i];if(!t)return s;if(t===!0)return lu(s);if(K.isFunction(t))return t.call(this,s,i);if(K.isRegExp(t))return t.exec(s);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,t){if(e=Ai(e),e){const i=K.findKey(this,e);return!!(i&&this[i]!==void 0&&(!t||Xs(this,this[i],i,t)))}return!1}delete(e,t){const i=this;let s=!1;function r(n){if(n=Ai(n),n){const c=K.findKey(i,n);c&&(!t||Xs(i,i[c],c,t))&&(delete i[c],s=!0)}}return K.isArray(e)?e.forEach(r):r(e),s}clear(e){const t=Object.keys(this);let i=t.length,s=!1;for(;i--;){const r=t[i];(!e||Xs(this,this[r],r,e,!0))&&(delete this[r],s=!0)}return s}normalize(e){const t=this,i={};return K.forEach(this,(s,r)=>{const n=K.findKey(i,r);if(n){t[n]=cs(s),delete t[r];return}const c=e?hu(r):String(r).trim();c!==r&&delete t[r],t[c]=cs(s),i[c]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const t=Object.create(null);return K.forEach(this,(i,s)=>{i!=null&&i!==!1&&(t[s]=e&&K.isArray(i)?i.join(", "):i)}),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,t])=>e+": "+t).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...t){const i=new this(e);return t.forEach(s=>i.set(s)),i}static accessor(e){const t=(this[bn]=this[bn]={accessors:{}}).accessors,i=this.prototype;function s(r){const n=Ai(r);t[n]||(uu(i,r),t[n]=!0)}return K.isArray(e)?e.forEach(s):s(e),this}};As.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);K.reduceDescriptors(As.prototype,({value:e},t)=>{let i=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(s){this[i]=s}}});K.freezeMethods(As);const Ft=As;function Qs(e,t){const i=this||Hr,s=t||i,r=Ft.from(s.headers);let n=s.data;return K.forEach(e,function(c){n=c.call(i,n,r.normalize(),t?t.status:void 0)}),r.normalize(),n}function ia(e){return!!(e&&e.__CANCEL__)}function Ki(e,t,i){we.call(this,e??"canceled",we.ERR_CANCELED,t,i),this.name="CanceledError"}K.inherits(Ki,we,{__CANCEL__:!0});function fu(e,t,i){const s=i.config.validateStatus;!i.status||!s||s(i.status)?e(i):t(new we("Request failed with status code "+i.status,[we.ERR_BAD_REQUEST,we.ERR_BAD_RESPONSE][Math.floor(i.status/100)-4],i.config,i.request,i))}const du=yt.isStandardBrowserEnv?function(){return{write:function(e,t,i,s,r,n){const c=[];c.push(e+"="+encodeURIComponent(t)),K.isNumber(i)&&c.push("expires="+new Date(i).toGMTString()),K.isString(s)&&c.push("path="+s),K.isString(r)&&c.push("domain="+r),n===!0&&c.push("secure"),document.cookie=c.join("; ")},read:function(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}();function _u(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function pu(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}function sa(e,t){return e&&!_u(t)?pu(e,t):t}const mu=yt.isStandardBrowserEnv?function(){const e=/(msie|trident)/i.test(navigator.userAgent),t=document.createElement("a");let i;function s(r){let n=r;return e&&(t.setAttribute("href",n),n=t.href),t.setAttribute("href",n),{href:t.href,protocol:t.protocol?t.protocol.replace(/:$/,""):"",host:t.host,search:t.search?t.search.replace(/^\?/,""):"",hash:t.hash?t.hash.replace(/^#/,""):"",hostname:t.hostname,port:t.port,pathname:t.pathname.charAt(0)==="/"?t.pathname:"/"+t.pathname}}return i=s(window.location.href),function(r){const n=K.isString(r)?s(r):r;return n.protocol===i.protocol&&n.host===i.host}}():function(){return function(){return!0}}();function gu(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}function vu(e,t){e=e||10;const i=new Array(e),s=new Array(e);let r=0,n=0,c;return t=t!==void 0?t:1e3,function(o){const a=Date.now(),h=s[n];c||(c=a),i[r]=o,s[r]=a;let u=n,f=0;for(;u!==r;)f+=i[u++],u=u%e;if(r=(r+1)%e,r===n&&(n=(n+1)%e),a-c<t)return;const b=h&&a-h;return b?Math.round(f*1e3/b):void 0}}function yn(e,t){let i=0;const s=vu(50,250);return r=>{const n=r.loaded,c=r.lengthComputable?r.total:void 0,o=n-i,a=s(o),h=n<=c;i=n;const u={loaded:n,total:c,progress:c?n/c:void 0,bytes:o,rate:a||void 0,estimated:a&&c&&h?(c-n)/a:void 0,event:r};u[t?"download":"upload"]=!0,e(u)}}const bu=typeof XMLHttpRequest<"u",yu=bu&&function(e){return new Promise(function(t,i){let s=e.data;const r=Ft.from(e.headers).normalize(),n=e.responseType;let c;function o(){e.cancelToken&&e.cancelToken.unsubscribe(c),e.signal&&e.signal.removeEventListener("abort",c)}K.isFormData(s)&&(yt.isStandardBrowserEnv||yt.isStandardBrowserWebWorkerEnv?r.setContentType(!1):r.setContentType("multipart/form-data;",!1));let a=new XMLHttpRequest;if(e.auth){const b=e.auth.username||"",y=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";r.set("Authorization","Basic "+btoa(b+":"+y))}const h=sa(e.baseURL,e.url);a.open(e.method.toUpperCase(),Qo(h,e.params,e.paramsSerializer),!0),a.timeout=e.timeout;function u(){if(!a)return;const b=Ft.from("getAllResponseHeaders"in a&&a.getAllResponseHeaders()),y={data:!n||n==="text"||n==="json"?a.responseText:a.response,status:a.status,statusText:a.statusText,headers:b,config:e,request:a};fu(function(v){t(v),o()},function(v){i(v),o()},y),a=null}if("onloadend"in a?a.onloadend=u:a.onreadystatechange=function(){!a||a.readyState!==4||a.status===0&&!(a.responseURL&&a.responseURL.indexOf("file:")===0)||setTimeout(u)},a.onabort=function(){a&&(i(new we("Request aborted",we.ECONNABORTED,e,a)),a=null)},a.onerror=function(){i(new we("Network Error",we.ERR_NETWORK,e,a)),a=null},a.ontimeout=function(){let b=e.timeout?"timeout of "+e.timeout+"ms exceeded":"timeout exceeded";const y=e.transitional||ea;e.timeoutErrorMessage&&(b=e.timeoutErrorMessage),i(new we(b,y.clarifyTimeoutError?we.ETIMEDOUT:we.ECONNABORTED,e,a)),a=null},yt.isStandardBrowserEnv){const b=(e.withCredentials||mu(h))&&e.xsrfCookieName&&du.read(e.xsrfCookieName);b&&r.set(e.xsrfHeaderName,b)}s===void 0&&r.setContentType(null),"setRequestHeader"in a&&K.forEach(r.toJSON(),function(b,y){a.setRequestHeader(y,b)}),K.isUndefined(e.withCredentials)||(a.withCredentials=!!e.withCredentials),n&&n!=="json"&&(a.responseType=e.responseType),typeof e.onDownloadProgress=="function"&&a.addEventListener("progress",yn(e.onDownloadProgress,!0)),typeof e.onUploadProgress=="function"&&a.upload&&a.upload.addEventListener("progress",yn(e.onUploadProgress)),(e.cancelToken||e.signal)&&(c=b=>{a&&(i(!b||b.type?new Ki(null,e,a):b),a.abort(),a=null)},e.cancelToken&&e.cancelToken.subscribe(c),e.signal&&(e.signal.aborted?c():e.signal.addEventListener("abort",c)));const f=gu(h);if(f&&yt.protocols.indexOf(f)===-1){i(new we("Unsupported protocol "+f+":",we.ERR_BAD_REQUEST,e));return}a.send(s||null)})},hs={http:Vh,xhr:yu};K.forEach(hs,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch{}Object.defineProperty(e,"adapterName",{value:t})}});const ra={getAdapter:e=>{e=K.isArray(e)?e:[e];const{length:t}=e;let i,s;for(let r=0;r<t&&(i=e[r],!(s=K.isString(i)?hs[i.toLowerCase()]:i));r++);if(!s)throw s===!1?new we(`Adapter ${i} is not supported by the environment`,"ERR_NOT_SUPPORT"):new Error(K.hasOwnProp(hs,i)?`Adapter '${i}' is not available in the build`:`Unknown adapter '${i}'`);if(!K.isFunction(s))throw new TypeError("adapter is not a function");return s},adapters:hs};function er(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new Ki(null,e)}function Sn(e){return er(e),e.headers=Ft.from(e.headers),e.data=Qs.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),ra.getAdapter(e.adapter||Hr.adapter)(e).then(function(t){return er(e),t.data=Qs.call(e,e.transformResponse,t),t.headers=Ft.from(t.headers),t},function(t){return ia(t)||(er(e),t&&t.response&&(t.response.data=Qs.call(e,e.transformResponse,t.response),t.response.headers=Ft.from(t.response.headers))),Promise.reject(t)})}const wn=e=>e instanceof Ft?e.toJSON():e;function yi(e,t){t=t||{};const i={};function s(h,u,f){return K.isPlainObject(h)&&K.isPlainObject(u)?K.merge.call({caseless:f},h,u):K.isPlainObject(u)?K.merge({},u):K.isArray(u)?u.slice():u}function r(h,u,f){if(K.isUndefined(u)){if(!K.isUndefined(h))return s(void 0,h,f)}else return s(h,u,f)}function n(h,u){if(!K.isUndefined(u))return s(void 0,u)}function c(h,u){if(K.isUndefined(u)){if(!K.isUndefined(h))return s(void 0,h)}else return s(void 0,u)}function o(h,u,f){if(f in t)return s(h,u);if(f in e)return s(void 0,h)}const a={url:n,method:n,data:n,baseURL:c,transformRequest:c,transformResponse:c,paramsSerializer:c,timeout:c,timeoutMessage:c,withCredentials:c,adapter:c,responseType:c,xsrfCookieName:c,xsrfHeaderName:c,onUploadProgress:c,onDownloadProgress:c,decompress:c,maxContentLength:c,maxBodyLength:c,beforeRedirect:c,transport:c,httpAgent:c,httpsAgent:c,cancelToken:c,socketPath:c,responseEncoding:c,validateStatus:o,headers:(h,u)=>r(wn(h),wn(u),!0)};return K.forEach(Object.keys(Object.assign({},e,t)),function(h){const u=a[h]||r,f=u(e[h],t[h],h);K.isUndefined(f)&&u!==o||(i[h]=f)}),i}const na="1.5.0",Fr={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{Fr[e]=function(i){return typeof i===e||"a"+(t<1?"n ":" ")+e}});const Cn={};Fr.transitional=function(e,t,i){function s(r,n){return"[Axios v"+na+"] Transitional option '"+r+"'"+n+(i?". "+i:"")}return(r,n,c)=>{if(e===!1)throw new we(s(n," has been removed"+(t?" in "+t:"")),we.ERR_DEPRECATED);return t&&!Cn[n]&&(Cn[n]=!0,console.warn(s(n," has been deprecated since v"+t+" and will be removed in the near future"))),e?e(r,n,c):!0}};function Su(e,t,i){if(typeof e!="object")throw new we("options must be an object",we.ERR_BAD_OPTION_VALUE);const s=Object.keys(e);let r=s.length;for(;r-- >0;){const n=s[r],c=t[n];if(c){const o=e[n],a=o===void 0||c(o,n,e);if(a!==!0)throw new we("option "+n+" must be "+a,we.ERR_BAD_OPTION_VALUE);continue}if(i!==!0)throw new we("Unknown option "+n,we.ERR_BAD_OPTION)}}const br={assertOptions:Su,validators:Fr},Vt=br.validators;let gs=class{constructor(e){this.defaults=e,this.interceptors={request:new vn,response:new vn}}request(e,t){typeof e=="string"?(t=t||{},t.url=e):t=e||{},t=yi(this.defaults,t);const{transitional:i,paramsSerializer:s,headers:r}=t;i!==void 0&&br.assertOptions(i,{silentJSONParsing:Vt.transitional(Vt.boolean),forcedJSONParsing:Vt.transitional(Vt.boolean),clarifyTimeoutError:Vt.transitional(Vt.boolean)},!1),s!=null&&(K.isFunction(s)?t.paramsSerializer={serialize:s}:br.assertOptions(s,{encode:Vt.function,serialize:Vt.function},!0)),t.method=(t.method||this.defaults.method||"get").toLowerCase();let n=r&&K.merge(r.common,r[t.method]);r&&K.forEach(["delete","get","head","post","put","patch","common"],y=>{delete r[y]}),t.headers=Ft.concat(n,r);const c=[];let o=!0;this.interceptors.request.forEach(function(y){typeof y.runWhen=="function"&&y.runWhen(t)===!1||(o=o&&y.synchronous,c.unshift(y.fulfilled,y.rejected))});const a=[];this.interceptors.response.forEach(function(y){a.push(y.fulfilled,y.rejected)});let h,u=0,f;if(!o){const y=[Sn.bind(this),void 0];for(y.unshift.apply(y,c),y.push.apply(y,a),f=y.length,h=Promise.resolve(t);u<f;)h=h.then(y[u++],y[u++]);return h}f=c.length;let b=t;for(u=0;u<f;){const y=c[u++],v=c[u++];try{b=y(b)}catch(m){v.call(this,m);break}}try{h=Sn.call(this,b)}catch(y){return Promise.reject(y)}for(u=0,f=a.length;u<f;)h=h.then(a[u++],a[u++]);return h}getUri(e){e=yi(this.defaults,e);const t=sa(e.baseURL,e.url);return Qo(t,e.params,e.paramsSerializer)}};K.forEach(["delete","get","head","options"],function(e){gs.prototype[e]=function(t,i){return this.request(yi(i||{},{method:e,url:t,data:(i||{}).data}))}});K.forEach(["post","put","patch"],function(e){function t(i){return function(s,r,n){return this.request(yi(n||{},{method:e,headers:i?{"Content-Type":"multipart/form-data"}:{},url:s,data:r}))}}gs.prototype[e]=t(),gs.prototype[e+"Form"]=t(!0)});const us=gs;let wu=class oa{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let i;this.promise=new Promise(function(r){i=r});const s=this;this.promise.then(r=>{if(!s._listeners)return;let n=s._listeners.length;for(;n-- >0;)s._listeners[n](r);s._listeners=null}),this.promise.then=r=>{let n;const c=new Promise(o=>{s.subscribe(o),n=o}).then(r);return c.cancel=function(){s.unsubscribe(n)},c},t(function(r,n,c){s.reason||(s.reason=new Ki(r,n,c),i(s.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const i=this._listeners.indexOf(t);i!==-1&&this._listeners.splice(i,1)}static source(){let t;return{token:new oa(function(i){t=i}),cancel:t}}};const Cu=wu;function ku(e){return function(t){return e.apply(null,t)}}function Eu(e){return K.isObject(e)&&e.isAxiosError===!0}const yr={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(yr).forEach(([e,t])=>{yr[t]=e});const Du=yr;function aa(e){const t=new us(e),i=Uo(us.prototype.request,t);return K.extend(i,us.prototype,t,{allOwnKeys:!0}),K.extend(i,t,null,{allOwnKeys:!0}),i.create=function(s){return aa(yi(e,s))},i}const We=aa(Hr);We.Axios=us;We.CanceledError=Ki;We.CancelToken=Cu;We.isCancel=ia;We.VERSION=na;We.toFormData=Ts;We.AxiosError=we;We.Cancel=We.CanceledError;We.all=function(e){return Promise.all(e)};We.spread=ku;We.isAxiosError=Eu;We.mergeConfig=yi;We.AxiosHeaders=Ft;We.formToJSON=e=>ta(K.isHTMLForm(e)?new FormData(e):e);We.getAdapter=ra.getAdapter;We.HttpStatusCode=Du;We.default=We;const la=We,{Axios:mv,AxiosError:gv,CanceledError:vv,isCancel:bv,CancelToken:yv,VERSION:Sv,all:wv,Cancel:Cv,isAxiosError:kv,spread:Ev,toFormData:Dv,AxiosHeaders:Lv,HttpStatusCode:es,formToJSON:Rv,getAdapter:Tv,mergeConfig:Av}=la;var ui=null;typeof WebSocket<"u"?ui=WebSocket:typeof MozWebSocket<"u"?ui=MozWebSocket:typeof global<"u"?ui=global.WebSocket||global.MozWebSocket:typeof window<"u"?ui=window.WebSocket||window.MozWebSocket:typeof self<"u"&&(ui=self.WebSocket||self.MozWebSocket);const Lu=ui,tr={SCHEMA_DIR_RELATIVE_PATH:"./../schemas/",SCHEMA_FILENAME_PAYLOAD:"payload.schema.json",SCHEMA_FILENAME_RESPONSE:"response.schema.json",SIYUAN_DEFAULT_BASE_URL:"http://localhost:6806/",SIYUAN_DEFAULT_TOKEN:"",REQUEST_TIMEOUT:6e4};var kn,En,Dn,Ln,Rn;const Sr=class W{constructor(t={},i="xhr"){xt(this,"_type","xhr"),xt(this,"_baseURL",((En=(kn=globalThis.top)==null?void 0:kn.document)==null?void 0:En.baseURI)??((Ln=(Dn=globalThis.parent)==null?void 0:Dn.document)==null?void 0:Ln.baseURI)??((Rn=globalThis.location)==null?void 0:Rn.origin)??tr.SIYUAN_DEFAULT_BASE_URL),xt(this,"_token",tr.SIYUAN_DEFAULT_TOKEN),xt(this,"_axios",la.create({baseURL:this._baseURL,timeout:tr.REQUEST_TIMEOUT,headers:{Authorization:`Token ${this._token}`}})),xt(this,"_fetch",ch.create({baseURL:this._baseURL,headers:{Authorization:`Token ${this._token}`}})),this._setClientType(i),this._updateOptions(t,i)}_setClientType(t){this._type=t}_updateOptions(t,i=this._type){switch(this._token=t.token??this._token,this._baseURL=t.baseURL??this._baseURL,i){case"fetch":const s=t;if(s.token){const r="Authorization",n=`Token ${t.token}`;Array.isArray(s.headers)?s.headers.push([r,n]):s.headers instanceof Headers?s.headers.set(r,n):typeof s.headers=="object"?s.headers[r]=n:s.headers={[r]:n},delete t.token}this._fetch=this._fetch.create(s);break;case"xhr":default:for(const[r,n]of Object.entries(t))switch(r){case"token":this._axios.defaults.headers.Authorization=`Token ${this._token}`;break;default:this._axios.defaults[r]=n;break}break}this._baseURL=t.baseURL??this._baseURL}broadcast(t,i,s){const r=(s==null?void 0:s.baseURL)??this._baseURL,n=(s==null?void 0:s.token)??this._token,c=new URLSearchParams(t);c.set("token",n);const o=new URL(r);return o.protocol=o.protocol.replace(/^http/,"ws"),o.pathname=o.pathname.endsWith("/")?`${o.pathname}${W.ws.broadcast.pathname.substring(1)}`:`${o.pathname}${W.ws.broadcast.pathname}`,o.search=c.toString(),new Lu(o,i)}async fullTextSearchBlock(t,i){return await this._request(W.api.search.fullTextSearchBlock.pathname,W.api.search.fullTextSearchBlock.method,t,i)}async getConf(t){return await this._request(W.api.system.getConf.pathname,W.api.system.getConf.method,void 0,t)}async upload(t,i){const s=new FormData;return s.append("assetsDirPath",t.assetsDirPath??"/assets/"),t.files.forEach(r=>s.append("file[]",r)),await this._request(W.api.asset.upload.pathname,W.api.asset.upload.method,s,i)}async getBlockAttrs(t,i){return await this._request(W.api.attr.getBlockAttrs.pathname,W.api.attr.getBlockAttrs.method,t,i)}async getBookmarkLabels(t){return await this._request(W.api.attr.getBookmarkLabels.pathname,W.api.attr.getBookmarkLabels.method,void 0,t)}async setBlockAttrs(t,i){return await this._request(W.api.attr.setBlockAttrs.pathname,W.api.attr.setBlockAttrs.method,t,i)}async appendBlock(t,i){return await this._request(W.api.block.appendBlock.pathname,W.api.block.appendBlock.method,t,i)}async deleteBlock(t,i){return await this._request(W.api.block.deleteBlock.pathname,W.api.block.deleteBlock.method,t,i)}async getBlockBreadcrumb(t,i){return await this._request(W.api.block.getBlockBreadcrumb.pathname,W.api.block.getBlockBreadcrumb.method,t,i)}async getBlockDOM(t,i){return await this._request(W.api.block.getBlockDOM.pathname,W.api.block.getBlockDOM.method,t,i)}async getBlockInfo(t,i){return await this._request(W.api.block.getBlockInfo.pathname,W.api.block.getBlockInfo.method,t,i)}async getBlockKramdown(t,i){return await this._request(W.api.block.getBlockKramdown.pathname,W.api.block.getBlockKramdown.method,t,i)}async getChildBlocks(t,i){return await this._request(W.api.block.getChildBlocks.pathname,W.api.block.getChildBlocks.method,t,i)}async getDocInfo(t,i){return await this._request(W.api.block.getDocInfo.pathname,W.api.block.getDocInfo.method,t,i)}async insertBlock(t,i){return await this._request(W.api.block.insertBlock.pathname,W.api.block.insertBlock.method,t,i)}async moveBlock(t,i){return await this._request(W.api.block.moveBlock.pathname,W.api.block.moveBlock.method,t,i)}async prependBlock(t,i){return await this._request(W.api.block.prependBlock.pathname,W.api.block.prependBlock.method,t,i)}async transferBlockRef(t,i){return await this._request(W.api.block.transferBlockRef.pathname,W.api.block.transferBlockRef.method,t,i)}async updateBlock(t,i){return await this._request(W.api.block.updateBlock.pathname,W.api.block.updateBlock.method,t,i)}async channels(t){return await this._request(W.api.broadcast.channels.pathname,W.api.broadcast.channels.method,void 0,t)}async getChannelInfo(t,i){return await this._request(W.api.broadcast.getChannelInfo.pathname,W.api.broadcast.getChannelInfo.method,t,i)}async postMessage(t,i){return await this._request(W.api.broadcast.postMessage.pathname,W.api.broadcast.postMessage.method,t,i)}async pandoc(t,i){return await this._request(W.api.convert.pandoc.pathname,W.api.convert.pandoc.method,t,i)}async exportResources(t,i){return await this._request(W.api.export.exportResources.pathname,W.api.export.exportResources.method,t,i)}async exportMdContent(t,i){return await this._request(W.api.export.exportMdContent.pathname,W.api.export.exportMdContent.method,t,i)}async getFile(t,i="text",s){return await this._request(W.api.file.getFile.pathname,W.api.file.getFile.method,t,s,!1,i)}async putFile(t,i){t.file!==void 0&&!(t.file instanceof File)&&(t.file=new File([t.file],t.path.split("/").pop()));const s=new FormData;for(const[r,n]of Object.entries(t))t.hasOwnProperty(r)&&(n instanceof Blob?s.append(r,n):s.append(r,String(n)));return await this._request(W.api.file.putFile.pathname,W.api.file.putFile.method,s,i)}async readDir(t,i){return await this._request(W.api.file.readDir.pathname,W.api.file.readDir.method,t,i)}async removeFile(t,i){return await this._request(W.api.file.removeFile.pathname,W.api.file.removeFile.method,t,i)}async renameFile(t,i){return await this._request(W.api.file.renameFile.pathname,W.api.file.renameFile.method,t,i)}async createDocWithMd(t,i){return await this._request(W.api.filetree.createDocWithMd.pathname,W.api.filetree.createDocWithMd.method,t,i)}async getDoc(t,i){return await this._request(W.api.filetree.getDoc.pathname,W.api.filetree.getDoc.method,t,i)}async getHPathByID(t,i){return await this._request(W.api.filetree.getHPathByID.pathname,W.api.filetree.getHPathByID.method,t,i)}async getHPathByPath(t,i){return await this._request(W.api.filetree.getHPathByPath.pathname,W.api.filetree.getHPathByPath.method,t,i)}async listDocsByPath(t,i){return await this._request(W.api.filetree.listDocsByPath.pathname,W.api.filetree.listDocsByPath.method,t,i)}async moveDocs(t,i){return await this._request(W.api.filetree.moveDocs.pathname,W.api.filetree.moveDocs.method,t,i)}async removeDoc(t,i){return await this._request(W.api.filetree.removeDoc.pathname,W.api.filetree.removeDoc.method,t,i)}async renameDoc(t,i){return await this._request(W.api.filetree.renameDoc.pathname,W.api.filetree.renameDoc.method,t,i)}async searchDocs(t,i){return await this._request(W.api.filetree.searchDocs.pathname,W.api.filetree.searchDocs.method,t,i)}async getDocHistoryContent(t,i){return await this._request(W.api.history.getDocHistoryContent.pathname,W.api.history.getDocHistoryContent.method,t,i)}async getHistoryItems(t,i){return await this._request(W.api.history.getHistoryItems.pathname,W.api.history.getHistoryItems.method,t,i)}async getShorthand(t,i){return await this._request(W.api.inbox.getShorthand.pathname,W.api.inbox.getShorthand.method,t,i)}async forwardProxy(t,i){return await this._request(W.api.network.forwardProxy.pathname,W.api.network.forwardProxy.method,t,i)}async closeNotebook(t,i){return await this._request(W.api.notebook.closeNotebook.pathname,W.api.notebook.closeNotebook.method,t,i)}async createNotebook(t,i){return await this._request(W.api.notebook.createNotebook.pathname,W.api.notebook.createNotebook.method,t,i)}async getNotebookConf(t,i){return await this._request(W.api.notebook.getNotebookConf.pathname,W.api.notebook.getNotebookConf.method,t,i)}async lsNotebooks(t){return await this._request(W.api.notebook.lsNotebooks.pathname,W.api.notebook.lsNotebooks.method,void 0,t)}async openNotebook(t,i){return await this._request(W.api.notebook.openNotebook.pathname,W.api.notebook.openNotebook.method,t,i)}async removeNotebook(t,i){return await this._request(W.api.notebook.removeNotebook.pathname,W.api.notebook.removeNotebook.method,t,i)}async renameNotebook(t,i){return await this._request(W.api.notebook.renameNotebook.pathname,W.api.notebook.renameNotebook.method,t,i)}async setNotebookConf(t,i){return await this._request(W.api.notebook.setNotebookConf.pathname,W.api.notebook.setNotebookConf.method,t,i)}async pushErrMsg(t,i){return await this._request(W.api.notification.pushErrMsg.pathname,W.api.notification.pushErrMsg.method,t,i)}async pushMsg(t,i){return await this._request(W.api.notification.pushMsg.pathname,W.api.notification.pushMsg.method,t,i)}async sql(t,i){return await this._request(W.api.query.sql.pathname,W.api.query.sql.method,t,i)}async openRepoSnapshotDoc(t,i){return await this._request(W.api.repo.openRepoSnapshotDoc.pathname,W.api.repo.openRepoSnapshotDoc.method,t,i)}async getSnippet(t,i){return await this._request(W.api.snippet.getSnippet.pathname,W.api.snippet.getSnippet.method,t,i)}async setSnippet(t,i){return await this._request(W.api.snippet.setSnippet.pathname,W.api.snippet.setSnippet.method,t,i)}async getRecentDocs(t){return await this._request(W.api.storage.getRecentDocs.pathname,W.api.storage.getRecentDocs.method,void 0,t)}async bootProgress(t){return await this._request(W.api.system.bootProgress.pathname,W.api.system.bootProgress.method,void 0,t)}async currentTime(t){return await this._request(W.api.system.currentTime.pathname,W.api.system.currentTime.method,void 0,t)}async version(t){return await this._request(W.api.system.version.pathname,W.api.system.version.method,void 0,t)}async render(t,i){return await this._request(W.api.template.render.pathname,W.api.template.render.method,t,i)}async renderSprig(t,i){return await this._request(W.api.template.renderSprig.pathname,W.api.template.renderSprig.method,t,i)}async _request(t,i,s,r,n=!0,c="json"){try{switch((r==null?void 0:r.type)??this._type){case"fetch":{const o=r==null?void 0:r.options;c=(()=>{switch(c){case"arraybuffer":return"arrayBuffer";case"document":return"text";default:return c}})();const a=await this._fetch(t,{method:i,body:s,responseType:c,onResponse:async h=>{switch(h.response.status){case es.Ok:break;case es.Accepted:t===W.api.file.getFile.pathname&&this._parseFetchResponse(h.response._data);break;default:break}},...o});return n&&c==="json"&&typeof a=="object"?this._parseFetchResponse(a):a}case"xhr":default:{const o=r==null?void 0:r.options;c=(()=>{switch(c){case"arrayBuffer":return"arraybuffer";default:return c}})();const a=await this._axios.request({url:t,method:i,data:s,responseType:c,...o});switch(a.status){case es.Ok:return n&&c==="json"&&typeof a.data=="object"?this._parseAxiosResponse(a):a.data;case es.Accepted:return t===W.api.file.getFile.pathname?this._parseAxiosResponse(a):a.data;default:throw new hh(a)}}}}catch(o){throw o}}_parseFetchResponse(t){if(t.code===0)return t;throw new fn(t)}_parseAxiosResponse(t){if(t.data.code===0)return t.data;throw new fn(t.data,t)}};xt(Sr,"ws",{broadcast:{pathname:"/ws/broadcast"}}),xt(Sr,"api",{search:{fullTextSearchBlock:{pathname:"/api/search/fullTextSearchBlock",method:"POST"}},asset:{upload:{pathname:"/api/asset/upload",method:"POST"}},attr:{getBlockAttrs:{pathname:"/api/attr/getBlockAttrs",method:"POST"},setBlockAttrs:{pathname:"/api/attr/setBlockAttrs",method:"POST"},getBookmarkLabels:{pathname:"/api/attr/getBookmarkLabels",method:"POST"}},block:{appendBlock:{pathname:"/api/block/appendBlock",method:"POST"},deleteBlock:{pathname:"/api/block/deleteBlock",method:"POST"},getBlockBreadcrumb:{pathname:"/api/block/getBlockBreadcrumb",method:"POST"},getBlockDOM:{pathname:"/api/block/getBlockDOM",method:"POST"},getBlockInfo:{pathname:"/api/block/getBlockInfo",method:"POST"},getBlockKramdown:{pathname:"/api/block/getBlockKramdown",method:"POST"},getChildBlocks:{pathname:"/api/block/getChildBlocks",method:"POST"},getDocInfo:{pathname:"/api/block/getDocInfo",method:"POST"},insertBlock:{pathname:"/api/block/insertBlock",method:"POST"},moveBlock:{pathname:"/api/block/moveBlock",method:"POST"},prependBlock:{pathname:"/api/block/prependBlock",method:"POST"},transferBlockRef:{pathname:"/api/block/transferBlockRef",method:"POST"},updateBlock:{pathname:"/api/block/updateBlock",method:"POST"}},broadcast:{channels:{pathname:"/api/broadcast/channels",method:"GET"},getChannelInfo:{pathname:"/api/broadcast/getChannelInfo",method:"POST"},postMessage:{pathname:"/api/broadcast/postMessage",method:"POST"}},convert:{pandoc:{pathname:"/api/convert/pandoc",method:"POST"}},export:{exportMdContent:{pathname:"/api/export/exportMdContent",method:"POST"},exportResources:{pathname:"/api/export/exportResources",method:"POST"}},file:{getFile:{pathname:"/api/file/getFile",method:"POST"},putFile:{pathname:"/api/file/putFile",method:"POST"},readDir:{pathname:"/api/file/readDir",method:"POST"},removeFile:{pathname:"/api/file/removeFile",method:"POST"},renameFile:{pathname:"/api/file/renameFile",method:"POST"}},filetree:{createDocWithMd:{pathname:"/api/filetree/createDocWithMd",method:"POST"},getDoc:{pathname:"/api/filetree/getDoc",method:"POST"},getHPathByID:{pathname:"/api/filetree/getHPathByID",method:"POST"},getHPathByPath:{pathname:"/api/filetree/getHPathByPath",method:"POST"},listDocsByPath:{pathname:"/api/filetree/listDocsByPath",method:"POST"},moveDocs:{pathname:"/api/filetree/moveDocs",method:"POST"},removeDoc:{pathname:"/api/filetree/removeDoc",method:"POST"},renameDoc:{pathname:"/api/filetree/renameDoc",method:"POST"},searchDocs:{pathname:"/api/filetree/searchDocs",method:"POST"}},history:{getDocHistoryContent:{pathname:"/api/history/getDocHistoryContent",method:"POST"},getHistoryItems:{pathname:"/api/history/getHistoryItems",method:"POST"}},inbox:{getShorthand:{pathname:"/api/inbox/getShorthand",method:"POST"}},network:{forwardProxy:{pathname:"/api/network/forwardProxy",method:"POST"}},notebook:{closeNotebook:{pathname:"/api/notebook/closeNotebook",method:"POST"},createNotebook:{pathname:"/api/notebook/createNotebook",method:"POST"},lsNotebooks:{pathname:"/api/notebook/lsNotebooks",method:"POST"},getNotebookConf:{pathname:"/api/notebook/getNotebookConf",method:"POST"},openNotebook:{pathname:"/api/notebook/openNotebook",method:"POST"},removeNotebook:{pathname:"/api/notebook/removeNotebook",method:"POST"},renameNotebook:{pathname:"/api/notebook/renameNotebook",method:"POST"},setNotebookConf:{pathname:"/api/notebook/setNotebookConf",method:"POST"}},notification:{pushErrMsg:{pathname:"/api/notification/pushErrMsg",method:"POST"},pushMsg:{pathname:"/api/notification/pushMsg",method:"POST"}},query:{sql:{pathname:"/api/query/sql",method:"POST"}},repo:{openRepoSnapshotDoc:{pathname:"/api/repo/openRepoSnapshotDoc",method:"POST"}},snippet:{getSnippet:{pathname:"/api/snippet/getSnippet",method:"POST"},setSnippet:{pathname:"/api/snippet/setSnippet",method:"POST"}},storage:{getRecentDocs:{pathname:"/api/storage/getRecentDocs",method:"POST"}},system:{bootProgress:{pathname:"/api/system/bootProgress",method:"POST"},currentTime:{pathname:"/api/system/currentTime",method:"POST"},version:{pathname:"/api/system/version",method:"POST"},getConf:{pathname:"/api/system/getConf",method:"POST"}},template:{render:{pathname:"/api/template/render",method:"POST"},renderSprig:{pathname:"/api/template/renderSprig",method:"POST"}}});let Ru=Sr;var ca=(e=>(e.NodeNotebook="NodeNotebook",e.NodeFolder="NodeFolder",e.NodeDocument="NodeDocument",e.NodeSuperBlock="NodeSuperBlock",e.NodeBlockquote="NodeBlockquote",e.NodeList="NodeList",e.NodeListItem="NodeListItem",e.NodeHeading="NodeHeading",e.NodeParagraph="NodeParagraph",e.NodeMathBlock="NodeMathBlock",e.NodeTable="NodeTable",e.NodeCodeBlock="NodeCodeBlock",e.NodeHTMLBlock="NodeHTMLBlock",e.NodeThematicBreak="NodeThematicBreak",e.NodeAudio="NodeAudio",e.NodeVideo="NodeVideo",e.NodeIFrame="NodeIFrame",e.NodeWidget="NodeWidget",e.NodeBlockQueryEmbed="NodeBlockQueryEmbed",e))(ca||{}),ha=(e=>(e.d="d",e.s="s",e.b="b",e.l="l",e.i="i",e.h="h",e.p="p",e.m="m",e.t="t",e.c="c",e.html="html",e.query_embed="query_embed",e.tb="tb",e.audio="audio",e.video="video",e.iframe="iframe",e.widget="widget",e))(ha||{}),ua=(e=>(e.d="d",e.s="s",e.b="b",e.l="l",e.i="i",e))(ua||{}),fa=(e=>(e.h="h",e.p="p",e.m="m",e.t="t",e.c="c",e.html="html",e.query_embed="query_embed",e.tb="tb",e.audio="audio",e.video="video",e.iframe="iframe",e.widget="widget",e))(fa||{}),da=(e=>(e.h1="h1",e.h2="h2",e.h3="h3",e.h4="h4",e.h5="h5",e.h6="h6",e.u="u",e.o="o",e.t="t",e.none="",e))(da||{}),_a=(e=>(e.u="u",e.o="o",e.t="t",e))(_a||{}),pa=(e=>(e.h1="h1",e.h2="h2",e.h3="h3",e.h4="h4",e.h5="h5",e.h6="h6",e))(pa||{}),ma=(e=>(e[e.keyword=0]="keyword",e[e.querySyntax=1]="querySyntax",e[e.sql=2]="sql",e[e.regex=3]="regex",e))(ma||{}),ga=(e=>(e[e.noGroupBy=0]="noGroupBy",e[e.group=1]="group",e))(ga||{}),va=(e=>(e[e.type=0]="type",e[e.createdASC=1]="createdASC",e[e.createdDESC=2]="createdDESC",e[e.modifiedASC=3]="modifiedASC",e[e.modifiedDESC=4]="modifiedDESC",e[e.sortByContent=5]="sortByContent",e[e.sortByRankAsc=6]="sortByRankAsc",e[e.sortByRankDesc=7]="sortByRankDesc",e))(va||{}),ba=(e=>(e[e.SortModeNameASC=0]="SortModeNameASC",e[e.SortModeNameDESC=1]="SortModeNameDESC",e[e.SortModeUpdatedASC=2]="SortModeUpdatedASC",e[e.SortModeUpdatedDESC=3]="SortModeUpdatedDESC",e[e.SortModeAlphanumASC=4]="SortModeAlphanumASC",e[e.SortModeAlphanumDESC=5]="SortModeAlphanumDESC",e[e.SortModeCustom=6]="SortModeCustom",e[e.SortModeRefCountASC=7]="SortModeRefCountASC",e[e.SortModeRefCountDESC=8]="SortModeRefCountDESC",e[e.SortModeCreatedASC=9]="SortModeCreatedASC",e[e.SortModeCreatedDESC=10]="SortModeCreatedDESC",e[e.SortModeSizeASC=11]="SortModeSizeASC",e[e.SortModeSizeDESC=12]="SortModeSizeDESC",e[e.SortModeSubDocCountASC=13]="SortModeSubDocCountASC",e[e.SortModeSubDocCountDESC=14]="SortModeSubDocCountDESC",e))(ba||{});const Tu=Object.freeze(Object.defineProperty({__proto__:null,BlockSubType:da,BlockType:ha,Container:ua,GroupBy:ga,Leaf:fa,Method:ma,NodeHeadingSubType:pa,NodeListSubType:_a,NodeType:ca,OrderBy:va,SortMode:ba},Symbol.toStringTag,{value:"Module"}));function Te(){}function Ei(e,t){for(const i in t)e[i]=t[i];return e}function ya(e){return e()}function Tn(){return Object.create(null)}function Ye(e){e.forEach(ya)}function Sa(e){return typeof e=="function"}function Pe(e,t){return e!=e?t==t:e!==t||e&&typeof e=="object"||typeof e=="function"}let ts;function An(e,t){return e===t?!0:(ts||(ts=document.createElement("a")),ts.href=t,e===ts.href)}function Au(e){return Object.keys(e).length===0}function Mu(e,...t){if(e==null){for(const s of t)s(void 0);return Te}const i=e.subscribe(...t);return i.unsubscribe?()=>i.unsubscribe():i}function ei(e){let t;return Mu(e,i=>t=i)(),t}function Xe(e,t,i,s){if(e){const r=wa(e,t,i,s);return e[0](r)}}function wa(e,t,i,s){return e[1]&&s?Ei(i.ctx.slice(),e[1](s(t))):i.ctx}function Qe(e,t,i,s){if(e[2]&&s){const r=e[2](s(i));if(t.dirty===void 0)return r;if(typeof r=="object"){const n=[],c=Math.max(t.dirty.length,r.length);for(let o=0;o<c;o+=1)n[o]=t.dirty[o]|r[o];return n}return t.dirty|r}return t.dirty}function et(e,t,i,s,r,n){if(r){const c=wa(t,i,s,n);e.p(c,r)}}function tt(e){if(e.ctx.length>32){const t=[],i=e.ctx.length/32;for(let s=0;s<i;s++)t[s]=-1;return t}return-1}function Ou(e){const t={};for(const i in e)t[i]=!0;return t}function ce(e,t){e.appendChild(t)}function Z(e,t,i){e.insertBefore(t,i||null)}function J(e){e.parentNode&&e.parentNode.removeChild(e)}function le(e){return document.createElement(e)}function Ut(e){return document.createElementNS("http://www.w3.org/2000/svg",e)}function ot(e){return document.createTextNode(e)}function he(){return ot(" ")}function ct(){return ot("")}function ge(e,t,i,s){return e.addEventListener(t,i,s),()=>e.removeEventListener(t,i,s)}function Kt(e){return function(t){return t.preventDefault(),e.call(this,t)}}function Lt(e){return function(t){return t.stopPropagation(),e.call(this,t)}}function F(e,t,i){i==null?e.removeAttribute(t):e.getAttribute(t)!==i&&e.setAttribute(t,i)}const Bu=["width","height"];function Pu(e,t){const i=Object.getOwnPropertyDescriptors(e.__proto__);for(const s in t)t[s]==null?e.removeAttribute(s):s==="style"?e.style.cssText=t[s]:s==="__value"?e.value=e[s]=t[s]:i[s]&&i[s].set&&Bu.indexOf(s)===-1?e[s]=t[s]:F(e,s,t[s])}function Iu(e,t){Object.keys(t).forEach(i=>{xu(e,i,t[i])})}function xu(e,t,i){t in e?e[t]=typeof e[t]=="boolean"&&i===""?!0:i:F(e,t,i)}function Mn(e){return/-/.test(e)?Iu:Pu}function oi(e,t,i){e.setAttributeNS("http://www.w3.org/1999/xlink",t,i)}function wr(e){return e===""?null:+e}function Nu(e){return Array.from(e.childNodes)}function Tt(e,t){t=""+t,e.data!==t&&(e.data=t)}function st(e,t){e.value=t??""}function dt(e,t,i,s){i==null?e.style.removeProperty(t):e.style.setProperty(t,i,s?"important":"")}function On(e,t,i){for(let s=0;s<e.options.length;s+=1){const r=e.options[s];if(r.__value===t){r.selected=!0;return}}(!i||t!==void 0)&&(e.selectedIndex=-1)}function Hu(e){const t=e.querySelector(":checked");return t&&t.__value}function U(e,t,i){e.classList.toggle(t,!!i)}function Fu(e,t,{bubbles:i=!1,cancelable:s=!1}={}){return new CustomEvent(e,{detail:t,bubbles:i,cancelable:s})}class Di{constructor(t=!1){fe(this,"is_svg",!1);fe(this,"e");fe(this,"n");fe(this,"t");fe(this,"a");this.is_svg=t,this.e=this.n=null}c(t){this.h(t)}m(t,i,s=null){this.e||(this.is_svg?this.e=Ut(i.nodeName):this.e=le(i.nodeType===11?"TEMPLATE":i.nodeName),this.t=i.tagName!=="TEMPLATE"?i:i.content,this.c(t)),this.i(s)}h(t){this.e.innerHTML=t,this.n=Array.from(this.e.nodeName==="TEMPLATE"?this.e.content.childNodes:this.e.childNodes)}i(t){for(let i=0;i<this.n.length;i+=1)Z(this.t,this.n[i],t)}p(t){this.d(),this.h(t),this.i(this.a)}d(){this.n.forEach(J)}}let Ui;function xi(e){Ui=e}function Ms(){if(!Ui)throw new Error("Function called outside component initialization");return Ui}function ju(e){Ms().$$.on_mount.push(e)}function jr(e){Ms().$$.on_destroy.push(e)}function Qt(){const e=Ms();return(t,i,{cancelable:s=!1}={})=>{const r=e.$$.callbacks[t];if(r){const n=Fu(t,i,{cancelable:s});return r.slice().forEach(c=>{c.call(e,n)}),!n.defaultPrevented}return!0}}function Uu(e){return Ms().$$.context.get(e)}function Ce(e,t){const i=e.$$.callbacks[t.type];i&&i.slice().forEach(s=>s.call(this,t))}const fi=[],Wt=[];let pi=[];const Bn=[],Wu=Promise.resolve();let Cr=!1;function Yu(){Cr||(Cr=!0,Wu.then(Ca))}function vs(e){pi.push(e)}const ir=new Set;let li=0;function Ca(){if(li!==0)return;const e=Ui;do{try{for(;li<fi.length;){const t=fi[li];li++,xi(t),zu(t.$$)}}catch(t){throw fi.length=0,li=0,t}for(xi(null),fi.length=0,li=0;Wt.length;)Wt.pop()();for(let t=0;t<pi.length;t+=1){const i=pi[t];ir.has(i)||(ir.add(i),i())}pi.length=0}while(fi.length);for(;Bn.length;)Bn.pop()();Cr=!1,ir.clear(),xi(e)}function zu(e){if(e.fragment!==null){e.update(),Ye(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(vs)}}function qu(e){const t=[],i=[];pi.forEach(s=>e.indexOf(s)===-1?t.push(s):i.push(s)),i.forEach(s=>s()),pi=t}const fs=new Set;let ii;function Ve(){ii={r:0,c:[],p:ii}}function Ke(){ii.r||Ye(ii.c),ii=ii.p}function Y(e,t){e&&e.i&&(fs.delete(e),e.i(t))}function q(e,t,i,s){if(e&&e.o){if(fs.has(e))return;fs.add(e),ii.c.push(()=>{fs.delete(e),s&&(i&&e.d(1),s())}),e.o(t)}else s&&s()}function gt(e){return(e==null?void 0:e.length)!==void 0?e:Array.from(e)}function Vu(e,t){e.d(1),t.delete(e.key)}function Gi(e,t){q(e,1,1,()=>{t.delete(e.key)})}function Li(e,t,i,s,r,n,c,o,a,h,u,f){let b=e.length,y=n.length,v=b;const m={};for(;v--;)m[e[v].key]=v;const l=[],_=new Map,p=new Map,d=[];for(v=y;v--;){const C=f(r,n,v),S=i(C);let k=c.get(S);k?s&&d.push(()=>k.p(C,t)):(k=h(S,C),k.c()),_.set(S,l[v]=k),S in m&&p.set(S,Math.abs(v-m[S]))}const g=new Set,w=new Set;function E(C){Y(C,1),C.m(o,u),c.set(C.key,C),u=C.first,y--}for(;b&&y;){const C=l[y-1],S=e[b-1],k=C.key,D=S.key;C===S?(u=C.first,b--,y--):_.has(D)?!c.has(k)||g.has(k)?E(C):w.has(D)?b--:p.get(k)>p.get(D)?(w.add(k),E(C)):(g.add(D),b--):(a(S,c),b--)}for(;b--;){const C=e[b];_.has(C.key)||a(C,c)}for(;y;)E(l[y-1]);return Ye(d),l}function $i(e,t){const i={},s={},r={$$scope:1};let n=e.length;for(;n--;){const c=e[n],o=t[n];if(o){for(const a in c)a in o||(s[a]=1);for(const a in o)r[a]||(i[a]=o[a],r[a]=1);e[n]=o}else for(const a in c)r[a]=1}for(const c in s)c in i||(i[c]=void 0);return i}function Os(e){return typeof e=="object"&&e!==null?e:{}}function ne(e){e&&e.c()}function ie(e,t,i){const{fragment:s,after_update:r}=e.$$;s&&s.m(t,i),vs(()=>{const n=e.$$.on_mount.map(ya).filter(Sa);e.$$.on_destroy?e.$$.on_destroy.push(...n):Ye(n),e.$$.on_mount=[]}),r.forEach(vs)}function se(e,t){const i=e.$$;i.fragment!==null&&(qu(i.after_update),Ye(i.on_destroy),i.fragment&&i.fragment.d(t),i.on_destroy=i.fragment=null,i.ctx=[])}function Ku(e,t){e.$$.dirty[0]===-1&&(fi.push(e),Yu(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function He(e,t,i,s,r,n,c,o=[-1]){const a=Ui;xi(e);const h=e.$$={fragment:null,ctx:[],props:n,update:Te,not_equal:r,bound:Tn(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(a?a.$$.context:[])),callbacks:Tn(),dirty:o,skip_bound:!1,root:t.target||a.$$.root};c&&c(h.root);let u=!1;if(h.ctx=i?i(e,t.props||{},(f,b,...y)=>{const v=y.length?y[0]:b;return h.ctx&&r(h.ctx[f],h.ctx[f]=v)&&(!h.skip_bound&&h.bound[f]&&h.bound[f](v),u&&Ku(e,f)),b}):[],h.update(),u=!0,Ye(h.before_update),h.fragment=s?s(h.ctx):!1,t.target){if(t.hydrate){const f=Nu(t.target);h.fragment&&h.fragment.l(f),f.forEach(J)}else h.fragment&&h.fragment.c();t.intro&&Y(e.$$.fragment),ie(e,t.target,t.anchor),Ca()}xi(a)}class Fe{constructor(){fe(this,"$$");fe(this,"$$set")}$destroy(){se(this,1),this.$destroy=Te}$on(t,i){if(!Sa(i))return Te;const s=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return s.push(i),()=>{const r=s.indexOf(i);r!==-1&&s.splice(r,1)}}$set(t){this.$$set&&!Au(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const Gu="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(Gu);const $u=e=>({}),Pn=e=>({});function Ju(e){let t;const i=e[16].icon,s=Xe(i,e,e[15],Pn),r=s||Xu();return{c(){r&&r.c()},m(n,c){r&&r.m(n,c),t=!0},p(n,c){s&&s.p&&(!t||c&32768)&&et(s,i,n,n[15],t?Qe(i,n[15],c,$u):tt(n[15]),Pn)},i(n){t||(Y(r,n),t=!0)},o(n){q(r,n),t=!1},d(n){r&&r.d(n)}}}function Zu(e){let t,i;return{c(){t=Ut("svg"),i=Ut("use"),oi(i,"xlink:href",e[1]),F(t,"class","b3-menu__icon")},m(s,r){Z(s,t,r),ce(t,i)},p(s,r){r&2&&oi(i,"xlink:href",s[1])},i:Te,o:Te,d(s){s&&J(t)}}}function Xu(e){let t,i;return{c(){t=Ut("svg"),i=Ut("use"),oi(i,"xlink:href","#"),F(t,"class","b3-menu__icon")},m(s,r){Z(s,t,r),ce(t,i)},p:Te,d(s){s&&J(t)}}}function Qu(e){let t,i,s,r,n,c,o;return{c(){t=le("div"),i=he(),s=le("input"),r=he(),n=le("div"),F(t,"class","fn__hr--small"),s.disabled=e[4],F(s,"placeholder",e[3]),F(s,"class","b3-text-field fn__size200"),F(n,"class","fn__hr--small")},m(a,h){Z(a,t,h),Z(a,i,h),Z(a,s,h),e[17](s),st(s,e[0]),Z(a,r,h),Z(a,n,h),c||(o=[ge(s,"input",e[18]),ge(s,"change",e[12])],c=!0)},p(a,h){h&16&&(s.disabled=a[4]),h&8&&F(s,"placeholder",a[3]),h&1&&s.value!==a[0]&&st(s,a[0])},d(a){a&&(J(t),J(i),J(s),J(r),J(n)),e[17](null),c=!1,Ye(o)}}}function ef(e){let t;return{c(){t=ot(e[3])},m(i,s){Z(i,t,s)},p(i,s){s&8&&Tt(t,i[3])},d(i){i&&J(t)}}}function In(e){let t,i,s;return{c(){t=le("input"),F(t,"type","file"),F(t,"accept",e[8]),t.disabled=e[4],t.multiple=e[9],F(t,"class","file-input svelte-14whws2")},m(r,n){Z(r,t,n),e[19](t),i||(s=[ge(t,"change",e[20]),ge(t,"change",e[13])],i=!0)},p(r,n){n&256&&F(t,"accept",r[8]),n&16&&(t.disabled=r[4]),n&512&&(t.multiple=r[9])},d(r){r&&J(t),e[19](null),i=!1,Ye(s)}}}function xn(e){let t,i;return{c(){t=le("span"),i=ot(e[6]),F(t,"class","b3-menu__accelerator")},m(s,r){Z(s,t,r),ce(t,i)},p(s,r){r&64&&Tt(i,s[6])},d(s){s&&J(t)}}}function tf(e){let t,i,s,r,n,c,o,a;const h=[Zu,Ju],u=[];function f(_,p){return _[1]?0:1}t=f(e),i=u[t]=h[t](e);function b(_,p){return!_[5]||_[7]?ef:Qu}let y=b(e),v=y(e),m=e[7]&&In(e),l=e[6]&&xn(e);return{c(){i.c(),s=he(),r=le("span"),v.c(),n=he(),m&&m.c(),c=he(),l&&l.c(),o=ct(),F(r,"class","b3-menu__label"),dt(r,"font",e[2]),dt(r,"position",e[7]?"relative":"initial")},m(_,p){u[t].m(_,p),Z(_,s,p),Z(_,r,p),v.m(r,null),ce(r,n),m&&m.m(r,null),Z(_,c,p),l&&l.m(_,p),Z(_,o,p),a=!0},p(_,[p]){let d=t;t=f(_),t===d?u[t].p(_,p):(Ve(),q(u[d],1,1,()=>{u[d]=null}),Ke(),i=u[t],i?i.p(_,p):(i=u[t]=h[t](_),i.c()),Y(i,1),i.m(s.parentNode,s)),y===(y=b(_))&&v?v.p(_,p):(v.d(1),v=y(_),v&&(v.c(),v.m(r,n))),_[7]?m?m.p(_,p):(m=In(_),m.c(),m.m(r,null)):m&&(m.d(1),m=null),p&4&&dt(r,"font",_[2]),p&128&&dt(r,"position",_[7]?"relative":"initial"),_[6]?l?l.p(_,p):(l=xn(_),l.c(),l.m(o.parentNode,o)):l&&(l.d(1),l=null)},i(_){a||(Y(i),a=!0)},o(_){q(i),a=!1},d(_){_&&(J(s),J(r),J(c),J(o)),u[t].d(_),v.d(),m&&m.d(),l&&l.d(_)}}}function sf(e,t,i){let{$$slots:s={},$$scope:r}=t,{icon:n=""}=t,{font:c=""}=t,{label:o=""}=t,{disabled:a=!1}=t,{input:h=!1}=t,{value:u=""}=t,{accelerator:f=""}=t,{file:b=!1}=t,{accept:y=""}=t,{multiple:v=!0}=t,{webkitdirectory:m=!0}=t,l=null,_;function p(D){_&&i(11,_.webkitdirectory=D,_)}ju(()=>{p(m)});const d=Qt();function g(D){d("changed",{value:u,event:D})}function w(D){d("selected",{files:l,event:D})}function E(D){Wt[D?"unshift":"push"](()=>{_=D,i(11,_)})}function C(){u=this.value,i(0,u)}function S(D){Wt[D?"unshift":"push"](()=>{_=D,i(11,_)})}function k(){l=this.files,i(10,l)}return e.$$set=D=>{"icon"in D&&i(1,n=D.icon),"font"in D&&i(2,c=D.font),"label"in D&&i(3,o=D.label),"disabled"in D&&i(4,a=D.disabled),"input"in D&&i(5,h=D.input),"value"in D&&i(0,u=D.value),"accelerator"in D&&i(6,f=D.accelerator),"file"in D&&i(7,b=D.file),"accept"in D&&i(8,y=D.accept),"multiple"in D&&i(9,v=D.multiple),"webkitdirectory"in D&&i(14,m=D.webkitdirectory),"$$scope"in D&&i(15,r=D.$$scope)},e.$$.update=()=>{e.$$.dirty&16384&&p(m)},[u,n,c,o,a,h,f,b,y,v,l,_,g,w,m,r,s,E,C,S,k]}let Nn=class extends Fe{constructor(t){super(),He(this,t,sf,tf,Pe,{icon:1,font:2,label:3,disabled:4,input:5,value:0,accelerator:6,file:7,accept:8,multiple:9,webkitdirectory:14})}};const Si={id:/^\d{14}-[0-9a-z]{7}$/,url:/^siyuan:\/\/blocks\/(\d{14}-[0-9a-z]{7})/,snippet:/^\d{14}-[0-9a-z]{7}$/,created:/^\d{10}$/,history:/[\/\\]history[\/\\]\d{4}-\d{2}-\d{2}-\d{6}-(clean|update|delete|format|sync|replace)([\/\\]\d{14}-[0-9a-z]{7})+\.sy$/,snapshot:/^[0-9a-f]{40}$/,shorthand:/^\d{13}$/};function rf(e){let t,i;return{c(){t=Ut("svg"),i=Ut("use"),oi(i,"xlink:href",e[0]),F(t,"style",e[3]),F(t,"data-id",e[1]),F(t,"class",e[2]),U(t,"popover__block",Si.id.test(e[1]))},m(s,r){Z(s,t,r),ce(t,i)},p(s,[r]){r&1&&oi(i,"xlink:href",s[0]),r&8&&F(t,"style",s[3]),r&2&&F(t,"data-id",s[1]),r&4&&F(t,"class",s[2]),r&6&&U(t,"popover__block",Si.id.test(s[1]))},i:Te,o:Te,d(s){s&&J(t)}}}function nf(e,t,i){let{icon:s}=t,{id:r=""}=t,{className:n=""}=t,{style:c=""}=t;return e.$$set=o=>{"icon"in o&&i(0,s=o.icon),"id"in o&&i(1,r=o.id),"className"in o&&i(2,n=o.className),"style"in o&&i(3,c=o.style)},[s,r,n,c]}class kt extends Fe{constructor(t){super(),He(this,t,nf,rf,Pe,{icon:0,id:1,className:2,style:3})}}const of=e=>({focus:e&1}),Hn=e=>({focus:e[0]});function Fn(e,t,i){const s=e.slice();return s[13]=t[i],s}function jn(e){let t,i,s,r,n,c,o;return i=new kt({props:{icon:"#iconSearch",className:"b3-form__icon-icon"}}),{c(){t=le("div"),ne(i.$$.fragment),s=he(),r=le("input"),F(r,"placeholder",e[4]),F(r,"class","b3-text-field fn__block b3-form__icon-input"),F(t,"class","b3-form__icon")},m(a,h){Z(a,t,h),ie(i,t,null),ce(t,s),ce(t,r),st(r,e[1]),n=!0,c||(o=[ge(r,"input",e[9]),ge(r,"change",e[5])],c=!0)},p(a,h){(!n||h&16)&&F(r,"placeholder",a[4]),h&2&&r.value!==a[1]&&st(r,a[1])},i(a){n||(Y(i.$$.fragment,a),n=!0)},o(a){q(i.$$.fragment,a),n=!1},d(a){a&&J(t),se(i),c=!1,Ye(o)}}}function Un(e,t){let i,s,r,n,c=t[13].text+"",o,a,h,u,f;s=new kt({props:{icon:t[13].icon,className:"b3-list-item__graphic"}});function b(){return t[10](t[13])}function y(){return t[11](t[13])}return{key:e,first:null,c(){i=le("li"),ne(s.$$.fragment),r=he(),n=le("span"),o=he(),F(n,"class","b3-list-item__text svelte-15drd7h"),F(i,"role","button"),F(i,"data-name",a=t[13].name),F(i,"class","b3-list-item"),U(i,"b3-list-item--focus",t[13].key===t[0]),this.first=i},m(v,m){Z(v,i,m),ie(s,i,null),ce(i,r),ce(i,n),n.innerHTML=c,ce(i,o),h=!0,u||(f=[ge(i,"click",b),ge(i,"keyup",y)],u=!0)},p(v,m){t=v;const l={};m&4&&(l.icon=t[13].icon),s.$set(l),(!h||m&4)&&c!==(c=t[13].text+"")&&(n.innerHTML=c),(!h||m&4&&a!==(a=t[13].name))&&F(i,"data-name",a),(!h||m&5)&&U(i,"b3-list-item--focus",t[13].key===t[0])},i(v){h||(Y(s.$$.fragment,v),h=!0)},o(v){q(s.$$.fragment,v),h=!1},d(v){v&&J(i),se(s),u=!1,Ye(f)}}}function af(e){let t;return{c(){t=ot("Container")},m(i,s){Z(i,t,s)},d(i){i&&J(t)}}}function lf(e){let t,i,s,r=[],n=new Map,c,o,a,h=e[3]&&jn(e),u=gt(e[2]);const f=m=>m[13].key;for(let m=0;m<u.length;m+=1){let l=Fn(e,u,m),_=f(l);n.set(_,r[m]=Un(_,l))}const b=e[8].default,y=Xe(b,e,e[7],Hn),v=y||af();return{c(){t=le("div"),i=le("ul"),h&&h.c(),s=he();for(let m=0;m<r.length;m+=1)r[m].c();c=he(),o=le("div"),v&&v.c(),F(i,"class","b3-tab-bar b3-list b3-list--background"),F(o,"class","config__tab-wrap"),F(t,"class","fn__flex-1 fn__flex config__panel")},m(m,l){Z(m,t,l),ce(t,i),h&&h.m(i,null),ce(i,s);for(let _=0;_<r.length;_+=1)r[_]&&r[_].m(i,null);ce(t,c),ce(t,o),v&&v.m(o,null),a=!0},p(m,[l]){m[3]?h?(h.p(m,l),l&8&&Y(h,1)):(h=jn(m),h.c(),Y(h,1),h.m(i,s)):h&&(Ve(),q(h,1,1,()=>{h=null}),Ke()),l&69&&(u=gt(m[2]),Ve(),r=Li(r,l,f,1,m,u,n,i,Gi,Un,null,Fn),Ke()),y&&y.p&&(!a||l&129)&&et(y,b,m,m[7],a?Qe(b,m[7],l,of):tt(m[7]),Hn)},i(m){if(!a){Y(h);for(let l=0;l<u.length;l+=1)Y(r[l]);Y(v,m),a=!0}},o(m){q(h);for(let l=0;l<r.length;l+=1)q(r[l]);q(v,m),a=!1},d(m){m&&J(t),h&&h.d();for(let l=0;l<r.length;l+=1)r[l].d();v&&v.d(m)}}}function cf(e,t,i){let{$$slots:s={},$$scope:r}=t,{panels:n}=t,{focus:c}=t,{searchEnable:o=!1}=t,{searchPlaceholder:a=""}=t,{searchValue:h=""}=t;const u=Qt();function f(){u("search-changed",{value:h})}function b(l){u("changed",{key:l}),i(0,c=l)}function y(){h=this.value,i(1,h)}const v=l=>b(l.key),m=l=>b(l.key);return e.$$set=l=>{"panels"in l&&i(2,n=l.panels),"focus"in l&&i(0,c=l.focus),"searchEnable"in l&&i(3,o=l.searchEnable),"searchPlaceholder"in l&&i(4,a=l.searchPlaceholder),"searchValue"in l&&i(1,h=l.searchValue),"$$scope"in l&&i(7,r=l.$$scope)},[c,h,n,o,a,f,b,r,s,y,v,m]}class hf extends Fe{constructor(t){super(),He(this,t,cf,lf,Pe,{panels:2,focus:0,searchEnable:3,searchPlaceholder:4,searchValue:1})}}function uf(e){let t,i;const s=e[4].default,r=Xe(s,e,e[3],null);return{c(){t=le("div"),r&&r.c(),F(t,"data-name",e[2]),F(t,"class","config__tab-container"),U(t,"fn__none",!e[0]),U(t,"config__tab-container--top",e[1])},m(n,c){Z(n,t,c),r&&r.m(t,null),i=!0},p(n,[c]){r&&r.p&&(!i||c&8)&&et(r,s,n,n[3],i?Qe(s,n[3],c,null):tt(n[3]),null),(!i||c&4)&&F(t,"data-name",n[2]),(!i||c&1)&&U(t,"fn__none",!n[0]),(!i||c&2)&&U(t,"config__tab-container--top",n[1])},i(n){i||(Y(r,n),i=!0)},o(n){q(r,n),i=!1},d(n){n&&J(t),r&&r.d(n)}}}function ff(e,t,i){let{$$slots:s={},$$scope:r}=t,{display:n=!0}=t,{top:c=!0}=t,{name:o=""}=t;return e.$$set=a=>{"display"in a&&i(0,n=a.display),"top"in a&&i(1,c=a.top),"name"in a&&i(2,o=a.name),"$$scope"in a&&i(3,r=a.$$scope)},[n,c,o,r,s]}class ds extends Fe{constructor(t){super(),He(this,t,ff,uf,Pe,{display:0,top:1,name:2})}}const df=e=>({}),Wn=e=>({}),_f=e=>({}),Yn=e=>({});function zn(e){let t,i;const s=e[7].icon,r=Xe(s,e,e[6],Yn);return{c(){t=le("span"),r&&r.c(),F(t,"class","item__icon")},m(n,c){Z(n,t,c),r&&r.m(t,null),i=!0},p(n,c){r&&r.p&&(!i||c&64)&&et(r,s,n,n[6],i?Qe(s,n[6],c,_f):tt(n[6]),Yn)},i(n){i||(Y(r,n),i=!0)},o(n){q(r,n),i=!1},d(n){n&&J(t),r&&r.d(n)}}}function pf(e){let t;return{c(){t=ot("text")},m(i,s){Z(i,t,s)},d(i){i&&J(t)}}}function mf(e){let t,i,s,r,n,c,o,a,h,u,f=e[0]&&e[4].icon&&zn(e);const b=e[7].text,y=Xe(b,e,e[6],Wn),v=y||pf();return{c(){t=le("div"),i=le("span"),s=he(),f&&f.c(),r=he(),n=le("span"),v&&v.c(),c=he(),o=le("span"),F(i,"class","fn__flex-1"),F(n,"class","item__text"),F(o,"class","fn__flex-1"),F(t,"role","button"),F(t,"data-type",e[1]),F(t,"class","item item--full"),U(t,"item--focus",e[2])},m(m,l){Z(m,t,l),ce(t,i),ce(t,s),f&&f.m(t,null),ce(t,r),ce(t,n),v&&v.m(n,null),ce(t,c),ce(t,o),a=!0,h||(u=ge(t,"click",e[3]),h=!0)},p(m,[l]){m[0]&&m[4].icon?f?(f.p(m,l),l&17&&Y(f,1)):(f=zn(m),f.c(),Y(f,1),f.m(t,r)):f&&(Ve(),q(f,1,1,()=>{f=null}),Ke()),y&&y.p&&(!a||l&64)&&et(y,b,m,m[6],a?Qe(b,m[6],l,df):tt(m[6]),Wn),(!a||l&2)&&F(t,"data-type",m[1]),(!a||l&4)&&U(t,"item--focus",m[2])},i(m){a||(Y(f),Y(v,m),a=!0)},o(m){q(f),q(v,m),a=!1},d(m){m&&J(t),f&&f.d(),v&&v.d(m),h=!1,u()}}}function gf(e,t,i){let{$$slots:s={},$$scope:r}=t;const n=Ou(s);let{key:c}=t,{icon:o}=t,{name:a=""}=t,{focus:h=!1}=t;const u=Qt();function f(){h||u("changed",{key:c})}return e.$$set=b=>{"key"in b&&i(5,c=b.key),"icon"in b&&i(0,o=b.icon),"name"in b&&i(1,a=b.name),"focus"in b&&i(2,h=b.focus),"$$scope"in b&&i(6,r=b.$$scope)},[o,a,h,f,n,c,r,s]}class vf extends Fe{constructor(t){super(),He(this,t,gf,mf,Pe,{key:5,icon:0,name:1,focus:2})}}const bf=e=>({focus:e&1}),qn=e=>({focus:e[0]});function Vn(e,t,i){const s=e.slice();return s[5]=t[i],s}function yf(e){let t,i=e[5].icon+"",s;return{c(){t=new Di(!1),s=ct(),t.a=s},m(r,n){t.m(i,r,n),Z(r,s,n)},p(r,n){n&2&&i!==(i=r[5].icon+"")&&t.p(i)},i:Te,o:Te,d(r){r&&(J(s),t.d())}}}function Sf(e){let t,i;return t=new kt({props:{icon:e[5].icon}}),{c(){ne(t.$$.fragment)},m(s,r){ie(t,s,r),i=!0},p(s,r){const n={};r&2&&(n.icon=s[5].icon),t.$set(n)},i(s){i||(Y(t.$$.fragment,s),i=!0)},o(s){q(t.$$.fragment,s),i=!1},d(s){se(t,s)}}}function wf(e){let t,i,s,r,n,c;const o=[Sf,yf],a=[];function h(u,f){var b;return f&2&&(i=null),i==null&&(i=!!((b=u[5].icon)!=null&&b.startsWith("#"))),i?0:u[5].icon?1:-1}return~(s=h(e,-1))&&(r=a[s]=o[s](e)),{c(){t=le("span"),r&&r.c(),n=he(),F(t,"slot","icon")},m(u,f){Z(u,t,f),~s&&a[s].m(t,null),ce(t,n),c=!0},p(u,f){let b=s;s=h(u,f),s===b?~s&&a[s].p(u,f):(r&&(Ve(),q(a[b],1,1,()=>{a[b]=null}),Ke()),~s?(r=a[s],r?r.p(u,f):(r=a[s]=o[s](u),r.c()),Y(r,1),r.m(t,n)):r=null)},i(u){c||(Y(r),c=!0)},o(u){q(r),c=!1},d(u){u&&J(t),~s&&a[s].d()}}}function Cf(e){let t,i,s=e[5].text+"",r;return{c(){t=le("span"),i=new Di(!1),r=he(),i.a=r,F(t,"slot","text")},m(n,c){Z(n,t,c),i.m(s,t),ce(t,r)},p(n,c){c&2&&s!==(s=n[5].text+"")&&i.p(s)},d(n){n&&J(t)}}}function Kn(e,t){let i,s,r;return s=new vf({props:{key:t[5].key,icon:!!t[5].icon,name:t[5].name,focus:t[5].key===t[0],$$slots:{text:[Cf],icon:[wf]},$$scope:{ctx:t}}}),s.$on("changed",t[2]),{key:e,first:null,c(){i=ct(),ne(s.$$.fragment),this.first=i},m(n,c){Z(n,i,c),ie(s,n,c),r=!0},p(n,c){t=n;const o={};c&2&&(o.key=t[5].key),c&2&&(o.icon=!!t[5].icon),c&2&&(o.name=t[5].name),c&3&&(o.focus=t[5].key===t[0]),c&18&&(o.$$scope={dirty:c,ctx:t}),s.$set(o)},i(n){r||(Y(s.$$.fragment,n),r=!0)},o(n){q(s.$$.fragment,n),r=!1},d(n){n&&J(i),se(s,n)}}}function kf(e){let t;return{c(){t=ot("Container")},m(i,s){Z(i,t,s)},d(i){i&&J(t)}}}function Ef(e){let t,i,s=[],r=new Map,n,c,o,a=gt(e[1]);const h=y=>y[5].key;for(let y=0;y<a.length;y+=1){let v=Vn(e,a,y),m=h(v);r.set(m,s[y]=Kn(m,v))}const u=e[3].default,f=Xe(u,e,e[4],qn),b=f||kf();return{c(){t=le("div"),i=le("div");for(let y=0;y<s.length;y+=1)s[y].c();n=he(),c=le("div"),b&&b.c(),F(i,"class","layout-tab-bar fn__flex"),F(c,"class","fn__flex-1"),F(t,"class","fn__flex-column"),dt(t,"height","100%")},m(y,v){Z(y,t,v),ce(t,i);for(let m=0;m<s.length;m+=1)s[m]&&s[m].m(i,null);ce(t,n),ce(t,c),b&&b.m(c,null),o=!0},p(y,[v]){v&7&&(a=gt(y[1]),Ve(),s=Li(s,v,h,1,y,a,r,i,Gi,Kn,null,Vn),Ke()),f&&f.p&&(!o||v&17)&&et(f,u,y,y[4],o?Qe(u,y[4],v,bf):tt(y[4]),qn)},i(y){if(!o){for(let v=0;v<a.length;v+=1)Y(s[v]);Y(b,y),o=!0}},o(y){for(let v=0;v<s.length;v+=1)q(s[v]);q(b,y),o=!1},d(y){y&&J(t);for(let v=0;v<s.length;v+=1)s[v].d();b&&b.d(y)}}}function Df(e,t,i){let{$$slots:s={},$$scope:r}=t,{tabs:n}=t,{focus:c}=t;function o(a){i(0,c=a.detail.key)}return e.$$set=a=>{"tabs"in a&&i(1,n=a.tabs),"focus"in a&&i(0,c=a.focus),"$$scope"in a&&i(4,r=a.$$scope)},[c,n,o,s,r]}class Lf extends Fe{constructor(t){super(),He(this,t,Df,Ef,Pe,{tabs:1,focus:0})}}const Rf=e=>({}),Gn=e=>({}),Tf=e=>({}),$n=e=>({}),Af=e=>({}),Jn=e=>({}),Mf=e=>({}),Zn=e=>({});function Of(e){let t,i;return{c(){t=new Di(!1),i=ct(),t.a=i},m(s,r){t.m(e[0],s,r),Z(s,i,r)},p(s,r){r&1&&t.p(s[0])},d(s){s&&(J(i),t.d())}}}function Bf(e){let t,i;return{c(){t=new Di(!1),i=ct(),t.a=i},m(s,r){t.m(e[1],s,r),Z(s,i,r)},p(s,r){r&2&&t.p(s[1])},d(s){s&&(J(i),t.d())}}}function Xn(e){let t,i,s;const r=e[4].input,n=Xe(r,e,e[3],$n);return{c(){t=le("div"),i=he(),n&&n.c(),F(t,"class","fn__hr")},m(c,o){Z(c,t,o),Z(c,i,o),n&&n.m(c,o),s=!0},p(c,o){n&&n.p&&(!s||o&8)&&et(n,r,c,c[3],s?Qe(r,c[3],o,Tf):tt(c[3]),$n)},i(c){s||(Y(n,c),s=!0)},o(c){q(n,c),s=!1},d(c){c&&(J(t),J(i)),n&&n.d(c)}}}function Qn(e){let t,i,s;const r=e[4].input,n=Xe(r,e,e[3],Gn);return{c(){t=le("span"),i=he(),n&&n.c(),F(t,"class","fn__space")},m(c,o){Z(c,t,o),Z(c,i,o),n&&n.m(c,o),s=!0},p(c,o){n&&n.p&&(!s||o&8)&&et(n,r,c,c[3],s?Qe(r,c[3],o,Rf):tt(c[3]),Gn)},i(c){s||(Y(n,c),s=!0)},o(c){q(n,c),s=!1},d(c){c&&(J(t),J(i)),n&&n.d(c)}}}function Pf(e){let t,i,s,r,n,c,o;const a=e[4].title,h=Xe(a,e,e[3],Zn),u=h||Of(e),f=e[4].text,b=Xe(f,e,e[3],Jn),y=b||Bf(e);let v=e[2]&&Xn(e),m=!e[2]&&Qn(e);return{c(){t=le("label"),i=le("div"),u&&u.c(),s=he(),r=le("div"),y&&y.c(),n=he(),v&&v.c(),c=he(),m&&m.c(),F(r,"class","b3-label__text"),F(i,"class","fn__flex-1 svelte-2m76cy"),U(i,"visible",e[2]),F(t,"class","fn__flex b3-label")},m(l,_){Z(l,t,_),ce(t,i),u&&u.m(i,null),ce(i,s),ce(i,r),y&&y.m(r,null),ce(i,n),v&&v.m(i,null),ce(t,c),m&&m.m(t,null),o=!0},p(l,[_]){h?h.p&&(!o||_&8)&&et(h,a,l,l[3],o?Qe(a,l[3],_,Mf):tt(l[3]),Zn):u&&u.p&&(!o||_&1)&&u.p(l,o?_:-1),b?b.p&&(!o||_&8)&&et(b,f,l,l[3],o?Qe(f,l[3],_,Af):tt(l[3]),Jn):y&&y.p&&(!o||_&2)&&y.p(l,o?_:-1),l[2]?v?(v.p(l,_),_&4&&Y(v,1)):(v=Xn(l),v.c(),Y(v,1),v.m(i,null)):v&&(Ve(),q(v,1,1,()=>{v=null}),Ke()),(!o||_&4)&&U(i,"visible",l[2]),l[2]?m&&(Ve(),q(m,1,1,()=>{m=null}),Ke()):m?(m.p(l,_),_&4&&Y(m,1)):(m=Qn(l),m.c(),Y(m,1),m.m(t,null))},i(l){o||(Y(u,l),Y(y,l),Y(v),Y(m),o=!0)},o(l){q(u,l),q(y,l),q(v),q(m),o=!1},d(l){l&&J(t),u&&u.d(l),y&&y.d(l),v&&v.d(),m&&m.d()}}}function If(e,t,i){let{$$slots:s={},$$scope:r}=t,{title:n=""}=t,{text:c=""}=t,{block:o=!1}=t;return e.$$set=a=>{"title"in a&&i(0,n=a.title),"text"in a&&i(1,c=a.text),"block"in a&&i(2,o=a.block),"$$scope"in a&&i(3,r=a.$$scope)},[n,c,o,r,s]}class xe extends Fe{constructor(t){super(),He(this,t,If,Pf,Pe,{title:0,text:1,block:2})}}var Le=(e=>(e[e.checkbox=0]="checkbox",e[e.text=1]="text",e[e.number=2]="number",e[e.slider=3]="slider",e[e.button=4]="button",e[e.select=5]="select",e[e.textarea=6]="textarea",e))(Le||{});function eo(e,t,i){const s=e.slice();return s[19]=t[i],s}function xf(e){let t,i,s;return{c(){t=le("textarea"),t.disabled=e[2],F(t,"class","b3-text-field"),F(t,"placeholder",e[5]),U(t,"fn__block",e[3]),U(t,"fn__size200",!e[3]&&e[4]),dt(t,"height",e[8]>0?`${e[8]}px`:void 0)},m(r,n){Z(r,t,n),st(t,e[0]),i||(s=[ge(t,"input",e[17]),ge(t,"change",e[10])],i=!0)},p(r,n){n&4&&(t.disabled=r[2]),n&32&&F(t,"placeholder",r[5]),n&65&&st(t,r[0]),n&8&&U(t,"fn__block",r[3]),n&24&&U(t,"fn__size200",!r[3]&&r[4]),n&256&&dt(t,"height",r[8]>0?`${r[8]}px`:void 0)},d(r){r&&J(t),i=!1,Ye(s)}}}function Nf(e){let t,i=[],s=new Map,r,n,c=gt(e[6]);const o=a=>a[19].key;for(let a=0;a<c.length;a+=1){let h=eo(e,c,a),u=o(h);s.set(u,i[a]=to(u,h))}return{c(){t=le("select");for(let a=0;a<i.length;a+=1)i[a].c();t.disabled=e[2],F(t,"class","b3-select"),e[0]===void 0&&vs(()=>e[16].call(t)),U(t,"fn__block",e[3]),U(t,"fn__size200",!e[3]&&e[4]),U(t,"fn__flex-center",!e[3])},m(a,h){Z(a,t,h);for(let u=0;u<i.length;u+=1)i[u]&&i[u].m(t,null);On(t,e[0],!0),r||(n=[ge(t,"change",e[16]),ge(t,"change",e[10])],r=!0)},p(a,h){h&64&&(c=gt(a[6]),i=Li(i,h,o,1,a,c,s,t,Vu,to,null,eo)),h&4&&(t.disabled=a[2]),h&65&&On(t,a[0]),h&8&&U(t,"fn__block",a[3]),h&24&&U(t,"fn__size200",!a[3]&&a[4]),h&8&&U(t,"fn__flex-center",!a[3])},d(a){a&&J(t);for(let h=0;h<i.length;h+=1)i[h].d();r=!1,Ye(n)}}}function Hf(e){let t,i,s,r;return{c(){t=le("button"),i=ot(e[0]),t.disabled=e[2],F(t,"class","b3-button b3-button--outline"),U(t,"fn__block",e[3]),U(t,"fn__size200",!e[3]&&e[4]),U(t,"fn__flex-center",!e[3])},m(n,c){Z(n,t,c),ce(t,i),s||(r=ge(t,"click",e[9]),s=!0)},p(n,c){c&1&&Tt(i,n[0]),c&4&&(t.disabled=n[2]),c&8&&U(t,"fn__block",n[3]),c&24&&U(t,"fn__size200",!n[3]&&n[4]),c&8&&U(t,"fn__flex-center",!n[3])},d(n){n&&J(t),s=!1,r()}}}function Ff(e){let t,i,s,r,n,c;return{c(){t=le("input"),t.disabled=e[2],F(t,"class","b3-slider svelte-edt8og"),F(t,"type","range"),F(t,"min",i=e[7].min),F(t,"max",s=e[7].max),F(t,"step",r=e[7].step),U(t,"fn__block",e[3]),U(t,"fn__size200",!e[3]&&e[4])},m(o,a){Z(o,t,a),st(t,e[0]),n||(c=[ge(t,"change",e[15]),ge(t,"input",e[15]),ge(t,"change",e[10])],n=!0)},p(o,a){a&4&&(t.disabled=o[2]),a&128&&i!==(i=o[7].min)&&F(t,"min",i),a&128&&s!==(s=o[7].max)&&F(t,"max",s),a&128&&r!==(r=o[7].step)&&F(t,"step",r),a&65&&st(t,o[0]),a&8&&U(t,"fn__block",o[3]),a&24&&U(t,"fn__size200",!o[3]&&o[4])},d(o){o&&J(t),n=!1,Ye(c)}}}function jf(e){let t,i,s,r,n,c;return{c(){t=le("input"),t.disabled=e[2],F(t,"class","b3-text-field"),F(t,"type","number"),F(t,"placeholder",e[5]),F(t,"min",i=e[7].min),F(t,"max",s=e[7].max),F(t,"step",r=e[7].step),U(t,"fn__block",e[3]),U(t,"fn__size200",!e[3]&&e[4]),U(t,"fn__flex-center",!e[3])},m(o,a){Z(o,t,a),st(t,e[0]),n||(c=[ge(t,"input",e[14]),ge(t,"change",e[10])],n=!0)},p(o,a){a&4&&(t.disabled=o[2]),a&32&&F(t,"placeholder",o[5]),a&128&&i!==(i=o[7].min)&&F(t,"min",i),a&128&&s!==(s=o[7].max)&&F(t,"max",s),a&128&&r!==(r=o[7].step)&&F(t,"step",r),a&65&&wr(t.value)!==o[0]&&st(t,o[0]),a&8&&U(t,"fn__block",o[3]),a&24&&U(t,"fn__size200",!o[3]&&o[4]),a&8&&U(t,"fn__flex-center",!o[3])},d(o){o&&J(t),n=!1,Ye(c)}}}function Uf(e){let t,i,s;return{c(){t=le("input"),t.disabled=e[2],F(t,"class","b3-text-field"),F(t,"placeholder",e[5]),U(t,"fn__block",e[3]),U(t,"fn__size200",!e[3]&&e[4]),U(t,"fn__flex-center",!e[3])},m(r,n){Z(r,t,n),st(t,e[0]),i||(s=[ge(t,"input",e[13]),ge(t,"change",e[10])],i=!0)},p(r,n){n&4&&(t.disabled=r[2]),n&32&&F(t,"placeholder",r[5]),n&65&&t.value!==r[0]&&st(t,r[0]),n&8&&U(t,"fn__block",r[3]),n&24&&U(t,"fn__size200",!r[3]&&r[4]),n&8&&U(t,"fn__flex-center",!r[3])},d(r){r&&J(t),i=!1,Ye(s)}}}function Wf(e){let t,i,s;return{c(){t=le("input"),t.disabled=e[2],F(t,"class","b3-switch svelte-edt8og"),F(t,"type","checkbox"),U(t,"fn__block",e[3]),U(t,"fn__flex-center",!e[3])},m(r,n){Z(r,t,n),t.checked=e[0],i||(s=[ge(t,"change",e[12]),ge(t,"change",e[10])],i=!0)},p(r,n){n&4&&(t.disabled=r[2]),n&65&&(t.checked=r[0]),n&8&&U(t,"fn__block",r[3]),n&8&&U(t,"fn__flex-center",!r[3])},d(r){r&&J(t),i=!1,Ye(s)}}}function to(e,t){let i,s=t[19].text+"",r,n;return{key:e,first:null,c(){i=le("option"),r=ot(s),i.__value=n=t[19].key,st(i,i.__value),this.first=i},m(c,o){Z(c,i,o),ce(i,r)},p(c,o){t=c,o&64&&s!==(s=t[19].text+"")&&Tt(r,s),o&64&&n!==(n=t[19].key)&&(i.__value=n,st(i,i.__value))},d(c){c&&J(i)}}}function Yf(e){let t;function i(n,c){if(n[1]===Le.checkbox)return Wf;if(n[1]===Le.text)return Uf;if(n[1]===Le.number)return jf;if(n[1]===Le.slider)return Ff;if(n[1]===Le.button)return Hf;if(n[1]===Le.select)return Nf;if(n[1]===Le.textarea)return xf}let s=i(e),r=s&&s(e);return{c(){r&&r.c(),t=ct()},m(n,c){r&&r.m(n,c),Z(n,t,c)},p(n,[c]){s===(s=i(n))&&r?r.p(n,c):(r&&r.d(1),r=s&&s(n),r&&(r.c(),r.m(t.parentNode,t)))},i:Te,o:Te,d(n){n&&J(t),r&&r.d(n)}}}function zf(e,t,i){let{type:s}=t,{settingKey:r}=t,{settingValue:n}=t,{disabled:c=!1}=t,{block:o=!1}=t,{normal:a=!0}=t,{placeholder:h=""}=t,{options:u=[]}=t,{limits:f={min:0,max:100,step:1}}=t,{height:b=0}=t;const y=Qt();function v(E){y("clicked",{event:E})}function m(E){y("changed",{key:r,value:n,event:E})}function l(){n=this.checked,i(0,n),i(6,u)}function _(){n=this.value,i(0,n),i(6,u)}function p(){n=wr(this.value),i(0,n),i(6,u)}function d(){n=wr(this.value),i(0,n),i(6,u)}function g(){n=Hu(this),i(0,n),i(6,u)}function w(){n=this.value,i(0,n),i(6,u)}return e.$$set=E=>{"type"in E&&i(1,s=E.type),"settingKey"in E&&i(11,r=E.settingKey),"settingValue"in E&&i(0,n=E.settingValue),"disabled"in E&&i(2,c=E.disabled),"block"in E&&i(3,o=E.block),"normal"in E&&i(4,a=E.normal),"placeholder"in E&&i(5,h=E.placeholder),"options"in E&&i(6,u=E.options),"limits"in E&&i(7,f=E.limits),"height"in E&&i(8,b=E.height)},[n,s,c,o,a,h,u,f,b,v,m,r,l,_,p,d,g,w]}class je extends Fe{constructor(t){super(),He(this,t,zf,Yf,Pe,{type:1,settingKey:11,settingValue:0,disabled:2,block:3,normal:4,placeholder:5,options:6,limits:7,height:8})}}const Bs={baseUrl:"http://localhost:8888/",appUrl:"/lab",wsUrl:"",token:""};function qf(e){return e=e||Bs.baseUrl,`ws${e.slice(4)}`}function Vf(e){let t,i;return t=new je({props:{slot:"input",type:Le.button,settingKey:"Reset",settingValue:e[2].settings.generalSettings.reset.text}}),t.$on("clicked",e[4]),{c(){ne(t.$$.fragment)},m(s,r){ie(t,s,r),i=!0},p:Te,i(s){i||(Y(t.$$.fragment,s),i=!0)},o(s){q(t.$$.fragment,s),i=!1},d(s){se(t,s)}}}function Kf(e){let t,i;return t=new xe({props:{title:e[2].settings.generalSettings.reset.title,text:e[2].settings.generalSettings.reset.description,$$slots:{input:[Vf]},$$scope:{ctx:e}}}),{c(){ne(t.$$.fragment)},m(s,r){ie(t,s,r),i=!0},p(s,r){const n={};r&134217728&&(n.$$scope={dirty:r,ctx:s}),t.$set(n)},i(s){i||(Y(t.$$.fragment,s),i=!0)},o(s){q(t.$$.fragment,s),i=!1},d(s){se(t,s)}}}function Gf(e){let t,i;return t=new je({props:{slot:"input",type:Le.checkbox,settingKey:"enable",settingValue:e[0].jupyter.server.enable}}),t.$on("changed",e[8]),{c(){ne(t.$$.fragment)},m(s,r){ie(t,s,r),i=!0},p(s,r){const n={};r&1&&(n.settingValue=s[0].jupyter.server.enable),t.$set(n)},i(s){i||(Y(t.$$.fragment,s),i=!0)},o(s){q(t.$$.fragment,s),i=!1},d(s){se(t,s)}}}function $f(e){let t,i;return t=new je({props:{slot:"input",type:Le.text,settingKey:"baseUrl",settingValue:e[0].jupyter.server.settings.baseUrl,placeholder:Bs.baseUrl,block:!0}}),t.$on("changed",e[9]),{c(){ne(t.$$.fragment)},m(s,r){ie(t,s,r),i=!0},p(s,r){const n={};r&1&&(n.settingValue=s[0].jupyter.server.settings.baseUrl),t.$set(n)},i(s){i||(Y(t.$$.fragment,s),i=!0)},o(s){q(t.$$.fragment,s),i=!1},d(s){se(t,s)}}}function Jf(e){let t,i;return t=new je({props:{slot:"input",type:Le.text,settingKey:"appUrl",settingValue:e[0].jupyter.server.settings.appUrl,placeholder:Bs.appUrl,block:!0}}),t.$on("changed",e[10]),{c(){ne(t.$$.fragment)},m(s,r){ie(t,s,r),i=!0},p(s,r){const n={};r&1&&(n.settingValue=s[0].jupyter.server.settings.appUrl),t.$set(n)},i(s){i||(Y(t.$$.fragment,s),i=!0)},o(s){q(t.$$.fragment,s),i=!1},d(s){se(t,s)}}}function Zf(e){let t,i;return t=new je({props:{slot:"input",type:Le.text,settingKey:"wsUrl",settingValue:e[0].jupyter.server.settings.wsUrl,placeholder:e[1],block:!0}}),t.$on("changed",e[11]),{c(){ne(t.$$.fragment)},m(s,r){ie(t,s,r),i=!0},p(s,r){const n={};r&1&&(n.settingValue=s[0].jupyter.server.settings.wsUrl),r&2&&(n.placeholder=s[1]),t.$set(n)},i(s){i||(Y(t.$$.fragment,s),i=!0)},o(s){q(t.$$.fragment,s),i=!1},d(s){se(t,s)}}}function Xf(e){let t,i;return t=new je({props:{slot:"input",type:Le.text,settingKey:"token",settingValue:e[0].jupyter.server.settings.token,block:!0}}),t.$on("changed",e[12]),{c(){ne(t.$$.fragment)},m(s,r){ie(t,s,r),i=!0},p(s,r){const n={};r&1&&(n.settingValue=s[0].jupyter.server.settings.token),t.$set(n)},i(s){i||(Y(t.$$.fragment,s),i=!0)},o(s){q(t.$$.fragment,s),i=!1},d(s){se(t,s)}}}function Qf(e){let t,i;return t=new je({props:{slot:"input",type:Le.checkbox,settingKey:"goto",settingValue:e[0].jupyter.execute.goto}}),t.$on("changed",e[13]),{c(){ne(t.$$.fragment)},m(s,r){ie(t,s,r),i=!0},p(s,r){const n={};r&1&&(n.settingValue=s[0].jupyter.execute.goto),t.$set(n)},i(s){i||(Y(t.$$.fragment,s),i=!0)},o(s){q(t.$$.fragment,s),i=!1},d(s){se(t,s)}}}function ed(e){let t,i;return t=new je({props:{slot:"input",type:Le.checkbox,settingKey:"input.goto",settingValue:e[0].jupyter.execute.input.goto}}),t.$on("changed",e[14]),{c(){ne(t.$$.fragment)},m(s,r){ie(t,s,r),i=!0},p(s,r){const n={};r&1&&(n.settingValue=s[0].jupyter.execute.input.goto),t.$set(n)},i(s){i||(Y(t.$$.fragment,s),i=!0)},o(s){q(t.$$.fragment,s),i=!1},d(s){se(t,s)}}}function td(e){let t,i;return t=new je({props:{slot:"input",type:Le.checkbox,settingKey:"content.stop_on_error",settingValue:e[0].jupyter.execute.content.stop_on_error}}),t.$on("changed",e[15]),{c(){ne(t.$$.fragment)},m(s,r){ie(t,s,r),i=!0},p(s,r){const n={};r&1&&(n.settingValue=s[0].jupyter.execute.content.stop_on_error),t.$set(n)},i(s){i||(Y(t.$$.fragment,s),i=!0)},o(s){q(t.$$.fragment,s),i=!1},d(s){se(t,s)}}}function id(e){let t,i;return t=new je({props:{slot:"input",type:Le.checkbox,settingKey:"output.parser.xterm",settingValue:e[0].jupyter.execute.output.parser.xterm}}),t.$on("changed",e[16]),{c(){ne(t.$$.fragment)},m(s,r){ie(t,s,r),i=!0},p(s,r){const n={};r&1&&(n.settingValue=s[0].jupyter.execute.output.parser.xterm),t.$set(n)},i(s){i||(Y(t.$$.fragment,s),i=!0)},o(s){q(t.$$.fragment,s),i=!1},d(s){se(t,s)}}}function sd(e){let t,i;return t=new je({props:{slot:"input",type:Le.checkbox,settingKey:"output.parser.escaped",settingValue:e[0].jupyter.execute.output.parser.escaped}}),t.$on("changed",e[17]),{c(){ne(t.$$.fragment)},m(s,r){ie(t,s,r),i=!0},p(s,r){const n={};r&1&&(n.settingValue=s[0].jupyter.execute.output.parser.escaped),t.$set(n)},i(s){i||(Y(t.$$.fragment,s),i=!0)},o(s){q(t.$$.fragment,s),i=!1},d(s){se(t,s)}}}function rd(e){let t,i;return t=new je({props:{slot:"input",type:Le.checkbox,settingKey:"output.parser.cntrl",settingValue:e[0].jupyter.execute.output.parser.cntrl}}),t.$on("changed",e[18]),{c(){ne(t.$$.fragment)},m(s,r){ie(t,s,r),i=!0},p(s,r){const n={};r&1&&(n.settingValue=s[0].jupyter.execute.output.parser.cntrl),t.$set(n)},i(s){i||(Y(t.$$.fragment,s),i=!0)},o(s){q(t.$$.fragment,s),i=!1},d(s){se(t,s)}}}function nd(e){let t,i;return t=new je({props:{slot:"input",type:Le.checkbox,settingKey:"import.parser.xterm",settingValue:e[0].jupyter.import.parser.xterm}}),t.$on("changed",e[19]),{c(){ne(t.$$.fragment)},m(s,r){ie(t,s,r),i=!0},p(s,r){const n={};r&1&&(n.settingValue=s[0].jupyter.import.parser.xterm),t.$set(n)},i(s){i||(Y(t.$$.fragment,s),i=!0)},o(s){q(t.$$.fragment,s),i=!1},d(s){se(t,s)}}}function od(e){let t,i;return t=new je({props:{slot:"input",type:Le.checkbox,settingKey:"import.parser.escaped",settingValue:e[0].jupyter.import.parser.escaped}}),t.$on("changed",e[20]),{c(){ne(t.$$.fragment)},m(s,r){ie(t,s,r),i=!0},p(s,r){const n={};r&1&&(n.settingValue=s[0].jupyter.import.parser.escaped),t.$set(n)},i(s){i||(Y(t.$$.fragment,s),i=!0)},o(s){q(t.$$.fragment,s),i=!1},d(s){se(t,s)}}}function ad(e){let t,i;return t=new je({props:{slot:"input",type:Le.checkbox,settingKey:"import.parser.cntrl",settingValue:e[0].jupyter.import.parser.cntrl}}),t.$on("changed",e[21]),{c(){ne(t.$$.fragment)},m(s,r){ie(t,s,r),i=!0},p(s,r){const n={};r&1&&(n.settingValue=s[0].jupyter.import.parser.cntrl),t.$set(n)},i(s){i||(Y(t.$$.fragment,s),i=!0)},o(s){q(t.$$.fragment,s),i=!1},d(s){se(t,s)}}}function ld(e){let t,i,s,r,n,c,o,a,h,u,f,b,y,v,m,l,_,p,d,g,w,E,C,S,k,D,O,A,T,B,G,V,L;return i=new xe({props:{title:e[2].settings.jupyterSettings.globalTab.enable.title,text:e[2].settings.jupyterSettings.globalTab.enable.description,$$slots:{input:[Gf]},$$scope:{ctx:e}}}),n=new xe({props:{title:e[2].settings.jupyterSettings.serviceTab.baseUrl.title,text:e[2].settings.jupyterSettings.serviceTab.baseUrl.description,block:!0,$$slots:{input:[$f]},$$scope:{ctx:e}}}),o=new xe({props:{title:e[2].settings.jupyterSettings.serviceTab.appUrl.title,text:e[2].settings.jupyterSettings.serviceTab.appUrl.description,block:!0,$$slots:{input:[Jf]},$$scope:{ctx:e}}}),h=new xe({props:{title:e[2].settings.jupyterSettings.serviceTab.wsUrl.title,text:e[2].settings.jupyterSettings.serviceTab.wsUrl.description,block:!0,$$slots:{input:[Zf]},$$scope:{ctx:e}}}),f=new xe({props:{title:e[2].settings.jupyterSettings.serviceTab.token.title,text:e[2].settings.jupyterSettings.serviceTab.token.description,block:!0,$$slots:{input:[Xf]},$$scope:{ctx:e}}}),v=new xe({props:{title:e[2].settings.jupyterSettings.executeTab.executeGoto.title,text:e[2].settings.jupyterSettings.executeTab.executeGoto.description,$$slots:{input:[Qf]},$$scope:{ctx:e}}}),l=new xe({props:{title:e[2].settings.jupyterSettings.executeTab.inputGoto.title,text:e[2].settings.jupyterSettings.executeTab.inputGoto.description,$$slots:{input:[ed]},$$scope:{ctx:e}}}),p=new xe({props:{title:e[2].settings.jupyterSettings.executeTab.stopOnError.title,text:e[2].settings.jupyterSettings.executeTab.stopOnError.description,$$slots:{input:[td]},$$scope:{ctx:e}}}),w=new xe({props:{title:e[2].settings.jupyterSettings.outputTab.xterm.title,text:e[2].settings.jupyterSettings.outputTab.xterm.description,$$slots:{input:[id]},$$scope:{ctx:e}}}),C=new xe({props:{title:e[2].settings.jupyterSettings.outputTab.escaped.title,text:e[2].settings.jupyterSettings.outputTab.escaped.description,$$slots:{input:[sd]},$$scope:{ctx:e}}}),k=new xe({props:{title:e[2].settings.jupyterSettings.outputTab.cntrl.title,text:e[2].settings.jupyterSettings.outputTab.cntrl.description,$$slots:{input:[rd]},$$scope:{ctx:e}}}),A=new xe({props:{title:e[2].settings.jupyterSettings.importTab.xterm.title,text:e[2].settings.jupyterSettings.importTab.xterm.description,$$slots:{input:[nd]},$$scope:{ctx:e}}}),B=new xe({props:{title:e[2].settings.jupyterSettings.importTab.escaped.title,text:e[2].settings.jupyterSettings.importTab.escaped.description,$$slots:{input:[od]},$$scope:{ctx:e}}}),V=new xe({props:{title:e[2].settings.jupyterSettings.importTab.cntrl.title,text:e[2].settings.jupyterSettings.importTab.cntrl.description,$$slots:{input:[ad]},$$scope:{ctx:e}}}),{c(){t=le("div"),ne(i.$$.fragment),s=he(),r=le("div"),ne(n.$$.fragment),c=he(),ne(o.$$.fragment),a=he(),ne(h.$$.fragment),u=he(),ne(f.$$.fragment),b=he(),y=le("div"),ne(v.$$.fragment),m=he(),ne(l.$$.fragment),_=he(),ne(p.$$.fragment),d=he(),g=le("div"),ne(w.$$.fragment),E=he(),ne(C.$$.fragment),S=he(),ne(k.$$.fragment),D=he(),O=le("div"),ne(A.$$.fragment),T=he(),ne(B.$$.fragment),G=he(),ne(V.$$.fragment),F(t,"data-type",e[6].jupyter[0].name),U(t,"fn__none",e[6].jupyter[0].key!==e[26]),F(r,"data-type",e[6].jupyter[1].name),U(r,"fn__none",e[6].jupyter[1].key!==e[26]),F(y,"data-type",e[6].jupyter[2].name),U(y,"fn__none",e[6].jupyter[2].key!==e[26]),F(g,"data-type",e[6].jupyter[3].name),U(g,"fn__none",e[6].jupyter[3].key!==e[26]),F(O,"data-type",e[6].jupyter[4].name),U(O,"fn__none",e[6].jupyter[4].key!==e[26])},m(R,M){Z(R,t,M),ie(i,t,null),Z(R,s,M),Z(R,r,M),ie(n,r,null),ce(r,c),ie(o,r,null),ce(r,a),ie(h,r,null),ce(r,u),ie(f,r,null),Z(R,b,M),Z(R,y,M),ie(v,y,null),ce(y,m),ie(l,y,null),ce(y,_),ie(p,y,null),Z(R,d,M),Z(R,g,M),ie(w,g,null),ce(g,E),ie(C,g,null),ce(g,S),ie(k,g,null),Z(R,D,M),Z(R,O,M),ie(A,O,null),ce(O,T),ie(B,O,null),ce(O,G),ie(V,O,null),L=!0},p(R,M){const P={};M&134217729&&(P.$$scope={dirty:M,ctx:R}),i.$set(P),(!L||M&67108928)&&U(t,"fn__none",R[6].jupyter[0].key!==R[26]);const z={};M&134217729&&(z.$$scope={dirty:M,ctx:R}),n.$set(z);const j={};M&134217729&&(j.$$scope={dirty:M,ctx:R}),o.$set(j);const de={};M&134217731&&(de.$$scope={dirty:M,ctx:R}),h.$set(de);const X={};M&134217729&&(X.$$scope={dirty:M,ctx:R}),f.$set(X),(!L||M&67108928)&&U(r,"fn__none",R[6].jupyter[1].key!==R[26]);const ae={};M&134217729&&(ae.$$scope={dirty:M,ctx:R}),v.$set(ae);const I={};M&134217729&&(I.$$scope={dirty:M,ctx:R}),l.$set(I);const x={};M&134217729&&(x.$$scope={dirty:M,ctx:R}),p.$set(x),(!L||M&67108928)&&U(y,"fn__none",R[6].jupyter[2].key!==R[26]);const H={};M&134217729&&(H.$$scope={dirty:M,ctx:R}),w.$set(H);const $={};M&134217729&&($.$$scope={dirty:M,ctx:R}),C.$set($);const ee={};M&134217729&&(ee.$$scope={dirty:M,ctx:R}),k.$set(ee),(!L||M&67108928)&&U(g,"fn__none",R[6].jupyter[3].key!==R[26]);const Se={};M&134217729&&(Se.$$scope={dirty:M,ctx:R}),A.$set(Se);const te={};M&134217729&&(te.$$scope={dirty:M,ctx:R}),B.$set(te);const Ae={};M&134217729&&(Ae.$$scope={dirty:M,ctx:R}),V.$set(Ae),(!L||M&67108928)&&U(O,"fn__none",R[6].jupyter[4].key!==R[26])},i(R){L||(Y(i.$$.fragment,R),Y(n.$$.fragment,R),Y(o.$$.fragment,R),Y(h.$$.fragment,R),Y(f.$$.fragment,R),Y(v.$$.fragment,R),Y(l.$$.fragment,R),Y(p.$$.fragment,R),Y(w.$$.fragment,R),Y(C.$$.fragment,R),Y(k.$$.fragment,R),Y(A.$$.fragment,R),Y(B.$$.fragment,R),Y(V.$$.fragment,R),L=!0)},o(R){q(i.$$.fragment,R),q(n.$$.fragment,R),q(o.$$.fragment,R),q(h.$$.fragment,R),q(f.$$.fragment,R),q(v.$$.fragment,R),q(l.$$.fragment,R),q(p.$$.fragment,R),q(w.$$.fragment,R),q(C.$$.fragment,R),q(k.$$.fragment,R),q(A.$$.fragment,R),q(B.$$.fragment,R),q(V.$$.fragment,R),L=!1},d(R){R&&(J(t),J(s),J(r),J(b),J(y),J(d),J(g),J(D),J(O)),se(i),se(n),se(o),se(h),se(f),se(v),se(l),se(p),se(w),se(C),se(k),se(A),se(B),se(V)}}}function cd(e){let t,i;return t=new Lf({props:{focus:pd,tabs:e[6].jupyter,$$slots:{default:[ld,({focus:s})=>({26:s}),({focus:s})=>s?67108864:0]},$$scope:{ctx:e}}}),{c(){ne(t.$$.fragment)},m(s,r){ie(t,s,r),i=!0},p(s,r){const n={};r&201326595&&(n.$$scope={dirty:r,ctx:s}),t.$set(n)},i(s){i||(Y(t.$$.fragment,s),i=!0)},o(s){q(t.$$.fragment,s),i=!1},d(s){se(t,s)}}}function hd(e){let t,i;return t=new je({props:{slot:"input",type:Le.text,settingKey:"fontFamily",settingValue:e[0].xterm.options.fontFamily}}),t.$on("changed",e[22]),{c(){ne(t.$$.fragment)},m(s,r){ie(t,s,r),i=!0},p(s,r){const n={};r&1&&(n.settingValue=s[0].xterm.options.fontFamily),t.$set(n)},i(s){i||(Y(t.$$.fragment,s),i=!0)},o(s){q(t.$$.fragment,s),i=!1},d(s){se(t,s)}}}function ud(e){let t,i;return t=new xe({props:{title:e[2].settings.xtermSettings.fontFamily.title,text:e[2].settings.xtermSettings.fontFamily.description,$$slots:{input:[hd]},$$scope:{ctx:e}}}),{c(){ne(t.$$.fragment)},m(s,r){ie(t,s,r),i=!0},p(s,r){const n={};r&134217729&&(n.$$scope={dirty:r,ctx:s}),t.$set(n)},i(s){i||(Y(t.$$.fragment,s),i=!0)},o(s){q(t.$$.fragment,s),i=!1},d(s){se(t,s)}}}function fd(e){let t,i,s,r,n,c;return t=new ds({props:{display:e[5][0].key===e[25],$$slots:{default:[Kf]},$$scope:{ctx:e}}}),s=new ds({props:{display:e[5][1].key===e[25],$$slots:{default:[cd]},$$scope:{ctx:e}}}),n=new ds({props:{display:e[5][2].key===e[25],$$slots:{default:[ud]},$$scope:{ctx:e}}}),{c(){ne(t.$$.fragment),i=he(),ne(s.$$.fragment),r=he(),ne(n.$$.fragment)},m(o,a){ie(t,o,a),Z(o,i,a),ie(s,o,a),Z(o,r,a),ie(n,o,a),c=!0},p(o,a){const h={};a&33554432&&(h.display=o[5][0].key===o[25]),a&134217728&&(h.$$scope={dirty:a,ctx:o}),t.$set(h);const u={};a&33554432&&(u.display=o[5][1].key===o[25]),a&134217731&&(u.$$scope={dirty:a,ctx:o}),s.$set(u);const f={};a&33554432&&(f.display=o[5][2].key===o[25]),a&134217729&&(f.$$scope={dirty:a,ctx:o}),n.$set(f)},i(o){c||(Y(t.$$.fragment,o),Y(s.$$.fragment,o),Y(n.$$.fragment,o),c=!0)},o(o){q(t.$$.fragment,o),q(s.$$.fragment,o),q(n.$$.fragment,o),c=!1},d(o){o&&(J(i),J(r)),se(t,o),se(s,o),se(n,o)}}}function dd(e){let t,i;return t=new hf({props:{panels:e[5],focus:_d,$$slots:{default:[fd,({focus:s})=>({25:s}),({focus:s})=>s?33554432:0]},$$scope:{ctx:e}}}),{c(){ne(t.$$.fragment)},m(s,r){ie(t,s,r),i=!0},p(s,[r]){const n={};r&167772163&&(n.$$scope={dirty:r,ctx:s}),t.$set(n)},i(s){i||(Y(t.$$.fragment,s),i=!0)},o(s){q(t.$$.fragment,s),i=!1},d(s){se(t,s)}}}let _d=0,pd=0;function md(e,t,i){let s,{config:r}=t,{plugin:n}=t;const c=n.i18n;async function o(D=!1){await n.updateConfig(r,D)}function a(){n.siyuan.confirm(c.settings.generalSettings.reset.title,c.settings.generalSettings.reset.description,async()=>{await n.resetConfig(),globalThis.location.reload()})}const h=[{key:0,text:c.settings.generalSettings.title,name:c.settings.generalSettings.title,icon:"#iconSettings"},{key:1,text:c.settings.jupyterSettings.title,name:c.settings.jupyterSettings.title,icon:"#icon-jupyter-client"},{key:2,text:c.settings.xtermSettings.title,name:c.settings.xtermSettings.title,icon:"#icon-jupyter-client-terminal"}],u={jupyter:[{key:0,text:c.settings.jupyterSettings.globalTab.title,name:c.settings.jupyterSettings.globalTab.title,icon:"⚙"},{key:1,text:c.settings.jupyterSettings.serviceTab.title,name:c.settings.jupyterSettings.serviceTab.title,icon:"🌐"},{key:2,text:c.settings.jupyterSettings.executeTab.title,name:c.settings.jupyterSettings.executeTab.title,icon:"▶"},{key:3,text:c.settings.jupyterSettings.outputTab.title,name:c.settings.jupyterSettings.outputTab.title,icon:"🖨️"},{key:4,text:c.settings.jupyterSettings.importTab.title,name:c.settings.jupyterSettings.importTab.title,icon:"📤︎"}]},f=async D=>{i(0,r.jupyter.server.enable=D.detail.value,r),await o(!0)},b=async D=>{i(0,r.jupyter.server.settings.baseUrl=D.detail.value,r),await o(!0)},y=async D=>{i(0,r.jupyter.server.settings.appUrl=D.detail.value,r),await o(!0)},v=async D=>{i(0,r.jupyter.server.settings.wsUrl=D.detail.value,r),await o(!0)},m=async D=>{i(0,r.jupyter.server.settings.token=D.detail.value,r),await o(!0)},l=async D=>{i(0,r.jupyter.execute.goto=D.detail.value,r),await o()},_=async D=>{i(0,r.jupyter.execute.input.goto=D.detail.value,r),await o()},p=async D=>{i(0,r.jupyter.execute.content.stop_on_error=D.detail.value,r),await o()},d=async D=>{i(0,r.jupyter.execute.output.parser.xterm=D.detail.value,r),await o()},g=async D=>{i(0,r.jupyter.execute.output.parser.escaped=D.detail.value,r),await o()},w=async D=>{i(0,r.jupyter.execute.output.parser.cntrl=D.detail.value,r),await o()},E=async D=>{i(0,r.jupyter.import.parser.xterm=D.detail.value,r),await o()},C=async D=>{i(0,r.jupyter.import.parser.escaped=D.detail.value,r),await o()},S=async D=>{i(0,r.jupyter.import.parser.cntrl=D.detail.value,r),await o()},k=async D=>{i(0,r.xterm.options.fontFamily=D.detail.value,r),await o()};return e.$$set=D=>{"config"in D&&i(0,r=D.config),"plugin"in D&&i(7,n=D.plugin)},e.$$.update=()=>{e.$$.dirty&1&&i(1,s=qf(r.jupyter.server.settings.baseUrl))},[r,s,c,o,a,h,u,n,f,b,y,v,m,l,_,p,d,g,w,E,C,S,k]}class gd extends Fe{constructor(t){super(),He(this,t,md,dd,Pe,{config:0,plugin:7})}}const ci=[];function ve(e,t=Te){let i;const s=new Set;function r(o){if(Pe(e,o)&&(e=o,i)){const a=!ci.length;for(const h of s)h[1](),ci.push(h,e);if(a){for(let h=0;h<ci.length;h+=2)ci[h][0](ci[h+1]);ci.length=0}}}function n(o){r(o(e))}function c(o,a=Te){const h=[o,a];return s.add(h),s.size===1&&(i=t(r,n)||Te),o(e),()=>{s.delete(h),s.size===0&&i&&(i(),i=null)}}return{set:r,update:n,subscribe:c}}function io(e){let t,i;return t=new kt({props:{icon:e[0]}}),{c(){ne(t.$$.fragment)},m(s,r){ie(t,s,r),i=!0},p(s,r){const n={};r&1&&(n.icon=s[0]),t.$set(n)},i(s){i||(Y(t.$$.fragment,s),i=!0)},o(s){q(t.$$.fragment,s),i=!1},d(s){se(t,s)}}}function so(e){let t;return{c(){t=ot(e[1])},m(i,s){Z(i,t,s)},p(i,s){s&2&&Tt(t,i[1])},d(i){i&&J(t)}}}function vd(e){let t,i,s,r=e[0]&&io(e),n=e[1]&&so(e);return{c(){t=le("div"),r&&r.c(),i=he(),n&&n.c(),F(t,"class","block__logo")},m(c,o){Z(c,t,o),r&&r.m(t,null),ce(t,i),n&&n.m(t,null),s=!0},p(c,[o]){c[0]?r?(r.p(c,o),o&1&&Y(r,1)):(r=io(c),r.c(),Y(r,1),r.m(t,i)):r&&(Ve(),q(r,1,1,()=>{r=null}),Ke()),c[1]?n?n.p(c,o):(n=so(c),n.c(),n.m(t,null)):n&&(n.d(1),n=null)},i(c){s||(Y(r),s=!0)},o(c){q(r),s=!1},d(c){c&&J(t),r&&r.d(),n&&n.d()}}}function bd(e,t,i){let{icon:s=""}=t,{title:r=""}=t;return e.$$set=n=>{"icon"in n&&i(0,s=n.icon),"title"in n&&i(1,r=n.title)},[s,r]}class yd extends Fe{constructor(t){super(),He(this,t,bd,vd,Pe,{icon:0,title:1})}}var wi=(e=>(e.none="",e.n="b3-tooltips__n",e.ne="b3-tooltips__ne",e.e="b3-tooltips__e",e.se="b3-tooltips__se",e.s="b3-tooltips__s",e.sw="b3-tooltips__sw",e.w="b3-tooltips__w",e.nw="b3-tooltips__nw",e))(wi||{});function sr(e){let t,i,s,r,n,c;i=new kt({props:{icon:e[0]}});let o=[{role:"button"},{"data-type":e[5]},{"aria-label":e[6]},{class:s="block__icon fn__flex-center "+e[7]}],a={};for(let h=0;h<o.length;h+=1)a=Ei(a,o[h]);return{c(){t=le(e[8]),ne(i.$$.fragment),Mn(e[8])(t,a),U(t,"fn__none",e[2]),U(t,"block__icon--show",e[1]),U(t,"toolbar__item--active",e[3]),U(t,"toolbar__item--disabled",e[4]),U(t,"b3-tooltips",e[7]!==wi.none)},m(h,u){Z(h,t,u),ie(i,t,null),e[14](t),r=!0,n||(c=[ge(t,"click",e[12]),ge(t,"dblclick",e[13]),ge(t,"click",e[15])],n=!0)},p(h,u){const f={};u&1&&(f.icon=h[0]),i.$set(f),Mn(h[8])(t,a=$i(o,[{role:"button"},(!r||u&32)&&{"data-type":h[5]},(!r||u&64)&&{"aria-label":h[6]},(!r||u&128&&s!==(s="block__icon fn__flex-center "+h[7]))&&{class:s}])),U(t,"fn__none",h[2]),U(t,"block__icon--show",h[1]),U(t,"toolbar__item--active",h[3]),U(t,"toolbar__item--disabled",h[4]),U(t,"b3-tooltips",h[7]!==wi.none)},i(h){r||(Y(i.$$.fragment,h),r=!0)},o(h){q(i.$$.fragment,h),r=!1},d(h){h&&J(t),se(i),e[14](null),n=!1,Ye(c)}}}function Sd(e){let t=e[8],i,s=e[8]&&sr(e);return{c(){s&&s.c(),i=ct()},m(r,n){s&&s.m(r,n),Z(r,i,n)},p(r,[n]){r[8]?t?Pe(t,r[8])?(s.d(1),s=sr(r),t=r[8],s.c(),s.m(i.parentNode,i)):s.p(r,n):(s=sr(r),t=r[8],s.c(),s.m(i.parentNode,i)):t&&(s.d(1),s=null,t=r[8])},i:Te,o(r){q(s,r)},d(r){r&&J(i),s&&s.d(r)}}}function wd(e,t,i){let{icon:s="#iconHelp"}=t,{tag:r="button"}=t,{show:n=!0}=t,{none:c=!1}=t,{active:o=!1}=t,{disabled:a=!1}=t,{type:h=""}=t,{ariaLabel:u=""}=t,{tooltipsDirection:f=wi.none}=t,{onClick:b=()=>null}=t,y;const v={icon:ve(s),show:ve(n),none:ve(c),active:ve(o),disabled:ve(a),type:ve(h),ariaLabel:ve(u),tooltipsDirection:ve(f)},m=[v.icon.subscribe(g=>i(0,s=g)),v.show.subscribe(g=>i(1,n=g)),v.none.subscribe(g=>i(2,c=g)),v.active.subscribe(g=>i(3,o=g)),v.disabled.subscribe(g=>i(4,a=g)),v.type.subscribe(g=>i(5,h=g)),v.ariaLabel.subscribe(g=>i(6,u=g)),v.tooltipsDirection.subscribe(g=>i(7,f=g))];jr(()=>{m.forEach(g=>g())});function l(g){Ce.call(this,e,g)}function _(g){Ce.call(this,e,g)}function p(g){Wt[g?"unshift":"push"](()=>{y=g,i(10,y)})}const d=g=>b(g,y,v);return e.$$set=g=>{"icon"in g&&i(0,s=g.icon),"tag"in g&&i(8,r=g.tag),"show"in g&&i(1,n=g.show),"none"in g&&i(2,c=g.none),"active"in g&&i(3,o=g.active),"disabled"in g&&i(4,a=g.disabled),"type"in g&&i(5,h=g.type),"ariaLabel"in g&&i(6,u=g.ariaLabel),"tooltipsDirection"in g&&i(7,f=g.tooltipsDirection),"onClick"in g&&i(9,b=g.onClick)},e.$$.update=()=>{e.$$.dirty&1&&v.icon.set(s),e.$$.dirty&2&&v.show.set(n),e.$$.dirty&4&&v.none.set(c),e.$$.dirty&8&&v.active.set(o),e.$$.dirty&16&&v.disabled.set(a),e.$$.dirty&32&&v.type.set(h),e.$$.dirty&64&&v.ariaLabel.set(u),e.$$.dirty&128&&v.tooltipsDirection.set(f)},[s,n,c,o,a,h,u,f,r,b,y,v,l,_,p,d]}class Cd extends Fe{constructor(t){super(),He(this,t,wd,Sd,Pe,{icon:0,tag:8,show:1,none:2,active:3,disabled:4,type:5,ariaLabel:6,tooltipsDirection:7,onClick:9})}}function ro(e,t,i){const s=e.slice();return s[5]=t[i],s[7]=i,s}const kd=e=>({icon:e&4}),no=e=>({icon:e[5]}),Ed=e=>({}),oo=e=>({});function ao(e){let t,i;return t=new yd({props:{icon:e[0],title:e[1]}}),{c(){ne(t.$$.fragment)},m(s,r){ie(t,s,r),i=!0},p(s,r){const n={};r&1&&(n.icon=s[0]),r&2&&(n.title=s[1]),t.$set(n)},i(s){i||(Y(t.$$.fragment,s),i=!0)},o(s){q(t.$$.fragment,s),i=!1},d(s){se(t,s)}}}function Dd(e){let t,i,s=(e[0]||e[1])&&ao(e);return{c(){s&&s.c(),t=ct()},m(r,n){s&&s.m(r,n),Z(r,t,n),i=!0},p(r,n){r[0]||r[1]?s?(s.p(r,n),n&3&&Y(s,1)):(s=ao(r),s.c(),Y(s,1),s.m(t.parentNode,t)):s&&(Ve(),q(s,1,1,()=>{s=null}),Ke())},i(r){i||(Y(s),i=!0)},o(r){q(s),i=!1},d(r){r&&J(t),s&&s.d(r)}}}function Ld(e){let t,i,s;const r=[e[5]];let n={};for(let c=0;c<r.length;c+=1)n=Ei(n,r[c]);return t=new Cd({props:n}),{c(){ne(t.$$.fragment),i=he()},m(c,o){ie(t,c,o),Z(c,i,o),s=!0},p(c,o){const a=o&4?$i(r,[Os(c[5])]):{};t.$set(a)},i(c){s||(Y(t.$$.fragment,c),s=!0)},o(c){q(t.$$.fragment,c),s=!1},d(c){c&&J(i),se(t,c)}}}function lo(e,t){let i,s,r;const n=t[4].icon,c=Xe(n,t,t[3],no),o=c||Ld(t);return{key:e,first:null,c(){i=le("span"),s=he(),o&&o.c(),F(i,"class","fn__space"),U(i,"fn__flex-1",t[7]===0),this.first=i},m(a,h){Z(a,i,h),Z(a,s,h),o&&o.m(a,h),r=!0},p(a,h){t=a,(!r||h&4)&&U(i,"fn__flex-1",t[7]===0),c?c.p&&(!r||h&12)&&et(c,n,t,t[3],r?Qe(n,t[3],h,kd):tt(t[3]),no):o&&o.p&&(!r||h&4)&&o.p(t,r?h:-1)},i(a){r||(Y(o,a),r=!0)},o(a){q(o,a),r=!1},d(a){a&&(J(i),J(s)),o&&o.d(a)}}}function Rd(e){let t,i,s=[],r=new Map,n;const c=e[4].logo,o=Xe(c,e,e[3],oo),a=o||Dd(e);let h=gt(e[2]);const u=f=>f[7];for(let f=0;f<h.length;f+=1){let b=ro(e,h,f),y=u(b);r.set(y,s[f]=lo(y,b))}return{c(){t=le("div"),a&&a.c(),i=he();for(let f=0;f<s.length;f+=1)s[f].c();F(t,"class","block__icons")},m(f,b){Z(f,t,b),a&&a.m(t,null),ce(t,i);for(let y=0;y<s.length;y+=1)s[y]&&s[y].m(t,null);n=!0},p(f,[b]){o?o.p&&(!n||b&8)&&et(o,c,f,f[3],n?Qe(c,f[3],b,Ed):tt(f[3]),oo):a&&a.p&&(!n||b&3)&&a.p(f,n?b:-1),b&12&&(h=gt(f[2]),Ve(),s=Li(s,b,u,1,f,h,r,t,Gi,lo,null,ro),Ke())},i(f){if(!n){Y(a,f);for(let b=0;b<h.length;b+=1)Y(s[b]);n=!0}},o(f){q(a,f);for(let b=0;b<s.length;b+=1)q(s[b]);n=!1},d(f){f&&J(t),a&&a.d(f);for(let b=0;b<s.length;b+=1)s[b].d()}}}function Td(e,t,i){let{$$slots:s={},$$scope:r}=t,{logo:n=""}=t,{title:c=""}=t,{icons:o=[]}=t;return e.$$set=a=>{"logo"in a&&i(0,n=a.logo),"title"in a&&i(1,c=a.title),"icons"in a&&i(2,o=a.icons),"$$scope"in a&&i(3,r=a.$$scope)},[n,c,o,r,s]}class Ad extends Fe{constructor(t){super(),He(this,t,Td,Rd,Pe,{logo:0,title:1,icons:2})}}var _e=(e=>(e.Root="navigation-root",e.File="navigation-file",e.Folder="navigation-folder",e))(_e||{});function Md(e){let t,i;return t=new kt({props:{icon:"#iconHelp",id:e[1],className:e[2],style:e[3]}}),{c(){ne(t.$$.fragment)},m(s,r){ie(t,s,r),i=!0},p(s,r){const n={};r&2&&(n.id=s[1]),r&4&&(n.className=s[2]),r&8&&(n.style=s[3]),t.$set(n)},i(s){i||(Y(t.$$.fragment,s),i=!0)},o(s){q(t.$$.fragment,s),i=!1},d(s){se(t,s)}}}function Od(e){let t;return{c(){t=ot(e[0])},m(i,s){Z(i,t,s)},p(i,s){s&1&&Tt(t,i[0])},i:Te,o:Te,d(i){i&&J(t)}}}function Bd(e){let t,i;return{c(){t=new Di(!1),i=ct(),t.a=i},m(s,r){t.m(e[0],s,r),Z(s,i,r)},p(s,r){r&1&&t.p(s[0])},i:Te,o:Te,d(s){s&&(J(i),t.d())}}}function Pd(e){let t,i;return{c(){t=le("img"),F(t,"alt","icon"),F(t,"style",e[3]),An(t.src,i=e[0])||F(t,"src",i),F(t,"data-id",e[1]),F(t,"class",e[2]),U(t,"popover__block",Si.id.test(e[1])),U(t,"b3-list-item__icon",!0)},m(s,r){Z(s,t,r)},p(s,r){r&8&&F(t,"style",s[3]),r&1&&!An(t.src,i=s[0])&&F(t,"src",i),r&2&&F(t,"data-id",s[1]),r&4&&F(t,"class",s[2]),r&6&&U(t,"popover__block",Si.id.test(s[1])),r&4&&U(t,"b3-list-item__icon",!0)},i:Te,o:Te,d(s){s&&J(t)}}}function Id(e){let t,i;return t=new kt({props:{icon:e[0],id:e[1],className:e[2],style:e[3]}}),{c(){ne(t.$$.fragment)},m(s,r){ie(t,s,r),i=!0},p(s,r){const n={};r&1&&(n.icon=s[0]),r&2&&(n.id=s[1]),r&4&&(n.className=s[2]),r&8&&(n.style=s[3]),t.$set(n)},i(s){i||(Y(t.$$.fragment,s),i=!0)},o(s){q(t.$$.fragment,s),i=!1},d(s){se(t,s)}}}function xd(e){let t,i,s,r,n,c,o;const a=[Id,Pd,Bd,Od,Md],h=[];function u(f,b){return b&1&&(t=null),b&1&&(i=null),b&1&&(s=null),t==null&&(t=!!f[0].startsWith("#")),t?0:(i==null&&(i=!!(f[0].startsWith("/")||f[0].startsWith("http")||f[0].startsWith("data")||f[0].startsWith("blob"))),i?1:(s==null&&(s=!!(f[0].startsWith("<")&&f[0].endsWith(">"))),s?2:f[0]?3:4))}return r=u(e,-1),n=h[r]=a[r](e),{c(){n.c(),c=ct()},m(f,b){h[r].m(f,b),Z(f,c,b),o=!0},p(f,[b]){let y=r;r=u(f,b),r===y?h[r].p(f,b):(Ve(),q(h[y],1,1,()=>{h[y]=null}),Ke(),n=h[r],n?n.p(f,b):(n=h[r]=a[r](f),n.c()),Y(n,1),n.m(c.parentNode,c))},i(f){o||(Y(n),o=!0)},o(f){q(n),o=!1},d(f){f&&J(c),h[r].d(f)}}}function Nd(e,t,i){let{icon:s}=t,{id:r=""}=t,{className:n=""}=t,{style:c=""}=t;return e.$$set=o=>{"icon"in o&&i(0,s=o.icon),"id"in o&&i(1,r=o.id),"className"in o&&i(2,n=o.className),"style"in o&&i(3,c=o.style)},[s,r,n,c]}class Ur extends Fe{constructor(t){super(),He(this,t,Nd,xd,Pe,{icon:0,id:1,className:2,style:3})}}function Hd(e){let t,i;return{c(){t=Ut("svg"),i=Ut("use"),oi(i,"xlink:href",e[1]),F(t,"style",e[3]),F(t,"class",e[2]),U(t,"b3-list-item__arrow--open",e[0])},m(s,r){Z(s,t,r),ce(t,i)},p(s,[r]){r&2&&oi(i,"xlink:href",s[1]),r&8&&F(t,"style",s[3]),r&4&&F(t,"class",s[2]),r&5&&U(t,"b3-list-item__arrow--open",s[0])},i:Te,o:Te,d(s){s&&J(t)}}}function Fd(e,t,i){let{open:s=!1}=t,{icon:r="#iconRight"}=t,{className:n="b3-list-item__arrow"}=t,{style:c=void 0}=t;return e.$$set=o=>{"open"in o&&i(0,s=o.open),"icon"in o&&i(1,r=o.icon),"className"in o&&i(2,n=o.className),"style"in o&&i(3,c=o.style)},[s,r,n,c]}class jd extends Fe{constructor(t){super(),He(this,t,Fd,Hd,Pe,{open:0,icon:1,className:2,style:3})}}function co(e,t,i){const s=e.slice();return s[59]=t[i],s[61]=i,s}function Ud(e){let t,i;return t=new kt({props:{icon:"#iconHelp",id:e[21]}}),{c(){ne(t.$$.fragment)},m(s,r){ie(t,s,r),i=!0},p(s,r){const n={};r[0]&2097152&&(n.id=s[21]),t.$set(n)},i(s){i||(Y(t.$$.fragment,s),i=!0)},o(s){q(t.$$.fragment,s),i=!1},d(s){se(t,s)}}}function Wd(e){let t,i;return t=new kt({props:{icon:"#iconFilesRoot",id:e[21]}}),{c(){ne(t.$$.fragment)},m(s,r){ie(t,s,r),i=!0},p(s,r){const n={};r[0]&2097152&&(n.id=s[21]),t.$set(n)},i(s){i||(Y(t.$$.fragment,s),i=!0)},o(s){q(t.$$.fragment,s),i=!1},d(s){se(t,s)}}}function Yd(e){let t,i;return t=new kt({props:{icon:"#iconFolder",id:e[21]}}),{c(){ne(t.$$.fragment)},m(s,r){ie(t,s,r),i=!0},p(s,r){const n={};r[0]&2097152&&(n.id=s[21]),t.$set(n)},i(s){i||(Y(t.$$.fragment,s),i=!0)},o(s){q(t.$$.fragment,s),i=!1},d(s){se(t,s)}}}function zd(e){let t,i;return t=new kt({props:{icon:"#iconFile",id:e[21]}}),{c(){ne(t.$$.fragment)},m(s,r){ie(t,s,r),i=!0},p(s,r){const n={};r[0]&2097152&&(n.id=s[21]),t.$set(n)},i(s){i||(Y(t.$$.fragment,s),i=!0)},o(s){q(t.$$.fragment,s),i=!1},d(s){se(t,s)}}}function qd(e){let t,i;return t=new Ur({props:{icon:e[19],id:e[21]}}),{c(){ne(t.$$.fragment)},m(s,r){ie(t,s,r),i=!0},p(s,r){const n={};r[0]&524288&&(n.icon=s[19]),r[0]&2097152&&(n.id=s[21]),t.$set(n)},i(s){i||(Y(t.$$.fragment,s),i=!0)},o(s){q(t.$$.fragment,s),i=!1},d(s){se(t,s)}}}function ho(e){let t,i,s;return i=new Ur({props:{icon:e[26]}}),{c(){t=le("span"),ne(i.$$.fragment),F(t,"data-type","symlink"),F(t,"aria-label",e[27]),F(t,"class","symblink b3-list-item__action"),U(t,"b3-tooltips",!!e[27]),U(t,"b3-tooltips__sw",!!e[27]&&e[0]===_e.Root),U(t,"b3-tooltips__nw",!!e[27]&&e[0]!==_e.Root)},m(r,n){Z(r,t,n),ie(i,t,null),s=!0},p(r,n){const c={};n[0]&67108864&&(c.icon=r[26]),i.$set(c),(!s||n[0]&134217728)&&F(t,"aria-label",r[27]),(!s||n[0]&134217728)&&U(t,"b3-tooltips",!!r[27]),(!s||n[0]&134217729)&&U(t,"b3-tooltips__sw",!!r[27]&&r[0]===_e.Root),(!s||n[0]&134217729)&&U(t,"b3-tooltips__nw",!!r[27]&&r[0]!==_e.Root)},i(r){s||(Y(i.$$.fragment,r),s=!0)},o(r){q(i.$$.fragment,r),s=!1},d(r){r&&J(t),se(i)}}}function uo(e){let t,i;return{c(){t=le("span"),i=ot(e[28]),F(t,"aria-label",e[29]),F(t,"class","counter"),U(t,"b3-tooltips",!!e[29]),U(t,"b3-tooltips__sw",!!e[29]&&e[0]===_e.Root),U(t,"b3-tooltips__nw",!!e[29]&&e[0]!==_e.Root)},m(s,r){Z(s,t,r),ce(t,i)},p(s,r){r[0]&268435456&&Tt(i,s[28]),r[0]&536870912&&F(t,"aria-label",s[29]),r[0]&536870912&&U(t,"b3-tooltips",!!s[29]),r[0]&536870913&&U(t,"b3-tooltips__sw",!!s[29]&&s[0]===_e.Root),r[0]&536870913&&U(t,"b3-tooltips__nw",!!s[29]&&s[0]!==_e.Root)},d(s){s&&J(t)}}}function fo(e){let t,i=[],s=new Map,r=`calc(12px + ${e[4]} * ${e[3]})`,n,c=gt(e[16]);const o=a=>a[59].path;for(let a=0;a<c.length;a+=1){let h=co(e,c,a),u=o(h);s.set(u,i[a]=_o(u,h))}return{c(){t=le("ul");for(let a=0;a<i.length;a+=1)i[a].c();F(t,"class","node-list svelte-1oapgz1"),U(t,"dragging",e[9]),U(t,"dragover",e[13]),U(t,"fn__none",e[7]),dt(t,"--monaco-editor-explorer-indent-left",r)},m(a,h){Z(a,t,h);for(let u=0;u<i.length;u+=1)i[u]&&i[u].m(t,null);e[54](t),n=!0},p(a,h){h[0]&65544&&(c=gt(a[16]),Ve(),i=Li(i,h,o,1,a,c,s,t,Gi,_o,null,co),Ke()),(!n||h[0]&512)&&U(t,"dragging",a[9]),(!n||h[0]&8192)&&U(t,"dragover",a[13]),(!n||h[0]&128)&&U(t,"fn__none",a[7]),h[0]&24&&r!==(r=`calc(12px + ${a[4]} * ${a[3]})`)&&dt(t,"--monaco-editor-explorer-indent-left",r)},i(a){if(!n){for(let h=0;h<c.length;h+=1)Y(i[h]);n=!0}},o(a){for(let h=0;h<i.length;h+=1)q(i[h]);n=!1},d(a){a&&J(t);for(let h=0;h<i.length;h+=1)i[h].d();e[54](null)}}}function _o(e,t){let i,s,r;const n=[{depth:t[3]+1},t[59]];let c={};for(let o=0;o<n.length;o+=1)c=Ei(c,n[o]);return s=new ka({props:c}),s.$on("open",t[44]),s.$on("fold",t[45]),s.$on("menu",t[46]),s.$on("unfold",t[47]),s.$on("dragstart",t[48]),s.$on("dragend",t[49]),s.$on("dragenter",t[50]),s.$on("dragover",t[51]),s.$on("dragleave",t[52]),s.$on("drop",t[53]),{key:e,first:null,c(){i=ct(),ne(s.$$.fragment),this.first=i},m(o,a){Z(o,i,a),ie(s,o,a),r=!0},p(o,a){t=o;const h=a[0]&65544?$i(n,[a[0]&8&&{depth:t[3]+1},a[0]&65536&&Os(t[59])]):{};s.$set(h)},i(o){r||(Y(s.$$.fragment,o),r=!0)},o(o){q(s.$$.fragment,o),r=!1},d(o){o&&J(i),se(s,o)}}}function Vd(e){let t,i,s,r=`calc(4px + ${e[4]} * ${e[3]})`,n,c,o,a,h,u,f,b,y,v,m,l,_=!Number.isNaN(e[28]),p,d,g,w,E;s=new jd({props:{open:!e[7],icon:e[17]}});const C=[qd,zd,Yd,Wd,Ud],S=[];function k(T,B){return T[19]?0:T[0]===_e.File?1:T[0]===_e.Folder?2:T[0]===_e.Root?3:4}o=k(e),a=S[o]=C[o](e),v=new Ur({props:{icon:e[24]}});let D=e[8]&&ho(e),O=_&&uo(e),A=e[16]&&fo(e);return{c(){t=le("li"),i=le("span"),ne(s.$$.fragment),n=he(),c=le("span"),a.c(),h=he(),u=le("span"),f=ot(e[22]),b=he(),y=le("span"),ne(v.$$.fragment),m=he(),D&&D.c(),l=he(),O&&O.c(),p=he(),A&&A.c(),d=ct(),F(i,"role","button"),F(i,"aria-label",e[18]),F(i,"class","toggle b3-list-item__toggle b3-list-item__toggle--hl"),U(i,"b3-tooltips",!!e[18]),U(i,"b3-tooltips__se",!!e[18]&&e[0]===_e.Root),U(i,"b3-tooltips__ne",!!e[18]&&e[0]!==_e.Root),U(i,"fn__hidden",e[0]===_e.File),dt(i,"padding-left",r),F(c,"aria-label",e[20]),F(c,"class","icon b3-list-item__icon"),U(c,"b3-tooltips",!!e[20]),U(c,"b3-tooltips__se",!!e[20]&&e[0]===_e.Root),U(c,"b3-tooltips__ne",!!e[20]&&e[0]!==_e.Root),F(u,"aria-label",e[23]),F(u,"class","text b3-list-item__text"),U(u,"ariaLabel",!!e[23]),U(u,"b3-tooltips__se",!!e[23]&&e[0]===_e.Root),U(u,"b3-tooltips__ne",!!e[23]&&e[0]!==_e.Root),F(y,"role","button"),F(y,"data-type","more"),F(y,"aria-label",e[25]),F(y,"class","menu b3-list-item__action"),U(y,"b3-tooltips",!!e[25]),U(y,"b3-tooltips__sw",!!e[25]&&e[0]===_e.Root),U(y,"b3-tooltips__nw",!!e[25]&&e[0]!==_e.Root),F(t,"draggable",e[10]),F(t,"title",e[15]),F(t,"data-type",e[0]),F(t,"data-name",e[1]),F(t,"data-path",e[2]),F(t,"data-depth",e[3]),F(t,"data-directory",e[5]),F(t,"class","node b3-list-item svelte-1oapgz1"),U(t,"dragging",e[9]),U(t,"dragover",e[13]),U(t,"dragover__top",e[12]),U(t,"dragover__bottom",e[14]),U(t,"b3-list-item--focus",e[6]),U(t,"b3-list-item--hide-action",e[11])},m(T,B){Z(T,t,B),ce(t,i),ie(s,i,null),ce(t,n),ce(t,c),S[o].m(c,null),ce(t,h),ce(t,u),ce(u,f),ce(t,b),ce(t,y),ie(v,y,null),ce(t,m),D&&D.m(t,null),ce(t,l),O&&O.m(t,null),e[43](t),Z(T,p,B),A&&A.m(T,B),Z(T,d,B),g=!0,w||(E=[ge(i,"click",Lt(Kt(e[33]))),ge(y,"click",Lt(Kt(e[34]))),ge(t,"dragstart",Lt(e[35])),ge(t,"dragend",Lt(e[36])),ge(t,"dragenter",Lt(Kt(e[37]))),ge(t,"dragover",Lt(Kt(e[38]))),ge(t,"dragleave",Lt(Kt(e[39]))),ge(t,"drop",Lt(Kt(e[40]))),ge(t,"click",Lt(Kt(e[32]))),ge(t,"contextmenu",Lt(Kt(e[34])))],w=!0)},p(T,B){const G={};B[0]&128&&(G.open=!T[7]),B[0]&131072&&(G.icon=T[17]),s.$set(G),(!g||B[0]&262144)&&F(i,"aria-label",T[18]),(!g||B[0]&262144)&&U(i,"b3-tooltips",!!T[18]),(!g||B[0]&262145)&&U(i,"b3-tooltips__se",!!T[18]&&T[0]===_e.Root),(!g||B[0]&262145)&&U(i,"b3-tooltips__ne",!!T[18]&&T[0]!==_e.Root),(!g||B[0]&1)&&U(i,"fn__hidden",T[0]===_e.File),B[0]&24&&r!==(r=`calc(4px + ${T[4]} * ${T[3]})`)&&dt(i,"padding-left",r);let V=o;o=k(T),o===V?S[o].p(T,B):(Ve(),q(S[V],1,1,()=>{S[V]=null}),Ke(),a=S[o],a?a.p(T,B):(a=S[o]=C[o](T),a.c()),Y(a,1),a.m(c,null)),(!g||B[0]&1048576)&&F(c,"aria-label",T[20]),(!g||B[0]&1048576)&&U(c,"b3-tooltips",!!T[20]),(!g||B[0]&1048577)&&U(c,"b3-tooltips__se",!!T[20]&&T[0]===_e.Root),(!g||B[0]&1048577)&&U(c,"b3-tooltips__ne",!!T[20]&&T[0]!==_e.Root),(!g||B[0]&4194304)&&Tt(f,T[22]),(!g||B[0]&8388608)&&F(u,"aria-label",T[23]),(!g||B[0]&8388608)&&U(u,"ariaLabel",!!T[23]),(!g||B[0]&8388609)&&U(u,"b3-tooltips__se",!!T[23]&&T[0]===_e.Root),(!g||B[0]&8388609)&&U(u,"b3-tooltips__ne",!!T[23]&&T[0]!==_e.Root);const L={};B[0]&16777216&&(L.icon=T[24]),v.$set(L),(!g||B[0]&33554432)&&F(y,"aria-label",T[25]),(!g||B[0]&33554432)&&U(y,"b3-tooltips",!!T[25]),(!g||B[0]&33554433)&&U(y,"b3-tooltips__sw",!!T[25]&&T[0]===_e.Root),(!g||B[0]&33554433)&&U(y,"b3-tooltips__nw",!!T[25]&&T[0]!==_e.Root),T[8]?D?(D.p(T,B),B[0]&256&&Y(D,1)):(D=ho(T),D.c(),Y(D,1),D.m(t,l)):D&&(Ve(),q(D,1,1,()=>{D=null}),Ke()),B[0]&268435456&&(_=!Number.isNaN(T[28])),_?O?O.p(T,B):(O=uo(T),O.c(),O.m(t,null)):O&&(O.d(1),O=null),(!g||B[0]&1024)&&F(t,"draggable",T[10]),(!g||B[0]&32768)&&F(t,"title",T[15]),(!g||B[0]&1)&&F(t,"data-type",T[0]),(!g||B[0]&2)&&F(t,"data-name",T[1]),(!g||B[0]&4)&&F(t,"data-path",T[2]),(!g||B[0]&8)&&F(t,"data-depth",T[3]),(!g||B[0]&32)&&F(t,"data-directory",T[5]),(!g||B[0]&512)&&U(t,"dragging",T[9]),(!g||B[0]&8192)&&U(t,"dragover",T[13]),(!g||B[0]&4096)&&U(t,"dragover__top",T[12]),(!g||B[0]&16384)&&U(t,"dragover__bottom",T[14]),(!g||B[0]&64)&&U(t,"b3-list-item--focus",T[6]),(!g||B[0]&2048)&&U(t,"b3-list-item--hide-action",T[11]),T[16]?A?(A.p(T,B),B[0]&65536&&Y(A,1)):(A=fo(T),A.c(),Y(A,1),A.m(d.parentNode,d)):A&&(Ve(),q(A,1,1,()=>{A=null}),Ke())},i(T){g||(Y(s.$$.fragment,T),Y(a),Y(v.$$.fragment,T),Y(D),Y(A),g=!0)},o(T){q(s.$$.fragment,T),q(a),q(v.$$.fragment,T),q(D),q(A),g=!1},d(T){T&&(J(t),J(p),J(d)),se(s),S[o].d(),se(v),D&&D.d(),O&&O.d(),e[43](null),A&&A.d(T),w=!1,Ye(E)}}}function Kd(e,t,i){let{type:s}=t,{name:r=""}=t,{path:n}=t,{root:c=""}=t,{depth:o=0}=t,{indent:a="1em"}=t,{relative:h=""}=t,{directory:u}=t,{focus:f=!1}=t,{folded:b=!0}=t,{symlink:y=!1}=t,{dragging:v=!1}=t,{draggable:m=!1}=t,{hideActions:l=!0}=t,{dragoverTop:_=!1}=t,{dragover:p=!1}=t,{dragoverBottom:d=!1}=t,{title:g=""}=t,{children:w=void 0}=t,{toggleIcon:E="#iconRight"}=t,{toggleAriaLabel:C=""}=t,{icon:S=""}=t,{iconAriaLabel:k=""}=t,{iconPopoverID:D=""}=t,{text:O=""}=t,{textAriaLabel:A=""}=t,{menuIcon:T="#iconMore"}=t,{menuAriaLabel:B=""}=t,{symlinkIcon:G="#iconLink"}=t,{symlinkAriaLabel:V=""}=t,{count:L=NaN}=t,{countAriaLabel:R=""}=t,M,P;const z=Qt(),j={type:ve(s),name:ve(r),path:ve(n),root:ve(c),depth:ve(o),indent:ve(a),relative:ve(h),directory:ve(u),focus:ve(f),folded:ve(b),symlink:ve(y),dragging:ve(v),draggable:ve(m),hideActions:ve(l),dragoverTop:ve(_),dragover:ve(p),dragoverBottom:ve(d),title:ve(g),children:ve(w),toggleIcon:ve(E),toggleAriaLabel:ve(C),icon:ve(S),iconAriaLabel:ve(k),iconPopoverID:ve(D),text:ve(O),textAriaLabel:ve(A),menuIcon:ve(T),menuAriaLabel:ve(B),symlinkIcon:ve(G),symlinkAriaLabel:ve(V),count:ve(L),countAriaLabel:ve(R)},de=[j.type.subscribe(N=>i(0,s=N)),j.name.subscribe(N=>i(1,r=N)),j.path.subscribe(N=>i(2,n=N)),j.root.subscribe(N=>i(41,c=N)),j.indent.subscribe(N=>i(4,a=N)),j.depth.subscribe(N=>i(3,o=N)),j.relative.subscribe(N=>i(42,h=N)),j.directory.subscribe(N=>i(5,u=N)),j.focus.subscribe(N=>i(6,f=N)),j.folded.subscribe(N=>i(7,b=N)),j.symlink.subscribe(N=>i(8,y=N)),j.dragging.subscribe(N=>i(9,v=N)),j.draggable.subscribe(N=>i(10,m=N)),j.hideActions.subscribe(N=>i(11,l=N)),j.dragoverTop.subscribe(N=>i(12,_=N)),j.dragover.subscribe(N=>i(13,p=N)),j.dragoverBottom.subscribe(N=>i(14,d=N)),j.title.subscribe(N=>i(15,g=N)),j.children.subscribe(N=>i(16,w=N)),j.toggleIcon.subscribe(N=>i(17,E=N)),j.toggleAriaLabel.subscribe(N=>i(18,C=N)),j.icon.subscribe(N=>i(19,S=N)),j.iconAriaLabel.subscribe(N=>i(20,k=N)),j.iconPopoverID.subscribe(N=>i(21,D=N)),j.text.subscribe(N=>i(22,O=N)),j.textAriaLabel.subscribe(N=>i(23,A=N)),j.menuIcon.subscribe(N=>i(24,T=N)),j.menuAriaLabel.subscribe(N=>i(25,B=N)),j.symlinkIcon.subscribe(N=>i(26,G=N)),j.symlinkAriaLabel.subscribe(N=>i(27,V=N)),j.count.subscribe(N=>i(28,L=N)),j.countAriaLabel.subscribe(N=>i(29,R=N))],X=Uu("tree");X==null||X.appendNode(j),jr(()=>{X==null||X.removeNode(j),de.forEach(N=>N())});function ae(N){switch(s){case _e.File:z("open",{e:N,li:M,ul:P,props:j,dispatcher:z});break;case _e.Root:case _e.Folder:default:I(N);break}}function I(N){b?z("unfold",{e:N,li:M,ul:P,props:j,dispatcher:z}):z("fold",{e:N,li:M,ul:P,props:j,dispatcher:z})}function x(N){z("menu",{e:N,li:M,ul:P,props:j,dispatcher:z})}function H(N){z("dragstart",{e:N,li:M,ul:P,props:j,dispatcher:z})}function $(N){z("dragend",{e:N,li:M,ul:P,props:j,dispatcher:z})}function ee(N){z("dragenter",{e:N,li:M,ul:P,props:j,dispatcher:z})}function Se(N){z("dragover",{e:N,li:M,ul:P,props:j,dispatcher:z})}function te(N){z("dragleave",{e:N,li:M,ul:P,props:j,dispatcher:z})}function Ae(N){z("drop",{e:N,li:M,ul:P,props:j,dispatcher:z})}function Ue(N){Wt[N?"unshift":"push"](()=>{M=N,i(30,M)})}function Ie(N){Ce.call(this,e,N)}function De(N){Ce.call(this,e,N)}function $s(N){Ce.call(this,e,N)}function Bl(N){Ce.call(this,e,N)}function Pl(N){Ce.call(this,e,N)}function Il(N){Ce.call(this,e,N)}function xl(N){Ce.call(this,e,N)}function Nl(N){Ce.call(this,e,N)}function Hl(N){Ce.call(this,e,N)}function Fl(N){Ce.call(this,e,N)}function jl(N){Wt[N?"unshift":"push"](()=>{P=N,i(31,P)})}return e.$$set=N=>{"type"in N&&i(0,s=N.type),"name"in N&&i(1,r=N.name),"path"in N&&i(2,n=N.path),"root"in N&&i(41,c=N.root),"depth"in N&&i(3,o=N.depth),"indent"in N&&i(4,a=N.indent),"relative"in N&&i(42,h=N.relative),"directory"in N&&i(5,u=N.directory),"focus"in N&&i(6,f=N.focus),"folded"in N&&i(7,b=N.folded),"symlink"in N&&i(8,y=N.symlink),"dragging"in N&&i(9,v=N.dragging),"draggable"in N&&i(10,m=N.draggable),"hideActions"in N&&i(11,l=N.hideActions),"dragoverTop"in N&&i(12,_=N.dragoverTop),"dragover"in N&&i(13,p=N.dragover),"dragoverBottom"in N&&i(14,d=N.dragoverBottom),"title"in N&&i(15,g=N.title),"children"in N&&i(16,w=N.children),"toggleIcon"in N&&i(17,E=N.toggleIcon),"toggleAriaLabel"in N&&i(18,C=N.toggleAriaLabel),"icon"in N&&i(19,S=N.icon),"iconAriaLabel"in N&&i(20,k=N.iconAriaLabel),"iconPopoverID"in N&&i(21,D=N.iconPopoverID),"text"in N&&i(22,O=N.text),"textAriaLabel"in N&&i(23,A=N.textAriaLabel),"menuIcon"in N&&i(24,T=N.menuIcon),"menuAriaLabel"in N&&i(25,B=N.menuAriaLabel),"symlinkIcon"in N&&i(26,G=N.symlinkIcon),"symlinkAriaLabel"in N&&i(27,V=N.symlinkAriaLabel),"count"in N&&i(28,L=N.count),"countAriaLabel"in N&&i(29,R=N.countAriaLabel)},e.$$.update=()=>{e.$$.dirty[0]&1&&j.type.set(s),e.$$.dirty[0]&2&&j.name.set(r),e.$$.dirty[0]&4&&j.path.set(n),e.$$.dirty[1]&1024&&j.root.set(c),e.$$.dirty[0]&8&&j.depth.set(o),e.$$.dirty[0]&16&&j.indent.set(a),e.$$.dirty[1]&2048&&j.relative.set(h),e.$$.dirty[0]&32&&j.directory.set(u),e.$$.dirty[0]&64&&j.focus.set(f),e.$$.dirty[0]&128&&j.folded.set(b),e.$$.dirty[0]&256&&j.symlink.set(y),e.$$.dirty[0]&512&&j.dragging.set(v),e.$$.dirty[0]&1024&&j.draggable.set(m),e.$$.dirty[0]&2048&&j.hideActions.set(l),e.$$.dirty[0]&4096&&j.dragoverTop.set(_),e.$$.dirty[0]&8192&&j.dragover.set(p),e.$$.dirty[0]&16384&&j.dragoverBottom.set(d),e.$$.dirty[0]&32768&&j.title.set(g),e.$$.dirty[0]&65536&&j.children.set(w),e.$$.dirty[0]&131072&&j.toggleIcon.set(E),e.$$.dirty[0]&262144&&j.toggleAriaLabel.set(C),e.$$.dirty[0]&524288&&j.icon.set(S),e.$$.dirty[0]&1048576&&j.iconAriaLabel.set(k),e.$$.dirty[0]&2097152&&j.iconPopoverID.set(D),e.$$.dirty[0]&4194304&&j.text.set(O),e.$$.dirty[0]&8388608&&j.textAriaLabel.set(A),e.$$.dirty[0]&16777216&&j.menuIcon.set(T),e.$$.dirty[0]&33554432&&j.menuAriaLabel.set(B),e.$$.dirty[0]&67108864&&j.symlinkIcon.set(G),e.$$.dirty[0]&134217728&&j.symlinkAriaLabel.set(V),e.$$.dirty[0]&268435456&&j.count.set(L),e.$$.dirty[0]&536870912&&j.countAriaLabel.set(R)},[s,r,n,o,a,u,f,b,y,v,m,l,_,p,d,g,w,E,C,S,k,D,O,A,T,B,G,V,L,R,M,P,ae,I,x,H,$,ee,Se,te,Ae,c,h,Ue,Ie,De,$s,Bl,Pl,Il,xl,Nl,Hl,Fl,jl]}class ka extends Fe{constructor(t){super(),He(this,t,Kd,Vd,Pe,{type:0,name:1,path:2,root:41,depth:3,indent:4,relative:42,directory:5,focus:6,folded:7,symlink:8,dragging:9,draggable:10,hideActions:11,dragoverTop:12,dragover:13,dragoverBottom:14,title:15,children:16,toggleIcon:17,toggleAriaLabel:18,icon:19,iconAriaLabel:20,iconPopoverID:21,text:22,textAriaLabel:23,menuIcon:24,menuAriaLabel:25,symlinkIcon:26,symlinkAriaLabel:27,count:28,countAriaLabel:29},null,[-1,-1])}}function Gd(e){let t,i,s,r;const n=[e[0]];let c={};for(let o=0;o<n.length;o+=1)c=Ei(c,n[o]);return i=new ka({props:c}),i.$on("open",e[1]),i.$on("fold",e[2]),i.$on("menu",e[3]),i.$on("unfold",e[4]),i.$on("dragstart",e[5]),i.$on("dragend",e[6]),i.$on("dragenter",e[7]),i.$on("dragover",e[8]),i.$on("dragleave",e[9]),i.$on("drop",e[10]),{c(){t=le("ul"),ne(i.$$.fragment),F(t,"data-url",s=e[0].path),F(t,"class","b3-list b3-list--background")},m(o,a){Z(o,t,a),ie(i,t,null),r=!0},p(o,[a]){const h=a&1?$i(n,[Os(o[0])]):{};i.$set(h),(!r||a&1&&s!==(s=o[0].path))&&F(t,"data-url",s)},i(o){r||(Y(i.$$.fragment,o),r=!0)},o(o){q(i.$$.fragment,o),r=!1},d(o){o&&J(t),se(i)}}}function $d(e,t,i){let{root:s}=t;function r(v){Ce.call(this,e,v)}function n(v){Ce.call(this,e,v)}function c(v){Ce.call(this,e,v)}function o(v){Ce.call(this,e,v)}function a(v){Ce.call(this,e,v)}function h(v){Ce.call(this,e,v)}function u(v){Ce.call(this,e,v)}function f(v){Ce.call(this,e,v)}function b(v){Ce.call(this,e,v)}function y(v){Ce.call(this,e,v)}return e.$$set=v=>{"root"in v&&i(0,s=v.root)},[s,r,n,c,o,a,h,u,f,b,y]}class Jd extends Fe{constructor(t){super(),He(this,t,$d,Gd,Pe,{root:0})}}function po(e,t,i){const s=e.slice();return s[11]=t[i],s[13]=i,s}function mo(e,t){let i,s,r;return s=new Jd({props:{root:t[11]}}),s.$on("open",t[1]),s.$on("menu",t[2]),s.$on("fold",t[3]),s.$on("unfold",t[4]),s.$on("dragstart",t[5]),s.$on("dragend",t[6]),s.$on("dragenter",t[7]),s.$on("dragover",t[8]),s.$on("dragleave",t[9]),s.$on("drop",t[10]),{key:e,first:null,c(){i=ct(),ne(s.$$.fragment),this.first=i},m(n,c){Z(n,i,c),ie(s,n,c),r=!0},p(n,c){t=n;const o={};c&1&&(o.root=t[11]),s.$set(o)},i(n){r||(Y(s.$$.fragment,n),r=!0)},o(n){q(s.$$.fragment,n),r=!1},d(n){n&&J(i),se(s,n)}}}function Zd(e){let t,i=[],s=new Map,r,n=gt(e[0]);const c=o=>o[11].path;for(let o=0;o<n.length;o+=1){let a=po(e,n,o),h=c(a);s.set(h,i[o]=mo(h,a))}return{c(){t=le("div");for(let o=0;o<i.length;o+=1)i[o].c();F(t,"class","fn__flex-1 file-tree")},m(o,a){Z(o,t,a);for(let h=0;h<i.length;h+=1)i[h]&&i[h].m(t,null);r=!0},p(o,[a]){a&1&&(n=gt(o[0]),Ve(),i=Li(i,a,c,1,o,n,s,t,Gi,mo,null,po),Ke())},i(o){if(!r){for(let a=0;a<n.length;a+=1)Y(i[a]);r=!0}},o(o){for(let a=0;a<i.length;a+=1)q(i[a]);r=!1},d(o){o&&J(t);for(let a=0;a<i.length;a+=1)i[a].d()}}}function Xd(e,t,i){let{roots:s=[]}=t;function r(v){Ce.call(this,e,v)}function n(v){Ce.call(this,e,v)}function c(v){Ce.call(this,e,v)}function o(v){Ce.call(this,e,v)}function a(v){Ce.call(this,e,v)}function h(v){Ce.call(this,e,v)}function u(v){Ce.call(this,e,v)}function f(v){Ce.call(this,e,v)}function b(v){Ce.call(this,e,v)}function y(v){Ce.call(this,e,v)}return e.$$set=v=>{"roots"in v&&i(0,s=v.roots)},[s,r,n,c,o,a,h,u,f,b,y]}class Qd extends Fe{constructor(t){super(),He(this,t,Xd,Zd,Pe,{roots:0})}}function e_(e){return e=e.slice(e.findIndex(t=>t.type!=="separator"),e.findLastIndex(t=>t.type!=="separator")+1),e.length===0||(e=e.filter((t,i,s)=>{var r;return t.type!=="separator"?!0:((r=s[i-1])==null?void 0:r.type)!=="separator"})),e}function t_(e){return String.fromCodePoint(parseInt(e,16))}//! moment.js
//! version : 2.29.4
//! authors : Tim Wood, Iskren Chernev, Moment.js contributors
//! license : MIT
//! momentjs.com
var Ea;function re(){return Ea.apply(null,arguments)}function i_(e){Ea=e}function wt(e){return e instanceof Array||Object.prototype.toString.call(e)==="[object Array]"}function ni(e){return e!=null&&Object.prototype.toString.call(e)==="[object Object]"}function ke(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function Wr(e){if(Object.getOwnPropertyNames)return Object.getOwnPropertyNames(e).length===0;var t;for(t in e)if(ke(e,t))return!1;return!0}function lt(e){return e===void 0}function Yt(e){return typeof e=="number"||Object.prototype.toString.call(e)==="[object Number]"}function Ji(e){return e instanceof Date||Object.prototype.toString.call(e)==="[object Date]"}function Da(e,t){var i=[],s,r=e.length;for(s=0;s<r;++s)i.push(t(e[s],s));return i}function $t(e,t){for(var i in t)ke(t,i)&&(e[i]=t[i]);return ke(t,"toString")&&(e.toString=t.toString),ke(t,"valueOf")&&(e.valueOf=t.valueOf),e}function Ot(e,t,i,s){return Ja(e,t,i,s,!0).utc()}function s_(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidEra:null,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],era:null,meridiem:null,rfc2822:!1,weekdayMismatch:!1}}function me(e){return e._pf==null&&(e._pf=s_()),e._pf}var kr;Array.prototype.some?kr=Array.prototype.some:kr=function(e){var t=Object(this),i=t.length>>>0,s;for(s=0;s<i;s++)if(s in t&&e.call(this,t[s],s,t))return!0;return!1};function Yr(e){if(e._isValid==null){var t=me(e),i=kr.call(t.parsedDateParts,function(r){return r!=null}),s=!isNaN(e._d.getTime())&&t.overflow<0&&!t.empty&&!t.invalidEra&&!t.invalidMonth&&!t.invalidWeekday&&!t.weekdayMismatch&&!t.nullInput&&!t.invalidFormat&&!t.userInvalidated&&(!t.meridiem||t.meridiem&&i);if(e._strict&&(s=s&&t.charsLeftOver===0&&t.unusedTokens.length===0&&t.bigHour===void 0),Object.isFrozen==null||!Object.isFrozen(e))e._isValid=s;else return s}return e._isValid}function Ps(e){var t=Ot(NaN);return e!=null?$t(me(t),e):me(t).userInvalidated=!0,t}var go=re.momentProperties=[],rr=!1;function zr(e,t){var i,s,r,n=go.length;if(lt(t._isAMomentObject)||(e._isAMomentObject=t._isAMomentObject),lt(t._i)||(e._i=t._i),lt(t._f)||(e._f=t._f),lt(t._l)||(e._l=t._l),lt(t._strict)||(e._strict=t._strict),lt(t._tzm)||(e._tzm=t._tzm),lt(t._isUTC)||(e._isUTC=t._isUTC),lt(t._offset)||(e._offset=t._offset),lt(t._pf)||(e._pf=me(t)),lt(t._locale)||(e._locale=t._locale),n>0)for(i=0;i<n;i++)s=go[i],r=t[s],lt(r)||(e[s]=r);return e}function Zi(e){zr(this,e),this._d=new Date(e._d!=null?e._d.getTime():NaN),this.isValid()||(this._d=new Date(NaN)),rr===!1&&(rr=!0,re.updateOffset(this),rr=!1)}function Ct(e){return e instanceof Zi||e!=null&&e._isAMomentObject!=null}function La(e){re.suppressDeprecationWarnings===!1&&typeof console<"u"&&console.warn&&console.warn("Deprecation warning: "+e)}function vt(e,t){var i=!0;return $t(function(){if(re.deprecationHandler!=null&&re.deprecationHandler(null,e),i){var s=[],r,n,c,o=arguments.length;for(n=0;n<o;n++){if(r="",typeof arguments[n]=="object"){r+=`
[`+n+"] ";for(c in arguments[0])ke(arguments[0],c)&&(r+=c+": "+arguments[0][c]+", ");r=r.slice(0,-2)}else r=arguments[n];s.push(r)}La(e+`
Arguments: `+Array.prototype.slice.call(s).join("")+`
`+new Error().stack),i=!1}return t.apply(this,arguments)},t)}var vo={};function Ra(e,t){re.deprecationHandler!=null&&re.deprecationHandler(e,t),vo[e]||(La(t),vo[e]=!0)}re.suppressDeprecationWarnings=!1;re.deprecationHandler=null;function Bt(e){return typeof Function<"u"&&e instanceof Function||Object.prototype.toString.call(e)==="[object Function]"}function r_(e){var t,i;for(i in e)ke(e,i)&&(t=e[i],Bt(t)?this[i]=t:this["_"+i]=t);this._config=e,this._dayOfMonthOrdinalParseLenient=new RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+"|"+/\d{1,2}/.source)}function Er(e,t){var i=$t({},e),s;for(s in t)ke(t,s)&&(ni(e[s])&&ni(t[s])?(i[s]={},$t(i[s],e[s]),$t(i[s],t[s])):t[s]!=null?i[s]=t[s]:delete i[s]);for(s in e)ke(e,s)&&!ke(t,s)&&ni(e[s])&&(i[s]=$t({},i[s]));return i}function qr(e){e!=null&&this.set(e)}var Dr;Object.keys?Dr=Object.keys:Dr=function(e){var t,i=[];for(t in e)ke(e,t)&&i.push(t);return i};var n_={sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"};function o_(e,t,i){var s=this._calendar[e]||this._calendar.sameElse;return Bt(s)?s.call(t,i):s}function At(e,t,i){var s=""+Math.abs(e),r=t-s.length,n=e>=0;return(n?i?"+":"":"-")+Math.pow(10,Math.max(0,r)).toString().substr(1)+s}var Vr=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|N{1,5}|YYYYYY|YYYYY|YYYY|YY|y{2,4}|yo?|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,is=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,nr={},mi={};function ue(e,t,i,s){var r=s;typeof s=="string"&&(r=function(){return this[s]()}),e&&(mi[e]=r),t&&(mi[t[0]]=function(){return At(r.apply(this,arguments),t[1],t[2])}),i&&(mi[i]=function(){return this.localeData().ordinal(r.apply(this,arguments),e)})}function a_(e){return e.match(/\[[\s\S]/)?e.replace(/^\[|\]$/g,""):e.replace(/\\/g,"")}function l_(e){var t=e.match(Vr),i,s;for(i=0,s=t.length;i<s;i++)mi[t[i]]?t[i]=mi[t[i]]:t[i]=a_(t[i]);return function(r){var n="",c;for(c=0;c<s;c++)n+=Bt(t[c])?t[c].call(r,e):t[c];return n}}function _s(e,t){return e.isValid()?(t=Ta(t,e.localeData()),nr[t]=nr[t]||l_(t),nr[t](e)):e.localeData().invalidDate()}function Ta(e,t){var i=5;function s(r){return t.longDateFormat(r)||r}for(is.lastIndex=0;i>=0&&is.test(e);)e=e.replace(is,s),is.lastIndex=0,i-=1;return e}var c_={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"};function h_(e){var t=this._longDateFormat[e],i=this._longDateFormat[e.toUpperCase()];return t||!i?t:(this._longDateFormat[e]=i.match(Vr).map(function(s){return s==="MMMM"||s==="MM"||s==="DD"||s==="dddd"?s.slice(1):s}).join(""),this._longDateFormat[e])}var u_="Invalid date";function f_(){return this._invalidDate}var d_="%d",__=/\d{1,2}/;function p_(e){return this._ordinal.replace("%d",e)}var m_={future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",w:"a week",ww:"%d weeks",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};function g_(e,t,i,s){var r=this._relativeTime[i];return Bt(r)?r(e,t,i,s):r.replace(/%d/i,e)}function v_(e,t){var i=this._relativeTime[e>0?"future":"past"];return Bt(i)?i(t):i.replace(/%s/i,t)}var Ni={};function rt(e,t){var i=e.toLowerCase();Ni[i]=Ni[i+"s"]=Ni[t]=e}function bt(e){return typeof e=="string"?Ni[e]||Ni[e.toLowerCase()]:void 0}function Kr(e){var t={},i,s;for(s in e)ke(e,s)&&(i=bt(s),i&&(t[i]=e[s]));return t}var Aa={};function nt(e,t){Aa[e]=t}function b_(e){var t=[],i;for(i in e)ke(e,i)&&t.push({unit:i,priority:Aa[i]});return t.sort(function(s,r){return s.priority-r.priority}),t}function Is(e){return e%4===0&&e%100!==0||e%400===0}function pt(e){return e<0?Math.ceil(e)||0:Math.floor(e)}function be(e){var t=+e,i=0;return t!==0&&isFinite(t)&&(i=pt(t)),i}function Ri(e,t){return function(i){return i!=null?(Ma(this,e,i),re.updateOffset(this,t),this):bs(this,e)}}function bs(e,t){return e.isValid()?e._d["get"+(e._isUTC?"UTC":"")+t]():NaN}function Ma(e,t,i){e.isValid()&&!isNaN(i)&&(t==="FullYear"&&Is(e.year())&&e.month()===1&&e.date()===29?(i=be(i),e._d["set"+(e._isUTC?"UTC":"")+t](i,e.month(),Us(i,e.month()))):e._d["set"+(e._isUTC?"UTC":"")+t](i))}function y_(e){return e=bt(e),Bt(this[e])?this[e]():this}function S_(e,t){if(typeof e=="object"){e=Kr(e);var i=b_(e),s,r=i.length;for(s=0;s<r;s++)this[i[s].unit](e[i[s].unit])}else if(e=bt(e),Bt(this[e]))return this[e](t);return this}var Oa=/\d/,_t=/\d\d/,Ba=/\d{3}/,Gr=/\d{4}/,xs=/[+-]?\d{6}/,Oe=/\d\d?/,Pa=/\d\d\d\d?/,Ia=/\d\d\d\d\d\d?/,Ns=/\d{1,3}/,$r=/\d{1,4}/,Hs=/[+-]?\d{1,6}/,Ti=/\d+/,Fs=/[+-]?\d+/,w_=/Z|[+-]\d\d:?\d\d/gi,js=/Z|[+-]\d\d(?::?\d\d)?/gi,C_=/[+-]?\d+(\.\d{1,3})?/,Xi=/[0-9]{0,256}['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFF07\uFF10-\uFFEF]{1,256}|[\u0600-\u06FF\/]{1,256}(\s*?[\u0600-\u06FF]{1,256}){1,2}/i,ys;ys={};function oe(e,t,i){ys[e]=Bt(t)?t:function(s,r){return s&&i?i:t}}function k_(e,t){return ke(ys,e)?ys[e](t._strict,t._locale):new RegExp(E_(e))}function E_(e){return ut(e.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(t,i,s,r,n){return i||s||r||n}))}function ut(e){return e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}var Lr={};function Re(e,t){var i,s=t,r;for(typeof e=="string"&&(e=[e]),Yt(t)&&(s=function(n,c){c[t]=be(n)}),r=e.length,i=0;i<r;i++)Lr[e[i]]=s}function Qi(e,t){Re(e,function(i,s,r,n){r._w=r._w||{},t(i,r._w,r,n)})}function D_(e,t,i){t!=null&&ke(Lr,e)&&Lr[e](t,i._a,i,e)}var it=0,Nt=1,Rt=2,ze=3,St=4,Ht=5,si=6,L_=7,R_=8;function T_(e,t){return(e%t+t)%t}var Ne;Array.prototype.indexOf?Ne=Array.prototype.indexOf:Ne=function(e){var t;for(t=0;t<this.length;++t)if(this[t]===e)return t;return-1};function Us(e,t){if(isNaN(e)||isNaN(t))return NaN;var i=T_(t,12);return e+=(t-i)/12,i===1?Is(e)?29:28:31-i%7%2}ue("M",["MM",2],"Mo",function(){return this.month()+1});ue("MMM",0,0,function(e){return this.localeData().monthsShort(this,e)});ue("MMMM",0,0,function(e){return this.localeData().months(this,e)});rt("month","M");nt("month",8);oe("M",Oe);oe("MM",Oe,_t);oe("MMM",function(e,t){return t.monthsShortRegex(e)});oe("MMMM",function(e,t){return t.monthsRegex(e)});Re(["M","MM"],function(e,t){t[Nt]=be(e)-1});Re(["MMM","MMMM"],function(e,t,i,s){var r=i._locale.monthsParse(e,s,i._strict);r!=null?t[Nt]=r:me(i).invalidMonth=e});var A_="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),xa="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),Na=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/,M_=Xi,O_=Xi;function B_(e,t){return e?wt(this._months)?this._months[e.month()]:this._months[(this._months.isFormat||Na).test(t)?"format":"standalone"][e.month()]:wt(this._months)?this._months:this._months.standalone}function P_(e,t){return e?wt(this._monthsShort)?this._monthsShort[e.month()]:this._monthsShort[Na.test(t)?"format":"standalone"][e.month()]:wt(this._monthsShort)?this._monthsShort:this._monthsShort.standalone}function I_(e,t,i){var s,r,n,c=e.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],s=0;s<12;++s)n=Ot([2e3,s]),this._shortMonthsParse[s]=this.monthsShort(n,"").toLocaleLowerCase(),this._longMonthsParse[s]=this.months(n,"").toLocaleLowerCase();return i?t==="MMM"?(r=Ne.call(this._shortMonthsParse,c),r!==-1?r:null):(r=Ne.call(this._longMonthsParse,c),r!==-1?r:null):t==="MMM"?(r=Ne.call(this._shortMonthsParse,c),r!==-1?r:(r=Ne.call(this._longMonthsParse,c),r!==-1?r:null)):(r=Ne.call(this._longMonthsParse,c),r!==-1?r:(r=Ne.call(this._shortMonthsParse,c),r!==-1?r:null))}function x_(e,t,i){var s,r,n;if(this._monthsParseExact)return I_.call(this,e,t,i);for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),s=0;s<12;s++){if(r=Ot([2e3,s]),i&&!this._longMonthsParse[s]&&(this._longMonthsParse[s]=new RegExp("^"+this.months(r,"").replace(".","")+"$","i"),this._shortMonthsParse[s]=new RegExp("^"+this.monthsShort(r,"").replace(".","")+"$","i")),!i&&!this._monthsParse[s]&&(n="^"+this.months(r,"")+"|^"+this.monthsShort(r,""),this._monthsParse[s]=new RegExp(n.replace(".",""),"i")),i&&t==="MMMM"&&this._longMonthsParse[s].test(e))return s;if(i&&t==="MMM"&&this._shortMonthsParse[s].test(e))return s;if(!i&&this._monthsParse[s].test(e))return s}}function Ha(e,t){var i;if(!e.isValid())return e;if(typeof t=="string"){if(/^\d+$/.test(t))t=be(t);else if(t=e.localeData().monthsParse(t),!Yt(t))return e}return i=Math.min(e.date(),Us(e.year(),t)),e._d["set"+(e._isUTC?"UTC":"")+"Month"](t,i),e}function Fa(e){return e!=null?(Ha(this,e),re.updateOffset(this,!0),this):bs(this,"Month")}function N_(){return Us(this.year(),this.month())}function H_(e){return this._monthsParseExact?(ke(this,"_monthsRegex")||ja.call(this),e?this._monthsShortStrictRegex:this._monthsShortRegex):(ke(this,"_monthsShortRegex")||(this._monthsShortRegex=M_),this._monthsShortStrictRegex&&e?this._monthsShortStrictRegex:this._monthsShortRegex)}function F_(e){return this._monthsParseExact?(ke(this,"_monthsRegex")||ja.call(this),e?this._monthsStrictRegex:this._monthsRegex):(ke(this,"_monthsRegex")||(this._monthsRegex=O_),this._monthsStrictRegex&&e?this._monthsStrictRegex:this._monthsRegex)}function ja(){function e(c,o){return o.length-c.length}var t=[],i=[],s=[],r,n;for(r=0;r<12;r++)n=Ot([2e3,r]),t.push(this.monthsShort(n,"")),i.push(this.months(n,"")),s.push(this.months(n,"")),s.push(this.monthsShort(n,""));for(t.sort(e),i.sort(e),s.sort(e),r=0;r<12;r++)t[r]=ut(t[r]),i[r]=ut(i[r]);for(r=0;r<24;r++)s[r]=ut(s[r]);this._monthsRegex=new RegExp("^("+s.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp("^("+i.join("|")+")","i"),this._monthsShortStrictRegex=new RegExp("^("+t.join("|")+")","i")}ue("Y",0,0,function(){var e=this.year();return e<=9999?At(e,4):"+"+e});ue(0,["YY",2],0,function(){return this.year()%100});ue(0,["YYYY",4],0,"year");ue(0,["YYYYY",5],0,"year");ue(0,["YYYYYY",6,!0],0,"year");rt("year","y");nt("year",1);oe("Y",Fs);oe("YY",Oe,_t);oe("YYYY",$r,Gr);oe("YYYYY",Hs,xs);oe("YYYYYY",Hs,xs);Re(["YYYYY","YYYYYY"],it);Re("YYYY",function(e,t){t[it]=e.length===2?re.parseTwoDigitYear(e):be(e)});Re("YY",function(e,t){t[it]=re.parseTwoDigitYear(e)});Re("Y",function(e,t){t[it]=parseInt(e,10)});function Hi(e){return Is(e)?366:365}re.parseTwoDigitYear=function(e){return be(e)+(be(e)>68?1900:2e3)};var Ua=Ri("FullYear",!0);function j_(){return Is(this.year())}function U_(e,t,i,s,r,n,c){var o;return e<100&&e>=0?(o=new Date(e+400,t,i,s,r,n,c),isFinite(o.getFullYear())&&o.setFullYear(e)):o=new Date(e,t,i,s,r,n,c),o}function Wi(e){var t,i;return e<100&&e>=0?(i=Array.prototype.slice.call(arguments),i[0]=e+400,t=new Date(Date.UTC.apply(null,i)),isFinite(t.getUTCFullYear())&&t.setUTCFullYear(e)):t=new Date(Date.UTC.apply(null,arguments)),t}function Ss(e,t,i){var s=7+t-i,r=(7+Wi(e,0,s).getUTCDay()-t)%7;return-r+s-1}function Wa(e,t,i,s,r){var n=(7+i-s)%7,c=Ss(e,s,r),o=1+7*(t-1)+n+c,a,h;return o<=0?(a=e-1,h=Hi(a)+o):o>Hi(e)?(a=e+1,h=o-Hi(e)):(a=e,h=o),{year:a,dayOfYear:h}}function Yi(e,t,i){var s=Ss(e.year(),t,i),r=Math.floor((e.dayOfYear()-s-1)/7)+1,n,c;return r<1?(c=e.year()-1,n=r+jt(c,t,i)):r>jt(e.year(),t,i)?(n=r-jt(e.year(),t,i),c=e.year()+1):(c=e.year(),n=r),{week:n,year:c}}function jt(e,t,i){var s=Ss(e,t,i),r=Ss(e+1,t,i);return(Hi(e)-s+r)/7}ue("w",["ww",2],"wo","week");ue("W",["WW",2],"Wo","isoWeek");rt("week","w");rt("isoWeek","W");nt("week",5);nt("isoWeek",5);oe("w",Oe);oe("ww",Oe,_t);oe("W",Oe);oe("WW",Oe,_t);Qi(["w","ww","W","WW"],function(e,t,i,s){t[s.substr(0,1)]=be(e)});function W_(e){return Yi(e,this._week.dow,this._week.doy).week}var Y_={dow:0,doy:6};function z_(){return this._week.dow}function q_(){return this._week.doy}function V_(e){var t=this.localeData().week(this);return e==null?t:this.add((e-t)*7,"d")}function K_(e){var t=Yi(this,1,4).week;return e==null?t:this.add((e-t)*7,"d")}ue("d",0,"do","day");ue("dd",0,0,function(e){return this.localeData().weekdaysMin(this,e)});ue("ddd",0,0,function(e){return this.localeData().weekdaysShort(this,e)});ue("dddd",0,0,function(e){return this.localeData().weekdays(this,e)});ue("e",0,0,"weekday");ue("E",0,0,"isoWeekday");rt("day","d");rt("weekday","e");rt("isoWeekday","E");nt("day",11);nt("weekday",11);nt("isoWeekday",11);oe("d",Oe);oe("e",Oe);oe("E",Oe);oe("dd",function(e,t){return t.weekdaysMinRegex(e)});oe("ddd",function(e,t){return t.weekdaysShortRegex(e)});oe("dddd",function(e,t){return t.weekdaysRegex(e)});Qi(["dd","ddd","dddd"],function(e,t,i,s){var r=i._locale.weekdaysParse(e,s,i._strict);r!=null?t.d=r:me(i).invalidWeekday=e});Qi(["d","e","E"],function(e,t,i,s){t[s]=be(e)});function G_(e,t){return typeof e!="string"?e:isNaN(e)?(e=t.weekdaysParse(e),typeof e=="number"?e:null):parseInt(e,10)}function $_(e,t){return typeof e=="string"?t.weekdaysParse(e)%7||7:isNaN(e)?null:e}function Jr(e,t){return e.slice(t,7).concat(e.slice(0,t))}var J_="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),Ya="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),Z_="Su_Mo_Tu_We_Th_Fr_Sa".split("_"),X_=Xi,Q_=Xi,e0=Xi;function t0(e,t){var i=wt(this._weekdays)?this._weekdays:this._weekdays[e&&e!==!0&&this._weekdays.isFormat.test(t)?"format":"standalone"];return e===!0?Jr(i,this._week.dow):e?i[e.day()]:i}function i0(e){return e===!0?Jr(this._weekdaysShort,this._week.dow):e?this._weekdaysShort[e.day()]:this._weekdaysShort}function s0(e){return e===!0?Jr(this._weekdaysMin,this._week.dow):e?this._weekdaysMin[e.day()]:this._weekdaysMin}function r0(e,t,i){var s,r,n,c=e.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],s=0;s<7;++s)n=Ot([2e3,1]).day(s),this._minWeekdaysParse[s]=this.weekdaysMin(n,"").toLocaleLowerCase(),this._shortWeekdaysParse[s]=this.weekdaysShort(n,"").toLocaleLowerCase(),this._weekdaysParse[s]=this.weekdays(n,"").toLocaleLowerCase();return i?t==="dddd"?(r=Ne.call(this._weekdaysParse,c),r!==-1?r:null):t==="ddd"?(r=Ne.call(this._shortWeekdaysParse,c),r!==-1?r:null):(r=Ne.call(this._minWeekdaysParse,c),r!==-1?r:null):t==="dddd"?(r=Ne.call(this._weekdaysParse,c),r!==-1||(r=Ne.call(this._shortWeekdaysParse,c),r!==-1)?r:(r=Ne.call(this._minWeekdaysParse,c),r!==-1?r:null)):t==="ddd"?(r=Ne.call(this._shortWeekdaysParse,c),r!==-1||(r=Ne.call(this._weekdaysParse,c),r!==-1)?r:(r=Ne.call(this._minWeekdaysParse,c),r!==-1?r:null)):(r=Ne.call(this._minWeekdaysParse,c),r!==-1||(r=Ne.call(this._weekdaysParse,c),r!==-1)?r:(r=Ne.call(this._shortWeekdaysParse,c),r!==-1?r:null))}function n0(e,t,i){var s,r,n;if(this._weekdaysParseExact)return r0.call(this,e,t,i);for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),s=0;s<7;s++){if(r=Ot([2e3,1]).day(s),i&&!this._fullWeekdaysParse[s]&&(this._fullWeekdaysParse[s]=new RegExp("^"+this.weekdays(r,"").replace(".","\\.?")+"$","i"),this._shortWeekdaysParse[s]=new RegExp("^"+this.weekdaysShort(r,"").replace(".","\\.?")+"$","i"),this._minWeekdaysParse[s]=new RegExp("^"+this.weekdaysMin(r,"").replace(".","\\.?")+"$","i")),this._weekdaysParse[s]||(n="^"+this.weekdays(r,"")+"|^"+this.weekdaysShort(r,"")+"|^"+this.weekdaysMin(r,""),this._weekdaysParse[s]=new RegExp(n.replace(".",""),"i")),i&&t==="dddd"&&this._fullWeekdaysParse[s].test(e))return s;if(i&&t==="ddd"&&this._shortWeekdaysParse[s].test(e))return s;if(i&&t==="dd"&&this._minWeekdaysParse[s].test(e))return s;if(!i&&this._weekdaysParse[s].test(e))return s}}function o0(e){if(!this.isValid())return e!=null?this:NaN;var t=this._isUTC?this._d.getUTCDay():this._d.getDay();return e!=null?(e=G_(e,this.localeData()),this.add(e-t,"d")):t}function a0(e){if(!this.isValid())return e!=null?this:NaN;var t=(this.day()+7-this.localeData()._week.dow)%7;return e==null?t:this.add(e-t,"d")}function l0(e){if(!this.isValid())return e!=null?this:NaN;if(e!=null){var t=$_(e,this.localeData());return this.day(this.day()%7?t:t-7)}else return this.day()||7}function c0(e){return this._weekdaysParseExact?(ke(this,"_weekdaysRegex")||Zr.call(this),e?this._weekdaysStrictRegex:this._weekdaysRegex):(ke(this,"_weekdaysRegex")||(this._weekdaysRegex=X_),this._weekdaysStrictRegex&&e?this._weekdaysStrictRegex:this._weekdaysRegex)}function h0(e){return this._weekdaysParseExact?(ke(this,"_weekdaysRegex")||Zr.call(this),e?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):(ke(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=Q_),this._weekdaysShortStrictRegex&&e?this._weekdaysShortStrictRegex:this._weekdaysShortRegex)}function u0(e){return this._weekdaysParseExact?(ke(this,"_weekdaysRegex")||Zr.call(this),e?this._weekdaysMinStrictRegex:this._weekdaysMinRegex):(ke(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=e0),this._weekdaysMinStrictRegex&&e?this._weekdaysMinStrictRegex:this._weekdaysMinRegex)}function Zr(){function e(u,f){return f.length-u.length}var t=[],i=[],s=[],r=[],n,c,o,a,h;for(n=0;n<7;n++)c=Ot([2e3,1]).day(n),o=ut(this.weekdaysMin(c,"")),a=ut(this.weekdaysShort(c,"")),h=ut(this.weekdays(c,"")),t.push(o),i.push(a),s.push(h),r.push(o),r.push(a),r.push(h);t.sort(e),i.sort(e),s.sort(e),r.sort(e),this._weekdaysRegex=new RegExp("^("+r.join("|")+")","i"),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=new RegExp("^("+s.join("|")+")","i"),this._weekdaysShortStrictRegex=new RegExp("^("+i.join("|")+")","i"),this._weekdaysMinStrictRegex=new RegExp("^("+t.join("|")+")","i")}function Xr(){return this.hours()%12||12}function f0(){return this.hours()||24}ue("H",["HH",2],0,"hour");ue("h",["hh",2],0,Xr);ue("k",["kk",2],0,f0);ue("hmm",0,0,function(){return""+Xr.apply(this)+At(this.minutes(),2)});ue("hmmss",0,0,function(){return""+Xr.apply(this)+At(this.minutes(),2)+At(this.seconds(),2)});ue("Hmm",0,0,function(){return""+this.hours()+At(this.minutes(),2)});ue("Hmmss",0,0,function(){return""+this.hours()+At(this.minutes(),2)+At(this.seconds(),2)});function za(e,t){ue(e,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),t)})}za("a",!0);za("A",!1);rt("hour","h");nt("hour",13);function qa(e,t){return t._meridiemParse}oe("a",qa);oe("A",qa);oe("H",Oe);oe("h",Oe);oe("k",Oe);oe("HH",Oe,_t);oe("hh",Oe,_t);oe("kk",Oe,_t);oe("hmm",Pa);oe("hmmss",Ia);oe("Hmm",Pa);oe("Hmmss",Ia);Re(["H","HH"],ze);Re(["k","kk"],function(e,t,i){var s=be(e);t[ze]=s===24?0:s});Re(["a","A"],function(e,t,i){i._isPm=i._locale.isPM(e),i._meridiem=e});Re(["h","hh"],function(e,t,i){t[ze]=be(e),me(i).bigHour=!0});Re("hmm",function(e,t,i){var s=e.length-2;t[ze]=be(e.substr(0,s)),t[St]=be(e.substr(s)),me(i).bigHour=!0});Re("hmmss",function(e,t,i){var s=e.length-4,r=e.length-2;t[ze]=be(e.substr(0,s)),t[St]=be(e.substr(s,2)),t[Ht]=be(e.substr(r)),me(i).bigHour=!0});Re("Hmm",function(e,t,i){var s=e.length-2;t[ze]=be(e.substr(0,s)),t[St]=be(e.substr(s))});Re("Hmmss",function(e,t,i){var s=e.length-4,r=e.length-2;t[ze]=be(e.substr(0,s)),t[St]=be(e.substr(s,2)),t[Ht]=be(e.substr(r))});function d0(e){return(e+"").toLowerCase().charAt(0)==="p"}var _0=/[ap]\.?m?\.?/i,p0=Ri("Hours",!0);function m0(e,t,i){return e>11?i?"pm":"PM":i?"am":"AM"}var Va={calendar:n_,longDateFormat:c_,invalidDate:u_,ordinal:d_,dayOfMonthOrdinalParse:__,relativeTime:m_,months:A_,monthsShort:xa,week:Y_,weekdays:J_,weekdaysMin:Z_,weekdaysShort:Ya,meridiemParse:_0},Be={},Mi={},zi;function g0(e,t){var i,s=Math.min(e.length,t.length);for(i=0;i<s;i+=1)if(e[i]!==t[i])return i;return s}function bo(e){return e&&e.toLowerCase().replace("_","-")}function v0(e){for(var t=0,i,s,r,n;t<e.length;){for(n=bo(e[t]).split("-"),i=n.length,s=bo(e[t+1]),s=s?s.split("-"):null;i>0;){if(r=Ws(n.slice(0,i).join("-")),r)return r;if(s&&s.length>=i&&g0(n,s)>=i-1)break;i--}t++}return zi}function b0(e){return e.match("^[^/\\\\]*$")!=null}function Ws(e){var t=null,i;if(Be[e]===void 0&&typeof module<"u"&&module&&module.exports&&b0(e))try{t=zi._abbr,i=require,i("./locale/"+e),Xt(t)}catch{Be[e]=null}return Be[e]}function Xt(e,t){var i;return e&&(lt(t)?i=zt(e):i=Qr(e,t),i?zi=i:typeof console<"u"&&console.warn&&console.warn("Locale "+e+" not found. Did you forget to load it?")),zi._abbr}function Qr(e,t){if(t!==null){var i,s=Va;if(t.abbr=e,Be[e]!=null)Ra("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),s=Be[e]._config;else if(t.parentLocale!=null)if(Be[t.parentLocale]!=null)s=Be[t.parentLocale]._config;else if(i=Ws(t.parentLocale),i!=null)s=i._config;else return Mi[t.parentLocale]||(Mi[t.parentLocale]=[]),Mi[t.parentLocale].push({name:e,config:t}),null;return Be[e]=new qr(Er(s,t)),Mi[e]&&Mi[e].forEach(function(r){Qr(r.name,r.config)}),Xt(e),Be[e]}else return delete Be[e],null}function y0(e,t){if(t!=null){var i,s,r=Va;Be[e]!=null&&Be[e].parentLocale!=null?Be[e].set(Er(Be[e]._config,t)):(s=Ws(e),s!=null&&(r=s._config),t=Er(r,t),s==null&&(t.abbr=e),i=new qr(t),i.parentLocale=Be[e],Be[e]=i),Xt(e)}else Be[e]!=null&&(Be[e].parentLocale!=null?(Be[e]=Be[e].parentLocale,e===Xt()&&Xt(e)):Be[e]!=null&&delete Be[e]);return Be[e]}function zt(e){var t;if(e&&e._locale&&e._locale._abbr&&(e=e._locale._abbr),!e)return zi;if(!wt(e)){if(t=Ws(e),t)return t;e=[e]}return v0(e)}function S0(){return Dr(Be)}function en(e){var t,i=e._a;return i&&me(e).overflow===-2&&(t=i[Nt]<0||i[Nt]>11?Nt:i[Rt]<1||i[Rt]>Us(i[it],i[Nt])?Rt:i[ze]<0||i[ze]>24||i[ze]===24&&(i[St]!==0||i[Ht]!==0||i[si]!==0)?ze:i[St]<0||i[St]>59?St:i[Ht]<0||i[Ht]>59?Ht:i[si]<0||i[si]>999?si:-1,me(e)._overflowDayOfYear&&(t<it||t>Rt)&&(t=Rt),me(e)._overflowWeeks&&t===-1&&(t=L_),me(e)._overflowWeekday&&t===-1&&(t=R_),me(e).overflow=t),e}var w0=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,C0=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d|))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,k0=/Z|[+-]\d\d(?::?\d\d)?/,ss=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/],["YYYYMM",/\d{6}/,!1],["YYYY",/\d{4}/,!1]],or=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],E0=/^\/?Date\((-?\d+)/i,D0=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\d{4}))$/,L0={UT:0,GMT:0,EDT:-4*60,EST:-5*60,CDT:-5*60,CST:-6*60,MDT:-6*60,MST:-7*60,PDT:-7*60,PST:-8*60};function Ka(e){var t,i,s=e._i,r=w0.exec(s)||C0.exec(s),n,c,o,a,h=ss.length,u=or.length;if(r){for(me(e).iso=!0,t=0,i=h;t<i;t++)if(ss[t][1].exec(r[1])){c=ss[t][0],n=ss[t][2]!==!1;break}if(c==null){e._isValid=!1;return}if(r[3]){for(t=0,i=u;t<i;t++)if(or[t][1].exec(r[3])){o=(r[2]||" ")+or[t][0];break}if(o==null){e._isValid=!1;return}}if(!n&&o!=null){e._isValid=!1;return}if(r[4])if(k0.exec(r[4]))a="Z";else{e._isValid=!1;return}e._f=c+(o||"")+(a||""),sn(e)}else e._isValid=!1}function R0(e,t,i,s,r,n){var c=[T0(e),xa.indexOf(t),parseInt(i,10),parseInt(s,10),parseInt(r,10)];return n&&c.push(parseInt(n,10)),c}function T0(e){var t=parseInt(e,10);return t<=49?2e3+t:t<=999?1900+t:t}function A0(e){return e.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").replace(/^\s\s*/,"").replace(/\s\s*$/,"")}function M0(e,t,i){if(e){var s=Ya.indexOf(e),r=new Date(t[0],t[1],t[2]).getDay();if(s!==r)return me(i).weekdayMismatch=!0,i._isValid=!1,!1}return!0}function O0(e,t,i){if(e)return L0[e];if(t)return 0;var s=parseInt(i,10),r=s%100,n=(s-r)/100;return n*60+r}function Ga(e){var t=D0.exec(A0(e._i)),i;if(t){if(i=R0(t[4],t[3],t[2],t[5],t[6],t[7]),!M0(t[1],i,e))return;e._a=i,e._tzm=O0(t[8],t[9],t[10]),e._d=Wi.apply(null,e._a),e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm),me(e).rfc2822=!0}else e._isValid=!1}function B0(e){var t=E0.exec(e._i);if(t!==null){e._d=new Date(+t[1]);return}if(Ka(e),e._isValid===!1)delete e._isValid;else return;if(Ga(e),e._isValid===!1)delete e._isValid;else return;e._strict?e._isValid=!1:re.createFromInputFallback(e)}re.createFromInputFallback=vt("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are discouraged. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",function(e){e._d=new Date(e._i+(e._useUTC?" UTC":""))});function di(e,t,i){return e??t??i}function P0(e){var t=new Date(re.now());return e._useUTC?[t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate()]:[t.getFullYear(),t.getMonth(),t.getDate()]}function tn(e){var t,i,s=[],r,n,c;if(!e._d){for(r=P0(e),e._w&&e._a[Rt]==null&&e._a[Nt]==null&&I0(e),e._dayOfYear!=null&&(c=di(e._a[it],r[it]),(e._dayOfYear>Hi(c)||e._dayOfYear===0)&&(me(e)._overflowDayOfYear=!0),i=Wi(c,0,e._dayOfYear),e._a[Nt]=i.getUTCMonth(),e._a[Rt]=i.getUTCDate()),t=0;t<3&&e._a[t]==null;++t)e._a[t]=s[t]=r[t];for(;t<7;t++)e._a[t]=s[t]=e._a[t]==null?t===2?1:0:e._a[t];e._a[ze]===24&&e._a[St]===0&&e._a[Ht]===0&&e._a[si]===0&&(e._nextDay=!0,e._a[ze]=0),e._d=(e._useUTC?Wi:U_).apply(null,s),n=e._useUTC?e._d.getUTCDay():e._d.getDay(),e._tzm!=null&&e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm),e._nextDay&&(e._a[ze]=24),e._w&&typeof e._w.d<"u"&&e._w.d!==n&&(me(e).weekdayMismatch=!0)}}function I0(e){var t,i,s,r,n,c,o,a,h;t=e._w,t.GG!=null||t.W!=null||t.E!=null?(n=1,c=4,i=di(t.GG,e._a[it],Yi(Me(),1,4).year),s=di(t.W,1),r=di(t.E,1),(r<1||r>7)&&(a=!0)):(n=e._locale._week.dow,c=e._locale._week.doy,h=Yi(Me(),n,c),i=di(t.gg,e._a[it],h.year),s=di(t.w,h.week),t.d!=null?(r=t.d,(r<0||r>6)&&(a=!0)):t.e!=null?(r=t.e+n,(t.e<0||t.e>6)&&(a=!0)):r=n),s<1||s>jt(i,n,c)?me(e)._overflowWeeks=!0:a!=null?me(e)._overflowWeekday=!0:(o=Wa(i,s,r,n,c),e._a[it]=o.year,e._dayOfYear=o.dayOfYear)}re.ISO_8601=function(){};re.RFC_2822=function(){};function sn(e){if(e._f===re.ISO_8601){Ka(e);return}if(e._f===re.RFC_2822){Ga(e);return}e._a=[],me(e).empty=!0;var t=""+e._i,i,s,r,n,c,o=t.length,a=0,h,u;for(r=Ta(e._f,e._locale).match(Vr)||[],u=r.length,i=0;i<u;i++)n=r[i],s=(t.match(k_(n,e))||[])[0],s&&(c=t.substr(0,t.indexOf(s)),c.length>0&&me(e).unusedInput.push(c),t=t.slice(t.indexOf(s)+s.length),a+=s.length),mi[n]?(s?me(e).empty=!1:me(e).unusedTokens.push(n),D_(n,s,e)):e._strict&&!s&&me(e).unusedTokens.push(n);me(e).charsLeftOver=o-a,t.length>0&&me(e).unusedInput.push(t),e._a[ze]<=12&&me(e).bigHour===!0&&e._a[ze]>0&&(me(e).bigHour=void 0),me(e).parsedDateParts=e._a.slice(0),me(e).meridiem=e._meridiem,e._a[ze]=x0(e._locale,e._a[ze],e._meridiem),h=me(e).era,h!==null&&(e._a[it]=e._locale.erasConvertYear(h,e._a[it])),tn(e),en(e)}function x0(e,t,i){var s;return i==null?t:e.meridiemHour!=null?e.meridiemHour(t,i):(e.isPM!=null&&(s=e.isPM(i),s&&t<12&&(t+=12),!s&&t===12&&(t=0)),t)}function N0(e){var t,i,s,r,n,c,o=!1,a=e._f.length;if(a===0){me(e).invalidFormat=!0,e._d=new Date(NaN);return}for(r=0;r<a;r++)n=0,c=!1,t=zr({},e),e._useUTC!=null&&(t._useUTC=e._useUTC),t._f=e._f[r],sn(t),Yr(t)&&(c=!0),n+=me(t).charsLeftOver,n+=me(t).unusedTokens.length*10,me(t).score=n,o?n<s&&(s=n,i=t):(s==null||n<s||c)&&(s=n,i=t,c&&(o=!0));$t(e,i||t)}function H0(e){if(!e._d){var t=Kr(e._i),i=t.day===void 0?t.date:t.day;e._a=Da([t.year,t.month,i,t.hour,t.minute,t.second,t.millisecond],function(s){return s&&parseInt(s,10)}),tn(e)}}function F0(e){var t=new Zi(en($a(e)));return t._nextDay&&(t.add(1,"d"),t._nextDay=void 0),t}function $a(e){var t=e._i,i=e._f;return e._locale=e._locale||zt(e._l),t===null||i===void 0&&t===""?Ps({nullInput:!0}):(typeof t=="string"&&(e._i=t=e._locale.preparse(t)),Ct(t)?new Zi(en(t)):(Ji(t)?e._d=t:wt(i)?N0(e):i?sn(e):j0(e),Yr(e)||(e._d=null),e))}function j0(e){var t=e._i;lt(t)?e._d=new Date(re.now()):Ji(t)?e._d=new Date(t.valueOf()):typeof t=="string"?B0(e):wt(t)?(e._a=Da(t.slice(0),function(i){return parseInt(i,10)}),tn(e)):ni(t)?H0(e):Yt(t)?e._d=new Date(t):re.createFromInputFallback(e)}function Ja(e,t,i,s,r){var n={};return(t===!0||t===!1)&&(s=t,t=void 0),(i===!0||i===!1)&&(s=i,i=void 0),(ni(e)&&Wr(e)||wt(e)&&e.length===0)&&(e=void 0),n._isAMomentObject=!0,n._useUTC=n._isUTC=r,n._l=i,n._i=e,n._f=t,n._strict=s,F0(n)}function Me(e,t,i,s){return Ja(e,t,i,s,!1)}var U0=vt("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var e=Me.apply(null,arguments);return this.isValid()&&e.isValid()?e<this?this:e:Ps()}),W0=vt("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var e=Me.apply(null,arguments);return this.isValid()&&e.isValid()?e>this?this:e:Ps()});function Za(e,t){var i,s;if(t.length===1&&wt(t[0])&&(t=t[0]),!t.length)return Me();for(i=t[0],s=1;s<t.length;++s)(!t[s].isValid()||t[s][e](i))&&(i=t[s]);return i}function Y0(){var e=[].slice.call(arguments,0);return Za("isBefore",e)}function z0(){var e=[].slice.call(arguments,0);return Za("isAfter",e)}var q0=function(){return Date.now?Date.now():+new Date},Oi=["year","quarter","month","week","day","hour","minute","second","millisecond"];function V0(e){var t,i=!1,s,r=Oi.length;for(t in e)if(ke(e,t)&&!(Ne.call(Oi,t)!==-1&&(e[t]==null||!isNaN(e[t]))))return!1;for(s=0;s<r;++s)if(e[Oi[s]]){if(i)return!1;parseFloat(e[Oi[s]])!==be(e[Oi[s]])&&(i=!0)}return!0}function K0(){return this._isValid}function G0(){return Et(NaN)}function Ys(e){var t=Kr(e),i=t.year||0,s=t.quarter||0,r=t.month||0,n=t.week||t.isoWeek||0,c=t.day||0,o=t.hour||0,a=t.minute||0,h=t.second||0,u=t.millisecond||0;this._isValid=V0(t),this._milliseconds=+u+h*1e3+a*6e4+o*1e3*60*60,this._days=+c+n*7,this._months=+r+s*3+i*12,this._data={},this._locale=zt(),this._bubble()}function ps(e){return e instanceof Ys}function Rr(e){return e<0?Math.round(-1*e)*-1:Math.round(e)}function $0(e,t,i){var s=Math.min(e.length,t.length),r=Math.abs(e.length-t.length),n=0,c;for(c=0;c<s;c++)(i&&e[c]!==t[c]||!i&&be(e[c])!==be(t[c]))&&n++;return n+r}function Xa(e,t){ue(e,0,0,function(){var i=this.utcOffset(),s="+";return i<0&&(i=-i,s="-"),s+At(~~(i/60),2)+t+At(~~i%60,2)})}Xa("Z",":");Xa("ZZ","");oe("Z",js);oe("ZZ",js);Re(["Z","ZZ"],function(e,t,i){i._useUTC=!0,i._tzm=rn(js,e)});var J0=/([\+\-]|\d\d)/gi;function rn(e,t){var i=(t||"").match(e),s,r,n;return i===null?null:(s=i[i.length-1]||[],r=(s+"").match(J0)||["-",0,0],n=+(r[1]*60)+be(r[2]),n===0?0:r[0]==="+"?n:-n)}function nn(e,t){var i,s;return t._isUTC?(i=t.clone(),s=(Ct(e)||Ji(e)?e.valueOf():Me(e).valueOf())-i.valueOf(),i._d.setTime(i._d.valueOf()+s),re.updateOffset(i,!1),i):Me(e).local()}function Tr(e){return-Math.round(e._d.getTimezoneOffset())}re.updateOffset=function(){};function Z0(e,t,i){var s=this._offset||0,r;if(!this.isValid())return e!=null?this:NaN;if(e!=null){if(typeof e=="string"){if(e=rn(js,e),e===null)return this}else Math.abs(e)<16&&!i&&(e=e*60);return!this._isUTC&&t&&(r=Tr(this)),this._offset=e,this._isUTC=!0,r!=null&&this.add(r,"m"),s!==e&&(!t||this._changeInProgress?tl(this,Et(e-s,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,re.updateOffset(this,!0),this._changeInProgress=null)),this}else return this._isUTC?s:Tr(this)}function X0(e,t){return e!=null?(typeof e!="string"&&(e=-e),this.utcOffset(e,t),this):-this.utcOffset()}function Q0(e){return this.utcOffset(0,e)}function ep(e){return this._isUTC&&(this.utcOffset(0,e),this._isUTC=!1,e&&this.subtract(Tr(this),"m")),this}function tp(){if(this._tzm!=null)this.utcOffset(this._tzm,!1,!0);else if(typeof this._i=="string"){var e=rn(w_,this._i);e!=null?this.utcOffset(e):this.utcOffset(0,!0)}return this}function ip(e){return this.isValid()?(e=e?Me(e).utcOffset():0,(this.utcOffset()-e)%60===0):!1}function sp(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()}function rp(){if(!lt(this._isDSTShifted))return this._isDSTShifted;var e={},t;return zr(e,this),e=$a(e),e._a?(t=e._isUTC?Ot(e._a):Me(e._a),this._isDSTShifted=this.isValid()&&$0(e._a,t.toArray())>0):this._isDSTShifted=!1,this._isDSTShifted}function np(){return this.isValid()?!this._isUTC:!1}function op(){return this.isValid()?this._isUTC:!1}function Qa(){return this.isValid()?this._isUTC&&this._offset===0:!1}var ap=/^(-|\+)?(?:(\d*)[. ])?(\d+):(\d+)(?::(\d+)(\.\d*)?)?$/,lp=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;function Et(e,t){var i=e,s=null,r,n,c;return ps(e)?i={ms:e._milliseconds,d:e._days,M:e._months}:Yt(e)||!isNaN(+e)?(i={},t?i[t]=+e:i.milliseconds=+e):(s=ap.exec(e))?(r=s[1]==="-"?-1:1,i={y:0,d:be(s[Rt])*r,h:be(s[ze])*r,m:be(s[St])*r,s:be(s[Ht])*r,ms:be(Rr(s[si]*1e3))*r}):(s=lp.exec(e))?(r=s[1]==="-"?-1:1,i={y:ti(s[2],r),M:ti(s[3],r),w:ti(s[4],r),d:ti(s[5],r),h:ti(s[6],r),m:ti(s[7],r),s:ti(s[8],r)}):i==null?i={}:typeof i=="object"&&("from"in i||"to"in i)&&(c=cp(Me(i.from),Me(i.to)),i={},i.ms=c.milliseconds,i.M=c.months),n=new Ys(i),ps(e)&&ke(e,"_locale")&&(n._locale=e._locale),ps(e)&&ke(e,"_isValid")&&(n._isValid=e._isValid),n}Et.fn=Ys.prototype;Et.invalid=G0;function ti(e,t){var i=e&&parseFloat(e.replace(",","."));return(isNaN(i)?0:i)*t}function yo(e,t){var i={};return i.months=t.month()-e.month()+(t.year()-e.year())*12,e.clone().add(i.months,"M").isAfter(t)&&--i.months,i.milliseconds=+t-+e.clone().add(i.months,"M"),i}function cp(e,t){var i;return e.isValid()&&t.isValid()?(t=nn(t,e),e.isBefore(t)?i=yo(e,t):(i=yo(t,e),i.milliseconds=-i.milliseconds,i.months=-i.months),i):{milliseconds:0,months:0}}function el(e,t){return function(i,s){var r,n;return s!==null&&!isNaN(+s)&&(Ra(t,"moment()."+t+"(period, number) is deprecated. Please use moment()."+t+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."),n=i,i=s,s=n),r=Et(i,s),tl(this,r,e),this}}function tl(e,t,i,s){var r=t._milliseconds,n=Rr(t._days),c=Rr(t._months);e.isValid()&&(s=s??!0,c&&Ha(e,bs(e,"Month")+c*i),n&&Ma(e,"Date",bs(e,"Date")+n*i),r&&e._d.setTime(e._d.valueOf()+r*i),s&&re.updateOffset(e,n||c))}var hp=el(1,"add"),up=el(-1,"subtract");function il(e){return typeof e=="string"||e instanceof String}function fp(e){return Ct(e)||Ji(e)||il(e)||Yt(e)||_p(e)||dp(e)||e===null||e===void 0}function dp(e){var t=ni(e)&&!Wr(e),i=!1,s=["years","year","y","months","month","M","days","day","d","dates","date","D","hours","hour","h","minutes","minute","m","seconds","second","s","milliseconds","millisecond","ms"],r,n,c=s.length;for(r=0;r<c;r+=1)n=s[r],i=i||ke(e,n);return t&&i}function _p(e){var t=wt(e),i=!1;return t&&(i=e.filter(function(s){return!Yt(s)&&il(e)}).length===0),t&&i}function pp(e){var t=ni(e)&&!Wr(e),i=!1,s=["sameDay","nextDay","lastDay","nextWeek","lastWeek","sameElse"],r,n;for(r=0;r<s.length;r+=1)n=s[r],i=i||ke(e,n);return t&&i}function mp(e,t){var i=e.diff(t,"days",!0);return i<-6?"sameElse":i<-1?"lastWeek":i<0?"lastDay":i<1?"sameDay":i<2?"nextDay":i<7?"nextWeek":"sameElse"}function gp(e,t){arguments.length===1&&(arguments[0]?fp(arguments[0])?(e=arguments[0],t=void 0):pp(arguments[0])&&(t=arguments[0],e=void 0):(e=void 0,t=void 0));var i=e||Me(),s=nn(i,this).startOf("day"),r=re.calendarFormat(this,s)||"sameElse",n=t&&(Bt(t[r])?t[r].call(this,i):t[r]);return this.format(n||this.localeData().calendar(r,this,Me(i)))}function vp(){return new Zi(this)}function bp(e,t){var i=Ct(e)?e:Me(e);return this.isValid()&&i.isValid()?(t=bt(t)||"millisecond",t==="millisecond"?this.valueOf()>i.valueOf():i.valueOf()<this.clone().startOf(t).valueOf()):!1}function yp(e,t){var i=Ct(e)?e:Me(e);return this.isValid()&&i.isValid()?(t=bt(t)||"millisecond",t==="millisecond"?this.valueOf()<i.valueOf():this.clone().endOf(t).valueOf()<i.valueOf()):!1}function Sp(e,t,i,s){var r=Ct(e)?e:Me(e),n=Ct(t)?t:Me(t);return this.isValid()&&r.isValid()&&n.isValid()?(s=s||"()",(s[0]==="("?this.isAfter(r,i):!this.isBefore(r,i))&&(s[1]===")"?this.isBefore(n,i):!this.isAfter(n,i))):!1}function wp(e,t){var i=Ct(e)?e:Me(e),s;return this.isValid()&&i.isValid()?(t=bt(t)||"millisecond",t==="millisecond"?this.valueOf()===i.valueOf():(s=i.valueOf(),this.clone().startOf(t).valueOf()<=s&&s<=this.clone().endOf(t).valueOf())):!1}function Cp(e,t){return this.isSame(e,t)||this.isAfter(e,t)}function kp(e,t){return this.isSame(e,t)||this.isBefore(e,t)}function Ep(e,t,i){var s,r,n;if(!this.isValid())return NaN;if(s=nn(e,this),!s.isValid())return NaN;switch(r=(s.utcOffset()-this.utcOffset())*6e4,t=bt(t),t){case"year":n=ms(this,s)/12;break;case"month":n=ms(this,s);break;case"quarter":n=ms(this,s)/3;break;case"second":n=(this-s)/1e3;break;case"minute":n=(this-s)/6e4;break;case"hour":n=(this-s)/36e5;break;case"day":n=(this-s-r)/864e5;break;case"week":n=(this-s-r)/6048e5;break;default:n=this-s}return i?n:pt(n)}function ms(e,t){if(e.date()<t.date())return-ms(t,e);var i=(t.year()-e.year())*12+(t.month()-e.month()),s=e.clone().add(i,"months"),r,n;return t-s<0?(r=e.clone().add(i-1,"months"),n=(t-s)/(s-r)):(r=e.clone().add(i+1,"months"),n=(t-s)/(r-s)),-(i+n)||0}re.defaultFormat="YYYY-MM-DDTHH:mm:ssZ";re.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";function Dp(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")}function Lp(e){if(!this.isValid())return null;var t=e!==!0,i=t?this.clone().utc():this;return i.year()<0||i.year()>9999?_s(i,t?"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYYYY-MM-DD[T]HH:mm:ss.SSSZ"):Bt(Date.prototype.toISOString)?t?this.toDate().toISOString():new Date(this.valueOf()+this.utcOffset()*60*1e3).toISOString().replace("Z",_s(i,"Z")):_s(i,t?"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYY-MM-DD[T]HH:mm:ss.SSSZ")}function Rp(){if(!this.isValid())return"moment.invalid(/* "+this._i+" */)";var e="moment",t="",i,s,r,n;return this.isLocal()||(e=this.utcOffset()===0?"moment.utc":"moment.parseZone",t="Z"),i="["+e+'("]',s=0<=this.year()&&this.year()<=9999?"YYYY":"YYYYYY",r="-MM-DD[T]HH:mm:ss.SSS",n=t+'[")]',this.format(i+s+r+n)}function Tp(e){e||(e=this.isUtc()?re.defaultFormatUtc:re.defaultFormat);var t=_s(this,e);return this.localeData().postformat(t)}function Ap(e,t){return this.isValid()&&(Ct(e)&&e.isValid()||Me(e).isValid())?Et({to:this,from:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()}function Mp(e){return this.from(Me(),e)}function Op(e,t){return this.isValid()&&(Ct(e)&&e.isValid()||Me(e).isValid())?Et({from:this,to:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()}function Bp(e){return this.to(Me(),e)}function sl(e){var t;return e===void 0?this._locale._abbr:(t=zt(e),t!=null&&(this._locale=t),this)}var rl=vt("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(e){return e===void 0?this.localeData():this.locale(e)});function nl(){return this._locale}var ws=1e3,gi=60*ws,Cs=60*gi,ol=(365*400+97)*24*Cs;function vi(e,t){return(e%t+t)%t}function al(e,t,i){return e<100&&e>=0?new Date(e+400,t,i)-ol:new Date(e,t,i).valueOf()}function ll(e,t,i){return e<100&&e>=0?Date.UTC(e+400,t,i)-ol:Date.UTC(e,t,i)}function Pp(e){var t,i;if(e=bt(e),e===void 0||e==="millisecond"||!this.isValid())return this;switch(i=this._isUTC?ll:al,e){case"year":t=i(this.year(),0,1);break;case"quarter":t=i(this.year(),this.month()-this.month()%3,1);break;case"month":t=i(this.year(),this.month(),1);break;case"week":t=i(this.year(),this.month(),this.date()-this.weekday());break;case"isoWeek":t=i(this.year(),this.month(),this.date()-(this.isoWeekday()-1));break;case"day":case"date":t=i(this.year(),this.month(),this.date());break;case"hour":t=this._d.valueOf(),t-=vi(t+(this._isUTC?0:this.utcOffset()*gi),Cs);break;case"minute":t=this._d.valueOf(),t-=vi(t,gi);break;case"second":t=this._d.valueOf(),t-=vi(t,ws);break}return this._d.setTime(t),re.updateOffset(this,!0),this}function Ip(e){var t,i;if(e=bt(e),e===void 0||e==="millisecond"||!this.isValid())return this;switch(i=this._isUTC?ll:al,e){case"year":t=i(this.year()+1,0,1)-1;break;case"quarter":t=i(this.year(),this.month()-this.month()%3+3,1)-1;break;case"month":t=i(this.year(),this.month()+1,1)-1;break;case"week":t=i(this.year(),this.month(),this.date()-this.weekday()+7)-1;break;case"isoWeek":t=i(this.year(),this.month(),this.date()-(this.isoWeekday()-1)+7)-1;break;case"day":case"date":t=i(this.year(),this.month(),this.date()+1)-1;break;case"hour":t=this._d.valueOf(),t+=Cs-vi(t+(this._isUTC?0:this.utcOffset()*gi),Cs)-1;break;case"minute":t=this._d.valueOf(),t+=gi-vi(t,gi)-1;break;case"second":t=this._d.valueOf(),t+=ws-vi(t,ws)-1;break}return this._d.setTime(t),re.updateOffset(this,!0),this}function xp(){return this._d.valueOf()-(this._offset||0)*6e4}function Np(){return Math.floor(this.valueOf()/1e3)}function Hp(){return new Date(this.valueOf())}function Fp(){var e=this;return[e.year(),e.month(),e.date(),e.hour(),e.minute(),e.second(),e.millisecond()]}function jp(){var e=this;return{years:e.year(),months:e.month(),date:e.date(),hours:e.hours(),minutes:e.minutes(),seconds:e.seconds(),milliseconds:e.milliseconds()}}function Up(){return this.isValid()?this.toISOString():null}function Wp(){return Yr(this)}function Yp(){return $t({},me(this))}function zp(){return me(this).overflow}function qp(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}}ue("N",0,0,"eraAbbr");ue("NN",0,0,"eraAbbr");ue("NNN",0,0,"eraAbbr");ue("NNNN",0,0,"eraName");ue("NNNNN",0,0,"eraNarrow");ue("y",["y",1],"yo","eraYear");ue("y",["yy",2],0,"eraYear");ue("y",["yyy",3],0,"eraYear");ue("y",["yyyy",4],0,"eraYear");oe("N",on);oe("NN",on);oe("NNN",on);oe("NNNN",im);oe("NNNNN",sm);Re(["N","NN","NNN","NNNN","NNNNN"],function(e,t,i,s){var r=i._locale.erasParse(e,s,i._strict);r?me(i).era=r:me(i).invalidEra=e});oe("y",Ti);oe("yy",Ti);oe("yyy",Ti);oe("yyyy",Ti);oe("yo",rm);Re(["y","yy","yyy","yyyy"],it);Re(["yo"],function(e,t,i,s){var r;i._locale._eraYearOrdinalRegex&&(r=e.match(i._locale._eraYearOrdinalRegex)),i._locale.eraYearOrdinalParse?t[it]=i._locale.eraYearOrdinalParse(e,r):t[it]=parseInt(e,10)});function Vp(e,t){var i,s,r,n=this._eras||zt("en")._eras;for(i=0,s=n.length;i<s;++i){switch(typeof n[i].since){case"string":r=re(n[i].since).startOf("day"),n[i].since=r.valueOf();break}switch(typeof n[i].until){case"undefined":n[i].until=1/0;break;case"string":r=re(n[i].until).startOf("day").valueOf(),n[i].until=r.valueOf();break}}return n}function Kp(e,t,i){var s,r,n=this.eras(),c,o,a;for(e=e.toUpperCase(),s=0,r=n.length;s<r;++s)if(c=n[s].name.toUpperCase(),o=n[s].abbr.toUpperCase(),a=n[s].narrow.toUpperCase(),i)switch(t){case"N":case"NN":case"NNN":if(o===e)return n[s];break;case"NNNN":if(c===e)return n[s];break;case"NNNNN":if(a===e)return n[s];break}else if([c,o,a].indexOf(e)>=0)return n[s]}function Gp(e,t){var i=e.since<=e.until?1:-1;return t===void 0?re(e.since).year():re(e.since).year()+(t-e.offset)*i}function $p(){var e,t,i,s=this.localeData().eras();for(e=0,t=s.length;e<t;++e)if(i=this.clone().startOf("day").valueOf(),s[e].since<=i&&i<=s[e].until||s[e].until<=i&&i<=s[e].since)return s[e].name;return""}function Jp(){var e,t,i,s=this.localeData().eras();for(e=0,t=s.length;e<t;++e)if(i=this.clone().startOf("day").valueOf(),s[e].since<=i&&i<=s[e].until||s[e].until<=i&&i<=s[e].since)return s[e].narrow;return""}function Zp(){var e,t,i,s=this.localeData().eras();for(e=0,t=s.length;e<t;++e)if(i=this.clone().startOf("day").valueOf(),s[e].since<=i&&i<=s[e].until||s[e].until<=i&&i<=s[e].since)return s[e].abbr;return""}function Xp(){var e,t,i,s,r=this.localeData().eras();for(e=0,t=r.length;e<t;++e)if(i=r[e].since<=r[e].until?1:-1,s=this.clone().startOf("day").valueOf(),r[e].since<=s&&s<=r[e].until||r[e].until<=s&&s<=r[e].since)return(this.year()-re(r[e].since).year())*i+r[e].offset;return this.year()}function Qp(e){return ke(this,"_erasNameRegex")||an.call(this),e?this._erasNameRegex:this._erasRegex}function em(e){return ke(this,"_erasAbbrRegex")||an.call(this),e?this._erasAbbrRegex:this._erasRegex}function tm(e){return ke(this,"_erasNarrowRegex")||an.call(this),e?this._erasNarrowRegex:this._erasRegex}function on(e,t){return t.erasAbbrRegex(e)}function im(e,t){return t.erasNameRegex(e)}function sm(e,t){return t.erasNarrowRegex(e)}function rm(e,t){return t._eraYearOrdinalRegex||Ti}function an(){var e=[],t=[],i=[],s=[],r,n,c=this.eras();for(r=0,n=c.length;r<n;++r)t.push(ut(c[r].name)),e.push(ut(c[r].abbr)),i.push(ut(c[r].narrow)),s.push(ut(c[r].name)),s.push(ut(c[r].abbr)),s.push(ut(c[r].narrow));this._erasRegex=new RegExp("^("+s.join("|")+")","i"),this._erasNameRegex=new RegExp("^("+t.join("|")+")","i"),this._erasAbbrRegex=new RegExp("^("+e.join("|")+")","i"),this._erasNarrowRegex=new RegExp("^("+i.join("|")+")","i")}ue(0,["gg",2],0,function(){return this.weekYear()%100});ue(0,["GG",2],0,function(){return this.isoWeekYear()%100});function zs(e,t){ue(0,[e,e.length],0,t)}zs("gggg","weekYear");zs("ggggg","weekYear");zs("GGGG","isoWeekYear");zs("GGGGG","isoWeekYear");rt("weekYear","gg");rt("isoWeekYear","GG");nt("weekYear",1);nt("isoWeekYear",1);oe("G",Fs);oe("g",Fs);oe("GG",Oe,_t);oe("gg",Oe,_t);oe("GGGG",$r,Gr);oe("gggg",$r,Gr);oe("GGGGG",Hs,xs);oe("ggggg",Hs,xs);Qi(["gggg","ggggg","GGGG","GGGGG"],function(e,t,i,s){t[s.substr(0,2)]=be(e)});Qi(["gg","GG"],function(e,t,i,s){t[s]=re.parseTwoDigitYear(e)});function nm(e){return cl.call(this,e,this.week(),this.weekday(),this.localeData()._week.dow,this.localeData()._week.doy)}function om(e){return cl.call(this,e,this.isoWeek(),this.isoWeekday(),1,4)}function am(){return jt(this.year(),1,4)}function lm(){return jt(this.isoWeekYear(),1,4)}function cm(){var e=this.localeData()._week;return jt(this.year(),e.dow,e.doy)}function hm(){var e=this.localeData()._week;return jt(this.weekYear(),e.dow,e.doy)}function cl(e,t,i,s,r){var n;return e==null?Yi(this,s,r).year:(n=jt(e,s,r),t>n&&(t=n),um.call(this,e,t,i,s,r))}function um(e,t,i,s,r){var n=Wa(e,t,i,s,r),c=Wi(n.year,0,n.dayOfYear);return this.year(c.getUTCFullYear()),this.month(c.getUTCMonth()),this.date(c.getUTCDate()),this}ue("Q",0,"Qo","quarter");rt("quarter","Q");nt("quarter",7);oe("Q",Oa);Re("Q",function(e,t){t[Nt]=(be(e)-1)*3});function fm(e){return e==null?Math.ceil((this.month()+1)/3):this.month((e-1)*3+this.month()%3)}ue("D",["DD",2],"Do","date");rt("date","D");nt("date",9);oe("D",Oe);oe("DD",Oe,_t);oe("Do",function(e,t){return e?t._dayOfMonthOrdinalParse||t._ordinalParse:t._dayOfMonthOrdinalParseLenient});Re(["D","DD"],Rt);Re("Do",function(e,t){t[Rt]=be(e.match(Oe)[0])});var hl=Ri("Date",!0);ue("DDD",["DDDD",3],"DDDo","dayOfYear");rt("dayOfYear","DDD");nt("dayOfYear",4);oe("DDD",Ns);oe("DDDD",Ba);Re(["DDD","DDDD"],function(e,t,i){i._dayOfYear=be(e)});function dm(e){var t=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return e==null?t:this.add(e-t,"d")}ue("m",["mm",2],0,"minute");rt("minute","m");nt("minute",14);oe("m",Oe);oe("mm",Oe,_t);Re(["m","mm"],St);var _m=Ri("Minutes",!1);ue("s",["ss",2],0,"second");rt("second","s");nt("second",15);oe("s",Oe);oe("ss",Oe,_t);Re(["s","ss"],Ht);var pm=Ri("Seconds",!1);ue("S",0,0,function(){return~~(this.millisecond()/100)});ue(0,["SS",2],0,function(){return~~(this.millisecond()/10)});ue(0,["SSS",3],0,"millisecond");ue(0,["SSSS",4],0,function(){return this.millisecond()*10});ue(0,["SSSSS",5],0,function(){return this.millisecond()*100});ue(0,["SSSSSS",6],0,function(){return this.millisecond()*1e3});ue(0,["SSSSSSS",7],0,function(){return this.millisecond()*1e4});ue(0,["SSSSSSSS",8],0,function(){return this.millisecond()*1e5});ue(0,["SSSSSSSSS",9],0,function(){return this.millisecond()*1e6});rt("millisecond","ms");nt("millisecond",16);oe("S",Ns,Oa);oe("SS",Ns,_t);oe("SSS",Ns,Ba);var Jt,ul;for(Jt="SSSS";Jt.length<=9;Jt+="S")oe(Jt,Ti);function mm(e,t){t[si]=be(("0."+e)*1e3)}for(Jt="S";Jt.length<=9;Jt+="S")Re(Jt,mm);ul=Ri("Milliseconds",!1);ue("z",0,0,"zoneAbbr");ue("zz",0,0,"zoneName");function gm(){return this._isUTC?"UTC":""}function vm(){return this._isUTC?"Coordinated Universal Time":""}var Q=Zi.prototype;Q.add=hp;Q.calendar=gp;Q.clone=vp;Q.diff=Ep;Q.endOf=Ip;Q.format=Tp;Q.from=Ap;Q.fromNow=Mp;Q.to=Op;Q.toNow=Bp;Q.get=y_;Q.invalidAt=zp;Q.isAfter=bp;Q.isBefore=yp;Q.isBetween=Sp;Q.isSame=wp;Q.isSameOrAfter=Cp;Q.isSameOrBefore=kp;Q.isValid=Wp;Q.lang=rl;Q.locale=sl;Q.localeData=nl;Q.max=W0;Q.min=U0;Q.parsingFlags=Yp;Q.set=S_;Q.startOf=Pp;Q.subtract=up;Q.toArray=Fp;Q.toObject=jp;Q.toDate=Hp;Q.toISOString=Lp;Q.inspect=Rp;typeof Symbol<"u"&&Symbol.for!=null&&(Q[Symbol.for("nodejs.util.inspect.custom")]=function(){return"Moment<"+this.format()+">"});Q.toJSON=Up;Q.toString=Dp;Q.unix=Np;Q.valueOf=xp;Q.creationData=qp;Q.eraName=$p;Q.eraNarrow=Jp;Q.eraAbbr=Zp;Q.eraYear=Xp;Q.year=Ua;Q.isLeapYear=j_;Q.weekYear=nm;Q.isoWeekYear=om;Q.quarter=Q.quarters=fm;Q.month=Fa;Q.daysInMonth=N_;Q.week=Q.weeks=V_;Q.isoWeek=Q.isoWeeks=K_;Q.weeksInYear=cm;Q.weeksInWeekYear=hm;Q.isoWeeksInYear=am;Q.isoWeeksInISOWeekYear=lm;Q.date=hl;Q.day=Q.days=o0;Q.weekday=a0;Q.isoWeekday=l0;Q.dayOfYear=dm;Q.hour=Q.hours=p0;Q.minute=Q.minutes=_m;Q.second=Q.seconds=pm;Q.millisecond=Q.milliseconds=ul;Q.utcOffset=Z0;Q.utc=Q0;Q.local=ep;Q.parseZone=tp;Q.hasAlignedHourOffset=ip;Q.isDST=sp;Q.isLocal=np;Q.isUtcOffset=op;Q.isUtc=Qa;Q.isUTC=Qa;Q.zoneAbbr=gm;Q.zoneName=vm;Q.dates=vt("dates accessor is deprecated. Use date instead.",hl);Q.months=vt("months accessor is deprecated. Use month instead",Fa);Q.years=vt("years accessor is deprecated. Use year instead",Ua);Q.zone=vt("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",X0);Q.isDSTShifted=vt("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",rp);function bm(e){return Me(e*1e3)}function ym(){return Me.apply(null,arguments).parseZone()}function fl(e){return e}var Ee=qr.prototype;Ee.calendar=o_;Ee.longDateFormat=h_;Ee.invalidDate=f_;Ee.ordinal=p_;Ee.preparse=fl;Ee.postformat=fl;Ee.relativeTime=g_;Ee.pastFuture=v_;Ee.set=r_;Ee.eras=Vp;Ee.erasParse=Kp;Ee.erasConvertYear=Gp;Ee.erasAbbrRegex=em;Ee.erasNameRegex=Qp;Ee.erasNarrowRegex=tm;Ee.months=B_;Ee.monthsShort=P_;Ee.monthsParse=x_;Ee.monthsRegex=F_;Ee.monthsShortRegex=H_;Ee.week=W_;Ee.firstDayOfYear=q_;Ee.firstDayOfWeek=z_;Ee.weekdays=t0;Ee.weekdaysMin=s0;Ee.weekdaysShort=i0;Ee.weekdaysParse=n0;Ee.weekdaysRegex=c0;Ee.weekdaysShortRegex=h0;Ee.weekdaysMinRegex=u0;Ee.isPM=d0;Ee.meridiem=m0;function ks(e,t,i,s){var r=zt(),n=Ot().set(s,t);return r[i](n,e)}function dl(e,t,i){if(Yt(e)&&(t=e,e=void 0),e=e||"",t!=null)return ks(e,t,i,"month");var s,r=[];for(s=0;s<12;s++)r[s]=ks(e,s,i,"month");return r}function ln(e,t,i,s){typeof e=="boolean"?(Yt(t)&&(i=t,t=void 0),t=t||""):(t=e,i=t,e=!1,Yt(t)&&(i=t,t=void 0),t=t||"");var r=zt(),n=e?r._week.dow:0,c,o=[];if(i!=null)return ks(t,(i+n)%7,s,"day");for(c=0;c<7;c++)o[c]=ks(t,(c+n)%7,s,"day");return o}function Sm(e,t){return dl(e,t,"months")}function wm(e,t){return dl(e,t,"monthsShort")}function Cm(e,t,i){return ln(e,t,i,"weekdays")}function km(e,t,i){return ln(e,t,i,"weekdaysShort")}function Em(e,t,i){return ln(e,t,i,"weekdaysMin")}Xt("en",{eras:[{since:"0001-01-01",until:1/0,offset:1,name:"Anno Domini",narrow:"AD",abbr:"AD"},{since:"0000-12-31",until:-1/0,offset:1,name:"Before Christ",narrow:"BC",abbr:"BC"}],dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(e){var t=e%10,i=be(e%100/10)===1?"th":t===1?"st":t===2?"nd":t===3?"rd":"th";return e+i}});re.lang=vt("moment.lang is deprecated. Use moment.locale instead.",Xt);re.langData=vt("moment.langData is deprecated. Use moment.localeData instead.",zt);var Pt=Math.abs;function Dm(){var e=this._data;return this._milliseconds=Pt(this._milliseconds),this._days=Pt(this._days),this._months=Pt(this._months),e.milliseconds=Pt(e.milliseconds),e.seconds=Pt(e.seconds),e.minutes=Pt(e.minutes),e.hours=Pt(e.hours),e.months=Pt(e.months),e.years=Pt(e.years),this}function _l(e,t,i,s){var r=Et(t,i);return e._milliseconds+=s*r._milliseconds,e._days+=s*r._days,e._months+=s*r._months,e._bubble()}function Lm(e,t){return _l(this,e,t,1)}function Rm(e,t){return _l(this,e,t,-1)}function So(e){return e<0?Math.floor(e):Math.ceil(e)}function Tm(){var e=this._milliseconds,t=this._days,i=this._months,s=this._data,r,n,c,o,a;return e>=0&&t>=0&&i>=0||e<=0&&t<=0&&i<=0||(e+=So(Ar(i)+t)*864e5,t=0,i=0),s.milliseconds=e%1e3,r=pt(e/1e3),s.seconds=r%60,n=pt(r/60),s.minutes=n%60,c=pt(n/60),s.hours=c%24,t+=pt(c/24),a=pt(pl(t)),i+=a,t-=So(Ar(a)),o=pt(i/12),i%=12,s.days=t,s.months=i,s.years=o,this}function pl(e){return e*4800/146097}function Ar(e){return e*146097/4800}function Am(e){if(!this.isValid())return NaN;var t,i,s=this._milliseconds;if(e=bt(e),e==="month"||e==="quarter"||e==="year")switch(t=this._days+s/864e5,i=this._months+pl(t),e){case"month":return i;case"quarter":return i/3;case"year":return i/12}else switch(t=this._days+Math.round(Ar(this._months)),e){case"week":return t/7+s/6048e5;case"day":return t+s/864e5;case"hour":return t*24+s/36e5;case"minute":return t*1440+s/6e4;case"second":return t*86400+s/1e3;case"millisecond":return Math.floor(t*864e5)+s;default:throw new Error("Unknown unit "+e)}}function Mm(){return this.isValid()?this._milliseconds+this._days*864e5+this._months%12*2592e6+be(this._months/12)*31536e6:NaN}function qt(e){return function(){return this.as(e)}}var Om=qt("ms"),Bm=qt("s"),Pm=qt("m"),Im=qt("h"),xm=qt("d"),Nm=qt("w"),Hm=qt("M"),Fm=qt("Q"),jm=qt("y");function Um(){return Et(this)}function Wm(e){return e=bt(e),this.isValid()?this[e+"s"]():NaN}function ai(e){return function(){return this.isValid()?this._data[e]:NaN}}var Ym=ai("milliseconds"),zm=ai("seconds"),qm=ai("minutes"),Vm=ai("hours"),Km=ai("days"),Gm=ai("months"),$m=ai("years");function Jm(){return pt(this.days()/7)}var It=Math.round,_i={ss:44,s:45,m:45,h:22,d:26,w:null,M:11};function Zm(e,t,i,s,r){return r.relativeTime(t||1,!!i,e,s)}function Xm(e,t,i,s){var r=Et(e).abs(),n=It(r.as("s")),c=It(r.as("m")),o=It(r.as("h")),a=It(r.as("d")),h=It(r.as("M")),u=It(r.as("w")),f=It(r.as("y")),b=n<=i.ss&&["s",n]||n<i.s&&["ss",n]||c<=1&&["m"]||c<i.m&&["mm",c]||o<=1&&["h"]||o<i.h&&["hh",o]||a<=1&&["d"]||a<i.d&&["dd",a];return i.w!=null&&(b=b||u<=1&&["w"]||u<i.w&&["ww",u]),b=b||h<=1&&["M"]||h<i.M&&["MM",h]||f<=1&&["y"]||["yy",f],b[2]=t,b[3]=+e>0,b[4]=s,Zm.apply(null,b)}function Qm(e){return e===void 0?It:typeof e=="function"?(It=e,!0):!1}function e1(e,t){return _i[e]===void 0?!1:t===void 0?_i[e]:(_i[e]=t,e==="s"&&(_i.ss=t-1),!0)}function t1(e,t){if(!this.isValid())return this.localeData().invalidDate();var i=!1,s=_i,r,n;return typeof e=="object"&&(t=e,e=!1),typeof e=="boolean"&&(i=e),typeof t=="object"&&(s=Object.assign({},_i,t),t.s!=null&&t.ss==null&&(s.ss=t.s-1)),r=this.localeData(),n=Xm(this,!i,s,r),i&&(n=r.pastFuture(+this,n)),r.postformat(n)}var ar=Math.abs;function hi(e){return(e>0)-(e<0)||+e}function qs(){if(!this.isValid())return this.localeData().invalidDate();var e=ar(this._milliseconds)/1e3,t=ar(this._days),i=ar(this._months),s,r,n,c,o=this.asSeconds(),a,h,u,f;return o?(s=pt(e/60),r=pt(s/60),e%=60,s%=60,n=pt(i/12),i%=12,c=e?e.toFixed(3).replace(/\.?0+$/,""):"",a=o<0?"-":"",h=hi(this._months)!==hi(o)?"-":"",u=hi(this._days)!==hi(o)?"-":"",f=hi(this._milliseconds)!==hi(o)?"-":"",a+"P"+(n?h+n+"Y":"")+(i?h+i+"M":"")+(t?u+t+"D":"")+(r||s||e?"T":"")+(r?f+r+"H":"")+(s?f+s+"M":"")+(e?f+c+"S":"")):"P0D"}var ye=Ys.prototype;ye.isValid=K0;ye.abs=Dm;ye.add=Lm;ye.subtract=Rm;ye.as=Am;ye.asMilliseconds=Om;ye.asSeconds=Bm;ye.asMinutes=Pm;ye.asHours=Im;ye.asDays=xm;ye.asWeeks=Nm;ye.asMonths=Hm;ye.asQuarters=Fm;ye.asYears=jm;ye.valueOf=Mm;ye._bubble=Tm;ye.clone=Um;ye.get=Wm;ye.milliseconds=Ym;ye.seconds=zm;ye.minutes=qm;ye.hours=Vm;ye.days=Km;ye.weeks=Jm;ye.months=Gm;ye.years=$m;ye.humanize=t1;ye.toISOString=qs;ye.toString=qs;ye.toJSON=qs;ye.locale=sl;ye.localeData=nl;ye.toIsoString=vt("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",qs);ye.lang=rl;ue("X",0,0,"unix");ue("x",0,0,"valueOf");oe("x",Fs);oe("X",C_);Re("X",function(e,t,i){i._d=new Date(parseFloat(e)*1e3)});Re("x",function(e,t,i){i._d=new Date(be(e))});//! moment.js
re.version="2.29.4";i_(Me);re.fn=Q;re.min=Y0;re.max=z0;re.now=q0;re.utc=Ot;re.unix=bm;re.months=Sm;re.isDate=Ji;re.locale=Xt;re.invalid=Ps;re.duration=Et;re.isMoment=Ct;re.weekdays=Cm;re.parseZone=ym;re.localeData=zt;re.isDuration=ps;re.monthsShort=wm;re.weekdaysMin=Em;re.defineLocale=Qr;re.updateLocale=y0;re.locales=S0;re.weekdaysShort=km;re.normalizeUnits=bt;re.relativeTimeRounding=Qm;re.relativeTimeThreshold=e1;re.calendarFormat=mp;re.prototype=Q;re.HTML5_FMT={DATETIME_LOCAL:"YYYY-MM-DDTHH:mm",DATETIME_LOCAL_SECONDS:"YYYY-MM-DDTHH:mm:ss",DATETIME_LOCAL_MS:"YYYY-MM-DDTHH:mm:ss.SSS",DATE:"YYYY-MM-DD",TIME:"HH:mm",TIME_SECONDS:"HH:mm:ss",TIME_MS:"HH:mm:ss.SSS",WEEK:"GGGG-[W]WW",MONTH:"YYYY-MM"};function i1(e){let t,i,s,r;const n=[e[1]];let c={};for(let o=0;o<n.length;o+=1)c=Ei(c,n[o]);return t=new Ad({props:c}),s=new Qd({props:{roots:e[0]}}),s.$on("open",e[2]),s.$on("menu",e[3]),s.$on("fold",r1),s.$on("unfold",n1),{c(){ne(t.$$.fragment),i=he(),ne(s.$$.fragment)},m(o,a){ie(t,o,a),Z(o,i,a),ie(s,o,a),r=!0},p(o,[a]){const h=a&2?$i(n,[Os(o[1])]):{};t.$set(h);const u={};a&1&&(u.roots=o[0]),s.$set(u)},i(o){r||(Y(t.$$.fragment,o),Y(s.$$.fragment,o),r=!0)},o(o){q(t.$$.fragment,o),q(s.$$.fragment,o),r=!1},d(o){o&&J(i),se(t,o),se(s,o)}}}const rs="/",Gt="/respurces",s1="#icon-jupyter-client-simple",ns="/kernelspecs",wo="#icon-jupyter-client-kernelspec",Bi="/kernels",Co="#icon-jupyter-client-kernel",Pi="/sessions",ko="#icon-jupyter-client-session",lr="YYYY-MM-DD hh:mm:ss";function r1(e){e.detail.props.folded.set(!0)}async function n1(e){e.detail.props.folded.set(!1)}function o1(e,t,i){let{plugin:s}=t,{kernelspecs:r={default:"",kernelspecs:{}}}=t,{kernels:n=[]}=t,{sessions:c=[]}=t,{currentSpec:o=""}=t,{currentKernel:a=""}=t,{currentSession:h=""}=t,{currentDocument:u=""}=t;async function f(C,S,k){const D=[];for(const[O,A]of Object.entries(C.kernelspecs)){if(!A)continue;const T=`${Gt}/${A.name}`,B={type:_e.Folder,name:A.name,path:T,directory:Gt,focus:A.name===o,folded:!1,icon:s.kernelName2logoObjectURL.has(A.name)?s.kernelName2logoObjectURL.get(A.name):await s.loadKernelSpecIcon(A),iconAriaLabel:A.language,text:A.name,textAriaLabel:A.display_name};B.children=await(async()=>{var L;const G=[],V=await((L=s.bridge)==null?void 0:L.call("jupyter.kernels.running"));for(const R of V??[]){if(R.name!==A.name)continue;const M=`${T}/${R.id}`,P=re(R.last_activity),z={type:_e.Folder,name:R.id,path:M,directory:T,focus:R.id===a,folded:!1,icon:`#icon-jupyter-client-kernel-${R.execution_state}`,iconAriaLabel:R.execution_state,text:R.name,textAriaLabel:`${P.format(lr)}<br/>${P.fromNow()}`,title:R.id};z.children=await(async()=>{var X,ae;const j=[],de=await((X=s.bridge)==null?void 0:X.call("jupyter.sessions.running"));for(const I of de??[]){if(((ae=I.kernel)==null?void 0:ae.id)!==R.id)continue;const x=`${M}/${I.id}`,H={type:_e.Folder,name:I.id,path:x,directory:M,focus:I.id===h,folded:!1,icon:`#icon-jupyter-client-session-${I.type}`,iconAriaLabel:I.type,text:I.name,textAriaLabel:I.path,title:I.id};H.children=await(async()=>{const $=[],ee=s.session2docs.get(I.id);if(ee&&ee.size>0)for(const Se of ee.values()){if(!s.doc2info.has(Se)){const De=await s.client.getDocInfo({id:Se});s.doc2info.set(Se,De.data)}const te=s.doc2info.get(Se),Ae=`${x}/${te.id}`,Ue=re(te.ial.updated,"YYYYMMDDhhmmss"),Ie={type:_e.File,name:te.id,path:Ae,directory:x,focus:te.id===u,icon:/^[1-9a-f]+$/.test(te.icon)?t_(te.icon):te.icon?`/emojis/${te.icon}`:"📄",text:te.name,textAriaLabel:`${Ue.format(lr)}<br/>${P.fromNow()}`,title:te.name};$.push(Ie)}return $})(),H.count=H.children.length,j.push(H)}return j})(),z.count=z.children.length,G.push(z)}return G})(),B.count=B.children.length,D.push(B)}return D}async function b(C){const S=[];for(const[k,D]of Object.entries(C.kernelspecs)){if(!D)continue;const O={type:_e.File,name:k,path:`${ns}/${k}`,directory:ns,focus:k===o,icon:wo,text:k,textAriaLabel:D.display_name},A=s.kernelName2logoObjectURL.get(k);A?O.icon=A:O.icon=await s.loadKernelSpecIcon(D),O.iconAriaLabel=D.language,S.push(O)}return S}function y(C){const S=[];for(const k of C){const D=re(k.last_activity);S.push({type:_e.File,name:k.id,path:`${Bi}/${k.id}`,directory:Bi,focus:k.id===a,icon:`#icon-jupyter-client-kernel-${k.execution_state}`,iconAriaLabel:k.execution_state,text:k.name,textAriaLabel:`${D.format(lr)}<br/>${D.fromNow()}`,symlinkIcon:s.kernelName2logoObjectURL.get(k.name)??Co,symlinkAriaLabel:s.kernelName2language.get(k.name),symlink:!0,count:k.connections,title:k.id})}return S}function v(C){var k,D,O,A,T;const S=[];for(const B of C)S.push({type:_e.File,name:B.id,path:`${Pi}/${B.id}`,directory:Pi,focus:B.id===h,icon:`#icon-jupyter-client-session-${B.type}`,iconAriaLabel:B.type,text:B.name,textAriaLabel:`${(k=B.kernel)==null?void 0:k.name}<br/>${B.path}`,symlink:!0,symlinkIcon:s.kernelName2logoObjectURL.get(((D=B.kernel)==null?void 0:D.name)??"")??ko,symlinkAriaLabel:s.kernelName2language.get(((O=B.kernel)==null?void 0:O.name)??""),count:((A=s.session2docs.get(B.id))==null?void 0:A.size)??0,countAriaLabel:(T=B.kernel)==null?void 0:T.execution_state,title:B.id});return S}function m(C,S,k,D){var O;(O=g[0].children)==null||O.forEach((A,T)=>{var B;(B=A.children)==null||B.forEach((G,V)=>{var L;(L=G.children)==null||L.forEach((R,M)=>{var P;(P=R.children)==null||P.forEach((z,j)=>{i(0,g[0].children[T].children[V].children[M].children[j].focus=z.name===D,g)}),i(0,g[0].children[T].children[V].children[M].focus=R.name===k,g)}),i(0,g[0].children[T].children[V].focus=G.name===S,g)}),i(0,g[0].children[T].focus=A.name===C,g)})}function l(C){var S;(S=g[1].children)==null||S.forEach((k,D)=>{i(0,g[1].children[D].focus=k.name===C,g)})}function _(C){var S;(S=g[2].children)==null||S.forEach((k,D)=>{i(0,g[2].children[D].focus=k.name===C,g)})}function p(C){var S;(S=g[3].children)==null||S.forEach((k,D)=>{i(0,g[3].children[D].focus=k.name===C,g)})}const d={logo:"#icon-jupyter-client",title:s.i18n.dock.title,icons:[{icon:"#iconRefresh",type:"refresh",ariaLabel:s.i18n.dock.refresh.ariaLabel,tooltipsDirection:wi.sw,onClick:async(C,S,k)=>{await s.jupyterForceRefresh()}},{icon:"#iconMin",type:"min",ariaLabel:`${globalThis.siyuan.languages.min} ${s.siyuan.adaptHotkey("⌘W")}`,tooltipsDirection:wi.sw}]};let g=[{type:_e.Root,name:"respurces",path:Gt,directory:rs,depth:0,folded:!1,icon:s1,text:s.i18n.dock.resources.text},{type:_e.Root,name:"kernelspec",path:ns,directory:rs,depth:0,folded:!1,icon:wo,text:s.i18n.dock.kernelspecs.text},{type:_e.Root,name:"kernels",path:Bi,directory:rs,depth:0,folded:!1,icon:Co,text:s.i18n.dock.kernels.text},{type:_e.Root,name:"sessions",path:Pi,directory:rs,depth:0,folded:!1,icon:ko,text:s.i18n.dock.sessions.text}];jr(()=>{for(const C of s.kernelName2logoObjectURL.values())URL.revokeObjectURL(C);s.kernelName2logoObjectURL.clear()});function w(C){const S=C.detail.props,k=ei(S.name),D=ei(S.path),O=ei(S.depth);D.startsWith(Gt)&&O===4&&s.siyuan.openTab({app:s.app,doc:{id:k,action:["cb-get-focus","cb-get-hl"]},keepCursor:!1,removeCurrentTab:!1})}async function E(C){const S=C.detail.props,k=ei(S.name),D=ei(S.path),O=ei(S.depth),A=ei(S.directory),T=[];if((D===ns||D.startsWith(Gt)&&O===0)&&T.push({icon:"iconRefresh",label:s.i18n.dock.refresh.label,click:async()=>{var B;await((B=s.bridge)==null?void 0:B.call("jupyter.kernelspecs.refreshSpecs"))}}),D===Bi&&(T.push({icon:"iconRefresh",label:s.i18n.dock.refresh.label,click:async()=>{var B;await((B=s.bridge)==null?void 0:B.call("jupyter.kernels.refreshRunning"))}}),T.push({type:"separator"}),T.push({icon:"iconClose",label:s.i18n.dock.menu.shutdownAllKernels.label,click:async()=>{var B,G;await((B=s.bridge)==null?void 0:B.call("jupyter.kernels.shutdownAll")),await((G=s.bridge)==null?void 0:G.call("jupyter.sessions.refreshRunning"))}})),(A===Bi||D.startsWith(Gt)&&O===2)&&T.push({icon:"iconClose",label:s.i18n.dock.menu.shutdownKernel.label,click:async()=>{var B,G;await((B=s.bridge)==null?void 0:B.call("jupyter.kernels.shutdown",k)),await((G=s.bridge)==null?void 0:G.call("jupyter.sessions.refreshRunning"))}}),D===Pi&&(T.push({icon:"iconRefresh",label:s.i18n.dock.refresh.label,click:async()=>{var B;await((B=s.bridge)==null?void 0:B.call("jupyter.sessions.refreshRunning"))}}),T.push({type:"separator"}),T.push({icon:"iconClose",label:s.i18n.dock.menu.shutdownAllSessions.label,click:async()=>{var B,G;await((B=s.bridge)==null?void 0:B.call("jupyter.sessions.shutdownAll")),await((G=s.bridge)==null?void 0:G.call("jupyter.kernels.refreshRunning"))}})),(A===Pi||D.startsWith(Gt)&&O===3)&&T.push({icon:"iconClose",label:s.i18n.dock.menu.shutdownSession.label,click:async()=>{var B,G;await((B=s.bridge)==null?void 0:B.call("jupyter.sessions.shutdown",k)),await((G=s.bridge)==null?void 0:G.call("jupyter.kernels.refreshRunning"))}}),D.startsWith(Gt)&&O===4){const G=(await s.client.getBlockAttrs({id:k})).data;T.push({icon:"iconOpenWindow",label:s.i18n.menu.open.label,submenu:s.buildOpenDocumentMenuItems(k)}),T.push({type:"separator"}),T.push(...s.buildJupyterDocumentMenuItems(k,G,s.doc2session.get(k),{isDocumentBlock:!0,isMultiBlock:!1,id:k}))}if(e_(T),T.length>0){const B=new s.siyuan.Menu;T.forEach(V=>B.addItem(V));const G=C.detail.e;B.open({x:G.clientX,y:G.clientY,isLeft:!1})}}return e.$$set=C=>{"plugin"in C&&i(4,s=C.plugin),"kernelspecs"in C&&i(5,r=C.kernelspecs),"kernels"in C&&i(6,n=C.kernels),"sessions"in C&&i(7,c=C.sessions),"currentSpec"in C&&i(8,o=C.currentSpec),"currentKernel"in C&&i(9,a=C.currentKernel),"currentSession"in C&&i(10,h=C.currentSession),"currentDocument"in C&&i(11,u=C.currentDocument)},e.$$.update=()=>{e.$$.dirty&224&&(i(0,g[0].count=Object.keys(r.kernelspecs).length,g),f(r).then(C=>{i(0,g[0].children=C,g)})),e.$$.dirty&224&&(i(0,g[1].count=Object.keys(r.kernelspecs).length,g),b(r).then(async C=>{i(0,g[1].children=C,g),i(0,g[2].children=y(n),g),i(0,g[3].children=v(c),g)})),e.$$.dirty&64&&(i(0,g[2].count=n.length,g),i(0,g[2].children=y(n),g)),e.$$.dirty&128&&(i(0,g[3].count=c.length,g),i(0,g[3].children=v(c),g)),e.$$.dirty&3840&&(l(o),_(a),p(h),m(o,a,h,u))},[g,d,w,E,s,r,n,c,o,a,h,u]}class a1 extends Fe{constructor(t){super(),He(this,t,o1,i1,Pe,{plugin:4,kernelspecs:5,kernels:6,sessions:7,currentSpec:8,currentKernel:9,currentSession:10,currentDocument:11})}}function l1(e){let t,i,s,r,n,c,o,a,h,u,f,b,y;const v=e[8].default,m=Xe(v,e,e[7],null);return{c(){t=le("div"),m&&m.c(),i=he(),s=le("div"),r=le("button"),n=ot(e[1]),c=he(),o=le("div"),a=he(),h=le("button"),u=ot(e[2]),F(t,"class","b3-dialog__content"),dt(t,"user-select",e[0]?"auto":"none"),F(r,"class","b3-button b3-button--cancel"),F(o,"class","fn__space"),F(h,"class","b3-button b3-button--text"),F(s,"class","b3-dialog__action")},m(l,_){Z(l,t,_),m&&m.m(t,null),Z(l,i,_),Z(l,s,_),ce(s,r),ce(r,n),e[9](r),ce(s,c),ce(s,o),ce(s,a),ce(s,h),ce(h,u),e[10](h),f=!0,b||(y=[ge(r,"click",e[5]),ge(h,"click",e[6])],b=!0)},p(l,[_]){m&&m.p&&(!f||_&128)&&et(m,v,l,l[7],f?Qe(v,l[7],_,null):tt(l[7]),null),_&1&&dt(t,"user-select",l[0]?"auto":"none"),(!f||_&2)&&Tt(n,l[1]),(!f||_&4)&&Tt(u,l[2])},i(l){f||(Y(m,l),f=!0)},o(l){q(m,l),f=!1},d(l){l&&(J(t),J(i),J(s)),m&&m.d(l),e[9](null),e[10](null),b=!1,Ye(y)}}}function c1(e,t,i){var m,l,_,p;let{$$slots:s={},$$scope:r}=t,{selectable:n=!0}=t,{cancelButtonText:c=((l=(m=globalThis.siyuan)==null?void 0:m.languages)==null?void 0:l.cancel)??"Cancel"}=t,{confirmButtonText:o=((p=(_=globalThis.siyuan)==null?void 0:_.languages)==null?void 0:p.confirm)??"Confirm"}=t,a,h;const u=Qt();function f(d){u("cancel",{event:d})}function b(d){u("confirm",{event:d})}function y(d){Wt[d?"unshift":"push"](()=>{a=d,i(3,a)})}function v(d){Wt[d?"unshift":"push"](()=>{h=d,i(4,h)})}return e.$$set=d=>{"selectable"in d&&i(0,n=d.selectable),"cancelButtonText"in d&&i(1,c=d.cancelButtonText),"confirmButtonText"in d&&i(2,o=d.confirmButtonText),"$$scope"in d&&i(7,r=d.$$scope)},[n,c,o,a,h,f,b,r,s,y,v]}class ml extends Fe{constructor(t){super(),He(this,t,c1,l1,Pe,{selectable:0,cancelButtonText:1,confirmButtonText:2})}}let os;const h1=new Uint8Array(16);function gl(){if(!os&&(os=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!os))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return os(h1)}const u1=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function Vs(e){return typeof e=="string"&&u1.test(e)}const qe=[];for(let e=0;e<256;++e)qe.push((e+256).toString(16).slice(1));function Ks(e,t=0){return(qe[e[t+0]]+qe[e[t+1]]+qe[e[t+2]]+qe[e[t+3]]+"-"+qe[e[t+4]]+qe[e[t+5]]+"-"+qe[e[t+6]]+qe[e[t+7]]+"-"+qe[e[t+8]]+qe[e[t+9]]+"-"+qe[e[t+10]]+qe[e[t+11]]+qe[e[t+12]]+qe[e[t+13]]+qe[e[t+14]]+qe[e[t+15]]).toLowerCase()}function f1(e,t=0){const i=Ks(e,t);if(!Vs(i))throw TypeError("Stringified UUID is invalid");return i}let Eo,cr,hr=0,ur=0;function d1(e,t,i){let s=t&&i||0;const r=t||new Array(16);e=e||{};let n=e.node||Eo,c=e.clockseq!==void 0?e.clockseq:cr;if(n==null||c==null){const b=e.random||(e.rng||gl)();n==null&&(n=Eo=[b[0]|1,b[1],b[2],b[3],b[4],b[5]]),c==null&&(c=cr=(b[6]<<8|b[7])&16383)}let o=e.msecs!==void 0?e.msecs:Date.now(),a=e.nsecs!==void 0?e.nsecs:ur+1;const h=o-hr+(a-ur)/1e4;if(h<0&&e.clockseq===void 0&&(c=c+1&16383),(h<0||o>hr)&&e.nsecs===void 0&&(a=0),a>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");hr=o,ur=a,cr=c,o+=122192928e5;const u=((o&268435455)*1e4+a)%4294967296;r[s++]=u>>>24&255,r[s++]=u>>>16&255,r[s++]=u>>>8&255,r[s++]=u&255;const f=o/4294967296*1e4&268435455;r[s++]=f>>>8&255,r[s++]=f&255,r[s++]=f>>>24&15|16,r[s++]=f>>>16&255,r[s++]=c>>>8|128,r[s++]=c&255;for(let b=0;b<6;++b)r[s+b]=n[b];return t||Ks(r)}function vl(e){if(!Vs(e))throw TypeError("Invalid UUID");let t;const i=new Uint8Array(16);return i[0]=(t=parseInt(e.slice(0,8),16))>>>24,i[1]=t>>>16&255,i[2]=t>>>8&255,i[3]=t&255,i[4]=(t=parseInt(e.slice(9,13),16))>>>8,i[5]=t&255,i[6]=(t=parseInt(e.slice(14,18),16))>>>8,i[7]=t&255,i[8]=(t=parseInt(e.slice(19,23),16))>>>8,i[9]=t&255,i[10]=(t=parseInt(e.slice(24,36),16))/1099511627776&255,i[11]=t/4294967296&255,i[12]=t>>>24&255,i[13]=t>>>16&255,i[14]=t>>>8&255,i[15]=t&255,i}function _1(e){e=unescape(encodeURIComponent(e));const t=[];for(let i=0;i<e.length;++i)t.push(e.charCodeAt(i));return t}const p1="6ba7b810-9dad-11d1-80b4-00c04fd430c8",m1="6ba7b811-9dad-11d1-80b4-00c04fd430c8";function bl(e,t,i){function s(r,n,c,o){var a;if(typeof r=="string"&&(r=_1(r)),typeof n=="string"&&(n=vl(n)),((a=n)===null||a===void 0?void 0:a.length)!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let h=new Uint8Array(16+r.length);if(h.set(n),h.set(r,n.length),h=i(h),h[6]=h[6]&15|t,h[8]=h[8]&63|128,c){o=o||0;for(let u=0;u<16;++u)c[o+u]=h[u];return c}return Ks(h)}try{s.name=e}catch{}return s.DNS=p1,s.URL=m1,s}function g1(e){if(typeof e=="string"){const t=unescape(encodeURIComponent(e));e=new Uint8Array(t.length);for(let i=0;i<t.length;++i)e[i]=t.charCodeAt(i)}return v1(b1(y1(e),e.length*8))}function v1(e){const t=[],i=e.length*32,s="0123456789abcdef";for(let r=0;r<i;r+=8){const n=e[r>>5]>>>r%32&255,c=parseInt(s.charAt(n>>>4&15)+s.charAt(n&15),16);t.push(c)}return t}function yl(e){return(e+64>>>9<<4)+14+1}function b1(e,t){e[t>>5]|=128<<t%32,e[yl(t)-1]=t;let i=1732584193,s=-271733879,r=-1732584194,n=271733878;for(let c=0;c<e.length;c+=16){const o=i,a=s,h=r,u=n;i=Ge(i,s,r,n,e[c],7,-680876936),n=Ge(n,i,s,r,e[c+1],12,-389564586),r=Ge(r,n,i,s,e[c+2],17,606105819),s=Ge(s,r,n,i,e[c+3],22,-1044525330),i=Ge(i,s,r,n,e[c+4],7,-176418897),n=Ge(n,i,s,r,e[c+5],12,1200080426),r=Ge(r,n,i,s,e[c+6],17,-1473231341),s=Ge(s,r,n,i,e[c+7],22,-45705983),i=Ge(i,s,r,n,e[c+8],7,1770035416),n=Ge(n,i,s,r,e[c+9],12,-1958414417),r=Ge(r,n,i,s,e[c+10],17,-42063),s=Ge(s,r,n,i,e[c+11],22,-1990404162),i=Ge(i,s,r,n,e[c+12],7,1804603682),n=Ge(n,i,s,r,e[c+13],12,-40341101),r=Ge(r,n,i,s,e[c+14],17,-1502002290),s=Ge(s,r,n,i,e[c+15],22,1236535329),i=$e(i,s,r,n,e[c+1],5,-165796510),n=$e(n,i,s,r,e[c+6],9,-1069501632),r=$e(r,n,i,s,e[c+11],14,643717713),s=$e(s,r,n,i,e[c],20,-373897302),i=$e(i,s,r,n,e[c+5],5,-701558691),n=$e(n,i,s,r,e[c+10],9,38016083),r=$e(r,n,i,s,e[c+15],14,-660478335),s=$e(s,r,n,i,e[c+4],20,-405537848),i=$e(i,s,r,n,e[c+9],5,568446438),n=$e(n,i,s,r,e[c+14],9,-1019803690),r=$e(r,n,i,s,e[c+3],14,-187363961),s=$e(s,r,n,i,e[c+8],20,1163531501),i=$e(i,s,r,n,e[c+13],5,-1444681467),n=$e(n,i,s,r,e[c+2],9,-51403784),r=$e(r,n,i,s,e[c+7],14,1735328473),s=$e(s,r,n,i,e[c+12],20,-1926607734),i=Je(i,s,r,n,e[c+5],4,-378558),n=Je(n,i,s,r,e[c+8],11,-2022574463),r=Je(r,n,i,s,e[c+11],16,1839030562),s=Je(s,r,n,i,e[c+14],23,-35309556),i=Je(i,s,r,n,e[c+1],4,-1530992060),n=Je(n,i,s,r,e[c+4],11,1272893353),r=Je(r,n,i,s,e[c+7],16,-155497632),s=Je(s,r,n,i,e[c+10],23,-1094730640),i=Je(i,s,r,n,e[c+13],4,681279174),n=Je(n,i,s,r,e[c],11,-358537222),r=Je(r,n,i,s,e[c+3],16,-722521979),s=Je(s,r,n,i,e[c+6],23,76029189),i=Je(i,s,r,n,e[c+9],4,-640364487),n=Je(n,i,s,r,e[c+12],11,-421815835),r=Je(r,n,i,s,e[c+15],16,530742520),s=Je(s,r,n,i,e[c+2],23,-995338651),i=Ze(i,s,r,n,e[c],6,-198630844),n=Ze(n,i,s,r,e[c+7],10,1126891415),r=Ze(r,n,i,s,e[c+14],15,-1416354905),s=Ze(s,r,n,i,e[c+5],21,-57434055),i=Ze(i,s,r,n,e[c+12],6,1700485571),n=Ze(n,i,s,r,e[c+3],10,-1894986606),r=Ze(r,n,i,s,e[c+10],15,-1051523),s=Ze(s,r,n,i,e[c+1],21,-2054922799),i=Ze(i,s,r,n,e[c+8],6,1873313359),n=Ze(n,i,s,r,e[c+15],10,-30611744),r=Ze(r,n,i,s,e[c+6],15,-1560198380),s=Ze(s,r,n,i,e[c+13],21,1309151649),i=Ze(i,s,r,n,e[c+4],6,-145523070),n=Ze(n,i,s,r,e[c+11],10,-1120210379),r=Ze(r,n,i,s,e[c+2],15,718787259),s=Ze(s,r,n,i,e[c+9],21,-343485551),i=Zt(i,o),s=Zt(s,a),r=Zt(r,h),n=Zt(n,u)}return[i,s,r,n]}function y1(e){if(e.length===0)return[];const t=e.length*8,i=new Uint32Array(yl(t));for(let s=0;s<t;s+=8)i[s>>5]|=(e[s/8]&255)<<s%32;return i}function Zt(e,t){const i=(e&65535)+(t&65535);return(e>>16)+(t>>16)+(i>>16)<<16|i&65535}function S1(e,t){return e<<t|e>>>32-t}function Gs(e,t,i,s,r,n){return Zt(S1(Zt(Zt(t,e),Zt(s,n)),r),i)}function Ge(e,t,i,s,r,n,c){return Gs(t&i|~t&s,e,t,r,n,c)}function $e(e,t,i,s,r,n,c){return Gs(t&s|i&~s,e,t,r,n,c)}function Je(e,t,i,s,r,n,c){return Gs(t^i^s,e,t,r,n,c)}function Ze(e,t,i,s,r,n,c){return Gs(i^(t|~s),e,t,r,n,c)}const w1=bl("v3",48,g1),C1=w1,k1=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),Do={randomUUID:k1};function E1(e,t,i){if(Do.randomUUID&&!t&&!e)return Do.randomUUID();e=e||{};const s=e.random||(e.rng||gl)();if(s[6]=s[6]&15|64,s[8]=s[8]&63|128,t){i=i||0;for(let r=0;r<16;++r)t[i+r]=s[r];return t}return Ks(s)}function D1(e,t,i,s){switch(e){case 0:return t&i^~t&s;case 1:return t^i^s;case 2:return t&i^t&s^i&s;case 3:return t^i^s}}function fr(e,t){return e<<t|e>>>32-t}function L1(e){const t=[1518500249,1859775393,2400959708,3395469782],i=[1732584193,4023233417,2562383102,271733878,3285377520];if(typeof e=="string"){const c=unescape(encodeURIComponent(e));e=[];for(let o=0;o<c.length;++o)e.push(c.charCodeAt(o))}else Array.isArray(e)||(e=Array.prototype.slice.call(e));e.push(128);const s=e.length/4+2,r=Math.ceil(s/16),n=new Array(r);for(let c=0;c<r;++c){const o=new Uint32Array(16);for(let a=0;a<16;++a)o[a]=e[c*64+a*4]<<24|e[c*64+a*4+1]<<16|e[c*64+a*4+2]<<8|e[c*64+a*4+3];n[c]=o}n[r-1][14]=(e.length-1)*8/Math.pow(2,32),n[r-1][14]=Math.floor(n[r-1][14]),n[r-1][15]=(e.length-1)*8&4294967295;for(let c=0;c<r;++c){const o=new Uint32Array(80);for(let y=0;y<16;++y)o[y]=n[c][y];for(let y=16;y<80;++y)o[y]=fr(o[y-3]^o[y-8]^o[y-14]^o[y-16],1);let a=i[0],h=i[1],u=i[2],f=i[3],b=i[4];for(let y=0;y<80;++y){const v=Math.floor(y/20),m=fr(a,5)+D1(v,h,u,f)+b+t[v]+o[y]>>>0;b=f,f=u,u=fr(h,30)>>>0,h=a,a=m}i[0]=i[0]+a>>>0,i[1]=i[1]+h>>>0,i[2]=i[2]+u>>>0,i[3]=i[3]+f>>>0,i[4]=i[4]+b>>>0}return[i[0]>>24&255,i[0]>>16&255,i[0]>>8&255,i[0]&255,i[1]>>24&255,i[1]>>16&255,i[1]>>8&255,i[1]&255,i[2]>>24&255,i[2]>>16&255,i[2]>>8&255,i[2]&255,i[3]>>24&255,i[3]>>16&255,i[3]>>8&255,i[3]&255,i[4]>>24&255,i[4]>>16&255,i[4]>>8&255,i[4]&255]}const R1=bl("v5",80,L1),T1=R1,A1="00000000-0000-0000-0000-000000000000";function M1(e){if(!Vs(e))throw TypeError("Invalid UUID");return parseInt(e.slice(14,15),16)}const Mr=Object.freeze(Object.defineProperty({__proto__:null,NIL:A1,parse:vl,stringify:f1,v1:d1,v3:C1,v4:E1,v5:T1,validate:Vs,version:M1},Symbol.toStringTag,{value:"Module"}));function O1(e){let t,i;return t=new je({props:{slot:"input",type:Le.select,settingKey:"session.id",settingValue:e[1].id,options:e[6]}}),t.$on("changed",e[13]),{c(){ne(t.$$.fragment)},m(s,r){ie(t,s,r),i=!0},p(s,r){const n={};r&2&&(n.settingValue=s[1].id),t.$set(n)},i(s){i||(Y(t.$$.fragment,s),i=!0)},o(s){q(t.$$.fragment,s),i=!1},d(s){se(t,s)}}}function B1(e){let t,i;return t=new je({props:{slot:"input",block:!0,type:Le.text,settingKey:"session.name",settingValue:e[1].name,disabled:e[3]?!1:!e[4]}}),t.$on("changed",e[14]),{c(){ne(t.$$.fragment)},m(s,r){ie(t,s,r),i=!0},p(s,r){const n={};r&2&&(n.settingValue=s[1].name),r&24&&(n.disabled=s[3]?!1:!s[4]),t.$set(n)},i(s){i||(Y(t.$$.fragment,s),i=!0)},o(s){q(t.$$.fragment,s),i=!1},d(s){se(t,s)}}}function P1(e){let t,i;return t=new je({props:{slot:"input",block:!0,type:Le.text,settingKey:"session.path",settingValue:e[1].path,disabled:e[3]?!1:!e[4]}}),t.$on("changed",e[15]),{c(){ne(t.$$.fragment)},m(s,r){ie(t,s,r),i=!0},p(s,r){const n={};r&2&&(n.settingValue=s[1].path),r&24&&(n.disabled=s[3]?!1:!s[4]),t.$set(n)},i(s){i||(Y(t.$$.fragment,s),i=!0)},o(s){q(t.$$.fragment,s),i=!1},d(s){se(t,s)}}}function I1(e){let t,i;return t=new je({props:{slot:"input",type:Le.select,settingKey:"session.type",settingValue:e[1].type,options:[{key:"console",text:"console"},{key:"notebook",text:"notebook"}],disabled:e[3]?!1:!e[4]}}),t.$on("changed",e[16]),{c(){ne(t.$$.fragment)},m(s,r){ie(t,s,r),i=!0},p(s,r){const n={};r&2&&(n.settingValue=s[1].type),r&24&&(n.disabled=s[3]?!1:!s[4]),t.$set(n)},i(s){i||(Y(t.$$.fragment,s),i=!0)},o(s){q(t.$$.fragment,s),i=!1},d(s){se(t,s)}}}function x1(e){var s,r;let t,i;return t=new je({props:{slot:"input",block:!0,type:Le.select,settingKey:"session.kernel",settingValue:e[1].kernel?((s=e[0].kernels.find(e[17]))==null?void 0:s.id)??((r=e[1].kernel)==null?void 0:r.name)??e[0].kernelspecs.default:"",options:e[3]?e[8]:e[7],disabled:e[3]?!1:!e[4]}}),t.$on("changed",e[18]),{c(){ne(t.$$.fragment)},m(n,c){ie(t,n,c),i=!0},p(n,c){var a,h;const o={};c&3&&(o.settingValue=n[1].kernel?((a=n[0].kernels.find(n[17]))==null?void 0:a.id)??((h=n[1].kernel)==null?void 0:h.name)??n[0].kernelspecs.default:""),c&8&&(o.options=n[3]?n[8]:n[7]),c&24&&(o.disabled=n[3]?!1:!n[4]),t.$set(o)},i(n){i||(Y(t.$$.fragment,n),i=!0)},o(n){q(t.$$.fragment,n),i=!1},d(n){se(t,n)}}}function N1(e){let t,i,s,r,n,c,o,a,h,u;return t=new xe({props:{title:e[5].settings.sessionSettings.connect.title,text:e[5].settings.sessionSettings.connect.description,$$slots:{input:[O1]},$$scope:{ctx:e}}}),s=new xe({props:{title:e[5].settings.sessionSettings.name.title,text:e[5].settings.sessionSettings.name.description,block:!0,$$slots:{input:[B1]},$$scope:{ctx:e}}}),n=new xe({props:{title:e[5].settings.sessionSettings.path.title,text:e[5].settings.sessionSettings.path.description,block:!0,$$slots:{input:[P1]},$$scope:{ctx:e}}}),o=new xe({props:{title:e[5].settings.sessionSettings.type.title,text:e[5].settings.sessionSettings.type.description,$$slots:{input:[I1]},$$scope:{ctx:e}}}),h=new xe({props:{title:e[5].settings.sessionSettings.kernel.title,text:e[5].settings.sessionSettings.kernel.description,block:!0,$$slots:{input:[x1]},$$scope:{ctx:e}}}),{c(){ne(t.$$.fragment),i=he(),ne(s.$$.fragment),r=he(),ne(n.$$.fragment),c=he(),ne(o.$$.fragment),a=he(),ne(h.$$.fragment)},m(f,b){ie(t,f,b),Z(f,i,b),ie(s,f,b),Z(f,r,b),ie(n,f,b),Z(f,c,b),ie(o,f,b),Z(f,a,b),ie(h,f,b),u=!0},p(f,b){const y={};b&4194311&&(y.$$scope={dirty:b,ctx:f}),t.$set(y);const v={};b&4194334&&(v.$$scope={dirty:b,ctx:f}),s.$set(v);const m={};b&4194334&&(m.$$scope={dirty:b,ctx:f}),n.$set(m);const l={};b&4194334&&(l.$$scope={dirty:b,ctx:f}),o.$set(l);const _={};b&4194335&&(_.$$scope={dirty:b,ctx:f}),h.$set(_)},i(f){u||(Y(t.$$.fragment,f),Y(s.$$.fragment,f),Y(n.$$.fragment,f),Y(o.$$.fragment,f),Y(h.$$.fragment,f),u=!0)},o(f){q(t.$$.fragment,f),q(s.$$.fragment,f),q(n.$$.fragment,f),q(o.$$.fragment,f),q(h.$$.fragment,f),u=!1},d(f){f&&(J(i),J(r),J(c),J(a)),se(t,f),se(s,f),se(n,f),se(o,f),se(h,f)}}}function H1(e){let t,i;return t=new ds({props:{$$slots:{default:[N1]},$$scope:{ctx:e}}}),{c(){ne(t.$$.fragment)},m(s,r){ie(t,s,r),i=!0},p(s,r){const n={};r&4194335&&(n.$$scope={dirty:r,ctx:s}),t.$set(n)},i(s){i||(Y(t.$$.fragment,s),i=!0)},o(s){q(t.$$.fragment,s),i=!1},d(s){se(t,s)}}}function F1(e){let t,i;return t=new ml({props:{confirmButtonText:e[3]?e[5].settings.sessionSettings.confirm.new:e[4]?e[5].settings.sessionSettings.confirm.update:e[5].settings.sessionSettings.confirm.connect,$$slots:{default:[H1]},$$scope:{ctx:e}}}),t.$on("cancel",e[9]),t.$on("confirm",e[10]),{c(){ne(t.$$.fragment)},m(s,r){ie(t,s,r),i=!0},p(s,[r]){const n={};r&24&&(n.confirmButtonText=s[3]?s[5].settings.sessionSettings.confirm.new:s[4]?s[5].settings.sessionSettings.confirm.update:s[5].settings.sessionSettings.confirm.connect),r&4194335&&(n.$$scope={dirty:r,ctx:s}),t.$set(n)},i(s){i||(Y(t.$$.fragment,s),i=!0)},o(s){q(t.$$.fragment,s),i=!1},d(s){se(t,s)}}}function j1(e,t,i){let{docID:s}=t,{docIAL:r}=t,{plugin:n}=t;const c=n.i18n,o=Qt();let a=n.ial2session(r,!0),h=a,u=!0,f=!1,b=!1;y(h);function y(k){const D=n.isSessionRunning(k.id);i(3,u=!D),f=D,i(4,b=n.doc2session.has(s))}const v=n.sessions.map(k=>({key:k.id,text:k.name}));f?(a=n.ial2session({},!0),v.unshift({key:a.id,text:c.settings.sessionSettings.connect.options.new.text}),h=n.sessions.find(k=>k.id===h.id)??h):v.unshift({key:h.id,text:c.settings.sessionSettings.connect.options.new.text});const m=[],l=[];m.push({key:"",text:`⏹ ${c.settings.sessionSettings.kernel.options.no.text}`}),m.push(...Array.from(Object.values(n.kernelspecs.kernelspecs)).filter(k=>k!==void 0).map(k=>({key:k.name,text:`▶ ${c.settings.sessionSettings.kernel.options.new.text} [${k.language}] ${k.name}: ${k.display_name}`}))),l.push(...m),m.push(...n.sessions.filter(k=>k.kernel).map(k=>{const D=n.kernelspecs.kernelspecs[k.kernel.name];return{key:k.kernel.id,text:`♻ ${c.settings.sessionSettings.kernel.options.use.text} [${D==null?void 0:D.language}] ${D==null?void 0:D.name}: ${k.name}`}}));async function _(k){o("cancel",{id:s,event:k.detail.event,session:h})}async function p(k){var O,A,T,B,G,V,L,R;try{var D=h;if(u)h.kernel&&(D=await((O=n.bridge)==null?void 0:O.call("jupyter.sessions.startNew",s,{name:h.name,type:h.type,path:h.path,kernel:{name:h.kernel.name}},{username:n.username,clientId:n.clientId})));else if(!b)h.kernel&&(D=await((A=n.bridge)==null?void 0:A.call("jupyter.sessions.connectTo",s,{model:h,username:n.username,clientId:n.newClientId})));else{const M=n.doc2session.get(s);M&&(h.name!==M.name&&(D=await((T=n.bridge)==null?void 0:T.call("jupyter.session.connection.setName",h.id,h.name))),h.path!==M.path&&(D=await((B=n.bridge)==null?void 0:B.call("jupyter.session.connection.setPath",h.id,h.path))),h.type!==M.type&&(D=await((G=n.bridge)==null?void 0:G.call("jupyter.session.connection.setType",h.id,h.type))),h.kernel?!M.kernel||h.kernel.name!==M.kernel.name?D=await((V=n.bridge)==null?void 0:V.call("jupyter.session.connection.changeKernel",h.id,{name:h.kernel.name})):(!M.kernel||h.kernel.id!==M.kernel.id)&&(D=await((L=n.bridge)==null?void 0:L.call("jupyter.session.connection.changeKernel",h.id,{id:h.kernel.id}))):D=await((R=n.bridge)==null?void 0:R.call("jupyter.session.connection.changeKernel",h.id,{})))}if(D)i(1,h=D),n.relateDoc2Session(s,D);else{n.siyuan.showMessage(c.messages.uninitialized.text,void 0,"error");return}await n.client.setBlockAttrs({id:s,attrs:n.session2ial(h,!0)})}catch(M){n.logger.warn(M),n.siyuan.showMessage(String(M),void 0,"error");return}o("confirm",{id:s,event:k.detail.event,session:h})}const d=async k=>{const D=k.detail.value;if(D===v[0].key)i(1,h=a);else{const O=n.sessions.find(A=>A.id===D);O&&i(1,h=O)}},g=async k=>{const D=k.detail.value;i(1,h.name=D,h),u&&i(2,a.name=D,a)},w=async k=>{const D=k.detail.value;i(1,h.path=D,h),u&&i(2,a.path=D,a)},E=async k=>{const D=k.detail.value;i(1,h.type=D,h),u&&i(2,a.type=D,a)},C=k=>{var D;return k.id===((D=h.kernel)==null?void 0:D.id)},S=async k=>{const D=k.detail.value;if(D==="")i(1,h.kernel=null,h),u&&i(2,a.kernel=null,a);else if(n.kernels.some(O=>O.id===D))h.kernel&&i(1,h.kernel.id=D,h),u&&a.kernel&&i(2,a.kernel.id=D,a);else{const O=Mr.v4();h.kernel&&(i(1,h.kernel.id=O,h),i(1,h.kernel.name=D,h)),u&&a.kernel&&(i(2,a.kernel.id=O,a),i(2,a.kernel.name=D,a))}};return e.$$set=k=>{"docID"in k&&i(11,s=k.docID),"docIAL"in k&&i(12,r=k.docIAL),"plugin"in k&&i(0,n=k.plugin)},e.$$.update=()=>{e.$$.dirty&2&&y(h)},[n,h,a,u,b,c,v,m,l,_,p,s,r,d,g,w,E,C,S]}class U1 extends Fe{constructor(t){super(),He(this,t,j1,F1,Pe,{docID:11,docIAL:12,plugin:0})}}function Sl(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var wl={exports:{}};(function(e,t){(function(i,s){e.exports=s()})(self,()=>(()=>{var i={4567:function(c,o,a){var h=this&&this.__decorate||function(d,g,w,E){var C,S=arguments.length,k=S<3?g:E===null?E=Object.getOwnPropertyDescriptor(g,w):E;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")k=Reflect.decorate(d,g,w,E);else for(var D=d.length-1;D>=0;D--)(C=d[D])&&(k=(S<3?C(k):S>3?C(g,w,k):C(g,w))||k);return S>3&&k&&Object.defineProperty(g,w,k),k},u=this&&this.__param||function(d,g){return function(w,E){g(w,E,d)}};Object.defineProperty(o,"__esModule",{value:!0}),o.AccessibilityManager=void 0;const f=a(9042),b=a(6114),y=a(9924),v=a(844),m=a(5596),l=a(4725),_=a(3656);let p=class extends v.Disposable{constructor(d,g){super(),this._terminal=d,this._renderService=g,this._liveRegionLineCount=0,this._charsToConsume=[],this._charsToAnnounce="",this._accessibilityContainer=document.createElement("div"),this._accessibilityContainer.classList.add("xterm-accessibility"),this._rowContainer=document.createElement("div"),this._rowContainer.setAttribute("role","list"),this._rowContainer.classList.add("xterm-accessibility-tree"),this._rowElements=[];for(let w=0;w<this._terminal.rows;w++)this._rowElements[w]=this._createAccessibilityTreeNode(),this._rowContainer.appendChild(this._rowElements[w]);if(this._topBoundaryFocusListener=w=>this._handleBoundaryFocus(w,0),this._bottomBoundaryFocusListener=w=>this._handleBoundaryFocus(w,1),this._rowElements[0].addEventListener("focus",this._topBoundaryFocusListener),this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._refreshRowsDimensions(),this._accessibilityContainer.appendChild(this._rowContainer),this._liveRegion=document.createElement("div"),this._liveRegion.classList.add("live-region"),this._liveRegion.setAttribute("aria-live","assertive"),this._accessibilityContainer.appendChild(this._liveRegion),this._liveRegionDebouncer=this.register(new y.TimeBasedDebouncer(this._announceCharacters.bind(this))),!this._terminal.element)throw new Error("Cannot enable accessibility before Terminal.open");this._terminal.element.insertAdjacentElement("afterbegin",this._accessibilityContainer),this.register(this._liveRegionDebouncer),this.register(this._terminal.onResize(w=>this._handleResize(w.rows))),this.register(this._terminal.onRender(w=>this._refreshRows(w.start,w.end))),this.register(this._terminal.onScroll(()=>this._refreshRows())),this.register(this._terminal.onA11yChar(w=>this._handleChar(w))),this.register(this._terminal.onLineFeed(()=>this._handleChar(`
`))),this.register(this._terminal.onA11yTab(w=>this._handleTab(w))),this.register(this._terminal.onKey(w=>this._handleKey(w.key))),this.register(this._terminal.onBlur(()=>this._clearLiveRegion())),this.register(this._renderService.onDimensionsChange(()=>this._refreshRowsDimensions())),this._screenDprMonitor=new m.ScreenDprMonitor(window),this.register(this._screenDprMonitor),this._screenDprMonitor.setListener(()=>this._refreshRowsDimensions()),this.register((0,_.addDisposableDomListener)(window,"resize",()=>this._refreshRowsDimensions())),this._refreshRows(),this.register((0,v.toDisposable)(()=>{this._accessibilityContainer.remove(),this._rowElements.length=0}))}_handleTab(d){for(let g=0;g<d;g++)this._handleChar(" ")}_handleChar(d){this._liveRegionLineCount<21&&(this._charsToConsume.length>0?this._charsToConsume.shift()!==d&&(this._charsToAnnounce+=d):this._charsToAnnounce+=d,d===`
`&&(this._liveRegionLineCount++,this._liveRegionLineCount===21&&(this._liveRegion.textContent+=f.tooMuchOutput)),b.isMac&&this._liveRegion.textContent&&this._liveRegion.textContent.length>0&&!this._liveRegion.parentNode&&setTimeout(()=>{this._accessibilityContainer.appendChild(this._liveRegion)},0))}_clearLiveRegion(){this._liveRegion.textContent="",this._liveRegionLineCount=0,b.isMac&&this._liveRegion.remove()}_handleKey(d){this._clearLiveRegion(),/\p{Control}/u.test(d)||this._charsToConsume.push(d)}_refreshRows(d,g){this._liveRegionDebouncer.refresh(d,g,this._terminal.rows)}_announceCharacters(){this._charsToAnnounce.length!==0&&(this._liveRegion.textContent+=this._charsToAnnounce,this._charsToAnnounce="")}_handleBoundaryFocus(d,g){const w=d.target,E=this._rowElements[g===0?1:this._rowElements.length-2];if(w.getAttribute("aria-posinset")===(g===0?"1":`${this._terminal.buffer.lines.length}`)||d.relatedTarget!==E)return;let C,S;if(g===0?(C=w,S=this._rowElements.pop(),this._rowContainer.removeChild(S)):(C=this._rowElements.shift(),S=w,this._rowContainer.removeChild(C)),C.removeEventListener("focus",this._topBoundaryFocusListener),S.removeEventListener("focus",this._bottomBoundaryFocusListener),g===0){const k=this._createAccessibilityTreeNode();this._rowElements.unshift(k),this._rowContainer.insertAdjacentElement("afterbegin",k)}else{const k=this._createAccessibilityTreeNode();this._rowElements.push(k),this._rowContainer.appendChild(k)}this._rowElements[0].addEventListener("focus",this._topBoundaryFocusListener),this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._terminal.scrollLines(g===0?-1:1),this._rowElements[g===0?1:this._rowElements.length-2].focus(),d.preventDefault(),d.stopImmediatePropagation()}_handleResize(d){this._rowElements[this._rowElements.length-1].removeEventListener("focus",this._bottomBoundaryFocusListener);for(let g=this._rowContainer.children.length;g<this._terminal.rows;g++)this._rowElements[g]=this._createAccessibilityTreeNode(),this._rowContainer.appendChild(this._rowElements[g]);for(;this._rowElements.length>d;)this._rowContainer.removeChild(this._rowElements.pop());this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._refreshRowsDimensions()}_createAccessibilityTreeNode(){const d=document.createElement("div");return d.setAttribute("role","listitem"),d.tabIndex=-1,this._refreshRowDimensions(d),d}_refreshRowsDimensions(){if(this._renderService.dimensions.css.cell.height){this._accessibilityContainer.style.width=`${this._renderService.dimensions.css.canvas.width}px`,this._rowElements.length!==this._terminal.rows&&this._handleResize(this._terminal.rows);for(let d=0;d<this._terminal.rows;d++)this._refreshRowDimensions(this._rowElements[d])}}_refreshRowDimensions(d){d.style.height=`${this._renderService.dimensions.css.cell.height}px`}};p=h([u(1,l.IRenderService)],p),o.AccessibilityManager=p},3614:(c,o)=>{function a(b){return b.replace(/\r?\n/g,"\r")}function h(b,y){return y?"\x1B[200~"+b+"\x1B[201~":b}function u(b,y,v){b=h(b=a(b),v.decPrivateModes.bracketedPasteMode),v.triggerDataEvent(b,!0),y.value=""}function f(b,y,v){const m=v.getBoundingClientRect(),l=b.clientX-m.left-10,_=b.clientY-m.top-10;y.style.width="20px",y.style.height="20px",y.style.left=`${l}px`,y.style.top=`${_}px`,y.style.zIndex="1000",y.focus()}Object.defineProperty(o,"__esModule",{value:!0}),o.rightClickHandler=o.moveTextAreaUnderMouseCursor=o.paste=o.handlePasteEvent=o.copyHandler=o.bracketTextForPaste=o.prepareTextForTerminal=void 0,o.prepareTextForTerminal=a,o.bracketTextForPaste=h,o.copyHandler=function(b,y){b.clipboardData&&b.clipboardData.setData("text/plain",y.selectionText),b.preventDefault()},o.handlePasteEvent=function(b,y,v){b.stopPropagation(),b.clipboardData&&u(b.clipboardData.getData("text/plain"),y,v)},o.paste=u,o.moveTextAreaUnderMouseCursor=f,o.rightClickHandler=function(b,y,v,m,l){f(b,y,v),l&&m.rightClickSelect(b),y.value=m.selectionText,y.select()}},7239:(c,o,a)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.ColorContrastCache=void 0;const h=a(1505);o.ColorContrastCache=class{constructor(){this._color=new h.TwoKeyMap,this._css=new h.TwoKeyMap}setCss(u,f,b){this._css.set(u,f,b)}getCss(u,f){return this._css.get(u,f)}setColor(u,f,b){this._color.set(u,f,b)}getColor(u,f){return this._color.get(u,f)}clear(){this._color.clear(),this._css.clear()}}},3656:(c,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.addDisposableDomListener=void 0,o.addDisposableDomListener=function(a,h,u,f){a.addEventListener(h,u,f);let b=!1;return{dispose:()=>{b||(b=!0,a.removeEventListener(h,u,f))}}}},6465:function(c,o,a){var h=this&&this.__decorate||function(l,_,p,d){var g,w=arguments.length,E=w<3?_:d===null?d=Object.getOwnPropertyDescriptor(_,p):d;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")E=Reflect.decorate(l,_,p,d);else for(var C=l.length-1;C>=0;C--)(g=l[C])&&(E=(w<3?g(E):w>3?g(_,p,E):g(_,p))||E);return w>3&&E&&Object.defineProperty(_,p,E),E},u=this&&this.__param||function(l,_){return function(p,d){_(p,d,l)}};Object.defineProperty(o,"__esModule",{value:!0}),o.Linkifier2=void 0;const f=a(2585),b=a(8460),y=a(844),v=a(3656);let m=class extends y.Disposable{constructor(l){super(),this._bufferService=l,this._linkProviders=[],this._linkCacheDisposables=[],this._isMouseOut=!0,this._wasResized=!1,this._activeLine=-1,this._onShowLinkUnderline=this.register(new b.EventEmitter),this.onShowLinkUnderline=this._onShowLinkUnderline.event,this._onHideLinkUnderline=this.register(new b.EventEmitter),this.onHideLinkUnderline=this._onHideLinkUnderline.event,this.register((0,y.getDisposeArrayDisposable)(this._linkCacheDisposables)),this.register((0,y.toDisposable)(()=>{this._lastMouseEvent=void 0})),this.register(this._bufferService.onResize(()=>{this._clearCurrentLink(),this._wasResized=!0}))}get currentLink(){return this._currentLink}registerLinkProvider(l){return this._linkProviders.push(l),{dispose:()=>{const _=this._linkProviders.indexOf(l);_!==-1&&this._linkProviders.splice(_,1)}}}attachToDom(l,_,p){this._element=l,this._mouseService=_,this._renderService=p,this.register((0,v.addDisposableDomListener)(this._element,"mouseleave",()=>{this._isMouseOut=!0,this._clearCurrentLink()})),this.register((0,v.addDisposableDomListener)(this._element,"mousemove",this._handleMouseMove.bind(this))),this.register((0,v.addDisposableDomListener)(this._element,"mousedown",this._handleMouseDown.bind(this))),this.register((0,v.addDisposableDomListener)(this._element,"mouseup",this._handleMouseUp.bind(this)))}_handleMouseMove(l){if(this._lastMouseEvent=l,!this._element||!this._mouseService)return;const _=this._positionFromMouseEvent(l,this._element,this._mouseService);if(!_)return;this._isMouseOut=!1;const p=l.composedPath();for(let d=0;d<p.length;d++){const g=p[d];if(g.classList.contains("xterm"))break;if(g.classList.contains("xterm-hover"))return}this._lastBufferCell&&_.x===this._lastBufferCell.x&&_.y===this._lastBufferCell.y||(this._handleHover(_),this._lastBufferCell=_)}_handleHover(l){if(this._activeLine!==l.y||this._wasResized)return this._clearCurrentLink(),this._askForLink(l,!1),void(this._wasResized=!1);this._currentLink&&this._linkAtPosition(this._currentLink.link,l)||(this._clearCurrentLink(),this._askForLink(l,!0))}_askForLink(l,_){var p,d;this._activeProviderReplies&&_||((p=this._activeProviderReplies)===null||p===void 0||p.forEach(w=>{w==null||w.forEach(E=>{E.link.dispose&&E.link.dispose()})}),this._activeProviderReplies=new Map,this._activeLine=l.y);let g=!1;for(const[w,E]of this._linkProviders.entries())_?!((d=this._activeProviderReplies)===null||d===void 0)&&d.get(w)&&(g=this._checkLinkProviderResult(w,l,g)):E.provideLinks(l.y,C=>{var S,k;if(this._isMouseOut)return;const D=C==null?void 0:C.map(O=>({link:O}));(S=this._activeProviderReplies)===null||S===void 0||S.set(w,D),g=this._checkLinkProviderResult(w,l,g),((k=this._activeProviderReplies)===null||k===void 0?void 0:k.size)===this._linkProviders.length&&this._removeIntersectingLinks(l.y,this._activeProviderReplies)})}_removeIntersectingLinks(l,_){const p=new Set;for(let d=0;d<_.size;d++){const g=_.get(d);if(g)for(let w=0;w<g.length;w++){const E=g[w],C=E.link.range.start.y<l?0:E.link.range.start.x,S=E.link.range.end.y>l?this._bufferService.cols:E.link.range.end.x;for(let k=C;k<=S;k++){if(p.has(k)){g.splice(w--,1);break}p.add(k)}}}}_checkLinkProviderResult(l,_,p){var d;if(!this._activeProviderReplies)return p;const g=this._activeProviderReplies.get(l);let w=!1;for(let E=0;E<l;E++)this._activeProviderReplies.has(E)&&!this._activeProviderReplies.get(E)||(w=!0);if(!w&&g){const E=g.find(C=>this._linkAtPosition(C.link,_));E&&(p=!0,this._handleNewLink(E))}if(this._activeProviderReplies.size===this._linkProviders.length&&!p)for(let E=0;E<this._activeProviderReplies.size;E++){const C=(d=this._activeProviderReplies.get(E))===null||d===void 0?void 0:d.find(S=>this._linkAtPosition(S.link,_));if(C){p=!0,this._handleNewLink(C);break}}return p}_handleMouseDown(){this._mouseDownLink=this._currentLink}_handleMouseUp(l){if(!this._element||!this._mouseService||!this._currentLink)return;const _=this._positionFromMouseEvent(l,this._element,this._mouseService);_&&this._mouseDownLink===this._currentLink&&this._linkAtPosition(this._currentLink.link,_)&&this._currentLink.link.activate(l,this._currentLink.link.text)}_clearCurrentLink(l,_){this._element&&this._currentLink&&this._lastMouseEvent&&(!l||!_||this._currentLink.link.range.start.y>=l&&this._currentLink.link.range.end.y<=_)&&(this._linkLeave(this._element,this._currentLink.link,this._lastMouseEvent),this._currentLink=void 0,(0,y.disposeArray)(this._linkCacheDisposables))}_handleNewLink(l){if(!this._element||!this._lastMouseEvent||!this._mouseService)return;const _=this._positionFromMouseEvent(this._lastMouseEvent,this._element,this._mouseService);_&&this._linkAtPosition(l.link,_)&&(this._currentLink=l,this._currentLink.state={decorations:{underline:l.link.decorations===void 0||l.link.decorations.underline,pointerCursor:l.link.decorations===void 0||l.link.decorations.pointerCursor},isHovered:!0},this._linkHover(this._element,l.link,this._lastMouseEvent),l.link.decorations={},Object.defineProperties(l.link.decorations,{pointerCursor:{get:()=>{var p,d;return(d=(p=this._currentLink)===null||p===void 0?void 0:p.state)===null||d===void 0?void 0:d.decorations.pointerCursor},set:p=>{var d,g;!((d=this._currentLink)===null||d===void 0)&&d.state&&this._currentLink.state.decorations.pointerCursor!==p&&(this._currentLink.state.decorations.pointerCursor=p,this._currentLink.state.isHovered&&((g=this._element)===null||g===void 0||g.classList.toggle("xterm-cursor-pointer",p)))}},underline:{get:()=>{var p,d;return(d=(p=this._currentLink)===null||p===void 0?void 0:p.state)===null||d===void 0?void 0:d.decorations.underline},set:p=>{var d,g,w;!((d=this._currentLink)===null||d===void 0)&&d.state&&((w=(g=this._currentLink)===null||g===void 0?void 0:g.state)===null||w===void 0?void 0:w.decorations.underline)!==p&&(this._currentLink.state.decorations.underline=p,this._currentLink.state.isHovered&&this._fireUnderlineEvent(l.link,p))}}}),this._renderService&&this._linkCacheDisposables.push(this._renderService.onRenderedViewportChange(p=>{if(!this._currentLink)return;const d=p.start===0?0:p.start+1+this._bufferService.buffer.ydisp,g=this._bufferService.buffer.ydisp+1+p.end;if(this._currentLink.link.range.start.y>=d&&this._currentLink.link.range.end.y<=g&&(this._clearCurrentLink(d,g),this._lastMouseEvent&&this._element)){const w=this._positionFromMouseEvent(this._lastMouseEvent,this._element,this._mouseService);w&&this._askForLink(w,!1)}})))}_linkHover(l,_,p){var d;!((d=this._currentLink)===null||d===void 0)&&d.state&&(this._currentLink.state.isHovered=!0,this._currentLink.state.decorations.underline&&this._fireUnderlineEvent(_,!0),this._currentLink.state.decorations.pointerCursor&&l.classList.add("xterm-cursor-pointer")),_.hover&&_.hover(p,_.text)}_fireUnderlineEvent(l,_){const p=l.range,d=this._bufferService.buffer.ydisp,g=this._createLinkUnderlineEvent(p.start.x-1,p.start.y-d-1,p.end.x,p.end.y-d-1,void 0);(_?this._onShowLinkUnderline:this._onHideLinkUnderline).fire(g)}_linkLeave(l,_,p){var d;!((d=this._currentLink)===null||d===void 0)&&d.state&&(this._currentLink.state.isHovered=!1,this._currentLink.state.decorations.underline&&this._fireUnderlineEvent(_,!1),this._currentLink.state.decorations.pointerCursor&&l.classList.remove("xterm-cursor-pointer")),_.leave&&_.leave(p,_.text)}_linkAtPosition(l,_){const p=l.range.start.y*this._bufferService.cols+l.range.start.x,d=l.range.end.y*this._bufferService.cols+l.range.end.x,g=_.y*this._bufferService.cols+_.x;return p<=g&&g<=d}_positionFromMouseEvent(l,_,p){const d=p.getCoords(l,_,this._bufferService.cols,this._bufferService.rows);if(d)return{x:d[0],y:d[1]+this._bufferService.buffer.ydisp}}_createLinkUnderlineEvent(l,_,p,d,g){return{x1:l,y1:_,x2:p,y2:d,cols:this._bufferService.cols,fg:g}}};m=h([u(0,f.IBufferService)],m),o.Linkifier2=m},9042:(c,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.tooMuchOutput=o.promptLabel=void 0,o.promptLabel="Terminal input",o.tooMuchOutput="Too much output to announce, navigate to rows manually to read"},3730:function(c,o,a){var h=this&&this.__decorate||function(m,l,_,p){var d,g=arguments.length,w=g<3?l:p===null?p=Object.getOwnPropertyDescriptor(l,_):p;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")w=Reflect.decorate(m,l,_,p);else for(var E=m.length-1;E>=0;E--)(d=m[E])&&(w=(g<3?d(w):g>3?d(l,_,w):d(l,_))||w);return g>3&&w&&Object.defineProperty(l,_,w),w},u=this&&this.__param||function(m,l){return function(_,p){l(_,p,m)}};Object.defineProperty(o,"__esModule",{value:!0}),o.OscLinkProvider=void 0;const f=a(511),b=a(2585);let y=class{constructor(m,l,_){this._bufferService=m,this._optionsService=l,this._oscLinkService=_}provideLinks(m,l){var _;const p=this._bufferService.buffer.lines.get(m-1);if(!p)return void l(void 0);const d=[],g=this._optionsService.rawOptions.linkHandler,w=new f.CellData,E=p.getTrimmedLength();let C=-1,S=-1,k=!1;for(let D=0;D<E;D++)if(S!==-1||p.hasContent(D)){if(p.loadCell(D,w),w.hasExtendedAttrs()&&w.extended.urlId){if(S===-1){S=D,C=w.extended.urlId;continue}k=w.extended.urlId!==C}else S!==-1&&(k=!0);if(k||S!==-1&&D===E-1){const O=(_=this._oscLinkService.getLinkData(C))===null||_===void 0?void 0:_.uri;if(O){const A={start:{x:S+1,y:m},end:{x:D+(k||D!==E-1?0:1),y:m}};let T=!1;if(!(g!=null&&g.allowNonHttpProtocols))try{const B=new URL(O);["http:","https:"].includes(B.protocol)||(T=!0)}catch{T=!0}T||d.push({text:O,range:A,activate:(B,G)=>g?g.activate(B,G,A):v(0,G),hover:(B,G)=>{var V;return(V=g==null?void 0:g.hover)===null||V===void 0?void 0:V.call(g,B,G,A)},leave:(B,G)=>{var V;return(V=g==null?void 0:g.leave)===null||V===void 0?void 0:V.call(g,B,G,A)}})}k=!1,w.hasExtendedAttrs()&&w.extended.urlId?(S=D,C=w.extended.urlId):(S=-1,C=-1)}}l(d)}};function v(m,l){if(confirm(`Do you want to navigate to ${l}?

WARNING: This link could potentially be dangerous`)){const _=window.open();if(_){try{_.opener=null}catch{}_.location.href=l}else console.warn("Opening link blocked as opener could not be cleared")}}y=h([u(0,b.IBufferService),u(1,b.IOptionsService),u(2,b.IOscLinkService)],y),o.OscLinkProvider=y},6193:(c,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.RenderDebouncer=void 0,o.RenderDebouncer=class{constructor(a,h){this._parentWindow=a,this._renderCallback=h,this._refreshCallbacks=[]}dispose(){this._animationFrame&&(this._parentWindow.cancelAnimationFrame(this._animationFrame),this._animationFrame=void 0)}addRefreshCallback(a){return this._refreshCallbacks.push(a),this._animationFrame||(this._animationFrame=this._parentWindow.requestAnimationFrame(()=>this._innerRefresh())),this._animationFrame}refresh(a,h,u){this._rowCount=u,a=a!==void 0?a:0,h=h!==void 0?h:this._rowCount-1,this._rowStart=this._rowStart!==void 0?Math.min(this._rowStart,a):a,this._rowEnd=this._rowEnd!==void 0?Math.max(this._rowEnd,h):h,this._animationFrame||(this._animationFrame=this._parentWindow.requestAnimationFrame(()=>this._innerRefresh()))}_innerRefresh(){if(this._animationFrame=void 0,this._rowStart===void 0||this._rowEnd===void 0||this._rowCount===void 0)return void this._runRefreshCallbacks();const a=Math.max(this._rowStart,0),h=Math.min(this._rowEnd,this._rowCount-1);this._rowStart=void 0,this._rowEnd=void 0,this._renderCallback(a,h),this._runRefreshCallbacks()}_runRefreshCallbacks(){for(const a of this._refreshCallbacks)a(0);this._refreshCallbacks=[]}}},5596:(c,o,a)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.ScreenDprMonitor=void 0;const h=a(844);class u extends h.Disposable{constructor(b){super(),this._parentWindow=b,this._currentDevicePixelRatio=this._parentWindow.devicePixelRatio,this.register((0,h.toDisposable)(()=>{this.clearListener()}))}setListener(b){this._listener&&this.clearListener(),this._listener=b,this._outerListener=()=>{this._listener&&(this._listener(this._parentWindow.devicePixelRatio,this._currentDevicePixelRatio),this._updateDpr())},this._updateDpr()}_updateDpr(){var b;this._outerListener&&((b=this._resolutionMediaMatchList)===null||b===void 0||b.removeListener(this._outerListener),this._currentDevicePixelRatio=this._parentWindow.devicePixelRatio,this._resolutionMediaMatchList=this._parentWindow.matchMedia(`screen and (resolution: ${this._parentWindow.devicePixelRatio}dppx)`),this._resolutionMediaMatchList.addListener(this._outerListener))}clearListener(){this._resolutionMediaMatchList&&this._listener&&this._outerListener&&(this._resolutionMediaMatchList.removeListener(this._outerListener),this._resolutionMediaMatchList=void 0,this._listener=void 0,this._outerListener=void 0)}}o.ScreenDprMonitor=u},3236:(c,o,a)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.Terminal=void 0;const h=a(2950),u=a(1680),f=a(3614),b=a(2584),y=a(5435),v=a(9312),m=a(6114),l=a(3656),_=a(9042),p=a(4567),d=a(1296),g=a(7399),w=a(8460),E=a(8437),C=a(3230),S=a(4725),k=a(428),D=a(8934),O=a(6465),A=a(5114),T=a(8969),B=a(8055),G=a(4269),V=a(5941),L=a(3107),R=a(5744),M=a(9074),P=a(2585),z=a(3730),j=a(844),de=a(6731),X=typeof window<"u"?window.document:null;class ae extends T.CoreTerminal{constructor(x={}){super(x),this.browser=m,this._keyDownHandled=!1,this._keyDownSeen=!1,this._keyPressHandled=!1,this._unprocessedDeadKey=!1,this._onCursorMove=this.register(new w.EventEmitter),this.onCursorMove=this._onCursorMove.event,this._onKey=this.register(new w.EventEmitter),this.onKey=this._onKey.event,this._onRender=this.register(new w.EventEmitter),this.onRender=this._onRender.event,this._onSelectionChange=this.register(new w.EventEmitter),this.onSelectionChange=this._onSelectionChange.event,this._onTitleChange=this.register(new w.EventEmitter),this.onTitleChange=this._onTitleChange.event,this._onBell=this.register(new w.EventEmitter),this.onBell=this._onBell.event,this._onFocus=this.register(new w.EventEmitter),this._onBlur=this.register(new w.EventEmitter),this._onA11yCharEmitter=this.register(new w.EventEmitter),this._onA11yTabEmitter=this.register(new w.EventEmitter),this._onWillOpen=this.register(new w.EventEmitter),this._setup(),this.linkifier2=this.register(this._instantiationService.createInstance(O.Linkifier2)),this.linkifier2.registerLinkProvider(this._instantiationService.createInstance(z.OscLinkProvider)),this._decorationService=this._instantiationService.createInstance(M.DecorationService),this._instantiationService.setService(P.IDecorationService,this._decorationService),this.register(this._inputHandler.onRequestBell(()=>this._onBell.fire())),this.register(this._inputHandler.onRequestRefreshRows((H,$)=>this.refresh(H,$))),this.register(this._inputHandler.onRequestSendFocus(()=>this._reportFocus())),this.register(this._inputHandler.onRequestReset(()=>this.reset())),this.register(this._inputHandler.onRequestWindowsOptionsReport(H=>this._reportWindowsOptions(H))),this.register(this._inputHandler.onColor(H=>this._handleColorEvent(H))),this.register((0,w.forwardEvent)(this._inputHandler.onCursorMove,this._onCursorMove)),this.register((0,w.forwardEvent)(this._inputHandler.onTitleChange,this._onTitleChange)),this.register((0,w.forwardEvent)(this._inputHandler.onA11yChar,this._onA11yCharEmitter)),this.register((0,w.forwardEvent)(this._inputHandler.onA11yTab,this._onA11yTabEmitter)),this.register(this._bufferService.onResize(H=>this._afterResize(H.cols,H.rows))),this.register((0,j.toDisposable)(()=>{var H,$;this._customKeyEventHandler=void 0,($=(H=this.element)===null||H===void 0?void 0:H.parentNode)===null||$===void 0||$.removeChild(this.element)}))}get onFocus(){return this._onFocus.event}get onBlur(){return this._onBlur.event}get onA11yChar(){return this._onA11yCharEmitter.event}get onA11yTab(){return this._onA11yTabEmitter.event}get onWillOpen(){return this._onWillOpen.event}_handleColorEvent(x){if(this._themeService)for(const H of x){let $,ee="";switch(H.index){case 256:$="foreground",ee="10";break;case 257:$="background",ee="11";break;case 258:$="cursor",ee="12";break;default:$="ansi",ee="4;"+H.index}switch(H.type){case 0:const Se=B.color.toColorRGB($==="ansi"?this._themeService.colors.ansi[H.index]:this._themeService.colors[$]);this.coreService.triggerDataEvent(`${b.C0.ESC}]${ee};${(0,V.toRgbString)(Se)}${b.C1_ESCAPED.ST}`);break;case 1:if($==="ansi")this._themeService.modifyColors(te=>te.ansi[H.index]=B.rgba.toColor(...H.color));else{const te=$;this._themeService.modifyColors(Ae=>Ae[te]=B.rgba.toColor(...H.color))}break;case 2:this._themeService.restoreColor(H.index)}}}_setup(){super._setup(),this._customKeyEventHandler=void 0}get buffer(){return this.buffers.active}focus(){this.textarea&&this.textarea.focus({preventScroll:!0})}_handleScreenReaderModeOptionChange(x){var H;x?!this._accessibilityManager&&this._renderService&&(this._accessibilityManager=this._instantiationService.createInstance(p.AccessibilityManager,this)):((H=this._accessibilityManager)===null||H===void 0||H.dispose(),this._accessibilityManager=void 0)}_handleTextAreaFocus(x){this.coreService.decPrivateModes.sendFocus&&this.coreService.triggerDataEvent(b.C0.ESC+"[I"),this.updateCursorStyle(x),this.element.classList.add("focus"),this._showCursor(),this._onFocus.fire()}blur(){var x;return(x=this.textarea)===null||x===void 0?void 0:x.blur()}_handleTextAreaBlur(){this.textarea.value="",this.refresh(this.buffer.y,this.buffer.y),this.coreService.decPrivateModes.sendFocus&&this.coreService.triggerDataEvent(b.C0.ESC+"[O"),this.element.classList.remove("focus"),this._onBlur.fire()}_syncTextArea(){if(!this.textarea||!this.buffer.isCursorInViewport||this._compositionHelper.isComposing||!this._renderService)return;const x=this.buffer.ybase+this.buffer.y,H=this.buffer.lines.get(x);if(!H)return;const $=Math.min(this.buffer.x,this.cols-1),ee=this._renderService.dimensions.css.cell.height,Se=H.getWidth($),te=this._renderService.dimensions.css.cell.width*Se,Ae=this.buffer.y*this._renderService.dimensions.css.cell.height,Ue=$*this._renderService.dimensions.css.cell.width;this.textarea.style.left=Ue+"px",this.textarea.style.top=Ae+"px",this.textarea.style.width=te+"px",this.textarea.style.height=ee+"px",this.textarea.style.lineHeight=ee+"px",this.textarea.style.zIndex="-5"}_initGlobal(){this._bindKeys(),this.register((0,l.addDisposableDomListener)(this.element,"copy",H=>{this.hasSelection()&&(0,f.copyHandler)(H,this._selectionService)}));const x=H=>(0,f.handlePasteEvent)(H,this.textarea,this.coreService);this.register((0,l.addDisposableDomListener)(this.textarea,"paste",x)),this.register((0,l.addDisposableDomListener)(this.element,"paste",x)),m.isFirefox?this.register((0,l.addDisposableDomListener)(this.element,"mousedown",H=>{H.button===2&&(0,f.rightClickHandler)(H,this.textarea,this.screenElement,this._selectionService,this.options.rightClickSelectsWord)})):this.register((0,l.addDisposableDomListener)(this.element,"contextmenu",H=>{(0,f.rightClickHandler)(H,this.textarea,this.screenElement,this._selectionService,this.options.rightClickSelectsWord)})),m.isLinux&&this.register((0,l.addDisposableDomListener)(this.element,"auxclick",H=>{H.button===1&&(0,f.moveTextAreaUnderMouseCursor)(H,this.textarea,this.screenElement)}))}_bindKeys(){this.register((0,l.addDisposableDomListener)(this.textarea,"keyup",x=>this._keyUp(x),!0)),this.register((0,l.addDisposableDomListener)(this.textarea,"keydown",x=>this._keyDown(x),!0)),this.register((0,l.addDisposableDomListener)(this.textarea,"keypress",x=>this._keyPress(x),!0)),this.register((0,l.addDisposableDomListener)(this.textarea,"compositionstart",()=>this._compositionHelper.compositionstart())),this.register((0,l.addDisposableDomListener)(this.textarea,"compositionupdate",x=>this._compositionHelper.compositionupdate(x))),this.register((0,l.addDisposableDomListener)(this.textarea,"compositionend",()=>this._compositionHelper.compositionend())),this.register((0,l.addDisposableDomListener)(this.textarea,"input",x=>this._inputEvent(x),!0)),this.register(this.onRender(()=>this._compositionHelper.updateCompositionElements()))}open(x){var H;if(!x)throw new Error("Terminal requires a parent element.");x.isConnected||this._logService.debug("Terminal.open was called on an element that was not attached to the DOM"),this._document=x.ownerDocument,this.element=this._document.createElement("div"),this.element.dir="ltr",this.element.classList.add("terminal"),this.element.classList.add("xterm"),x.appendChild(this.element);const $=X.createDocumentFragment();this._viewportElement=X.createElement("div"),this._viewportElement.classList.add("xterm-viewport"),$.appendChild(this._viewportElement),this._viewportScrollArea=X.createElement("div"),this._viewportScrollArea.classList.add("xterm-scroll-area"),this._viewportElement.appendChild(this._viewportScrollArea),this.screenElement=X.createElement("div"),this.screenElement.classList.add("xterm-screen"),this._helperContainer=X.createElement("div"),this._helperContainer.classList.add("xterm-helpers"),this.screenElement.appendChild(this._helperContainer),$.appendChild(this.screenElement),this.textarea=X.createElement("textarea"),this.textarea.classList.add("xterm-helper-textarea"),this.textarea.setAttribute("aria-label",_.promptLabel),m.isChromeOS||this.textarea.setAttribute("aria-multiline","false"),this.textarea.setAttribute("autocorrect","off"),this.textarea.setAttribute("autocapitalize","off"),this.textarea.setAttribute("spellcheck","false"),this.textarea.tabIndex=0,this._coreBrowserService=this._instantiationService.createInstance(A.CoreBrowserService,this.textarea,(H=this._document.defaultView)!==null&&H!==void 0?H:window),this._instantiationService.setService(S.ICoreBrowserService,this._coreBrowserService),this.register((0,l.addDisposableDomListener)(this.textarea,"focus",ee=>this._handleTextAreaFocus(ee))),this.register((0,l.addDisposableDomListener)(this.textarea,"blur",()=>this._handleTextAreaBlur())),this._helperContainer.appendChild(this.textarea),this._charSizeService=this._instantiationService.createInstance(k.CharSizeService,this._document,this._helperContainer),this._instantiationService.setService(S.ICharSizeService,this._charSizeService),this._themeService=this._instantiationService.createInstance(de.ThemeService),this._instantiationService.setService(S.IThemeService,this._themeService),this._characterJoinerService=this._instantiationService.createInstance(G.CharacterJoinerService),this._instantiationService.setService(S.ICharacterJoinerService,this._characterJoinerService),this._renderService=this.register(this._instantiationService.createInstance(C.RenderService,this.rows,this.screenElement)),this._instantiationService.setService(S.IRenderService,this._renderService),this.register(this._renderService.onRenderedViewportChange(ee=>this._onRender.fire(ee))),this.onResize(ee=>this._renderService.resize(ee.cols,ee.rows)),this._compositionView=X.createElement("div"),this._compositionView.classList.add("composition-view"),this._compositionHelper=this._instantiationService.createInstance(h.CompositionHelper,this.textarea,this._compositionView),this._helperContainer.appendChild(this._compositionView),this.element.appendChild($);try{this._onWillOpen.fire(this.element)}catch{}this._renderService.hasRenderer()||this._renderService.setRenderer(this._createRenderer()),this._mouseService=this._instantiationService.createInstance(D.MouseService),this._instantiationService.setService(S.IMouseService,this._mouseService),this.viewport=this._instantiationService.createInstance(u.Viewport,ee=>this.scrollLines(ee,!0,1),this._viewportElement,this._viewportScrollArea),this.register(this._inputHandler.onRequestSyncScrollBar(()=>this.viewport.syncScrollArea())),this.register(this.viewport),this.register(this.onCursorMove(()=>{this._renderService.handleCursorMove(),this._syncTextArea()})),this.register(this.onResize(()=>this._renderService.handleResize(this.cols,this.rows))),this.register(this.onBlur(()=>this._renderService.handleBlur())),this.register(this.onFocus(()=>this._renderService.handleFocus())),this.register(this._renderService.onDimensionsChange(()=>this.viewport.syncScrollArea())),this._selectionService=this.register(this._instantiationService.createInstance(v.SelectionService,this.element,this.screenElement,this.linkifier2)),this._instantiationService.setService(S.ISelectionService,this._selectionService),this.register(this._selectionService.onRequestScrollLines(ee=>this.scrollLines(ee.amount,ee.suppressScrollEvent))),this.register(this._selectionService.onSelectionChange(()=>this._onSelectionChange.fire())),this.register(this._selectionService.onRequestRedraw(ee=>this._renderService.handleSelectionChanged(ee.start,ee.end,ee.columnSelectMode))),this.register(this._selectionService.onLinuxMouseSelection(ee=>{this.textarea.value=ee,this.textarea.focus(),this.textarea.select()})),this.register(this._onScroll.event(ee=>{this.viewport.syncScrollArea(),this._selectionService.refresh()})),this.register((0,l.addDisposableDomListener)(this._viewportElement,"scroll",()=>this._selectionService.refresh())),this.linkifier2.attachToDom(this.screenElement,this._mouseService,this._renderService),this.register(this._instantiationService.createInstance(L.BufferDecorationRenderer,this.screenElement)),this.register((0,l.addDisposableDomListener)(this.element,"mousedown",ee=>this._selectionService.handleMouseDown(ee))),this.coreMouseService.areMouseEventsActive?(this._selectionService.disable(),this.element.classList.add("enable-mouse-events")):this._selectionService.enable(),this.options.screenReaderMode&&(this._accessibilityManager=this._instantiationService.createInstance(p.AccessibilityManager,this)),this.register(this.optionsService.onSpecificOptionChange("screenReaderMode",ee=>this._handleScreenReaderModeOptionChange(ee))),this.options.overviewRulerWidth&&(this._overviewRulerRenderer=this.register(this._instantiationService.createInstance(R.OverviewRulerRenderer,this._viewportElement,this.screenElement))),this.optionsService.onSpecificOptionChange("overviewRulerWidth",ee=>{!this._overviewRulerRenderer&&ee&&this._viewportElement&&this.screenElement&&(this._overviewRulerRenderer=this.register(this._instantiationService.createInstance(R.OverviewRulerRenderer,this._viewportElement,this.screenElement)))}),this._charSizeService.measure(),this.refresh(0,this.rows-1),this._initGlobal(),this.bindMouse()}_createRenderer(){return this._instantiationService.createInstance(d.DomRenderer,this.element,this.screenElement,this._viewportElement,this.linkifier2)}bindMouse(){const x=this,H=this.element;function $(te){const Ae=x._mouseService.getMouseReportCoords(te,x.screenElement);if(!Ae)return!1;let Ue,Ie;switch(te.overrideType||te.type){case"mousemove":Ie=32,te.buttons===void 0?(Ue=3,te.button!==void 0&&(Ue=te.button<3?te.button:3)):Ue=1&te.buttons?0:4&te.buttons?1:2&te.buttons?2:3;break;case"mouseup":Ie=0,Ue=te.button<3?te.button:3;break;case"mousedown":Ie=1,Ue=te.button<3?te.button:3;break;case"wheel":if(x.viewport.getLinesScrolled(te)===0)return!1;Ie=te.deltaY<0?0:1,Ue=4;break;default:return!1}return!(Ie===void 0||Ue===void 0||Ue>4)&&x.coreMouseService.triggerMouseEvent({col:Ae.col,row:Ae.row,x:Ae.x,y:Ae.y,button:Ue,action:Ie,ctrl:te.ctrlKey,alt:te.altKey,shift:te.shiftKey})}const ee={mouseup:null,wheel:null,mousedrag:null,mousemove:null},Se={mouseup:te=>($(te),te.buttons||(this._document.removeEventListener("mouseup",ee.mouseup),ee.mousedrag&&this._document.removeEventListener("mousemove",ee.mousedrag)),this.cancel(te)),wheel:te=>($(te),this.cancel(te,!0)),mousedrag:te=>{te.buttons&&$(te)},mousemove:te=>{te.buttons||$(te)}};this.register(this.coreMouseService.onProtocolChange(te=>{te?(this.optionsService.rawOptions.logLevel==="debug"&&this._logService.debug("Binding to mouse events:",this.coreMouseService.explainEvents(te)),this.element.classList.add("enable-mouse-events"),this._selectionService.disable()):(this._logService.debug("Unbinding from mouse events."),this.element.classList.remove("enable-mouse-events"),this._selectionService.enable()),8&te?ee.mousemove||(H.addEventListener("mousemove",Se.mousemove),ee.mousemove=Se.mousemove):(H.removeEventListener("mousemove",ee.mousemove),ee.mousemove=null),16&te?ee.wheel||(H.addEventListener("wheel",Se.wheel,{passive:!1}),ee.wheel=Se.wheel):(H.removeEventListener("wheel",ee.wheel),ee.wheel=null),2&te?ee.mouseup||(ee.mouseup=Se.mouseup):(this._document.removeEventListener("mouseup",ee.mouseup),ee.mouseup=null),4&te?ee.mousedrag||(ee.mousedrag=Se.mousedrag):(this._document.removeEventListener("mousemove",ee.mousedrag),ee.mousedrag=null)})),this.coreMouseService.activeProtocol=this.coreMouseService.activeProtocol,this.register((0,l.addDisposableDomListener)(H,"mousedown",te=>{if(te.preventDefault(),this.focus(),this.coreMouseService.areMouseEventsActive&&!this._selectionService.shouldForceSelection(te))return $(te),ee.mouseup&&this._document.addEventListener("mouseup",ee.mouseup),ee.mousedrag&&this._document.addEventListener("mousemove",ee.mousedrag),this.cancel(te)})),this.register((0,l.addDisposableDomListener)(H,"wheel",te=>{if(!ee.wheel){if(!this.buffer.hasScrollback){const Ae=this.viewport.getLinesScrolled(te);if(Ae===0)return;const Ue=b.C0.ESC+(this.coreService.decPrivateModes.applicationCursorKeys?"O":"[")+(te.deltaY<0?"A":"B");let Ie="";for(let De=0;De<Math.abs(Ae);De++)Ie+=Ue;return this.coreService.triggerDataEvent(Ie,!0),this.cancel(te,!0)}return this.viewport.handleWheel(te)?this.cancel(te):void 0}},{passive:!1})),this.register((0,l.addDisposableDomListener)(H,"touchstart",te=>{if(!this.coreMouseService.areMouseEventsActive)return this.viewport.handleTouchStart(te),this.cancel(te)},{passive:!0})),this.register((0,l.addDisposableDomListener)(H,"touchmove",te=>{if(!this.coreMouseService.areMouseEventsActive)return this.viewport.handleTouchMove(te)?void 0:this.cancel(te)},{passive:!1}))}refresh(x,H){var $;($=this._renderService)===null||$===void 0||$.refreshRows(x,H)}updateCursorStyle(x){var H;!((H=this._selectionService)===null||H===void 0)&&H.shouldColumnSelect(x)?this.element.classList.add("column-select"):this.element.classList.remove("column-select")}_showCursor(){this.coreService.isCursorInitialized||(this.coreService.isCursorInitialized=!0,this.refresh(this.buffer.y,this.buffer.y))}scrollLines(x,H,$=0){super.scrollLines(x,H,$),this.refresh(0,this.rows-1)}paste(x){(0,f.paste)(x,this.textarea,this.coreService)}attachCustomKeyEventHandler(x){this._customKeyEventHandler=x}registerLinkProvider(x){return this.linkifier2.registerLinkProvider(x)}registerCharacterJoiner(x){if(!this._characterJoinerService)throw new Error("Terminal must be opened first");const H=this._characterJoinerService.register(x);return this.refresh(0,this.rows-1),H}deregisterCharacterJoiner(x){if(!this._characterJoinerService)throw new Error("Terminal must be opened first");this._characterJoinerService.deregister(x)&&this.refresh(0,this.rows-1)}get markers(){return this.buffer.markers}addMarker(x){return this.buffer.addMarker(this.buffer.ybase+this.buffer.y+x)}registerDecoration(x){return this._decorationService.registerDecoration(x)}hasSelection(){return!!this._selectionService&&this._selectionService.hasSelection}select(x,H,$){this._selectionService.setSelection(x,H,$)}getSelection(){return this._selectionService?this._selectionService.selectionText:""}getSelectionPosition(){if(this._selectionService&&this._selectionService.hasSelection)return{start:{x:this._selectionService.selectionStart[0],y:this._selectionService.selectionStart[1]},end:{x:this._selectionService.selectionEnd[0],y:this._selectionService.selectionEnd[1]}}}clearSelection(){var x;(x=this._selectionService)===null||x===void 0||x.clearSelection()}selectAll(){var x;(x=this._selectionService)===null||x===void 0||x.selectAll()}selectLines(x,H){var $;($=this._selectionService)===null||$===void 0||$.selectLines(x,H)}_keyDown(x){if(this._keyDownHandled=!1,this._keyDownSeen=!0,this._customKeyEventHandler&&this._customKeyEventHandler(x)===!1)return!1;const H=this.browser.isMac&&this.options.macOptionIsMeta&&x.altKey;if(!H&&!this._compositionHelper.keydown(x))return this.options.scrollOnUserInput&&this.buffer.ybase!==this.buffer.ydisp&&this._bufferService.scrollToBottom(),!1;H||x.key!=="Dead"&&x.key!=="AltGraph"||(this._unprocessedDeadKey=!0);const $=(0,g.evaluateKeyboardEvent)(x,this.coreService.decPrivateModes.applicationCursorKeys,this.browser.isMac,this.options.macOptionIsMeta);if(this.updateCursorStyle(x),$.type===3||$.type===2){const ee=this.rows-1;return this.scrollLines($.type===2?-ee:ee),this.cancel(x,!0)}return $.type===1&&this.selectAll(),!!this._isThirdLevelShift(this.browser,x)||($.cancel&&this.cancel(x,!0),!$.key||!!(x.key&&!x.ctrlKey&&!x.altKey&&!x.metaKey&&x.key.length===1&&x.key.charCodeAt(0)>=65&&x.key.charCodeAt(0)<=90)||(this._unprocessedDeadKey?(this._unprocessedDeadKey=!1,!0):($.key!==b.C0.ETX&&$.key!==b.C0.CR||(this.textarea.value=""),this._onKey.fire({key:$.key,domEvent:x}),this._showCursor(),this.coreService.triggerDataEvent($.key,!0),!this.optionsService.rawOptions.screenReaderMode||x.altKey||x.ctrlKey?this.cancel(x,!0):void(this._keyDownHandled=!0))))}_isThirdLevelShift(x,H){const $=x.isMac&&!this.options.macOptionIsMeta&&H.altKey&&!H.ctrlKey&&!H.metaKey||x.isWindows&&H.altKey&&H.ctrlKey&&!H.metaKey||x.isWindows&&H.getModifierState("AltGraph");return H.type==="keypress"?$:$&&(!H.keyCode||H.keyCode>47)}_keyUp(x){this._keyDownSeen=!1,this._customKeyEventHandler&&this._customKeyEventHandler(x)===!1||(function(H){return H.keyCode===16||H.keyCode===17||H.keyCode===18}(x)||this.focus(),this.updateCursorStyle(x),this._keyPressHandled=!1)}_keyPress(x){let H;if(this._keyPressHandled=!1,this._keyDownHandled||this._customKeyEventHandler&&this._customKeyEventHandler(x)===!1)return!1;if(this.cancel(x),x.charCode)H=x.charCode;else if(x.which===null||x.which===void 0)H=x.keyCode;else{if(x.which===0||x.charCode===0)return!1;H=x.which}return!(!H||(x.altKey||x.ctrlKey||x.metaKey)&&!this._isThirdLevelShift(this.browser,x)||(H=String.fromCharCode(H),this._onKey.fire({key:H,domEvent:x}),this._showCursor(),this.coreService.triggerDataEvent(H,!0),this._keyPressHandled=!0,this._unprocessedDeadKey=!1,0))}_inputEvent(x){if(x.data&&x.inputType==="insertText"&&(!x.composed||!this._keyDownSeen)&&!this.optionsService.rawOptions.screenReaderMode){if(this._keyPressHandled)return!1;this._unprocessedDeadKey=!1;const H=x.data;return this.coreService.triggerDataEvent(H,!0),this.cancel(x),!0}return!1}resize(x,H){x!==this.cols||H!==this.rows?super.resize(x,H):this._charSizeService&&!this._charSizeService.hasValidSize&&this._charSizeService.measure()}_afterResize(x,H){var $,ee;($=this._charSizeService)===null||$===void 0||$.measure(),(ee=this.viewport)===null||ee===void 0||ee.syncScrollArea(!0)}clear(){if(this.buffer.ybase!==0||this.buffer.y!==0){this.buffer.clearAllMarkers(),this.buffer.lines.set(0,this.buffer.lines.get(this.buffer.ybase+this.buffer.y)),this.buffer.lines.length=1,this.buffer.ydisp=0,this.buffer.ybase=0,this.buffer.y=0;for(let x=1;x<this.rows;x++)this.buffer.lines.push(this.buffer.getBlankLine(E.DEFAULT_ATTR_DATA));this.refresh(0,this.rows-1),this._onScroll.fire({position:this.buffer.ydisp,source:0})}}reset(){var x,H;this.options.rows=this.rows,this.options.cols=this.cols;const $=this._customKeyEventHandler;this._setup(),super.reset(),(x=this._selectionService)===null||x===void 0||x.reset(),this._decorationService.reset(),this._customKeyEventHandler=$,this.refresh(0,this.rows-1),(H=this.viewport)===null||H===void 0||H.syncScrollArea()}clearTextureAtlas(){var x;(x=this._renderService)===null||x===void 0||x.clearTextureAtlas()}_reportFocus(){var x;!((x=this.element)===null||x===void 0)&&x.classList.contains("focus")?this.coreService.triggerDataEvent(b.C0.ESC+"[I"):this.coreService.triggerDataEvent(b.C0.ESC+"[O")}_reportWindowsOptions(x){if(this._renderService)switch(x){case y.WindowsOptionsReportType.GET_WIN_SIZE_PIXELS:const H=this._renderService.dimensions.css.canvas.width.toFixed(0),$=this._renderService.dimensions.css.canvas.height.toFixed(0);this.coreService.triggerDataEvent(`${b.C0.ESC}[4;${$};${H}t`);break;case y.WindowsOptionsReportType.GET_CELL_SIZE_PIXELS:const ee=this._renderService.dimensions.css.cell.width.toFixed(0),Se=this._renderService.dimensions.css.cell.height.toFixed(0);this.coreService.triggerDataEvent(`${b.C0.ESC}[6;${Se};${ee}t`)}}cancel(x,H){if(this.options.cancelEvents||H)return x.preventDefault(),x.stopPropagation(),!1}}o.Terminal=ae},9924:(c,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.TimeBasedDebouncer=void 0,o.TimeBasedDebouncer=class{constructor(a,h=1e3){this._renderCallback=a,this._debounceThresholdMS=h,this._lastRefreshMs=0,this._additionalRefreshRequested=!1}dispose(){this._refreshTimeoutID&&clearTimeout(this._refreshTimeoutID)}refresh(a,h,u){this._rowCount=u,a=a!==void 0?a:0,h=h!==void 0?h:this._rowCount-1,this._rowStart=this._rowStart!==void 0?Math.min(this._rowStart,a):a,this._rowEnd=this._rowEnd!==void 0?Math.max(this._rowEnd,h):h;const f=Date.now();if(f-this._lastRefreshMs>=this._debounceThresholdMS)this._lastRefreshMs=f,this._innerRefresh();else if(!this._additionalRefreshRequested){const b=f-this._lastRefreshMs,y=this._debounceThresholdMS-b;this._additionalRefreshRequested=!0,this._refreshTimeoutID=window.setTimeout(()=>{this._lastRefreshMs=Date.now(),this._innerRefresh(),this._additionalRefreshRequested=!1,this._refreshTimeoutID=void 0},y)}}_innerRefresh(){if(this._rowStart===void 0||this._rowEnd===void 0||this._rowCount===void 0)return;const a=Math.max(this._rowStart,0),h=Math.min(this._rowEnd,this._rowCount-1);this._rowStart=void 0,this._rowEnd=void 0,this._renderCallback(a,h)}}},1680:function(c,o,a){var h=this&&this.__decorate||function(l,_,p,d){var g,w=arguments.length,E=w<3?_:d===null?d=Object.getOwnPropertyDescriptor(_,p):d;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")E=Reflect.decorate(l,_,p,d);else for(var C=l.length-1;C>=0;C--)(g=l[C])&&(E=(w<3?g(E):w>3?g(_,p,E):g(_,p))||E);return w>3&&E&&Object.defineProperty(_,p,E),E},u=this&&this.__param||function(l,_){return function(p,d){_(p,d,l)}};Object.defineProperty(o,"__esModule",{value:!0}),o.Viewport=void 0;const f=a(844),b=a(3656),y=a(4725),v=a(2585);let m=class extends f.Disposable{constructor(l,_,p,d,g,w,E,C,S){super(),this._scrollLines=l,this._viewportElement=_,this._scrollArea=p,this._bufferService=d,this._optionsService=g,this._charSizeService=w,this._renderService=E,this._coreBrowserService=C,this.scrollBarWidth=0,this._currentRowHeight=0,this._currentDeviceCellHeight=0,this._lastRecordedBufferLength=0,this._lastRecordedViewportHeight=0,this._lastRecordedBufferHeight=0,this._lastTouchY=0,this._lastScrollTop=0,this._wheelPartialScroll=0,this._refreshAnimationFrame=null,this._ignoreNextScrollEvent=!1,this._smoothScrollState={startTime:0,origin:-1,target:-1},this.scrollBarWidth=this._viewportElement.offsetWidth-this._scrollArea.offsetWidth||15,this.register((0,b.addDisposableDomListener)(this._viewportElement,"scroll",this._handleScroll.bind(this))),this._activeBuffer=this._bufferService.buffer,this.register(this._bufferService.buffers.onBufferActivate(k=>this._activeBuffer=k.activeBuffer)),this._renderDimensions=this._renderService.dimensions,this.register(this._renderService.onDimensionsChange(k=>this._renderDimensions=k)),this._handleThemeChange(S.colors),this.register(S.onChangeColors(k=>this._handleThemeChange(k))),this.register(this._optionsService.onSpecificOptionChange("scrollback",()=>this.syncScrollArea())),setTimeout(()=>this.syncScrollArea(),0)}_handleThemeChange(l){this._viewportElement.style.backgroundColor=l.background.css}_refresh(l){if(l)return this._innerRefresh(),void(this._refreshAnimationFrame!==null&&this._coreBrowserService.window.cancelAnimationFrame(this._refreshAnimationFrame));this._refreshAnimationFrame===null&&(this._refreshAnimationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>this._innerRefresh()))}_innerRefresh(){if(this._charSizeService.height>0){this._currentRowHeight=this._renderService.dimensions.device.cell.height/this._coreBrowserService.dpr,this._currentDeviceCellHeight=this._renderService.dimensions.device.cell.height,this._lastRecordedViewportHeight=this._viewportElement.offsetHeight;const _=Math.round(this._currentRowHeight*this._lastRecordedBufferLength)+(this._lastRecordedViewportHeight-this._renderService.dimensions.css.canvas.height);this._lastRecordedBufferHeight!==_&&(this._lastRecordedBufferHeight=_,this._scrollArea.style.height=this._lastRecordedBufferHeight+"px")}const l=this._bufferService.buffer.ydisp*this._currentRowHeight;this._viewportElement.scrollTop!==l&&(this._ignoreNextScrollEvent=!0,this._viewportElement.scrollTop=l),this._refreshAnimationFrame=null}syncScrollArea(l=!1){if(this._lastRecordedBufferLength!==this._bufferService.buffer.lines.length)return this._lastRecordedBufferLength=this._bufferService.buffer.lines.length,void this._refresh(l);this._lastRecordedViewportHeight===this._renderService.dimensions.css.canvas.height&&this._lastScrollTop===this._activeBuffer.ydisp*this._currentRowHeight&&this._renderDimensions.device.cell.height===this._currentDeviceCellHeight||this._refresh(l)}_handleScroll(l){if(this._lastScrollTop=this._viewportElement.scrollTop,!this._viewportElement.offsetParent)return;if(this._ignoreNextScrollEvent)return this._ignoreNextScrollEvent=!1,void this._scrollLines(0);const _=Math.round(this._lastScrollTop/this._currentRowHeight)-this._bufferService.buffer.ydisp;this._scrollLines(_)}_smoothScroll(){if(this._isDisposed||this._smoothScrollState.origin===-1||this._smoothScrollState.target===-1)return;const l=this._smoothScrollPercent();this._viewportElement.scrollTop=this._smoothScrollState.origin+Math.round(l*(this._smoothScrollState.target-this._smoothScrollState.origin)),l<1?this._coreBrowserService.window.requestAnimationFrame(()=>this._smoothScroll()):this._clearSmoothScrollState()}_smoothScrollPercent(){return this._optionsService.rawOptions.smoothScrollDuration&&this._smoothScrollState.startTime?Math.max(Math.min((Date.now()-this._smoothScrollState.startTime)/this._optionsService.rawOptions.smoothScrollDuration,1),0):1}_clearSmoothScrollState(){this._smoothScrollState.startTime=0,this._smoothScrollState.origin=-1,this._smoothScrollState.target=-1}_bubbleScroll(l,_){const p=this._viewportElement.scrollTop+this._lastRecordedViewportHeight;return!(_<0&&this._viewportElement.scrollTop!==0||_>0&&p<this._lastRecordedBufferHeight)||(l.cancelable&&l.preventDefault(),!1)}handleWheel(l){const _=this._getPixelsScrolled(l);return _!==0&&(this._optionsService.rawOptions.smoothScrollDuration?(this._smoothScrollState.startTime=Date.now(),this._smoothScrollPercent()<1?(this._smoothScrollState.origin=this._viewportElement.scrollTop,this._smoothScrollState.target===-1?this._smoothScrollState.target=this._viewportElement.scrollTop+_:this._smoothScrollState.target+=_,this._smoothScrollState.target=Math.max(Math.min(this._smoothScrollState.target,this._viewportElement.scrollHeight),0),this._smoothScroll()):this._clearSmoothScrollState()):this._viewportElement.scrollTop+=_,this._bubbleScroll(l,_))}_getPixelsScrolled(l){if(l.deltaY===0||l.shiftKey)return 0;let _=this._applyScrollModifier(l.deltaY,l);return l.deltaMode===WheelEvent.DOM_DELTA_LINE?_*=this._currentRowHeight:l.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(_*=this._currentRowHeight*this._bufferService.rows),_}getBufferElements(l,_){var p;let d,g="";const w=[],E=_??this._bufferService.buffer.lines.length,C=this._bufferService.buffer.lines;for(let S=l;S<E;S++){const k=C.get(S);if(!k)continue;const D=(p=C.get(S+1))===null||p===void 0?void 0:p.isWrapped;if(g+=k.translateToString(!D),!D||S===C.length-1){const O=document.createElement("div");O.textContent=g,w.push(O),g.length>0&&(d=O),g=""}}return{bufferElements:w,cursorElement:d}}getLinesScrolled(l){if(l.deltaY===0||l.shiftKey)return 0;let _=this._applyScrollModifier(l.deltaY,l);return l.deltaMode===WheelEvent.DOM_DELTA_PIXEL?(_/=this._currentRowHeight+0,this._wheelPartialScroll+=_,_=Math.floor(Math.abs(this._wheelPartialScroll))*(this._wheelPartialScroll>0?1:-1),this._wheelPartialScroll%=1):l.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(_*=this._bufferService.rows),_}_applyScrollModifier(l,_){const p=this._optionsService.rawOptions.fastScrollModifier;return p==="alt"&&_.altKey||p==="ctrl"&&_.ctrlKey||p==="shift"&&_.shiftKey?l*this._optionsService.rawOptions.fastScrollSensitivity*this._optionsService.rawOptions.scrollSensitivity:l*this._optionsService.rawOptions.scrollSensitivity}handleTouchStart(l){this._lastTouchY=l.touches[0].pageY}handleTouchMove(l){const _=this._lastTouchY-l.touches[0].pageY;return this._lastTouchY=l.touches[0].pageY,_!==0&&(this._viewportElement.scrollTop+=_,this._bubbleScroll(l,_))}};m=h([u(3,v.IBufferService),u(4,v.IOptionsService),u(5,y.ICharSizeService),u(6,y.IRenderService),u(7,y.ICoreBrowserService),u(8,y.IThemeService)],m),o.Viewport=m},3107:function(c,o,a){var h=this&&this.__decorate||function(l,_,p,d){var g,w=arguments.length,E=w<3?_:d===null?d=Object.getOwnPropertyDescriptor(_,p):d;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")E=Reflect.decorate(l,_,p,d);else for(var C=l.length-1;C>=0;C--)(g=l[C])&&(E=(w<3?g(E):w>3?g(_,p,E):g(_,p))||E);return w>3&&E&&Object.defineProperty(_,p,E),E},u=this&&this.__param||function(l,_){return function(p,d){_(p,d,l)}};Object.defineProperty(o,"__esModule",{value:!0}),o.BufferDecorationRenderer=void 0;const f=a(3656),b=a(4725),y=a(844),v=a(2585);let m=class extends y.Disposable{constructor(l,_,p,d){super(),this._screenElement=l,this._bufferService=_,this._decorationService=p,this._renderService=d,this._decorationElements=new Map,this._altBufferIsActive=!1,this._dimensionsChanged=!1,this._container=document.createElement("div"),this._container.classList.add("xterm-decoration-container"),this._screenElement.appendChild(this._container),this.register(this._renderService.onRenderedViewportChange(()=>this._doRefreshDecorations())),this.register(this._renderService.onDimensionsChange(()=>{this._dimensionsChanged=!0,this._queueRefresh()})),this.register((0,f.addDisposableDomListener)(window,"resize",()=>this._queueRefresh())),this.register(this._bufferService.buffers.onBufferActivate(()=>{this._altBufferIsActive=this._bufferService.buffer===this._bufferService.buffers.alt})),this.register(this._decorationService.onDecorationRegistered(()=>this._queueRefresh())),this.register(this._decorationService.onDecorationRemoved(g=>this._removeDecoration(g))),this.register((0,y.toDisposable)(()=>{this._container.remove(),this._decorationElements.clear()}))}_queueRefresh(){this._animationFrame===void 0&&(this._animationFrame=this._renderService.addRefreshCallback(()=>{this._doRefreshDecorations(),this._animationFrame=void 0}))}_doRefreshDecorations(){for(const l of this._decorationService.decorations)this._renderDecoration(l);this._dimensionsChanged=!1}_renderDecoration(l){this._refreshStyle(l),this._dimensionsChanged&&this._refreshXPosition(l)}_createElement(l){var _,p;const d=document.createElement("div");d.classList.add("xterm-decoration"),d.classList.toggle("xterm-decoration-top-layer",((_=l==null?void 0:l.options)===null||_===void 0?void 0:_.layer)==="top"),d.style.width=`${Math.round((l.options.width||1)*this._renderService.dimensions.css.cell.width)}px`,d.style.height=(l.options.height||1)*this._renderService.dimensions.css.cell.height+"px",d.style.top=(l.marker.line-this._bufferService.buffers.active.ydisp)*this._renderService.dimensions.css.cell.height+"px",d.style.lineHeight=`${this._renderService.dimensions.css.cell.height}px`;const g=(p=l.options.x)!==null&&p!==void 0?p:0;return g&&g>this._bufferService.cols&&(d.style.display="none"),this._refreshXPosition(l,d),d}_refreshStyle(l){const _=l.marker.line-this._bufferService.buffers.active.ydisp;if(_<0||_>=this._bufferService.rows)l.element&&(l.element.style.display="none",l.onRenderEmitter.fire(l.element));else{let p=this._decorationElements.get(l);p||(p=this._createElement(l),l.element=p,this._decorationElements.set(l,p),this._container.appendChild(p)),p.style.top=_*this._renderService.dimensions.css.cell.height+"px",p.style.display=this._altBufferIsActive?"none":"block",l.onRenderEmitter.fire(p)}}_refreshXPosition(l,_=l.element){var p;if(!_)return;const d=(p=l.options.x)!==null&&p!==void 0?p:0;(l.options.anchor||"left")==="right"?_.style.right=d?d*this._renderService.dimensions.css.cell.width+"px":"":_.style.left=d?d*this._renderService.dimensions.css.cell.width+"px":""}_removeDecoration(l){var _;(_=this._decorationElements.get(l))===null||_===void 0||_.remove(),this._decorationElements.delete(l),l.dispose()}};m=h([u(1,v.IBufferService),u(2,v.IDecorationService),u(3,b.IRenderService)],m),o.BufferDecorationRenderer=m},5871:(c,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.ColorZoneStore=void 0,o.ColorZoneStore=class{constructor(){this._zones=[],this._zonePool=[],this._zonePoolIndex=0,this._linePadding={full:0,left:0,center:0,right:0}}get zones(){return this._zonePool.length=Math.min(this._zonePool.length,this._zones.length),this._zones}clear(){this._zones.length=0,this._zonePoolIndex=0}addDecoration(a){if(a.options.overviewRulerOptions){for(const h of this._zones)if(h.color===a.options.overviewRulerOptions.color&&h.position===a.options.overviewRulerOptions.position){if(this._lineIntersectsZone(h,a.marker.line))return;if(this._lineAdjacentToZone(h,a.marker.line,a.options.overviewRulerOptions.position))return void this._addLineToZone(h,a.marker.line)}if(this._zonePoolIndex<this._zonePool.length)return this._zonePool[this._zonePoolIndex].color=a.options.overviewRulerOptions.color,this._zonePool[this._zonePoolIndex].position=a.options.overviewRulerOptions.position,this._zonePool[this._zonePoolIndex].startBufferLine=a.marker.line,this._zonePool[this._zonePoolIndex].endBufferLine=a.marker.line,void this._zones.push(this._zonePool[this._zonePoolIndex++]);this._zones.push({color:a.options.overviewRulerOptions.color,position:a.options.overviewRulerOptions.position,startBufferLine:a.marker.line,endBufferLine:a.marker.line}),this._zonePool.push(this._zones[this._zones.length-1]),this._zonePoolIndex++}}setPadding(a){this._linePadding=a}_lineIntersectsZone(a,h){return h>=a.startBufferLine&&h<=a.endBufferLine}_lineAdjacentToZone(a,h,u){return h>=a.startBufferLine-this._linePadding[u||"full"]&&h<=a.endBufferLine+this._linePadding[u||"full"]}_addLineToZone(a,h){a.startBufferLine=Math.min(a.startBufferLine,h),a.endBufferLine=Math.max(a.endBufferLine,h)}}},5744:function(c,o,a){var h=this&&this.__decorate||function(g,w,E,C){var S,k=arguments.length,D=k<3?w:C===null?C=Object.getOwnPropertyDescriptor(w,E):C;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")D=Reflect.decorate(g,w,E,C);else for(var O=g.length-1;O>=0;O--)(S=g[O])&&(D=(k<3?S(D):k>3?S(w,E,D):S(w,E))||D);return k>3&&D&&Object.defineProperty(w,E,D),D},u=this&&this.__param||function(g,w){return function(E,C){w(E,C,g)}};Object.defineProperty(o,"__esModule",{value:!0}),o.OverviewRulerRenderer=void 0;const f=a(5871),b=a(3656),y=a(4725),v=a(844),m=a(2585),l={full:0,left:0,center:0,right:0},_={full:0,left:0,center:0,right:0},p={full:0,left:0,center:0,right:0};let d=class extends v.Disposable{constructor(g,w,E,C,S,k,D){var O;super(),this._viewportElement=g,this._screenElement=w,this._bufferService=E,this._decorationService=C,this._renderService=S,this._optionsService=k,this._coreBrowseService=D,this._colorZoneStore=new f.ColorZoneStore,this._shouldUpdateDimensions=!0,this._shouldUpdateAnchor=!0,this._lastKnownBufferLength=0,this._canvas=document.createElement("canvas"),this._canvas.classList.add("xterm-decoration-overview-ruler"),this._refreshCanvasDimensions(),(O=this._viewportElement.parentElement)===null||O===void 0||O.insertBefore(this._canvas,this._viewportElement);const A=this._canvas.getContext("2d");if(!A)throw new Error("Ctx cannot be null");this._ctx=A,this._registerDecorationListeners(),this._registerBufferChangeListeners(),this._registerDimensionChangeListeners(),this.register((0,v.toDisposable)(()=>{var T;(T=this._canvas)===null||T===void 0||T.remove()}))}get _width(){return this._optionsService.options.overviewRulerWidth||0}_registerDecorationListeners(){this.register(this._decorationService.onDecorationRegistered(()=>this._queueRefresh(void 0,!0))),this.register(this._decorationService.onDecorationRemoved(()=>this._queueRefresh(void 0,!0)))}_registerBufferChangeListeners(){this.register(this._renderService.onRenderedViewportChange(()=>this._queueRefresh())),this.register(this._bufferService.buffers.onBufferActivate(()=>{this._canvas.style.display=this._bufferService.buffer===this._bufferService.buffers.alt?"none":"block"})),this.register(this._bufferService.onScroll(()=>{this._lastKnownBufferLength!==this._bufferService.buffers.normal.lines.length&&(this._refreshDrawHeightConstants(),this._refreshColorZonePadding())}))}_registerDimensionChangeListeners(){this.register(this._renderService.onRender(()=>{this._containerHeight&&this._containerHeight===this._screenElement.clientHeight||(this._queueRefresh(!0),this._containerHeight=this._screenElement.clientHeight)})),this.register(this._optionsService.onSpecificOptionChange("overviewRulerWidth",()=>this._queueRefresh(!0))),this.register((0,b.addDisposableDomListener)(this._coreBrowseService.window,"resize",()=>this._queueRefresh(!0))),this._queueRefresh(!0)}_refreshDrawConstants(){const g=Math.floor(this._canvas.width/3),w=Math.ceil(this._canvas.width/3);_.full=this._canvas.width,_.left=g,_.center=w,_.right=g,this._refreshDrawHeightConstants(),p.full=0,p.left=0,p.center=_.left,p.right=_.left+_.center}_refreshDrawHeightConstants(){l.full=Math.round(2*this._coreBrowseService.dpr);const g=this._canvas.height/this._bufferService.buffer.lines.length,w=Math.round(Math.max(Math.min(g,12),6)*this._coreBrowseService.dpr);l.left=w,l.center=w,l.right=w}_refreshColorZonePadding(){this._colorZoneStore.setPadding({full:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*l.full),left:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*l.left),center:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*l.center),right:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*l.right)}),this._lastKnownBufferLength=this._bufferService.buffers.normal.lines.length}_refreshCanvasDimensions(){this._canvas.style.width=`${this._width}px`,this._canvas.width=Math.round(this._width*this._coreBrowseService.dpr),this._canvas.style.height=`${this._screenElement.clientHeight}px`,this._canvas.height=Math.round(this._screenElement.clientHeight*this._coreBrowseService.dpr),this._refreshDrawConstants(),this._refreshColorZonePadding()}_refreshDecorations(){this._shouldUpdateDimensions&&this._refreshCanvasDimensions(),this._ctx.clearRect(0,0,this._canvas.width,this._canvas.height),this._colorZoneStore.clear();for(const w of this._decorationService.decorations)this._colorZoneStore.addDecoration(w);this._ctx.lineWidth=1;const g=this._colorZoneStore.zones;for(const w of g)w.position!=="full"&&this._renderColorZone(w);for(const w of g)w.position==="full"&&this._renderColorZone(w);this._shouldUpdateDimensions=!1,this._shouldUpdateAnchor=!1}_renderColorZone(g){this._ctx.fillStyle=g.color,this._ctx.fillRect(p[g.position||"full"],Math.round((this._canvas.height-1)*(g.startBufferLine/this._bufferService.buffers.active.lines.length)-l[g.position||"full"]/2),_[g.position||"full"],Math.round((this._canvas.height-1)*((g.endBufferLine-g.startBufferLine)/this._bufferService.buffers.active.lines.length)+l[g.position||"full"]))}_queueRefresh(g,w){this._shouldUpdateDimensions=g||this._shouldUpdateDimensions,this._shouldUpdateAnchor=w||this._shouldUpdateAnchor,this._animationFrame===void 0&&(this._animationFrame=this._coreBrowseService.window.requestAnimationFrame(()=>{this._refreshDecorations(),this._animationFrame=void 0}))}};d=h([u(2,m.IBufferService),u(3,m.IDecorationService),u(4,y.IRenderService),u(5,m.IOptionsService),u(6,y.ICoreBrowserService)],d),o.OverviewRulerRenderer=d},2950:function(c,o,a){var h=this&&this.__decorate||function(m,l,_,p){var d,g=arguments.length,w=g<3?l:p===null?p=Object.getOwnPropertyDescriptor(l,_):p;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")w=Reflect.decorate(m,l,_,p);else for(var E=m.length-1;E>=0;E--)(d=m[E])&&(w=(g<3?d(w):g>3?d(l,_,w):d(l,_))||w);return g>3&&w&&Object.defineProperty(l,_,w),w},u=this&&this.__param||function(m,l){return function(_,p){l(_,p,m)}};Object.defineProperty(o,"__esModule",{value:!0}),o.CompositionHelper=void 0;const f=a(4725),b=a(2585),y=a(2584);let v=class{constructor(m,l,_,p,d,g){this._textarea=m,this._compositionView=l,this._bufferService=_,this._optionsService=p,this._coreService=d,this._renderService=g,this._isComposing=!1,this._isSendingComposition=!1,this._compositionPosition={start:0,end:0},this._dataAlreadySent=""}get isComposing(){return this._isComposing}compositionstart(){this._isComposing=!0,this._compositionPosition.start=this._textarea.value.length,this._compositionView.textContent="",this._dataAlreadySent="",this._compositionView.classList.add("active")}compositionupdate(m){this._compositionView.textContent=m.data,this.updateCompositionElements(),setTimeout(()=>{this._compositionPosition.end=this._textarea.value.length},0)}compositionend(){this._finalizeComposition(!0)}keydown(m){if(this._isComposing||this._isSendingComposition){if(m.keyCode===229||m.keyCode===16||m.keyCode===17||m.keyCode===18)return!1;this._finalizeComposition(!1)}return m.keyCode!==229||(this._handleAnyTextareaChanges(),!1)}_finalizeComposition(m){if(this._compositionView.classList.remove("active"),this._isComposing=!1,m){const l={start:this._compositionPosition.start,end:this._compositionPosition.end};this._isSendingComposition=!0,setTimeout(()=>{if(this._isSendingComposition){let _;this._isSendingComposition=!1,l.start+=this._dataAlreadySent.length,_=this._isComposing?this._textarea.value.substring(l.start,l.end):this._textarea.value.substring(l.start),_.length>0&&this._coreService.triggerDataEvent(_,!0)}},0)}else{this._isSendingComposition=!1;const l=this._textarea.value.substring(this._compositionPosition.start,this._compositionPosition.end);this._coreService.triggerDataEvent(l,!0)}}_handleAnyTextareaChanges(){const m=this._textarea.value;setTimeout(()=>{if(!this._isComposing){const l=this._textarea.value,_=l.replace(m,"");this._dataAlreadySent=_,l.length>m.length?this._coreService.triggerDataEvent(_,!0):l.length<m.length?this._coreService.triggerDataEvent(`${y.C0.DEL}`,!0):l.length===m.length&&l!==m&&this._coreService.triggerDataEvent(l,!0)}},0)}updateCompositionElements(m){if(this._isComposing){if(this._bufferService.buffer.isCursorInViewport){const l=Math.min(this._bufferService.buffer.x,this._bufferService.cols-1),_=this._renderService.dimensions.css.cell.height,p=this._bufferService.buffer.y*this._renderService.dimensions.css.cell.height,d=l*this._renderService.dimensions.css.cell.width;this._compositionView.style.left=d+"px",this._compositionView.style.top=p+"px",this._compositionView.style.height=_+"px",this._compositionView.style.lineHeight=_+"px",this._compositionView.style.fontFamily=this._optionsService.rawOptions.fontFamily,this._compositionView.style.fontSize=this._optionsService.rawOptions.fontSize+"px";const g=this._compositionView.getBoundingClientRect();this._textarea.style.left=d+"px",this._textarea.style.top=p+"px",this._textarea.style.width=Math.max(g.width,1)+"px",this._textarea.style.height=Math.max(g.height,1)+"px",this._textarea.style.lineHeight=g.height+"px"}m||setTimeout(()=>this.updateCompositionElements(!0),0)}}};v=h([u(2,b.IBufferService),u(3,b.IOptionsService),u(4,b.ICoreService),u(5,f.IRenderService)],v),o.CompositionHelper=v},9806:(c,o)=>{function a(h,u,f){const b=f.getBoundingClientRect(),y=h.getComputedStyle(f),v=parseInt(y.getPropertyValue("padding-left")),m=parseInt(y.getPropertyValue("padding-top"));return[u.clientX-b.left-v,u.clientY-b.top-m]}Object.defineProperty(o,"__esModule",{value:!0}),o.getCoords=o.getCoordsRelativeToElement=void 0,o.getCoordsRelativeToElement=a,o.getCoords=function(h,u,f,b,y,v,m,l,_){if(!v)return;const p=a(h,u,f);return p?(p[0]=Math.ceil((p[0]+(_?m/2:0))/m),p[1]=Math.ceil(p[1]/l),p[0]=Math.min(Math.max(p[0],1),b+(_?1:0)),p[1]=Math.min(Math.max(p[1],1),y),p):void 0}},9504:(c,o,a)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.moveToCellSequence=void 0;const h=a(2584);function u(l,_,p,d){const g=l-f(l,p),w=_-f(_,p),E=Math.abs(g-w)-function(C,S,k){let D=0;const O=C-f(C,k),A=S-f(S,k);for(let T=0;T<Math.abs(O-A);T++){const B=b(C,S)==="A"?-1:1,G=k.buffer.lines.get(O+B*T);G!=null&&G.isWrapped&&D++}return D}(l,_,p);return m(E,v(b(l,_),d))}function f(l,_){let p=0,d=_.buffer.lines.get(l),g=d==null?void 0:d.isWrapped;for(;g&&l>=0&&l<_.rows;)p++,d=_.buffer.lines.get(--l),g=d==null?void 0:d.isWrapped;return p}function b(l,_){return l>_?"A":"B"}function y(l,_,p,d,g,w){let E=l,C=_,S="";for(;E!==p||C!==d;)E+=g?1:-1,g&&E>w.cols-1?(S+=w.buffer.translateBufferLineToString(C,!1,l,E),E=0,l=0,C++):!g&&E<0&&(S+=w.buffer.translateBufferLineToString(C,!1,0,l+1),E=w.cols-1,l=E,C--);return S+w.buffer.translateBufferLineToString(C,!1,l,E)}function v(l,_){const p=_?"O":"[";return h.C0.ESC+p+l}function m(l,_){l=Math.floor(l);let p="";for(let d=0;d<l;d++)p+=_;return p}o.moveToCellSequence=function(l,_,p,d){const g=p.buffer.x,w=p.buffer.y;if(!p.buffer.hasScrollback)return function(S,k,D,O,A,T){return u(k,O,A,T).length===0?"":m(y(S,k,S,k-f(k,A),!1,A).length,v("D",T))}(g,w,0,_,p,d)+u(w,_,p,d)+function(S,k,D,O,A,T){let B;B=u(k,O,A,T).length>0?O-f(O,A):k;const G=O,V=function(L,R,M,P,z,j){let de;return de=u(M,P,z,j).length>0?P-f(P,z):R,L<M&&de<=P||L>=M&&de<P?"C":"D"}(S,k,D,O,A,T);return m(y(S,B,D,G,V==="C",A).length,v(V,T))}(g,w,l,_,p,d);let E;if(w===_)return E=g>l?"D":"C",m(Math.abs(g-l),v(E,d));E=w>_?"D":"C";const C=Math.abs(w-_);return m(function(S,k){return k.cols-S}(w>_?l:g,p)+(C-1)*p.cols+1+((w>_?g:l)-1),v(E,d))}},1296:function(c,o,a){var h=this&&this.__decorate||function(C,S,k,D){var O,A=arguments.length,T=A<3?S:D===null?D=Object.getOwnPropertyDescriptor(S,k):D;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")T=Reflect.decorate(C,S,k,D);else for(var B=C.length-1;B>=0;B--)(O=C[B])&&(T=(A<3?O(T):A>3?O(S,k,T):O(S,k))||T);return A>3&&T&&Object.defineProperty(S,k,T),T},u=this&&this.__param||function(C,S){return function(k,D){S(k,D,C)}};Object.defineProperty(o,"__esModule",{value:!0}),o.DomRenderer=void 0;const f=a(3787),b=a(2223),y=a(6171),v=a(4725),m=a(8055),l=a(8460),_=a(844),p=a(2585),d="xterm-dom-renderer-owner-",g="xterm-focus";let w=1,E=class extends _.Disposable{constructor(C,S,k,D,O,A,T,B,G,V){super(),this._element=C,this._screenElement=S,this._viewportElement=k,this._linkifier2=D,this._charSizeService=A,this._optionsService=T,this._bufferService=B,this._coreBrowserService=G,this._themeService=V,this._terminalClass=w++,this._rowElements=[],this._cellToRowElements=[],this.onRequestRedraw=this.register(new l.EventEmitter).event,this._rowContainer=document.createElement("div"),this._rowContainer.classList.add("xterm-rows"),this._rowContainer.style.lineHeight="normal",this._rowContainer.setAttribute("aria-hidden","true"),this._refreshRowElements(this._bufferService.cols,this._bufferService.rows),this._selectionContainer=document.createElement("div"),this._selectionContainer.classList.add("xterm-selection"),this._selectionContainer.setAttribute("aria-hidden","true"),this.dimensions=(0,y.createRenderDimensions)(),this._updateDimensions(),this.register(this._optionsService.onOptionChange(()=>this._handleOptionsChanged())),this.register(this._themeService.onChangeColors(L=>this._injectCss(L))),this._injectCss(this._themeService.colors),this._rowFactory=O.createInstance(f.DomRendererRowFactory,document),this._element.classList.add(d+this._terminalClass),this._screenElement.appendChild(this._rowContainer),this._screenElement.appendChild(this._selectionContainer),this.register(this._linkifier2.onShowLinkUnderline(L=>this._handleLinkHover(L))),this.register(this._linkifier2.onHideLinkUnderline(L=>this._handleLinkLeave(L))),this.register((0,_.toDisposable)(()=>{this._element.classList.remove(d+this._terminalClass),this._rowContainer.remove(),this._selectionContainer.remove(),this._themeStyleElement.remove(),this._dimensionsStyleElement.remove()}))}_updateDimensions(){const C=this._coreBrowserService.dpr;this.dimensions.device.char.width=this._charSizeService.width*C,this.dimensions.device.char.height=Math.ceil(this._charSizeService.height*C),this.dimensions.device.cell.width=this.dimensions.device.char.width+Math.round(this._optionsService.rawOptions.letterSpacing),this.dimensions.device.cell.height=Math.floor(this.dimensions.device.char.height*this._optionsService.rawOptions.lineHeight),this.dimensions.device.char.left=0,this.dimensions.device.char.top=0,this.dimensions.device.canvas.width=this.dimensions.device.cell.width*this._bufferService.cols,this.dimensions.device.canvas.height=this.dimensions.device.cell.height*this._bufferService.rows,this.dimensions.css.canvas.width=Math.round(this.dimensions.device.canvas.width/C),this.dimensions.css.canvas.height=Math.round(this.dimensions.device.canvas.height/C),this.dimensions.css.cell.width=this.dimensions.css.canvas.width/this._bufferService.cols,this.dimensions.css.cell.height=this.dimensions.css.canvas.height/this._bufferService.rows;for(const k of this._rowElements)k.style.width=`${this.dimensions.css.canvas.width}px`,k.style.height=`${this.dimensions.css.cell.height}px`,k.style.lineHeight=`${this.dimensions.css.cell.height}px`,k.style.overflow="hidden";this._dimensionsStyleElement||(this._dimensionsStyleElement=document.createElement("style"),this._screenElement.appendChild(this._dimensionsStyleElement));const S=`${this._terminalSelector} .xterm-rows span { display: inline-block; height: 100%; vertical-align: top; width: ${this.dimensions.css.cell.width}px}`;this._dimensionsStyleElement.textContent=S,this._selectionContainer.style.height=this._viewportElement.style.height,this._screenElement.style.width=`${this.dimensions.css.canvas.width}px`,this._screenElement.style.height=`${this.dimensions.css.canvas.height}px`}_injectCss(C){this._themeStyleElement||(this._themeStyleElement=document.createElement("style"),this._screenElement.appendChild(this._themeStyleElement));let S=`${this._terminalSelector} .xterm-rows { color: ${C.foreground.css}; font-family: ${this._optionsService.rawOptions.fontFamily}; font-size: ${this._optionsService.rawOptions.fontSize}px;}`;S+=`${this._terminalSelector} .xterm-rows .xterm-dim { color: ${m.color.multiplyOpacity(C.foreground,.5).css};}`,S+=`${this._terminalSelector} span:not(.${f.BOLD_CLASS}) { font-weight: ${this._optionsService.rawOptions.fontWeight};}${this._terminalSelector} span.${f.BOLD_CLASS} { font-weight: ${this._optionsService.rawOptions.fontWeightBold};}${this._terminalSelector} span.${f.ITALIC_CLASS} { font-style: italic;}`,S+="@keyframes blink_box_shadow_"+this._terminalClass+" { 50% {  box-shadow: none; }}",S+="@keyframes blink_block_"+this._terminalClass+` { 0% {  background-color: ${C.cursor.css};  color: ${C.cursorAccent.css}; } 50% {  background-color: ${C.cursorAccent.css};  color: ${C.cursor.css}; }}`,S+=`${this._terminalSelector} .xterm-rows:not(.xterm-focus) .${f.CURSOR_CLASS}.${f.CURSOR_STYLE_BLOCK_CLASS} ,${this._terminalSelector} .xterm-rows:not(.xterm-focus) .${f.CURSOR_CLASS}.${f.CURSOR_STYLE_BAR_CLASS} ,${this._terminalSelector} .xterm-rows:not(.xterm-focus) .${f.CURSOR_CLASS}.${f.CURSOR_STYLE_UNDERLINE_CLASS} { outline: 1px solid ${C.cursor.css}; outline-offset: -1px;}${this._terminalSelector} .xterm-rows.xterm-focus .${f.CURSOR_CLASS}.${f.CURSOR_BLINK_CLASS}:not(.${f.CURSOR_STYLE_BLOCK_CLASS}) { animation: blink_box_shadow_`+this._terminalClass+` 1s step-end infinite;}${this._terminalSelector} .xterm-rows.xterm-focus .${f.CURSOR_CLASS}.${f.CURSOR_BLINK_CLASS}.${f.CURSOR_STYLE_BLOCK_CLASS} { animation: blink_block_`+this._terminalClass+` 1s step-end infinite;}${this._terminalSelector} .xterm-rows.xterm-focus .${f.CURSOR_CLASS}.${f.CURSOR_STYLE_BLOCK_CLASS} { background-color: ${C.cursor.css}; color: ${C.cursorAccent.css};}${this._terminalSelector} .xterm-rows .${f.CURSOR_CLASS}.${f.CURSOR_STYLE_BAR_CLASS} { box-shadow: ${this._optionsService.rawOptions.cursorWidth}px 0 0 ${C.cursor.css} inset;}${this._terminalSelector} .xterm-rows .${f.CURSOR_CLASS}.${f.CURSOR_STYLE_UNDERLINE_CLASS} { box-shadow: 0 -1px 0 ${C.cursor.css} inset;}`,S+=`${this._terminalSelector} .xterm-selection { position: absolute; top: 0; left: 0; z-index: 1; pointer-events: none;}${this._terminalSelector}.focus .xterm-selection div { position: absolute; background-color: ${C.selectionBackgroundOpaque.css};}${this._terminalSelector} .xterm-selection div { position: absolute; background-color: ${C.selectionInactiveBackgroundOpaque.css};}`;for(const[k,D]of C.ansi.entries())S+=`${this._terminalSelector} .xterm-fg-${k} { color: ${D.css}; }${this._terminalSelector} .xterm-fg-${k}.${f.DIM_CLASS} { color: ${m.color.multiplyOpacity(D,.5).css}; }${this._terminalSelector} .xterm-bg-${k} { background-color: ${D.css}; }`;S+=`${this._terminalSelector} .xterm-fg-${b.INVERTED_DEFAULT_COLOR} { color: ${m.color.opaque(C.background).css}; }${this._terminalSelector} .xterm-fg-${b.INVERTED_DEFAULT_COLOR}.${f.DIM_CLASS} { color: ${m.color.multiplyOpacity(m.color.opaque(C.background),.5).css}; }${this._terminalSelector} .xterm-bg-${b.INVERTED_DEFAULT_COLOR} { background-color: ${C.foreground.css}; }`,this._themeStyleElement.textContent=S}handleDevicePixelRatioChange(){this._updateDimensions()}_refreshRowElements(C,S){for(let k=this._rowElements.length;k<=S;k++){const D=document.createElement("div");this._rowContainer.appendChild(D),this._rowElements.push(D)}for(;this._rowElements.length>S;)this._rowContainer.removeChild(this._rowElements.pop())}handleResize(C,S){this._refreshRowElements(C,S),this._updateDimensions()}handleCharSizeChanged(){this._updateDimensions()}handleBlur(){this._rowContainer.classList.remove(g)}handleFocus(){this._rowContainer.classList.add(g)}handleSelectionChanged(C,S,k){for(;this._selectionContainer.children.length;)this._selectionContainer.removeChild(this._selectionContainer.children[0]);if(this._rowFactory.handleSelectionChanged(C,S,k),this.renderRows(0,this._bufferService.rows-1),!C||!S)return;const D=C[1]-this._bufferService.buffer.ydisp,O=S[1]-this._bufferService.buffer.ydisp,A=Math.max(D,0),T=Math.min(O,this._bufferService.rows-1);if(A>=this._bufferService.rows||T<0)return;const B=document.createDocumentFragment();if(k){const G=C[0]>S[0];B.appendChild(this._createSelectionElement(A,G?S[0]:C[0],G?C[0]:S[0],T-A+1))}else{const G=D===A?C[0]:0,V=A===O?S[0]:this._bufferService.cols;B.appendChild(this._createSelectionElement(A,G,V));const L=T-A-1;if(B.appendChild(this._createSelectionElement(A+1,0,this._bufferService.cols,L)),A!==T){const R=O===T?S[0]:this._bufferService.cols;B.appendChild(this._createSelectionElement(T,0,R))}}this._selectionContainer.appendChild(B)}_createSelectionElement(C,S,k,D=1){const O=document.createElement("div");return O.style.height=D*this.dimensions.css.cell.height+"px",O.style.top=C*this.dimensions.css.cell.height+"px",O.style.left=S*this.dimensions.css.cell.width+"px",O.style.width=this.dimensions.css.cell.width*(k-S)+"px",O}handleCursorMove(){}_handleOptionsChanged(){this._updateDimensions(),this._injectCss(this._themeService.colors)}clear(){for(const C of this._rowElements)C.replaceChildren()}renderRows(C,S){const k=this._bufferService.buffer.ybase+this._bufferService.buffer.y,D=Math.min(this._bufferService.buffer.x,this._bufferService.cols-1),O=this._optionsService.rawOptions.cursorBlink;for(let A=C;A<=S;A++){const T=this._rowElements[A],B=A+this._bufferService.buffer.ydisp,G=this._bufferService.buffer.lines.get(B),V=this._optionsService.rawOptions.cursorStyle;this._cellToRowElements[A]&&this._cellToRowElements[A].length===this._bufferService.cols||(this._cellToRowElements[A]=new Int16Array(this._bufferService.cols)),T.replaceChildren(this._rowFactory.createRow(G,B,B===k,V,D,O,this.dimensions.css.cell.width,this._bufferService.cols,this._cellToRowElements[A]))}}get _terminalSelector(){return`.${d}${this._terminalClass}`}_handleLinkHover(C){this._setCellUnderline(C.x1,C.x2,C.y1,C.y2,C.cols,!0)}_handleLinkLeave(C){this._setCellUnderline(C.x1,C.x2,C.y1,C.y2,C.cols,!1)}_setCellUnderline(C,S,k,D,O,A){k<0&&(C=0),D<0&&(S=0);const T=this._cellToRowElements.length-1;k=Math.max(Math.min(k,T),0),D=Math.max(Math.min(D,T),0);const B=this._cellToRowElements[k],G=this._cellToRowElements[D];if(!(C>=B.length||S>=G.length)&&(C=B[C],S=G[S],C!==-1&&S!==-1))for(;C!==S||k!==D;){const V=this._rowElements[k];if(!V)return;const L=V.children[C];L&&(L.style.textDecoration=A?"underline":"none"),++C>=O&&(C=0,k++)}}};E=h([u(4,p.IInstantiationService),u(5,v.ICharSizeService),u(6,p.IOptionsService),u(7,p.IBufferService),u(8,v.ICoreBrowserService),u(9,v.IThemeService)],E),o.DomRenderer=E},3787:function(c,o,a){var h=this&&this.__decorate||function(E,C,S,k){var D,O=arguments.length,A=O<3?C:k===null?k=Object.getOwnPropertyDescriptor(C,S):k;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")A=Reflect.decorate(E,C,S,k);else for(var T=E.length-1;T>=0;T--)(D=E[T])&&(A=(O<3?D(A):O>3?D(C,S,A):D(C,S))||A);return O>3&&A&&Object.defineProperty(C,S,A),A},u=this&&this.__param||function(E,C){return function(S,k){C(S,k,E)}};Object.defineProperty(o,"__esModule",{value:!0}),o.DomRendererRowFactory=o.CURSOR_STYLE_UNDERLINE_CLASS=o.CURSOR_STYLE_BAR_CLASS=o.CURSOR_STYLE_BLOCK_CLASS=o.CURSOR_BLINK_CLASS=o.CURSOR_CLASS=o.STRIKETHROUGH_CLASS=o.OVERLINE_CLASS=o.UNDERLINE_CLASS=o.ITALIC_CLASS=o.DIM_CLASS=o.BOLD_CLASS=void 0;const f=a(2223),b=a(643),y=a(511),v=a(2585),m=a(8055),l=a(4725),_=a(4269),p=a(6171),d=a(3734);o.BOLD_CLASS="xterm-bold",o.DIM_CLASS="xterm-dim",o.ITALIC_CLASS="xterm-italic",o.UNDERLINE_CLASS="xterm-underline",o.OVERLINE_CLASS="xterm-overline",o.STRIKETHROUGH_CLASS="xterm-strikethrough",o.CURSOR_CLASS="xterm-cursor",o.CURSOR_BLINK_CLASS="xterm-cursor-blink",o.CURSOR_STYLE_BLOCK_CLASS="xterm-cursor-block",o.CURSOR_STYLE_BAR_CLASS="xterm-cursor-bar",o.CURSOR_STYLE_UNDERLINE_CLASS="xterm-cursor-underline";let g=class{constructor(E,C,S,k,D,O,A){this._document=E,this._characterJoinerService=C,this._optionsService=S,this._coreBrowserService=k,this._coreService=D,this._decorationService=O,this._themeService=A,this._workCell=new y.CellData,this._columnSelectMode=!1}handleSelectionChanged(E,C,S){this._selectionStart=E,this._selectionEnd=C,this._columnSelectMode=S}createRow(E,C,S,k,D,O,A,T,B){const G=this._document.createDocumentFragment(),V=this._characterJoinerService.getJoinedCharacters(C);let L=0;for(let z=Math.min(E.length,T)-1;z>=0;z--)if(E.loadCell(z,this._workCell).getCode()!==b.NULL_CELL_CODE||S&&z===D){L=z+1;break}const R=this._themeService.colors;let M=-1,P=0;for(;P<L;P++){E.loadCell(P,this._workCell);let z=this._workCell.getWidth();if(z===0){B[P]=M;continue}let j=!1,de=P,X=this._workCell;if(V.length>0&&P===V[0][0]){j=!0;const De=V.shift();X=new _.JoinedCellData(this._workCell,E.translateToString(!0,De[0],De[1]),De[1]-De[0]),de=De[1]-1,z=X.getWidth()}const ae=this._document.createElement("span");if(z>1&&(ae.style.width=A*z+"px"),j&&(ae.style.display="inline",D>=P&&D<=de&&(D=P)),!this._coreService.isCursorHidden&&S&&P===D)switch(ae.classList.add(o.CURSOR_CLASS),O&&ae.classList.add(o.CURSOR_BLINK_CLASS),k){case"bar":ae.classList.add(o.CURSOR_STYLE_BAR_CLASS);break;case"underline":ae.classList.add(o.CURSOR_STYLE_UNDERLINE_CLASS);break;default:ae.classList.add(o.CURSOR_STYLE_BLOCK_CLASS)}if(X.isBold()&&ae.classList.add(o.BOLD_CLASS),X.isItalic()&&ae.classList.add(o.ITALIC_CLASS),X.isDim()&&ae.classList.add(o.DIM_CLASS),X.isInvisible()?ae.textContent=b.WHITESPACE_CELL_CHAR:ae.textContent=X.getChars()||b.WHITESPACE_CELL_CHAR,X.isUnderline()&&(ae.classList.add(`${o.UNDERLINE_CLASS}-${X.extended.underlineStyle}`),ae.textContent===" "&&(ae.textContent=" "),!X.isUnderlineColorDefault()))if(X.isUnderlineColorRGB())ae.style.textDecorationColor=`rgb(${d.AttributeData.toColorRGB(X.getUnderlineColor()).join(",")})`;else{let De=X.getUnderlineColor();this._optionsService.rawOptions.drawBoldTextInBrightColors&&X.isBold()&&De<8&&(De+=8),ae.style.textDecorationColor=R.ansi[De].css}X.isOverline()&&(ae.classList.add(o.OVERLINE_CLASS),ae.textContent===" "&&(ae.textContent=" ")),X.isStrikethrough()&&ae.classList.add(o.STRIKETHROUGH_CLASS);let I=X.getFgColor(),x=X.getFgColorMode(),H=X.getBgColor(),$=X.getBgColorMode();const ee=!!X.isInverse();if(ee){const De=I;I=H,H=De;const $s=x;x=$,$=$s}let Se,te,Ae=!1;this._decorationService.forEachDecorationAtCell(P,C,void 0,De=>{De.options.layer!=="top"&&Ae||(De.backgroundColorRGB&&($=50331648,H=De.backgroundColorRGB.rgba>>8&16777215,Se=De.backgroundColorRGB),De.foregroundColorRGB&&(x=50331648,I=De.foregroundColorRGB.rgba>>8&16777215,te=De.foregroundColorRGB),Ae=De.options.layer==="top")});const Ue=this._isCellInSelection(P,C);let Ie;switch(Ae||R.selectionForeground&&Ue&&(x=50331648,I=R.selectionForeground.rgba>>8&16777215,te=R.selectionForeground),Ue&&(Se=this._coreBrowserService.isFocused?R.selectionBackgroundOpaque:R.selectionInactiveBackgroundOpaque,Ae=!0),Ae&&ae.classList.add("xterm-decoration-top"),$){case 16777216:case 33554432:Ie=R.ansi[H],ae.classList.add(`xterm-bg-${H}`);break;case 50331648:Ie=m.rgba.toColor(H>>16,H>>8&255,255&H),this._addStyle(ae,`background-color:#${w((H>>>0).toString(16),"0",6)}`);break;default:ee?(Ie=R.foreground,ae.classList.add(`xterm-bg-${f.INVERTED_DEFAULT_COLOR}`)):Ie=R.background}switch(Se||X.isDim()&&(Se=m.color.multiplyOpacity(Ie,.5)),x){case 16777216:case 33554432:X.isBold()&&I<8&&this._optionsService.rawOptions.drawBoldTextInBrightColors&&(I+=8),this._applyMinimumContrast(ae,Ie,R.ansi[I],X,Se,void 0)||ae.classList.add(`xterm-fg-${I}`);break;case 50331648:const De=m.rgba.toColor(I>>16&255,I>>8&255,255&I);this._applyMinimumContrast(ae,Ie,De,X,Se,te)||this._addStyle(ae,`color:#${w(I.toString(16),"0",6)}`);break;default:this._applyMinimumContrast(ae,Ie,R.foreground,X,Se,void 0)||ee&&ae.classList.add(`xterm-fg-${f.INVERTED_DEFAULT_COLOR}`)}G.appendChild(ae),B[P]=++M,P=de}return P<T-1&&B.subarray(P).fill(++M),G}_applyMinimumContrast(E,C,S,k,D,O){if(this._optionsService.rawOptions.minimumContrastRatio===1||(0,p.excludeFromContrastRatioDemands)(k.getCode()))return!1;let A;return D||O||(A=this._themeService.colors.contrastCache.getColor(C.rgba,S.rgba)),A===void 0&&(A=m.color.ensureContrastRatio(D||C,O||S,this._optionsService.rawOptions.minimumContrastRatio),this._themeService.colors.contrastCache.setColor((D||C).rgba,(O||S).rgba,A??null)),!!A&&(this._addStyle(E,`color:${A.css}`),!0)}_addStyle(E,C){E.setAttribute("style",`${E.getAttribute("style")||""}${C};`)}_isCellInSelection(E,C){const S=this._selectionStart,k=this._selectionEnd;return!(!S||!k)&&(this._columnSelectMode?S[0]<=k[0]?E>=S[0]&&C>=S[1]&&E<k[0]&&C<=k[1]:E<S[0]&&C>=S[1]&&E>=k[0]&&C<=k[1]:C>S[1]&&C<k[1]||S[1]===k[1]&&C===S[1]&&E>=S[0]&&E<k[0]||S[1]<k[1]&&C===k[1]&&E<k[0]||S[1]<k[1]&&C===S[1]&&E>=S[0])}};function w(E,C,S){for(;E.length<S;)E=C+E;return E}g=h([u(1,l.ICharacterJoinerService),u(2,v.IOptionsService),u(3,l.ICoreBrowserService),u(4,v.ICoreService),u(5,v.IDecorationService),u(6,l.IThemeService)],g),o.DomRendererRowFactory=g},2223:(c,o,a)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.TEXT_BASELINE=o.DIM_OPACITY=o.INVERTED_DEFAULT_COLOR=void 0;const h=a(6114);o.INVERTED_DEFAULT_COLOR=257,o.DIM_OPACITY=.5,o.TEXT_BASELINE=h.isFirefox||h.isLegacyEdge?"bottom":"ideographic"},6171:(c,o)=>{function a(h){return 57508<=h&&h<=57558}Object.defineProperty(o,"__esModule",{value:!0}),o.createRenderDimensions=o.excludeFromContrastRatioDemands=o.isRestrictedPowerlineGlyph=o.isPowerlineGlyph=o.throwIfFalsy=void 0,o.throwIfFalsy=function(h){if(!h)throw new Error("value must not be falsy");return h},o.isPowerlineGlyph=a,o.isRestrictedPowerlineGlyph=function(h){return 57520<=h&&h<=57527},o.excludeFromContrastRatioDemands=function(h){return a(h)||function(u){return 9472<=u&&u<=9631}(h)},o.createRenderDimensions=function(){return{css:{canvas:{width:0,height:0},cell:{width:0,height:0}},device:{canvas:{width:0,height:0},cell:{width:0,height:0},char:{width:0,height:0,left:0,top:0}}}}},456:(c,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.SelectionModel=void 0,o.SelectionModel=class{constructor(a){this._bufferService=a,this.isSelectAllActive=!1,this.selectionStartLength=0}clearSelection(){this.selectionStart=void 0,this.selectionEnd=void 0,this.isSelectAllActive=!1,this.selectionStartLength=0}get finalSelectionStart(){return this.isSelectAllActive?[0,0]:this.selectionEnd&&this.selectionStart&&this.areSelectionValuesReversed()?this.selectionEnd:this.selectionStart}get finalSelectionEnd(){if(this.isSelectAllActive)return[this._bufferService.cols,this._bufferService.buffer.ybase+this._bufferService.rows-1];if(this.selectionStart){if(!this.selectionEnd||this.areSelectionValuesReversed()){const a=this.selectionStart[0]+this.selectionStartLength;return a>this._bufferService.cols?a%this._bufferService.cols==0?[this._bufferService.cols,this.selectionStart[1]+Math.floor(a/this._bufferService.cols)-1]:[a%this._bufferService.cols,this.selectionStart[1]+Math.floor(a/this._bufferService.cols)]:[a,this.selectionStart[1]]}if(this.selectionStartLength&&this.selectionEnd[1]===this.selectionStart[1]){const a=this.selectionStart[0]+this.selectionStartLength;return a>this._bufferService.cols?[a%this._bufferService.cols,this.selectionStart[1]+Math.floor(a/this._bufferService.cols)]:[Math.max(a,this.selectionEnd[0]),this.selectionEnd[1]]}return this.selectionEnd}}areSelectionValuesReversed(){const a=this.selectionStart,h=this.selectionEnd;return!(!a||!h)&&(a[1]>h[1]||a[1]===h[1]&&a[0]>h[0])}handleTrim(a){return this.selectionStart&&(this.selectionStart[1]-=a),this.selectionEnd&&(this.selectionEnd[1]-=a),this.selectionEnd&&this.selectionEnd[1]<0?(this.clearSelection(),!0):(this.selectionStart&&this.selectionStart[1]<0&&(this.selectionStart[1]=0),!1)}}},428:function(c,o,a){var h=this&&this.__decorate||function(l,_,p,d){var g,w=arguments.length,E=w<3?_:d===null?d=Object.getOwnPropertyDescriptor(_,p):d;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")E=Reflect.decorate(l,_,p,d);else for(var C=l.length-1;C>=0;C--)(g=l[C])&&(E=(w<3?g(E):w>3?g(_,p,E):g(_,p))||E);return w>3&&E&&Object.defineProperty(_,p,E),E},u=this&&this.__param||function(l,_){return function(p,d){_(p,d,l)}};Object.defineProperty(o,"__esModule",{value:!0}),o.CharSizeService=void 0;const f=a(2585),b=a(8460),y=a(844);let v=class extends y.Disposable{constructor(l,_,p){super(),this._optionsService=p,this.width=0,this.height=0,this._onCharSizeChange=this.register(new b.EventEmitter),this.onCharSizeChange=this._onCharSizeChange.event,this._measureStrategy=new m(l,_,this._optionsService),this.register(this._optionsService.onMultipleOptionChange(["fontFamily","fontSize"],()=>this.measure()))}get hasValidSize(){return this.width>0&&this.height>0}measure(){const l=this._measureStrategy.measure();l.width===this.width&&l.height===this.height||(this.width=l.width,this.height=l.height,this._onCharSizeChange.fire())}};v=h([u(2,f.IOptionsService)],v),o.CharSizeService=v;class m{constructor(_,p,d){this._document=_,this._parentElement=p,this._optionsService=d,this._result={width:0,height:0},this._measureElement=this._document.createElement("span"),this._measureElement.classList.add("xterm-char-measure-element"),this._measureElement.textContent="W",this._measureElement.setAttribute("aria-hidden","true"),this._parentElement.appendChild(this._measureElement)}measure(){this._measureElement.style.fontFamily=this._optionsService.rawOptions.fontFamily,this._measureElement.style.fontSize=`${this._optionsService.rawOptions.fontSize}px`;const _=this._measureElement.getBoundingClientRect();return _.width!==0&&_.height!==0&&(this._result.width=_.width,this._result.height=Math.ceil(_.height)),this._result}}},4269:function(c,o,a){var h=this&&this.__decorate||function(_,p,d,g){var w,E=arguments.length,C=E<3?p:g===null?g=Object.getOwnPropertyDescriptor(p,d):g;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")C=Reflect.decorate(_,p,d,g);else for(var S=_.length-1;S>=0;S--)(w=_[S])&&(C=(E<3?w(C):E>3?w(p,d,C):w(p,d))||C);return E>3&&C&&Object.defineProperty(p,d,C),C},u=this&&this.__param||function(_,p){return function(d,g){p(d,g,_)}};Object.defineProperty(o,"__esModule",{value:!0}),o.CharacterJoinerService=o.JoinedCellData=void 0;const f=a(3734),b=a(643),y=a(511),v=a(2585);class m extends f.AttributeData{constructor(p,d,g){super(),this.content=0,this.combinedData="",this.fg=p.fg,this.bg=p.bg,this.combinedData=d,this._width=g}isCombined(){return 2097152}getWidth(){return this._width}getChars(){return this.combinedData}getCode(){return 2097151}setFromCharData(p){throw new Error("not implemented")}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}}o.JoinedCellData=m;let l=class Cl{constructor(p){this._bufferService=p,this._characterJoiners=[],this._nextCharacterJoinerId=0,this._workCell=new y.CellData}register(p){const d={id:this._nextCharacterJoinerId++,handler:p};return this._characterJoiners.push(d),d.id}deregister(p){for(let d=0;d<this._characterJoiners.length;d++)if(this._characterJoiners[d].id===p)return this._characterJoiners.splice(d,1),!0;return!1}getJoinedCharacters(p){if(this._characterJoiners.length===0)return[];const d=this._bufferService.buffer.lines.get(p);if(!d||d.length===0)return[];const g=[],w=d.translateToString(!0);let E=0,C=0,S=0,k=d.getFg(0),D=d.getBg(0);for(let O=0;O<d.getTrimmedLength();O++)if(d.loadCell(O,this._workCell),this._workCell.getWidth()!==0){if(this._workCell.fg!==k||this._workCell.bg!==D){if(O-E>1){const A=this._getJoinedRanges(w,S,C,d,E);for(let T=0;T<A.length;T++)g.push(A[T])}E=O,S=C,k=this._workCell.fg,D=this._workCell.bg}C+=this._workCell.getChars().length||b.WHITESPACE_CELL_CHAR.length}if(this._bufferService.cols-E>1){const O=this._getJoinedRanges(w,S,C,d,E);for(let A=0;A<O.length;A++)g.push(O[A])}return g}_getJoinedRanges(p,d,g,w,E){const C=p.substring(d,g);let S=[];try{S=this._characterJoiners[0].handler(C)}catch(k){console.error(k)}for(let k=1;k<this._characterJoiners.length;k++)try{const D=this._characterJoiners[k].handler(C);for(let O=0;O<D.length;O++)Cl._mergeRanges(S,D[O])}catch(D){console.error(D)}return this._stringRangesToCellRanges(S,w,E),S}_stringRangesToCellRanges(p,d,g){let w=0,E=!1,C=0,S=p[w];if(S){for(let k=g;k<this._bufferService.cols;k++){const D=d.getWidth(k),O=d.getString(k).length||b.WHITESPACE_CELL_CHAR.length;if(D!==0){if(!E&&S[0]<=C&&(S[0]=k,E=!0),S[1]<=C){if(S[1]=k,S=p[++w],!S)break;S[0]<=C?(S[0]=k,E=!0):E=!1}C+=O}}S&&(S[1]=this._bufferService.cols)}}static _mergeRanges(p,d){let g=!1;for(let w=0;w<p.length;w++){const E=p[w];if(g){if(d[1]<=E[0])return p[w-1][1]=d[1],p;if(d[1]<=E[1])return p[w-1][1]=Math.max(d[1],E[1]),p.splice(w,1),p;p.splice(w,1),w--}else{if(d[1]<=E[0])return p.splice(w,0,d),p;if(d[1]<=E[1])return E[0]=Math.min(d[0],E[0]),p;d[0]<E[1]&&(E[0]=Math.min(d[0],E[0]),g=!0)}}return g?p[p.length-1][1]=d[1]:p.push(d),p}};l=h([u(0,v.IBufferService)],l),o.CharacterJoinerService=l},5114:(c,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.CoreBrowserService=void 0,o.CoreBrowserService=class{constructor(a,h){this._textarea=a,this.window=h,this._isFocused=!1,this._cachedIsFocused=void 0,this._textarea.addEventListener("focus",()=>this._isFocused=!0),this._textarea.addEventListener("blur",()=>this._isFocused=!1)}get dpr(){return this.window.devicePixelRatio}get isFocused(){return this._cachedIsFocused===void 0&&(this._cachedIsFocused=this._isFocused&&this._textarea.ownerDocument.hasFocus(),queueMicrotask(()=>this._cachedIsFocused=void 0)),this._cachedIsFocused}}},8934:function(c,o,a){var h=this&&this.__decorate||function(v,m,l,_){var p,d=arguments.length,g=d<3?m:_===null?_=Object.getOwnPropertyDescriptor(m,l):_;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")g=Reflect.decorate(v,m,l,_);else for(var w=v.length-1;w>=0;w--)(p=v[w])&&(g=(d<3?p(g):d>3?p(m,l,g):p(m,l))||g);return d>3&&g&&Object.defineProperty(m,l,g),g},u=this&&this.__param||function(v,m){return function(l,_){m(l,_,v)}};Object.defineProperty(o,"__esModule",{value:!0}),o.MouseService=void 0;const f=a(4725),b=a(9806);let y=class{constructor(v,m){this._renderService=v,this._charSizeService=m}getCoords(v,m,l,_,p){return(0,b.getCoords)(window,v,m,l,_,this._charSizeService.hasValidSize,this._renderService.dimensions.css.cell.width,this._renderService.dimensions.css.cell.height,p)}getMouseReportCoords(v,m){const l=(0,b.getCoordsRelativeToElement)(window,v,m);if(!(!this._charSizeService.hasValidSize||l[0]<0||l[1]<0||l[0]>=this._renderService.dimensions.css.canvas.width||l[1]>=this._renderService.dimensions.css.canvas.height))return{col:Math.floor(l[0]/this._renderService.dimensions.css.cell.width),row:Math.floor(l[1]/this._renderService.dimensions.css.cell.height),x:Math.floor(l[0]),y:Math.floor(l[1])}}};y=h([u(0,f.IRenderService),u(1,f.ICharSizeService)],y),o.MouseService=y},3230:function(c,o,a){var h=this&&this.__decorate||function(g,w,E,C){var S,k=arguments.length,D=k<3?w:C===null?C=Object.getOwnPropertyDescriptor(w,E):C;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")D=Reflect.decorate(g,w,E,C);else for(var O=g.length-1;O>=0;O--)(S=g[O])&&(D=(k<3?S(D):k>3?S(w,E,D):S(w,E))||D);return k>3&&D&&Object.defineProperty(w,E,D),D},u=this&&this.__param||function(g,w){return function(E,C){w(E,C,g)}};Object.defineProperty(o,"__esModule",{value:!0}),o.RenderService=void 0;const f=a(6193),b=a(8460),y=a(844),v=a(5596),m=a(3656),l=a(2585),_=a(4725),p=a(7226);let d=class extends y.Disposable{constructor(g,w,E,C,S,k,D,O){if(super(),this._rowCount=g,this._charSizeService=C,this._pausedResizeTask=new p.DebouncedIdleTask,this._isPaused=!1,this._needsFullRefresh=!1,this._isNextRenderRedrawOnly=!0,this._needsSelectionRefresh=!1,this._canvasWidth=0,this._canvasHeight=0,this._selectionState={start:void 0,end:void 0,columnSelectMode:!1},this._onDimensionsChange=this.register(new b.EventEmitter),this.onDimensionsChange=this._onDimensionsChange.event,this._onRenderedViewportChange=this.register(new b.EventEmitter),this.onRenderedViewportChange=this._onRenderedViewportChange.event,this._onRender=this.register(new b.EventEmitter),this.onRender=this._onRender.event,this._onRefreshRequest=this.register(new b.EventEmitter),this.onRefreshRequest=this._onRefreshRequest.event,this.register({dispose:()=>{var A;return(A=this._renderer)===null||A===void 0?void 0:A.dispose()}}),this._renderDebouncer=new f.RenderDebouncer(D.window,(A,T)=>this._renderRows(A,T)),this.register(this._renderDebouncer),this._screenDprMonitor=new v.ScreenDprMonitor(D.window),this._screenDprMonitor.setListener(()=>this.handleDevicePixelRatioChange()),this.register(this._screenDprMonitor),this.register(k.onResize(()=>this._fullRefresh())),this.register(k.buffers.onBufferActivate(()=>{var A;return(A=this._renderer)===null||A===void 0?void 0:A.clear()})),this.register(E.onOptionChange(()=>this._handleOptionsChanged())),this.register(this._charSizeService.onCharSizeChange(()=>this.handleCharSizeChanged())),this.register(S.onDecorationRegistered(()=>this._fullRefresh())),this.register(S.onDecorationRemoved(()=>this._fullRefresh())),this.register(E.onMultipleOptionChange(["customGlyphs","drawBoldTextInBrightColors","letterSpacing","lineHeight","fontFamily","fontSize","fontWeight","fontWeightBold","minimumContrastRatio"],()=>{this.clear(),this.handleResize(k.cols,k.rows),this._fullRefresh()})),this.register(E.onMultipleOptionChange(["cursorBlink","cursorStyle"],()=>this.refreshRows(k.buffer.y,k.buffer.y,!0))),this.register((0,m.addDisposableDomListener)(D.window,"resize",()=>this.handleDevicePixelRatioChange())),this.register(O.onChangeColors(()=>this._fullRefresh())),"IntersectionObserver"in D.window){const A=new D.window.IntersectionObserver(T=>this._handleIntersectionChange(T[T.length-1]),{threshold:0});A.observe(w),this.register({dispose:()=>A.disconnect()})}}get dimensions(){return this._renderer.dimensions}_handleIntersectionChange(g){this._isPaused=g.isIntersecting===void 0?g.intersectionRatio===0:!g.isIntersecting,this._isPaused||this._charSizeService.hasValidSize||this._charSizeService.measure(),!this._isPaused&&this._needsFullRefresh&&(this._pausedResizeTask.flush(),this.refreshRows(0,this._rowCount-1),this._needsFullRefresh=!1)}refreshRows(g,w,E=!1){this._isPaused?this._needsFullRefresh=!0:(E||(this._isNextRenderRedrawOnly=!1),this._renderDebouncer.refresh(g,w,this._rowCount))}_renderRows(g,w){this._renderer&&(g=Math.min(g,this._rowCount-1),w=Math.min(w,this._rowCount-1),this._renderer.renderRows(g,w),this._needsSelectionRefresh&&(this._renderer.handleSelectionChanged(this._selectionState.start,this._selectionState.end,this._selectionState.columnSelectMode),this._needsSelectionRefresh=!1),this._isNextRenderRedrawOnly||this._onRenderedViewportChange.fire({start:g,end:w}),this._onRender.fire({start:g,end:w}),this._isNextRenderRedrawOnly=!0)}resize(g,w){this._rowCount=w,this._fireOnCanvasResize()}_handleOptionsChanged(){this._renderer&&(this.refreshRows(0,this._rowCount-1),this._fireOnCanvasResize())}_fireOnCanvasResize(){this._renderer&&(this._renderer.dimensions.css.canvas.width===this._canvasWidth&&this._renderer.dimensions.css.canvas.height===this._canvasHeight||this._onDimensionsChange.fire(this._renderer.dimensions))}hasRenderer(){return!!this._renderer}setRenderer(g){var w;(w=this._renderer)===null||w===void 0||w.dispose(),this._renderer=g,this._renderer.onRequestRedraw(E=>this.refreshRows(E.start,E.end,!0)),this._needsSelectionRefresh=!0,this._fullRefresh()}addRefreshCallback(g){return this._renderDebouncer.addRefreshCallback(g)}_fullRefresh(){this._isPaused?this._needsFullRefresh=!0:this.refreshRows(0,this._rowCount-1)}clearTextureAtlas(){var g,w;this._renderer&&((w=(g=this._renderer).clearTextureAtlas)===null||w===void 0||w.call(g),this._fullRefresh())}handleDevicePixelRatioChange(){this._charSizeService.measure(),this._renderer&&(this._renderer.handleDevicePixelRatioChange(),this.refreshRows(0,this._rowCount-1))}handleResize(g,w){this._renderer&&(this._isPaused?this._pausedResizeTask.set(()=>this._renderer.handleResize(g,w)):this._renderer.handleResize(g,w),this._fullRefresh())}handleCharSizeChanged(){var g;(g=this._renderer)===null||g===void 0||g.handleCharSizeChanged()}handleBlur(){var g;(g=this._renderer)===null||g===void 0||g.handleBlur()}handleFocus(){var g;(g=this._renderer)===null||g===void 0||g.handleFocus()}handleSelectionChanged(g,w,E){var C;this._selectionState.start=g,this._selectionState.end=w,this._selectionState.columnSelectMode=E,(C=this._renderer)===null||C===void 0||C.handleSelectionChanged(g,w,E)}handleCursorMove(){var g;(g=this._renderer)===null||g===void 0||g.handleCursorMove()}clear(){var g;(g=this._renderer)===null||g===void 0||g.clear()}};d=h([u(2,l.IOptionsService),u(3,_.ICharSizeService),u(4,l.IDecorationService),u(5,l.IBufferService),u(6,_.ICoreBrowserService),u(7,_.IThemeService)],d),o.RenderService=d},9312:function(c,o,a){var h=this&&this.__decorate||function(S,k,D,O){var A,T=arguments.length,B=T<3?k:O===null?O=Object.getOwnPropertyDescriptor(k,D):O;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")B=Reflect.decorate(S,k,D,O);else for(var G=S.length-1;G>=0;G--)(A=S[G])&&(B=(T<3?A(B):T>3?A(k,D,B):A(k,D))||B);return T>3&&B&&Object.defineProperty(k,D,B),B},u=this&&this.__param||function(S,k){return function(D,O){k(D,O,S)}};Object.defineProperty(o,"__esModule",{value:!0}),o.SelectionService=void 0;const f=a(6114),b=a(456),y=a(511),v=a(8460),m=a(4725),l=a(2585),_=a(9806),p=a(9504),d=a(844),g=a(4841),w=String.fromCharCode(160),E=new RegExp(w,"g");let C=class extends d.Disposable{constructor(S,k,D,O,A,T,B,G,V){super(),this._element=S,this._screenElement=k,this._linkifier=D,this._bufferService=O,this._coreService=A,this._mouseService=T,this._optionsService=B,this._renderService=G,this._coreBrowserService=V,this._dragScrollAmount=0,this._enabled=!0,this._workCell=new y.CellData,this._mouseDownTimeStamp=0,this._oldHasSelection=!1,this._oldSelectionStart=void 0,this._oldSelectionEnd=void 0,this._onLinuxMouseSelection=this.register(new v.EventEmitter),this.onLinuxMouseSelection=this._onLinuxMouseSelection.event,this._onRedrawRequest=this.register(new v.EventEmitter),this.onRequestRedraw=this._onRedrawRequest.event,this._onSelectionChange=this.register(new v.EventEmitter),this.onSelectionChange=this._onSelectionChange.event,this._onRequestScrollLines=this.register(new v.EventEmitter),this.onRequestScrollLines=this._onRequestScrollLines.event,this._mouseMoveListener=L=>this._handleMouseMove(L),this._mouseUpListener=L=>this._handleMouseUp(L),this._coreService.onUserInput(()=>{this.hasSelection&&this.clearSelection()}),this._trimListener=this._bufferService.buffer.lines.onTrim(L=>this._handleTrim(L)),this.register(this._bufferService.buffers.onBufferActivate(L=>this._handleBufferActivate(L))),this.enable(),this._model=new b.SelectionModel(this._bufferService),this._activeSelectionMode=0,this.register((0,d.toDisposable)(()=>{this._removeMouseDownListeners()}))}reset(){this.clearSelection()}disable(){this.clearSelection(),this._enabled=!1}enable(){this._enabled=!0}get selectionStart(){return this._model.finalSelectionStart}get selectionEnd(){return this._model.finalSelectionEnd}get hasSelection(){const S=this._model.finalSelectionStart,k=this._model.finalSelectionEnd;return!(!S||!k||S[0]===k[0]&&S[1]===k[1])}get selectionText(){const S=this._model.finalSelectionStart,k=this._model.finalSelectionEnd;if(!S||!k)return"";const D=this._bufferService.buffer,O=[];if(this._activeSelectionMode===3){if(S[0]===k[0])return"";const A=S[0]<k[0]?S[0]:k[0],T=S[0]<k[0]?k[0]:S[0];for(let B=S[1];B<=k[1];B++){const G=D.translateBufferLineToString(B,!0,A,T);O.push(G)}}else{const A=S[1]===k[1]?k[0]:void 0;O.push(D.translateBufferLineToString(S[1],!0,S[0],A));for(let T=S[1]+1;T<=k[1]-1;T++){const B=D.lines.get(T),G=D.translateBufferLineToString(T,!0);B!=null&&B.isWrapped?O[O.length-1]+=G:O.push(G)}if(S[1]!==k[1]){const T=D.lines.get(k[1]),B=D.translateBufferLineToString(k[1],!0,0,k[0]);T&&T.isWrapped?O[O.length-1]+=B:O.push(B)}}return O.map(A=>A.replace(E," ")).join(f.isWindows?`\r
`:`
`)}clearSelection(){this._model.clearSelection(),this._removeMouseDownListeners(),this.refresh(),this._onSelectionChange.fire()}refresh(S){this._refreshAnimationFrame||(this._refreshAnimationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>this._refresh())),f.isLinux&&S&&this.selectionText.length&&this._onLinuxMouseSelection.fire(this.selectionText)}_refresh(){this._refreshAnimationFrame=void 0,this._onRedrawRequest.fire({start:this._model.finalSelectionStart,end:this._model.finalSelectionEnd,columnSelectMode:this._activeSelectionMode===3})}_isClickInSelection(S){const k=this._getMouseBufferCoords(S),D=this._model.finalSelectionStart,O=this._model.finalSelectionEnd;return!!(D&&O&&k)&&this._areCoordsInSelection(k,D,O)}isCellInSelection(S,k){const D=this._model.finalSelectionStart,O=this._model.finalSelectionEnd;return!(!D||!O)&&this._areCoordsInSelection([S,k],D,O)}_areCoordsInSelection(S,k,D){return S[1]>k[1]&&S[1]<D[1]||k[1]===D[1]&&S[1]===k[1]&&S[0]>=k[0]&&S[0]<D[0]||k[1]<D[1]&&S[1]===D[1]&&S[0]<D[0]||k[1]<D[1]&&S[1]===k[1]&&S[0]>=k[0]}_selectWordAtCursor(S,k){var D,O;const A=(O=(D=this._linkifier.currentLink)===null||D===void 0?void 0:D.link)===null||O===void 0?void 0:O.range;if(A)return this._model.selectionStart=[A.start.x-1,A.start.y-1],this._model.selectionStartLength=(0,g.getRangeLength)(A,this._bufferService.cols),this._model.selectionEnd=void 0,!0;const T=this._getMouseBufferCoords(S);return!!T&&(this._selectWordAt(T,k),this._model.selectionEnd=void 0,!0)}selectAll(){this._model.isSelectAllActive=!0,this.refresh(),this._onSelectionChange.fire()}selectLines(S,k){this._model.clearSelection(),S=Math.max(S,0),k=Math.min(k,this._bufferService.buffer.lines.length-1),this._model.selectionStart=[0,S],this._model.selectionEnd=[this._bufferService.cols,k],this.refresh(),this._onSelectionChange.fire()}_handleTrim(S){this._model.handleTrim(S)&&this.refresh()}_getMouseBufferCoords(S){const k=this._mouseService.getCoords(S,this._screenElement,this._bufferService.cols,this._bufferService.rows,!0);if(k)return k[0]--,k[1]--,k[1]+=this._bufferService.buffer.ydisp,k}_getMouseEventScrollAmount(S){let k=(0,_.getCoordsRelativeToElement)(this._coreBrowserService.window,S,this._screenElement)[1];const D=this._renderService.dimensions.css.canvas.height;return k>=0&&k<=D?0:(k>D&&(k-=D),k=Math.min(Math.max(k,-50),50),k/=50,k/Math.abs(k)+Math.round(14*k))}shouldForceSelection(S){return f.isMac?S.altKey&&this._optionsService.rawOptions.macOptionClickForcesSelection:S.shiftKey}handleMouseDown(S){if(this._mouseDownTimeStamp=S.timeStamp,(S.button!==2||!this.hasSelection)&&S.button===0){if(!this._enabled){if(!this.shouldForceSelection(S))return;S.stopPropagation()}S.preventDefault(),this._dragScrollAmount=0,this._enabled&&S.shiftKey?this._handleIncrementalClick(S):S.detail===1?this._handleSingleClick(S):S.detail===2?this._handleDoubleClick(S):S.detail===3&&this._handleTripleClick(S),this._addMouseDownListeners(),this.refresh(!0)}}_addMouseDownListeners(){this._screenElement.ownerDocument&&(this._screenElement.ownerDocument.addEventListener("mousemove",this._mouseMoveListener),this._screenElement.ownerDocument.addEventListener("mouseup",this._mouseUpListener)),this._dragScrollIntervalTimer=this._coreBrowserService.window.setInterval(()=>this._dragScroll(),50)}_removeMouseDownListeners(){this._screenElement.ownerDocument&&(this._screenElement.ownerDocument.removeEventListener("mousemove",this._mouseMoveListener),this._screenElement.ownerDocument.removeEventListener("mouseup",this._mouseUpListener)),this._coreBrowserService.window.clearInterval(this._dragScrollIntervalTimer),this._dragScrollIntervalTimer=void 0}_handleIncrementalClick(S){this._model.selectionStart&&(this._model.selectionEnd=this._getMouseBufferCoords(S))}_handleSingleClick(S){if(this._model.selectionStartLength=0,this._model.isSelectAllActive=!1,this._activeSelectionMode=this.shouldColumnSelect(S)?3:0,this._model.selectionStart=this._getMouseBufferCoords(S),!this._model.selectionStart)return;this._model.selectionEnd=void 0;const k=this._bufferService.buffer.lines.get(this._model.selectionStart[1]);k&&k.length!==this._model.selectionStart[0]&&k.hasWidth(this._model.selectionStart[0])===0&&this._model.selectionStart[0]++}_handleDoubleClick(S){this._selectWordAtCursor(S,!0)&&(this._activeSelectionMode=1)}_handleTripleClick(S){const k=this._getMouseBufferCoords(S);k&&(this._activeSelectionMode=2,this._selectLineAt(k[1]))}shouldColumnSelect(S){return S.altKey&&!(f.isMac&&this._optionsService.rawOptions.macOptionClickForcesSelection)}_handleMouseMove(S){if(S.stopImmediatePropagation(),!this._model.selectionStart)return;const k=this._model.selectionEnd?[this._model.selectionEnd[0],this._model.selectionEnd[1]]:null;if(this._model.selectionEnd=this._getMouseBufferCoords(S),!this._model.selectionEnd)return void this.refresh(!0);this._activeSelectionMode===2?this._model.selectionEnd[1]<this._model.selectionStart[1]?this._model.selectionEnd[0]=0:this._model.selectionEnd[0]=this._bufferService.cols:this._activeSelectionMode===1&&this._selectToWordAt(this._model.selectionEnd),this._dragScrollAmount=this._getMouseEventScrollAmount(S),this._activeSelectionMode!==3&&(this._dragScrollAmount>0?this._model.selectionEnd[0]=this._bufferService.cols:this._dragScrollAmount<0&&(this._model.selectionEnd[0]=0));const D=this._bufferService.buffer;if(this._model.selectionEnd[1]<D.lines.length){const O=D.lines.get(this._model.selectionEnd[1]);O&&O.hasWidth(this._model.selectionEnd[0])===0&&this._model.selectionEnd[0]++}k&&k[0]===this._model.selectionEnd[0]&&k[1]===this._model.selectionEnd[1]||this.refresh(!0)}_dragScroll(){if(this._model.selectionEnd&&this._model.selectionStart&&this._dragScrollAmount){this._onRequestScrollLines.fire({amount:this._dragScrollAmount,suppressScrollEvent:!1});const S=this._bufferService.buffer;this._dragScrollAmount>0?(this._activeSelectionMode!==3&&(this._model.selectionEnd[0]=this._bufferService.cols),this._model.selectionEnd[1]=Math.min(S.ydisp+this._bufferService.rows,S.lines.length-1)):(this._activeSelectionMode!==3&&(this._model.selectionEnd[0]=0),this._model.selectionEnd[1]=S.ydisp),this.refresh()}}_handleMouseUp(S){const k=S.timeStamp-this._mouseDownTimeStamp;if(this._removeMouseDownListeners(),this.selectionText.length<=1&&k<500&&S.altKey&&this._optionsService.rawOptions.altClickMovesCursor){if(this._bufferService.buffer.ybase===this._bufferService.buffer.ydisp){const D=this._mouseService.getCoords(S,this._element,this._bufferService.cols,this._bufferService.rows,!1);if(D&&D[0]!==void 0&&D[1]!==void 0){const O=(0,p.moveToCellSequence)(D[0]-1,D[1]-1,this._bufferService,this._coreService.decPrivateModes.applicationCursorKeys);this._coreService.triggerDataEvent(O,!0)}}}else this._fireEventIfSelectionChanged()}_fireEventIfSelectionChanged(){const S=this._model.finalSelectionStart,k=this._model.finalSelectionEnd,D=!(!S||!k||S[0]===k[0]&&S[1]===k[1]);D?S&&k&&(this._oldSelectionStart&&this._oldSelectionEnd&&S[0]===this._oldSelectionStart[0]&&S[1]===this._oldSelectionStart[1]&&k[0]===this._oldSelectionEnd[0]&&k[1]===this._oldSelectionEnd[1]||this._fireOnSelectionChange(S,k,D)):this._oldHasSelection&&this._fireOnSelectionChange(S,k,D)}_fireOnSelectionChange(S,k,D){this._oldSelectionStart=S,this._oldSelectionEnd=k,this._oldHasSelection=D,this._onSelectionChange.fire()}_handleBufferActivate(S){this.clearSelection(),this._trimListener.dispose(),this._trimListener=S.activeBuffer.lines.onTrim(k=>this._handleTrim(k))}_convertViewportColToCharacterIndex(S,k){let D=k;for(let O=0;k>=O;O++){const A=S.loadCell(O,this._workCell).getChars().length;this._workCell.getWidth()===0?D--:A>1&&k!==O&&(D+=A-1)}return D}setSelection(S,k,D){this._model.clearSelection(),this._removeMouseDownListeners(),this._model.selectionStart=[S,k],this._model.selectionStartLength=D,this.refresh(),this._fireEventIfSelectionChanged()}rightClickSelect(S){this._isClickInSelection(S)||(this._selectWordAtCursor(S,!1)&&this.refresh(!0),this._fireEventIfSelectionChanged())}_getWordAt(S,k,D=!0,O=!0){if(S[0]>=this._bufferService.cols)return;const A=this._bufferService.buffer,T=A.lines.get(S[1]);if(!T)return;const B=A.translateBufferLineToString(S[1],!1);let G=this._convertViewportColToCharacterIndex(T,S[0]),V=G;const L=S[0]-G;let R=0,M=0,P=0,z=0;if(B.charAt(G)===" "){for(;G>0&&B.charAt(G-1)===" ";)G--;for(;V<B.length&&B.charAt(V+1)===" ";)V++}else{let X=S[0],ae=S[0];T.getWidth(X)===0&&(R++,X--),T.getWidth(ae)===2&&(M++,ae++);const I=T.getString(ae).length;for(I>1&&(z+=I-1,V+=I-1);X>0&&G>0&&!this._isCharWordSeparator(T.loadCell(X-1,this._workCell));){T.loadCell(X-1,this._workCell);const x=this._workCell.getChars().length;this._workCell.getWidth()===0?(R++,X--):x>1&&(P+=x-1,G-=x-1),G--,X--}for(;ae<T.length&&V+1<B.length&&!this._isCharWordSeparator(T.loadCell(ae+1,this._workCell));){T.loadCell(ae+1,this._workCell);const x=this._workCell.getChars().length;this._workCell.getWidth()===2?(M++,ae++):x>1&&(z+=x-1,V+=x-1),V++,ae++}}V++;let j=G+L-R+P,de=Math.min(this._bufferService.cols,V-G+R+M-P-z);if(k||B.slice(G,V).trim()!==""){if(D&&j===0&&T.getCodePoint(0)!==32){const X=A.lines.get(S[1]-1);if(X&&T.isWrapped&&X.getCodePoint(this._bufferService.cols-1)!==32){const ae=this._getWordAt([this._bufferService.cols-1,S[1]-1],!1,!0,!1);if(ae){const I=this._bufferService.cols-ae.start;j-=I,de+=I}}}if(O&&j+de===this._bufferService.cols&&T.getCodePoint(this._bufferService.cols-1)!==32){const X=A.lines.get(S[1]+1);if(X!=null&&X.isWrapped&&X.getCodePoint(0)!==32){const ae=this._getWordAt([0,S[1]+1],!1,!1,!0);ae&&(de+=ae.length)}}return{start:j,length:de}}}_selectWordAt(S,k){const D=this._getWordAt(S,k);if(D){for(;D.start<0;)D.start+=this._bufferService.cols,S[1]--;this._model.selectionStart=[D.start,S[1]],this._model.selectionStartLength=D.length}}_selectToWordAt(S){const k=this._getWordAt(S,!0);if(k){let D=S[1];for(;k.start<0;)k.start+=this._bufferService.cols,D--;if(!this._model.areSelectionValuesReversed())for(;k.start+k.length>this._bufferService.cols;)k.length-=this._bufferService.cols,D++;this._model.selectionEnd=[this._model.areSelectionValuesReversed()?k.start:k.start+k.length,D]}}_isCharWordSeparator(S){return S.getWidth()!==0&&this._optionsService.rawOptions.wordSeparator.indexOf(S.getChars())>=0}_selectLineAt(S){const k=this._bufferService.buffer.getWrappedRangeForLine(S),D={start:{x:0,y:k.first},end:{x:this._bufferService.cols-1,y:k.last}};this._model.selectionStart=[0,k.first],this._model.selectionEnd=void 0,this._model.selectionStartLength=(0,g.getRangeLength)(D,this._bufferService.cols)}};C=h([u(3,l.IBufferService),u(4,l.ICoreService),u(5,m.IMouseService),u(6,l.IOptionsService),u(7,m.IRenderService),u(8,m.ICoreBrowserService)],C),o.SelectionService=C},4725:(c,o,a)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.IThemeService=o.ICharacterJoinerService=o.ISelectionService=o.IRenderService=o.IMouseService=o.ICoreBrowserService=o.ICharSizeService=void 0;const h=a(8343);o.ICharSizeService=(0,h.createDecorator)("CharSizeService"),o.ICoreBrowserService=(0,h.createDecorator)("CoreBrowserService"),o.IMouseService=(0,h.createDecorator)("MouseService"),o.IRenderService=(0,h.createDecorator)("RenderService"),o.ISelectionService=(0,h.createDecorator)("SelectionService"),o.ICharacterJoinerService=(0,h.createDecorator)("CharacterJoinerService"),o.IThemeService=(0,h.createDecorator)("ThemeService")},6731:function(c,o,a){var h=this&&this.__decorate||function(C,S,k,D){var O,A=arguments.length,T=A<3?S:D===null?D=Object.getOwnPropertyDescriptor(S,k):D;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")T=Reflect.decorate(C,S,k,D);else for(var B=C.length-1;B>=0;B--)(O=C[B])&&(T=(A<3?O(T):A>3?O(S,k,T):O(S,k))||T);return A>3&&T&&Object.defineProperty(S,k,T),T},u=this&&this.__param||function(C,S){return function(k,D){S(k,D,C)}};Object.defineProperty(o,"__esModule",{value:!0}),o.ThemeService=o.DEFAULT_ANSI_COLORS=void 0;const f=a(7239),b=a(8055),y=a(8460),v=a(844),m=a(2585),l=b.css.toColor("#ffffff"),_=b.css.toColor("#000000"),p=b.css.toColor("#ffffff"),d=b.css.toColor("#000000"),g={css:"rgba(255, 255, 255, 0.3)",rgba:4294967117};o.DEFAULT_ANSI_COLORS=Object.freeze((()=>{const C=[b.css.toColor("#2e3436"),b.css.toColor("#cc0000"),b.css.toColor("#4e9a06"),b.css.toColor("#c4a000"),b.css.toColor("#3465a4"),b.css.toColor("#75507b"),b.css.toColor("#06989a"),b.css.toColor("#d3d7cf"),b.css.toColor("#555753"),b.css.toColor("#ef2929"),b.css.toColor("#8ae234"),b.css.toColor("#fce94f"),b.css.toColor("#729fcf"),b.css.toColor("#ad7fa8"),b.css.toColor("#34e2e2"),b.css.toColor("#eeeeec")],S=[0,95,135,175,215,255];for(let k=0;k<216;k++){const D=S[k/36%6|0],O=S[k/6%6|0],A=S[k%6];C.push({css:b.channels.toCss(D,O,A),rgba:b.channels.toRgba(D,O,A)})}for(let k=0;k<24;k++){const D=8+10*k;C.push({css:b.channels.toCss(D,D,D),rgba:b.channels.toRgba(D,D,D)})}return C})());let w=class extends v.Disposable{constructor(C){super(),this._optionsService=C,this._onChangeColors=this.register(new y.EventEmitter),this.onChangeColors=this._onChangeColors.event,this._contrastCache=new f.ColorContrastCache,this._colors={foreground:l,background:_,cursor:p,cursorAccent:d,selectionForeground:void 0,selectionBackgroundTransparent:g,selectionBackgroundOpaque:b.color.blend(_,g),selectionInactiveBackgroundTransparent:g,selectionInactiveBackgroundOpaque:b.color.blend(_,g),ansi:o.DEFAULT_ANSI_COLORS.slice(),contrastCache:this._contrastCache},this._updateRestoreColors(),this._setTheme(this._optionsService.rawOptions.theme),this.register(this._optionsService.onSpecificOptionChange("minimumContrastRatio",()=>this._contrastCache.clear())),this.register(this._optionsService.onSpecificOptionChange("theme",()=>this._setTheme(this._optionsService.rawOptions.theme)))}get colors(){return this._colors}_setTheme(C={}){const S=this._colors;if(S.foreground=E(C.foreground,l),S.background=E(C.background,_),S.cursor=E(C.cursor,p),S.cursorAccent=E(C.cursorAccent,d),S.selectionBackgroundTransparent=E(C.selectionBackground,g),S.selectionBackgroundOpaque=b.color.blend(S.background,S.selectionBackgroundTransparent),S.selectionInactiveBackgroundTransparent=E(C.selectionInactiveBackground,S.selectionBackgroundTransparent),S.selectionInactiveBackgroundOpaque=b.color.blend(S.background,S.selectionInactiveBackgroundTransparent),S.selectionForeground=C.selectionForeground?E(C.selectionForeground,b.NULL_COLOR):void 0,S.selectionForeground===b.NULL_COLOR&&(S.selectionForeground=void 0),b.color.isOpaque(S.selectionBackgroundTransparent)&&(S.selectionBackgroundTransparent=b.color.opacity(S.selectionBackgroundTransparent,.3)),b.color.isOpaque(S.selectionInactiveBackgroundTransparent)&&(S.selectionInactiveBackgroundTransparent=b.color.opacity(S.selectionInactiveBackgroundTransparent,.3)),S.ansi=o.DEFAULT_ANSI_COLORS.slice(),S.ansi[0]=E(C.black,o.DEFAULT_ANSI_COLORS[0]),S.ansi[1]=E(C.red,o.DEFAULT_ANSI_COLORS[1]),S.ansi[2]=E(C.green,o.DEFAULT_ANSI_COLORS[2]),S.ansi[3]=E(C.yellow,o.DEFAULT_ANSI_COLORS[3]),S.ansi[4]=E(C.blue,o.DEFAULT_ANSI_COLORS[4]),S.ansi[5]=E(C.magenta,o.DEFAULT_ANSI_COLORS[5]),S.ansi[6]=E(C.cyan,o.DEFAULT_ANSI_COLORS[6]),S.ansi[7]=E(C.white,o.DEFAULT_ANSI_COLORS[7]),S.ansi[8]=E(C.brightBlack,o.DEFAULT_ANSI_COLORS[8]),S.ansi[9]=E(C.brightRed,o.DEFAULT_ANSI_COLORS[9]),S.ansi[10]=E(C.brightGreen,o.DEFAULT_ANSI_COLORS[10]),S.ansi[11]=E(C.brightYellow,o.DEFAULT_ANSI_COLORS[11]),S.ansi[12]=E(C.brightBlue,o.DEFAULT_ANSI_COLORS[12]),S.ansi[13]=E(C.brightMagenta,o.DEFAULT_ANSI_COLORS[13]),S.ansi[14]=E(C.brightCyan,o.DEFAULT_ANSI_COLORS[14]),S.ansi[15]=E(C.brightWhite,o.DEFAULT_ANSI_COLORS[15]),C.extendedAnsi){const k=Math.min(S.ansi.length-16,C.extendedAnsi.length);for(let D=0;D<k;D++)S.ansi[D+16]=E(C.extendedAnsi[D],o.DEFAULT_ANSI_COLORS[D+16])}this._contrastCache.clear(),this._updateRestoreColors(),this._onChangeColors.fire(this.colors)}restoreColor(C){this._restoreColor(C),this._onChangeColors.fire(this.colors)}_restoreColor(C){if(C!==void 0)switch(C){case 256:this._colors.foreground=this._restoreColors.foreground;break;case 257:this._colors.background=this._restoreColors.background;break;case 258:this._colors.cursor=this._restoreColors.cursor;break;default:this._colors.ansi[C]=this._restoreColors.ansi[C]}else for(let S=0;S<this._restoreColors.ansi.length;++S)this._colors.ansi[S]=this._restoreColors.ansi[S]}modifyColors(C){C(this._colors),this._onChangeColors.fire(this.colors)}_updateRestoreColors(){this._restoreColors={foreground:this._colors.foreground,background:this._colors.background,cursor:this._colors.cursor,ansi:this._colors.ansi.slice()}}};function E(C,S){if(C!==void 0)try{return b.css.toColor(C)}catch{}return S}w=h([u(0,m.IOptionsService)],w),o.ThemeService=w},6349:(c,o,a)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.CircularList=void 0;const h=a(8460),u=a(844);class f extends u.Disposable{constructor(y){super(),this._maxLength=y,this.onDeleteEmitter=this.register(new h.EventEmitter),this.onDelete=this.onDeleteEmitter.event,this.onInsertEmitter=this.register(new h.EventEmitter),this.onInsert=this.onInsertEmitter.event,this.onTrimEmitter=this.register(new h.EventEmitter),this.onTrim=this.onTrimEmitter.event,this._array=new Array(this._maxLength),this._startIndex=0,this._length=0}get maxLength(){return this._maxLength}set maxLength(y){if(this._maxLength===y)return;const v=new Array(y);for(let m=0;m<Math.min(y,this.length);m++)v[m]=this._array[this._getCyclicIndex(m)];this._array=v,this._maxLength=y,this._startIndex=0}get length(){return this._length}set length(y){if(y>this._length)for(let v=this._length;v<y;v++)this._array[v]=void 0;this._length=y}get(y){return this._array[this._getCyclicIndex(y)]}set(y,v){this._array[this._getCyclicIndex(y)]=v}push(y){this._array[this._getCyclicIndex(this._length)]=y,this._length===this._maxLength?(this._startIndex=++this._startIndex%this._maxLength,this.onTrimEmitter.fire(1)):this._length++}recycle(){if(this._length!==this._maxLength)throw new Error("Can only recycle when the buffer is full");return this._startIndex=++this._startIndex%this._maxLength,this.onTrimEmitter.fire(1),this._array[this._getCyclicIndex(this._length-1)]}get isFull(){return this._length===this._maxLength}pop(){return this._array[this._getCyclicIndex(this._length---1)]}splice(y,v,...m){if(v){for(let l=y;l<this._length-v;l++)this._array[this._getCyclicIndex(l)]=this._array[this._getCyclicIndex(l+v)];this._length-=v,this.onDeleteEmitter.fire({index:y,amount:v})}for(let l=this._length-1;l>=y;l--)this._array[this._getCyclicIndex(l+m.length)]=this._array[this._getCyclicIndex(l)];for(let l=0;l<m.length;l++)this._array[this._getCyclicIndex(y+l)]=m[l];if(m.length&&this.onInsertEmitter.fire({index:y,amount:m.length}),this._length+m.length>this._maxLength){const l=this._length+m.length-this._maxLength;this._startIndex+=l,this._length=this._maxLength,this.onTrimEmitter.fire(l)}else this._length+=m.length}trimStart(y){y>this._length&&(y=this._length),this._startIndex+=y,this._length-=y,this.onTrimEmitter.fire(y)}shiftElements(y,v,m){if(!(v<=0)){if(y<0||y>=this._length)throw new Error("start argument out of range");if(y+m<0)throw new Error("Cannot shift elements in list beyond index 0");if(m>0){for(let _=v-1;_>=0;_--)this.set(y+_+m,this.get(y+_));const l=y+v+m-this._length;if(l>0)for(this._length+=l;this._length>this._maxLength;)this._length--,this._startIndex++,this.onTrimEmitter.fire(1)}else for(let l=0;l<v;l++)this.set(y+l+m,this.get(y+l))}}_getCyclicIndex(y){return(this._startIndex+y)%this._maxLength}}o.CircularList=f},1439:(c,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.clone=void 0,o.clone=function a(h,u=5){if(typeof h!="object")return h;const f=Array.isArray(h)?[]:{};for(const b in h)f[b]=u<=1?h[b]:h[b]&&a(h[b],u-1);return f}},8055:(c,o,a)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.contrastRatio=o.toPaddedHex=o.rgba=o.rgb=o.css=o.color=o.channels=o.NULL_COLOR=void 0;const h=a(6114);let u=0,f=0,b=0,y=0;var v,m,l;function _(d){const g=d.toString(16);return g.length<2?"0"+g:g}function p(d,g){return d<g?(g+.05)/(d+.05):(d+.05)/(g+.05)}o.NULL_COLOR={css:"#00000000",rgba:0},function(d){d.toCss=function(g,w,E,C){return C!==void 0?`#${_(g)}${_(w)}${_(E)}${_(C)}`:`#${_(g)}${_(w)}${_(E)}`},d.toRgba=function(g,w,E,C=255){return(g<<24|w<<16|E<<8|C)>>>0}}(v=o.channels||(o.channels={})),function(d){function g(w,E){return y=Math.round(255*E),[u,f,b]=l.toChannels(w.rgba),{css:v.toCss(u,f,b,y),rgba:v.toRgba(u,f,b,y)}}d.blend=function(w,E){if(y=(255&E.rgba)/255,y===1)return{css:E.css,rgba:E.rgba};const C=E.rgba>>24&255,S=E.rgba>>16&255,k=E.rgba>>8&255,D=w.rgba>>24&255,O=w.rgba>>16&255,A=w.rgba>>8&255;return u=D+Math.round((C-D)*y),f=O+Math.round((S-O)*y),b=A+Math.round((k-A)*y),{css:v.toCss(u,f,b),rgba:v.toRgba(u,f,b)}},d.isOpaque=function(w){return(255&w.rgba)==255},d.ensureContrastRatio=function(w,E,C){const S=l.ensureContrastRatio(w.rgba,E.rgba,C);if(S)return l.toColor(S>>24&255,S>>16&255,S>>8&255)},d.opaque=function(w){const E=(255|w.rgba)>>>0;return[u,f,b]=l.toChannels(E),{css:v.toCss(u,f,b),rgba:E}},d.opacity=g,d.multiplyOpacity=function(w,E){return y=255&w.rgba,g(w,y*E/255)},d.toColorRGB=function(w){return[w.rgba>>24&255,w.rgba>>16&255,w.rgba>>8&255]}}(o.color||(o.color={})),function(d){let g,w;if(!h.isNode){const E=document.createElement("canvas");E.width=1,E.height=1;const C=E.getContext("2d",{willReadFrequently:!0});C&&(g=C,g.globalCompositeOperation="copy",w=g.createLinearGradient(0,0,1,1))}d.toColor=function(E){if(E.match(/#[\da-f]{3,8}/i))switch(E.length){case 4:return u=parseInt(E.slice(1,2).repeat(2),16),f=parseInt(E.slice(2,3).repeat(2),16),b=parseInt(E.slice(3,4).repeat(2),16),l.toColor(u,f,b);case 5:return u=parseInt(E.slice(1,2).repeat(2),16),f=parseInt(E.slice(2,3).repeat(2),16),b=parseInt(E.slice(3,4).repeat(2),16),y=parseInt(E.slice(4,5).repeat(2),16),l.toColor(u,f,b,y);case 7:return{css:E,rgba:(parseInt(E.slice(1),16)<<8|255)>>>0};case 9:return{css:E,rgba:parseInt(E.slice(1),16)>>>0}}const C=E.match(/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(,\s*(0|1|\d?\.(\d+))\s*)?\)/);if(C)return u=parseInt(C[1]),f=parseInt(C[2]),b=parseInt(C[3]),y=Math.round(255*(C[5]===void 0?1:parseFloat(C[5]))),l.toColor(u,f,b,y);if(!g||!w)throw new Error("css.toColor: Unsupported css format");if(g.fillStyle=w,g.fillStyle=E,typeof g.fillStyle!="string")throw new Error("css.toColor: Unsupported css format");if(g.fillRect(0,0,1,1),[u,f,b,y]=g.getImageData(0,0,1,1).data,y!==255)throw new Error("css.toColor: Unsupported css format");return{rgba:v.toRgba(u,f,b,y),css:E}}}(o.css||(o.css={})),function(d){function g(w,E,C){const S=w/255,k=E/255,D=C/255;return .2126*(S<=.03928?S/12.92:Math.pow((S+.055)/1.055,2.4))+.7152*(k<=.03928?k/12.92:Math.pow((k+.055)/1.055,2.4))+.0722*(D<=.03928?D/12.92:Math.pow((D+.055)/1.055,2.4))}d.relativeLuminance=function(w){return g(w>>16&255,w>>8&255,255&w)},d.relativeLuminance2=g}(m=o.rgb||(o.rgb={})),function(d){function g(E,C,S){const k=E>>24&255,D=E>>16&255,O=E>>8&255;let A=C>>24&255,T=C>>16&255,B=C>>8&255,G=p(m.relativeLuminance2(A,T,B),m.relativeLuminance2(k,D,O));for(;G<S&&(A>0||T>0||B>0);)A-=Math.max(0,Math.ceil(.1*A)),T-=Math.max(0,Math.ceil(.1*T)),B-=Math.max(0,Math.ceil(.1*B)),G=p(m.relativeLuminance2(A,T,B),m.relativeLuminance2(k,D,O));return(A<<24|T<<16|B<<8|255)>>>0}function w(E,C,S){const k=E>>24&255,D=E>>16&255,O=E>>8&255;let A=C>>24&255,T=C>>16&255,B=C>>8&255,G=p(m.relativeLuminance2(A,T,B),m.relativeLuminance2(k,D,O));for(;G<S&&(A<255||T<255||B<255);)A=Math.min(255,A+Math.ceil(.1*(255-A))),T=Math.min(255,T+Math.ceil(.1*(255-T))),B=Math.min(255,B+Math.ceil(.1*(255-B))),G=p(m.relativeLuminance2(A,T,B),m.relativeLuminance2(k,D,O));return(A<<24|T<<16|B<<8|255)>>>0}d.ensureContrastRatio=function(E,C,S){const k=m.relativeLuminance(E>>8),D=m.relativeLuminance(C>>8);if(p(k,D)<S){if(D<k){const T=g(E,C,S),B=p(k,m.relativeLuminance(T>>8));if(B<S){const G=w(E,C,S);return B>p(k,m.relativeLuminance(G>>8))?T:G}return T}const O=w(E,C,S),A=p(k,m.relativeLuminance(O>>8));if(A<S){const T=g(E,C,S);return A>p(k,m.relativeLuminance(T>>8))?O:T}return O}},d.reduceLuminance=g,d.increaseLuminance=w,d.toChannels=function(E){return[E>>24&255,E>>16&255,E>>8&255,255&E]},d.toColor=function(E,C,S,k){return{css:v.toCss(E,C,S,k),rgba:v.toRgba(E,C,S,k)}}}(l=o.rgba||(o.rgba={})),o.toPaddedHex=_,o.contrastRatio=p},8969:(c,o,a)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.CoreTerminal=void 0;const h=a(844),u=a(2585),f=a(4348),b=a(7866),y=a(744),v=a(7302),m=a(6975),l=a(8460),_=a(1753),p=a(1480),d=a(7994),g=a(9282),w=a(5435),E=a(5981),C=a(2660);let S=!1;class k extends h.Disposable{constructor(O){super(),this._onBinary=this.register(new l.EventEmitter),this.onBinary=this._onBinary.event,this._onData=this.register(new l.EventEmitter),this.onData=this._onData.event,this._onLineFeed=this.register(new l.EventEmitter),this.onLineFeed=this._onLineFeed.event,this._onResize=this.register(new l.EventEmitter),this.onResize=this._onResize.event,this._onWriteParsed=this.register(new l.EventEmitter),this.onWriteParsed=this._onWriteParsed.event,this._onScroll=this.register(new l.EventEmitter),this._instantiationService=new f.InstantiationService,this.optionsService=this.register(new v.OptionsService(O)),this._instantiationService.setService(u.IOptionsService,this.optionsService),this._bufferService=this.register(this._instantiationService.createInstance(y.BufferService)),this._instantiationService.setService(u.IBufferService,this._bufferService),this._logService=this.register(this._instantiationService.createInstance(b.LogService)),this._instantiationService.setService(u.ILogService,this._logService),this.coreService=this.register(this._instantiationService.createInstance(m.CoreService)),this._instantiationService.setService(u.ICoreService,this.coreService),this.coreMouseService=this.register(this._instantiationService.createInstance(_.CoreMouseService)),this._instantiationService.setService(u.ICoreMouseService,this.coreMouseService),this.unicodeService=this.register(this._instantiationService.createInstance(p.UnicodeService)),this._instantiationService.setService(u.IUnicodeService,this.unicodeService),this._charsetService=this._instantiationService.createInstance(d.CharsetService),this._instantiationService.setService(u.ICharsetService,this._charsetService),this._oscLinkService=this._instantiationService.createInstance(C.OscLinkService),this._instantiationService.setService(u.IOscLinkService,this._oscLinkService),this._inputHandler=this.register(new w.InputHandler(this._bufferService,this._charsetService,this.coreService,this._logService,this.optionsService,this._oscLinkService,this.coreMouseService,this.unicodeService)),this.register((0,l.forwardEvent)(this._inputHandler.onLineFeed,this._onLineFeed)),this.register(this._inputHandler),this.register((0,l.forwardEvent)(this._bufferService.onResize,this._onResize)),this.register((0,l.forwardEvent)(this.coreService.onData,this._onData)),this.register((0,l.forwardEvent)(this.coreService.onBinary,this._onBinary)),this.register(this.coreService.onRequestScrollToBottom(()=>this.scrollToBottom())),this.register(this.coreService.onUserInput(()=>this._writeBuffer.handleUserInput())),this.register(this.optionsService.onMultipleOptionChange(["windowsMode","windowsPty"],()=>this._handleWindowsPtyOptionChange())),this.register(this._bufferService.onScroll(A=>{this._onScroll.fire({position:this._bufferService.buffer.ydisp,source:0}),this._inputHandler.markRangeDirty(this._bufferService.buffer.scrollTop,this._bufferService.buffer.scrollBottom)})),this.register(this._inputHandler.onScroll(A=>{this._onScroll.fire({position:this._bufferService.buffer.ydisp,source:0}),this._inputHandler.markRangeDirty(this._bufferService.buffer.scrollTop,this._bufferService.buffer.scrollBottom)})),this._writeBuffer=this.register(new E.WriteBuffer((A,T)=>this._inputHandler.parse(A,T))),this.register((0,l.forwardEvent)(this._writeBuffer.onWriteParsed,this._onWriteParsed)),this.register((0,h.toDisposable)(()=>{var A;(A=this._windowsWrappingHeuristics)===null||A===void 0||A.dispose(),this._windowsWrappingHeuristics=void 0}))}get onScroll(){return this._onScrollApi||(this._onScrollApi=this.register(new l.EventEmitter),this._onScroll.event(O=>{var A;(A=this._onScrollApi)===null||A===void 0||A.fire(O.position)})),this._onScrollApi.event}get cols(){return this._bufferService.cols}get rows(){return this._bufferService.rows}get buffers(){return this._bufferService.buffers}get options(){return this.optionsService.options}set options(O){for(const A in O)this.optionsService.options[A]=O[A]}write(O,A){this._writeBuffer.write(O,A)}writeSync(O,A){this._logService.logLevel<=u.LogLevelEnum.WARN&&!S&&(this._logService.warn("writeSync is unreliable and will be removed soon."),S=!0),this._writeBuffer.writeSync(O,A)}resize(O,A){isNaN(O)||isNaN(A)||(O=Math.max(O,y.MINIMUM_COLS),A=Math.max(A,y.MINIMUM_ROWS),this._bufferService.resize(O,A))}scroll(O,A=!1){this._bufferService.scroll(O,A)}scrollLines(O,A,T){this._bufferService.scrollLines(O,A,T)}scrollPages(O){this._bufferService.scrollPages(O)}scrollToTop(){this._bufferService.scrollToTop()}scrollToBottom(){this._bufferService.scrollToBottom()}scrollToLine(O){this._bufferService.scrollToLine(O)}registerEscHandler(O,A){return this._inputHandler.registerEscHandler(O,A)}registerDcsHandler(O,A){return this._inputHandler.registerDcsHandler(O,A)}registerCsiHandler(O,A){return this._inputHandler.registerCsiHandler(O,A)}registerOscHandler(O,A){return this._inputHandler.registerOscHandler(O,A)}_setup(){this._handleWindowsPtyOptionChange()}reset(){this._inputHandler.reset(),this._bufferService.reset(),this._charsetService.reset(),this.coreService.reset(),this.coreMouseService.reset()}_handleWindowsPtyOptionChange(){var O;let A=!1;const T=this.optionsService.rawOptions.windowsPty;T&&T.buildNumber!==void 0&&T.buildNumber!==void 0?A=T.backend==="conpty"&&T.buildNumber<21376:this.optionsService.rawOptions.windowsMode&&(A=!0),A?this._enableWindowsWrappingHeuristics():((O=this._windowsWrappingHeuristics)===null||O===void 0||O.dispose(),this._windowsWrappingHeuristics=void 0)}_enableWindowsWrappingHeuristics(){if(!this._windowsWrappingHeuristics){const O=[];O.push(this.onLineFeed(g.updateWindowsModeWrappedState.bind(null,this._bufferService))),O.push(this.registerCsiHandler({final:"H"},()=>((0,g.updateWindowsModeWrappedState)(this._bufferService),!1))),this._windowsWrappingHeuristics=(0,h.toDisposable)(()=>{for(const A of O)A.dispose()})}}}o.CoreTerminal=k},8460:(c,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.forwardEvent=o.EventEmitter=void 0,o.EventEmitter=class{constructor(){this._listeners=[],this._disposed=!1}get event(){return this._event||(this._event=a=>(this._listeners.push(a),{dispose:()=>{if(!this._disposed){for(let h=0;h<this._listeners.length;h++)if(this._listeners[h]===a)return void this._listeners.splice(h,1)}}})),this._event}fire(a,h){const u=[];for(let f=0;f<this._listeners.length;f++)u.push(this._listeners[f]);for(let f=0;f<u.length;f++)u[f].call(void 0,a,h)}dispose(){this._listeners&&(this._listeners.length=0),this._disposed=!0}},o.forwardEvent=function(a,h){return a(u=>h.fire(u))}},5435:function(c,o,a){var h=this&&this.__decorate||function(V,L,R,M){var P,z=arguments.length,j=z<3?L:M===null?M=Object.getOwnPropertyDescriptor(L,R):M;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")j=Reflect.decorate(V,L,R,M);else for(var de=V.length-1;de>=0;de--)(P=V[de])&&(j=(z<3?P(j):z>3?P(L,R,j):P(L,R))||j);return z>3&&j&&Object.defineProperty(L,R,j),j},u=this&&this.__param||function(V,L){return function(R,M){L(R,M,V)}};Object.defineProperty(o,"__esModule",{value:!0}),o.InputHandler=o.WindowsOptionsReportType=void 0;const f=a(2584),b=a(7116),y=a(2015),v=a(844),m=a(482),l=a(8437),_=a(8460),p=a(643),d=a(511),g=a(3734),w=a(2585),E=a(6242),C=a(6351),S=a(5941),k={"(":0,")":1,"*":2,"+":3,"-":1,".":2},D=131072;function O(V,L){if(V>24)return L.setWinLines||!1;switch(V){case 1:return!!L.restoreWin;case 2:return!!L.minimizeWin;case 3:return!!L.setWinPosition;case 4:return!!L.setWinSizePixels;case 5:return!!L.raiseWin;case 6:return!!L.lowerWin;case 7:return!!L.refreshWin;case 8:return!!L.setWinSizeChars;case 9:return!!L.maximizeWin;case 10:return!!L.fullscreenWin;case 11:return!!L.getWinState;case 13:return!!L.getWinPosition;case 14:return!!L.getWinSizePixels;case 15:return!!L.getScreenSizePixels;case 16:return!!L.getCellSizePixels;case 18:return!!L.getWinSizeChars;case 19:return!!L.getScreenSizeChars;case 20:return!!L.getIconTitle;case 21:return!!L.getWinTitle;case 22:return!!L.pushTitle;case 23:return!!L.popTitle;case 24:return!!L.setWinLines}return!1}var A;(function(V){V[V.GET_WIN_SIZE_PIXELS=0]="GET_WIN_SIZE_PIXELS",V[V.GET_CELL_SIZE_PIXELS=1]="GET_CELL_SIZE_PIXELS"})(A=o.WindowsOptionsReportType||(o.WindowsOptionsReportType={}));let T=0;class B extends v.Disposable{constructor(L,R,M,P,z,j,de,X,ae=new y.EscapeSequenceParser){super(),this._bufferService=L,this._charsetService=R,this._coreService=M,this._logService=P,this._optionsService=z,this._oscLinkService=j,this._coreMouseService=de,this._unicodeService=X,this._parser=ae,this._parseBuffer=new Uint32Array(4096),this._stringDecoder=new m.StringToUtf32,this._utf8Decoder=new m.Utf8ToUtf32,this._workCell=new d.CellData,this._windowTitle="",this._iconName="",this._windowTitleStack=[],this._iconNameStack=[],this._curAttrData=l.DEFAULT_ATTR_DATA.clone(),this._eraseAttrDataInternal=l.DEFAULT_ATTR_DATA.clone(),this._onRequestBell=this.register(new _.EventEmitter),this.onRequestBell=this._onRequestBell.event,this._onRequestRefreshRows=this.register(new _.EventEmitter),this.onRequestRefreshRows=this._onRequestRefreshRows.event,this._onRequestReset=this.register(new _.EventEmitter),this.onRequestReset=this._onRequestReset.event,this._onRequestSendFocus=this.register(new _.EventEmitter),this.onRequestSendFocus=this._onRequestSendFocus.event,this._onRequestSyncScrollBar=this.register(new _.EventEmitter),this.onRequestSyncScrollBar=this._onRequestSyncScrollBar.event,this._onRequestWindowsOptionsReport=this.register(new _.EventEmitter),this.onRequestWindowsOptionsReport=this._onRequestWindowsOptionsReport.event,this._onA11yChar=this.register(new _.EventEmitter),this.onA11yChar=this._onA11yChar.event,this._onA11yTab=this.register(new _.EventEmitter),this.onA11yTab=this._onA11yTab.event,this._onCursorMove=this.register(new _.EventEmitter),this.onCursorMove=this._onCursorMove.event,this._onLineFeed=this.register(new _.EventEmitter),this.onLineFeed=this._onLineFeed.event,this._onScroll=this.register(new _.EventEmitter),this.onScroll=this._onScroll.event,this._onTitleChange=this.register(new _.EventEmitter),this.onTitleChange=this._onTitleChange.event,this._onColor=this.register(new _.EventEmitter),this.onColor=this._onColor.event,this._parseStack={paused:!1,cursorStartX:0,cursorStartY:0,decodedLength:0,position:0},this._specialColors=[256,257,258],this.register(this._parser),this._dirtyRowTracker=new G(this._bufferService),this._activeBuffer=this._bufferService.buffer,this.register(this._bufferService.buffers.onBufferActivate(I=>this._activeBuffer=I.activeBuffer)),this._parser.setCsiHandlerFallback((I,x)=>{this._logService.debug("Unknown CSI code: ",{identifier:this._parser.identToString(I),params:x.toArray()})}),this._parser.setEscHandlerFallback(I=>{this._logService.debug("Unknown ESC code: ",{identifier:this._parser.identToString(I)})}),this._parser.setExecuteHandlerFallback(I=>{this._logService.debug("Unknown EXECUTE code: ",{code:I})}),this._parser.setOscHandlerFallback((I,x,H)=>{this._logService.debug("Unknown OSC code: ",{identifier:I,action:x,data:H})}),this._parser.setDcsHandlerFallback((I,x,H)=>{x==="HOOK"&&(H=H.toArray()),this._logService.debug("Unknown DCS code: ",{identifier:this._parser.identToString(I),action:x,payload:H})}),this._parser.setPrintHandler((I,x,H)=>this.print(I,x,H)),this._parser.registerCsiHandler({final:"@"},I=>this.insertChars(I)),this._parser.registerCsiHandler({intermediates:" ",final:"@"},I=>this.scrollLeft(I)),this._parser.registerCsiHandler({final:"A"},I=>this.cursorUp(I)),this._parser.registerCsiHandler({intermediates:" ",final:"A"},I=>this.scrollRight(I)),this._parser.registerCsiHandler({final:"B"},I=>this.cursorDown(I)),this._parser.registerCsiHandler({final:"C"},I=>this.cursorForward(I)),this._parser.registerCsiHandler({final:"D"},I=>this.cursorBackward(I)),this._parser.registerCsiHandler({final:"E"},I=>this.cursorNextLine(I)),this._parser.registerCsiHandler({final:"F"},I=>this.cursorPrecedingLine(I)),this._parser.registerCsiHandler({final:"G"},I=>this.cursorCharAbsolute(I)),this._parser.registerCsiHandler({final:"H"},I=>this.cursorPosition(I)),this._parser.registerCsiHandler({final:"I"},I=>this.cursorForwardTab(I)),this._parser.registerCsiHandler({final:"J"},I=>this.eraseInDisplay(I,!1)),this._parser.registerCsiHandler({prefix:"?",final:"J"},I=>this.eraseInDisplay(I,!0)),this._parser.registerCsiHandler({final:"K"},I=>this.eraseInLine(I,!1)),this._parser.registerCsiHandler({prefix:"?",final:"K"},I=>this.eraseInLine(I,!0)),this._parser.registerCsiHandler({final:"L"},I=>this.insertLines(I)),this._parser.registerCsiHandler({final:"M"},I=>this.deleteLines(I)),this._parser.registerCsiHandler({final:"P"},I=>this.deleteChars(I)),this._parser.registerCsiHandler({final:"S"},I=>this.scrollUp(I)),this._parser.registerCsiHandler({final:"T"},I=>this.scrollDown(I)),this._parser.registerCsiHandler({final:"X"},I=>this.eraseChars(I)),this._parser.registerCsiHandler({final:"Z"},I=>this.cursorBackwardTab(I)),this._parser.registerCsiHandler({final:"`"},I=>this.charPosAbsolute(I)),this._parser.registerCsiHandler({final:"a"},I=>this.hPositionRelative(I)),this._parser.registerCsiHandler({final:"b"},I=>this.repeatPrecedingCharacter(I)),this._parser.registerCsiHandler({final:"c"},I=>this.sendDeviceAttributesPrimary(I)),this._parser.registerCsiHandler({prefix:">",final:"c"},I=>this.sendDeviceAttributesSecondary(I)),this._parser.registerCsiHandler({final:"d"},I=>this.linePosAbsolute(I)),this._parser.registerCsiHandler({final:"e"},I=>this.vPositionRelative(I)),this._parser.registerCsiHandler({final:"f"},I=>this.hVPosition(I)),this._parser.registerCsiHandler({final:"g"},I=>this.tabClear(I)),this._parser.registerCsiHandler({final:"h"},I=>this.setMode(I)),this._parser.registerCsiHandler({prefix:"?",final:"h"},I=>this.setModePrivate(I)),this._parser.registerCsiHandler({final:"l"},I=>this.resetMode(I)),this._parser.registerCsiHandler({prefix:"?",final:"l"},I=>this.resetModePrivate(I)),this._parser.registerCsiHandler({final:"m"},I=>this.charAttributes(I)),this._parser.registerCsiHandler({final:"n"},I=>this.deviceStatus(I)),this._parser.registerCsiHandler({prefix:"?",final:"n"},I=>this.deviceStatusPrivate(I)),this._parser.registerCsiHandler({intermediates:"!",final:"p"},I=>this.softReset(I)),this._parser.registerCsiHandler({intermediates:" ",final:"q"},I=>this.setCursorStyle(I)),this._parser.registerCsiHandler({final:"r"},I=>this.setScrollRegion(I)),this._parser.registerCsiHandler({final:"s"},I=>this.saveCursor(I)),this._parser.registerCsiHandler({final:"t"},I=>this.windowOptions(I)),this._parser.registerCsiHandler({final:"u"},I=>this.restoreCursor(I)),this._parser.registerCsiHandler({intermediates:"'",final:"}"},I=>this.insertColumns(I)),this._parser.registerCsiHandler({intermediates:"'",final:"~"},I=>this.deleteColumns(I)),this._parser.registerCsiHandler({intermediates:'"',final:"q"},I=>this.selectProtected(I)),this._parser.registerCsiHandler({intermediates:"$",final:"p"},I=>this.requestMode(I,!0)),this._parser.registerCsiHandler({prefix:"?",intermediates:"$",final:"p"},I=>this.requestMode(I,!1)),this._parser.setExecuteHandler(f.C0.BEL,()=>this.bell()),this._parser.setExecuteHandler(f.C0.LF,()=>this.lineFeed()),this._parser.setExecuteHandler(f.C0.VT,()=>this.lineFeed()),this._parser.setExecuteHandler(f.C0.FF,()=>this.lineFeed()),this._parser.setExecuteHandler(f.C0.CR,()=>this.carriageReturn()),this._parser.setExecuteHandler(f.C0.BS,()=>this.backspace()),this._parser.setExecuteHandler(f.C0.HT,()=>this.tab()),this._parser.setExecuteHandler(f.C0.SO,()=>this.shiftOut()),this._parser.setExecuteHandler(f.C0.SI,()=>this.shiftIn()),this._parser.setExecuteHandler(f.C1.IND,()=>this.index()),this._parser.setExecuteHandler(f.C1.NEL,()=>this.nextLine()),this._parser.setExecuteHandler(f.C1.HTS,()=>this.tabSet()),this._parser.registerOscHandler(0,new E.OscHandler(I=>(this.setTitle(I),this.setIconName(I),!0))),this._parser.registerOscHandler(1,new E.OscHandler(I=>this.setIconName(I))),this._parser.registerOscHandler(2,new E.OscHandler(I=>this.setTitle(I))),this._parser.registerOscHandler(4,new E.OscHandler(I=>this.setOrReportIndexedColor(I))),this._parser.registerOscHandler(8,new E.OscHandler(I=>this.setHyperlink(I))),this._parser.registerOscHandler(10,new E.OscHandler(I=>this.setOrReportFgColor(I))),this._parser.registerOscHandler(11,new E.OscHandler(I=>this.setOrReportBgColor(I))),this._parser.registerOscHandler(12,new E.OscHandler(I=>this.setOrReportCursorColor(I))),this._parser.registerOscHandler(104,new E.OscHandler(I=>this.restoreIndexedColor(I))),this._parser.registerOscHandler(110,new E.OscHandler(I=>this.restoreFgColor(I))),this._parser.registerOscHandler(111,new E.OscHandler(I=>this.restoreBgColor(I))),this._parser.registerOscHandler(112,new E.OscHandler(I=>this.restoreCursorColor(I))),this._parser.registerEscHandler({final:"7"},()=>this.saveCursor()),this._parser.registerEscHandler({final:"8"},()=>this.restoreCursor()),this._parser.registerEscHandler({final:"D"},()=>this.index()),this._parser.registerEscHandler({final:"E"},()=>this.nextLine()),this._parser.registerEscHandler({final:"H"},()=>this.tabSet()),this._parser.registerEscHandler({final:"M"},()=>this.reverseIndex()),this._parser.registerEscHandler({final:"="},()=>this.keypadApplicationMode()),this._parser.registerEscHandler({final:">"},()=>this.keypadNumericMode()),this._parser.registerEscHandler({final:"c"},()=>this.fullReset()),this._parser.registerEscHandler({final:"n"},()=>this.setgLevel(2)),this._parser.registerEscHandler({final:"o"},()=>this.setgLevel(3)),this._parser.registerEscHandler({final:"|"},()=>this.setgLevel(3)),this._parser.registerEscHandler({final:"}"},()=>this.setgLevel(2)),this._parser.registerEscHandler({final:"~"},()=>this.setgLevel(1)),this._parser.registerEscHandler({intermediates:"%",final:"@"},()=>this.selectDefaultCharset()),this._parser.registerEscHandler({intermediates:"%",final:"G"},()=>this.selectDefaultCharset());for(const I in b.CHARSETS)this._parser.registerEscHandler({intermediates:"(",final:I},()=>this.selectCharset("("+I)),this._parser.registerEscHandler({intermediates:")",final:I},()=>this.selectCharset(")"+I)),this._parser.registerEscHandler({intermediates:"*",final:I},()=>this.selectCharset("*"+I)),this._parser.registerEscHandler({intermediates:"+",final:I},()=>this.selectCharset("+"+I)),this._parser.registerEscHandler({intermediates:"-",final:I},()=>this.selectCharset("-"+I)),this._parser.registerEscHandler({intermediates:".",final:I},()=>this.selectCharset("."+I)),this._parser.registerEscHandler({intermediates:"/",final:I},()=>this.selectCharset("/"+I));this._parser.registerEscHandler({intermediates:"#",final:"8"},()=>this.screenAlignmentPattern()),this._parser.setErrorHandler(I=>(this._logService.error("Parsing error: ",I),I)),this._parser.registerDcsHandler({intermediates:"$",final:"q"},new C.DcsHandler((I,x)=>this.requestStatusString(I,x)))}getAttrData(){return this._curAttrData}_preserveStack(L,R,M,P){this._parseStack.paused=!0,this._parseStack.cursorStartX=L,this._parseStack.cursorStartY=R,this._parseStack.decodedLength=M,this._parseStack.position=P}_logSlowResolvingAsync(L){this._logService.logLevel<=w.LogLevelEnum.WARN&&Promise.race([L,new Promise((R,M)=>setTimeout(()=>M("#SLOW_TIMEOUT"),5e3))]).catch(R=>{if(R!=="#SLOW_TIMEOUT")throw R;console.warn("async parser handler taking longer than 5000 ms")})}_getCurrentLinkId(){return this._curAttrData.extended.urlId}parse(L,R){let M,P=this._activeBuffer.x,z=this._activeBuffer.y,j=0;const de=this._parseStack.paused;if(de){if(M=this._parser.parse(this._parseBuffer,this._parseStack.decodedLength,R))return this._logSlowResolvingAsync(M),M;P=this._parseStack.cursorStartX,z=this._parseStack.cursorStartY,this._parseStack.paused=!1,L.length>D&&(j=this._parseStack.position+D)}if(this._logService.logLevel<=w.LogLevelEnum.DEBUG&&this._logService.debug("parsing data"+(typeof L=="string"?` "${L}"`:` "${Array.prototype.map.call(L,X=>String.fromCharCode(X)).join("")}"`),typeof L=="string"?L.split("").map(X=>X.charCodeAt(0)):L),this._parseBuffer.length<L.length&&this._parseBuffer.length<D&&(this._parseBuffer=new Uint32Array(Math.min(L.length,D))),de||this._dirtyRowTracker.clearRange(),L.length>D)for(let X=j;X<L.length;X+=D){const ae=X+D<L.length?X+D:L.length,I=typeof L=="string"?this._stringDecoder.decode(L.substring(X,ae),this._parseBuffer):this._utf8Decoder.decode(L.subarray(X,ae),this._parseBuffer);if(M=this._parser.parse(this._parseBuffer,I))return this._preserveStack(P,z,I,X),this._logSlowResolvingAsync(M),M}else if(!de){const X=typeof L=="string"?this._stringDecoder.decode(L,this._parseBuffer):this._utf8Decoder.decode(L,this._parseBuffer);if(M=this._parser.parse(this._parseBuffer,X))return this._preserveStack(P,z,X,0),this._logSlowResolvingAsync(M),M}this._activeBuffer.x===P&&this._activeBuffer.y===z||this._onCursorMove.fire(),this._onRequestRefreshRows.fire(this._dirtyRowTracker.start,this._dirtyRowTracker.end)}print(L,R,M){let P,z;const j=this._charsetService.charset,de=this._optionsService.rawOptions.screenReaderMode,X=this._bufferService.cols,ae=this._coreService.decPrivateModes.wraparound,I=this._coreService.modes.insertMode,x=this._curAttrData;let H=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._activeBuffer.x&&M-R>0&&H.getWidth(this._activeBuffer.x-1)===2&&H.setCellFromCodePoint(this._activeBuffer.x-1,0,1,x.fg,x.bg,x.extended);for(let $=R;$<M;++$){if(P=L[$],z=this._unicodeService.wcwidth(P),P<127&&j){const ee=j[String.fromCharCode(P)];ee&&(P=ee.charCodeAt(0))}if(de&&this._onA11yChar.fire((0,m.stringFromCodePoint)(P)),this._getCurrentLinkId()&&this._oscLinkService.addLineToLink(this._getCurrentLinkId(),this._activeBuffer.ybase+this._activeBuffer.y),z||!this._activeBuffer.x){if(this._activeBuffer.x+z-1>=X){if(ae){for(;this._activeBuffer.x<X;)H.setCellFromCodePoint(this._activeBuffer.x++,0,1,x.fg,x.bg,x.extended);this._activeBuffer.x=0,this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData(),!0)):(this._activeBuffer.y>=this._bufferService.rows&&(this._activeBuffer.y=this._bufferService.rows-1),this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!0),H=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y)}else if(this._activeBuffer.x=X-1,z===2)continue}if(I&&(H.insertCells(this._activeBuffer.x,z,this._activeBuffer.getNullCell(x),x),H.getWidth(X-1)===2&&H.setCellFromCodePoint(X-1,p.NULL_CELL_CODE,p.NULL_CELL_WIDTH,x.fg,x.bg,x.extended)),H.setCellFromCodePoint(this._activeBuffer.x++,P,z,x.fg,x.bg,x.extended),z>0)for(;--z;)H.setCellFromCodePoint(this._activeBuffer.x++,0,0,x.fg,x.bg,x.extended)}else H.getWidth(this._activeBuffer.x-1)?H.addCodepointToCell(this._activeBuffer.x-1,P):H.addCodepointToCell(this._activeBuffer.x-2,P)}M-R>0&&(H.loadCell(this._activeBuffer.x-1,this._workCell),this._workCell.getWidth()===2||this._workCell.getCode()>65535?this._parser.precedingCodepoint=0:this._workCell.isCombined()?this._parser.precedingCodepoint=this._workCell.getChars().charCodeAt(0):this._parser.precedingCodepoint=this._workCell.content),this._activeBuffer.x<X&&M-R>0&&H.getWidth(this._activeBuffer.x)===0&&!H.hasContent(this._activeBuffer.x)&&H.setCellFromCodePoint(this._activeBuffer.x,0,1,x.fg,x.bg,x.extended),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}registerCsiHandler(L,R){return L.final!=="t"||L.prefix||L.intermediates?this._parser.registerCsiHandler(L,R):this._parser.registerCsiHandler(L,M=>!O(M.params[0],this._optionsService.rawOptions.windowOptions)||R(M))}registerDcsHandler(L,R){return this._parser.registerDcsHandler(L,new C.DcsHandler(R))}registerEscHandler(L,R){return this._parser.registerEscHandler(L,R)}registerOscHandler(L,R){return this._parser.registerOscHandler(L,new E.OscHandler(R))}bell(){return this._onRequestBell.fire(),!0}lineFeed(){return this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._optionsService.rawOptions.convertEol&&(this._activeBuffer.x=0),this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData())):this._activeBuffer.y>=this._bufferService.rows?this._activeBuffer.y=this._bufferService.rows-1:this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!1,this._activeBuffer.x>=this._bufferService.cols&&this._activeBuffer.x--,this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._onLineFeed.fire(),!0}carriageReturn(){return this._activeBuffer.x=0,!0}backspace(){var L;if(!this._coreService.decPrivateModes.reverseWraparound)return this._restrictCursor(),this._activeBuffer.x>0&&this._activeBuffer.x--,!0;if(this._restrictCursor(this._bufferService.cols),this._activeBuffer.x>0)this._activeBuffer.x--;else if(this._activeBuffer.x===0&&this._activeBuffer.y>this._activeBuffer.scrollTop&&this._activeBuffer.y<=this._activeBuffer.scrollBottom&&(!((L=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y))===null||L===void 0)&&L.isWrapped)){this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!1,this._activeBuffer.y--,this._activeBuffer.x=this._bufferService.cols-1;const R=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);R.hasWidth(this._activeBuffer.x)&&!R.hasContent(this._activeBuffer.x)&&this._activeBuffer.x--}return this._restrictCursor(),!0}tab(){if(this._activeBuffer.x>=this._bufferService.cols)return!0;const L=this._activeBuffer.x;return this._activeBuffer.x=this._activeBuffer.nextStop(),this._optionsService.rawOptions.screenReaderMode&&this._onA11yTab.fire(this._activeBuffer.x-L),!0}shiftOut(){return this._charsetService.setgLevel(1),!0}shiftIn(){return this._charsetService.setgLevel(0),!0}_restrictCursor(L=this._bufferService.cols-1){this._activeBuffer.x=Math.min(L,Math.max(0,this._activeBuffer.x)),this._activeBuffer.y=this._coreService.decPrivateModes.origin?Math.min(this._activeBuffer.scrollBottom,Math.max(this._activeBuffer.scrollTop,this._activeBuffer.y)):Math.min(this._bufferService.rows-1,Math.max(0,this._activeBuffer.y)),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}_setCursor(L,R){this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._coreService.decPrivateModes.origin?(this._activeBuffer.x=L,this._activeBuffer.y=this._activeBuffer.scrollTop+R):(this._activeBuffer.x=L,this._activeBuffer.y=R),this._restrictCursor(),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}_moveCursor(L,R){this._restrictCursor(),this._setCursor(this._activeBuffer.x+L,this._activeBuffer.y+R)}cursorUp(L){const R=this._activeBuffer.y-this._activeBuffer.scrollTop;return R>=0?this._moveCursor(0,-Math.min(R,L.params[0]||1)):this._moveCursor(0,-(L.params[0]||1)),!0}cursorDown(L){const R=this._activeBuffer.scrollBottom-this._activeBuffer.y;return R>=0?this._moveCursor(0,Math.min(R,L.params[0]||1)):this._moveCursor(0,L.params[0]||1),!0}cursorForward(L){return this._moveCursor(L.params[0]||1,0),!0}cursorBackward(L){return this._moveCursor(-(L.params[0]||1),0),!0}cursorNextLine(L){return this.cursorDown(L),this._activeBuffer.x=0,!0}cursorPrecedingLine(L){return this.cursorUp(L),this._activeBuffer.x=0,!0}cursorCharAbsolute(L){return this._setCursor((L.params[0]||1)-1,this._activeBuffer.y),!0}cursorPosition(L){return this._setCursor(L.length>=2?(L.params[1]||1)-1:0,(L.params[0]||1)-1),!0}charPosAbsolute(L){return this._setCursor((L.params[0]||1)-1,this._activeBuffer.y),!0}hPositionRelative(L){return this._moveCursor(L.params[0]||1,0),!0}linePosAbsolute(L){return this._setCursor(this._activeBuffer.x,(L.params[0]||1)-1),!0}vPositionRelative(L){return this._moveCursor(0,L.params[0]||1),!0}hVPosition(L){return this.cursorPosition(L),!0}tabClear(L){const R=L.params[0];return R===0?delete this._activeBuffer.tabs[this._activeBuffer.x]:R===3&&(this._activeBuffer.tabs={}),!0}cursorForwardTab(L){if(this._activeBuffer.x>=this._bufferService.cols)return!0;let R=L.params[0]||1;for(;R--;)this._activeBuffer.x=this._activeBuffer.nextStop();return!0}cursorBackwardTab(L){if(this._activeBuffer.x>=this._bufferService.cols)return!0;let R=L.params[0]||1;for(;R--;)this._activeBuffer.x=this._activeBuffer.prevStop();return!0}selectProtected(L){const R=L.params[0];return R===1&&(this._curAttrData.bg|=536870912),R!==2&&R!==0||(this._curAttrData.bg&=-536870913),!0}_eraseInBufferLine(L,R,M,P=!1,z=!1){const j=this._activeBuffer.lines.get(this._activeBuffer.ybase+L);j.replaceCells(R,M,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData(),z),P&&(j.isWrapped=!1)}_resetBufferLine(L,R=!1){const M=this._activeBuffer.lines.get(this._activeBuffer.ybase+L);M&&(M.fill(this._activeBuffer.getNullCell(this._eraseAttrData()),R),this._bufferService.buffer.clearMarkers(this._activeBuffer.ybase+L),M.isWrapped=!1)}eraseInDisplay(L,R=!1){let M;switch(this._restrictCursor(this._bufferService.cols),L.params[0]){case 0:for(M=this._activeBuffer.y,this._dirtyRowTracker.markDirty(M),this._eraseInBufferLine(M++,this._activeBuffer.x,this._bufferService.cols,this._activeBuffer.x===0,R);M<this._bufferService.rows;M++)this._resetBufferLine(M,R);this._dirtyRowTracker.markDirty(M);break;case 1:for(M=this._activeBuffer.y,this._dirtyRowTracker.markDirty(M),this._eraseInBufferLine(M,0,this._activeBuffer.x+1,!0,R),this._activeBuffer.x+1>=this._bufferService.cols&&(this._activeBuffer.lines.get(M+1).isWrapped=!1);M--;)this._resetBufferLine(M,R);this._dirtyRowTracker.markDirty(0);break;case 2:for(M=this._bufferService.rows,this._dirtyRowTracker.markDirty(M-1);M--;)this._resetBufferLine(M,R);this._dirtyRowTracker.markDirty(0);break;case 3:const P=this._activeBuffer.lines.length-this._bufferService.rows;P>0&&(this._activeBuffer.lines.trimStart(P),this._activeBuffer.ybase=Math.max(this._activeBuffer.ybase-P,0),this._activeBuffer.ydisp=Math.max(this._activeBuffer.ydisp-P,0),this._onScroll.fire(0))}return!0}eraseInLine(L,R=!1){switch(this._restrictCursor(this._bufferService.cols),L.params[0]){case 0:this._eraseInBufferLine(this._activeBuffer.y,this._activeBuffer.x,this._bufferService.cols,this._activeBuffer.x===0,R);break;case 1:this._eraseInBufferLine(this._activeBuffer.y,0,this._activeBuffer.x+1,!1,R);break;case 2:this._eraseInBufferLine(this._activeBuffer.y,0,this._bufferService.cols,!0,R)}return this._dirtyRowTracker.markDirty(this._activeBuffer.y),!0}insertLines(L){this._restrictCursor();let R=L.params[0]||1;if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const M=this._activeBuffer.ybase+this._activeBuffer.y,P=this._bufferService.rows-1-this._activeBuffer.scrollBottom,z=this._bufferService.rows-1+this._activeBuffer.ybase-P+1;for(;R--;)this._activeBuffer.lines.splice(z-1,1),this._activeBuffer.lines.splice(M,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.y,this._activeBuffer.scrollBottom),this._activeBuffer.x=0,!0}deleteLines(L){this._restrictCursor();let R=L.params[0]||1;if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const M=this._activeBuffer.ybase+this._activeBuffer.y;let P;for(P=this._bufferService.rows-1-this._activeBuffer.scrollBottom,P=this._bufferService.rows-1+this._activeBuffer.ybase-P;R--;)this._activeBuffer.lines.splice(M,1),this._activeBuffer.lines.splice(P,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.y,this._activeBuffer.scrollBottom),this._activeBuffer.x=0,!0}insertChars(L){this._restrictCursor();const R=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return R&&(R.insertCells(this._activeBuffer.x,L.params[0]||1,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}deleteChars(L){this._restrictCursor();const R=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return R&&(R.deleteCells(this._activeBuffer.x,L.params[0]||1,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}scrollUp(L){let R=L.params[0]||1;for(;R--;)this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollTop,1),this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollBottom,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollDown(L){let R=L.params[0]||1;for(;R--;)this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollBottom,1),this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollTop,0,this._activeBuffer.getBlankLine(l.DEFAULT_ATTR_DATA));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollLeft(L){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const R=L.params[0]||1;for(let M=this._activeBuffer.scrollTop;M<=this._activeBuffer.scrollBottom;++M){const P=this._activeBuffer.lines.get(this._activeBuffer.ybase+M);P.deleteCells(0,R,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),P.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollRight(L){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const R=L.params[0]||1;for(let M=this._activeBuffer.scrollTop;M<=this._activeBuffer.scrollBottom;++M){const P=this._activeBuffer.lines.get(this._activeBuffer.ybase+M);P.insertCells(0,R,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),P.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}insertColumns(L){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const R=L.params[0]||1;for(let M=this._activeBuffer.scrollTop;M<=this._activeBuffer.scrollBottom;++M){const P=this._activeBuffer.lines.get(this._activeBuffer.ybase+M);P.insertCells(this._activeBuffer.x,R,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),P.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}deleteColumns(L){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const R=L.params[0]||1;for(let M=this._activeBuffer.scrollTop;M<=this._activeBuffer.scrollBottom;++M){const P=this._activeBuffer.lines.get(this._activeBuffer.ybase+M);P.deleteCells(this._activeBuffer.x,R,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),P.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}eraseChars(L){this._restrictCursor();const R=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return R&&(R.replaceCells(this._activeBuffer.x,this._activeBuffer.x+(L.params[0]||1),this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}repeatPrecedingCharacter(L){if(!this._parser.precedingCodepoint)return!0;const R=L.params[0]||1,M=new Uint32Array(R);for(let P=0;P<R;++P)M[P]=this._parser.precedingCodepoint;return this.print(M,0,M.length),!0}sendDeviceAttributesPrimary(L){return L.params[0]>0||(this._is("xterm")||this._is("rxvt-unicode")||this._is("screen")?this._coreService.triggerDataEvent(f.C0.ESC+"[?1;2c"):this._is("linux")&&this._coreService.triggerDataEvent(f.C0.ESC+"[?6c")),!0}sendDeviceAttributesSecondary(L){return L.params[0]>0||(this._is("xterm")?this._coreService.triggerDataEvent(f.C0.ESC+"[>0;276;0c"):this._is("rxvt-unicode")?this._coreService.triggerDataEvent(f.C0.ESC+"[>85;95;0c"):this._is("linux")?this._coreService.triggerDataEvent(L.params[0]+"c"):this._is("screen")&&this._coreService.triggerDataEvent(f.C0.ESC+"[>83;40003;0c")),!0}_is(L){return(this._optionsService.rawOptions.termName+"").indexOf(L)===0}setMode(L){for(let R=0;R<L.length;R++)switch(L.params[R]){case 4:this._coreService.modes.insertMode=!0;break;case 20:this._optionsService.options.convertEol=!0}return!0}setModePrivate(L){for(let R=0;R<L.length;R++)switch(L.params[R]){case 1:this._coreService.decPrivateModes.applicationCursorKeys=!0;break;case 2:this._charsetService.setgCharset(0,b.DEFAULT_CHARSET),this._charsetService.setgCharset(1,b.DEFAULT_CHARSET),this._charsetService.setgCharset(2,b.DEFAULT_CHARSET),this._charsetService.setgCharset(3,b.DEFAULT_CHARSET);break;case 3:this._optionsService.rawOptions.windowOptions.setWinLines&&(this._bufferService.resize(132,this._bufferService.rows),this._onRequestReset.fire());break;case 6:this._coreService.decPrivateModes.origin=!0,this._setCursor(0,0);break;case 7:this._coreService.decPrivateModes.wraparound=!0;break;case 12:this._optionsService.options.cursorBlink=!0;break;case 45:this._coreService.decPrivateModes.reverseWraparound=!0;break;case 66:this._logService.debug("Serial port requested application keypad."),this._coreService.decPrivateModes.applicationKeypad=!0,this._onRequestSyncScrollBar.fire();break;case 9:this._coreMouseService.activeProtocol="X10";break;case 1e3:this._coreMouseService.activeProtocol="VT200";break;case 1002:this._coreMouseService.activeProtocol="DRAG";break;case 1003:this._coreMouseService.activeProtocol="ANY";break;case 1004:this._coreService.decPrivateModes.sendFocus=!0,this._onRequestSendFocus.fire();break;case 1005:this._logService.debug("DECSET 1005 not supported (see #2507)");break;case 1006:this._coreMouseService.activeEncoding="SGR";break;case 1015:this._logService.debug("DECSET 1015 not supported (see #2507)");break;case 1016:this._coreMouseService.activeEncoding="SGR_PIXELS";break;case 25:this._coreService.isCursorHidden=!1;break;case 1048:this.saveCursor();break;case 1049:this.saveCursor();case 47:case 1047:this._bufferService.buffers.activateAltBuffer(this._eraseAttrData()),this._coreService.isCursorInitialized=!0,this._onRequestRefreshRows.fire(0,this._bufferService.rows-1),this._onRequestSyncScrollBar.fire();break;case 2004:this._coreService.decPrivateModes.bracketedPasteMode=!0}return!0}resetMode(L){for(let R=0;R<L.length;R++)switch(L.params[R]){case 4:this._coreService.modes.insertMode=!1;break;case 20:this._optionsService.options.convertEol=!1}return!0}resetModePrivate(L){for(let R=0;R<L.length;R++)switch(L.params[R]){case 1:this._coreService.decPrivateModes.applicationCursorKeys=!1;break;case 3:this._optionsService.rawOptions.windowOptions.setWinLines&&(this._bufferService.resize(80,this._bufferService.rows),this._onRequestReset.fire());break;case 6:this._coreService.decPrivateModes.origin=!1,this._setCursor(0,0);break;case 7:this._coreService.decPrivateModes.wraparound=!1;break;case 12:this._optionsService.options.cursorBlink=!1;break;case 45:this._coreService.decPrivateModes.reverseWraparound=!1;break;case 66:this._logService.debug("Switching back to normal keypad."),this._coreService.decPrivateModes.applicationKeypad=!1,this._onRequestSyncScrollBar.fire();break;case 9:case 1e3:case 1002:case 1003:this._coreMouseService.activeProtocol="NONE";break;case 1004:this._coreService.decPrivateModes.sendFocus=!1;break;case 1005:this._logService.debug("DECRST 1005 not supported (see #2507)");break;case 1006:case 1016:this._coreMouseService.activeEncoding="DEFAULT";break;case 1015:this._logService.debug("DECRST 1015 not supported (see #2507)");break;case 25:this._coreService.isCursorHidden=!0;break;case 1048:this.restoreCursor();break;case 1049:case 47:case 1047:this._bufferService.buffers.activateNormalBuffer(),L.params[R]===1049&&this.restoreCursor(),this._coreService.isCursorInitialized=!0,this._onRequestRefreshRows.fire(0,this._bufferService.rows-1),this._onRequestSyncScrollBar.fire();break;case 2004:this._coreService.decPrivateModes.bracketedPasteMode=!1}return!0}requestMode(L,R){const M=this._coreService.decPrivateModes,{activeProtocol:P,activeEncoding:z}=this._coreMouseService,j=this._coreService,{buffers:de,cols:X}=this._bufferService,{active:ae,alt:I}=de,x=this._optionsService.rawOptions,H=te=>te?1:2,$=L.params[0];return ee=$,Se=R?$===2?4:$===4?H(j.modes.insertMode):$===12?3:$===20?H(x.convertEol):0:$===1?H(M.applicationCursorKeys):$===3?x.windowOptions.setWinLines?X===80?2:X===132?1:0:0:$===6?H(M.origin):$===7?H(M.wraparound):$===8?3:$===9?H(P==="X10"):$===12?H(x.cursorBlink):$===25?H(!j.isCursorHidden):$===45?H(M.reverseWraparound):$===66?H(M.applicationKeypad):$===67?4:$===1e3?H(P==="VT200"):$===1002?H(P==="DRAG"):$===1003?H(P==="ANY"):$===1004?H(M.sendFocus):$===1005?4:$===1006?H(z==="SGR"):$===1015?4:$===1016?H(z==="SGR_PIXELS"):$===1048?1:$===47||$===1047||$===1049?H(ae===I):$===2004?H(M.bracketedPasteMode):0,j.triggerDataEvent(`${f.C0.ESC}[${R?"":"?"}${ee};${Se}$y`),!0;var ee,Se}_updateAttrColor(L,R,M,P,z){return R===2?(L|=50331648,L&=-16777216,L|=g.AttributeData.fromColorRGB([M,P,z])):R===5&&(L&=-50331904,L|=33554432|255&M),L}_extractColor(L,R,M){const P=[0,0,-1,0,0,0];let z=0,j=0;do{if(P[j+z]=L.params[R+j],L.hasSubParams(R+j)){const de=L.getSubParams(R+j);let X=0;do P[1]===5&&(z=1),P[j+X+1+z]=de[X];while(++X<de.length&&X+j+1+z<P.length);break}if(P[1]===5&&j+z>=2||P[1]===2&&j+z>=5)break;P[1]&&(z=1)}while(++j+R<L.length&&j+z<P.length);for(let de=2;de<P.length;++de)P[de]===-1&&(P[de]=0);switch(P[0]){case 38:M.fg=this._updateAttrColor(M.fg,P[1],P[3],P[4],P[5]);break;case 48:M.bg=this._updateAttrColor(M.bg,P[1],P[3],P[4],P[5]);break;case 58:M.extended=M.extended.clone(),M.extended.underlineColor=this._updateAttrColor(M.extended.underlineColor,P[1],P[3],P[4],P[5])}return j}_processUnderline(L,R){R.extended=R.extended.clone(),(!~L||L>5)&&(L=1),R.extended.underlineStyle=L,R.fg|=268435456,L===0&&(R.fg&=-268435457),R.updateExtended()}_processSGR0(L){L.fg=l.DEFAULT_ATTR_DATA.fg,L.bg=l.DEFAULT_ATTR_DATA.bg,L.extended=L.extended.clone(),L.extended.underlineStyle=0,L.extended.underlineColor&=-67108864,L.updateExtended()}charAttributes(L){if(L.length===1&&L.params[0]===0)return this._processSGR0(this._curAttrData),!0;const R=L.length;let M;const P=this._curAttrData;for(let z=0;z<R;z++)M=L.params[z],M>=30&&M<=37?(P.fg&=-50331904,P.fg|=16777216|M-30):M>=40&&M<=47?(P.bg&=-50331904,P.bg|=16777216|M-40):M>=90&&M<=97?(P.fg&=-50331904,P.fg|=16777224|M-90):M>=100&&M<=107?(P.bg&=-50331904,P.bg|=16777224|M-100):M===0?this._processSGR0(P):M===1?P.fg|=134217728:M===3?P.bg|=67108864:M===4?(P.fg|=268435456,this._processUnderline(L.hasSubParams(z)?L.getSubParams(z)[0]:1,P)):M===5?P.fg|=536870912:M===7?P.fg|=67108864:M===8?P.fg|=1073741824:M===9?P.fg|=2147483648:M===2?P.bg|=134217728:M===21?this._processUnderline(2,P):M===22?(P.fg&=-134217729,P.bg&=-134217729):M===23?P.bg&=-67108865:M===24?(P.fg&=-268435457,this._processUnderline(0,P)):M===25?P.fg&=-536870913:M===27?P.fg&=-67108865:M===28?P.fg&=-1073741825:M===29?P.fg&=2147483647:M===39?(P.fg&=-67108864,P.fg|=16777215&l.DEFAULT_ATTR_DATA.fg):M===49?(P.bg&=-67108864,P.bg|=16777215&l.DEFAULT_ATTR_DATA.bg):M===38||M===48||M===58?z+=this._extractColor(L,z,P):M===53?P.bg|=1073741824:M===55?P.bg&=-1073741825:M===59?(P.extended=P.extended.clone(),P.extended.underlineColor=-1,P.updateExtended()):M===100?(P.fg&=-67108864,P.fg|=16777215&l.DEFAULT_ATTR_DATA.fg,P.bg&=-67108864,P.bg|=16777215&l.DEFAULT_ATTR_DATA.bg):this._logService.debug("Unknown SGR attribute: %d.",M);return!0}deviceStatus(L){switch(L.params[0]){case 5:this._coreService.triggerDataEvent(`${f.C0.ESC}[0n`);break;case 6:const R=this._activeBuffer.y+1,M=this._activeBuffer.x+1;this._coreService.triggerDataEvent(`${f.C0.ESC}[${R};${M}R`)}return!0}deviceStatusPrivate(L){if(L.params[0]===6){const R=this._activeBuffer.y+1,M=this._activeBuffer.x+1;this._coreService.triggerDataEvent(`${f.C0.ESC}[?${R};${M}R`)}return!0}softReset(L){return this._coreService.isCursorHidden=!1,this._onRequestSyncScrollBar.fire(),this._activeBuffer.scrollTop=0,this._activeBuffer.scrollBottom=this._bufferService.rows-1,this._curAttrData=l.DEFAULT_ATTR_DATA.clone(),this._coreService.reset(),this._charsetService.reset(),this._activeBuffer.savedX=0,this._activeBuffer.savedY=this._activeBuffer.ybase,this._activeBuffer.savedCurAttrData.fg=this._curAttrData.fg,this._activeBuffer.savedCurAttrData.bg=this._curAttrData.bg,this._activeBuffer.savedCharset=this._charsetService.charset,this._coreService.decPrivateModes.origin=!1,!0}setCursorStyle(L){const R=L.params[0]||1;switch(R){case 1:case 2:this._optionsService.options.cursorStyle="block";break;case 3:case 4:this._optionsService.options.cursorStyle="underline";break;case 5:case 6:this._optionsService.options.cursorStyle="bar"}const M=R%2==1;return this._optionsService.options.cursorBlink=M,!0}setScrollRegion(L){const R=L.params[0]||1;let M;return(L.length<2||(M=L.params[1])>this._bufferService.rows||M===0)&&(M=this._bufferService.rows),M>R&&(this._activeBuffer.scrollTop=R-1,this._activeBuffer.scrollBottom=M-1,this._setCursor(0,0)),!0}windowOptions(L){if(!O(L.params[0],this._optionsService.rawOptions.windowOptions))return!0;const R=L.length>1?L.params[1]:0;switch(L.params[0]){case 14:R!==2&&this._onRequestWindowsOptionsReport.fire(A.GET_WIN_SIZE_PIXELS);break;case 16:this._onRequestWindowsOptionsReport.fire(A.GET_CELL_SIZE_PIXELS);break;case 18:this._bufferService&&this._coreService.triggerDataEvent(`${f.C0.ESC}[8;${this._bufferService.rows};${this._bufferService.cols}t`);break;case 22:R!==0&&R!==2||(this._windowTitleStack.push(this._windowTitle),this._windowTitleStack.length>10&&this._windowTitleStack.shift()),R!==0&&R!==1||(this._iconNameStack.push(this._iconName),this._iconNameStack.length>10&&this._iconNameStack.shift());break;case 23:R!==0&&R!==2||this._windowTitleStack.length&&this.setTitle(this._windowTitleStack.pop()),R!==0&&R!==1||this._iconNameStack.length&&this.setIconName(this._iconNameStack.pop())}return!0}saveCursor(L){return this._activeBuffer.savedX=this._activeBuffer.x,this._activeBuffer.savedY=this._activeBuffer.ybase+this._activeBuffer.y,this._activeBuffer.savedCurAttrData.fg=this._curAttrData.fg,this._activeBuffer.savedCurAttrData.bg=this._curAttrData.bg,this._activeBuffer.savedCharset=this._charsetService.charset,!0}restoreCursor(L){return this._activeBuffer.x=this._activeBuffer.savedX||0,this._activeBuffer.y=Math.max(this._activeBuffer.savedY-this._activeBuffer.ybase,0),this._curAttrData.fg=this._activeBuffer.savedCurAttrData.fg,this._curAttrData.bg=this._activeBuffer.savedCurAttrData.bg,this._charsetService.charset=this._savedCharset,this._activeBuffer.savedCharset&&(this._charsetService.charset=this._activeBuffer.savedCharset),this._restrictCursor(),!0}setTitle(L){return this._windowTitle=L,this._onTitleChange.fire(L),!0}setIconName(L){return this._iconName=L,!0}setOrReportIndexedColor(L){const R=[],M=L.split(";");for(;M.length>1;){const P=M.shift(),z=M.shift();if(/^\d+$/.exec(P)){const j=parseInt(P);if(0<=j&&j<256)if(z==="?")R.push({type:0,index:j});else{const de=(0,S.parseColor)(z);de&&R.push({type:1,index:j,color:de})}}}return R.length&&this._onColor.fire(R),!0}setHyperlink(L){const R=L.split(";");return!(R.length<2)&&(R[1]?this._createHyperlink(R[0],R[1]):!R[0]&&this._finishHyperlink())}_createHyperlink(L,R){this._getCurrentLinkId()&&this._finishHyperlink();const M=L.split(":");let P;const z=M.findIndex(j=>j.startsWith("id="));return z!==-1&&(P=M[z].slice(3)||void 0),this._curAttrData.extended=this._curAttrData.extended.clone(),this._curAttrData.extended.urlId=this._oscLinkService.registerLink({id:P,uri:R}),this._curAttrData.updateExtended(),!0}_finishHyperlink(){return this._curAttrData.extended=this._curAttrData.extended.clone(),this._curAttrData.extended.urlId=0,this._curAttrData.updateExtended(),!0}_setOrReportSpecialColor(L,R){const M=L.split(";");for(let P=0;P<M.length&&!(R>=this._specialColors.length);++P,++R)if(M[P]==="?")this._onColor.fire([{type:0,index:this._specialColors[R]}]);else{const z=(0,S.parseColor)(M[P]);z&&this._onColor.fire([{type:1,index:this._specialColors[R],color:z}])}return!0}setOrReportFgColor(L){return this._setOrReportSpecialColor(L,0)}setOrReportBgColor(L){return this._setOrReportSpecialColor(L,1)}setOrReportCursorColor(L){return this._setOrReportSpecialColor(L,2)}restoreIndexedColor(L){if(!L)return this._onColor.fire([{type:2}]),!0;const R=[],M=L.split(";");for(let P=0;P<M.length;++P)if(/^\d+$/.exec(M[P])){const z=parseInt(M[P]);0<=z&&z<256&&R.push({type:2,index:z})}return R.length&&this._onColor.fire(R),!0}restoreFgColor(L){return this._onColor.fire([{type:2,index:256}]),!0}restoreBgColor(L){return this._onColor.fire([{type:2,index:257}]),!0}restoreCursorColor(L){return this._onColor.fire([{type:2,index:258}]),!0}nextLine(){return this._activeBuffer.x=0,this.index(),!0}keypadApplicationMode(){return this._logService.debug("Serial port requested application keypad."),this._coreService.decPrivateModes.applicationKeypad=!0,this._onRequestSyncScrollBar.fire(),!0}keypadNumericMode(){return this._logService.debug("Switching back to normal keypad."),this._coreService.decPrivateModes.applicationKeypad=!1,this._onRequestSyncScrollBar.fire(),!0}selectDefaultCharset(){return this._charsetService.setgLevel(0),this._charsetService.setgCharset(0,b.DEFAULT_CHARSET),!0}selectCharset(L){return L.length!==2?(this.selectDefaultCharset(),!0):(L[0]==="/"||this._charsetService.setgCharset(k[L[0]],b.CHARSETS[L[1]]||b.DEFAULT_CHARSET),!0)}index(){return this._restrictCursor(),this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData())):this._activeBuffer.y>=this._bufferService.rows&&(this._activeBuffer.y=this._bufferService.rows-1),this._restrictCursor(),!0}tabSet(){return this._activeBuffer.tabs[this._activeBuffer.x]=!0,!0}reverseIndex(){if(this._restrictCursor(),this._activeBuffer.y===this._activeBuffer.scrollTop){const L=this._activeBuffer.scrollBottom-this._activeBuffer.scrollTop;this._activeBuffer.lines.shiftElements(this._activeBuffer.ybase+this._activeBuffer.y,L,1),this._activeBuffer.lines.set(this._activeBuffer.ybase+this._activeBuffer.y,this._activeBuffer.getBlankLine(this._eraseAttrData())),this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom)}else this._activeBuffer.y--,this._restrictCursor();return!0}fullReset(){return this._parser.reset(),this._onRequestReset.fire(),!0}reset(){this._curAttrData=l.DEFAULT_ATTR_DATA.clone(),this._eraseAttrDataInternal=l.DEFAULT_ATTR_DATA.clone()}_eraseAttrData(){return this._eraseAttrDataInternal.bg&=-67108864,this._eraseAttrDataInternal.bg|=67108863&this._curAttrData.bg,this._eraseAttrDataInternal}setgLevel(L){return this._charsetService.setgLevel(L),!0}screenAlignmentPattern(){const L=new d.CellData;L.content=4194304|"E".charCodeAt(0),L.fg=this._curAttrData.fg,L.bg=this._curAttrData.bg,this._setCursor(0,0);for(let R=0;R<this._bufferService.rows;++R){const M=this._activeBuffer.ybase+this._activeBuffer.y+R,P=this._activeBuffer.lines.get(M);P&&(P.fill(L),P.isWrapped=!1)}return this._dirtyRowTracker.markAllDirty(),this._setCursor(0,0),!0}requestStatusString(L,R){const M=this._bufferService.buffer,P=this._optionsService.rawOptions;return(z=>(this._coreService.triggerDataEvent(`${f.C0.ESC}${z}${f.C0.ESC}\\`),!0))(L==='"q'?`P1$r${this._curAttrData.isProtected()?1:0}"q`:L==='"p'?'P1$r61;1"p':L==="r"?`P1$r${M.scrollTop+1};${M.scrollBottom+1}r`:L==="m"?"P1$r0m":L===" q"?`P1$r${{block:2,underline:4,bar:6}[P.cursorStyle]-(P.cursorBlink?1:0)} q`:"P0$r")}markRangeDirty(L,R){this._dirtyRowTracker.markRangeDirty(L,R)}}o.InputHandler=B;let G=class{constructor(V){this._bufferService=V,this.clearRange()}clearRange(){this.start=this._bufferService.buffer.y,this.end=this._bufferService.buffer.y}markDirty(V){V<this.start?this.start=V:V>this.end&&(this.end=V)}markRangeDirty(V,L){V>L&&(T=V,V=L,L=T),V<this.start&&(this.start=V),L>this.end&&(this.end=L)}markAllDirty(){this.markRangeDirty(0,this._bufferService.rows-1)}};G=h([u(0,w.IBufferService)],G)},844:(c,o)=>{function a(h){for(const u of h)u.dispose();h.length=0}Object.defineProperty(o,"__esModule",{value:!0}),o.getDisposeArrayDisposable=o.disposeArray=o.toDisposable=o.Disposable=void 0,o.Disposable=class{constructor(){this._disposables=[],this._isDisposed=!1}dispose(){this._isDisposed=!0;for(const h of this._disposables)h.dispose();this._disposables.length=0}register(h){return this._disposables.push(h),h}unregister(h){const u=this._disposables.indexOf(h);u!==-1&&this._disposables.splice(u,1)}},o.toDisposable=function(h){return{dispose:h}},o.disposeArray=a,o.getDisposeArrayDisposable=function(h){return{dispose:()=>a(h)}}},1505:(c,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.FourKeyMap=o.TwoKeyMap=void 0;class a{constructor(){this._data={}}set(u,f,b){this._data[u]||(this._data[u]={}),this._data[u][f]=b}get(u,f){return this._data[u]?this._data[u][f]:void 0}clear(){this._data={}}}o.TwoKeyMap=a,o.FourKeyMap=class{constructor(){this._data=new a}set(h,u,f,b,y){this._data.get(h,u)||this._data.set(h,u,new a),this._data.get(h,u).set(f,b,y)}get(h,u,f,b){var y;return(y=this._data.get(h,u))===null||y===void 0?void 0:y.get(f,b)}clear(){this._data.clear()}}},6114:(c,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.isChromeOS=o.isLinux=o.isWindows=o.isIphone=o.isIpad=o.isMac=o.getSafariVersion=o.isSafari=o.isLegacyEdge=o.isFirefox=o.isNode=void 0,o.isNode=typeof navigator>"u";const a=o.isNode?"node":navigator.userAgent,h=o.isNode?"node":navigator.platform;o.isFirefox=a.includes("Firefox"),o.isLegacyEdge=a.includes("Edge"),o.isSafari=/^((?!chrome|android).)*safari/i.test(a),o.getSafariVersion=function(){if(!o.isSafari)return 0;const u=a.match(/Version\/(\d+)/);return u===null||u.length<2?0:parseInt(u[1])},o.isMac=["Macintosh","MacIntel","MacPPC","Mac68K"].includes(h),o.isIpad=h==="iPad",o.isIphone=h==="iPhone",o.isWindows=["Windows","Win16","Win32","WinCE"].includes(h),o.isLinux=h.indexOf("Linux")>=0,o.isChromeOS=/\bCrOS\b/.test(a)},6106:(c,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.SortedList=void 0;let a=0;o.SortedList=class{constructor(h){this._getKey=h,this._array=[]}clear(){this._array.length=0}insert(h){this._array.length!==0?(a=this._search(this._getKey(h),0,this._array.length-1),this._array.splice(a,0,h)):this._array.push(h)}delete(h){if(this._array.length===0)return!1;const u=this._getKey(h);if(u===void 0||(a=this._search(u,0,this._array.length-1),a===-1)||this._getKey(this._array[a])!==u)return!1;do if(this._array[a]===h)return this._array.splice(a,1),!0;while(++a<this._array.length&&this._getKey(this._array[a])===u);return!1}*getKeyIterator(h){if(this._array.length!==0&&(a=this._search(h,0,this._array.length-1),!(a<0||a>=this._array.length)&&this._getKey(this._array[a])===h))do yield this._array[a];while(++a<this._array.length&&this._getKey(this._array[a])===h)}forEachByKey(h,u){if(this._array.length!==0&&(a=this._search(h,0,this._array.length-1),!(a<0||a>=this._array.length)&&this._getKey(this._array[a])===h))do u(this._array[a]);while(++a<this._array.length&&this._getKey(this._array[a])===h)}values(){return this._array.values()}_search(h,u,f){if(f<u)return u;let b=Math.floor((u+f)/2);const y=this._getKey(this._array[b]);if(y>h)return this._search(h,u,b-1);if(y<h)return this._search(h,b+1,f);for(;b>0&&this._getKey(this._array[b-1])===h;)b--;return b}}},7226:(c,o,a)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.DebouncedIdleTask=o.IdleTaskQueue=o.PriorityTaskQueue=void 0;const h=a(6114);class u{constructor(){this._tasks=[],this._i=0}enqueue(y){this._tasks.push(y),this._start()}flush(){for(;this._i<this._tasks.length;)this._tasks[this._i]()||this._i++;this.clear()}clear(){this._idleCallback&&(this._cancelCallback(this._idleCallback),this._idleCallback=void 0),this._i=0,this._tasks.length=0}_start(){this._idleCallback||(this._idleCallback=this._requestCallback(this._process.bind(this)))}_process(y){this._idleCallback=void 0;let v=0,m=0,l=y.timeRemaining(),_=0;for(;this._i<this._tasks.length;){if(v=Date.now(),this._tasks[this._i]()||this._i++,v=Math.max(1,Date.now()-v),m=Math.max(v,m),_=y.timeRemaining(),1.5*m>_)return l-v<-20&&console.warn(`task queue exceeded allotted deadline by ${Math.abs(Math.round(l-v))}ms`),void this._start();l=_}this.clear()}}class f extends u{_requestCallback(y){return setTimeout(()=>y(this._createDeadline(16)))}_cancelCallback(y){clearTimeout(y)}_createDeadline(y){const v=Date.now()+y;return{timeRemaining:()=>Math.max(0,v-Date.now())}}}o.PriorityTaskQueue=f,o.IdleTaskQueue=!h.isNode&&"requestIdleCallback"in window?class extends u{_requestCallback(b){return requestIdleCallback(b)}_cancelCallback(b){cancelIdleCallback(b)}}:f,o.DebouncedIdleTask=class{constructor(){this._queue=new o.IdleTaskQueue}set(b){this._queue.clear(),this._queue.enqueue(b)}flush(){this._queue.flush()}}},9282:(c,o,a)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.updateWindowsModeWrappedState=void 0;const h=a(643);o.updateWindowsModeWrappedState=function(u){const f=u.buffer.lines.get(u.buffer.ybase+u.buffer.y-1),b=f==null?void 0:f.get(u.cols-1),y=u.buffer.lines.get(u.buffer.ybase+u.buffer.y);y&&b&&(y.isWrapped=b[h.CHAR_DATA_CODE_INDEX]!==h.NULL_CELL_CODE&&b[h.CHAR_DATA_CODE_INDEX]!==h.WHITESPACE_CELL_CODE)}},3734:(c,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.ExtendedAttrs=o.AttributeData=void 0;class a{constructor(){this.fg=0,this.bg=0,this.extended=new h}static toColorRGB(f){return[f>>>16&255,f>>>8&255,255&f]}static fromColorRGB(f){return(255&f[0])<<16|(255&f[1])<<8|255&f[2]}clone(){const f=new a;return f.fg=this.fg,f.bg=this.bg,f.extended=this.extended.clone(),f}isInverse(){return 67108864&this.fg}isBold(){return 134217728&this.fg}isUnderline(){return this.hasExtendedAttrs()&&this.extended.underlineStyle!==0?1:268435456&this.fg}isBlink(){return 536870912&this.fg}isInvisible(){return 1073741824&this.fg}isItalic(){return 67108864&this.bg}isDim(){return 134217728&this.bg}isStrikethrough(){return 2147483648&this.fg}isProtected(){return 536870912&this.bg}isOverline(){return 1073741824&this.bg}getFgColorMode(){return 50331648&this.fg}getBgColorMode(){return 50331648&this.bg}isFgRGB(){return(50331648&this.fg)==50331648}isBgRGB(){return(50331648&this.bg)==50331648}isFgPalette(){return(50331648&this.fg)==16777216||(50331648&this.fg)==33554432}isBgPalette(){return(50331648&this.bg)==16777216||(50331648&this.bg)==33554432}isFgDefault(){return(50331648&this.fg)==0}isBgDefault(){return(50331648&this.bg)==0}isAttributeDefault(){return this.fg===0&&this.bg===0}getFgColor(){switch(50331648&this.fg){case 16777216:case 33554432:return 255&this.fg;case 50331648:return 16777215&this.fg;default:return-1}}getBgColor(){switch(50331648&this.bg){case 16777216:case 33554432:return 255&this.bg;case 50331648:return 16777215&this.bg;default:return-1}}hasExtendedAttrs(){return 268435456&this.bg}updateExtended(){this.extended.isEmpty()?this.bg&=-268435457:this.bg|=268435456}getUnderlineColor(){if(268435456&this.bg&&~this.extended.underlineColor)switch(50331648&this.extended.underlineColor){case 16777216:case 33554432:return 255&this.extended.underlineColor;case 50331648:return 16777215&this.extended.underlineColor;default:return this.getFgColor()}return this.getFgColor()}getUnderlineColorMode(){return 268435456&this.bg&&~this.extended.underlineColor?50331648&this.extended.underlineColor:this.getFgColorMode()}isUnderlineColorRGB(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==50331648:this.isFgRGB()}isUnderlineColorPalette(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==16777216||(50331648&this.extended.underlineColor)==33554432:this.isFgPalette()}isUnderlineColorDefault(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==0:this.isFgDefault()}getUnderlineStyle(){return 268435456&this.fg?268435456&this.bg?this.extended.underlineStyle:1:0}}o.AttributeData=a;class h{constructor(f=0,b=0){this._ext=0,this._urlId=0,this._ext=f,this._urlId=b}get ext(){return this._urlId?-469762049&this._ext|this.underlineStyle<<26:this._ext}set ext(f){this._ext=f}get underlineStyle(){return this._urlId?5:(469762048&this._ext)>>26}set underlineStyle(f){this._ext&=-469762049,this._ext|=f<<26&469762048}get underlineColor(){return 67108863&this._ext}set underlineColor(f){this._ext&=-67108864,this._ext|=67108863&f}get urlId(){return this._urlId}set urlId(f){this._urlId=f}clone(){return new h(this._ext,this._urlId)}isEmpty(){return this.underlineStyle===0&&this._urlId===0}}o.ExtendedAttrs=h},9092:(c,o,a)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.Buffer=o.MAX_BUFFER_SIZE=void 0;const h=a(6349),u=a(8437),f=a(511),b=a(643),y=a(4634),v=a(4863),m=a(7116),l=a(3734),_=a(7226);o.MAX_BUFFER_SIZE=4294967295,o.Buffer=class{constructor(p,d,g){this._hasScrollback=p,this._optionsService=d,this._bufferService=g,this.ydisp=0,this.ybase=0,this.y=0,this.x=0,this.tabs={},this.savedY=0,this.savedX=0,this.savedCurAttrData=u.DEFAULT_ATTR_DATA.clone(),this.savedCharset=m.DEFAULT_CHARSET,this.markers=[],this._nullCell=f.CellData.fromCharData([0,b.NULL_CELL_CHAR,b.NULL_CELL_WIDTH,b.NULL_CELL_CODE]),this._whitespaceCell=f.CellData.fromCharData([0,b.WHITESPACE_CELL_CHAR,b.WHITESPACE_CELL_WIDTH,b.WHITESPACE_CELL_CODE]),this._isClearing=!1,this._memoryCleanupQueue=new _.IdleTaskQueue,this._memoryCleanupPosition=0,this._cols=this._bufferService.cols,this._rows=this._bufferService.rows,this.lines=new h.CircularList(this._getCorrectBufferLength(this._rows)),this.scrollTop=0,this.scrollBottom=this._rows-1,this.setupTabStops()}getNullCell(p){return p?(this._nullCell.fg=p.fg,this._nullCell.bg=p.bg,this._nullCell.extended=p.extended):(this._nullCell.fg=0,this._nullCell.bg=0,this._nullCell.extended=new l.ExtendedAttrs),this._nullCell}getWhitespaceCell(p){return p?(this._whitespaceCell.fg=p.fg,this._whitespaceCell.bg=p.bg,this._whitespaceCell.extended=p.extended):(this._whitespaceCell.fg=0,this._whitespaceCell.bg=0,this._whitespaceCell.extended=new l.ExtendedAttrs),this._whitespaceCell}getBlankLine(p,d){return new u.BufferLine(this._bufferService.cols,this.getNullCell(p),d)}get hasScrollback(){return this._hasScrollback&&this.lines.maxLength>this._rows}get isCursorInViewport(){const p=this.ybase+this.y-this.ydisp;return p>=0&&p<this._rows}_getCorrectBufferLength(p){if(!this._hasScrollback)return p;const d=p+this._optionsService.rawOptions.scrollback;return d>o.MAX_BUFFER_SIZE?o.MAX_BUFFER_SIZE:d}fillViewportRows(p){if(this.lines.length===0){p===void 0&&(p=u.DEFAULT_ATTR_DATA);let d=this._rows;for(;d--;)this.lines.push(this.getBlankLine(p))}}clear(){this.ydisp=0,this.ybase=0,this.y=0,this.x=0,this.lines=new h.CircularList(this._getCorrectBufferLength(this._rows)),this.scrollTop=0,this.scrollBottom=this._rows-1,this.setupTabStops()}resize(p,d){const g=this.getNullCell(u.DEFAULT_ATTR_DATA);let w=0;const E=this._getCorrectBufferLength(d);if(E>this.lines.maxLength&&(this.lines.maxLength=E),this.lines.length>0){if(this._cols<p)for(let S=0;S<this.lines.length;S++)w+=+this.lines.get(S).resize(p,g);let C=0;if(this._rows<d)for(let S=this._rows;S<d;S++)this.lines.length<d+this.ybase&&(this._optionsService.rawOptions.windowsMode||this._optionsService.rawOptions.windowsPty.backend!==void 0||this._optionsService.rawOptions.windowsPty.buildNumber!==void 0?this.lines.push(new u.BufferLine(p,g)):this.ybase>0&&this.lines.length<=this.ybase+this.y+C+1?(this.ybase--,C++,this.ydisp>0&&this.ydisp--):this.lines.push(new u.BufferLine(p,g)));else for(let S=this._rows;S>d;S--)this.lines.length>d+this.ybase&&(this.lines.length>this.ybase+this.y+1?this.lines.pop():(this.ybase++,this.ydisp++));if(E<this.lines.maxLength){const S=this.lines.length-E;S>0&&(this.lines.trimStart(S),this.ybase=Math.max(this.ybase-S,0),this.ydisp=Math.max(this.ydisp-S,0),this.savedY=Math.max(this.savedY-S,0)),this.lines.maxLength=E}this.x=Math.min(this.x,p-1),this.y=Math.min(this.y,d-1),C&&(this.y+=C),this.savedX=Math.min(this.savedX,p-1),this.scrollTop=0}if(this.scrollBottom=d-1,this._isReflowEnabled&&(this._reflow(p,d),this._cols>p))for(let C=0;C<this.lines.length;C++)w+=+this.lines.get(C).resize(p,g);this._cols=p,this._rows=d,this._memoryCleanupQueue.clear(),w>.1*this.lines.length&&(this._memoryCleanupPosition=0,this._memoryCleanupQueue.enqueue(()=>this._batchedMemoryCleanup()))}_batchedMemoryCleanup(){let p=!0;this._memoryCleanupPosition>=this.lines.length&&(this._memoryCleanupPosition=0,p=!1);let d=0;for(;this._memoryCleanupPosition<this.lines.length;)if(d+=this.lines.get(this._memoryCleanupPosition++).cleanupMemory(),d>100)return!0;return p}get _isReflowEnabled(){const p=this._optionsService.rawOptions.windowsPty;return p&&p.buildNumber?this._hasScrollback&&p.backend==="conpty"&&p.buildNumber>=21376:this._hasScrollback&&!this._optionsService.rawOptions.windowsMode}_reflow(p,d){this._cols!==p&&(p>this._cols?this._reflowLarger(p,d):this._reflowSmaller(p,d))}_reflowLarger(p,d){const g=(0,y.reflowLargerGetLinesToRemove)(this.lines,this._cols,p,this.ybase+this.y,this.getNullCell(u.DEFAULT_ATTR_DATA));if(g.length>0){const w=(0,y.reflowLargerCreateNewLayout)(this.lines,g);(0,y.reflowLargerApplyNewLayout)(this.lines,w.layout),this._reflowLargerAdjustViewport(p,d,w.countRemoved)}}_reflowLargerAdjustViewport(p,d,g){const w=this.getNullCell(u.DEFAULT_ATTR_DATA);let E=g;for(;E-- >0;)this.ybase===0?(this.y>0&&this.y--,this.lines.length<d&&this.lines.push(new u.BufferLine(p,w))):(this.ydisp===this.ybase&&this.ydisp--,this.ybase--);this.savedY=Math.max(this.savedY-g,0)}_reflowSmaller(p,d){const g=this.getNullCell(u.DEFAULT_ATTR_DATA),w=[];let E=0;for(let C=this.lines.length-1;C>=0;C--){let S=this.lines.get(C);if(!S||!S.isWrapped&&S.getTrimmedLength()<=p)continue;const k=[S];for(;S.isWrapped&&C>0;)S=this.lines.get(--C),k.unshift(S);const D=this.ybase+this.y;if(D>=C&&D<C+k.length)continue;const O=k[k.length-1].getTrimmedLength(),A=(0,y.reflowSmallerGetNewLineLengths)(k,this._cols,p),T=A.length-k.length;let B;B=this.ybase===0&&this.y!==this.lines.length-1?Math.max(0,this.y-this.lines.maxLength+T):Math.max(0,this.lines.length-this.lines.maxLength+T);const G=[];for(let z=0;z<T;z++){const j=this.getBlankLine(u.DEFAULT_ATTR_DATA,!0);G.push(j)}G.length>0&&(w.push({start:C+k.length+E,newLines:G}),E+=G.length),k.push(...G);let V=A.length-1,L=A[V];L===0&&(V--,L=A[V]);let R=k.length-T-1,M=O;for(;R>=0;){const z=Math.min(M,L);if(k[V]===void 0)break;if(k[V].copyCellsFrom(k[R],M-z,L-z,z,!0),L-=z,L===0&&(V--,L=A[V]),M-=z,M===0){R--;const j=Math.max(R,0);M=(0,y.getWrappedLineTrimmedLength)(k,j,this._cols)}}for(let z=0;z<k.length;z++)A[z]<p&&k[z].setCell(A[z],g);let P=T-B;for(;P-- >0;)this.ybase===0?this.y<d-1?(this.y++,this.lines.pop()):(this.ybase++,this.ydisp++):this.ybase<Math.min(this.lines.maxLength,this.lines.length+E)-d&&(this.ybase===this.ydisp&&this.ydisp++,this.ybase++);this.savedY=Math.min(this.savedY+T,this.ybase+d-1)}if(w.length>0){const C=[],S=[];for(let V=0;V<this.lines.length;V++)S.push(this.lines.get(V));const k=this.lines.length;let D=k-1,O=0,A=w[O];this.lines.length=Math.min(this.lines.maxLength,this.lines.length+E);let T=0;for(let V=Math.min(this.lines.maxLength-1,k+E-1);V>=0;V--)if(A&&A.start>D+T){for(let L=A.newLines.length-1;L>=0;L--)this.lines.set(V--,A.newLines[L]);V++,C.push({index:D+1,amount:A.newLines.length}),T+=A.newLines.length,A=w[++O]}else this.lines.set(V,S[D--]);let B=0;for(let V=C.length-1;V>=0;V--)C[V].index+=B,this.lines.onInsertEmitter.fire(C[V]),B+=C[V].amount;const G=Math.max(0,k+E-this.lines.maxLength);G>0&&this.lines.onTrimEmitter.fire(G)}}translateBufferLineToString(p,d,g=0,w){const E=this.lines.get(p);return E?E.translateToString(d,g,w):""}getWrappedRangeForLine(p){let d=p,g=p;for(;d>0&&this.lines.get(d).isWrapped;)d--;for(;g+1<this.lines.length&&this.lines.get(g+1).isWrapped;)g++;return{first:d,last:g}}setupTabStops(p){for(p!=null?this.tabs[p]||(p=this.prevStop(p)):(this.tabs={},p=0);p<this._cols;p+=this._optionsService.rawOptions.tabStopWidth)this.tabs[p]=!0}prevStop(p){for(p==null&&(p=this.x);!this.tabs[--p]&&p>0;);return p>=this._cols?this._cols-1:p<0?0:p}nextStop(p){for(p==null&&(p=this.x);!this.tabs[++p]&&p<this._cols;);return p>=this._cols?this._cols-1:p<0?0:p}clearMarkers(p){this._isClearing=!0;for(let d=0;d<this.markers.length;d++)this.markers[d].line===p&&(this.markers[d].dispose(),this.markers.splice(d--,1));this._isClearing=!1}clearAllMarkers(){this._isClearing=!0;for(let p=0;p<this.markers.length;p++)this.markers[p].dispose(),this.markers.splice(p--,1);this._isClearing=!1}addMarker(p){const d=new v.Marker(p);return this.markers.push(d),d.register(this.lines.onTrim(g=>{d.line-=g,d.line<0&&d.dispose()})),d.register(this.lines.onInsert(g=>{d.line>=g.index&&(d.line+=g.amount)})),d.register(this.lines.onDelete(g=>{d.line>=g.index&&d.line<g.index+g.amount&&d.dispose(),d.line>g.index&&(d.line-=g.amount)})),d.register(d.onDispose(()=>this._removeMarker(d))),d}_removeMarker(p){this._isClearing||this.markers.splice(this.markers.indexOf(p),1)}}},8437:(c,o,a)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.BufferLine=o.DEFAULT_ATTR_DATA=void 0;const h=a(482),u=a(643),f=a(511),b=a(3734);o.DEFAULT_ATTR_DATA=Object.freeze(new b.AttributeData);let y=0;class v{constructor(l,_,p=!1){this.isWrapped=p,this._combined={},this._extendedAttrs={},this._data=new Uint32Array(3*l);const d=_||f.CellData.fromCharData([0,u.NULL_CELL_CHAR,u.NULL_CELL_WIDTH,u.NULL_CELL_CODE]);for(let g=0;g<l;++g)this.setCell(g,d);this.length=l}get(l){const _=this._data[3*l+0],p=2097151&_;return[this._data[3*l+1],2097152&_?this._combined[l]:p?(0,h.stringFromCodePoint)(p):"",_>>22,2097152&_?this._combined[l].charCodeAt(this._combined[l].length-1):p]}set(l,_){this._data[3*l+1]=_[u.CHAR_DATA_ATTR_INDEX],_[u.CHAR_DATA_CHAR_INDEX].length>1?(this._combined[l]=_[1],this._data[3*l+0]=2097152|l|_[u.CHAR_DATA_WIDTH_INDEX]<<22):this._data[3*l+0]=_[u.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|_[u.CHAR_DATA_WIDTH_INDEX]<<22}getWidth(l){return this._data[3*l+0]>>22}hasWidth(l){return 12582912&this._data[3*l+0]}getFg(l){return this._data[3*l+1]}getBg(l){return this._data[3*l+2]}hasContent(l){return 4194303&this._data[3*l+0]}getCodePoint(l){const _=this._data[3*l+0];return 2097152&_?this._combined[l].charCodeAt(this._combined[l].length-1):2097151&_}isCombined(l){return 2097152&this._data[3*l+0]}getString(l){const _=this._data[3*l+0];return 2097152&_?this._combined[l]:2097151&_?(0,h.stringFromCodePoint)(2097151&_):""}isProtected(l){return 536870912&this._data[3*l+2]}loadCell(l,_){return y=3*l,_.content=this._data[y+0],_.fg=this._data[y+1],_.bg=this._data[y+2],2097152&_.content&&(_.combinedData=this._combined[l]),268435456&_.bg&&(_.extended=this._extendedAttrs[l]),_}setCell(l,_){2097152&_.content&&(this._combined[l]=_.combinedData),268435456&_.bg&&(this._extendedAttrs[l]=_.extended),this._data[3*l+0]=_.content,this._data[3*l+1]=_.fg,this._data[3*l+2]=_.bg}setCellFromCodePoint(l,_,p,d,g,w){268435456&g&&(this._extendedAttrs[l]=w),this._data[3*l+0]=_|p<<22,this._data[3*l+1]=d,this._data[3*l+2]=g}addCodepointToCell(l,_){let p=this._data[3*l+0];2097152&p?this._combined[l]+=(0,h.stringFromCodePoint)(_):(2097151&p?(this._combined[l]=(0,h.stringFromCodePoint)(2097151&p)+(0,h.stringFromCodePoint)(_),p&=-2097152,p|=2097152):p=_|4194304,this._data[3*l+0]=p)}insertCells(l,_,p,d){if((l%=this.length)&&this.getWidth(l-1)===2&&this.setCellFromCodePoint(l-1,0,1,(d==null?void 0:d.fg)||0,(d==null?void 0:d.bg)||0,(d==null?void 0:d.extended)||new b.ExtendedAttrs),_<this.length-l){const g=new f.CellData;for(let w=this.length-l-_-1;w>=0;--w)this.setCell(l+_+w,this.loadCell(l+w,g));for(let w=0;w<_;++w)this.setCell(l+w,p)}else for(let g=l;g<this.length;++g)this.setCell(g,p);this.getWidth(this.length-1)===2&&this.setCellFromCodePoint(this.length-1,0,1,(d==null?void 0:d.fg)||0,(d==null?void 0:d.bg)||0,(d==null?void 0:d.extended)||new b.ExtendedAttrs)}deleteCells(l,_,p,d){if(l%=this.length,_<this.length-l){const g=new f.CellData;for(let w=0;w<this.length-l-_;++w)this.setCell(l+w,this.loadCell(l+_+w,g));for(let w=this.length-_;w<this.length;++w)this.setCell(w,p)}else for(let g=l;g<this.length;++g)this.setCell(g,p);l&&this.getWidth(l-1)===2&&this.setCellFromCodePoint(l-1,0,1,(d==null?void 0:d.fg)||0,(d==null?void 0:d.bg)||0,(d==null?void 0:d.extended)||new b.ExtendedAttrs),this.getWidth(l)!==0||this.hasContent(l)||this.setCellFromCodePoint(l,0,1,(d==null?void 0:d.fg)||0,(d==null?void 0:d.bg)||0,(d==null?void 0:d.extended)||new b.ExtendedAttrs)}replaceCells(l,_,p,d,g=!1){if(g)for(l&&this.getWidth(l-1)===2&&!this.isProtected(l-1)&&this.setCellFromCodePoint(l-1,0,1,(d==null?void 0:d.fg)||0,(d==null?void 0:d.bg)||0,(d==null?void 0:d.extended)||new b.ExtendedAttrs),_<this.length&&this.getWidth(_-1)===2&&!this.isProtected(_)&&this.setCellFromCodePoint(_,0,1,(d==null?void 0:d.fg)||0,(d==null?void 0:d.bg)||0,(d==null?void 0:d.extended)||new b.ExtendedAttrs);l<_&&l<this.length;)this.isProtected(l)||this.setCell(l,p),l++;else for(l&&this.getWidth(l-1)===2&&this.setCellFromCodePoint(l-1,0,1,(d==null?void 0:d.fg)||0,(d==null?void 0:d.bg)||0,(d==null?void 0:d.extended)||new b.ExtendedAttrs),_<this.length&&this.getWidth(_-1)===2&&this.setCellFromCodePoint(_,0,1,(d==null?void 0:d.fg)||0,(d==null?void 0:d.bg)||0,(d==null?void 0:d.extended)||new b.ExtendedAttrs);l<_&&l<this.length;)this.setCell(l++,p)}resize(l,_){if(l===this.length)return 4*this._data.length*2<this._data.buffer.byteLength;const p=3*l;if(l>this.length){if(this._data.buffer.byteLength>=4*p)this._data=new Uint32Array(this._data.buffer,0,p);else{const d=new Uint32Array(p);d.set(this._data),this._data=d}for(let d=this.length;d<l;++d)this.setCell(d,_)}else{this._data=this._data.subarray(0,p);const d=Object.keys(this._combined);for(let w=0;w<d.length;w++){const E=parseInt(d[w],10);E>=l&&delete this._combined[E]}const g=Object.keys(this._extendedAttrs);for(let w=0;w<g.length;w++){const E=parseInt(g[w],10);E>=l&&delete this._extendedAttrs[E]}}return this.length=l,4*p*2<this._data.buffer.byteLength}cleanupMemory(){if(4*this._data.length*2<this._data.buffer.byteLength){const l=new Uint32Array(this._data.length);return l.set(this._data),this._data=l,1}return 0}fill(l,_=!1){if(_)for(let p=0;p<this.length;++p)this.isProtected(p)||this.setCell(p,l);else{this._combined={},this._extendedAttrs={};for(let p=0;p<this.length;++p)this.setCell(p,l)}}copyFrom(l){this.length!==l.length?this._data=new Uint32Array(l._data):this._data.set(l._data),this.length=l.length,this._combined={};for(const _ in l._combined)this._combined[_]=l._combined[_];this._extendedAttrs={};for(const _ in l._extendedAttrs)this._extendedAttrs[_]=l._extendedAttrs[_];this.isWrapped=l.isWrapped}clone(){const l=new v(0);l._data=new Uint32Array(this._data),l.length=this.length;for(const _ in this._combined)l._combined[_]=this._combined[_];for(const _ in this._extendedAttrs)l._extendedAttrs[_]=this._extendedAttrs[_];return l.isWrapped=this.isWrapped,l}getTrimmedLength(){for(let l=this.length-1;l>=0;--l)if(4194303&this._data[3*l+0])return l+(this._data[3*l+0]>>22);return 0}copyCellsFrom(l,_,p,d,g){const w=l._data;if(g)for(let C=d-1;C>=0;C--){for(let S=0;S<3;S++)this._data[3*(p+C)+S]=w[3*(_+C)+S];268435456&w[3*(_+C)+2]&&(this._extendedAttrs[p+C]=l._extendedAttrs[_+C])}else for(let C=0;C<d;C++){for(let S=0;S<3;S++)this._data[3*(p+C)+S]=w[3*(_+C)+S];268435456&w[3*(_+C)+2]&&(this._extendedAttrs[p+C]=l._extendedAttrs[_+C])}const E=Object.keys(l._combined);for(let C=0;C<E.length;C++){const S=parseInt(E[C],10);S>=_&&(this._combined[S-_+p]=l._combined[S])}}translateToString(l=!1,_=0,p=this.length){l&&(p=Math.min(p,this.getTrimmedLength()));let d="";for(;_<p;){const g=this._data[3*_+0],w=2097151&g;d+=2097152&g?this._combined[_]:w?(0,h.stringFromCodePoint)(w):u.WHITESPACE_CELL_CHAR,_+=g>>22||1}return d}}o.BufferLine=v},4841:(c,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.getRangeLength=void 0,o.getRangeLength=function(a,h){if(a.start.y>a.end.y)throw new Error(`Buffer range end (${a.end.x}, ${a.end.y}) cannot be before start (${a.start.x}, ${a.start.y})`);return h*(a.end.y-a.start.y)+(a.end.x-a.start.x+1)}},4634:(c,o)=>{function a(h,u,f){if(u===h.length-1)return h[u].getTrimmedLength();const b=!h[u].hasContent(f-1)&&h[u].getWidth(f-1)===1,y=h[u+1].getWidth(0)===2;return b&&y?f-1:f}Object.defineProperty(o,"__esModule",{value:!0}),o.getWrappedLineTrimmedLength=o.reflowSmallerGetNewLineLengths=o.reflowLargerApplyNewLayout=o.reflowLargerCreateNewLayout=o.reflowLargerGetLinesToRemove=void 0,o.reflowLargerGetLinesToRemove=function(h,u,f,b,y){const v=[];for(let m=0;m<h.length-1;m++){let l=m,_=h.get(++l);if(!_.isWrapped)continue;const p=[h.get(m)];for(;l<h.length&&_.isWrapped;)p.push(_),_=h.get(++l);if(b>=m&&b<l){m+=p.length-1;continue}let d=0,g=a(p,d,u),w=1,E=0;for(;w<p.length;){const S=a(p,w,u),k=S-E,D=f-g,O=Math.min(k,D);p[d].copyCellsFrom(p[w],E,g,O,!1),g+=O,g===f&&(d++,g=0),E+=O,E===S&&(w++,E=0),g===0&&d!==0&&p[d-1].getWidth(f-1)===2&&(p[d].copyCellsFrom(p[d-1],f-1,g++,1,!1),p[d-1].setCell(f-1,y))}p[d].replaceCells(g,f,y);let C=0;for(let S=p.length-1;S>0&&(S>d||p[S].getTrimmedLength()===0);S--)C++;C>0&&(v.push(m+p.length-C),v.push(C)),m+=p.length-1}return v},o.reflowLargerCreateNewLayout=function(h,u){const f=[];let b=0,y=u[b],v=0;for(let m=0;m<h.length;m++)if(y===m){const l=u[++b];h.onDeleteEmitter.fire({index:m-v,amount:l}),m+=l-1,v+=l,y=u[++b]}else f.push(m);return{layout:f,countRemoved:v}},o.reflowLargerApplyNewLayout=function(h,u){const f=[];for(let b=0;b<u.length;b++)f.push(h.get(u[b]));for(let b=0;b<f.length;b++)h.set(b,f[b]);h.length=u.length},o.reflowSmallerGetNewLineLengths=function(h,u,f){const b=[],y=h.map((_,p)=>a(h,p,u)).reduce((_,p)=>_+p);let v=0,m=0,l=0;for(;l<y;){if(y-l<f){b.push(y-l);break}v+=f;const _=a(h,m,u);v>_&&(v-=_,m++);const p=h[m].getWidth(v-1)===2;p&&v--;const d=p?f-1:f;b.push(d),l+=d}return b},o.getWrappedLineTrimmedLength=a},5295:(c,o,a)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.BufferSet=void 0;const h=a(9092),u=a(8460),f=a(844);class b extends f.Disposable{constructor(v,m){super(),this._optionsService=v,this._bufferService=m,this._onBufferActivate=this.register(new u.EventEmitter),this.onBufferActivate=this._onBufferActivate.event,this.reset(),this.register(this._optionsService.onSpecificOptionChange("scrollback",()=>this.resize(this._bufferService.cols,this._bufferService.rows))),this.register(this._optionsService.onSpecificOptionChange("tabStopWidth",()=>this.setupTabStops()))}reset(){this._normal=new h.Buffer(!0,this._optionsService,this._bufferService),this._normal.fillViewportRows(),this._alt=new h.Buffer(!1,this._optionsService,this._bufferService),this._activeBuffer=this._normal,this._onBufferActivate.fire({activeBuffer:this._normal,inactiveBuffer:this._alt}),this.setupTabStops()}get alt(){return this._alt}get active(){return this._activeBuffer}get normal(){return this._normal}activateNormalBuffer(){this._activeBuffer!==this._normal&&(this._normal.x=this._alt.x,this._normal.y=this._alt.y,this._alt.clearAllMarkers(),this._alt.clear(),this._activeBuffer=this._normal,this._onBufferActivate.fire({activeBuffer:this._normal,inactiveBuffer:this._alt}))}activateAltBuffer(v){this._activeBuffer!==this._alt&&(this._alt.fillViewportRows(v),this._alt.x=this._normal.x,this._alt.y=this._normal.y,this._activeBuffer=this._alt,this._onBufferActivate.fire({activeBuffer:this._alt,inactiveBuffer:this._normal}))}resize(v,m){this._normal.resize(v,m),this._alt.resize(v,m),this.setupTabStops(v)}setupTabStops(v){this._normal.setupTabStops(v),this._alt.setupTabStops(v)}}o.BufferSet=b},511:(c,o,a)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.CellData=void 0;const h=a(482),u=a(643),f=a(3734);class b extends f.AttributeData{constructor(){super(...arguments),this.content=0,this.fg=0,this.bg=0,this.extended=new f.ExtendedAttrs,this.combinedData=""}static fromCharData(v){const m=new b;return m.setFromCharData(v),m}isCombined(){return 2097152&this.content}getWidth(){return this.content>>22}getChars(){return 2097152&this.content?this.combinedData:2097151&this.content?(0,h.stringFromCodePoint)(2097151&this.content):""}getCode(){return this.isCombined()?this.combinedData.charCodeAt(this.combinedData.length-1):2097151&this.content}setFromCharData(v){this.fg=v[u.CHAR_DATA_ATTR_INDEX],this.bg=0;let m=!1;if(v[u.CHAR_DATA_CHAR_INDEX].length>2)m=!0;else if(v[u.CHAR_DATA_CHAR_INDEX].length===2){const l=v[u.CHAR_DATA_CHAR_INDEX].charCodeAt(0);if(55296<=l&&l<=56319){const _=v[u.CHAR_DATA_CHAR_INDEX].charCodeAt(1);56320<=_&&_<=57343?this.content=1024*(l-55296)+_-56320+65536|v[u.CHAR_DATA_WIDTH_INDEX]<<22:m=!0}else m=!0}else this.content=v[u.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|v[u.CHAR_DATA_WIDTH_INDEX]<<22;m&&(this.combinedData=v[u.CHAR_DATA_CHAR_INDEX],this.content=2097152|v[u.CHAR_DATA_WIDTH_INDEX]<<22)}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}}o.CellData=b},643:(c,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.WHITESPACE_CELL_CODE=o.WHITESPACE_CELL_WIDTH=o.WHITESPACE_CELL_CHAR=o.NULL_CELL_CODE=o.NULL_CELL_WIDTH=o.NULL_CELL_CHAR=o.CHAR_DATA_CODE_INDEX=o.CHAR_DATA_WIDTH_INDEX=o.CHAR_DATA_CHAR_INDEX=o.CHAR_DATA_ATTR_INDEX=o.DEFAULT_EXT=o.DEFAULT_ATTR=o.DEFAULT_COLOR=void 0,o.DEFAULT_COLOR=0,o.DEFAULT_ATTR=256|o.DEFAULT_COLOR<<9,o.DEFAULT_EXT=0,o.CHAR_DATA_ATTR_INDEX=0,o.CHAR_DATA_CHAR_INDEX=1,o.CHAR_DATA_WIDTH_INDEX=2,o.CHAR_DATA_CODE_INDEX=3,o.NULL_CELL_CHAR="",o.NULL_CELL_WIDTH=1,o.NULL_CELL_CODE=0,o.WHITESPACE_CELL_CHAR=" ",o.WHITESPACE_CELL_WIDTH=1,o.WHITESPACE_CELL_CODE=32},4863:(c,o,a)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.Marker=void 0;const h=a(8460),u=a(844);class f{constructor(y){this.line=y,this.isDisposed=!1,this._disposables=[],this._id=f._nextId++,this._onDispose=this.register(new h.EventEmitter),this.onDispose=this._onDispose.event}get id(){return this._id}dispose(){this.isDisposed||(this.isDisposed=!0,this.line=-1,this._onDispose.fire(),(0,u.disposeArray)(this._disposables),this._disposables.length=0)}register(y){return this._disposables.push(y),y}}o.Marker=f,f._nextId=1},7116:(c,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.DEFAULT_CHARSET=o.CHARSETS=void 0,o.CHARSETS={},o.DEFAULT_CHARSET=o.CHARSETS.B,o.CHARSETS[0]={"`":"◆",a:"▒",b:"␉",c:"␌",d:"␍",e:"␊",f:"°",g:"±",h:"␤",i:"␋",j:"┘",k:"┐",l:"┌",m:"└",n:"┼",o:"⎺",p:"⎻",q:"─",r:"⎼",s:"⎽",t:"├",u:"┤",v:"┴",w:"┬",x:"│",y:"≤",z:"≥","{":"π","|":"≠","}":"£","~":"·"},o.CHARSETS.A={"#":"£"},o.CHARSETS.B=void 0,o.CHARSETS[4]={"#":"£","@":"¾","[":"ij","\\":"½","]":"|","{":"¨","|":"f","}":"¼","~":"´"},o.CHARSETS.C=o.CHARSETS[5]={"[":"Ä","\\":"Ö","]":"Å","^":"Ü","`":"é","{":"ä","|":"ö","}":"å","~":"ü"},o.CHARSETS.R={"#":"£","@":"à","[":"°","\\":"ç","]":"§","{":"é","|":"ù","}":"è","~":"¨"},o.CHARSETS.Q={"@":"à","[":"â","\\":"ç","]":"ê","^":"î","`":"ô","{":"é","|":"ù","}":"è","~":"û"},o.CHARSETS.K={"@":"§","[":"Ä","\\":"Ö","]":"Ü","{":"ä","|":"ö","}":"ü","~":"ß"},o.CHARSETS.Y={"#":"£","@":"§","[":"°","\\":"ç","]":"é","`":"ù","{":"à","|":"ò","}":"è","~":"ì"},o.CHARSETS.E=o.CHARSETS[6]={"@":"Ä","[":"Æ","\\":"Ø","]":"Å","^":"Ü","`":"ä","{":"æ","|":"ø","}":"å","~":"ü"},o.CHARSETS.Z={"#":"£","@":"§","[":"¡","\\":"Ñ","]":"¿","{":"°","|":"ñ","}":"ç"},o.CHARSETS.H=o.CHARSETS[7]={"@":"É","[":"Ä","\\":"Ö","]":"Å","^":"Ü","`":"é","{":"ä","|":"ö","}":"å","~":"ü"},o.CHARSETS["="]={"#":"ù","@":"à","[":"é","\\":"ç","]":"ê","^":"î",_:"è","`":"ô","{":"ä","|":"ö","}":"ü","~":"û"}},2584:(c,o)=>{var a,h;Object.defineProperty(o,"__esModule",{value:!0}),o.C1_ESCAPED=o.C1=o.C0=void 0,function(u){u.NUL="\0",u.SOH="",u.STX="",u.ETX="",u.EOT="",u.ENQ="",u.ACK="",u.BEL="\x07",u.BS="\b",u.HT="	",u.LF=`
`,u.VT="\v",u.FF="\f",u.CR="\r",u.SO="",u.SI="",u.DLE="",u.DC1="",u.DC2="",u.DC3="",u.DC4="",u.NAK="",u.SYN="",u.ETB="",u.CAN="",u.EM="",u.SUB="",u.ESC="\x1B",u.FS="",u.GS="",u.RS="",u.US="",u.SP=" ",u.DEL=""}(a=o.C0||(o.C0={})),(h=o.C1||(o.C1={})).PAD="",h.HOP="",h.BPH="",h.NBH="",h.IND="",h.NEL="",h.SSA="",h.ESA="",h.HTS="",h.HTJ="",h.VTS="",h.PLD="",h.PLU="",h.RI="",h.SS2="",h.SS3="",h.DCS="",h.PU1="",h.PU2="",h.STS="",h.CCH="",h.MW="",h.SPA="",h.EPA="",h.SOS="",h.SGCI="",h.SCI="",h.CSI="",h.ST="",h.OSC="",h.PM="",h.APC="",(o.C1_ESCAPED||(o.C1_ESCAPED={})).ST=`${a.ESC}\\`},7399:(c,o,a)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.evaluateKeyboardEvent=void 0;const h=a(2584),u={48:["0",")"],49:["1","!"],50:["2","@"],51:["3","#"],52:["4","$"],53:["5","%"],54:["6","^"],55:["7","&"],56:["8","*"],57:["9","("],186:[";",":"],187:["=","+"],188:[",","<"],189:["-","_"],190:[".",">"],191:["/","?"],192:["`","~"],219:["[","{"],220:["\\","|"],221:["]","}"],222:["'",'"']};o.evaluateKeyboardEvent=function(f,b,y,v){const m={type:0,cancel:!1,key:void 0},l=(f.shiftKey?1:0)|(f.altKey?2:0)|(f.ctrlKey?4:0)|(f.metaKey?8:0);switch(f.keyCode){case 0:f.key==="UIKeyInputUpArrow"?m.key=b?h.C0.ESC+"OA":h.C0.ESC+"[A":f.key==="UIKeyInputLeftArrow"?m.key=b?h.C0.ESC+"OD":h.C0.ESC+"[D":f.key==="UIKeyInputRightArrow"?m.key=b?h.C0.ESC+"OC":h.C0.ESC+"[C":f.key==="UIKeyInputDownArrow"&&(m.key=b?h.C0.ESC+"OB":h.C0.ESC+"[B");break;case 8:if(f.altKey){m.key=h.C0.ESC+h.C0.DEL;break}m.key=h.C0.DEL;break;case 9:if(f.shiftKey){m.key=h.C0.ESC+"[Z";break}m.key=h.C0.HT,m.cancel=!0;break;case 13:m.key=f.altKey?h.C0.ESC+h.C0.CR:h.C0.CR,m.cancel=!0;break;case 27:m.key=h.C0.ESC,f.altKey&&(m.key=h.C0.ESC+h.C0.ESC),m.cancel=!0;break;case 37:if(f.metaKey)break;l?(m.key=h.C0.ESC+"[1;"+(l+1)+"D",m.key===h.C0.ESC+"[1;3D"&&(m.key=h.C0.ESC+(y?"b":"[1;5D"))):m.key=b?h.C0.ESC+"OD":h.C0.ESC+"[D";break;case 39:if(f.metaKey)break;l?(m.key=h.C0.ESC+"[1;"+(l+1)+"C",m.key===h.C0.ESC+"[1;3C"&&(m.key=h.C0.ESC+(y?"f":"[1;5C"))):m.key=b?h.C0.ESC+"OC":h.C0.ESC+"[C";break;case 38:if(f.metaKey)break;l?(m.key=h.C0.ESC+"[1;"+(l+1)+"A",y||m.key!==h.C0.ESC+"[1;3A"||(m.key=h.C0.ESC+"[1;5A")):m.key=b?h.C0.ESC+"OA":h.C0.ESC+"[A";break;case 40:if(f.metaKey)break;l?(m.key=h.C0.ESC+"[1;"+(l+1)+"B",y||m.key!==h.C0.ESC+"[1;3B"||(m.key=h.C0.ESC+"[1;5B")):m.key=b?h.C0.ESC+"OB":h.C0.ESC+"[B";break;case 45:f.shiftKey||f.ctrlKey||(m.key=h.C0.ESC+"[2~");break;case 46:m.key=l?h.C0.ESC+"[3;"+(l+1)+"~":h.C0.ESC+"[3~";break;case 36:m.key=l?h.C0.ESC+"[1;"+(l+1)+"H":b?h.C0.ESC+"OH":h.C0.ESC+"[H";break;case 35:m.key=l?h.C0.ESC+"[1;"+(l+1)+"F":b?h.C0.ESC+"OF":h.C0.ESC+"[F";break;case 33:f.shiftKey?m.type=2:f.ctrlKey?m.key=h.C0.ESC+"[5;"+(l+1)+"~":m.key=h.C0.ESC+"[5~";break;case 34:f.shiftKey?m.type=3:f.ctrlKey?m.key=h.C0.ESC+"[6;"+(l+1)+"~":m.key=h.C0.ESC+"[6~";break;case 112:m.key=l?h.C0.ESC+"[1;"+(l+1)+"P":h.C0.ESC+"OP";break;case 113:m.key=l?h.C0.ESC+"[1;"+(l+1)+"Q":h.C0.ESC+"OQ";break;case 114:m.key=l?h.C0.ESC+"[1;"+(l+1)+"R":h.C0.ESC+"OR";break;case 115:m.key=l?h.C0.ESC+"[1;"+(l+1)+"S":h.C0.ESC+"OS";break;case 116:m.key=l?h.C0.ESC+"[15;"+(l+1)+"~":h.C0.ESC+"[15~";break;case 117:m.key=l?h.C0.ESC+"[17;"+(l+1)+"~":h.C0.ESC+"[17~";break;case 118:m.key=l?h.C0.ESC+"[18;"+(l+1)+"~":h.C0.ESC+"[18~";break;case 119:m.key=l?h.C0.ESC+"[19;"+(l+1)+"~":h.C0.ESC+"[19~";break;case 120:m.key=l?h.C0.ESC+"[20;"+(l+1)+"~":h.C0.ESC+"[20~";break;case 121:m.key=l?h.C0.ESC+"[21;"+(l+1)+"~":h.C0.ESC+"[21~";break;case 122:m.key=l?h.C0.ESC+"[23;"+(l+1)+"~":h.C0.ESC+"[23~";break;case 123:m.key=l?h.C0.ESC+"[24;"+(l+1)+"~":h.C0.ESC+"[24~";break;default:if(!f.ctrlKey||f.shiftKey||f.altKey||f.metaKey)if(y&&!v||!f.altKey||f.metaKey)!y||f.altKey||f.ctrlKey||f.shiftKey||!f.metaKey?f.key&&!f.ctrlKey&&!f.altKey&&!f.metaKey&&f.keyCode>=48&&f.key.length===1?m.key=f.key:f.key&&f.ctrlKey&&(f.key==="_"&&(m.key=h.C0.US),f.key==="@"&&(m.key=h.C0.NUL)):f.keyCode===65&&(m.type=1);else{const _=u[f.keyCode],p=_==null?void 0:_[f.shiftKey?1:0];if(p)m.key=h.C0.ESC+p;else if(f.keyCode>=65&&f.keyCode<=90){const d=f.ctrlKey?f.keyCode-64:f.keyCode+32;let g=String.fromCharCode(d);f.shiftKey&&(g=g.toUpperCase()),m.key=h.C0.ESC+g}else if(f.keyCode===32)m.key=h.C0.ESC+(f.ctrlKey?h.C0.NUL:" ");else if(f.key==="Dead"&&f.code.startsWith("Key")){let d=f.code.slice(3,4);f.shiftKey||(d=d.toLowerCase()),m.key=h.C0.ESC+d,m.cancel=!0}}else f.keyCode>=65&&f.keyCode<=90?m.key=String.fromCharCode(f.keyCode-64):f.keyCode===32?m.key=h.C0.NUL:f.keyCode>=51&&f.keyCode<=55?m.key=String.fromCharCode(f.keyCode-51+27):f.keyCode===56?m.key=h.C0.DEL:f.keyCode===219?m.key=h.C0.ESC:f.keyCode===220?m.key=h.C0.FS:f.keyCode===221&&(m.key=h.C0.GS)}return m}},482:(c,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.Utf8ToUtf32=o.StringToUtf32=o.utf32ToString=o.stringFromCodePoint=void 0,o.stringFromCodePoint=function(a){return a>65535?(a-=65536,String.fromCharCode(55296+(a>>10))+String.fromCharCode(a%1024+56320)):String.fromCharCode(a)},o.utf32ToString=function(a,h=0,u=a.length){let f="";for(let b=h;b<u;++b){let y=a[b];y>65535?(y-=65536,f+=String.fromCharCode(55296+(y>>10))+String.fromCharCode(y%1024+56320)):f+=String.fromCharCode(y)}return f},o.StringToUtf32=class{constructor(){this._interim=0}clear(){this._interim=0}decode(a,h){const u=a.length;if(!u)return 0;let f=0,b=0;if(this._interim){const y=a.charCodeAt(b++);56320<=y&&y<=57343?h[f++]=1024*(this._interim-55296)+y-56320+65536:(h[f++]=this._interim,h[f++]=y),this._interim=0}for(let y=b;y<u;++y){const v=a.charCodeAt(y);if(55296<=v&&v<=56319){if(++y>=u)return this._interim=v,f;const m=a.charCodeAt(y);56320<=m&&m<=57343?h[f++]=1024*(v-55296)+m-56320+65536:(h[f++]=v,h[f++]=m)}else v!==65279&&(h[f++]=v)}return f}},o.Utf8ToUtf32=class{constructor(){this.interim=new Uint8Array(3)}clear(){this.interim.fill(0)}decode(a,h){const u=a.length;if(!u)return 0;let f,b,y,v,m=0,l=0,_=0;if(this.interim[0]){let g=!1,w=this.interim[0];w&=(224&w)==192?31:(240&w)==224?15:7;let E,C=0;for(;(E=63&this.interim[++C])&&C<4;)w<<=6,w|=E;const S=(224&this.interim[0])==192?2:(240&this.interim[0])==224?3:4,k=S-C;for(;_<k;){if(_>=u)return 0;if(E=a[_++],(192&E)!=128){_--,g=!0;break}this.interim[C++]=E,w<<=6,w|=63&E}g||(S===2?w<128?_--:h[m++]=w:S===3?w<2048||w>=55296&&w<=57343||w===65279||(h[m++]=w):w<65536||w>1114111||(h[m++]=w)),this.interim.fill(0)}const p=u-4;let d=_;for(;d<u;){for(;!(!(d<p)||128&(f=a[d])||128&(b=a[d+1])||128&(y=a[d+2])||128&(v=a[d+3]));)h[m++]=f,h[m++]=b,h[m++]=y,h[m++]=v,d+=4;if(f=a[d++],f<128)h[m++]=f;else if((224&f)==192){if(d>=u)return this.interim[0]=f,m;if(b=a[d++],(192&b)!=128){d--;continue}if(l=(31&f)<<6|63&b,l<128){d--;continue}h[m++]=l}else if((240&f)==224){if(d>=u)return this.interim[0]=f,m;if(b=a[d++],(192&b)!=128){d--;continue}if(d>=u)return this.interim[0]=f,this.interim[1]=b,m;if(y=a[d++],(192&y)!=128){d--;continue}if(l=(15&f)<<12|(63&b)<<6|63&y,l<2048||l>=55296&&l<=57343||l===65279)continue;h[m++]=l}else if((248&f)==240){if(d>=u)return this.interim[0]=f,m;if(b=a[d++],(192&b)!=128){d--;continue}if(d>=u)return this.interim[0]=f,this.interim[1]=b,m;if(y=a[d++],(192&y)!=128){d--;continue}if(d>=u)return this.interim[0]=f,this.interim[1]=b,this.interim[2]=y,m;if(v=a[d++],(192&v)!=128){d--;continue}if(l=(7&f)<<18|(63&b)<<12|(63&y)<<6|63&v,l<65536||l>1114111)continue;h[m++]=l}}return m}}},225:(c,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.UnicodeV6=void 0;const a=[[768,879],[1155,1158],[1160,1161],[1425,1469],[1471,1471],[1473,1474],[1476,1477],[1479,1479],[1536,1539],[1552,1557],[1611,1630],[1648,1648],[1750,1764],[1767,1768],[1770,1773],[1807,1807],[1809,1809],[1840,1866],[1958,1968],[2027,2035],[2305,2306],[2364,2364],[2369,2376],[2381,2381],[2385,2388],[2402,2403],[2433,2433],[2492,2492],[2497,2500],[2509,2509],[2530,2531],[2561,2562],[2620,2620],[2625,2626],[2631,2632],[2635,2637],[2672,2673],[2689,2690],[2748,2748],[2753,2757],[2759,2760],[2765,2765],[2786,2787],[2817,2817],[2876,2876],[2879,2879],[2881,2883],[2893,2893],[2902,2902],[2946,2946],[3008,3008],[3021,3021],[3134,3136],[3142,3144],[3146,3149],[3157,3158],[3260,3260],[3263,3263],[3270,3270],[3276,3277],[3298,3299],[3393,3395],[3405,3405],[3530,3530],[3538,3540],[3542,3542],[3633,3633],[3636,3642],[3655,3662],[3761,3761],[3764,3769],[3771,3772],[3784,3789],[3864,3865],[3893,3893],[3895,3895],[3897,3897],[3953,3966],[3968,3972],[3974,3975],[3984,3991],[3993,4028],[4038,4038],[4141,4144],[4146,4146],[4150,4151],[4153,4153],[4184,4185],[4448,4607],[4959,4959],[5906,5908],[5938,5940],[5970,5971],[6002,6003],[6068,6069],[6071,6077],[6086,6086],[6089,6099],[6109,6109],[6155,6157],[6313,6313],[6432,6434],[6439,6440],[6450,6450],[6457,6459],[6679,6680],[6912,6915],[6964,6964],[6966,6970],[6972,6972],[6978,6978],[7019,7027],[7616,7626],[7678,7679],[8203,8207],[8234,8238],[8288,8291],[8298,8303],[8400,8431],[12330,12335],[12441,12442],[43014,43014],[43019,43019],[43045,43046],[64286,64286],[65024,65039],[65056,65059],[65279,65279],[65529,65531]],h=[[68097,68099],[68101,68102],[68108,68111],[68152,68154],[68159,68159],[119143,119145],[119155,119170],[119173,119179],[119210,119213],[119362,119364],[917505,917505],[917536,917631],[917760,917999]];let u;o.UnicodeV6=class{constructor(){if(this.version="6",!u){u=new Uint8Array(65536),u.fill(1),u[0]=0,u.fill(0,1,32),u.fill(0,127,160),u.fill(2,4352,4448),u[9001]=2,u[9002]=2,u.fill(2,11904,42192),u[12351]=1,u.fill(2,44032,55204),u.fill(2,63744,64256),u.fill(2,65040,65050),u.fill(2,65072,65136),u.fill(2,65280,65377),u.fill(2,65504,65511);for(let f=0;f<a.length;++f)u.fill(0,a[f][0],a[f][1]+1)}}wcwidth(f){return f<32?0:f<127?1:f<65536?u[f]:function(b,y){let v,m=0,l=y.length-1;if(b<y[0][0]||b>y[l][1])return!1;for(;l>=m;)if(v=m+l>>1,b>y[v][1])m=v+1;else{if(!(b<y[v][0]))return!0;l=v-1}return!1}(f,h)?0:f>=131072&&f<=196605||f>=196608&&f<=262141?2:1}}},5981:(c,o,a)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.WriteBuffer=void 0;const h=a(8460),u=a(844);class f extends u.Disposable{constructor(y){super(),this._action=y,this._writeBuffer=[],this._callbacks=[],this._pendingData=0,this._bufferOffset=0,this._isSyncWriting=!1,this._syncCalls=0,this._didUserInput=!1,this._onWriteParsed=this.register(new h.EventEmitter),this.onWriteParsed=this._onWriteParsed.event}handleUserInput(){this._didUserInput=!0}writeSync(y,v){if(v!==void 0&&this._syncCalls>v)return void(this._syncCalls=0);if(this._pendingData+=y.length,this._writeBuffer.push(y),this._callbacks.push(void 0),this._syncCalls++,this._isSyncWriting)return;let m;for(this._isSyncWriting=!0;m=this._writeBuffer.shift();){this._action(m);const l=this._callbacks.shift();l&&l()}this._pendingData=0,this._bufferOffset=2147483647,this._isSyncWriting=!1,this._syncCalls=0}write(y,v){if(this._pendingData>5e7)throw new Error("write data discarded, use flow control to avoid losing data");if(!this._writeBuffer.length){if(this._bufferOffset=0,this._didUserInput)return this._didUserInput=!1,this._pendingData+=y.length,this._writeBuffer.push(y),this._callbacks.push(v),void this._innerWrite();setTimeout(()=>this._innerWrite())}this._pendingData+=y.length,this._writeBuffer.push(y),this._callbacks.push(v)}_innerWrite(y=0,v=!0){const m=y||Date.now();for(;this._writeBuffer.length>this._bufferOffset;){const l=this._writeBuffer[this._bufferOffset],_=this._action(l,v);if(_){const d=g=>Date.now()-m>=12?setTimeout(()=>this._innerWrite(0,g)):this._innerWrite(m,g);return void _.catch(g=>(queueMicrotask(()=>{throw g}),Promise.resolve(!1))).then(d)}const p=this._callbacks[this._bufferOffset];if(p&&p(),this._bufferOffset++,this._pendingData-=l.length,Date.now()-m>=12)break}this._writeBuffer.length>this._bufferOffset?(this._bufferOffset>50&&(this._writeBuffer=this._writeBuffer.slice(this._bufferOffset),this._callbacks=this._callbacks.slice(this._bufferOffset),this._bufferOffset=0),setTimeout(()=>this._innerWrite())):(this._writeBuffer.length=0,this._callbacks.length=0,this._pendingData=0,this._bufferOffset=0),this._onWriteParsed.fire()}}o.WriteBuffer=f},5941:(c,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.toRgbString=o.parseColor=void 0;const a=/^([\da-f])\/([\da-f])\/([\da-f])$|^([\da-f]{2})\/([\da-f]{2})\/([\da-f]{2})$|^([\da-f]{3})\/([\da-f]{3})\/([\da-f]{3})$|^([\da-f]{4})\/([\da-f]{4})\/([\da-f]{4})$/,h=/^[\da-f]+$/;function u(f,b){const y=f.toString(16),v=y.length<2?"0"+y:y;switch(b){case 4:return y[0];case 8:return v;case 12:return(v+v).slice(0,3);default:return v+v}}o.parseColor=function(f){if(!f)return;let b=f.toLowerCase();if(b.indexOf("rgb:")===0){b=b.slice(4);const y=a.exec(b);if(y){const v=y[1]?15:y[4]?255:y[7]?4095:65535;return[Math.round(parseInt(y[1]||y[4]||y[7]||y[10],16)/v*255),Math.round(parseInt(y[2]||y[5]||y[8]||y[11],16)/v*255),Math.round(parseInt(y[3]||y[6]||y[9]||y[12],16)/v*255)]}}else if(b.indexOf("#")===0&&(b=b.slice(1),h.exec(b)&&[3,6,9,12].includes(b.length))){const y=b.length/3,v=[0,0,0];for(let m=0;m<3;++m){const l=parseInt(b.slice(y*m,y*m+y),16);v[m]=y===1?l<<4:y===2?l:y===3?l>>4:l>>8}return v}},o.toRgbString=function(f,b=16){const[y,v,m]=f;return`rgb:${u(y,b)}/${u(v,b)}/${u(m,b)}`}},5770:(c,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.PAYLOAD_LIMIT=void 0,o.PAYLOAD_LIMIT=1e7},6351:(c,o,a)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.DcsHandler=o.DcsParser=void 0;const h=a(482),u=a(8742),f=a(5770),b=[];o.DcsParser=class{constructor(){this._handlers=Object.create(null),this._active=b,this._ident=0,this._handlerFb=()=>{},this._stack={paused:!1,loopPosition:0,fallThrough:!1}}dispose(){this._handlers=Object.create(null),this._handlerFb=()=>{},this._active=b}registerHandler(v,m){this._handlers[v]===void 0&&(this._handlers[v]=[]);const l=this._handlers[v];return l.push(m),{dispose:()=>{const _=l.indexOf(m);_!==-1&&l.splice(_,1)}}}clearHandler(v){this._handlers[v]&&delete this._handlers[v]}setHandlerFallback(v){this._handlerFb=v}reset(){if(this._active.length)for(let v=this._stack.paused?this._stack.loopPosition-1:this._active.length-1;v>=0;--v)this._active[v].unhook(!1);this._stack.paused=!1,this._active=b,this._ident=0}hook(v,m){if(this.reset(),this._ident=v,this._active=this._handlers[v]||b,this._active.length)for(let l=this._active.length-1;l>=0;l--)this._active[l].hook(m);else this._handlerFb(this._ident,"HOOK",m)}put(v,m,l){if(this._active.length)for(let _=this._active.length-1;_>=0;_--)this._active[_].put(v,m,l);else this._handlerFb(this._ident,"PUT",(0,h.utf32ToString)(v,m,l))}unhook(v,m=!0){if(this._active.length){let l=!1,_=this._active.length-1,p=!1;if(this._stack.paused&&(_=this._stack.loopPosition-1,l=m,p=this._stack.fallThrough,this._stack.paused=!1),!p&&l===!1){for(;_>=0&&(l=this._active[_].unhook(v),l!==!0);_--)if(l instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=_,this._stack.fallThrough=!1,l;_--}for(;_>=0;_--)if(l=this._active[_].unhook(!1),l instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=_,this._stack.fallThrough=!0,l}else this._handlerFb(this._ident,"UNHOOK",v);this._active=b,this._ident=0}};const y=new u.Params;y.addParam(0),o.DcsHandler=class{constructor(v){this._handler=v,this._data="",this._params=y,this._hitLimit=!1}hook(v){this._params=v.length>1||v.params[0]?v.clone():y,this._data="",this._hitLimit=!1}put(v,m,l){this._hitLimit||(this._data+=(0,h.utf32ToString)(v,m,l),this._data.length>f.PAYLOAD_LIMIT&&(this._data="",this._hitLimit=!0))}unhook(v){let m=!1;if(this._hitLimit)m=!1;else if(v&&(m=this._handler(this._data,this._params),m instanceof Promise))return m.then(l=>(this._params=y,this._data="",this._hitLimit=!1,l));return this._params=y,this._data="",this._hitLimit=!1,m}}},2015:(c,o,a)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.EscapeSequenceParser=o.VT500_TRANSITION_TABLE=o.TransitionTable=void 0;const h=a(844),u=a(8742),f=a(6242),b=a(6351);class y{constructor(_){this.table=new Uint8Array(_)}setDefault(_,p){this.table.fill(_<<4|p)}add(_,p,d,g){this.table[p<<8|_]=d<<4|g}addMany(_,p,d,g){for(let w=0;w<_.length;w++)this.table[p<<8|_[w]]=d<<4|g}}o.TransitionTable=y;const v=160;o.VT500_TRANSITION_TABLE=function(){const l=new y(4095),_=Array.apply(null,Array(256)).map((C,S)=>S),p=(C,S)=>_.slice(C,S),d=p(32,127),g=p(0,24);g.push(25),g.push.apply(g,p(28,32));const w=p(0,14);let E;for(E in l.setDefault(1,0),l.addMany(d,0,2,0),w)l.addMany([24,26,153,154],E,3,0),l.addMany(p(128,144),E,3,0),l.addMany(p(144,152),E,3,0),l.add(156,E,0,0),l.add(27,E,11,1),l.add(157,E,4,8),l.addMany([152,158,159],E,0,7),l.add(155,E,11,3),l.add(144,E,11,9);return l.addMany(g,0,3,0),l.addMany(g,1,3,1),l.add(127,1,0,1),l.addMany(g,8,0,8),l.addMany(g,3,3,3),l.add(127,3,0,3),l.addMany(g,4,3,4),l.add(127,4,0,4),l.addMany(g,6,3,6),l.addMany(g,5,3,5),l.add(127,5,0,5),l.addMany(g,2,3,2),l.add(127,2,0,2),l.add(93,1,4,8),l.addMany(d,8,5,8),l.add(127,8,5,8),l.addMany([156,27,24,26,7],8,6,0),l.addMany(p(28,32),8,0,8),l.addMany([88,94,95],1,0,7),l.addMany(d,7,0,7),l.addMany(g,7,0,7),l.add(156,7,0,0),l.add(127,7,0,7),l.add(91,1,11,3),l.addMany(p(64,127),3,7,0),l.addMany(p(48,60),3,8,4),l.addMany([60,61,62,63],3,9,4),l.addMany(p(48,60),4,8,4),l.addMany(p(64,127),4,7,0),l.addMany([60,61,62,63],4,0,6),l.addMany(p(32,64),6,0,6),l.add(127,6,0,6),l.addMany(p(64,127),6,0,0),l.addMany(p(32,48),3,9,5),l.addMany(p(32,48),5,9,5),l.addMany(p(48,64),5,0,6),l.addMany(p(64,127),5,7,0),l.addMany(p(32,48),4,9,5),l.addMany(p(32,48),1,9,2),l.addMany(p(32,48),2,9,2),l.addMany(p(48,127),2,10,0),l.addMany(p(48,80),1,10,0),l.addMany(p(81,88),1,10,0),l.addMany([89,90,92],1,10,0),l.addMany(p(96,127),1,10,0),l.add(80,1,11,9),l.addMany(g,9,0,9),l.add(127,9,0,9),l.addMany(p(28,32),9,0,9),l.addMany(p(32,48),9,9,12),l.addMany(p(48,60),9,8,10),l.addMany([60,61,62,63],9,9,10),l.addMany(g,11,0,11),l.addMany(p(32,128),11,0,11),l.addMany(p(28,32),11,0,11),l.addMany(g,10,0,10),l.add(127,10,0,10),l.addMany(p(28,32),10,0,10),l.addMany(p(48,60),10,8,10),l.addMany([60,61,62,63],10,0,11),l.addMany(p(32,48),10,9,12),l.addMany(g,12,0,12),l.add(127,12,0,12),l.addMany(p(28,32),12,0,12),l.addMany(p(32,48),12,9,12),l.addMany(p(48,64),12,0,11),l.addMany(p(64,127),12,12,13),l.addMany(p(64,127),10,12,13),l.addMany(p(64,127),9,12,13),l.addMany(g,13,13,13),l.addMany(d,13,13,13),l.add(127,13,0,13),l.addMany([27,156,24,26],13,14,0),l.add(v,0,2,0),l.add(v,8,5,8),l.add(v,6,0,6),l.add(v,11,0,11),l.add(v,13,13,13),l}();class m extends h.Disposable{constructor(_=o.VT500_TRANSITION_TABLE){super(),this._transitions=_,this._parseStack={state:0,handlers:[],handlerPos:0,transition:0,chunkPos:0},this.initialState=0,this.currentState=this.initialState,this._params=new u.Params,this._params.addParam(0),this._collect=0,this.precedingCodepoint=0,this._printHandlerFb=(p,d,g)=>{},this._executeHandlerFb=p=>{},this._csiHandlerFb=(p,d)=>{},this._escHandlerFb=p=>{},this._errorHandlerFb=p=>p,this._printHandler=this._printHandlerFb,this._executeHandlers=Object.create(null),this._csiHandlers=Object.create(null),this._escHandlers=Object.create(null),this.register((0,h.toDisposable)(()=>{this._csiHandlers=Object.create(null),this._executeHandlers=Object.create(null),this._escHandlers=Object.create(null)})),this._oscParser=this.register(new f.OscParser),this._dcsParser=this.register(new b.DcsParser),this._errorHandler=this._errorHandlerFb,this.registerEscHandler({final:"\\"},()=>!0)}_identifier(_,p=[64,126]){let d=0;if(_.prefix){if(_.prefix.length>1)throw new Error("only one byte as prefix supported");if(d=_.prefix.charCodeAt(0),d&&60>d||d>63)throw new Error("prefix must be in range 0x3c .. 0x3f")}if(_.intermediates){if(_.intermediates.length>2)throw new Error("only two bytes as intermediates are supported");for(let w=0;w<_.intermediates.length;++w){const E=_.intermediates.charCodeAt(w);if(32>E||E>47)throw new Error("intermediate must be in range 0x20 .. 0x2f");d<<=8,d|=E}}if(_.final.length!==1)throw new Error("final must be a single byte");const g=_.final.charCodeAt(0);if(p[0]>g||g>p[1])throw new Error(`final must be in range ${p[0]} .. ${p[1]}`);return d<<=8,d|=g,d}identToString(_){const p=[];for(;_;)p.push(String.fromCharCode(255&_)),_>>=8;return p.reverse().join("")}setPrintHandler(_){this._printHandler=_}clearPrintHandler(){this._printHandler=this._printHandlerFb}registerEscHandler(_,p){const d=this._identifier(_,[48,126]);this._escHandlers[d]===void 0&&(this._escHandlers[d]=[]);const g=this._escHandlers[d];return g.push(p),{dispose:()=>{const w=g.indexOf(p);w!==-1&&g.splice(w,1)}}}clearEscHandler(_){this._escHandlers[this._identifier(_,[48,126])]&&delete this._escHandlers[this._identifier(_,[48,126])]}setEscHandlerFallback(_){this._escHandlerFb=_}setExecuteHandler(_,p){this._executeHandlers[_.charCodeAt(0)]=p}clearExecuteHandler(_){this._executeHandlers[_.charCodeAt(0)]&&delete this._executeHandlers[_.charCodeAt(0)]}setExecuteHandlerFallback(_){this._executeHandlerFb=_}registerCsiHandler(_,p){const d=this._identifier(_);this._csiHandlers[d]===void 0&&(this._csiHandlers[d]=[]);const g=this._csiHandlers[d];return g.push(p),{dispose:()=>{const w=g.indexOf(p);w!==-1&&g.splice(w,1)}}}clearCsiHandler(_){this._csiHandlers[this._identifier(_)]&&delete this._csiHandlers[this._identifier(_)]}setCsiHandlerFallback(_){this._csiHandlerFb=_}registerDcsHandler(_,p){return this._dcsParser.registerHandler(this._identifier(_),p)}clearDcsHandler(_){this._dcsParser.clearHandler(this._identifier(_))}setDcsHandlerFallback(_){this._dcsParser.setHandlerFallback(_)}registerOscHandler(_,p){return this._oscParser.registerHandler(_,p)}clearOscHandler(_){this._oscParser.clearHandler(_)}setOscHandlerFallback(_){this._oscParser.setHandlerFallback(_)}setErrorHandler(_){this._errorHandler=_}clearErrorHandler(){this._errorHandler=this._errorHandlerFb}reset(){this.currentState=this.initialState,this._oscParser.reset(),this._dcsParser.reset(),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingCodepoint=0,this._parseStack.state!==0&&(this._parseStack.state=2,this._parseStack.handlers=[])}_preserveStack(_,p,d,g,w){this._parseStack.state=_,this._parseStack.handlers=p,this._parseStack.handlerPos=d,this._parseStack.transition=g,this._parseStack.chunkPos=w}parse(_,p,d){let g,w=0,E=0,C=0;if(this._parseStack.state)if(this._parseStack.state===2)this._parseStack.state=0,C=this._parseStack.chunkPos+1;else{if(d===void 0||this._parseStack.state===1)throw this._parseStack.state=1,new Error("improper continuation due to previous async handler, giving up parsing");const S=this._parseStack.handlers;let k=this._parseStack.handlerPos-1;switch(this._parseStack.state){case 3:if(d===!1&&k>-1){for(;k>=0&&(g=S[k](this._params),g!==!0);k--)if(g instanceof Promise)return this._parseStack.handlerPos=k,g}this._parseStack.handlers=[];break;case 4:if(d===!1&&k>-1){for(;k>=0&&(g=S[k](),g!==!0);k--)if(g instanceof Promise)return this._parseStack.handlerPos=k,g}this._parseStack.handlers=[];break;case 6:if(w=_[this._parseStack.chunkPos],g=this._dcsParser.unhook(w!==24&&w!==26,d),g)return g;w===27&&(this._parseStack.transition|=1),this._params.reset(),this._params.addParam(0),this._collect=0;break;case 5:if(w=_[this._parseStack.chunkPos],g=this._oscParser.end(w!==24&&w!==26,d),g)return g;w===27&&(this._parseStack.transition|=1),this._params.reset(),this._params.addParam(0),this._collect=0}this._parseStack.state=0,C=this._parseStack.chunkPos+1,this.precedingCodepoint=0,this.currentState=15&this._parseStack.transition}for(let S=C;S<p;++S){switch(w=_[S],E=this._transitions.table[this.currentState<<8|(w<160?w:v)],E>>4){case 2:for(let T=S+1;;++T){if(T>=p||(w=_[T])<32||w>126&&w<v){this._printHandler(_,S,T),S=T-1;break}if(++T>=p||(w=_[T])<32||w>126&&w<v){this._printHandler(_,S,T),S=T-1;break}if(++T>=p||(w=_[T])<32||w>126&&w<v){this._printHandler(_,S,T),S=T-1;break}if(++T>=p||(w=_[T])<32||w>126&&w<v){this._printHandler(_,S,T),S=T-1;break}}break;case 3:this._executeHandlers[w]?this._executeHandlers[w]():this._executeHandlerFb(w),this.precedingCodepoint=0;break;case 0:break;case 1:if(this._errorHandler({position:S,code:w,currentState:this.currentState,collect:this._collect,params:this._params,abort:!1}).abort)return;break;case 7:const k=this._csiHandlers[this._collect<<8|w];let D=k?k.length-1:-1;for(;D>=0&&(g=k[D](this._params),g!==!0);D--)if(g instanceof Promise)return this._preserveStack(3,k,D,E,S),g;D<0&&this._csiHandlerFb(this._collect<<8|w,this._params),this.precedingCodepoint=0;break;case 8:do switch(w){case 59:this._params.addParam(0);break;case 58:this._params.addSubParam(-1);break;default:this._params.addDigit(w-48)}while(++S<p&&(w=_[S])>47&&w<60);S--;break;case 9:this._collect<<=8,this._collect|=w;break;case 10:const O=this._escHandlers[this._collect<<8|w];let A=O?O.length-1:-1;for(;A>=0&&(g=O[A](),g!==!0);A--)if(g instanceof Promise)return this._preserveStack(4,O,A,E,S),g;A<0&&this._escHandlerFb(this._collect<<8|w),this.precedingCodepoint=0;break;case 11:this._params.reset(),this._params.addParam(0),this._collect=0;break;case 12:this._dcsParser.hook(this._collect<<8|w,this._params);break;case 13:for(let T=S+1;;++T)if(T>=p||(w=_[T])===24||w===26||w===27||w>127&&w<v){this._dcsParser.put(_,S,T),S=T-1;break}break;case 14:if(g=this._dcsParser.unhook(w!==24&&w!==26),g)return this._preserveStack(6,[],0,E,S),g;w===27&&(E|=1),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingCodepoint=0;break;case 4:this._oscParser.start();break;case 5:for(let T=S+1;;T++)if(T>=p||(w=_[T])<32||w>127&&w<v){this._oscParser.put(_,S,T),S=T-1;break}break;case 6:if(g=this._oscParser.end(w!==24&&w!==26),g)return this._preserveStack(5,[],0,E,S),g;w===27&&(E|=1),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingCodepoint=0}this.currentState=15&E}}}o.EscapeSequenceParser=m},6242:(c,o,a)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.OscHandler=o.OscParser=void 0;const h=a(5770),u=a(482),f=[];o.OscParser=class{constructor(){this._state=0,this._active=f,this._id=-1,this._handlers=Object.create(null),this._handlerFb=()=>{},this._stack={paused:!1,loopPosition:0,fallThrough:!1}}registerHandler(b,y){this._handlers[b]===void 0&&(this._handlers[b]=[]);const v=this._handlers[b];return v.push(y),{dispose:()=>{const m=v.indexOf(y);m!==-1&&v.splice(m,1)}}}clearHandler(b){this._handlers[b]&&delete this._handlers[b]}setHandlerFallback(b){this._handlerFb=b}dispose(){this._handlers=Object.create(null),this._handlerFb=()=>{},this._active=f}reset(){if(this._state===2)for(let b=this._stack.paused?this._stack.loopPosition-1:this._active.length-1;b>=0;--b)this._active[b].end(!1);this._stack.paused=!1,this._active=f,this._id=-1,this._state=0}_start(){if(this._active=this._handlers[this._id]||f,this._active.length)for(let b=this._active.length-1;b>=0;b--)this._active[b].start();else this._handlerFb(this._id,"START")}_put(b,y,v){if(this._active.length)for(let m=this._active.length-1;m>=0;m--)this._active[m].put(b,y,v);else this._handlerFb(this._id,"PUT",(0,u.utf32ToString)(b,y,v))}start(){this.reset(),this._state=1}put(b,y,v){if(this._state!==3){if(this._state===1)for(;y<v;){const m=b[y++];if(m===59){this._state=2,this._start();break}if(m<48||57<m)return void(this._state=3);this._id===-1&&(this._id=0),this._id=10*this._id+m-48}this._state===2&&v-y>0&&this._put(b,y,v)}}end(b,y=!0){if(this._state!==0){if(this._state!==3)if(this._state===1&&this._start(),this._active.length){let v=!1,m=this._active.length-1,l=!1;if(this._stack.paused&&(m=this._stack.loopPosition-1,v=y,l=this._stack.fallThrough,this._stack.paused=!1),!l&&v===!1){for(;m>=0&&(v=this._active[m].end(b),v!==!0);m--)if(v instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=m,this._stack.fallThrough=!1,v;m--}for(;m>=0;m--)if(v=this._active[m].end(!1),v instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=m,this._stack.fallThrough=!0,v}else this._handlerFb(this._id,"END",b);this._active=f,this._id=-1,this._state=0}}},o.OscHandler=class{constructor(b){this._handler=b,this._data="",this._hitLimit=!1}start(){this._data="",this._hitLimit=!1}put(b,y,v){this._hitLimit||(this._data+=(0,u.utf32ToString)(b,y,v),this._data.length>h.PAYLOAD_LIMIT&&(this._data="",this._hitLimit=!0))}end(b){let y=!1;if(this._hitLimit)y=!1;else if(b&&(y=this._handler(this._data),y instanceof Promise))return y.then(v=>(this._data="",this._hitLimit=!1,v));return this._data="",this._hitLimit=!1,y}}},8742:(c,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.Params=void 0;const a=2147483647;class h{constructor(f=32,b=32){if(this.maxLength=f,this.maxSubParamsLength=b,b>256)throw new Error("maxSubParamsLength must not be greater than 256");this.params=new Int32Array(f),this.length=0,this._subParams=new Int32Array(b),this._subParamsLength=0,this._subParamsIdx=new Uint16Array(f),this._rejectDigits=!1,this._rejectSubDigits=!1,this._digitIsSub=!1}static fromArray(f){const b=new h;if(!f.length)return b;for(let y=Array.isArray(f[0])?1:0;y<f.length;++y){const v=f[y];if(Array.isArray(v))for(let m=0;m<v.length;++m)b.addSubParam(v[m]);else b.addParam(v)}return b}clone(){const f=new h(this.maxLength,this.maxSubParamsLength);return f.params.set(this.params),f.length=this.length,f._subParams.set(this._subParams),f._subParamsLength=this._subParamsLength,f._subParamsIdx.set(this._subParamsIdx),f._rejectDigits=this._rejectDigits,f._rejectSubDigits=this._rejectSubDigits,f._digitIsSub=this._digitIsSub,f}toArray(){const f=[];for(let b=0;b<this.length;++b){f.push(this.params[b]);const y=this._subParamsIdx[b]>>8,v=255&this._subParamsIdx[b];v-y>0&&f.push(Array.prototype.slice.call(this._subParams,y,v))}return f}reset(){this.length=0,this._subParamsLength=0,this._rejectDigits=!1,this._rejectSubDigits=!1,this._digitIsSub=!1}addParam(f){if(this._digitIsSub=!1,this.length>=this.maxLength)this._rejectDigits=!0;else{if(f<-1)throw new Error("values lesser than -1 are not allowed");this._subParamsIdx[this.length]=this._subParamsLength<<8|this._subParamsLength,this.params[this.length++]=f>a?a:f}}addSubParam(f){if(this._digitIsSub=!0,this.length)if(this._rejectDigits||this._subParamsLength>=this.maxSubParamsLength)this._rejectSubDigits=!0;else{if(f<-1)throw new Error("values lesser than -1 are not allowed");this._subParams[this._subParamsLength++]=f>a?a:f,this._subParamsIdx[this.length-1]++}}hasSubParams(f){return(255&this._subParamsIdx[f])-(this._subParamsIdx[f]>>8)>0}getSubParams(f){const b=this._subParamsIdx[f]>>8,y=255&this._subParamsIdx[f];return y-b>0?this._subParams.subarray(b,y):null}getSubParamsAll(){const f={};for(let b=0;b<this.length;++b){const y=this._subParamsIdx[b]>>8,v=255&this._subParamsIdx[b];v-y>0&&(f[b]=this._subParams.slice(y,v))}return f}addDigit(f){let b;if(this._rejectDigits||!(b=this._digitIsSub?this._subParamsLength:this.length)||this._digitIsSub&&this._rejectSubDigits)return;const y=this._digitIsSub?this._subParams:this.params,v=y[b-1];y[b-1]=~v?Math.min(10*v+f,a):f}}o.Params=h},5741:(c,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.AddonManager=void 0,o.AddonManager=class{constructor(){this._addons=[]}dispose(){for(let a=this._addons.length-1;a>=0;a--)this._addons[a].instance.dispose()}loadAddon(a,h){const u={instance:h,dispose:h.dispose,isDisposed:!1};this._addons.push(u),h.dispose=()=>this._wrappedAddonDispose(u),h.activate(a)}_wrappedAddonDispose(a){if(a.isDisposed)return;let h=-1;for(let u=0;u<this._addons.length;u++)if(this._addons[u]===a){h=u;break}if(h===-1)throw new Error("Could not dispose an addon that has not been loaded");a.isDisposed=!0,a.dispose.apply(a.instance),this._addons.splice(h,1)}}},8771:(c,o,a)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.BufferApiView=void 0;const h=a(3785),u=a(511);o.BufferApiView=class{constructor(f,b){this._buffer=f,this.type=b}init(f){return this._buffer=f,this}get cursorY(){return this._buffer.y}get cursorX(){return this._buffer.x}get viewportY(){return this._buffer.ydisp}get baseY(){return this._buffer.ybase}get length(){return this._buffer.lines.length}getLine(f){const b=this._buffer.lines.get(f);if(b)return new h.BufferLineApiView(b)}getNullCell(){return new u.CellData}}},3785:(c,o,a)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.BufferLineApiView=void 0;const h=a(511);o.BufferLineApiView=class{constructor(u){this._line=u}get isWrapped(){return this._line.isWrapped}get length(){return this._line.length}getCell(u,f){if(!(u<0||u>=this._line.length))return f?(this._line.loadCell(u,f),f):this._line.loadCell(u,new h.CellData)}translateToString(u,f,b){return this._line.translateToString(u,f,b)}}},8285:(c,o,a)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.BufferNamespaceApi=void 0;const h=a(8771),u=a(8460);o.BufferNamespaceApi=class{constructor(f){this._core=f,this._onBufferChange=new u.EventEmitter,this.onBufferChange=this._onBufferChange.event,this._normal=new h.BufferApiView(this._core.buffers.normal,"normal"),this._alternate=new h.BufferApiView(this._core.buffers.alt,"alternate"),this._core.buffers.onBufferActivate(()=>this._onBufferChange.fire(this.active))}get active(){if(this._core.buffers.active===this._core.buffers.normal)return this.normal;if(this._core.buffers.active===this._core.buffers.alt)return this.alternate;throw new Error("Active buffer is neither normal nor alternate")}get normal(){return this._normal.init(this._core.buffers.normal)}get alternate(){return this._alternate.init(this._core.buffers.alt)}}},7975:(c,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.ParserApi=void 0,o.ParserApi=class{constructor(a){this._core=a}registerCsiHandler(a,h){return this._core.registerCsiHandler(a,u=>h(u.toArray()))}addCsiHandler(a,h){return this.registerCsiHandler(a,h)}registerDcsHandler(a,h){return this._core.registerDcsHandler(a,(u,f)=>h(u,f.toArray()))}addDcsHandler(a,h){return this.registerDcsHandler(a,h)}registerEscHandler(a,h){return this._core.registerEscHandler(a,h)}addEscHandler(a,h){return this.registerEscHandler(a,h)}registerOscHandler(a,h){return this._core.registerOscHandler(a,h)}addOscHandler(a,h){return this.registerOscHandler(a,h)}}},7090:(c,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.UnicodeApi=void 0,o.UnicodeApi=class{constructor(a){this._core=a}register(a){this._core.unicodeService.register(a)}get versions(){return this._core.unicodeService.versions}get activeVersion(){return this._core.unicodeService.activeVersion}set activeVersion(a){this._core.unicodeService.activeVersion=a}}},744:function(c,o,a){var h=this&&this.__decorate||function(l,_,p,d){var g,w=arguments.length,E=w<3?_:d===null?d=Object.getOwnPropertyDescriptor(_,p):d;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")E=Reflect.decorate(l,_,p,d);else for(var C=l.length-1;C>=0;C--)(g=l[C])&&(E=(w<3?g(E):w>3?g(_,p,E):g(_,p))||E);return w>3&&E&&Object.defineProperty(_,p,E),E},u=this&&this.__param||function(l,_){return function(p,d){_(p,d,l)}};Object.defineProperty(o,"__esModule",{value:!0}),o.BufferService=o.MINIMUM_ROWS=o.MINIMUM_COLS=void 0;const f=a(2585),b=a(5295),y=a(8460),v=a(844);o.MINIMUM_COLS=2,o.MINIMUM_ROWS=1;let m=class extends v.Disposable{constructor(l){super(),this.isUserScrolling=!1,this._onResize=this.register(new y.EventEmitter),this.onResize=this._onResize.event,this._onScroll=this.register(new y.EventEmitter),this.onScroll=this._onScroll.event,this.cols=Math.max(l.rawOptions.cols||0,o.MINIMUM_COLS),this.rows=Math.max(l.rawOptions.rows||0,o.MINIMUM_ROWS),this.buffers=this.register(new b.BufferSet(l,this))}get buffer(){return this.buffers.active}resize(l,_){this.cols=l,this.rows=_,this.buffers.resize(l,_),this._onResize.fire({cols:l,rows:_})}reset(){this.buffers.reset(),this.isUserScrolling=!1}scroll(l,_=!1){const p=this.buffer;let d;d=this._cachedBlankLine,d&&d.length===this.cols&&d.getFg(0)===l.fg&&d.getBg(0)===l.bg||(d=p.getBlankLine(l,_),this._cachedBlankLine=d),d.isWrapped=_;const g=p.ybase+p.scrollTop,w=p.ybase+p.scrollBottom;if(p.scrollTop===0){const E=p.lines.isFull;w===p.lines.length-1?E?p.lines.recycle().copyFrom(d):p.lines.push(d.clone()):p.lines.splice(w+1,0,d.clone()),E?this.isUserScrolling&&(p.ydisp=Math.max(p.ydisp-1,0)):(p.ybase++,this.isUserScrolling||p.ydisp++)}else{const E=w-g+1;p.lines.shiftElements(g+1,E-1,-1),p.lines.set(w,d.clone())}this.isUserScrolling||(p.ydisp=p.ybase),this._onScroll.fire(p.ydisp)}scrollLines(l,_,p){const d=this.buffer;if(l<0){if(d.ydisp===0)return;this.isUserScrolling=!0}else l+d.ydisp>=d.ybase&&(this.isUserScrolling=!1);const g=d.ydisp;d.ydisp=Math.max(Math.min(d.ydisp+l,d.ybase),0),g!==d.ydisp&&(_||this._onScroll.fire(d.ydisp))}scrollPages(l){this.scrollLines(l*(this.rows-1))}scrollToTop(){this.scrollLines(-this.buffer.ydisp)}scrollToBottom(){this.scrollLines(this.buffer.ybase-this.buffer.ydisp)}scrollToLine(l){const _=l-this.buffer.ydisp;_!==0&&this.scrollLines(_)}};m=h([u(0,f.IOptionsService)],m),o.BufferService=m},7994:(c,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.CharsetService=void 0,o.CharsetService=class{constructor(){this.glevel=0,this._charsets=[]}reset(){this.charset=void 0,this._charsets=[],this.glevel=0}setgLevel(a){this.glevel=a,this.charset=this._charsets[a]}setgCharset(a,h){this._charsets[a]=h,this.glevel===a&&(this.charset=h)}}},1753:function(c,o,a){var h=this&&this.__decorate||function(d,g,w,E){var C,S=arguments.length,k=S<3?g:E===null?E=Object.getOwnPropertyDescriptor(g,w):E;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")k=Reflect.decorate(d,g,w,E);else for(var D=d.length-1;D>=0;D--)(C=d[D])&&(k=(S<3?C(k):S>3?C(g,w,k):C(g,w))||k);return S>3&&k&&Object.defineProperty(g,w,k),k},u=this&&this.__param||function(d,g){return function(w,E){g(w,E,d)}};Object.defineProperty(o,"__esModule",{value:!0}),o.CoreMouseService=void 0;const f=a(2585),b=a(8460),y=a(844),v={NONE:{events:0,restrict:()=>!1},X10:{events:1,restrict:d=>d.button!==4&&d.action===1&&(d.ctrl=!1,d.alt=!1,d.shift=!1,!0)},VT200:{events:19,restrict:d=>d.action!==32},DRAG:{events:23,restrict:d=>d.action!==32||d.button!==3},ANY:{events:31,restrict:d=>!0}};function m(d,g){let w=(d.ctrl?16:0)|(d.shift?4:0)|(d.alt?8:0);return d.button===4?(w|=64,w|=d.action):(w|=3&d.button,4&d.button&&(w|=64),8&d.button&&(w|=128),d.action===32?w|=32:d.action!==0||g||(w|=3)),w}const l=String.fromCharCode,_={DEFAULT:d=>{const g=[m(d,!1)+32,d.col+32,d.row+32];return g[0]>255||g[1]>255||g[2]>255?"":`\x1B[M${l(g[0])}${l(g[1])}${l(g[2])}`},SGR:d=>{const g=d.action===0&&d.button!==4?"m":"M";return`\x1B[<${m(d,!0)};${d.col};${d.row}${g}`},SGR_PIXELS:d=>{const g=d.action===0&&d.button!==4?"m":"M";return`\x1B[<${m(d,!0)};${d.x};${d.y}${g}`}};let p=class extends y.Disposable{constructor(d,g){super(),this._bufferService=d,this._coreService=g,this._protocols={},this._encodings={},this._activeProtocol="",this._activeEncoding="",this._lastEvent=null,this._onProtocolChange=this.register(new b.EventEmitter),this.onProtocolChange=this._onProtocolChange.event;for(const w of Object.keys(v))this.addProtocol(w,v[w]);for(const w of Object.keys(_))this.addEncoding(w,_[w]);this.reset()}addProtocol(d,g){this._protocols[d]=g}addEncoding(d,g){this._encodings[d]=g}get activeProtocol(){return this._activeProtocol}get areMouseEventsActive(){return this._protocols[this._activeProtocol].events!==0}set activeProtocol(d){if(!this._protocols[d])throw new Error(`unknown protocol "${d}"`);this._activeProtocol=d,this._onProtocolChange.fire(this._protocols[d].events)}get activeEncoding(){return this._activeEncoding}set activeEncoding(d){if(!this._encodings[d])throw new Error(`unknown encoding "${d}"`);this._activeEncoding=d}reset(){this.activeProtocol="NONE",this.activeEncoding="DEFAULT",this._lastEvent=null}triggerMouseEvent(d){if(d.col<0||d.col>=this._bufferService.cols||d.row<0||d.row>=this._bufferService.rows||d.button===4&&d.action===32||d.button===3&&d.action!==32||d.button!==4&&(d.action===2||d.action===3)||(d.col++,d.row++,d.action===32&&this._lastEvent&&this._equalEvents(this._lastEvent,d,this._activeEncoding==="SGR_PIXELS"))||!this._protocols[this._activeProtocol].restrict(d))return!1;const g=this._encodings[this._activeEncoding](d);return g&&(this._activeEncoding==="DEFAULT"?this._coreService.triggerBinaryEvent(g):this._coreService.triggerDataEvent(g,!0)),this._lastEvent=d,!0}explainEvents(d){return{down:!!(1&d),up:!!(2&d),drag:!!(4&d),move:!!(8&d),wheel:!!(16&d)}}_equalEvents(d,g,w){if(w){if(d.x!==g.x||d.y!==g.y)return!1}else if(d.col!==g.col||d.row!==g.row)return!1;return d.button===g.button&&d.action===g.action&&d.ctrl===g.ctrl&&d.alt===g.alt&&d.shift===g.shift}};p=h([u(0,f.IBufferService),u(1,f.ICoreService)],p),o.CoreMouseService=p},6975:function(c,o,a){var h=this&&this.__decorate||function(p,d,g,w){var E,C=arguments.length,S=C<3?d:w===null?w=Object.getOwnPropertyDescriptor(d,g):w;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")S=Reflect.decorate(p,d,g,w);else for(var k=p.length-1;k>=0;k--)(E=p[k])&&(S=(C<3?E(S):C>3?E(d,g,S):E(d,g))||S);return C>3&&S&&Object.defineProperty(d,g,S),S},u=this&&this.__param||function(p,d){return function(g,w){d(g,w,p)}};Object.defineProperty(o,"__esModule",{value:!0}),o.CoreService=void 0;const f=a(2585),b=a(8460),y=a(1439),v=a(844),m=Object.freeze({insertMode:!1}),l=Object.freeze({applicationCursorKeys:!1,applicationKeypad:!1,bracketedPasteMode:!1,origin:!1,reverseWraparound:!1,sendFocus:!1,wraparound:!0});let _=class extends v.Disposable{constructor(p,d,g){super(),this._bufferService=p,this._logService=d,this._optionsService=g,this.isCursorInitialized=!1,this.isCursorHidden=!1,this._onData=this.register(new b.EventEmitter),this.onData=this._onData.event,this._onUserInput=this.register(new b.EventEmitter),this.onUserInput=this._onUserInput.event,this._onBinary=this.register(new b.EventEmitter),this.onBinary=this._onBinary.event,this._onRequestScrollToBottom=this.register(new b.EventEmitter),this.onRequestScrollToBottom=this._onRequestScrollToBottom.event,this.modes=(0,y.clone)(m),this.decPrivateModes=(0,y.clone)(l)}reset(){this.modes=(0,y.clone)(m),this.decPrivateModes=(0,y.clone)(l)}triggerDataEvent(p,d=!1){if(this._optionsService.rawOptions.disableStdin)return;const g=this._bufferService.buffer;d&&this._optionsService.rawOptions.scrollOnUserInput&&g.ybase!==g.ydisp&&this._onRequestScrollToBottom.fire(),d&&this._onUserInput.fire(),this._logService.debug(`sending data "${p}"`,()=>p.split("").map(w=>w.charCodeAt(0))),this._onData.fire(p)}triggerBinaryEvent(p){this._optionsService.rawOptions.disableStdin||(this._logService.debug(`sending binary "${p}"`,()=>p.split("").map(d=>d.charCodeAt(0))),this._onBinary.fire(p))}};_=h([u(0,f.IBufferService),u(1,f.ILogService),u(2,f.IOptionsService)],_),o.CoreService=_},9074:(c,o,a)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.DecorationService=void 0;const h=a(8055),u=a(8460),f=a(844),b=a(6106);let y=0,v=0;class m extends f.Disposable{constructor(){super(),this._decorations=new b.SortedList(p=>p==null?void 0:p.marker.line),this._onDecorationRegistered=this.register(new u.EventEmitter),this.onDecorationRegistered=this._onDecorationRegistered.event,this._onDecorationRemoved=this.register(new u.EventEmitter),this.onDecorationRemoved=this._onDecorationRemoved.event,this.register((0,f.toDisposable)(()=>{for(const p of this._decorations.values())this._onDecorationRemoved.fire(p);this.reset()}))}get decorations(){return this._decorations.values()}registerDecoration(p){if(p.marker.isDisposed)return;const d=new l(p);if(d){const g=d.marker.onDispose(()=>d.dispose());d.onDispose(()=>{d&&(this._decorations.delete(d)&&this._onDecorationRemoved.fire(d),g.dispose())}),this._decorations.insert(d),this._onDecorationRegistered.fire(d)}return d}reset(){for(const p of this._decorations.values())p.dispose();this._decorations.clear()}*getDecorationsAtCell(p,d,g){var w,E,C;let S=0,k=0;for(const D of this._decorations.getKeyIterator(d))S=(w=D.options.x)!==null&&w!==void 0?w:0,k=S+((E=D.options.width)!==null&&E!==void 0?E:1),p>=S&&p<k&&(!g||((C=D.options.layer)!==null&&C!==void 0?C:"bottom")===g)&&(yield D)}forEachDecorationAtCell(p,d,g,w){this._decorations.forEachByKey(d,E=>{var C,S,k;y=(C=E.options.x)!==null&&C!==void 0?C:0,v=y+((S=E.options.width)!==null&&S!==void 0?S:1),p>=y&&p<v&&(!g||((k=E.options.layer)!==null&&k!==void 0?k:"bottom")===g)&&w(E)})}dispose(){for(const p of this._decorations.values())this._onDecorationRemoved.fire(p);this.reset()}}o.DecorationService=m;class l extends f.Disposable{constructor(p){super(),this.options=p,this.onRenderEmitter=this.register(new u.EventEmitter),this.onRender=this.onRenderEmitter.event,this._onDispose=this.register(new u.EventEmitter),this.onDispose=this._onDispose.event,this._cachedBg=null,this._cachedFg=null,this.marker=p.marker,this.options.overviewRulerOptions&&!this.options.overviewRulerOptions.position&&(this.options.overviewRulerOptions.position="full")}get isDisposed(){return this._isDisposed}get backgroundColorRGB(){return this._cachedBg===null&&(this.options.backgroundColor?this._cachedBg=h.css.toColor(this.options.backgroundColor):this._cachedBg=void 0),this._cachedBg}get foregroundColorRGB(){return this._cachedFg===null&&(this.options.foregroundColor?this._cachedFg=h.css.toColor(this.options.foregroundColor):this._cachedFg=void 0),this._cachedFg}dispose(){this._onDispose.fire(),super.dispose()}}},4348:(c,o,a)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.InstantiationService=o.ServiceCollection=void 0;const h=a(2585),u=a(8343);class f{constructor(...y){this._entries=new Map;for(const[v,m]of y)this.set(v,m)}set(y,v){const m=this._entries.get(y);return this._entries.set(y,v),m}forEach(y){for(const[v,m]of this._entries.entries())y(v,m)}has(y){return this._entries.has(y)}get(y){return this._entries.get(y)}}o.ServiceCollection=f,o.InstantiationService=class{constructor(){this._services=new f,this._services.set(h.IInstantiationService,this)}setService(b,y){this._services.set(b,y)}getService(b){return this._services.get(b)}createInstance(b,...y){const v=(0,u.getServiceDependencies)(b).sort((_,p)=>_.index-p.index),m=[];for(const _ of v){const p=this._services.get(_.id);if(!p)throw new Error(`[createInstance] ${b.name} depends on UNKNOWN service ${_.id}.`);m.push(p)}const l=v.length>0?v[0].index:y.length;if(y.length!==l)throw new Error(`[createInstance] First service dependency of ${b.name} at position ${l+1} conflicts with ${y.length} static arguments`);return new b(...y,...m)}}},7866:function(c,o,a){var h=this&&this.__decorate||function(m,l,_,p){var d,g=arguments.length,w=g<3?l:p===null?p=Object.getOwnPropertyDescriptor(l,_):p;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")w=Reflect.decorate(m,l,_,p);else for(var E=m.length-1;E>=0;E--)(d=m[E])&&(w=(g<3?d(w):g>3?d(l,_,w):d(l,_))||w);return g>3&&w&&Object.defineProperty(l,_,w),w},u=this&&this.__param||function(m,l){return function(_,p){l(_,p,m)}};Object.defineProperty(o,"__esModule",{value:!0}),o.LogService=void 0;const f=a(844),b=a(2585),y={debug:b.LogLevelEnum.DEBUG,info:b.LogLevelEnum.INFO,warn:b.LogLevelEnum.WARN,error:b.LogLevelEnum.ERROR,off:b.LogLevelEnum.OFF};let v=class extends f.Disposable{constructor(m){super(),this._optionsService=m,this.logLevel=b.LogLevelEnum.OFF,this._updateLogLevel(),this.register(this._optionsService.onSpecificOptionChange("logLevel",()=>this._updateLogLevel()))}_updateLogLevel(){this.logLevel=y[this._optionsService.rawOptions.logLevel]}_evalLazyOptionalParams(m){for(let l=0;l<m.length;l++)typeof m[l]=="function"&&(m[l]=m[l]())}_log(m,l,_){this._evalLazyOptionalParams(_),m.call(console,"xterm.js: "+l,..._)}debug(m,...l){this.logLevel<=b.LogLevelEnum.DEBUG&&this._log(console.log,m,l)}info(m,...l){this.logLevel<=b.LogLevelEnum.INFO&&this._log(console.info,m,l)}warn(m,...l){this.logLevel<=b.LogLevelEnum.WARN&&this._log(console.warn,m,l)}error(m,...l){this.logLevel<=b.LogLevelEnum.ERROR&&this._log(console.error,m,l)}};v=h([u(0,b.IOptionsService)],v),o.LogService=v},7302:(c,o,a)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.OptionsService=o.DEFAULT_OPTIONS=void 0;const h=a(8460),u=a(6114),f=a(844);o.DEFAULT_OPTIONS={cols:80,rows:24,cursorBlink:!1,cursorStyle:"block",cursorWidth:1,customGlyphs:!0,drawBoldTextInBrightColors:!0,fastScrollModifier:"alt",fastScrollSensitivity:5,fontFamily:"courier-new, courier, monospace",fontSize:15,fontWeight:"normal",fontWeightBold:"bold",lineHeight:1,letterSpacing:0,linkHandler:null,logLevel:"info",scrollback:1e3,scrollOnUserInput:!0,scrollSensitivity:1,screenReaderMode:!1,smoothScrollDuration:0,macOptionIsMeta:!1,macOptionClickForcesSelection:!1,minimumContrastRatio:1,disableStdin:!1,allowProposedApi:!1,allowTransparency:!1,tabStopWidth:8,theme:{},rightClickSelectsWord:u.isMac,windowOptions:{},windowsMode:!1,windowsPty:{},wordSeparator:" ()[]{}',\"`",altClickMovesCursor:!0,convertEol:!1,termName:"xterm",cancelEvents:!1,overviewRulerWidth:0};const b=["normal","bold","100","200","300","400","500","600","700","800","900"];class y extends f.Disposable{constructor(m){super(),this._onOptionChange=this.register(new h.EventEmitter),this.onOptionChange=this._onOptionChange.event;const l=Object.assign({},o.DEFAULT_OPTIONS);for(const _ in m)if(_ in l)try{const p=m[_];l[_]=this._sanitizeAndValidateOption(_,p)}catch(p){console.error(p)}this.rawOptions=l,this.options=Object.assign({},l),this._setupOptions()}onSpecificOptionChange(m,l){return this.onOptionChange(_=>{_===m&&l(this.rawOptions[m])})}onMultipleOptionChange(m,l){return this.onOptionChange(_=>{m.indexOf(_)!==-1&&l()})}_setupOptions(){const m=_=>{if(!(_ in o.DEFAULT_OPTIONS))throw new Error(`No option with key "${_}"`);return this.rawOptions[_]},l=(_,p)=>{if(!(_ in o.DEFAULT_OPTIONS))throw new Error(`No option with key "${_}"`);p=this._sanitizeAndValidateOption(_,p),this.rawOptions[_]!==p&&(this.rawOptions[_]=p,this._onOptionChange.fire(_))};for(const _ in this.rawOptions){const p={get:m.bind(this,_),set:l.bind(this,_)};Object.defineProperty(this.options,_,p)}}_sanitizeAndValidateOption(m,l){switch(m){case"cursorStyle":if(l||(l=o.DEFAULT_OPTIONS[m]),!function(_){return _==="block"||_==="underline"||_==="bar"}(l))throw new Error(`"${l}" is not a valid value for ${m}`);break;case"wordSeparator":l||(l=o.DEFAULT_OPTIONS[m]);break;case"fontWeight":case"fontWeightBold":if(typeof l=="number"&&1<=l&&l<=1e3)break;l=b.includes(l)?l:o.DEFAULT_OPTIONS[m];break;case"cursorWidth":l=Math.floor(l);case"lineHeight":case"tabStopWidth":if(l<1)throw new Error(`${m} cannot be less than 1, value: ${l}`);break;case"minimumContrastRatio":l=Math.max(1,Math.min(21,Math.round(10*l)/10));break;case"scrollback":if((l=Math.min(l,4294967295))<0)throw new Error(`${m} cannot be less than 0, value: ${l}`);break;case"fastScrollSensitivity":case"scrollSensitivity":if(l<=0)throw new Error(`${m} cannot be less than or equal to 0, value: ${l}`);break;case"rows":case"cols":if(!l&&l!==0)throw new Error(`${m} must be numeric, value: ${l}`);break;case"windowsPty":l=l??{}}return l}}o.OptionsService=y},2660:function(c,o,a){var h=this&&this.__decorate||function(y,v,m,l){var _,p=arguments.length,d=p<3?v:l===null?l=Object.getOwnPropertyDescriptor(v,m):l;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")d=Reflect.decorate(y,v,m,l);else for(var g=y.length-1;g>=0;g--)(_=y[g])&&(d=(p<3?_(d):p>3?_(v,m,d):_(v,m))||d);return p>3&&d&&Object.defineProperty(v,m,d),d},u=this&&this.__param||function(y,v){return function(m,l){v(m,l,y)}};Object.defineProperty(o,"__esModule",{value:!0}),o.OscLinkService=void 0;const f=a(2585);let b=class{constructor(y){this._bufferService=y,this._nextId=1,this._entriesWithId=new Map,this._dataByLinkId=new Map}registerLink(y){const v=this._bufferService.buffer;if(y.id===void 0){const g=v.addMarker(v.ybase+v.y),w={data:y,id:this._nextId++,lines:[g]};return g.onDispose(()=>this._removeMarkerFromLink(w,g)),this._dataByLinkId.set(w.id,w),w.id}const m=y,l=this._getEntryIdKey(m),_=this._entriesWithId.get(l);if(_)return this.addLineToLink(_.id,v.ybase+v.y),_.id;const p=v.addMarker(v.ybase+v.y),d={id:this._nextId++,key:this._getEntryIdKey(m),data:m,lines:[p]};return p.onDispose(()=>this._removeMarkerFromLink(d,p)),this._entriesWithId.set(d.key,d),this._dataByLinkId.set(d.id,d),d.id}addLineToLink(y,v){const m=this._dataByLinkId.get(y);if(m&&m.lines.every(l=>l.line!==v)){const l=this._bufferService.buffer.addMarker(v);m.lines.push(l),l.onDispose(()=>this._removeMarkerFromLink(m,l))}}getLinkData(y){var v;return(v=this._dataByLinkId.get(y))===null||v===void 0?void 0:v.data}_getEntryIdKey(y){return`${y.id};;${y.uri}`}_removeMarkerFromLink(y,v){const m=y.lines.indexOf(v);m!==-1&&(y.lines.splice(m,1),y.lines.length===0&&(y.data.id!==void 0&&this._entriesWithId.delete(y.key),this._dataByLinkId.delete(y.id)))}};b=h([u(0,f.IBufferService)],b),o.OscLinkService=b},8343:(c,o)=>{function a(h,u,f){u.di$target===u?u.di$dependencies.push({id:h,index:f}):(u.di$dependencies=[{id:h,index:f}],u.di$target=u)}Object.defineProperty(o,"__esModule",{value:!0}),o.createDecorator=o.getServiceDependencies=o.serviceRegistry=void 0,o.serviceRegistry=new Map,o.getServiceDependencies=function(h){return h.di$dependencies||[]},o.createDecorator=function(h){if(o.serviceRegistry.has(h))return o.serviceRegistry.get(h);const u=function(f,b,y){if(arguments.length!==3)throw new Error("@IServiceName-decorator can only be used to decorate a parameter");a(u,f,y)};return u.toString=()=>h,o.serviceRegistry.set(h,u),u}},2585:(c,o,a)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.IDecorationService=o.IUnicodeService=o.IOscLinkService=o.IOptionsService=o.ILogService=o.LogLevelEnum=o.IInstantiationService=o.ICharsetService=o.ICoreService=o.ICoreMouseService=o.IBufferService=void 0;const h=a(8343);var u;o.IBufferService=(0,h.createDecorator)("BufferService"),o.ICoreMouseService=(0,h.createDecorator)("CoreMouseService"),o.ICoreService=(0,h.createDecorator)("CoreService"),o.ICharsetService=(0,h.createDecorator)("CharsetService"),o.IInstantiationService=(0,h.createDecorator)("InstantiationService"),(u=o.LogLevelEnum||(o.LogLevelEnum={}))[u.DEBUG=0]="DEBUG",u[u.INFO=1]="INFO",u[u.WARN=2]="WARN",u[u.ERROR=3]="ERROR",u[u.OFF=4]="OFF",o.ILogService=(0,h.createDecorator)("LogService"),o.IOptionsService=(0,h.createDecorator)("OptionsService"),o.IOscLinkService=(0,h.createDecorator)("OscLinkService"),o.IUnicodeService=(0,h.createDecorator)("UnicodeService"),o.IDecorationService=(0,h.createDecorator)("DecorationService")},1480:(c,o,a)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.UnicodeService=void 0;const h=a(8460),u=a(225);o.UnicodeService=class{constructor(){this._providers=Object.create(null),this._active="",this._onChange=new h.EventEmitter,this.onChange=this._onChange.event;const f=new u.UnicodeV6;this.register(f),this._active=f.version,this._activeProvider=f}dispose(){this._onChange.dispose()}get versions(){return Object.keys(this._providers)}get activeVersion(){return this._active}set activeVersion(f){if(!this._providers[f])throw new Error(`unknown Unicode version "${f}"`);this._active=f,this._activeProvider=this._providers[f],this._onChange.fire(f)}register(f){this._providers[f.version]=f}wcwidth(f){return this._activeProvider.wcwidth(f)}getStringCellWidth(f){let b=0;const y=f.length;for(let v=0;v<y;++v){let m=f.charCodeAt(v);if(55296<=m&&m<=56319){if(++v>=y)return b+this.wcwidth(m);const l=f.charCodeAt(v);56320<=l&&l<=57343?m=1024*(m-55296)+l-56320+65536:b+=this.wcwidth(l)}b+=this.wcwidth(m)}return b}}}},s={};function r(c){var o=s[c];if(o!==void 0)return o.exports;var a=s[c]={exports:{}};return i[c].call(a.exports,a,a.exports,r),a.exports}var n={};return(()=>{var c=n;Object.defineProperty(c,"__esModule",{value:!0}),c.Terminal=void 0;const o=r(3236),a=r(9042),h=r(7975),u=r(7090),f=r(5741),b=r(8285),y=["cols","rows"];c.Terminal=class{constructor(v){this._core=new o.Terminal(v),this._addonManager=new f.AddonManager,this._publicOptions=Object.assign({},this._core.options);const m=_=>this._core.options[_],l=(_,p)=>{this._checkReadonlyOptions(_),this._core.options[_]=p};for(const _ in this._core.options){const p={get:m.bind(this,_),set:l.bind(this,_)};Object.defineProperty(this._publicOptions,_,p)}}_checkReadonlyOptions(v){if(y.includes(v))throw new Error(`Option "${v}" can only be set in the constructor`)}_checkProposedApi(){if(!this._core.optionsService.rawOptions.allowProposedApi)throw new Error("You must set the allowProposedApi option to true to use proposed API")}get onBell(){return this._core.onBell}get onBinary(){return this._core.onBinary}get onCursorMove(){return this._core.onCursorMove}get onData(){return this._core.onData}get onKey(){return this._core.onKey}get onLineFeed(){return this._core.onLineFeed}get onRender(){return this._core.onRender}get onResize(){return this._core.onResize}get onScroll(){return this._core.onScroll}get onSelectionChange(){return this._core.onSelectionChange}get onTitleChange(){return this._core.onTitleChange}get onWriteParsed(){return this._core.onWriteParsed}get element(){return this._core.element}get parser(){return this._parser||(this._parser=new h.ParserApi(this._core)),this._parser}get unicode(){return this._checkProposedApi(),new u.UnicodeApi(this._core)}get textarea(){return this._core.textarea}get rows(){return this._core.rows}get cols(){return this._core.cols}get buffer(){return this._buffer||(this._buffer=new b.BufferNamespaceApi(this._core)),this._buffer}get markers(){return this._checkProposedApi(),this._core.markers}get modes(){const v=this._core.coreService.decPrivateModes;let m="none";switch(this._core.coreMouseService.activeProtocol){case"X10":m="x10";break;case"VT200":m="vt200";break;case"DRAG":m="drag";break;case"ANY":m="any"}return{applicationCursorKeysMode:v.applicationCursorKeys,applicationKeypadMode:v.applicationKeypad,bracketedPasteMode:v.bracketedPasteMode,insertMode:this._core.coreService.modes.insertMode,mouseTrackingMode:m,originMode:v.origin,reverseWraparoundMode:v.reverseWraparound,sendFocusMode:v.sendFocus,wraparoundMode:v.wraparound}}get options(){return this._publicOptions}set options(v){for(const m in v)this._publicOptions[m]=v[m]}blur(){this._core.blur()}focus(){this._core.focus()}resize(v,m){this._verifyIntegers(v,m),this._core.resize(v,m)}open(v){this._core.open(v)}attachCustomKeyEventHandler(v){this._core.attachCustomKeyEventHandler(v)}registerLinkProvider(v){return this._core.registerLinkProvider(v)}registerCharacterJoiner(v){return this._checkProposedApi(),this._core.registerCharacterJoiner(v)}deregisterCharacterJoiner(v){this._checkProposedApi(),this._core.deregisterCharacterJoiner(v)}registerMarker(v=0){return this._verifyIntegers(v),this._core.addMarker(v)}registerDecoration(v){var m,l,_;return this._checkProposedApi(),this._verifyPositiveIntegers((m=v.x)!==null&&m!==void 0?m:0,(l=v.width)!==null&&l!==void 0?l:0,(_=v.height)!==null&&_!==void 0?_:0),this._core.registerDecoration(v)}hasSelection(){return this._core.hasSelection()}select(v,m,l){this._verifyIntegers(v,m,l),this._core.select(v,m,l)}getSelection(){return this._core.getSelection()}getSelectionPosition(){return this._core.getSelectionPosition()}clearSelection(){this._core.clearSelection()}selectAll(){this._core.selectAll()}selectLines(v,m){this._verifyIntegers(v,m),this._core.selectLines(v,m)}dispose(){this._addonManager.dispose(),this._core.dispose()}scrollLines(v){this._verifyIntegers(v),this._core.scrollLines(v)}scrollPages(v){this._verifyIntegers(v),this._core.scrollPages(v)}scrollToTop(){this._core.scrollToTop()}scrollToBottom(){this._core.scrollToBottom()}scrollToLine(v){this._verifyIntegers(v),this._core.scrollToLine(v)}clear(){this._core.clear()}write(v,m){this._core.write(v,m)}writeln(v,m){this._core.write(v),this._core.write(`\r
`,m)}paste(v){this._core.paste(v)}refresh(v,m){this._verifyIntegers(v,m),this._core.refresh(v,m)}reset(){this._core.reset()}clearTextureAtlas(){this._core.clearTextureAtlas()}loadAddon(v){return this._addonManager.loadAddon(this,v)}static get strings(){return a}_verifyIntegers(...v){for(const m of v)if(m===1/0||isNaN(m)||m%1!=0)throw new Error("This API only accepts integers")}_verifyPositiveIntegers(...v){for(const m of v)if(m&&(m===1/0||isNaN(m)||m%1!=0||m<0))throw new Error("This API only accepts positive integers")}}})(),n})())})(wl);var W1=wl.exports,kl={exports:{}};(function(e,t){(function(i,s){e.exports=s()})(self,function(){return(()=>{var i={};return(()=>{var s=i;Object.defineProperty(s,"__esModule",{value:!0}),s.FitAddon=void 0,s.FitAddon=class{constructor(){}activate(r){this._terminal=r}dispose(){}fit(){const r=this.proposeDimensions();if(!r||!this._terminal||isNaN(r.cols)||isNaN(r.rows))return;const n=this._terminal._core;this._terminal.rows===r.rows&&this._terminal.cols===r.cols||(n._renderService.clear(),this._terminal.resize(r.cols,r.rows))}proposeDimensions(){if(!this._terminal||!this._terminal.element||!this._terminal.element.parentElement)return;const r=this._terminal._core,n=r._renderService.dimensions;if(n.css.cell.width===0||n.css.cell.height===0)return;const c=this._terminal.options.scrollback===0?0:r.viewport.scrollBarWidth,o=window.getComputedStyle(this._terminal.element.parentElement),a=parseInt(o.getPropertyValue("height")),h=Math.max(0,parseInt(o.getPropertyValue("width"))),u=window.getComputedStyle(this._terminal.element),f=a-(parseInt(u.getPropertyValue("padding-top"))+parseInt(u.getPropertyValue("padding-bottom"))),b=h-(parseInt(u.getPropertyValue("padding-right"))+parseInt(u.getPropertyValue("padding-left")))-c;return{cols:Math.max(2,Math.floor(b/n.css.cell.width)),rows:Math.max(1,Math.floor(f/n.css.cell.height))}}}})(),i})()})})(kl);var Y1=kl.exports;function z1(){var i,s,r,n,c,o;switch((r=(s=(i=globalThis==null?void 0:globalThis.document)==null?void 0:i.documentElement)==null?void 0:s.dataset)==null?void 0:r.themeMode){case"dark":return!0;case"light":return!1}switch((o=(c=(n=globalThis==null?void 0:globalThis.siyuan)==null?void 0:n.config)==null?void 0:c.appearance)==null?void 0:o.mode){case 1:return!0;case 0:return!1}return window.matchMedia("(prefers-color-scheme: dark)").matches}function q1(){return!z1()}function V1(e,t=100){let i;return function(...s){clearTimeout(i),i=setTimeout(()=>{e.apply(this,s)},t)}}const K1=typeof atob=="function",cn=typeof Buffer=="function",Lo=typeof TextDecoder=="function"?new TextDecoder:void 0;typeof TextEncoder=="function"&&new TextEncoder;const G1="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",$1=Array.prototype.slice.call(G1),as=(e=>{let t={};return e.forEach((i,s)=>t[i]=s),t})($1),J1=/^(?:[A-Za-z\d+\/]{4})*?(?:[A-Za-z\d+\/]{2}(?:==)?|[A-Za-z\d+\/]{3}=?)?$/,ri=String.fromCharCode.bind(String),Ro=typeof Uint8Array.from=="function"?Uint8Array.from.bind(Uint8Array):e=>new Uint8Array(Array.prototype.slice.call(e,0)),El=e=>e.replace(/[^A-Za-z0-9\+\/]/g,""),Z1=/[\xC0-\xDF][\x80-\xBF]|[\xE0-\xEF][\x80-\xBF]{2}|[\xF0-\xF7][\x80-\xBF]{3}/g,X1=e=>{switch(e.length){case 4:var t=(7&e.charCodeAt(0))<<18|(63&e.charCodeAt(1))<<12|(63&e.charCodeAt(2))<<6|63&e.charCodeAt(3),i=t-65536;return ri((i>>>10)+55296)+ri((i&1023)+56320);case 3:return ri((15&e.charCodeAt(0))<<12|(63&e.charCodeAt(1))<<6|63&e.charCodeAt(2));default:return ri((31&e.charCodeAt(0))<<6|63&e.charCodeAt(1))}},Q1=e=>e.replace(Z1,X1),eg=e=>{if(e=e.replace(/\s+/g,""),!J1.test(e))throw new TypeError("malformed base64.");e+="==".slice(2-(e.length&3));let t,i="",s,r;for(let n=0;n<e.length;)t=as[e.charAt(n++)]<<18|as[e.charAt(n++)]<<12|(s=as[e.charAt(n++)])<<6|(r=as[e.charAt(n++)]),i+=s===64?ri(t>>16&255):r===64?ri(t>>16&255,t>>8&255):ri(t>>16&255,t>>8&255,t&255);return i},Dl=K1?e=>atob(El(e)):cn?e=>Buffer.from(e,"base64").toString("binary"):eg,Ll=cn?e=>Ro(Buffer.from(e,"base64")):e=>Ro(Dl(e).split("").map(t=>t.charCodeAt(0))),tg=e=>Ll(Rl(e)),ig=cn?e=>Buffer.from(e,"base64").toString("utf8"):Lo?e=>Lo.decode(Ll(e)):e=>Q1(Dl(e)),Rl=e=>El(e.replace(/[-_]/g,t=>t=="-"?"+":"/")),sg=e=>ig(Rl(e));var rg=function(){var e=document.getSelection();if(!e.rangeCount)return function(){};for(var t=document.activeElement,i=[],s=0;s<e.rangeCount;s++)i.push(e.getRangeAt(s));switch(t.tagName.toUpperCase()){case"INPUT":case"TEXTAREA":t.blur();break;default:t=null;break}return e.removeAllRanges(),function(){e.type==="Caret"&&e.removeAllRanges(),e.rangeCount||i.forEach(function(r){e.addRange(r)}),t&&t.focus()}},ng=rg,To={"text/plain":"Text","text/html":"Url",default:"Text"},og="Copy to clipboard: #{key}, Enter";function ag(e){var t=(/mac os x/i.test(navigator.userAgent)?"⌘":"Ctrl")+"+C";return e.replace(/#{\s*key\s*}/g,t)}function lg(e,t){var i,s,r,n,c,o,a=!1;t||(t={}),i=t.debug||!1;try{r=ng(),n=document.createRange(),c=document.getSelection(),o=document.createElement("span"),o.textContent=e,o.ariaHidden="true",o.style.all="unset",o.style.position="fixed",o.style.top=0,o.style.clip="rect(0, 0, 0, 0)",o.style.whiteSpace="pre",o.style.webkitUserSelect="text",o.style.MozUserSelect="text",o.style.msUserSelect="text",o.style.userSelect="text",o.addEventListener("copy",function(u){if(u.stopPropagation(),t.format)if(u.preventDefault(),typeof u.clipboardData>"u"){i&&console.warn("unable to use e.clipboardData"),i&&console.warn("trying IE specific stuff"),window.clipboardData.clearData();var f=To[t.format]||To.default;window.clipboardData.setData(f,e)}else u.clipboardData.clearData(),u.clipboardData.setData(t.format,e);t.onCopy&&(u.preventDefault(),t.onCopy(u.clipboardData))}),document.body.appendChild(o),n.selectNodeContents(o),c.addRange(n);var h=document.execCommand("copy");if(!h)throw new Error("copy command was unsuccessful");a=!0}catch(u){i&&console.error("unable to copy using execCommand: ",u),i&&console.warn("trying IE specific stuff");try{window.clipboardData.setData(t.format||"text",e),t.onCopy&&t.onCopy(window.clipboardData),a=!0}catch(f){i&&console.error("unable to copy using clipboardData: ",f),i&&console.error("falling back to prompt"),s=ag("message"in t?t.message:og),window.prompt(s,e)}}finally{c&&(typeof c.removeRange=="function"?c.removeRange(n):c.removeAllRanges()),o&&document.body.removeChild(o),r()}return a}var cg=lg;const hg=Sl(cg);function ug(e){if(navigator.clipboard&&window.isSecureContext)return navigator.clipboard.writeText(e);hg(e)}function Ao(e,t){return e.key===t.key&&e.type===t.type&&e.altKey===t.altKey&&e.ctrlKey===t.ctrlKey&&e.metaKey===t.metaKey&&e.shiftKey===t.shiftKey}function fg(e){return class extends dg{constructor(){super(e)}}}var ft;let dg=(ft=class extends HTMLElement{constructor(i){super();fe(this,"save");fe(this,"blockId");fe(this,"linkHref");fe(this,"shadowRoot");fe(this,"link");fe(this,"content");fe(this,"preview");fe(this,"data","");fe(this,"terminal");fe(this,"fitAddon");fe(this,"resizeObserver");fe(this,"customAddon",{activate:i=>{i.attachCustomKeyEventHandler(s=>{if(Ao(s,{type:"keydown",key:"c",ctrlKey:!0,metaKey:!1,altKey:!1,shiftKey:!1})||Ao(s,{type:"keydown",key:"c",ctrlKey:!1,metaKey:!0,altKey:!1,shiftKey:!1})){const r=i.getSelection();return ug(r),!1}return!0})},dispose(){},fit:()=>{var i;(i=this.terminal)==null||i.resize(this.terminal.cols,this.terminal.buffer.active.baseY+this.terminal.buffer.active.cursorY+1)}});this.plugin=i,this.save=this.dataset.save,this.blockId=this.dataset.blockId,this.linkHref=`plugins/${this.plugin.name}/index.css`,this.shadowRoot=this.attachShadow({mode:"open"})}connectedCallback(){var i,s,r;if(this.link=this.querySelector(`link#${ft.ELEMENT_ID_STYLE}`),this.content=this.querySelector(`pre#${ft.ELEMENT_ID_CONTENT}`),this.preview=this.querySelector(`div#${ft.ELEMENT_ID_PREVIEW}`),this.link||(this.link=document.createElement("link"),this.link.id=ft.ELEMENT_ID_STYLE,this.link.rel="stylesheet",this.link.href=this.linkHref,this.shadowRoot.appendChild(this.link)),this.content)if(this.shadowRoot.appendChild(this.content),this.content.style.display="none",this.data=sg(this.content.dataset.stream??""),this.preview)this.shadowRoot.appendChild(this.preview);else{this.preview=document.createElement("div"),this.preview.id=ft.ELEMENT_ID_PREVIEW,this.sizeObserver(this.preview),this.shadowRoot.appendChild(this.preview);const n=q1()?_g:pg;this.terminal=new W1.Terminal({rows:0,theme:n,fontSize:(r=(s=(i=globalThis.siyuan)==null?void 0:i.config)==null?void 0:s.editor)==null?void 0:r.fontSize,...this.plugin.config.xterm.options}),this.fitAddon=new Y1.FitAddon,this.terminal.loadAddon(this.fitAddon),this.terminal.loadAddon(this.customAddon),this.terminal.open(this.preview),this.terminal.write(this.data)}}sizeObserver(i){this.resizeObserver??(this.resizeObserver=new ResizeObserver(V1(()=>{var s,r;try{(s=this.fitAddon)==null||s.fit(),(r=this.customAddon)==null||r.fit()}catch(n){this.plugin.logger.warn(n)}},125))),this.resizeObserver.observe(i,{box:"content-box"})}disconnectedCallback(){var i,s;(i=this.resizeObserver)==null||i.disconnect(),(s=this.terminal)==null||s.dispose()}adoptedCallback(){}attributeChangedCallback(){}},fe(ft,"TAG_NAME","jupyter-xterm-output"),fe(ft,"ELEMENT_ID_STYLE","style"),fe(ft,"ELEMENT_ID_CONTENT","content"),fe(ft,"ELEMENT_ID_PREVIEW","preview"),ft);const Tl={background:"#0000",extendedAnsi:["#000000","#00005f","#000087","#0000af","#0000d7","#0000ff","#005f00","#005f5f","#005f87","#005faf","#005fd7","#005fff","#008700","#00875f","#008787","#0087af","#0087d7","#0087ff","#00af00","#00af5f","#00af87","#00afaf","#00afd7","#00afff","#00d700","#00d75f","#00d787","#00d7af","#00d7d7","#00d7ff","#00ff00","#00ff5f","#00ff87","#00ffaf","#00ffd7","#00ffff","#5f0000","#5f005f","#5f0087","#5f00af","#5f00d7","#5f00ff","#5f5f00","#5f5f5f","#5f5f87","#5f5faf","#5f5fd7","#5f5fff","#5f8700","#5f875f","#5f8787","#5f87af","#5f87d7","#5f87ff","#5faf00","#5faf5f","#5faf87","#5fafaf","#5fafd7","#5fafff","#5fd700","#5fd75f","#5fd787","#5fd7af","#5fd7d7","#5fd7ff","#5fff00","#5fff5f","#5fff87","#5fffaf","#5fffd7","#5fffff","#870000","#87005f","#870087","#8700af","#8700d7","#8700ff","#875f00","#875f5f","#875f87","#875faf","#875fd7","#875fff","#878700","#87875f","#878787","#8787af","#8787d7","#8787ff","#87af00","#87af5f","#87af87","#87afaf","#87afd7","#87afff","#87d700","#87d75f","#87d787","#87d7af","#87d7d7","#87d7ff","#87ff00","#87ff5f","#87ff87","#87ffaf","#87ffd7","#87ffff","#af0000","#af005f","#af0087","#af00af","#af00d7","#af00ff","#af5f00","#af5f5f","#af5f87","#af5faf","#af5fd7","#af5fff","#af8700","#af875f","#af8787","#af87af","#af87d7","#af87ff","#afaf00","#afaf5f","#afaf87","#afafaf","#afafd7","#afafff","#afd700","#afd75f","#afd787","#afd7af","#afd7d7","#afd7ff","#afff00","#afff5f","#afff87","#afffaf","#afffd7","#afffff","#d70000","#d7005f","#d70087","#d700af","#d700d7","#d700ff","#d75f00","#d75f5f","#d75f87","#d75faf","#d75fd7","#d75fff","#d78700","#d7875f","#d78787","#d787af","#d787d7","#d787ff","#d7af00","#d7af5f","#d7af87","#d7afaf","#d7afd7","#d7afff","#d7d700","#d7d75f","#d7d787","#d7d7af","#d7d7d7","#d7d7ff","#d7ff00","#d7ff5f","#d7ff87","#d7ffaf","#d7ffd7","#d7ffff","#ff0000","#ff005f","#ff0087","#ff00af","#ff00d7","#ff00ff","#ff5f00","#ff5f5f","#ff5f87","#ff5faf","#ff5fd7","#ff5fff","#ff8700","#ff875f","#ff8787","#ff87af","#ff87d7","#ff87ff","#ffaf00","#ffaf5f","#ffaf87","#ffafaf","#ffafd7","#ffafff","#ffd700","#ffd75f","#ffd787","#ffd7af","#ffd7d7","#ffd7ff","#ffff00","#ffff5f","#ffff87","#ffffaf","#ffffd7","#ffffff","#080808","#121212","#1c1c1c","#262626","#303030","#3a3a3a","#444444","#4e4e4e","#585858","#626262","#6c6c6c","#767676","#808080","#8a8a8a","#949494","#9e9e9e","#a8a8a8","#b2b2b2","#bcbcbc","#c6c6c6","#d0d0d0","#dadada","#e4e4e4","#eeeeee"]},_g={foreground:"#3e424d",selectionBackground:"#fffe",selectionInactiveBackground:"#fffe",black:"#282c36",red:"#b22b31",green:"#007427",yellow:"#b27d12",blue:"#0065ca",magenta:"#a03196",cyan:"#258f8f",white:"#a1a6b2",brightBlack:"#3e424d",brightRed:"#e75c58",brightGreen:"#00a250",brightYellow:"#ddb62b",brightBlue:"#208ffb",brightMagenta:"#d160c4",brightCyan:"#60c6c8",brightWhite:"#c5c1b4",...Tl},pg={foreground:"#a1a6b2",selectionBackground:"#fff3",selectionInactiveBackground:"#fff3",black:"#3e424d",red:"#e75c58",green:"#00a250",yellow:"#ddb62b",blue:"#208ffb",magenta:"#d160c4",cyan:"#60c6c8",white:"#c5c1b4",brightBlack:"#282c36",brightRed:"#b22b31",brightGreen:"#007427",brightYellow:"#b27d12",brightBlue:"#0065ca",brightMagenta:"#a03196",brightCyan:"#258f8f",brightWhite:"#a1a6b2",...Tl},mg=e=>({}),Mo=e=>({}),gg=e=>({}),Oo=e=>({}),vg=e=>({}),Bo=e=>({});function bg(e){let t;return{c(){t=le("div"),F(t,"class","ft__breakword")},m(i,s){Z(i,t,s),t.innerHTML=e[1]},p(i,s){s&2&&(t.innerHTML=i[1])},d(i){i&&J(t)}}}function yg(e){let t,i,s;return{c(){t=le("input"),t.autofocus=e[5],F(t,"placeholder",e[2]),F(t,"class","b3-text-field fn__block")},m(r,n){Z(r,t,n),st(t,e[0]),e[5]&&t.focus(),i||(s=[ge(t,"input",e[13]),ge(t,"input",e[11]),ge(t,"change",e[10])],i=!0)},p(r,n){n&32&&(t.autofocus=r[5]),n&4&&F(t,"placeholder",r[2]),n&1&&t.value!==r[0]&&st(t,r[0])},d(r){r&&J(t),i=!1,Ye(s)}}}function Sg(e){let t,i;return{c(){t=new Di(!1),i=ct(),t.a=i},m(s,r){t.m(e[3],s,r),Z(s,i,r)},p(s,r){r&8&&t.p(s[3])},d(s){s&&(J(i),t.d())}}}function wg(e){let t,i,s,r,n;const c=e[12].text,o=Xe(c,e,e[14],Bo),a=o||bg(e),h=e[12].input,u=Xe(h,e,e[14],Oo),f=u||yg(e),b=e[12].tips,y=Xe(b,e,e[14],Mo),v=y||Sg(e);return{c(){a&&a.c(),t=he(),i=le("br"),s=he(),f&&f.c(),r=he(),v&&v.c()},m(m,l){a&&a.m(m,l),Z(m,t,l),Z(m,i,l),Z(m,s,l),f&&f.m(m,l),Z(m,r,l),v&&v.m(m,l),n=!0},p(m,l){o?o.p&&(!n||l&16384)&&et(o,c,m,m[14],n?Qe(c,m[14],l,vg):tt(m[14]),Bo):a&&a.p&&(!n||l&2)&&a.p(m,n?l:-1),u?u.p&&(!n||l&16384)&&et(u,h,m,m[14],n?Qe(h,m[14],l,gg):tt(m[14]),Oo):f&&f.p&&(!n||l&37)&&f.p(m,n?l:-1),y?y.p&&(!n||l&16384)&&et(y,b,m,m[14],n?Qe(b,m[14],l,mg):tt(m[14]),Mo):v&&v.p&&(!n||l&8)&&v.p(m,n?l:-1)},i(m){n||(Y(a,m),Y(f,m),Y(v,m),n=!0)},o(m){q(a,m),q(f,m),q(v,m),n=!1},d(m){m&&(J(t),J(i),J(s),J(r)),a&&a.d(m),f&&f.d(m),v&&v.d(m)}}}function Cg(e){let t,i;return t=new ml({props:{selectable:e[4],cancelButtonText:e[6],confirmButtonText:e[7],$$slots:{default:[wg]},$$scope:{ctx:e}}}),t.$on("cancel",e[8]),t.$on("confirm",e[9]),{c(){ne(t.$$.fragment)},m(s,r){ie(t,s,r),i=!0},p(s,[r]){const n={};r&16&&(n.selectable=s[4]),r&64&&(n.cancelButtonText=s[6]),r&128&&(n.confirmButtonText=s[7]),r&16431&&(n.$$scope={dirty:r,ctx:s}),t.$set(n)},i(s){i||(Y(t.$$.fragment,s),i=!0)},o(s){q(t.$$.fragment,s),i=!1},d(s){se(t,s)}}}function kg(e,t,i){var d,g,w,E;let{$$slots:s={},$$scope:r}=t,{text:n=""}=t,{value:c=""}=t,{placeholder:o=""}=t,{tips:a=""}=t,{selectable:h=!0}=t,{autofocus:u=!0}=t,{cancelButtonText:f=((g=(d=globalThis.siyuan)==null?void 0:d.languages)==null?void 0:g.cancel)??"Cancel"}=t,{confirmButtonText:b=((E=(w=globalThis.siyuan)==null?void 0:w.languages)==null?void 0:E.confirm)??"Confirm"}=t;const y=Qt();function v(C){y("cancel",{value:c,event:C.detail.event})}function m(C){y("confirm",{value:c,event:C.detail.event})}function l(C){y("change",{value:c,event:C})}function _(C){y("input",{value:c,event:C})}function p(){c=this.value,i(0,c)}return e.$$set=C=>{"text"in C&&i(1,n=C.text),"value"in C&&i(0,c=C.value),"placeholder"in C&&i(2,o=C.placeholder),"tips"in C&&i(3,a=C.tips),"selectable"in C&&i(4,h=C.selectable),"autofocus"in C&&i(5,u=C.autofocus),"cancelButtonText"in C&&i(6,f=C.cancelButtonText),"confirmButtonText"in C&&i(7,b=C.confirmButtonText),"$$scope"in C&&i(14,r=C.$$scope)},[c,n,o,a,h,u,f,b,v,m,l,_,s,p,r]}class Eg extends Fe{constructor(t){super(),He(this,t,kg,Cg,Pe,{text:1,value:0,placeholder:2,tips:3,selectable:4,autofocus:5,cancelButtonText:6,confirmButtonText:7})}}async function Dg(e,t){return new Promise((i,s)=>{const r=t.confirm,n=t.cancel;t.confirm=async(c,...o)=>{const a=await(r==null?void 0:r.call(t,c,...o))??!0;return a&&i(c),a},t.cancel=async(c,...o)=>{const a=await(n==null?void 0:n.call(t,c,...o))??!0;return a&&s(c),a},Lg(e,t)})}function Lg(e,t){const i=`dialog-prompt-${Date.now()}`,s=new e({title:t.title,content:`<div id="${i}" class="fn__flex-column" />`,width:t.width||void 0,height:t.height||void 0,destroyCallback:()=>r==null?void 0:r.$destroy()}),r=new Eg({target:s.element.querySelector(`#${i}`),props:{text:t.text,value:t.value,placeholder:t.placeholder,tips:t.tips,selectable:t.selectable,autofocus:t.autofocus}});return r.$on("input",async n=>{if(t.input){const c=await t.input(n.detail.value,s,r);r.$set({tips:c})}}),r.$on("change",async n=>{if(t.change){const c=await t.change(n.detail.value,s,r);r.$set({tips:c})}}),r.$on("confirm",async n=>{(t.confirm?await t.confirm(n.detail.value,s,r):!0)&&s.destroy()}),r.$on("cancel",async n=>{(t.cancel?await t.cancel(n.detail.value,s,r):!0)&&s.destroy()}),{id:i,dialog:s,component:r}}Rg();Ag();const dr=Tg();function Rg(){switch(at.getFrontend()){case"desktop":case"desktop-window":case"browser-desktop":return!0;case"mobile":case"browser-mobile":return!1;default:return!1}}function Tg(){switch(at.getFrontend()){case"mobile":case"browser-mobile":return!0;case"desktop":case"desktop-window":case"browser-desktop":return!1;default:return!1}}function Ag(){switch(at.getFrontend()){case"browser-desktop":case"browser-mobile":return!0;case"desktop":case"desktop-window":case"mobile":return!1;default:return!1}}function Mg(e){const{protyle:t,data:i,blockElements:s}=e;if(i){const r={element:t.wysiwyg.element,id:i.id,type:Tu.NodeType.NodeDocument};return{...r,isDocumentBlock:!0,isMultiBlock:!1,blocks:[r],protyle:t,data:i}}else if(s&&s.length>0){const r=[];return s.forEach(n=>{r.push({element:n,id:n.dataset.nodeId,type:n.dataset.type,subtype:n.dataset.subtype})}),{...r[0],isDocumentBlock:!1,isMultiBlock:r.length>1,blocks:r,protyle:t}}return null}function bi(e){return!!(e&&e instanceof HTMLElement&&e.dataset.type&&e.dataset.nodeId&&Si.id.test(e.dataset.nodeId))}function Og(e){return!!(e&&e instanceof HTMLElement&&e.classList.contains("protyle-title")&&e.dataset.nodeId&&Si.id.test(e.dataset.nodeId))}function Bg(e){return!!(e&&e instanceof HTMLElement&&e.classList.contains("protyle-wysiwyg"))}function Pg(){return Array.from(document.querySelectorAll(".protyle-wysiwyg div.protyle-wysiwyg--select[data-node-id]"))}function Al(){var i;const e=document.getSelection();for(var t=(i=e==null?void 0:e.focusNode)==null?void 0:i.parentElement;t&&!bi(t);)t=t.parentElement;return t}function Ig(){const e=Al();return e==null?void 0:e.dataset.nodeId}function xg(){const e=Pg();if(e.length>0)return e;{const t=Al();return t?[t]:[]}}class Ng{constructor(t,i=!0){this.label=t,this.collapsed=i}stdout(t,i,...s){const r=`[\x1B[4m${this.label}\x1B[0m] - <\x1B[1m${t.name.toUpperCase()}\x1B[0m>`;if(this.collapsed?globalThis.console.groupCollapsed(r):globalThis.console.group(r),i)for(const n of s)Array.isArray(n)?t(...n):t(n);else t(...s);globalThis.console.trace(),globalThis.console.groupEnd()}dir(...t){this.stdout(globalThis.console.dir,!1,...t)}dirs(...t){this.stdout(globalThis.console.dir,!0,...t)}table(...t){this.stdout(globalThis.console.table,!1,...t)}tables(...t){this.stdout(globalThis.console.table,!0,...t)}debug(...t){this.stdout(globalThis.console.debug,!1,...t)}debugs(...t){this.stdout(globalThis.console.debug,!0,...t)}info(...t){this.stdout(globalThis.console.info,!1,...t)}infos(...t){this.stdout(globalThis.console.info,!0,...t)}log(...t){this.stdout(globalThis.console.log,!1,...t)}logs(...t){this.stdout(globalThis.console.log,!0,...t)}warn(...t){this.stdout(globalThis.console.warn,!1,...t)}warns(...t){this.stdout(globalThis.console.warn,!0,...t)}error(...t){this.stdout(globalThis.console.error,!1,...t)}errors(...t){this.stdout(globalThis.console.error,!0,...t)}}function Hg(e,t,i="span"){return`<${i} class="${t}">${e}</${i}>`}function ht(e){return Hg(e,"fn__code","code")}var Fg=function(t){return jg(t)&&!Ug(t)};function jg(e){return!!e&&typeof e=="object"}function Ug(e){var t=Object.prototype.toString.call(e);return t==="[object RegExp]"||t==="[object Date]"||zg(e)}var Wg=typeof Symbol=="function"&&Symbol.for,Yg=Wg?Symbol.for("react.element"):60103;function zg(e){return e.$$typeof===Yg}function qg(e){return Array.isArray(e)?[]:{}}function qi(e,t){return t.clone!==!1&&t.isMergeableObject(e)?Ci(qg(e),e,t):e}function Vg(e,t,i){return e.concat(t).map(function(s){return qi(s,i)})}function Kg(e,t){if(!t.customMerge)return Ci;var i=t.customMerge(e);return typeof i=="function"?i:Ci}function Gg(e){return Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(e).filter(function(t){return Object.propertyIsEnumerable.call(e,t)}):[]}function Po(e){return Object.keys(e).concat(Gg(e))}function Ml(e,t){try{return t in e}catch{return!1}}function $g(e,t){return Ml(e,t)&&!(Object.hasOwnProperty.call(e,t)&&Object.propertyIsEnumerable.call(e,t))}function Jg(e,t,i){var s={};return i.isMergeableObject(e)&&Po(e).forEach(function(r){s[r]=qi(e[r],i)}),Po(t).forEach(function(r){$g(e,r)||(Ml(e,r)&&i.isMergeableObject(t[r])?s[r]=Kg(r,i)(e[r],t[r],i):s[r]=qi(t[r],i))}),s}function Ci(e,t,i){i=i||{},i.arrayMerge=i.arrayMerge||Vg,i.isMergeableObject=i.isMergeableObject||Fg,i.cloneUnlessOtherwiseSpecified=qi;var s=Array.isArray(t),r=Array.isArray(e),n=s===r;return n?s?i.arrayMerge(e,t,i):Jg(e,t,i):qi(t,i)}Ci.all=function(t,i){if(!Array.isArray(t))throw new Error("first argument should be an array");return t.reduce(function(s,r){return Ci(s,r,i)},{})};var Zg=Ci,Xg=Zg;const Qg=Sl(Xg);function Io(...e){return Qg.all(e,{arrayMerge:(t,i,s)=>i})}class ev{constructor(t,i,s,r){this.port=t,this.logger=i,this.handlers=s,this.uuid=r,this.map=new Map,this.counter=Math.random(),this.errerEventListener=async n=>{this.logger.warn(n)},this.messageEventListener=async n=>{const c=n.data;switch(c.type){case"call":{try{if(c.uuid&&c.uuid!==this.uuid)break;if(c.handler.name in this.handlers){const o=this.handlers[c.handler.name],a=await o.func.call(o.this,...c.handler.args),h={type:"return",id:c.id,handler:{name:c.handler.name,result:a}};this.port.postMessage(h)}}catch(o){const a={type:"error",id:c.id,error:o};this.port.postMessage(a)}break}case"error":{const o=this.map.get(c.id);o&&(this.map.delete(c.id),o.reject(c.error));break}case"return":{const o=this.map.get(c.id);o&&(this.map.delete(c.id),o.resolve(c.handler.result));break}}},this.port.addEventListener("error",this.errerEventListener),this.port.addEventListener("messageerror",this.errerEventListener),this.port.addEventListener("message",this.messageEventListener)}async call(t,...i){return new Promise((s,r)=>{const n=this.counter++;this.map.set(n,{resolve:s,reject:r});const c={type:"call",id:n,handler:{name:t,args:i}};this.port.postMessage(c)})}async singleCall(t,i,...s){return new Promise((r,n)=>{const c=this.counter++;this.map.set(c,{resolve:r,reject:n});const o={type:"call",id:c,uuid:i,handler:{name:t,args:s}};this.port.postMessage(o)})}}function*Ol(e=0){for(;;)yield e++}const tv=Ol(Math.round(Math.random()*(36**8-1)));function iv(e,t){return`${e.getFullYear().toString().padStart(4,"0")}${(e.getMonth()+1).toString().padStart(2,"0")}${e.getDate().toString().padStart(2,"0")}${e.getHours().toString().padStart(2,"0")}${e.getMinutes().toString().padStart(2,"0")}${e.getSeconds().toString().padStart(2,"0")}-${t.toString(36).padStart(7,"0").slice(-7)}`}function sv(e=new Date,t=tv){return iv(e,t.next().value)}class rv extends ev{constructor(t,i,s={},r=sv()){super(t,i,s,r)}async ping(t=1e3){const i=Date.now();return new Promise((s,r)=>{const n=setTimeout(()=>{r(new Error(`timeout: ${t}`))},t);this.port.addEventListener("message",c=>{c.data==="pong"&&(clearTimeout(n),s(Date.now()-i))}),this.port.postMessage("ping")})}terminate(){switch(!0){case"terminate"in this.port:this.port.terminate();break;case"close"in this.port:this.port.close();break}}}async function nv(e){return new Promise(t=>{setTimeout(t,e)})}const pe={JUPYTER_WORKER_FILE_NAME:"jupyter",JUPYTER_WORKER_BROADCAST_CHANNEL_NAME:"jupyter-worker",JUPYTER_UNKNOWN_VALUE:"unknown",JUPYTER_LAST_RUN_TIME_FORMAT:"YYYY-MM-DD HH:mm:ss.SSS",JUPYTER_RUNTIME_FORMAT:"HH:mm:ss.SSS",attrs:{kernel:{id:"custom-jupyter-kernel-id",name:"custom-jupyter-kernel-name",language:"custom-jupyter-kernel-language",display_name:"custom-jupyter-kernel-display-name",status:"custom-jupyter-kernel-status",connection_status:"custom-jupyter-kernel-connection-status"},session:{id:"custom-jupyter-session-id",type:"custom-jupyter-session-type",name:"custom-jupyter-session-name",path:"custom-jupyter-session-path"},code:{type:{key:"custom-jupyter-block-type",value:"code"},time:"custom-jupyter-time",output:"custom-jupyter-output-block-id",index:"custom-jupyter-index",execute_input:"custom-jupyter-time-execute-input",execute_reply:"custom-jupyter-time-execute-reply",busy:"custom-jupyter-time-busy",idle:"custom-jupyter-time-idle"},output:{type:{key:"custom-jupyter-block-type",value:"output"},code:"custom-jupyter-code-block-id",index:"custom-jupyter-index"},other:{prompt:"custom-prompt"}},styles:{success:"color: var(--b3-card-success-color); background-color: var(--b3-card-success-background);",info:"color: var(--b3-card-info-color); background-color: var(--b3-card-info-background);",warning:"color: var(--b3-card-warning-color); background-color: var(--b3-card-warning-background);",error:"color: var(--b3-card-error-color); background-color: var(--b3-card-error-background);"}},_r={jupyter:{server:{enable:!1,settings:{baseUrl:"",appUrl:"",wsUrl:"",token:""}},execute:{goto:!0,content:{silent:!1,store_history:!0,user_expressions:{},allow_stdin:!0,stop_on_error:!0},input:{goto:!0},output:{parser:{xterm:!1,escaped:!0,cntrl:!0}}},import:{parser:{xterm:!1,escaped:!0,cntrl:!0}}},xterm:{options:{allowTransparency:!0,disableStdin:!0,convertEol:!0,logLevel:"off",fontFamily:"JetBrainsMono-Regular"}}},{replace:ov}="",av=/[&<>'"]/g,lv={"&":"&amp;","<":"&lt;",">":"&gt;","'":"&#39;",'"':"&quot;"},cv=e=>lv[e],hv=e=>ov.call(e,av,cv);function uv(e){let t=[];for(const[i,s]of Object.entries(e))s&&t.push(`${i}="${hv(s).replaceAll(`
`,"_esc_newline_")}"`);return`{: ${t.join(" ")}}`}function Es(e,t){const i=document.createElement("div");return i.innerHTML=e,Array.from(i.querySelectorAll("div.code-block[data-node-id]")).filter(r=>t?r.getAttribute(pe.attrs.code.type.key)===pe.attrs.code.type.value:!0).map(r=>({id:r.dataset.nodeId,code:globalThis.Lute.BlockDOM2Content(r.outerHTML)}))}function fv(){const e={cells:[],elements:xg()};switch(e.elements.length){case 0:break;case 1:e.cells=Es(e.elements[0].outerHTML,!1);break;default:e.cells=Es(e.elements.reduce((t,i)=>(t.push(i.outerHTML),t),[]).join(""),!0);break}return e}function dv(e=(s=>(s=(i=>(i=globalThis.siyuan)==null?void 0:i.storage)())==null?void 0:s["local-codelang"])()??"",t=" "){return[`\`\`\`${e}`,"","```",uv({[pe.attrs.code.type.key]:pe.attrs.code.type.value,[pe.attrs.code.index]:t})].join(`
`)}function xo(e){return bi(e)&&(e==null?void 0:e.getAttribute(pe.attrs.code.type.key))===pe.attrs.code.type.value}function _v(e){return bi(e)&&(e==null?void 0:e.getAttribute(pe.attrs.output.type.key))===pe.attrs.output.type.value}const Fi=class Fi extends at.Plugin{constructor(i){super(i);fe(this,"siyuan",at);fe(this,"logger");fe(this,"client");fe(this,"SETTINGS_DIALOG_ID");fe(this,"config",_r);fe(this,"worker");fe(this,"bridge");fe(this,"jupyterDock");fe(this,"doc2session",new Map);fe(this,"doc2info",new Map);fe(this,"session2docs",new Map);fe(this,"handlers");fe(this,"kernelspecs",{default:"",kernelspecs:{}});fe(this,"kernels",[]);fe(this,"sessions",[]);fe(this,"kernelName2logoObjectURL",new Map);fe(this,"kernelName2language",new Map);fe(this,"kernelName2displayName",new Map);fe(this,"counter",Ol());fe(this,"username",`siyuan-${at.getBackend()}-${at.getFrontend()}`);fe(this,"clientId",globalThis.Lute.NewNodeID());fe(this,"blockMenuEventListener",i=>{const s=i.detail,r=Mg(s);if(r){const n=this.doc2session.get(r.protyle.block.rootID),c=[];r.isDocumentBlock?c.push(...this.buildJupyterDocumentMenuItems(r.id,r.data.ial,n,r)):c.push(...this.buildExecuteMenuItems(!1,n,r)),s.menu.addItem({submenu:c,icon:"icon-jupyter-client-simple",label:this.i18n.displayName,accelerator:this.name}),this.updateDockFocusItem(r.protyle.block.rootID)}});fe(this,"clickEditorContentEventListener",i=>{var r,n,c;const s=i.detail.protyle;(n=(r=s.background)==null?void 0:r.ial)!=null&&n[pe.attrs.kernel.language]&&(c=globalThis.siyuan)!=null&&c.storage&&(globalThis.siyuan.storage["local-codelang"]=s.background.ial[pe.attrs.kernel.language]),this.updateDockFocusItem(s.block.rootID)});fe(this,"loadedProtyleEventListener",async i=>{var r,n,c,o;const s=i.detail;if(!this.doc2session.has(s.block.rootID)){const a={};(n=(r=s.background)==null?void 0:r.ial)!=null&&n[pe.attrs.kernel.connection_status]&&s.background.ial[pe.attrs.kernel.connection_status]!=="disconnected"&&(a[pe.attrs.kernel.connection_status]="disconnected"),(o=(c=s.background)==null?void 0:c.ial)!=null&&o[pe.attrs.kernel.status]&&s.background.ial[pe.attrs.kernel.status]!=="unknown"&&(a[pe.attrs.kernel.status]="unknown"),Object.keys(a).length>0&&await this.client.setBlockAttrs({id:s.block.rootID,attrs:a})}});fe(this,"inputRequest",async(i,s,r="")=>{if(s===this.clientId){this.config.jupyter.execute.input.goto&&await this.gotoBlock(i);try{return await Dg(this.siyuan.Dialog,{title:this.i18n.messages.inputRequest.title,text:r?ht(r):void 0,cancel:()=>!1})}catch{return}}});fe(this,"updateKernelSpecs",i=>{var s;Object.assign(this.kernelspecs,i);for(const[r,n]of Object.entries(i.kernelspecs))n&&(this.kernelName2language.set(r,n.language),this.kernelName2displayName.set(r,n.display_name));(s=this.jupyterDock.component)==null||s.$set({kernelspecs:i})});fe(this,"updateKernels",i=>{var s;this.kernels.length=0,this.kernels.push(...i),(s=this.jupyterDock.component)==null||s.$set({kernels:i})});fe(this,"updateSessions",i=>{var r;const s=new Set(i.map(n=>n.id));for(const n of this.session2docs.keys())if(!s.has(n)){const c=this.session2docs.get(n);c&&c.forEach(o=>this.doc2session.delete(o)),this.session2docs.delete(n)}this.sessions.length=0,this.sessions.push(...i),(r=this.jupyterDock.component)==null||r.$set({sessions:i})});this.logger=new Ng(this.name),this.client=new Ru(void 0,"fetch"),this.SETTINGS_DIALOG_ID=`${this.name}-settings-dialog`,this.handlers={gotoBlock:{this:this,func:async(r,n)=>{n===this.clientId&&this.doc2session.has(r)&&await this.gotoBlock(r)}},inputRequest:{this:this,func:this.inputRequest},updateKernelSpecs:{this:this,func:this.updateKernelSpecs},updateKernels:{this:this,func:this.updateKernels},updateSessions:{this:this,func:this.updateSessions}};const s=fg(this);globalThis.customElements.get(s.TAG_NAME)??globalThis.customElements.define(s.TAG_NAME,s)}onload(){this.addIcons([Ql,ec,tc,ic,sc,rc,nc,oc,ac,lc,cc,hc,uc,fc,dc,_c,pc].join(""));const i=this;this.jupyterDock={dock:this.addDock({config:{position:"LeftTop",size:{width:256,height:0},icon:"icon-jupyter-client",title:this.i18n.dock.title,show:!0},data:{},type:"-dock",init(){this.element.classList.add("fn__flex-column");const s=new a1({target:this.element,props:{plugin:i,...this.data,kernelspecs:i.kernelspecs,kernels:i.kernels,sessions:i.sessions}});i.jupyterDock.model=this,i.jupyterDock.component=s},destroy(){var s;(s=i.jupyterDock.component)==null||s.$destroy(),delete i.jupyterDock.component,delete i.jupyterDock.model}})},this.addCommand({langKey:"run-selected-cells",langText:this.i18n.commands.runSelectedCells.text,hotkey:"⌘↩",customHotkey:"⌘↩",editorCallback:async()=>{const r=(await this.executeSelectedCellBlocks()).cells.at(-1);r&&await this.gotoBlock(r.id,!1)}}),this.addCommand({langKey:"run-selected-cells-and-goto-next",langText:this.i18n.commands.runSelectedCellsAndGotoNext.text,hotkey:"⇧↩",customHotkey:"⇧↩",editorCallback:async()=>{const s=await this.executeSelectedCellBlocks(),r=await this.getNextCodeCell(s);if(r)await this.gotoBlock(r.id,!1);else{const n=await this.insertNewCodeCell(s);n&&await this.gotoBlock(n.id,!1)}}}),this.addCommand({langKey:"run-selected-cells-and-insert-below",langText:this.i18n.commands.runSelectedCellsAndInsertBelow.text,hotkey:"⌥↩",customHotkey:"⌥↩",editorCallback:async()=>{const s=await this.executeSelectedCellBlocks(),r=await this.insertNewCodeCell(s);r&&await this.gotoBlock(r.id,!1)}}),this.loadData(Fi.GLOBAL_CONFIG_NAME).then(s=>{this.config=Io(_r,s||{})}).catch(s=>this.logger.error(s)).finally(async()=>{var r;if(this.initBridge(),await this.isWorkerRunning())await this.jupyterForceRefresh();else{for(this.initWorker();await this.isWorkerRunning();)await nv(1e3);await((r=this.bridge)==null?void 0:r.call("onload",this.i18n)),await this.updateWorkerConfig(!0)}this.eventBus.on("click-editortitleicon",this.blockMenuEventListener),this.eventBus.on("click-blockicon",this.blockMenuEventListener),this.eventBus.on("click-editorcontent",this.clickEditorContentEventListener),this.eventBus.on("loaded-protyle",this.loadedProtyleEventListener)})}onLayoutReady(){}onunload(){var i,s;this.eventBus.off("click-editortitleicon",this.blockMenuEventListener),this.eventBus.off("click-blockicon",this.blockMenuEventListener),this.eventBus.off("click-editorcontent",this.clickEditorContentEventListener),this.eventBus.off("loaded-protyle",this.loadedProtyleEventListener),this.worker?(i=this.bridge)==null||i.call("unload").then(()=>{var r,n;(r=this.bridge)==null||r.terminate(),(n=this.worker)==null||n.terminate()}):(s=this.bridge)==null||s.terminate()}openSetting(){const i=this,r=new at.Dialog({title:`${this.i18n.displayName} <code class="fn__code">${this.name}</code>`,content:`<div id="${i.SETTINGS_DIALOG_ID}" class="fn__flex-column" />`,width:dr?"92vw":"720px",height:dr?void 0:"640px"}).element.querySelector(`#${i.SETTINGS_DIALOG_ID}`);r&&new gd({target:r,props:{config:this.config,plugin:this}})}get baseUrl(){var i;return((i=this.config)==null?void 0:i.jupyter.server.settings.baseUrl)||Bs.baseUrl}get newClientId(){return globalThis.Lute.NewNodeID()}async resetConfig(i=!0){return this.updateConfig(Io(_r),i)}async updateConfig(i,s=!1){i&&i!==this.config&&(this.config=i),await this.updateWorkerConfig(s),await this.saveData(Fi.GLOBAL_CONFIG_NAME,this.config)}initBridge(){var i;(i=this.bridge)==null||i.terminate(),this.bridge=new rv(new BroadcastChannel(pe.JUPYTER_WORKER_BROADCAST_CHANNEL_NAME),this.logger,this.handlers,this.clientId)}initWorker(){var i;(i=this.worker)==null||i.terminate(),this.worker=new Worker(`${globalThis.document.baseURI}plugins/${this.name}/workers/${pe.JUPYTER_WORKER_FILE_NAME}.js?v=${Xl.version}`,{type:"module",name:this.name,credentials:"same-origin"})}async isWorkerRunning(){try{return this.bridge||this.initBridge(),await this.bridge.ping(),!0}catch{return!1}}isSessionRunning(i){return this.sessions.some(s=>s.id===i)}isSessionConnected(i){return this.session2docs.has(i)}relateDoc2Session(i,s){const r=this.doc2session.get(i);if(r){const c=this.session2docs.get(r.id);c&&(c.delete(i),c.size===0&&this.session2docs.delete(r.id))}this.doc2session.set(i,s);const n=this.session2docs.get(s.id)??new Set;n.add(i),this.session2docs.set(s.id,n)}async updateWorkerConfig(i){var s,r;await((s=this.bridge)==null?void 0:s.call("updateConfig",this.config)),i&&await((r=this.bridge)==null?void 0:r.call("restart"))}async jupyterFetch(i,s={}){const r=new URL(this.baseUrl);i.startsWith("/")?r.pathname=i:r.pathname=`${r.pathname}/${i}`;const n={Authorization:`token ${this.config.jupyter.server.settings.token}`};s.headers?Object.assign(n,s.headers):s.headers=n;const c=await this.client.forwardProxy({url:r.href,method:s.method,headers:[s.headers],responseEncoding:"base64"});if(200<=c.data.status&&c.data.status<300)return new Blob([tg(c.data.body)],{type:c.data.contentType});throw new Error(c.msg)}async jupyterForceRefresh(){var s,r,n;const i=await Promise.allSettled([(s=this.bridge)==null?void 0:s.call("jupyter.kernelspecs.specs"),(r=this.bridge)==null?void 0:r.call("jupyter.kernels.running"),(n=this.bridge)==null?void 0:n.call("jupyter.sessions.running")]);i[0].status==="fulfilled"&&i[0].value&&this.updateKernelSpecs(i[0].value),i[1].status==="fulfilled"&&i[1].value&&this.updateKernels(i[1].value),i[2].status==="fulfilled"&&i[2].value&&this.updateSessions(i[2].value)}async loadKernelSpecIcon(i,s="#icon-jupyter-client-kernelspec"){if(this.kernelName2logoObjectURL.has(i.name))return this.kernelName2logoObjectURL.get(i.name);const r=(()=>{switch(!0){case"logo-svg"in i.resources:return i.resources["logo-svg"];case"logo-32x32"in i.resources:return i.resources["logo-32x32"];case"logo-64x64"in i.resources:return i.resources["logo-64x64"];default:return Object.keys(i.resources).length>0?Object.values(i.resources)[0]:""}})();if(r)try{const n=await this.jupyterFetch(r,{method:"GET"});if(this.kernelName2logoObjectURL.has(i.name))return this.kernelName2logoObjectURL.get(i.name);{const c=URL.createObjectURL(n);return this.kernelName2logoObjectURL.set(i.name,c),c}}catch(n){this.logger.warn(n)}return this.kernelName2logoObjectURL.set(i.name,s),s}session2ial(i,s=!1){return{[pe.attrs.session.id]:i.id,[pe.attrs.session.name]:i.name,[pe.attrs.session.path]:i.path,[pe.attrs.session.type]:i.type,...this.kernel2ial(i.kernel,s)}}ial2session(i,s=!1){const r=this.counter.next().value,n=i[pe.attrs.session.id]??(s?Mr.v4():pe.JUPYTER_UNKNOWN_VALUE),c=i[pe.attrs.session.name]??(s?`siyuan-console-${r}`:pe.JUPYTER_UNKNOWN_VALUE),o=i[pe.attrs.session.path]??(s?`siyuan-console-${r}-${globalThis.Lute.NewNodeID()}`:pe.JUPYTER_UNKNOWN_VALUE),a=i[pe.attrs.session.type]??(s?"console":pe.JUPYTER_UNKNOWN_VALUE),h=this.ial2kernel(i,s);return{id:n,type:a,name:c,path:o,kernel:h}}kernel2ial(i,s=!1){const r=i&&this.kernelspecs.kernelspecs[i.name]||void 0;return{[pe.attrs.kernel.id]:(i==null?void 0:i.id)??(s?null:void 0),[pe.attrs.kernel.name]:(i==null?void 0:i.name)??(s?null:void 0),[pe.attrs.kernel.language]:(r==null?void 0:r.language)??(s?null:void 0),[pe.attrs.kernel.display_name]:(r==null?void 0:r.display_name)??(s?null:void 0)}}ial2kernel(i,s=!1){const r=i[pe.attrs.kernel.id]??(s?Mr.v4():pe.JUPYTER_UNKNOWN_VALUE),n=i[pe.attrs.kernel.name]??(s?this.kernelspecs.default:pe.JUPYTER_UNKNOWN_VALUE);return{id:r,name:n}}buildJupyterDocumentMenuItems(i,s,r,n){var f,b;const c=[],o=this.ial2session(s,!1),a=((f=r==null?void 0:r.kernel)==null?void 0:f.name)??o.kernel.name,h=this.kernelName2language.get(a)??s[pe.attrs.kernel.language]??pe.JUPYTER_UNKNOWN_VALUE,u=this.kernelName2displayName.get(a)??s[pe.attrs.kernel.display_name]??pe.JUPYTER_UNKNOWN_VALUE;return c.push({icon:"icon-jupyter-client-session",label:this.i18n.menu.session.label,accelerator:r?ht(r.name):void 0,submenu:[{icon:"iconSettings",label:this.i18n.menu.session.submenu.settings.label,click:()=>{const y=new at.Dialog({title:`Jupyter ${this.i18n.settings.sessionSettings.title} <code class="fn__code">${this.name}</code>`,content:`<div id="${this.SETTINGS_DIALOG_ID}" class="fn__flex-column" />`,width:dr?"92vw":"720px"}),v=y.element.querySelector(`#${this.SETTINGS_DIALOG_ID}`);if(v){const m=new U1({target:v,props:{docID:i,docIAL:s,plugin:this}});m.$on("cancel",l=>{y.destroy()}),m.$on("confirm",l=>{y.destroy(),this.updateDockFocusItem(i)})}}},{icon:"iconRefresh",label:this.i18n.menu.session.submenu.shutdown.label,disabled:!r,click:()=>{var y;r&&((y=this.bridge)==null||y.call("jupyter.sessions.shutdown",r.id))}},{type:"separator"},{type:"readonly",iconHTML:"",label:this.i18n.menu.session.submenu.info.label.replaceAll("${1}",ht((r==null?void 0:r.id)??o.id)).replaceAll("${2}",ht((r==null?void 0:r.name)??o.name)).replaceAll("${3}",ht((r==null?void 0:r.path)??o.path)).replaceAll("${4}",ht((r==null?void 0:r.type)??o.type)),disabled:!r}]}),c.push({icon:"icon-jupyter-client-kernel",label:this.i18n.menu.kernel.label,accelerator:r!=null&&r.kernel?ht(r.kernel.name):void 0,submenu:[{icon:"iconRefresh",label:this.i18n.menu.kernel.submenu.reconnect.label,disabled:!(r!=null&&r.kernel),click:async()=>{var y;r!=null&&r.kernel&&await((y=this.bridge)==null?void 0:y.call("jupyter.session.kernel.connection.reconnect",r.id))}},{icon:"iconPause",label:this.i18n.menu.kernel.submenu.interrupt.label,disabled:!(r!=null&&r.kernel),click:async()=>{var y;r!=null&&r.kernel&&await((y=this.bridge)==null?void 0:y.call("jupyter.session.kernel.connection.interrupt",r.id))}},{icon:"iconRefresh",label:this.i18n.menu.kernel.submenu.restart.label,disabled:!(r!=null&&r.kernel),click:async()=>{var y;r!=null&&r.kernel&&await((y=this.bridge)==null?void 0:y.call("jupyter.session.kernel.connection.restart",r.id))}},{icon:"iconClose",label:this.i18n.menu.kernel.submenu.shutdown.label,disabled:!(r!=null&&r.kernel),click:async()=>{var y;r!=null&&r.kernel&&await((y=this.bridge)==null?void 0:y.call("jupyter.session.kernel.connection.shutdown",r.id))}},{type:"separator"},{type:"readonly",iconHTML:"",label:this.i18n.menu.kernel.submenu.info.label.replaceAll("${1}",ht(((b=r==null?void 0:r.kernel)==null?void 0:b.id)??o.kernel.id)).replaceAll("${2}",ht(a)).replaceAll("${3}",ht(h)).replaceAll("${4}",ht(u)),disabled:!(r!=null&&r.kernel)}]}),c.push({type:"separator"}),c.push({icon:"iconPlay",label:this.i18n.menu.run.label,submenu:[{icon:"iconPlay",label:this.i18n.menu.run.submenu.all.label,disabled:!(r!=null&&r.kernel),submenu:this.buildExecuteMenuItems(!1,r,n)},{icon:"iconRefresh",label:this.i18n.menu.run.submenu.restart.label,accelerator:this.i18n.menu.run.submenu.restart.accelerator,disabled:!(r!=null&&r.kernel),submenu:this.buildExecuteMenuItems(!0,r,n)}]}),c.push({type:"separator"}),c.push({icon:"iconUpload",label:this.i18n.menu.import.label,accelerator:ht(this.i18n.menu.import.accelerator),submenu:[{element:globalThis.document.createElement("div"),bind:y=>{new Nn({target:y,props:{file:!0,icon:"#iconEdit",label:this.i18n.menu.import.submenu.override.label,accept:".ipynb",multiple:!1,webkitdirectory:!1}}).$on("selected",async m=>{var p;const _=m.detail.files.item(0);_&&await((p=this.bridge)==null?void 0:p.call("importIpynb",i,_,"override"))})}},{element:globalThis.document.createElement("div"),bind:y=>{new Nn({target:y,props:{file:!0,icon:"#iconAfter",label:this.i18n.menu.import.submenu.append.label,accept:".ipynb",multiple:!1,webkitdirectory:!1}}).$on("selected",async m=>{var p;const _=m.detail.files.item(0);_&&await((p=this.bridge)==null?void 0:p.call("importIpynb",i,_,"append"))})}}]}),c}buildExecuteMenuItems(i,s,r){const n=!(s!=null&&s.kernel),c=r.isDocumentBlock||r.isMultiBlock,o=async u=>{var y;i&&await((y=this.bridge)==null?void 0:y.call("jupyter.session.kernel.connection.restart",s.id));const f=await this.getBlockDOM(r),b=Es(f,c);await this.requestExecuteCells(b,s,u)},a=u=>[{icon:"iconTheme",label:this.i18n.menu.run.submenu.cntrl.enable.label,accelerator:this.i18n.menu.run.submenu.cntrl.enable.accelerator,disabled:n,click:async()=>{u.cntrl=!0,await o(u)}},{icon:"icon-jupyter-client-text",label:this.i18n.menu.run.submenu.cntrl.disable.label,accelerator:this.i18n.menu.run.submenu.cntrl.disable.accelerator,disabled:n,click:async()=>{u.cntrl=!1,await o(u)}}];return[{icon:"iconPlay",label:this.i18n.menu.run.submenu.custom.label,disabled:n,click:async()=>{const u=this.config.jupyter.execute.output.parser;await o(u)}},{icon:"iconCode",label:this.i18n.menu.run.submenu.terminal.label,accelerator:ht("Xterm"),disabled:n,click:async()=>{await o({xterm:!0,escaped:!1,cntrl:!1})}},{icon:"icon-jupyter-client-text",label:this.i18n.menu.run.submenu.escape.enable.label,accelerator:this.i18n.menu.run.submenu.escape.enable.accelerator,disabled:n,submenu:a({xterm:!1,escaped:!0,cntrl:!0})},{icon:"iconMarkdown",label:this.i18n.menu.run.submenu.escape.disable.label,accelerator:this.i18n.menu.run.submenu.escape.disable.accelerator,disabled:n,submenu:a({xterm:!1,escaped:!1,cntrl:!0})}]}buildOpenDocumentMenuItems(i){const s=[];return s.push({icon:"iconAdd",label:this.i18n.menu.openTab.label,click:()=>{at.openTab({app:this.app,doc:{id:i,action:["cb-get-focus","cb-get-hl"]},keepCursor:!1,removeCurrentTab:!1})}}),s.push({icon:"iconMin",label:this.i18n.menu.openTabBackground.label,click:()=>{at.openTab({app:this.app,doc:{id:i,action:["cb-get-focus","cb-get-hl"]},keepCursor:!0,removeCurrentTab:!1})}}),s.push({icon:"iconLayoutRight",label:this.i18n.menu.openTabRight.label,click:()=>{at.openTab({app:this.app,doc:{id:i,action:["cb-get-focus","cb-get-hl"]},position:"right",keepCursor:!1,removeCurrentTab:!1})}}),s.push({icon:"iconLayoutBottom",label:this.i18n.menu.openTabBottom.label,click:()=>{at.openTab({app:this.app,doc:{id:i,action:["cb-get-focus","cb-get-hl"]},position:"bottom",keepCursor:!1,removeCurrentTab:!1})}}),s}async requestExecuteCell(i,s,r,n,c=this.config.jupyter.execute.goto){var o;await((o=this.bridge)==null?void 0:o.call("jupyter.session.kernel.connection.requestExecute",this.clientId,i,s,r,n,c))}async requestExecuteCells(i,s,r,n=this.config.jupyter.execute.goto){for(const c of i)await this.requestExecuteCell(c.code,c.id,s.id,r,n)}async executeSelectedCellBlocks(){const i=fv();if(i.cells.length>0){const s=i.cells[0],r=await this.client.getBlockInfo({id:s.id}),n=this.doc2session.get(r.data.rootID);n?await this.requestExecuteCells(i.cells,n,this.config.jupyter.execute.output.parser,!1):this.siyuan.showMessage(this.i18n.messages.sessionNotConnected.text)}else this.siyuan.showMessage(this.i18n.messages.noValidBlockSelected.text);return i}async getNextCodeCell(i){const s=i.cells.at(-1);if(s){const n=(await this.client.getBlockInfo({id:s.id})).data,o=(await this.client.getDoc({id:n.rootID})).data.content,a=Es(o,!0),h=a.findIndex(u=>u.id===s.id);if(h>=0)return a.at(h+1)}}async insertNewCodeCell(i){var r,n;const s={data:dv(),dataType:"markdown"};switch(i.elements.length){case 0:{const c=Ig();if(c){s.previousID=c;break}else return}default:{const c=i.elements.at(-1);if(!bi(c))return;if(xo(c)){const o=c.nextElementSibling;switch(!0){case _v(o):s.previousID=o.dataset.nodeId;break;case xo(o):case bi(o):s.nextID=o.dataset.nodeId;break;default:{const a=c.parentElement;let h;switch(!0){case Bg(a):{const u=a==null?void 0:a.previousElementSibling;if(Og(u)){h=a.dataset.nodeId;break}else return}case bi(a):h=a.dataset.nodeId;break;default:return}try{return(r=(await this.client.appendBlock({...s,parentID:h})).data[0])==null?void 0:r.doOperations[0]}catch{return}}}}else{s.previousID=c.dataset.nodeId;break}break}}try{return(n=(await this.client.insertBlock(s)).data[0])==null?void 0:n.doOperations[0]}catch{return}}async gotoBlock(i,s=!0,r){await at.openTab({app:this.app,doc:{id:i,action:[s?"cb-get-hl":"cb-get-focus"]},keepCursor:!1,removeCurrentTab:!1,afterOpen:r})}async getBlockDOM(i){var s;if(i.isDocumentBlock)s=(await this.client.getDoc({id:i.id})).data.content;else{const r=[];for(const n of i.blocks)r.push(n.element.outerHTML);s=r.join("")}return s}updateDockFocusItem(i){var r,n,c;const s=this.doc2session.get(i);(c=this.jupyterDock.component)==null||c.$set({currentSpec:(r=s==null?void 0:s.kernel)==null?void 0:r.name,currentKernel:(n=s==null?void 0:s.kernel)==null?void 0:n.id,currentSession:s==null?void 0:s.id,currentDocument:i})}};fe(Fi,"GLOBAL_CONFIG_NAME","global-config");let Or=Fi;module.exports=Or;
