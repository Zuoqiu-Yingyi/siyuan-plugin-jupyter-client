// Copyright (C) 2023 Zuoqiu Yingyi
// 
// This program is free software: you can redistribute it and/or modify
// it under the terms of the GNU Affero General Public License as
// published by the Free Software Foundation, either version 3 of the
// License, or (at your option) any later version.
// 
// This program is distributed in the hope that it will be useful,
// but WITHOUT ANY WARRANTY; without even the implied warranty of
// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
// GNU Affero General Public License for more details.
// 
// You should have received a copy of the GNU Affero General Public License
// along with this program.  If not, see <http://www.gnu.org/licenses/>.

/* ÊÄùÊ∫êÊ†∑Âºè */

:root {
    // jupyter ‰∏ªÈ¢òËâ≤
    --jupyter-client-jupyter-theme-color: #F37726;
}

/* üëá‰ª£Á†ÅÂùó‰∏éËæìÂá∫ÂùóÊ†∑Âºèüëá */
.protyle-wysiwyg {

    // ÊñáÊ°£ÊèêÁ§∫
    // &[custom-prompt],
    &[custom-jupyter-kernel-language],
    &[custom-jupyter-kernel-name],
    &[custom-jupyter-kernel-display-name],
    &[custom-jupyter-kernel-connection-status],
    &[custom-jupyter-kernel-status] {

        &::after {
            content: "#Ô∏è‚É£" attr(custom-jupyter-kernel-language) // ÂÜÖÊ†∏ËØ≠Ë®Ä
                " ‚öõ" attr(custom-jupyter-kernel-name) // ÂÜÖÊ†∏ÂêçÁß∞
                " ‚Ñπ" attr(custom-jupyter-kernel-display-name) // ÂÜÖÊ†∏ÊèèËø∞
                " üì∂" attr(custom-jupyter-kernel-connection-status) // ËøûÊé•Áä∂ÊÄÅ
                " üí°" attr(custom-jupyter-kernel-status) // ÂÜÖÊ†∏Áä∂ÊÄÅ
                "";
            position: absolute;
            bottom: 0.5em;
            right: 1em;
            z-index: 1;

            font-size: 0.75em;
            padding: 3px;
            outline: 1px solid var(--jupyter-client-jupyter-theme-color);
        }
    }

    [data-node-id][custom-jupyter-block-type] {
        &::before {
            /* ËøêË°åÂ∫èÂè∑ */
            content: "[" attr(custom-jupyter-index) "]:";
            position: sticky;

            top: 0.25em;
            z-index: 1;

            line-height: 1em;
            font-size: 75%;
            font-weight: bolder;
        }

        // ‰ª£Á†ÅÂùó
        &[custom-jupyter-block-type=code] {

            &::before {
                /* ËøêË°åÂÆåÊàê */
                // color: var(--b3-card-success-color);
                position: absolute;

                top: 0.5em;
                left: 0.25em;
            }

            &::after {
                /* ËøêË°åÊó∂Èó¥ */
                content: attr(custom-jupyter-time);
                font-size: 85%;
                position: absolute;
                bottom: 0;
                left: 3.75em;
                z-index: 1;
                color: var(--b3-theme-on-surface);
            }

            &[linenumber="true"]::after {
                /* ËøêË°åÊó∂Èó¥-ÊòæÁ§∫Ë°åÂè∑ */
                left: 3.75em;
            }

            &[linenumber="false"]::after {
                /* ËøêË°åÊó∂Èó¥-‰∏çÊòæÁ§∫Ë°åÂè∑ */
                left: 0.25em;
            }
        }

        // ËæìÂá∫Âùó
        &[custom-jupyter-block-type=output] {
            font-family: var(--b3-font-family-code); // ËæìÂá∫ÂÜÖÂÆπ‰ΩøÁî®Á≠âÂÆΩÂ≠ó‰Ωì

            &::before {
                /* ËøêË°åÁªìÊûú */
                color: var(--b3-card-info-color);
            }

            &[custom-jupyter-index="E"]::before {
                /* ËøêË°åÁªìÊûúÊúâËØØ */
                color: var(--b3-card-error-color);
            }

            // ÂàÜÂâ≤Á∫ø
            >.hr[data-node-id] {
                margin-top: 0;
                margin-bottom: 0;

                padding-top: 0;
                padding-bottom: 0;

                >div {
                    height: 1em;

                    &::after {
                        top: 0.5em;
                    }
                }
            }
        }

        // ÂèëÁîü‰∏≠Êñ≠
        &[custom-jupyter-index=" "],
        // Ê≠£Âú®ËøêË°å
        &[custom-jupyter-index="*"] {
            &::before {
                color: var(--b3-card-warning-color);
            }
        }
    }
}
